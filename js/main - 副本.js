var compileProductName="Flip HTML5";(this||(0,eval)("(this)")).bdor=[];
(function(b){function c(b){b=f.match(b);if(null==b||0==b.length)return 0;b=b[0];var c=b.indexOf("/");b=b.substring(c+1,b.length);return""==b?0:parseInt(b)}function d(b){b=f.match(b);if(null==b||0==b.length)return 0;b=b[0].replace("_",".").match(/\d+\.?\d?/);if(null==b||0==b.length)return 0;b=b[0];return""==b?0:parseFloat(b)}var f=navigator.userAgent.toLowerCase();b.browser={};b.browser.webkit=/webkit/.test(f);b.browser.mozilla=/firefox/.test(f);b.browser.firefox=b.browser.mozilla;b.browser.msie=/msie/.test(f)||
/trident/.test(f)||/edge/.test(f);b.browser.edge=/edge/.test(f);b.browser.opera=/opera/.test(f)||/opr/.test(f);b.browser.chrome=/chrome/.test(f)&&!b.browser.opera&&!b.browser.edge;b.browser.uc=/ucbrowser/.test(f);b.browser.safari=/safari/.test(f)&&!b.browser.chrome&&!b.browser.uc&&!b.browser.opera;b.browser.wechat=/mqqbrowser/.test(f);b.browser.version=0;bdor[1]="p";b.browser.firefox&&(b.browser.version=c(/firefox\/\d+/));if(b.browser.msie){var g=f.match(/msie\s?\d+\.0/);null==g?(g=f.match(/trident\/\d+\.0/),
null!=g&&0<g.length?(g=g[0],g=parseInt(g.replace("trident/","")),b.browser.version=g+4):(g=f.match(/edge\/\d+\.0/),null!=g&&0<g.length&&(g=g[0],g=parseInt(g.replace("edge/","")),b.browser.version=g))):(g=parseInt(g[0].replace("msie","")),b.browser.version=g)}b.browser.opera&&(b.browser.version=c(/opera\/\d+/)||c(/opr\/\d+/));b.browser.chrome&&(b.browser.version=c(/chrome\/\d+/));b.browser.uc&&(b.browser.version=c(/ucbrowser\/\d+/));b.browser.safari&&(b.browser.version=c(/safari\/\d+/));if(void 0==
b.browser.device){b.browser.DEVICE_PC=0;b.browser.DEVICE_PAD=1;b.browser.DEVICE_PHONE=2;var g=/pad/.test(f)||/ipod/.test(f),h=/iphone/.test(f),k=/wpdesktop/.test(f)||/windows phone/.test(f),l=/blackberry/.test(f),m=/mobile/.test(f)||/phone/.test(f);b.browser.device=b.browser.DEVICE_PC;if(g)b.browser.device=b.browser.DEVICE_PAD;else if(h||k||l||m)b.browser.device=b.browser.DEVICE_PHONE}void 0==b.browser.app&&(b.browser.app=/android-app/.test(f));void 0==b.browser.prefix&&(b.browser.prefix="",!0==b.browser.webkit&&
(b.browser.prefix="-webkit-"),!0==b.browser.mozilla&&(b.browser.prefix="-moz-"),!0==b.browser.opera&&(b.browser.prefix="-webkit-"),!0==b.browser.uc&&(b.browser.prefix="-webkit-"),!0==b.browser.msie&&(b.browser.prefix="-ms-"));if(void 0==b.system){b.system={name:"",version:0};b.system.WINDOWS="Windows";b.system.WP="WinPhone";b.system.WP_DESKTOP="WinPhoneDesktop";b.system.MAC="Mac OS";b.system.IOS="iPhone OS";b.system.LINUX="Linux";b.system.ANDROID="Android";b.system.BLACKBERRY="BlackBerry";/windows/.test(f)&&
(b.system.name=b.system.WINDOWS,b.system.version=d(/windows nt\s?\d+\.?\d?/));/windows phone/.test(f)&&(b.system.name=b.system.WP,b.system.version=d(/windows phone\s?\d+\.?\d?/));/wpdesktop/.test(f)&&(b.system.name=b.system.WP_DESKTOP,b.system.version=d(/wpdesktop\s?\d+\.?\d?/));if(b.system.name!=b.system.WP){if(/iphone/.test(f)||/ipad/.test(f))b.system.name=b.system.IOS,b.system.version=d(/os\s?\d+_?\d?/);/android/.test(f)&&(b.system.name=b.system.ANDROID,b.system.version=d(/android\s?\d+\.?\d?/))}/mac/.test(f)&&
b.browser.system!=b.browser.IOS&&(b.system.name=b.system.MAC,b.system.version=d(/os x\s?\d+\.?\d?/));/linux/.test(f)&&!/android/.test(f)&&(b.system.name=b.system.LINUX);/blackberry/.test(f)&&(b.system.name=b.system.BLACKBERRY,b.system.version=d(/blackberry\s?\d+/))}})(jQuery);
var isFirefox=function(){return $.browser.firefox},isIE=function(){return $.browser.msie},isIE8=function(){return $.browser.msie&&8==$.browser.version},isIE9=function(){return $.browser.msie&&9==$.browser.version},isIE11=function(){return $.browser.msie&&11==$.browser.version},isBelowIE11=function(){return $.browser.msie&&11>$.browser.version},isPad=function(){return $.browser.device==$.browser.DEVICE_PAD||$.browser.device==$.browser.DEVICE_PC&&$.system.name==$.system.ANDROID?!0:!1},isIpad=function(){var b=
navigator.userAgent.toLowerCase();return 0<b.indexOf("ipad")&&0<b.indexOf("safari")},isPC=function(){return $.browser.device==$.browser.DEVICE_PC?!0:!1},isIpod=function(){return 0<navigator.userAgent.toLowerCase().indexOf("ipod")},isIphone=function(){return 0<navigator.userAgent.toLowerCase().indexOf("iphone")},isNokiaPhone=function(){var b=navigator.userAgent.toLowerCase();return 0<b.indexOf("msie")&&0<b.indexOf("wpdesktop")},isPhone=function(){var b=window.location.search;return $.browser.device==
$.browser.DEVICE_PHONE||0<=b.toLowerCase().indexOf("phone=true")||0<=b.toLowerCase().indexOf("phonebook=true")?!0:!1},isAndroidWeChat=function(){return $.system.name==$.system.ANDROID&&$.browser.chrome&&40>$.browser.version},isAndroidDefault=function(){return $.system.name==$.system.ANDROID&&$.browser.safari},isPhoneBook=function(){if($.system.name==$.system.ANDROID&&$.browser.uc)return!0;var b=window.location.search;return(isPhone()||isPad())&&$.system.name==$.system.ANDROID&&4>parseInt($.system.version)||
0<=b.toLowerCase().indexOf("phonebook=true")||(isPhone()||isPad())&&"slide"==bookConfig.FlipStyle.toLowerCase()?!0:!1},isHigherThanIOS8=function(){return $.system.name==$.system.IOS&&8<=$.system.version},isInTheFrame=function(){return window.top!=window};function isBelowIE9(){return $.browser.msie?9>$.browser.version?!0:!1:!1}function isBelowIE8(){return $.browser.msie?8>$.browser.version?!0:!1:!1}function isBelowIE10(){return $.browser.msie?10>$.browser.version?!0:!1:!1}
var global=function(){return this||(0,eval)("(this)")}(),virtual_function=function(){};function getPackageByName(b){if(void 0==b||""==b)return global;var c=global;b=b.split(".");for(var d=0;d<b.length;d++){var f=b[d];c[f]||(c[f]={IS_PACKAGE_OBJECT:!0});c=c[f]}return c}function getClassByFullName(b){if(-1==b.indexOf("."))return global[b];var c=b.split(".");b=c.pop();c=c.join(".");return getPackageByName(c)[b]}
function classof(b,c){if(!b)return"";c||(c=global);"string"==typeof c&&(c=getPackageByName(c));var d=["webkitStorageInfo","webkitIndexedDB"],f;for(f in c)try{if(!(-1<d.indexOf(f))&&c[f]instanceof Function)try{if(b instanceof c[f])return f}catch(g){}}catch(h){}for(f in c)try{if("object"==typeof c[f]&&c[f].IS_PACKAGE_OBJECT){var k=classof(b,c[f]);if(""!=k)return f+"."+k}}catch(l){}return""}
function nameof(b,c){if(!b)return"";c||(c=global);"string"==typeof c&&(c=getPackageByName(c));var d=["webkitStorageInfo","webkitIndexedDB"],f;for(f in c)try{if(!(-1<d.indexOf(f))&&c[f]==b)return f}catch(g){}for(f in c)try{if("object"==typeof c[f]&&c[f].IS_PACKAGE_OBJECT){var h=nameof(b,c[f]);if(""!=h)return f+"."+h}}catch(k){}return""}
function Class(b,c){if("string"===typeof b){var d=c,f=getPackageByName(d.Package);f[b]=Class(d);return f[b]}var g=function(){if(this.Import){"string"==typeof this.Import&&(this.Import=[this.Import]);for(var b=0;b<this.Import.length;b++){var c=this.Import[b],d=getPackageByName(c);if(d instanceof Function)this[c.split(".").pop()]=d;else for(var f in d)d[f]instanceof Function&&(this[f]=d[f])}}d=getPackageByName(this.Package);if(d!=global)for(f in d)this.getClassName()!=f&&d[f]instanceof Function&&(this[f]=
d[f]);this.create&&this.create instanceof Function&&this.create.apply(this,arguments)};g.prototype=b||{};var h;g.prototype.getClassName=function(){h||(h=nameof(g,this.Package));return h};g.prototype.getClass=function(){return g};d=g.prototype.statics;if(void 0!=d){for(f in d)void 0==g[f]&&(g[f]=d[f]);delete g.prototype.statics}return g}
Function.prototype.extend=function(b){if(!b)return this;if("string"==typeof b)if(-1<b.indexOf(".")){if(b=getClassByFullName(b),!b)return this}else{var c=this.prototype.Package,d=b;c&&""!=c&&(b=c+"."+d);b=getClassByFullName(b);if(!b&&(b=getClassByFullName(d),!b))return this}if(b instanceof Function){for(var f in b)void 0==this[f]&&(this[f]=b[f]);for(f in b.prototype)void 0==this.prototype[f]?b.prototype[f]==virtual_function?console&&console.error&&console.error("virtual function [%s] must be override.",
f):this.prototype[f]=b.prototype[f]:(d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,this.prototype[f]instanceof Function&&b.prototype[f]instanceof Function&&d.test(this.prototype[f])&&(this.prototype[f]=function(b,c){return function(){var d=this._super;this._super=b;var f=c.apply(this,arguments);this._super=d;return f}}(b.prototype[f],this.prototype[f])));return this}return"object"!==typeof b?this:this.extend(Class(b))};
Function.prototype.expand=function(b,c){if("object"===typeof b){void 0==c&&(c=!1);if(!0===c)for(var d in b)this.prototype[d]=b[d];else this.extend(Class(b));return this}};
var Instance={copy:function(b){if(!b||"object"!==typeof b)return b;var c={};b instanceof Array&&(c=[]);for(property in b)c[property]="object"==typeof b[property]?Instance.copy(b[property]):b[property];return c},create:function(b,c){c||(c=[]);var d=b;"string"==typeof b&&(d=getClassByFullName(d));if(!d)return null;var f=d.prototype.create;d.prototype.create=function(){};var g=new d;d.prototype.create=f;g.create&&g.create instanceof Function&&g.create.apply(g,c);return g},JSON:function(b){if(void 0===
b)return"undefined";if(null===b)return"null";if(b instanceof Array){var c=[];c.push("[");for(var d=0;d<b.length;d++)c.push(Instance.JSON(b[d])),c.push(", ");1<c.length&&c.pop();c.push("]");return c.join("")}if(b instanceof Function)return b;if("string"===typeof b)return b=b.toString(),b=b.replaceAll("\\","\\\\",!0),b=b.replaceAll('"','\\"',!0),'"'+b+'"';if("number"===typeof b)return Number(b).toString();if("boolean"===typeof b)return Boolean(b).toString();if("object"===typeof b){c=[];c.push("{");
for(d in b){var f='"'+d+'":'+Instance.JSON(b[d]);c.push(f);c.push(", ")}1<c.length&&c.pop();c.push("}");return c.join("")}},parse:function(b,c){return b&&"undefined"!=b&&"null"!=b&&""!=b?eval("("+b+")"):c}};Object.create=Object.create||function(){function b(){}return function(c){if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");b.prototype=c;return new b}}();
Object.keys=Object.keys||function(b){if(b!==Object(b))throw new TypeError("Object.keys called on a non-object");var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push(d);return c};
(function(){for(var b=0,c=["webkit","moz"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var d=(new Date).getTime(),h=Math.max(0,16.7-(d-b)),k=window.setTimeout(function(){c(d+h)},h);b=d+h;return k});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();
var ColorTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff0",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdC",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",value:function(b){if(!b||"string"!=typeof b)return b;var c=b.toLowerCase();return this[c]?this[c]:b}};
Function.expand({bind:function(b){var c=this;return function(){return c.apply(b,arguments)}},delay:function(b,c,d){"object"!==typeof b&&(d=c,c=b,b=global);c=c||1;d=d||[];return setTimeout(function(){this.apply(b,d)}.bind(this),c)},interval:function(b,c,d){"object"!==typeof b&&(d=c,c=b,b=global);c=c||1;d=d||[];var f=this;return{intervalId:setInterval(function(){this.apply(b,d)}.bind(this),c),stop:function(){clearInterval(this.intervalId);this.intervalId=void 0},isRunning:function(){return void 0!=
this.intervalId},start:function(){this.intervalId=setInterval(function(){f.apply(b,d)},c)}}},animation:function(b,c){"object"!==typeof b&&(c=b,b=global);var d={stopFlag:!1,stop:function(){this.stopFlag=!0}},f=this,g=0,h=Math.ceil(c/16.7),k=function(){!0!==d.stopFlag&&(g++,!1!==f.apply(b,[g,h])&&(g<h||void 0==c)&&window.requestAnimationFrame(k))};k();return d},once:function(b,c){b||(b=global);this.executed||(this.executed=!1);this.executed||(this.apply(b,c),this.executed=!0)}});
String.expand({trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},replaceAll:function(b,c,d){void 0==d&&(d=!1);if(!b||!c)return this;if(RegExp&&!d)return this.replace(RegExp(b,"g"),c);var f=this.indexOf(b);d=[];for(var g=this;-1!=f;){var f=f+b.length,h=g.substring(0,f),g=g.substring(f),h=h.replace(b,c);d.push(h);f=g.indexOf(b)}""!==g&&d.push(g);return d.join("")},subBetween:function(b,c){if(void 0==b||void 0==c)return"";var d=this.length,f=this.indexOf(b);if(-1==f)return"";f+=b.length;d=this.substring(f,
d).indexOf(c);return-1==d?"":this.substring(f,d+f)},isUrl:function(){if(""==this.trim()||!RegExp)return!1;var b=/((((ht|f)tp(s?))\:\/\/)|(www\.))([\w\-]+\.)+\w+[\/\w]*/gi,c=this.toLowerCase();return!!c.match(/(((ht|f)tp(s?))\:\/\/)?(www\.)?([\w\-]+\.)+\w+[\/\w]*/gi)||!!c.match(b)},isEmail:function(){return""==this?!1:!!this.toLowerCase().match(/^([A-Za-z0-9])(\w)+@(\w)+(\.)(com|com\.cn|net|cn|net\.cn|org|biz|info|gov|gov\.cn|edu|edu\.cn)/)},toArray:function(b){b||(b="");return this.split(b)},reverse:function(){var b=
this.split("");b.reverse();return b.join("")},equals:function(b){return this.trim()==b.trim()},equalsIgnoreCase:function(b){return this.toLowerCase().trim()==b.toLowerCase().trim()},like:function(b){if(!b)return!1;b=this.toLowerCase().trim();var c=this.toLowerCase().trim();return-1<b.indexOf(c)||-1<c.indexOf(b)},contains:function(b){return-1<this.indexOf(b)},startsWith:function(b){return""===b?!1:this.substr(0,b.length)===b},endsWith:function(b){return""===b?!1:this.substr(-b.length,b.length)===b},
isEnglish:function(){return/[\x00-\xff]/.test(this)},overflow:function(b){if(void 0==b)return this.toString();var c=2;/[^\x00-\xff]/.test(this)&&(b=Math.floor(b/2),c=Math.floor(c/2));return this.length-b>c?this.substr(0,b)+"...":this.toString()},remove:function(b){if("string"!=typeof b||!b)return this;var c=this.indexOf(b);if(0>c)return this;b=b.length;return this.substring(0,c)+this.substring(c+b,this.length)},removeStartFrom:function(b){if("string"==typeof b&&b)return b=this.indexOf(b),0>b?this:
this.substring(0,b)},cycleToLength:function(b){if(!isNaN(b)){for(var c=parseInt(b/this.length),d=this;0<c;)d+=this,c--;return d.substring(0,b)}},firstUpperCase:function(){return 1>this.length?this:this.substring(0,1).toUpperCase()+this.substring(1)},firstLowerCase:function(){return 1>this.length?this:this.substring(0,1).toLowerCase()+this.substring(1)},extract:function(){if(0==this.length||0==arguments.length)return[];for(var b=[],c=this.toString(),d=0;d<c.length;){for(var f=!1,g=0;g<arguments.length;g++){var h=
arguments[g];if(c.substr(d,h.length)==h){b.push(h);d+=h.length;f=!0;break}}f||d++}return b},statics:{format:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];for(var b=arguments[0],c=b.extract("%s","%d","%f","%b","%o"),d=1;d<arguments.length;d++){var f=arguments[d],g=c[d-1];"%s"==g&&("string"==typeof f?b=b.replace("%s",f):b=b.replace("%s",""));if("%d"==g){isNaN(f)&&(f=0);var h;h="number"==typeof f?-1==Number(f).toString().indexOf("."):!1;h?b=b.replace("%d",f+""):
b=b.replace("%d","")}"%f"==g&&(isNaN(f)&&(f=0),"number"==typeof f?b=b.replace("%f",f+""):b=b.replace("%f",""));"%b"==g&&(f=!!f,"boolean"==typeof f?b=b.replace("%b",f+""):b=b.replace("%b",""));"%o"==g&&("object"==typeof f?b=b.replace("%o",Instance.JSON(f)):b=b.replace("%o",""))}return b},toUtf8:function(b){if(!b)return"";var c,d,f=[],g=b.length;for(c=0;c<g;c++)d=b.charCodeAt(c),0<d&&127>=d?f.push(b.charAt(c)):128<=d&&2047>=d?f.push(String.fromCharCode(192|d>>6&31),String.fromCharCode(128|d&63)):2048<=
d&&65535>=d&&f.push(String.fromCharCode(224|d>>12&15),String.fromCharCode(128|d>>6&63),String.fromCharCode(128|d&63));return f.join("")},parseUtf8:function(b){if(!b)return"";var c,d,f,g=[],h=b.length;for(c=0;c<h;c++)d=[],d.push(b.charCodeAt(c)),0==(d[0]>>7&255)?g.push(b.charAt(c)):6==(d[0]>>5&255)?(d.push(b.charCodeAt(++c)),f=[],f.push(d[0]&31),f.push(d[1]&63),g.push(String.fromCharCode(f[0]<<6|f[1]))):14==(d[0]>>4&255)&&(d.push(b.charCodeAt(++c)),d.push(b.charCodeAt(++c)),f=[],f.push(d[0]<<4|d[1]>>
2&15),f.push((d[1]&3)<<6|d[2]&63),g.push(String.fromCharCode(f[0]<<8|f[1])));return g.join("")}}});Array.expand({remove:function(b){return isNaN(b)||b>this.length?!1:this.splice(b,1)[0]},indexOf:function(b){for(var c=0;c<this.length;c++)if(this[c]===b)return c;return-1},removeElement:function(b){b=this.indexOf(b);-1<b&&this.remove(b)},lastIndexOf:function(b){for(var c=-1,d=0;d<this.length;d++)this[d]===b&&(c=d);return c},statics:{isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)}}});
Date.expand({format:function(b,c){c=c||!0;var d={"y+":this.getYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var f in d)RegExp("("+f+")").test(b)&&(b=!0===c?b.replace(RegExp.$1,d[f]):b.replace(RegExp.$1,1==RegExp.$1.length?d[f]:("00"+d[f]).substr((""+d[f]).length)));return b},
statics:{now:function(){return(new Date).getTime()}}});
Number.expand({statics:{between:function(b,c,d){if(isNaN(b)||isNaN(c)||isNaN(d))return b;var f=Math.min(c,d);c=Math.max(c,d);b<f&&(b=f);b>c&&(b=c);return b},isBetween:function(b,c,d){if(isNaN(c)||isNaN(d)||isNaN(b))return!1;var f=Math.min(c,d);c=Math.max(c,d);return b>=f&&b<=c?!0:!1},fixed:function(b,c){if(isNaN(b))return b;isNaN(c)&&(c=0);var d=Math.pow(10,c);return Math.round(b*d)/d},decimals:function(b){if(isNaN(b))return-1;b=Number(b).toString();var c=b.indexOf(".");return-1==c?0:b.length-c-1},
random:function(b,c,d){if(isNaN(b)||isNaN(c))return 0;void 0==d&&Number.decimals(b)==Number.decimals(c)&&(d=Number.decimals(b));var f=Math.min(b,c);b=Math.max(b,c);c=Math.random();f+=(b-f)*c;return!d||0>d||isNaN(d)?Math.floor(f):Number.fixed(f,d)}}});
var Color=function(b){b&&"object"==typeof b&&b.toString&&(b=b.toString());return{value:ColorTable.value(b),toString:function(){function b(c,d,h){if(c.length<h&&c.length>d)for(;c.length<h;)c="0"+c;return c}var d=this.value;d||(d=0);if("string"==typeof d){if(0==d.indexOf("#"))return d;if(0==d.indexOf("0x"))return d.replace("0x","#")}d=parseInt(d);d=0>d?Number(0):d;d=d.toString(16);8<d.length&&(d=d.substr(0,8));d=b(d,6,8);d=b(d,0,6);return"#"+d},valueOf:toString,split:function(){var b={r:0,g:0,b:0,a:255};
if(!this.value)return b;var d=this.toString(),f="FF",g="FF",h="FF",k="FF";switch(d.length){case 9:k=d.substr(1,2);f=d.substr(3,2);g=d.substr(5,2);h=d.substr(7,2);break;case 7:f=d.substr(1,2);g=d.substr(3,2);h=d.substr(5,2);break;case 4:f=d.substr(1,1);g=d.substr(2,1);h=d.substr(3,1);f+=f;g+=g;h+=h;break;default:return b}return{r:parseInt(f,16),g:parseInt(g,16),b:parseInt(h,16),a:parseInt(k,16)}},add:function(b){var d;d="object"==typeof b?b:{r:b,g:b,b:b,a:1};var f=this.split();b=Number.between(f.r+
d.r,0,255).toString(16).toUpperCase();var g=Number.between(f.g+d.g,0,255).toString(16).toUpperCase();d=Number.between(f.b+d.b,0,255).toString(16).toUpperCase();f=Number(f.a).toString(16).toUpperCase();b=1>=b.length?"0"+b:b;g=1>=g.length?"0"+g:g;d=1>=d.length?"0"+d:d;f=1>=f.length?"0"+f:f;return"FF"==f?"#"+b+g+d:"#"+f+b+g+d},reduce:function(b){return this.add("object"==typeof b?b:{r:-b,g:-b,b:-b,a:1})},rgba:function(b){var d=this.split();b=void 0==b||""===b?d.a:parseFloat(b);1<b&&(b=Number.fixed(b/
255,2));return String.format("rgba(%d,%d,%d,%f)",d.r,d.g,d.b,b)},equals:function(b){return this.toString()==Color(b).toString()},difference:function(b){var d=this.split();b=Color(b).split();return{r:Math.abs(d.r-b.r),g:Math.abs(d.g-b.g),b:Math.abs(d.b-b.b),a:Math.abs(d.a-b.a)}},reverse:function(){var b=this.split(),d=Number.between(255-b.r,0,255).toString(16).toUpperCase(),f=Number.between(255-b.g,0,255).toString(16).toUpperCase(),g=Number.between(255-b.b,0,255).toString(16).toUpperCase(),b=Number(b.a).toString(16).toUpperCase(),
d=1>=d.length?"0"+d:d,f=1>=f.length?"0"+f:f,g=1>=g.length?"0"+g:g,b=1>=b.length?"0"+b:b;return"FF"==b?"#"+d+f+g:"#"+b+d+f+g}}};function colorSplit(b){return Color(b).split()}function colorAdd(b,c){return Color(b).add(c)}function colorDiv(b,c){return Color(b).reduce(c)}function equals(b,c){return 1E-7>Math.abs(b-c)}
var Point=function(b,c){return{x:b,y:c,isNearTo:function(b,c){if(!b)return!1;void 0==c&&(c=5);return Math.abs(this.x-b.x)<c&&Math.abs(this.y-b.y)<c},equals:function(b){return b?equals(this.x,b.x)&&equals(this.y,b.y):!1},toString:function(){return"("+this.x+","+this.y+")"},clone:function(){return Point(this.x,this.y)},getX:function(){return this.x},getY:function(){return this.y},isNaP:function(){return isNaN(this.x)||isNaN(this.y)}}};Point.NaP=function(){return Point(Number.NaN,Number.NaN)};
$.browser.mozilla&&(HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(b){this.textContent=b}));bdor[30]=function(b,c){return bdor[b]-c};
Class("RangeSlider",{create:function(b,c){this.slider=b;this.min=0;this.max=c.max?c.max:1;isNaN(this.max)&&(this.max=100);this.onChange=c.onChange;this.init();void 0==c.range||isNaN(c.range)?(this.currentRange=0,this.setRange(0)):(this.currentRange=c.range,this.setRange(c.range))},init:function(){this.slider_total=$('<div class="slider-total"></div>');this.slider_range=$('<div class="slider-range"></div>');this.slider_hander=$('<div class="slider-handle"></div>');this.slider_range.css("pointer-events",
"none");this.slider_hander.css("pointer-events","none");this.slider.append(this.slider_total);this.slider.append(this.slider_range);this.slider.append(this.slider_hander);this.initEvents()},initEvents:function(){this.isMouseDown=!1;this.slider_total.bind(_event._down,function(b){this.isMouseDown=!0;b=isTouch?b.originalEvent?b.originalEvent.changedTouches:b.changedTouches:[b];this.onChangeRange(b);return!1}.bind(this));this.slider_total.bind(_event._move,function(b){if(this.isMouseDown)return b=isTouch?
b.originalEvent?b.originalEvent.changedTouches:b.changedTouches:[b],this.onChangeRange(b),!1}.bind(this));this.slider_total.bind(_event._up,function(b){return this.isMouseDown=!1}.bind(this));this.slider_total.bind(_event._leave,function(b){this.isMouseDown=!1}.bind(this));this.slider_hander.bind(_event._down,function(b){b=isTouch?b.originalEvent?b.originalEvent.changedTouches:b.changedTouches:[b];this.onChangeRange(b);return!1}.bind(this))},setMax:function(b){this.max=b},setRange:function(b){if(void 0!=
b){this.range=parseFloat(b);this.animation&&this.animation.stop();var c=this.currentRange,d=this.range;this.animation=function(b,g){this.currentRange=$.easing.swing(null,b,c,d-c,g);this.moveToRange(this.currentRange);this.currentRange==this.range&&this.animation&&this.animation.stop()}.animation(this,200)}},onChangeRange:virtual_function,moveToRange:virtual_function});
Class("VerticalSlider",{onChangeRange:function(b){b=b[0];if(void 0!=b){var c=$(b.target),d=b.offsetY;void 0==d&&(d=b.pageY-c.offset().top);b=(c.height()-d)/this.slider_total.height()*this.max;this.setRange(b);if(this.onChange)this.onChange(b)}},moveToRange:function(b){this.slider_total.offset();this.slider.offset();var c=parseInt(this.slider_range.css("bottom").replace("px","")),d=this.slider_hander.width(),f=this.slider_total.height()-d;b=Math.floor(b*f/this.max);b=Math.min(b,f);d=b+d/2;this.slider_hander.css({bottom:b+
c});this.slider_range.css({height:d})}}).extend("RangeSlider");
Class("HorizontalSlider",{onChangeRange:function(b){b=b[0];if(void 0!=b){var c=$(b.target),d=b.offsetX;void 0==d&&(d=b.pageX-c.offset().left);b=d/this.slider_total.width()*this.max;this.setRange(b);if(this.onChange)this.onChange(b)}},moveToRange:function(b){var c=this.slider_total.offset().left-this.slider.offset().left;parseInt(this.slider_range.css("bottom").replace("px",""));var d=this.slider_hander.width(),f=this.slider_total.width()-d;b=Math.floor(b*f/this.max);b=Math.min(b,f);d=b+d/2;this.slider_hander.css({left:b+
c});this.slider_range.css({width:d})}}).extend("RangeSlider");(function(b){b.fn.slider=function(b){if(b){this.empty();var d=null;(d="horizontal"==b.direction?new HorizontalSlider(this,b):new VerticalSlider(this,b))||(d=new HorizontalSlider(this,b));return d}}})(jQuery);
(function(b){var c="object"==typeof exports&&exports,d="object"==typeof module&&module&&module.exports==c&&module,f="object"==typeof global&&global;if(f.global===f||f.window===f)b=f;var g=function(b){this.message=b};g.prototype=Error();g.prototype.name="InvalidCharacterError";var h={encode:function(b){b=String(b);if(/[^\0-\xFF]/.test(b))throw new g("The string to be encoded contains characters outside of the Latin1 range.");for(var c=b.length%3,d="",f=-1,h,k,s,r=b.length-c;++f<r;)h=b.charCodeAt(f)<<
16,k=b.charCodeAt(++f)<<8,s=b.charCodeAt(++f),h=h+k+s,d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h&63);2==c?(h=b.charCodeAt(f)<<8,k=b.charCodeAt(++f),h+=k,d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>
10)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>4&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h<<2&63)+"="):1==c&&(h=b.charCodeAt(f),d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h<<4&63)+"==");return d},decode:function(b){b=String(b);for(var c=b.length,d=0,f,g,h="",k=-1;++k<c;)g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b.charAt(k)),
f=d%4?64*f+g:g,d++%4&&(h+=String.fromCharCode(255&f>>(-2*d&6)));return h},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return h});else if(c&&!c.nodeType)if(d)d.exports=h;else for(var k in h)h.hasOwnProperty(k)&&(c[k]=h[k]);else b.base64=h})(this);function parsHexToNormalString(b){for(var c="";2<=b.length;)c+=String.fromCharCode(parseInt(b.substring(0,2),16)),b=b.substring(2,b.length);return c}
function parseHexString(b){for(var c=[];2<=b.length;)c.push(parseInt(b.substring(0,2),16)),b=b.substring(2,b.length);return c}function byteArray2String(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b[d]);return c}
function rc4(b,c){for(var d=[],f=[],g=0;256>g;g++)d[g]=g,f[g]=b.charCodeAt(g%b.length);for(var h=0,g=0;256>g;g++){var h=h+d[g]+f[g]&255,k=d[g];d[g]=d[h];d[h]=k}for(var l=h=f=0,m,k="",g=0;g<c.length;g++)f=f+1&255,h=h+d[f]&255,l=d[f],d[f]=d[h],d[h]=l,l=d[f]+d[h]&255,m=c.charCodeAt(g),m^=d[l],k+=String.fromCharCode(m);return k}
String.prototype.MD5=function(b){function c(b,c){var d,f,g,h,k;g=b&2147483648;h=c&2147483648;d=b&1073741824;f=c&1073741824;k=(b&1073741823)+(c&1073741823);return d&f?k^2147483648^g^h:d|f?k&1073741824?k^3221225472^g^h:k^1073741824^g^h:k^g^h}function d(b,d,f,g,h,k,l){b=c(b,c(c(d&f|~d&g,h),l));return c(b<<k|b>>>32-k,d)}function f(b,d,f,g,h,k,l){b=c(b,c(c(d&g|f&~g,h),l));return c(b<<k|b>>>32-k,d)}function g(b,d,f,g,h,k,l){b=c(b,c(c(d^f^g,h),l));return c(b<<k|b>>>32-k,d)}function h(b,d,f,g,h,k,l){b=c(b,
c(c(f^(d|~g),h),l));return c(b<<k|b>>>32-k,d)}function k(b){var c="",d="",f;for(f=0;3>=f;f++)d=b>>>8*f&255,d="0"+d.toString(16),c+=d.substr(d.length-2,2);return c}var l=[],m,n,p,q,t,s,r,u,v,l=function(b){var c,d=b.length;c=d+8;for(var f=16*((c-c%64)/64+1),g=Array(f-1),h=0,k=0;k<d;)c=(k-k%4)/4,h=k%4*8,g[c]|=b.charCodeAt(k)<<h,k++;c=(k-k%4)/4;g[c]|=128<<k%4*8;g[f-2]=d<<3;g[f-1]=d>>>29;return g}(this);s=1732584193;r=4023233417;u=2562383102;v=271733878;for(m=0;m<l.length;m+=16)n=s,p=r,q=u,t=v,s=d(s,r,
u,v,l[m+0],7,3614090360),v=d(v,s,r,u,l[m+1],12,3905402710),u=d(u,v,s,r,l[m+2],17,606105819),r=d(r,u,v,s,l[m+3],22,3250441966),s=d(s,r,u,v,l[m+4],7,4118548399),v=d(v,s,r,u,l[m+5],12,1200080426),u=d(u,v,s,r,l[m+6],17,2821735955),r=d(r,u,v,s,l[m+7],22,4249261313),s=d(s,r,u,v,l[m+8],7,1770035416),v=d(v,s,r,u,l[m+9],12,2336552879),u=d(u,v,s,r,l[m+10],17,4294925233),r=d(r,u,v,s,l[m+11],22,2304563134),s=d(s,r,u,v,l[m+12],7,1804603682),v=d(v,s,r,u,l[m+13],12,4254626195),u=d(u,v,s,r,l[m+14],17,2792965006),
r=d(r,u,v,s,l[m+15],22,1236535329),s=f(s,r,u,v,l[m+1],5,4129170786),v=f(v,s,r,u,l[m+6],9,3225465664),u=f(u,v,s,r,l[m+11],14,643717713),r=f(r,u,v,s,l[m+0],20,3921069994),s=f(s,r,u,v,l[m+5],5,3593408605),v=f(v,s,r,u,l[m+10],9,38016083),u=f(u,v,s,r,l[m+15],14,3634488961),r=f(r,u,v,s,l[m+4],20,3889429448),s=f(s,r,u,v,l[m+9],5,568446438),v=f(v,s,r,u,l[m+14],9,3275163606),u=f(u,v,s,r,l[m+3],14,4107603335),r=f(r,u,v,s,l[m+8],20,1163531501),s=f(s,r,u,v,l[m+13],5,2850285829),v=f(v,s,r,u,l[m+2],9,4243563512),
u=f(u,v,s,r,l[m+7],14,1735328473),r=f(r,u,v,s,l[m+12],20,2368359562),s=g(s,r,u,v,l[m+5],4,4294588738),v=g(v,s,r,u,l[m+8],11,2272392833),u=g(u,v,s,r,l[m+11],16,1839030562),r=g(r,u,v,s,l[m+14],23,4259657740),s=g(s,r,u,v,l[m+1],4,2763975236),v=g(v,s,r,u,l[m+4],11,1272893353),u=g(u,v,s,r,l[m+7],16,4139469664),r=g(r,u,v,s,l[m+10],23,3200236656),s=g(s,r,u,v,l[m+13],4,681279174),v=g(v,s,r,u,l[m+0],11,3936430074),u=g(u,v,s,r,l[m+3],16,3572445317),r=g(r,u,v,s,l[m+6],23,76029189),s=g(s,r,u,v,l[m+9],4,3654602809),
v=g(v,s,r,u,l[m+12],11,3873151461),u=g(u,v,s,r,l[m+15],16,530742520),r=g(r,u,v,s,l[m+2],23,3299628645),s=h(s,r,u,v,l[m+0],6,4096336452),v=h(v,s,r,u,l[m+7],10,1126891415),u=h(u,v,s,r,l[m+14],15,2878612391),r=h(r,u,v,s,l[m+5],21,4237533241),s=h(s,r,u,v,l[m+12],6,1700485571),v=h(v,s,r,u,l[m+3],10,2399980690),u=h(u,v,s,r,l[m+10],15,4293915773),r=h(r,u,v,s,l[m+1],21,2240044497),s=h(s,r,u,v,l[m+8],6,1873313359),v=h(v,s,r,u,l[m+15],10,4264355552),u=h(u,v,s,r,l[m+6],15,2734768916),r=h(r,u,v,s,l[m+13],21,
1309151649),s=h(s,r,u,v,l[m+4],6,4149444226),v=h(v,s,r,u,l[m+11],10,3174756917),u=h(u,v,s,r,l[m+2],15,718787259),r=h(r,u,v,s,l[m+9],21,3951481745),s=c(s,n),r=c(r,p),u=c(u,q),v=c(v,t);return 32==b?k(s)+k(r)+k(u)+k(v):k(r)+k(u)};function QR8bitByte(b){this.mode=QRMode.MODE_8BIT_BYTE;this.data=b}QR8bitByte.prototype={getLength:function(b){return this.data.length},write:function(b){for(var c=0;c<this.data.length;c++)b.put(this.data.charCodeAt(c),8)}};
function QRCode(b,c){this.typeNumber=b;this.errorCorrectLevel=c;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=[]}
QRCode.prototype={addData:function(b){b=new QR8bitByte(b);this.dataList.push(b);this.dataCache=null},isDark:function(b,c){if(0>b||this.moduleCount<=b||0>c||this.moduleCount<=c)throw Error(b+","+c);return this.modules[b][c]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var b=1,b=1;40>b;b++){for(var c=QRRSBlock.getRSBlocks(b,this.errorCorrectLevel),d=new QRBitBuffer,f=0,g=0;g<c.length;g++)f+=c[g].dataCount;for(g=0;g<this.dataList.length;g++)c=this.dataList[g],
d.put(c.mode,4),d.put(c.getLength(),QRUtil.getLengthInBits(c.mode,b)),c.write(d);if(d.getLengthInBits()<=8*f)break}this.typeNumber=b}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(b,c){this.moduleCount=4*this.typeNumber+17;this.modules=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=Array(this.moduleCount);for(var f=0;f<this.moduleCount;f++)this.modules[d][f]=null}this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,
this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(b,c);7<=this.typeNumber&&this.setupTypeNumber(b);null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList));this.mapData(this.dataCache,c)},setupPositionProbePattern:function(b,c){for(var d=-1;7>=d;d++)if(!(-1>=b+d||this.moduleCount<=b+d))for(var f=-1;7>=f;f++)-1>=c+f||this.moduleCount<=c+f||(this.modules[b+d][c+f]=0<=d&&6>=d&&(0==f||6==f)||0<=f&&6>=
f&&(0==d||6==d)||2<=d&&4>=d&&2<=f&&4>=f?!0:!1)},getBestMaskPattern:function(){for(var b=0,c=0,d=0;8>d;d++){this.makeImpl(!0,d);var f=QRUtil.getLostPoint(this);if(0==d||b>f)b=f,c=d}return c},createMovieClip:function(b,c,d){b=b.createEmptyMovieClip(c,d);this.make();for(c=0;c<this.modules.length;c++){d=1*c;for(var f=0;f<this.modules[c].length;f++){var g=1*f;this.modules[c][f]&&(b.beginFill(0,100),b.moveTo(g,d),b.lineTo(g+1,d),b.lineTo(g+1,d+1),b.lineTo(g,d+1),b.endFill())}}return b},setupTimingPattern:function(){for(var b=
8;b<this.moduleCount-8;b++)null==this.modules[b][6]&&(this.modules[b][6]=0==b%2);for(b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=0==b%2)},setupPositionAdjustPattern:function(){for(var b=QRUtil.getPatternPosition(this.typeNumber),c=0;c<b.length;c++)for(var d=0;d<b.length;d++){var f=b[c],g=b[d];if(null==this.modules[f][g])for(var h=-2;2>=h;h++)for(var k=-2;2>=k;k++)this.modules[f+h][g+k]=-2==h||2==h||-2==k||2==k||0==h&&0==k?!0:!1}},setupTypeNumber:function(b){for(var c=
QRUtil.getBCHTypeNumber(this.typeNumber),d=0;18>d;d++){var f=!b&&1==(c>>d&1);this.modules[Math.floor(d/3)][d%3+this.moduleCount-8-3]=f}for(d=0;18>d;d++)f=!b&&1==(c>>d&1),this.modules[d%3+this.moduleCount-8-3][Math.floor(d/3)]=f},setupTypeInfo:function(b,c){for(var d=QRUtil.getBCHTypeInfo(this.errorCorrectLevel<<3|c),f=0;15>f;f++){var g=!b&&1==(d>>f&1);6>f?this.modules[f][8]=g:8>f?this.modules[f+1][8]=g:this.modules[this.moduleCount-15+f][8]=g}for(f=0;15>f;f++)g=!b&&1==(d>>f&1),8>f?this.modules[8][this.moduleCount-
f-1]=g:9>f?this.modules[8][15-f-1+1]=g:this.modules[8][15-f-1]=g;this.modules[this.moduleCount-8][8]=!b},mapData:function(b,c){for(var d=-1,f=this.moduleCount-1,g=7,h=0,k=this.moduleCount-1;0<k;k-=2)for(6==k&&k--;;){for(var l=0;2>l;l++)if(null==this.modules[f][k-l]){var m=!1;h<b.length&&(m=1==(b[h]>>>g&1));QRUtil.getMask(c,f,k-l)&&(m=!m);this.modules[f][k-l]=m;g--; -1==g&&(h++,g=7)}f+=d;if(0>f||this.moduleCount<=f){f-=d;d=-d;break}}}};QRCode.PAD0=236;QRCode.PAD1=17;
QRCode.createData=function(b,c,d){c=QRRSBlock.getRSBlocks(b,c);for(var f=new QRBitBuffer,g=0;g<d.length;g++){var h=d[g];f.put(h.mode,4);f.put(h.getLength(),QRUtil.getLengthInBits(h.mode,b));h.write(f)}for(g=b=0;g<c.length;g++)b+=c[g].dataCount;if(f.getLengthInBits()>8*b)throw Error("code length overflow. ("+f.getLengthInBits()+">"+8*b+")");for(f.getLengthInBits()+4<=8*b&&f.put(0,4);0!=f.getLengthInBits()%8;)f.putBit(!1);for(;!(f.getLengthInBits()>=8*b);){f.put(QRCode.PAD0,8);if(f.getLengthInBits()>=
8*b)break;f.put(QRCode.PAD1,8)}return QRCode.createBytes(f,c)};
QRCode.createBytes=function(b,c){for(var d=0,f=0,g=0,h=Array(c.length),k=Array(c.length),l=0;l<c.length;l++){var m=c[l].dataCount,n=c[l].totalCount-m,f=Math.max(f,m),g=Math.max(g,n);h[l]=Array(m);for(var p=0;p<h[l].length;p++)h[l][p]=255&b.buffer[p+d];d+=m;p=QRUtil.getErrorCorrectPolynomial(n);m=(new QRPolynomial(h[l],p.getLength()-1)).mod(p);k[l]=Array(p.getLength()-1);for(p=0;p<k[l].length;p++)n=p+m.getLength()-k[l].length,k[l][p]=0<=n?m.get(n):0}for(p=l=0;p<c.length;p++)l+=c[p].totalCount;d=Array(l);
for(p=m=0;p<f;p++)for(l=0;l<c.length;l++)p<h[l].length&&(d[m++]=h[l][p]);for(p=0;p<g;p++)for(l=0;l<c.length;l++)p<k[l].length&&(d[m++]=k[l][p]);return d};
for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,
30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(b){for(var c=b<<10;0<=QRUtil.getBCHDigit(c)-QRUtil.getBCHDigit(QRUtil.G15);)c^=
QRUtil.G15<<QRUtil.getBCHDigit(c)-QRUtil.getBCHDigit(QRUtil.G15);return(b<<10|c)^QRUtil.G15_MASK},getBCHTypeNumber:function(b){for(var c=b<<12;0<=QRUtil.getBCHDigit(c)-QRUtil.getBCHDigit(QRUtil.G18);)c^=QRUtil.G18<<QRUtil.getBCHDigit(c)-QRUtil.getBCHDigit(QRUtil.G18);return b<<12|c},getBCHDigit:function(b){for(var c=0;0!=b;)c++,b>>>=1;return c},getPatternPosition:function(b){return QRUtil.PATTERN_POSITION_TABLE[b-1]},getMask:function(b,c,d){switch(b){case QRMaskPattern.PATTERN000:return 0==(c+d)%
2;case QRMaskPattern.PATTERN001:return 0==c%2;case QRMaskPattern.PATTERN010:return 0==d%3;case QRMaskPattern.PATTERN011:return 0==(c+d)%3;case QRMaskPattern.PATTERN100:return 0==(Math.floor(c/2)+Math.floor(d/3))%2;case QRMaskPattern.PATTERN101:return 0==c*d%2+c*d%3;case QRMaskPattern.PATTERN110:return 0==(c*d%2+c*d%3)%2;case QRMaskPattern.PATTERN111:return 0==(c*d%3+(c+d)%2)%2;default:throw Error("bad maskPattern:"+b);}},getErrorCorrectPolynomial:function(b){for(var c=new QRPolynomial([1],0),d=0;d<
b;d++)c=c.multiply(new QRPolynomial([1,QRMath.gexp(d)],0));return c},getLengthInBits:function(b,c){if(1<=c&&10>c)switch(b){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw Error("mode:"+b);}else if(27>c)switch(b){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw Error("mode:"+b);}else if(41>c)switch(b){case QRMode.MODE_NUMBER:return 14;
case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw Error("mode:"+b);}else throw Error("type:"+c);},getLostPoint:function(b){for(var c=b.getModuleCount(),d=0,f=0;f<c;f++)for(var g=0;g<c;g++){for(var h=0,k=b.isDark(f,g),l=-1;1>=l;l++)if(!(0>f+l||c<=f+l))for(var m=-1;1>=m;m++)0>g+m||c<=g+m||0==l&&0==m||k!=b.isDark(f+l,g+m)||h++;5<h&&(d+=3+h-5)}for(f=0;f<c-1;f++)for(g=0;g<c-1;g++)if(h=0,b.isDark(f,g)&&h++,b.isDark(f+1,g)&&h++,b.isDark(f,
g+1)&&h++,b.isDark(f+1,g+1)&&h++,0==h||4==h)d+=3;for(f=0;f<c;f++)for(g=0;g<c-6;g++)b.isDark(f,g)&&!b.isDark(f,g+1)&&b.isDark(f,g+2)&&b.isDark(f,g+3)&&b.isDark(f,g+4)&&!b.isDark(f,g+5)&&b.isDark(f,g+6)&&(d+=40);for(g=0;g<c;g++)for(f=0;f<c-6;f++)b.isDark(f,g)&&!b.isDark(f+1,g)&&b.isDark(f+2,g)&&b.isDark(f+3,g)&&b.isDark(f+4,g)&&!b.isDark(f+5,g)&&b.isDark(f+6,g)&&(d+=40);for(g=h=0;g<c;g++)for(f=0;f<c;f++)b.isDark(f,g)&&h++;b=Math.abs(100*h/c/c-50)/5;return d+10*b}},QRMath={glog:function(b){if(1>b)throw Error("glog("+
b+")");return QRMath.LOG_TABLE[b]},gexp:function(b){for(;0>b;)b+=255;for(;256<=b;)b-=255;return QRMath.EXP_TABLE[b]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;
function QRPolynomial(b,c){if(void 0==b.length)throw Error(b.length+"/"+c);for(var d=0;d<b.length&&0==b[d];)d++;this.num=Array(b.length-d+c);for(var f=0;f<b.length-d;f++)this.num[f]=b[f+d]}
QRPolynomial.prototype={get:function(b){return this.num[b]},getLength:function(){return this.num.length},multiply:function(b){for(var c=Array(this.getLength()+b.getLength()-1),d=0;d<this.getLength();d++)for(var f=0;f<b.getLength();f++)c[d+f]^=QRMath.gexp(QRMath.glog(this.get(d))+QRMath.glog(b.get(f)));return new QRPolynomial(c,0)},mod:function(b){if(0>this.getLength()-b.getLength())return this;for(var c=QRMath.glog(this.get(0))-QRMath.glog(b.get(0)),d=Array(this.getLength()),f=0;f<this.getLength();f++)d[f]=
this.get(f);for(f=0;f<b.getLength();f++)d[f]^=QRMath.gexp(QRMath.glog(b.get(f))+c);return(new QRPolynomial(d,0)).mod(b)}};function QRRSBlock(b,c){this.totalCount=b;this.dataCount=c}
QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,
44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,
75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,
117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,
75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,
54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];
QRRSBlock.getRSBlocks=function(b,c){var d=QRRSBlock.getRsBlockTable(b,c);if(void 0==d)throw Error("bad rs block @ typeNumber:"+b+"/errorCorrectLevel:"+c);for(var f=d.length/3,g=[],h=0;h<f;h++)for(var k=d[3*h+0],l=d[3*h+1],m=d[3*h+2],n=0;n<k;n++)g.push(new QRRSBlock(l,m));return g};
QRRSBlock.getRsBlockTable=function(b,c){switch(c){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(b-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(b-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(b-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(b-1)+3]}};function QRBitBuffer(){this.buffer=[];this.length=0}
QRBitBuffer.prototype={get:function(b){return 1==(this.buffer[Math.floor(b/8)]>>>7-b%8&1)},put:function(b,c){for(var d=0;d<c;d++)this.putBit(1==(b>>>c-d-1&1))},getLengthInBits:function(){return this.length},putBit:function(b){var c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0);b&&(this.buffer[c]|=128>>>this.length%8);this.length++}};
(function(b){b.fn.qrcode=function(c){"string"===typeof c&&(c={text:c});c=b.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},c);return this.each(function(){var d;if("canvas"==c.render){d=new QRCode(c.typeNumber,c.correctLevel);d.addData(c.text);d.make();var f=document.createElement("canvas");f.width=c.width;f.height=c.height;for(var g=f.getContext("2d"),h=c.width/d.getModuleCount(),k=c.height/d.getModuleCount(),
l=0;l<d.getModuleCount();l++)for(var m=0;m<d.getModuleCount();m++){g.fillStyle=d.isDark(l,m)?c.foreground:c.background;var n=Math.ceil((m+1)*h)-Math.floor(m*h),p=Math.ceil((l+1)*h)-Math.floor(l*h);g.fillRect(Math.round(m*h),Math.round(l*k),n,p)}}else for(d=new QRCode(c.typeNumber,c.correctLevel),d.addData(c.text),d.make(),f=b("<table></table>").css("width",c.width+"px").css("height",c.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",c.background),g=c.width/
d.getModuleCount(),h=c.height/d.getModuleCount(),k=0;k<d.getModuleCount();k++)for(l=b("<tr></tr>").css("height",h+"px").appendTo(f),m=0;m<d.getModuleCount();m++)b("<td></td>").css("width",g+"px").css("background-color",d.isDark(k,m)?c.foreground:c.background).appendTo(l);d=f;jQuery(d).appendTo(this)})}})(jQuery);
!function(b,c,d,f){function g(b,c,d){return Array.isArray(b)?(h(b,d[c],d),!0):!1}function h(b,c,d){var g;if(b)if(b.forEach)b.forEach(c,d);else if(b.length!==f)for(g=0;g<b.length;)c.call(d,b[g],g,b),g++;else for(g in b)b.hasOwnProperty(g)&&c.call(d,b[g],g,b)}function k(c,d,f){var g="DEPRECATED METHOD: "+d+"\n"+f+" AT \n";return function(){var d=Error("get-stack-trace"),d=d&&d.stack?d.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):
"Unknown Stack Trace",f=b.console&&(b.console.warn||b.console.log);return f&&f.call(b.console,g,d),c.apply(this,arguments)}}function l(b,c,d){var f=c.prototype;c=b.prototype=Object.create(f);c.constructor=b;c._super=f;d&&N(c,d)}function m(b,c){return function(){return b.apply(c,arguments)}}function n(b,c){return typeof b==Na?b.apply(c?c[0]||f:f,c):b}function p(b,c,d){h(s(c),function(c){"undefined"!=typeof window.addEventListener?b.addEventListener(c,d,!1):b.attachEvent(c,d)})}function q(b,c,d){h(s(c),
function(c){"undefined"!=typeof window.removeEventListener?b.removeEventListener(c,d,!1):b.detachEvent(c,d)})}function t(b,c){for(;b;){if(b==c)return!0;b=b.parentNode}return!1}function s(b){return b.trim().split(/\s+/g)}function r(b,c,d){if(b.indexOf&&!d)return b.indexOf(c);for(var f=0;f<b.length;){if(d&&b[f][d]==c||!d&&b[f]===c)return f;f++}return-1}function u(b){return Array.prototype.slice.call(b,0)}function v(b,c,d){for(var f=[],g=[],h=0;h<b.length;){var k=c?b[h][c]:b[h];0>r(g,k)&&f.push(b[h]);
g[h]=k;h++}return d&&(f=c?f.sort(function(b,d){return b[c]>d[c]}):f.sort()),f}function w(b,c){if(c&&c[0]){for(var d,g,h=c[0].toUpperCase()+c.slice(1),k=0;k<Aa.length;){if(d=Aa[k],g=d?d+h:c,g in b)return g;k++}return f}}function y(c){c=c.ownerDocument||c;return c.defaultView||c.parentWindow||b}function x(b,c){var d=this;this.manager=b;this.callback=c;this.element=b.element;this.target=b.options.inputTarget;this.domHandler=function(c){n(b.options.enable,[b])&&d.handler(c)};this.init()}function z(b){var c=
b.options.inputClass;return new (c?c:Oa?I:Pa?V:Ba?O:D)(b,E)}function E(b,c,d){var g=d.pointers.length,h=d.changedPointers.length,k=c&F&&0===g-h,g=c&(B|G)&&0===g-h;d.isFirst=!!k;d.isFinal=!!g;k&&(b.session={});d.eventType=c;c=b.session;k=d.pointers;g=k.length;c.firstInput||(c.firstInput=A(d));1<g&&!c.firstMultiple?c.firstMultiple=A(d):1===g&&(c.firstMultiple=!1);var h=c.firstInput,l=(g=c.firstMultiple)?g.center:h.center,m=d.center=C(k);d.timeStamp=ta();d.deltaTime=d.timeStamp-h.timeStamp;d.angle=S(l,
m);d.distance=K(l,m);var h=d.center,l=c.offsetDelta||{},m=c.prevDelta||{},n=c.prevInput||{};d.eventType!==F&&n.eventType!==B||(m=c.prevDelta={x:n.deltaX||0,y:n.deltaY||0},l=c.offsetDelta={x:h.x,y:h.y});d.deltaX=m.x+(h.x-l.x);d.deltaY=m.y+(h.y-l.y);d.offsetDirection=L(d.deltaX,d.deltaY);h=d.deltaX/d.deltaTime||0;l=d.deltaY/d.deltaTime||0;d.overallVelocityX=h;d.overallVelocityY=l;d.overallVelocity=W(h)>W(l)?h:l;d.scale=g?K(k[0],k[1],la)/K(g.pointers[0],g.pointers[1],la):1;d.rotation=g?S(k[1],k[0],la)+
S(g.pointers[1],g.pointers[0],la):0;d.maxPointers=c.prevInput?d.pointers.length>c.prevInput.maxPointers?d.pointers.length:c.prevInput.maxPointers:d.pointers.length;l=c.lastInterval||d;k=d.timeStamp-l.timeStamp;d.eventType!=G&&(k>Qa||l.velocity===f)?(h=d.deltaX-l.deltaX,l=d.deltaY-l.deltaY,m=h/k||0,n=l/k||0,k=m,g=n,m=W(m)>W(n)?m:n,h=L(h,l),c.lastInterval=d):(m=l.velocity,k=l.velocityX,g=l.velocityY,h=l.direction);d.velocity=m;d.velocityX=k;d.velocityY=g;d.direction=h;c=b.element;t(d.srcEvent.target,
c)&&(c=d.srcEvent.target);d.target=c;b.emit("hammer.input",d);b.recognize(d);b.session.prevInput=d}function A(b){for(var c=[],d=0;d<b.pointers.length;)c[d]={clientX:aa(b.pointers[d].clientX),clientY:aa(b.pointers[d].clientY)},d++;return{timeStamp:ta(),pointers:c,center:C(c),deltaX:b.deltaX,deltaY:b.deltaY}}function C(b){var c=b.length;if(1===c)return{x:aa(b[0].clientX),y:aa(b[0].clientY)};for(var d=0,f=0,g=0;c>g;)d+=b[g].clientX,f+=b[g].clientY,g++;return{x:aa(d/c),y:aa(f/c)}}function L(b,c){return b===
c?ma:W(b)>=W(c)?0>b?da:ea:0>c?fa:ha}function K(b,c,d){d||(d=Ca);var f=c[d[0]]-b[d[0]];b=c[d[1]]-b[d[1]];return Math.sqrt(f*f+b*b)}function S(b,c,d){d||(d=Ca);return 180*Math.atan2(c[d[1]]-b[d[1]],c[d[0]]-b[d[0]])/Math.PI}function D(){this.evEl=Ra;this.evWin=Sa;this.pressed=!1;x.apply(this,arguments)}function I(){this.evEl=Da;this.evWin=Ea;x.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function ia(){this.evTarget=Ta;this.evWin=Ua;this.started=!1;x.apply(this,arguments)}function V(){this.evTarget=
Va;this.targetIds={};x.apply(this,arguments)}function X(b,c){var d=u(b.touches),f=this.targetIds;if(c&(F|Y)&&1===d.length)return f[d[0].identifier]=!0,[d,d];var g,h=u(b.changedTouches),k=[],l=this.target;if(g=d.filter(function(b){return t(b.target,l)}),c===F)for(d=0;d<g.length;)f[g[d].identifier]=!0,d++;for(d=0;d<h.length;)f[h[d].identifier]&&k.push(h[d]),c&(B|G)&&delete f[h[d].identifier],d++;return k.length?[v(g.concat(k),"identifier",!0),k]:void 0}function O(){x.apply(this,arguments);var b=m(this.handler,
this);this.touch=new V(this.manager,b);this.mouse=new D(this.manager,b);this.primaryTouch=null;this.lastTouches=[]}function ja(b){b=b.changedPointers[0];if(b.identifier===this.primaryTouch){var c={x:b.clientX,y:b.clientY};this.lastTouches.push(c);var d=this.lastTouches;setTimeout(function(){var b=d.indexOf(c);-1<b&&d.splice(b,1)},Wa)}}function T(b,c){this.manager=b;this.set(c)}function Xa(b){if(-1<b.indexOf(ba))return ba;var c=-1<b.indexOf(na),d=-1<b.indexOf(oa);return c&&d?ba:c||d?c?na:oa:-1<b.indexOf(ua)?
ua:Fa}function P(b){this.options=N({},this.defaults,b||{});this.id=Ya++;this.manager=null;this.options.enable=this.options.enable===f?!0:this.options.enable;this.state=pa;this.simultaneous={};this.requireFail=[]}function Ga(b){return b&ka?"cancel":b&U?"end":b&ca?"move":b&H?"start":""}function Ha(b){return b==ha?"down":b==fa?"up":b==da?"left":b==ea?"right":""}function qa(b,c){var d=c.manager;return d?d.get(b):b}function J(){P.apply(this,arguments)}function ra(){J.apply(this,arguments);this.pY=this.pX=
null}function va(){J.apply(this,arguments)}function wa(){P.apply(this,arguments);this._input=this._timer=null}function xa(){J.apply(this,arguments)}function ya(){J.apply(this,arguments)}function sa(){P.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function Q(b,c){return c=c||{},c.recognizers=c.recognizers===f?Q.defaults.preset:c.recognizers,new za(b,c)}function za(b,c){this.options=N({},Q.defaults,c||{});this.options.inputTarget=this.options.inputTarget||
b;this.handlers={};this.session={};this.recognizers=[];this.element=b;this.input=z(this);this.touchAction=new T(this,this.options.touchAction);Ia(this,!0);h(this.options.recognizers,function(b){var c=this.add(new b[0](b[1]));b[2]&&c.recognizeWith(b[2]);b[3]&&c.requireFailure(b[3])},this)}function Ia(b,c){var d=b.element;d.style&&h(b.options.cssProps,function(b,f){d.style[w(d.style,f)]=c?b:""})}function Za(b,d){var f=c.createEvent("Event");f.initEvent(b,!0,!0);f.gesture=d;d.target.dispatchEvent(f)}
var N,Aa=" webkit Moz MS ms o".split(" "),$a=c.createElement("div"),Na="function",aa=Math.round,W=Math.abs,ta=Date.now;N="function"!=typeof Object.assign?function(b){if(b===f||null===b)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(b),d=1;d<arguments.length;d++){var g=arguments[d];if(g!==f&&null!==g)for(var h in g)g.hasOwnProperty(h)&&(c[h]=g[h])}return c}:Object.assign;var Ja=k(function(b,c,d){for(var g=Object.keys(c),h=0;h<g.length;)(!d||d&&b[g[h]]===f)&&(b[g[h]]=
c[g[h]]),h++;return b},"extend","Use `assign`."),ab=k(function(b,c){return Ja(b,c,!0)},"merge","Use `assign`."),Ya=1,bb=/mobile|tablet|ip(ad|hone|od)|android/i,Ba="ontouchstart"in b,Oa=w(b,"PointerEvent")!==f,Pa=Ba&&bb.test(navigator.userAgent),Qa=25,F=1,Y=2,B=4,G=8,ma=1,da=2,ea=4,fa=8,ha=16,M=da|ea,Z=fa|ha,Ka=M|Z,Ca=["x","y"],la=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler);this.evTarget&&p(this.target,this.evTarget,this.domHandler);
this.evWin&&p(y(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&q(this.element,this.evEl,this.domHandler);this.evTarget&&q(this.target,this.evTarget,this.domHandler);this.evWin&&q(y(this.element),this.evWin,this.domHandler)}};var cb={mousedown:F,mousemove:Y,mouseup:B},Ra="mousedown",Sa="mousemove mouseup";l(D,x,{handler:function(b){var c=cb[b.type];c&F&&0===b.button&&(this.pressed=!0);c&Y&&1!==b.which&&(c=B);this.pressed&&(c&B&&(this.pressed=!1),this.callback(this.manager,
c,{pointers:[b],changedPointers:[b],pointerType:"mouse",srcEvent:b}))}});var db={pointerdown:F,pointermove:Y,pointerup:B,pointercancel:G,pointerout:G},eb={2:"touch",3:"pen",4:"mouse",5:"kinect"},Da="pointerdown",Ea="pointermove pointerup pointercancel";b.MSPointerEvent&&!b.PointerEvent&&(Da="MSPointerDown",Ea="MSPointerMove MSPointerUp MSPointerCancel");l(I,x,{handler:function(b){var c=this.store,d=!1,f=b.type.toLowerCase().replace("ms",""),f=db[f],g=eb[b.pointerType]||b.pointerType,h="touch"==g,
k=r(c,b.pointerId,"pointerId");f&F&&(0===b.button||h)?0>k&&(c.push(b),k=c.length-1):f&(B|G)&&(d=!0);0>k||(c[k]=b,this.callback(this.manager,f,{pointers:c,changedPointers:[b],pointerType:g,srcEvent:b}),d&&c.splice(k,1))}});var fb={touchstart:F,touchmove:Y,touchend:B,touchcancel:G},Ta="touchstart",Ua="touchstart touchmove touchend touchcancel";l(ia,x,{handler:function(b){var c=fb[b.type];if(c===F&&(this.started=!0),this.started){var d,f=u(b.touches);d=u(b.changedTouches);d=(c&(B|G)&&(f=v(f.concat(d),
"identifier",!0)),[f,d]);c&(B|G)&&0===d[0].length-d[1].length&&(this.started=!1);this.callback(this.manager,c,{pointers:d[0],changedPointers:d[1],pointerType:"touch",srcEvent:b})}}});var gb={touchstart:F,touchmove:Y,touchend:B,touchcancel:G},Va="touchstart touchmove touchend touchcancel";l(V,x,{handler:function(b){var c=gb[b.type],d=X.call(this,b,c);d&&this.callback(this.manager,c,{pointers:d[0],changedPointers:d[1],pointerType:"touch",srcEvent:b})}});var Wa=2500;l(O,x,{handler:function(b,c,d){var f=
"touch"==d.pointerType,g="mouse"==d.pointerType;if(!(g&&d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents)){if(f)c&F?(this.primaryTouch=d.changedPointers[0].identifier,ja.call(this,d)):c&(B|G)&&ja.call(this,d);else{if(f=g)a:{for(var f=d.srcEvent.clientX,g=d.srcEvent.clientY,h=0;h<this.lastTouches.length;h++){var k=this.lastTouches[h],l=Math.abs(f-k.x),k=Math.abs(g-k.y);if(25>=l&&25>=k){f=!0;break a}}f=!1}if(f)return}this.callback(b,c,d)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});
var La=w($a.style,"touchAction"),Ma=La!==f,Fa="auto",ua="manipulation",ba="none",na="pan-x",oa="pan-y";T.prototype={set:function(b){"compute"==b&&(b=this.compute());Ma&&this.manager.element.style&&(this.manager.element.style[La]=b);this.actions=b.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var b=[];return h(this.manager.recognizers,function(c){n(c.options.enable,[c])&&(b=b.concat(c.getTouchAction()))}),Xa(b.join(" "))},preventDefaults:function(b){if(!Ma){var c=
b.srcEvent,d=b.offsetDirection;if(!this.manager.session.prevented){void c.preventDefault();var f=this.actions,g=-1<f.indexOf(ba),h=-1<f.indexOf(oa),f=-1<f.indexOf(na);if(g){var k=2>b.distance,l=250>b.deltaTime;if(1===b.pointers.length&&k&&l)return}if(!f||!h)return g||h&&d&M||f&&d&Z?this.preventSrc(c):void 0}}},preventSrc:function(b){this.manager.session.prevented=!0;b.preventDefault()}};var pa=1,H=2,ca=4,U=8,R=U,ka=16;P.prototype={defaults:{},set:function(b){return N(this.options,b),this.manager&&
this.manager.touchAction.update(),this},recognizeWith:function(b){if(g(b,"recognizeWith",this))return this;var c=this.simultaneous;return b=qa(b,this),c[b.id]||(c[b.id]=b,b.recognizeWith(this)),this},dropRecognizeWith:function(b){return g(b,"dropRecognizeWith",this)?this:(b=qa(b,this),delete this.simultaneous[b.id],this)},requireFailure:function(b){if(g(b,"requireFailure",this))return this;var c=this.requireFail;return b=qa(b,this),-1===r(c,b)&&(c.push(b),b.requireFailure(this)),this},dropRequireFailure:function(b){if(g(b,
"dropRequireFailure",this))return this;b=qa(b,this);b=r(this.requireFail,b);return-1<b&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(b){return!!this.simultaneous[b.id]},emit:function(b){function c(f){d.manager.emit(f,b)}var d=this,f=this.state;U>f&&c(d.options.event+Ga(f));c(d.options.event);b.additionalEvent&&c(b.additionalEvent);f>=U&&c(d.options.event+Ga(f))},tryEmit:function(b){return this.canEmit()?this.emit(b):void(this.state=
32)},canEmit:function(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(32|pa)))return!1;b++}return!0},recognize:function(b){b=N({},b);return n(this.options.enable,[this,b])?(this.state&(R|ka|32)&&(this.state=pa),this.state=this.process(b),void(this.state&(H|ca|U|ka)&&this.tryEmit(b))):(this.reset(),void(this.state=32))},process:function(b){},getTouchAction:function(){},reset:function(){}};l(J,P,{defaults:{pointers:1},attrTest:function(b){var c=this.options.pointers;return 0===
c||b.pointers.length===c},process:function(b){var c=this.state,d=b.eventType,f=c&(H|ca);b=this.attrTest(b);return f&&(d&G||!b)?c|ka:f||b?d&B?c|U:c&H?c|ca:H:32}});l(ra,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ka},getTouchAction:function(){var b=this.options.direction,c=[];return b&M&&c.push(oa),b&Z&&c.push(na),c},directionTest:function(b){var c=this.options,d=!0,f=b.distance,g=b.direction,h=b.deltaX,k=b.deltaY;return g&c.direction||(c.direction&M?(g=0===h?ma:0>h?da:ea,d=h!=this.pX,
f=Math.abs(b.deltaX)):(g=0===k?ma:0>k?fa:ha,d=k!=this.pY,f=Math.abs(b.deltaY))),b.direction=g,d&&f>c.threshold&&g&c.direction},attrTest:function(b){return J.prototype.attrTest.call(this,b)&&(this.state&H||!(this.state&H)&&this.directionTest(b))},emit:function(b){this.pX=b.deltaX;this.pY=b.deltaY;var c=Ha(b.direction);c&&(b.additionalEvent=this.options.event+c);this._super.emit.call(this,b)}});l(va,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ba]},attrTest:function(b){return this._super.attrTest.call(this,
b)&&(Math.abs(b.scale-1)>this.options.threshold||this.state&H)},emit:function(b){1!==b.scale&&(b.additionalEvent=this.options.event+(1>b.scale?"in":"out"));this._super.emit.call(this,b)}});l(wa,P,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Fa]},process:function(b){var c=this.options,d=b.pointers.length===c.pointers,f=b.distance<c.threshold,g=b.deltaTime>c.time;if(this._input=b,!f||!d||b.eventType&(B|G)&&!g)this.reset();else if(b.eventType&F)this.reset(),
this._timer=setTimeout(m(function(){this.state=R;this.tryEmit()},this),c.time);else if(b.eventType&B)return R;return 32},reset:function(){clearTimeout(this._timer)},emit:function(b){this.state===R&&(b&&b.eventType&B?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=ta(),this.manager.emit(this.options.event,this._input)))}});l(xa,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ba]},attrTest:function(b){return this._super.attrTest.call(this,b)&&
(Math.abs(b.rotation)>this.options.threshold||this.state&H)}});l(ya,J,{defaults:{event:"swipe",threshold:10,velocity:0.3,direction:M|Z,pointers:1},getTouchAction:function(){return ra.prototype.getTouchAction.call(this)},attrTest:function(b){var c,d=this.options.direction;return d&(M|Z)?c=b.overallVelocity:d&M?c=b.overallVelocityX:d&Z&&(c=b.overallVelocityY),this._super.attrTest.call(this,b)&&d&b.offsetDirection&&b.distance>this.options.threshold&&b.maxPointers==this.options.pointers&&W(c)>this.options.velocity&&
b.eventType&B},emit:function(b){var c=Ha(b.offsetDirection);c&&this.manager.emit(this.options.event+c,b);this.manager.emit(this.options.event,b)}});l(sa,P,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ua]},process:function(b){var c=this.options,d=b.pointers.length===c.pointers,f=b.distance<c.threshold,g=b.deltaTime<c.time;if(this.reset(),b.eventType&F&&0===this.count)return this.failTimeout();if(f&&g&&d){if(b.eventType!=
B)return this.failTimeout();d=this.pTime?b.timeStamp-this.pTime<c.interval:!0;f=!this.pCenter||K(this.pCenter,b.center)<c.posThreshold;this.pTime=b.timeStamp;this.pCenter=b.center;f&&d?this.count+=1:this.count=1;this._input=b;if(0===this.count%c.taps)return this.hasRequireFailures()?(this._timer=setTimeout(m(function(){this.state=R;this.tryEmit()},this),c.interval),H):R}return 32},failTimeout:function(){return this._timer=setTimeout(m(function(){this.state=32},this),this.options.interval),32},reset:function(){clearTimeout(this._timer)},
emit:function(){this.state==R&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});Q.VERSION="2.0.7";Q.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[xa,{enable:!1}],[va,{enable:!1},["rotate"]],[ya,{direction:M}],[ra,{direction:M},["swipe"]],[sa],[sa,{event:"doubletap",taps:2},["tap"]],[wa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};
za.prototype={set:function(b){return N(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function(b){this.session.stopped=b?2:1},recognize:function(b){var c=this.session;if(!c.stopped){this.touchAction.preventDefaults(b);var d,f=this.recognizers,g=c.curRecognizer;(!g||g&&g.state&R)&&(g=c.curRecognizer=null);for(var h=0;h<f.length;)d=f[h],2===c.stopped||g&&d!=g&&!d.canRecognizeWith(g)?d.reset():
d.recognize(b),!g&&d.state&(H|ca|U)&&(g=c.curRecognizer=d),h++}},get:function(b){if(b instanceof P)return b;for(var c=this.recognizers,d=0;d<c.length;d++)if(c[d].options.event==b)return c[d];return null},add:function(b){if(g(b,"add",this))return this;var c=this.get(b.options.event);return c&&this.remove(c),this.recognizers.push(b),b.manager=this,this.touchAction.update(),b},remove:function(b){if(g(b,"remove",this))return this;if(b=this.get(b)){var c=this.recognizers;b=r(c,b);-1!==b&&(c.splice(b,1),
this.touchAction.update())}return this},on:function(b,c){var d=this.handlers;return h(s(b),function(b){d[b]=d[b]||[];d[b].push(c)}),this},off:function(b,c){var d=this.handlers;return h(s(b),function(b){c?d[b]&&d[b].splice(r(d[b],c),1):delete d[b]}),this},emit:function(b,c){this.options.domEvents&&Za(b,c);var d=this.handlers[b]&&this.handlers[b].slice();if(d&&d.length){c.type=b;c.preventDefault=function(){c.srcEvent.preventDefault()};for(var f=0;f<d.length;)d[f](c),f++}},destroy:function(){this.element&&
Ia(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};N(Q,{INPUT_START:F,INPUT_MOVE:Y,INPUT_END:B,INPUT_CANCEL:G,STATE_POSSIBLE:pa,STATE_BEGAN:H,STATE_CHANGED:ca,STATE_ENDED:U,STATE_RECOGNIZED:R,STATE_CANCELLED:ka,STATE_FAILED:32,DIRECTION_NONE:ma,DIRECTION_LEFT:da,DIRECTION_RIGHT:ea,DIRECTION_UP:fa,DIRECTION_DOWN:ha,DIRECTION_HORIZONTAL:M,DIRECTION_VERTICAL:Z,DIRECTION_ALL:Ka,Manager:za,Input:x,TouchAction:T,TouchInput:V,MouseInput:D,PointerEventInput:I,TouchMouseInput:O,
SingleTouchInput:ia,Recognizer:P,AttrRecognizer:J,Tap:sa,Pan:ra,Swipe:ya,Pinch:va,Rotate:xa,Press:wa,on:p,off:q,each:h,merge:ab,extend:Ja,assign:N,inherit:l,bindFn:m,prefixed:w});("undefined"!=typeof b?b:"undefined"!=typeof self?self:{}).Hammer=Q;"function"==typeof define&&define.amd?define(function(){return Q}):"undefined"!=typeof module&&module.exports?module.exports=Q:b[d]=Q}(window,document,"Hammer");
jQuery.fn.IEZoom=function(b){this.options=b;this.middleScale=3;this.maxScale=6;this.side=b.side;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:parseInt($(this).css("left"))||0,top:parseInt($(this).css("top"))||0,naturalLeft:parseInt($(this).css("left"))||0,naturalTop:parseInt($(this).css("top"))||0,scale:1,rotate:0,toScale:1,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoonOut:!1,resize:!1,eventCancel:!1};
this.onPan=function(b){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming&&b&&b.pointers&&1==b.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag&&(this.panForMove(this,b.deltaX,b.deltaY,!0),this.options&&this.options.onPan)))this.options.onPan()};this.onDoubleTap=function(b){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&
window.clearTimeout(global.windowTapInterval),this.parameters.resize||this.parameters.eventCancel||this.parameters.zoomming)))if(this.status_zoom=!0,!this.parameters.zoomFlag)this.zoomIn(this),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,b);else if(this.parameters.zoomFlag){var c=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,c,b)}};this.zoomIn=function(b){b.parameters.left=parseInt($(b).css("left"));b.parameters.top=
parseInt($(b).css("top"));b.parameters.naturalLeft=b.parameters.left;b.parameters.naturalTop=b.parameters.top;b.parameters.width=$(b).width();b.parameters.height=$(b).height();b.parameters.naturalWidth=$(b).width();b.parameters.naturalHeight=$(b).height();b.parameters.zoomFlag=!0;b.parameters.zoomOut=!1;b.options&&b.options.zoomIn&&b.options.zoomIn()};this.zoomOut=function(b){b.swipeInterval&&b.swipeInterval.stop();b.animateInterval&&b.animateInterval.stop();b.parameters.zoomFlag=!1;b.parameters.zoomOut=
!0;b.parameters.toScale=1;b.parameters.scale=1;b.options&&b.options.zoomOut&&b.options.zoomOut()};this.animateToScale=function(b,c,d){if(!b.parameters.eventCancel&&!b.parameters.zoomming){b.options&&b.options.zoomStart&&b.options.zoomStart();b.parameters.zoomming=!0;var f=0,m=0,n=0,p=0,q=0;b.animateInterval=function(d,k){f=$.easing.swing(null,n,b.parameters.width,b.parameters.width*(c-1),20);m=$.easing.swing(null,n,b.parameters.height,b.parameters.height*(c-1),20);p=$.easing.swing(null,n,b.parameters.left,
b.parameters.naturalLeft+50*(b.parameters.naturalWidth-b.parameters.width*c)/100-b.parameters.left,20);q=$.easing.swing(null,n,b.parameters.top,b.parameters.naturalTop+50*(b.parameters.naturalHeight-b.parameters.height*c)/100-b.parameters.top,20);b.css({width:f+"px",height:m+"px",left:p+"px",top:q+"px"});for(var r=0;r<b.side.pageArray.length;r++)if(b.side.pageArray[r])b.side.pageArray[r].onResize(f/2,m);n++;if(20<=n||d>=k){b.animateInterval.stop();b.parameters.left=b.parameters.naturalLeft+50*(b.parameters.naturalWidth-
b.parameters.width*c)/100;b.parameters.top=b.parameters.naturalTop+50*(b.parameters.naturalHeight-b.parameters.height*c)/100;b.parameters.width*=c;b.parameters.height*=c;b.css({width:b.parameters.width+"px",height:b.parameters.height+"px",left:b.parameters.left+"px",top:b.parameters.top+"px"});for(r=0;r<b.side.pageArray.length;r++)if(b.side.pageArray[r])b.side.pageArray[r].onResize(b.parameters.width/2,b.parameters.height);b.parameters.zoomming=!1;1>=b.parameters.width*b.parameters.scale/b.parameters.naturalWidth&&
b.zoomOut(b)}}.animation(this,320)}};this.panForMove=function(b,c,d,f){b.css({left:b.parameters.left+c+"px",top:b.parameters.top+d+"px"})};var c=!1,d=0,f=0;bookConfig.SupportOperatePageZoom&&this.dblclick(function(b){b.pointers=[{pageX:b.pageX,pageY:b.pageY}];this.onDoubleTap(b)}.bind(this));this.bind(_event._down,function(b){c=!0;d=b.pageX;f=b.pageY}.bind(this));this.bind(_event._move,function(b){b.pointers=[{pageX:b.pageX,pageY:b.pageY}];c&&(b.deltaX=b.pageX-d,b.deltaY=b.pageY-f,this.onPan(b))}.bind(this));
this.bind(_event._end,function(b){c=!1;this.parameters.left+=b.pageX-d;this.parameters.top+=b.pageY-f}.bind(this))};
jQuery.fn.zoom=function(b,c){this.options=b;this.isBook=c;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:$(this).offset().left-0||0,top:$(this).offset().top-0||0,toScale:1,scale:1,rotate:0,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoomOut:!1,resize:!1,eventCancel:!1,zoomDelay:!1,onPan:!1,onSwipe:!1,onDoubleTap:!1,onPinch:!1,zoomArea:{left:0,top:0,right:0,bottom:0}};this.onPan=function(b){if(!this.parameters.resize&&
!this.parameters.eventCancel&&!this.parameters.zoomming&&b&&b.pointers&&1==b.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag)){"panstart"==b.type&&(this.parameters.onPan=!0);var c=this.getDelta(b),c=this.panForMove(this,c.deltaX,c.deltaY,!0);if(this.options&&this.options.onPan)this.options.onPan();if("panend"==b.type||"pancancel"==b.type)this.parameters.onPan=!1,this.setZoomParameters(this,c),this.restrictInBoundary(this)}};
this.onSwipe=function(b){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming)if(this.parameters.zoomFlag){var c=this.parameters.tran,d=this.tranLimit(this,this.parameters.scale,this.parameters.tran);if(d.x==parseInt(c.x)&&d.y==parseInt(c.y)){this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var k=0,l=0;b=this.getVelocity(b);k=b.velocityX;l=b.velocityY;this.swipeInterval=function(b,c){var d=this.parameters.tran,f=this.tranLimit(this,
this.parameters.scale,this.parameters.tran);f.x!=parseInt(d.x)||f.y!=parseInt(d.y)?(this.swipeInterval.stop(),this.restrictInBoundary(this)):(d=(c-b)/c,d=this.panForMove(this,k*d*16.7,l*d*16.7,!0),this.setZoomParameters(this,d),b>=c&&(this.swipeInterval.stop(),this.restrictInBoundary(this)))}.animation(this,320)}}else b=this.getDirection(b),this.options&&this.options.swipeend&&this.options.swipeend(b)};this.getDirection=function(b){var c,d=bookConfig.upsideOnMobile();b.direction&Hammer.DIRECTION_RIGHT&&
!d&&(c="right");b.direction&Hammer.DIRECTION_LEFT&&!d&&(c="left");b.direction&Hammer.DIRECTION_UP&&!d&&(c="up");b.direction&Hammer.DIRECTION_DOWN&&!d&&(c="down");b.direction&Hammer.DIRECTION_RIGHT&&d&&(c="down");b.direction&Hammer.DIRECTION_LEFT&&d&&(c="up");b.direction&Hammer.DIRECTION_UP&&d&&(c="left");b.direction&Hammer.DIRECTION_DOWN&&d&&(c="right");return c};this.getVelocity=function(b){var c=0,d=0,k=bookConfig.upsideOnMobile();0==b.velocityX||k||(c=b.velocityX);0==b.velocityY||k||(d=b.velocityY);
0!=b.velocityX&&k&&(c=b.velocityY);0!=b.velocityY&&k&&(d=-b.velocityX);return{velocityX:c,velocityY:d}};this.getDelta=function(b){var c=0,d=0,k=bookConfig.upsideOnMobile();0==b.deltaX||k||(c=b.deltaX);0==b.deltaY||k||(d=b.deltaY);0!=b.deltaX&&k&&(c=b.deltaY);0!=b.deltaY&&k&&(d=-b.deltaX);return{deltaX:c,deltaY:d}};this.onDoubleTap=function(b){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),
this.parameters.resize||this.parameters.zoomming)))if(BookInfo.getBook().unSelect(),this.status_zoom=!0,!this.parameters.zoomFlag)this.zoomIn(this),this.parameters.origin=this.mathOrigin(this,b),this.originObj(this,this.parameters.origin),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,b);else if(this.parameters.zoomFlag){var c=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,c,b)}};this.onPinch=function(b){"pinchstart"==b.type&&
(this.pinchStart=!0);if(!(this.parameters.resize||this.parameters.zoomming||!this.parameters.zoomFlag&&1>=b.scale)&&b&&b.pointers){BookInfo.getBook().unSelect();this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var c=function(){this.pinchStart=!1;this.parameters.zoomFlag||(this.parameters.zoomOut=!1,this.zoomIn(this));this.scale=this.parameters.toScale;this.parameters.origin=this.mathOrigin(this,b);this.originObj(this,this.parameters.origin);this.pinchMoveIn(this,
parseFloat(this.scale)*parseFloat(b.scale),b,this.parameters.origin)}.bind(this);"pinchstart"==b.type&&(this.parameters.onPinch=!0,c(b));"pinchend"==b.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,b),this.pinchStart=!1);"pinchmove"==b.type&&(this.pinchStart&&c(b),this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(b.scale),b,this.parameters.origin));"pinchcancel"==b.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=
!1,this.exceedScale(this,b),this.pinchStart=!1)}};this.exceedScale=function(b,c){var d=b.parameters.width*b.parameters.toScale/b.parameters.naturalWidth,k=b.parameters.width*b.parameters.toScale,l=b.parameters.height*b.parameters.toScale,m=b.parameters.naturalWidth*b.maxScale/b.parameters.width,n=b.parameters.naturalWidth/b.parameters.width,p=b.parameters.toScale;d>b.maxScale&&(p=m);if(1>d||k<windowWidth&&l<windowHeight)b.parameters.zoomOut=!0,p=n;b.animateToScale(b,p,c)};this.zoomIn=function(b){var c=
this.getBookOffset($(b));b.parameters.tran=getTransform(b[0]);b.parameters.left=c.left-b.parameters.tran.x;b.parameters.top=c.top-b.parameters.tran.y;b.parameters.width=$(b).width();b.parameters.height=$(b).height();b.parameters.naturalWidth=$(b).width();b.parameters.naturalHeight=$(b).height();b.setZoomSize();b.parameters.zoomFlag=!0;b.parameters.zoomOut=!1;b.options&&b.options.zoomIn&&b.options.zoomIn()};this.zoomOut=function(b){b.swipeInterval&&b.swipeInterval.stop();b.animateInterval&&b.animateInterval.stop();
b.parameters.zoomFlag=!1;b.parameters.zoomOut=!0;b.parameters.toScale=1;b.parameters.scale=1;b.options&&b.options.zoomOut&&b.options.zoomOut()};this.tranLimit=function(b,c,d){if(d){if(b.parameters.zoomOut){d={x:0,y:0};d.x=b.parameters.width*(c-1)*b.parameters.origin.x/100;d.y=b.parameters.height*(c-1)*b.parameters.origin.y/100;if((bookType==BookType.normal_book||bookType==BookType.catalog_book)&&bookConfig.retainBookCenter&&b.isBook){var k=BookInfo.getCurrentPages();1==k.length&&(!BookInfo.isLeftPage(k[0],
!0)&&bookConfig.FlipDirection&&(d.y-=b.parameters.height*c/4),BookInfo.isLeftPage(k[0],!0)&&bookConfig.FlipDirection&&(d.y+=b.parameters.height*c/4),BookInfo.isLeftPage(k[0],!0)||bookConfig.FlipDirection||(d.x-=b.parameters.width*c/4),BookInfo.isLeftPage(k[0],!0)&&!bookConfig.FlipDirection&&(d.x+=b.parameters.width*c/4))}return d}b.parameters.origin||(b.parameters.origin={x:0,y:0});k=d.x;d=d.y;var l,m,n,p;l=b.parameters.width;m=b.parameters.height;n=b.parameters.left-b.parameters.origin.x*(c-1)*l/
100;p=b.parameters.top-b.parameters.origin.y*(c-1)*m/100;var q=0,t=0,s=0,r=0,t=c*l,r=c*m;t>windowWidth?(q=windowWidth-t-n+l*c*b.parameters.zoomArea.right/100,s=-n-l*c*b.parameters.zoomArea.left/100):(q=-n-l*c*b.parameters.zoomArea.left/100,s=windowWidth-t-n+l*c*b.parameters.zoomArea.right/100);r>windowHeight?(t=windowHeight-r-p+m*c*b.parameters.zoomArea.bottom/100,r=-p-m*c*b.parameters.zoomArea.top/100):(t=-p-m*c*b.parameters.zoomArea.top/100,r=windowHeight-r-p+m*c*b.parameters.zoomArea.bottom/100);
k=Number.between(k,q,s);d=Number.between(d,t,r);return{x:parseInt(k),y:parseInt(d)}}};this.pinchMoveIn=function(b,c,d){if(!b.parameters.eventCancel&&!b.parameters.zoomming&&d&&d.pointers&&2==d.pointers.length){var k={};k.scale=c;k.tran=b.mathTran(b,d,b.parameters.origin);b.transformSetting(b,k);b.parameters.toScale=c}};this.mathTran=function(b,c,d){if(!c||!c.pointers||0>=c.pointers.length||!d)return{x:0,y:0};c=this.getPageXY(c);pageX=c.pageX;pageY=c.pageY;var k,l;l=b.parameters.width;c=b.parameters.height;
k=b.parameters.left;b=b.parameters.top;k=(d.x*l/100+k).toFixed(2);d=(d.y*c/100+b).toFixed(2);tranX=pageX-parseFloat(k);tranY=pageY-parseFloat(d);return{x:parseFloat(tranX.toFixed(2)),y:parseFloat(tranY.toFixed(2))}};this.mathOrigin=function(b,c){if(!c||!c.pointers||0>=c.pointers.length)return{x:50,y:50};var d=this.getPageXY(c);pageX=d.pageX;pageY=d.pageY;var k,l;k=b.parameters.width;d=b.parameters.height;l=this.getBookOffset(b);k=(pageX-parseInt(l.left))/(k*b.parameters.scale);d=(pageY-parseInt(l.top))/
(d*b.parameters.scale);return{x:(100*k).toFixed(2),y:(100*d).toFixed(2)}};this.getPageXY=function(b){var c,d,k=bookConfig.upsideOnMobile();1==b.pointers.length&&(c=b.pointers[0].pageX,d=b.pointers[0].pageY);1<b.pointers.length&&(c=(b.pointers[0].pageX+b.pointers[1].pageX)/2,d=(b.pointers[0].pageY+b.pointers[1].pageY)/2);return k?{pageX:d,pageY:windowHeight-c}:{pageX:c,pageY:d}};this.getBookOffset=function(b){if(b)return b=b.offset(),bookConfig.upsideOnMobile()?{left:b.top,top:b.left}:{left:b.left,
top:b.top}};this.restrictInBoundary=function(b,c){if(!b.parameters.eventCancel&&!b.parameters.zoomming){var d=b.parameters.tran,k=this.tranLimit(b,b.parameters.scale,d);if(k.x!=parseInt(d.x)||k.y!=parseInt(d.y)){b.animateInterval&&b.animateInterval.stop();var l=0,m=0,n=0;k.x!=d.x&&(l=k.x-d.x);k.y!=d.y&&(m=k.y-d.y);b.animateInterval=function(d,h){var k=$.easing.easeOutBack(null,n,0,l,20),s=$.easing.easeOutBack(null,n,0,m,20);0<n&&(k-=$.easing.easeOutBack(null,n-1,0,l,20),s-=$.easing.easeOutBack(null,
n-1,0,m,20));k=b.panForMove(b,k,s);b.setZoomParameters(b,k);n++;if(20<=n||d>=h)b.animateInterval.stop(),BookInfo.getBook().bookMap&&BookInfo.getBook().bookMap.refreshArea(),c&&"function"==typeof c&&c()}.animation(this,320)}}};this.transformSetting=function(b,c){b.setZoomParameters(b,c);var d=transformCSS(c);b.css(d)};this.panForMove=function(b,c,d,k){var l=b.parameters?b.parameters.tran:{x:0,y:0};k=b.parameters?b.parameters.scale:1;l||(l={x:0,y:0});k||0==k||(k=1);c=parseInt(l.x+c);d=parseInt(l.y+
d);d={x:c,y:d};c=transformCSS({tran:d,scale:k});b.css(c);return{tran:d,scale:k}};this.originObj=function(b,c){b.css({"-webkit-transform-origin":c.x+"% "+c.y+"%","-moz-transform-origin":c.x+"% "+c.y+"%","-ms-transform-origin":c.x+"% "+c.y+"%","-o-transform-origin":c.x+"% "+c.y+"%"})};this.setZoomParameters=function(b,c){function d(h){return void 0===c[h]||null===c[h]||isNaN(c[h])?b.parameters[h]:c[h]}function k(d){return void 0!==c[d]&&null!==c[d]?c[d]:b.parameters[d]}b&&b.parameters&&c&&(b.parameters=
{width:d("width"),height:d("height"),naturalWidth:d("naturalWidth"),naturalHeight:d("naturalHeight"),left:d("left"),top:d("top"),scale:d("scale"),rotate:d("rotate"),toScale:d("toScale"),tran:k("tran"),origin:k("origin"),zoomFlag:k("zoomFlag"),zoomming:k("zoomming"),zoomOut:k("zoomOut"),resize:k("resize"),eventCancel:k("eventCancel"),zoomArea:k("zoomArea"),zoomDelay:k("zoomDelay"),onPan:k("onPan"),onSwipe:k("onSwipe"),onDoubleTap:k("onDoubleTap"),onPinch:k("onPinch")})};this.animateToTransform=function(b,
c,d){if(!this.parameters.eventCancel&&!this.parameters.zoomming){this.options&&this.options.zoomStart&&this.options.zoomStart();this.parameters.zoomming=!0;var k=this.getBookOffset($(this));this.parameters.tran=getTransform(this[0]);this.parameters.left=k.left-this.parameters.tran.x;this.parameters.top=k.top-this.parameters.tran.y;this.parameters.width=$(this).width();this.parameters.height=$(this).height();this.parameters.naturalWidth=$(this).width();this.parameters.naturalHeight=$(this).height();
this.setZoomSize();var l={};l.origin=this.parameters.origin;l.scale=b;l.tran=c;l.origin=d;this.zoomTran=l;c=transformCSS(l);this.originObj(this,l.origin);animateOnce(this,c,300,function(){getTransform(this[0]);this.transformSetting(this,l);this.parameters.scale=b;this.parameters.toScale=b;this.parameters.zoomming=!1;if(this.options.onZoomed)this.options.onZoomed(l)}.bind(this),"%stransform","ease-in-out")}};this.animateToScale=function(b,c,d){if(!b.parameters.eventCancel&&!b.parameters.zoomming){b.options&&
b.options.zoomStart&&b.options.zoomStart();b.parameters.zoomming=!0;var k={};k.origin=b.parameters.origin;k.scale=c;k.tran=this.mathTran(b,d,k.origin);k.tran=this.tranLimit(b,c,k.tran);this.zoomTran=k;this.animation(b,c,k)}};this.animation=function(b,c,d){var k=transformCSS(d);b.originObj(b,d.origin);animateOnce(b,k,300,function(){getTransform(b[0]);b.transformSetting(b,d);b.parameters.scale=c;b.parameters.toScale=c;b.parameters.zoomming=!1;var k=(b.parameters.width*b.parameters.toScale).toFixed(2),
m=b.parameters.naturalWidth;if(Number.isBetween(k,m-1,m+1)){b.timeout&&(b.timeout=void 0,window.clearTimeout(b.timeout));b.parameters.zoomDelay=!1;if(b.options.onZoomed)b.options.onZoomed(b.zoomTran);b.zoomOut(b)}else if(b.options.onZoomed)if(isPhone()||isPad())b.parameters.zoomDelay?b.timeout||this.delayExecuteOnZoomed(b):(b.parameters.zoomDelay=!0,b.options.onZoomed(b.zoomTran));else b.options.onZoomed(b.zoomTran)}.bind(b),"%stransform","ease-in-out")};this.delayExecuteOnZoomed=function(b){b.timeout=
window.setTimeout(function(){if(b.parameters.zoomFlag&&!b.parameters.onPinch&&!b.parameters.zoomming)b.options.onZoomed(b.zoomTran);b.parameters.zoomDelay=!1;window.clearTimeout(b.timeout);b.timeout=void 0},3E3)};this.registerParamers=function(b){b&&(void 0!=b.width&&(this.parameters.width=b.width),void 0!=b.height&&(this.parameters.height=b.height),void 0!=b.left&&(this.parameters.left=b.left),void 0!=b.top&&(this.parameters.top=b.top),void 0!=b.scale&&(this.parameters.scale=b.scale),void 0!=b.tran&&
(this.parameters.tran=b.tran),void 0!=b.origin&&(this.parameters.origin=b.origin))};this.setZoomSize=function(){var b=$(this).width(),c=$(this).height(),d=bookConfig.largePageHeight/bookConfig.largePageWidth,k=bookConfig.defaultZoomWidth?bookConfig.defaultZoomWidth:bookConfig.largePageWidth,l=k*d,m=bookConfig.maxZoomWidth,d=m*d;bookConfig.FlipDirection?(this.middleScale=Number.between(k/b,1.5,2),this.maxScale=Number.between(m/b,2,6)):(this.middleScale=Number.between(l/c,1.5,2),this.maxScale=Number.between(d/
c,2,6));this.middleScale||(this.middleScale=3);m||(this.maxScale=6)};var d=new Hammer.Manager($(this)[0]);d.add(new Hammer.Pan);d.add((new Hammer.Swipe({velocity:0.15})).recognizeWith(d.get("pan")));d.on("panstart panmove panend pancancel",this.onPan.bind(this));d.on("swipe swipeup",this.onSwipe.bind(this));if(bookConfig.SupportOperatePageZoom){d.add(new Hammer.Pinch);isPhone()||isPad()?d.add(new Hammer.Tap({event:"doubletap",taps:2,interval:400,posThreshold:30})):d.add(new Hammer.Tap({event:"doubletap",
taps:2}));if(isPhone()||isPad()||isSlideBook())d.on("pinchstart pinchmove pinchcancel pinchend",this.onPinch.bind(this));if(!isAndroidWeChat())d.on("doubletap",this.onDoubleTap.bind(this))}this.setZoomSize()};
Class("VideoSkin",{create:function(b,c){this.content=b;this.video=b.find("video:first");this.html_video=c?c:this.video[0];this.initPlayer();this.initControlBar();this.initSkin();this.initEvents();this.onResize()},initPlayer:function(){this.player=this.html_video;var b=this.video.find("source:first");b&&(b=b.attr("src"),(b.endsWith(".flv")||b.endsWith(".f4v"))&&this.content.html('<video class="video-js vjs-default-skin" preload="auto" width="100%" height="100%" data-setup=\'{}\'><source src='+b+" type='video/x-flv'></video>"))},
initControlBar:function(){this.content.addClass("video-player");this.controlBar=$('<div class="video-controls slider-action"></div>');this.controlBorder=$('<div class="control-border"></div>');this.content.append(this.controlBar);this.controlBar.append(this.controlBorder);this.btnPlay=$('<div class="video-play"></div>');this.bevel1=$('<div class="bevel"></div>');this.video_timer=$('<div class="video-timer">00:00</div>');this.video_seek=$('<div class="video-seek"></div>');this.bevel2=$('<div class="bevel"></div>');
this.volume_seek=$('<div class="volume-seek"></div>');this.btnVolume=$('<div class="volume-button"></div>');this.btnFullscreen=$('<div class="player-fullscreen"></div>');this.controlBar.append(this.btnPlay);this.controlBar.append(this.bevel1);this.controlBar.append(this.btnFullscreen);this.controlBar.append(this.video_timer);this.controlBar.append(this.video_seek);this.controlBar.append(this.bevel2);this.controlBar.append(this.volume_seek);this.controlBar.append(this.btnVolume);this.createVideoSeekSlider();
this.createVolumeSeekSlider();this.btnCenter=$('<div class="video-center-button"></div>');this.content.append(this.btnCenter)},createVideoSeekSlider:function(){var b=this.html_video.$media[0].duration;b||(b=100);this.video_seek_slider=this.video_seek.slider({range:0,max:b,direction:"horizontal",onChange:function(b){try{this.html_video.$media[0].currentTime=parseFloat(b)}catch(d){}}.bind(this)})},createVolumeSeekSlider:function(){this.volume_value=1;this.volume_seek_slider=this.volume_seek.slider({range:1,
max:1,direction:"vertical",onChange:function(b){b=parseFloat(b);try{this.volume_value=b,equals(b,0)?(this.html_video.$media[0].muted=!0,this.btnVolume.addClass("volume-mute")):(this.html_video.$media[0].muted=!1,this.btnVolume.removeClass("volume-mute")),this.html_video.$media[0].volume=b}catch(c){}}.bind(this)})},initEvents:function(){this.initControlBarEvents();this.initPlayEvents();this.initVolumeEvents();this.initFullscreenEvents()},initPrompt:function(b){if(b&&b.length){var c=this.html_video.$media[0].duration;
this.video_seek.width();for(var d=0;d<b.length;d++){var f=$("<p title='"+b[d].text+"' style='top:1px;left:"+b[d].time/c*100+"%;z-index:2;background:#fff;width:5px;height:5px;border-radius:50%;position:absolute;'></p>");this.video_seek.append(f);this.promptEvent(f,b[d].time)}}},promptEvent:function(b,c){b.bind("mouseenter",function(c){b.css({background:"#2CA8D5"})}.bind(this));b.bind("mouseleave",function(c){b.css({background:"#fff"})}.bind(this));b.bind("click",function(b){this.html_video.$media[0].currentTime=
c}.bind(this))},initControlBarEvents:function(){var b=function(){var b="visible";!0==this.html_video.$media[0].paused&&(b="hidden");this.controlBar.css({visibility:b,opacity:1})}.bind(this),c=function(){this.controlBar.css({visibility:"hidden",opacity:0})}.bind(this);$.browser.device==$.browser.DEVICE_PC?(this.video.bind(_event._enter,b),this.video.bind(_event._leave,c),this.controlBar.bind(_event._enter,b),this.controlBar.bind(_event._leave,c)):(this.video.bind(_event._down,function(){b();this.hideControlbarFlag=
!1}.bind(this)),this.video.bind(_event._move,function(){b();this.hideControlbarFlag=!1}.bind(this)),this.video.bind(_event._up,function(){this.hideControlbarFlag=!0;(function(){!0==this.hideControlbarFlag&&c()}).delay(this,5E3)}.bind(this)))},initPlayEvents:function(){var b=function(b){b=(b=this.content.find("source").attr("src"))?b.slice(b.lastIndexOf("/")+1):"";!1==this.html_video.$media[0].paused?(bookConfig.googleAnalyticsID&&ga("send","event","Video","pause","Page"+BookInfo.getCurrentPages()[0]+
" "+b),this.pause()):(bookConfig.googleAnalyticsID&&ga("send","event","Video","play","Page"+BookInfo.getCurrentPages()[0]+" "+b),this.play(),this.controlBar.css({visibility:"visible",opacity:1}));return!1};this.video.bind(_event._click,b.bind(this));this.btnPlay.bind(_event._click,b.bind(this));this.btnCenter&&this.btnCenter.bind(_event._click,b.bind(this));this.video.bind("play",function(){this.btnPlay.addClass("paused-button");this.btnCenter&&this.btnCenter.css("display","none")}.bind(this));this.video.bind("pause",
function(){this.btnPlay.removeClass("paused-button");this.btnCenter&&this.btnCenter.css("display","block")}.bind(this));this.video.bind("ended",function(){this.btnPlay.removeClass("paused-button");this.btnCenter&&this.btnCenter.css("display","block")}.bind(this));this.video.bind("timeupdate",function(){var b=this.html_video.$media[0].currentTime,d=this.html_video.$media[0].duration;d||(d=100);this.video_seek_slider&&(this.video_seek_slider.setMax(d),this.video_seek_slider.setRange(b));this.video_timer.text(this.timeFormat(b))}.bind(this))},
initVolumeEvents:function(){this.btnVolume.bind(_event._click,function(){!0==this.html_video.$media[0].muted?(this.html_video.$media[0].muted=!1,this.volume_seek_slider.setRange(this.volume_value),this.btnVolume.removeClass("volume-mute")):(this.html_video.$media[0].muted=!0,this.volume_seek_slider.setRange(0),this.btnVolume.addClass("volume-mute"));return!1}.bind(this));this.btnVolume.bind("mouseenter",function(b){b=isTouch?b.originalEvent?b.originalEvent.changedTouches:b.changedTouches:[b];b=b[0].pageX-
b[0].offsetX-this.controlBar.offset().left;b+=(this.btnVolume.width()-this.volume_seek.width())/2;this.volume_seek.css({left:b+"px"});this.volume_seek.css({visibility:"visible",opacity:"1"})}.bind(this));this.btnVolume.bind("mouseleave",function(){this.volume_seek.css({visibility:"hidden",opacity:"0"})}.bind(this));this.volume_seek.bind("mouseenter",function(){this.volume_seek.css({visibility:"visible",opacity:"1"})}.bind(this));this.volume_seek.bind("mouseleave",function(){this.volume_seek.css({visibility:"hidden",
opacity:"0"})}.bind(this))},initFullscreenEvents:function(){this.btnFullscreen.bind(_event._click,function(){fullScreenApi.supportsFullScreen?fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(this.html_video.$media[0]):this.html_video.$media[0].webkitSupportsFullscreen&&this.html_video.$media[0].webkitEnterFullscreen();return!1}.bind(this));this.video.bind(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()?(this.html_video.play(),
this.btnFullscreen.addClass("player-exit-fullscreen")):this.btnFullscreen.removeClass("player-exit-fullscreen")}.bind(this))},timeFormat:function(b){var c=10>Math.floor(b/60)?"0"+Math.floor(b/60):Math.floor(b/60);return c+":"+(10>Math.floor(b-60*c)?"0"+Math.floor(b-60*c):Math.floor(b-60*c))},initSkin:virtual_function,onResize:function(){var b=this.controlBar.width();b||(b=this.content.width());var c=Math.max(0,b-this.seekWidth);0>=c?this.video_seek.css({display:"none"}):(this.video_seek.css({width:c,
display:"block"}),this.video_seek_slider.setRange(this.html_video.$media[0].currentTime));c=this.btnVolume.position().left+this.controlBar.position().left+(this.btnVolume.width()-this.volume_seek.width())/2;b<this.volumeWidth?(this.bevel2.css({display:"none"}),this.btnVolume.css({display:"none"}),this.volume_seek.css({left:"-45px"}),b<this.fullscreenWidth?this.btnFullscreen.css({display:"none"}):this.btnFullscreen.css({display:"block"})):(this.btnVolume.css({display:"block"}),this.btnFullscreen.css({display:"block"}),
this.volume_seek.css({left:c+"px"}));!0==this.html_video.$media[0].muted?this.volume_seek_slider.setRange(0):this.volume_seek_slider.setRange(this.volume_value)},play:function(){this.player&&this.player.play()},pause:function(){this.player&&this.player.pause()},stop:function(){this.player&&(this.pause(),this.player.setCurrentTime(0))}});
Class("RoundVideoSkin",{create:function(b,c){this.seekWidth=195;this.volumeWidth=170;this.fullscreenWidth=60;this._super(b,c)},onResize:function(){this._super();var b=this.controlBar.width();b||(b=this.content.width());100>b?this.video_timer.css("display","none"):this.video_timer.css("display","block")},initSkin:function(){this.content.addClass("round")}}).extend("VideoSkin");
Class("ClassicVideoSkin",{create:function(b,c){this.seekWidth=195;this.volumeWidth=135;this.fullscreenWidth=70;this.initEventMonitor();this._super(b,c);this.btnCenter&&this.btnCenter.css("display","none")},initSkin:function(){this.content.addClass("classic")},initEventMonitor:function(){this.eventTime;var b=function(){void 0==this.eventTime?b.stop():5E3<new Date-this.eventTime&&(this.controlBar.css({visibility:"hidden",opacity:0}),b.stop())}.interval(this,300);this.keeyWatchEvent=function(){$.browser.device!=
$.browser.DEVICE_PC&&(this.eventTime=new Date,b.isRunning()||b.start())}.bind(this)},initControlBarEvents:function(){var b=function(){this.controlBar.css({visibility:"visible",opacity:1})}.bind(this),c=function(){this.controlBar.css({visibility:"hidden",opacity:0})}.bind(this);$.browser.device==$.browser.DEVICE_PC?(this.video.bind(_event._enter,b),this.video.bind(_event._leave,c),this.controlBar.bind(_event._enter,b),this.controlBar.bind(_event._leave,c)):(this.video.bind(_event._down,function(){b();
this.keeyWatchEvent()}.bind(this)),this.video.bind(_event._move,function(){b();this.keeyWatchEvent()}.bind(this)),this.video.bind(_event._up,this.keeyWatchEvent));b()},initPlayEvents:function(){var b=function(b){!1==this.html_video.$media[0].paused?this.pause():(this.play(),this.controlBar.css({visibility:"visible",opacity:1}));this.keeyWatchEvent();return!1};this.video.bind(_event._click,b.bind(this));this.btnPlay.bind(_event._click,b.bind(this));this.video.bind("play",function(){this.btnPlay.addClass("paused-button")}.bind(this));
this.video.bind("pause",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.video.bind("ended",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.video.bind("timeupdate",function(){var b=this.html_video.$media[0].currentTime,d=this.html_video.$media[0].duration;d||(d=100);this.video_seek_slider&&(this.video_seek_slider.setMax(d),this.video_seek_slider.setRange(b));this.video_timer.text(this.timeFormat(b))}.bind(this))},onResize:function(){this._super();this.controlBar.width()||
this.content.width()}}).extend("VideoSkin");Class("SmallBlackVideoSkin",{create:function(b,c){this.seekWidth=145;this.volumeWidth=110;this.fullscreenWidth=60;this._super(b,c)},initSkin:function(){this.content.addClass("smallblack")}}).extend("VideoSkin");
Class("AudioSkin",{create:function(b,c,d){this.content=b;this.audio=b.find("audio:first");this.html_audio=d?d:this.audio[0];this.resources=c;this.audioIndex=0;this.init();this.initSkin();this.initEvents();this.onResize();0<this.resources.length&&this.changeMusic(0)},init:function(){this.content.addClass("audio-player");this.btnPlay=$('<div class="audio-play slider-action"></div>');this.btnBack=$('<div class="back_button slider-action"></div>');this.btnForward=$('<div class="forward_button slider-action"></div>');
this.volume_seek=$('<div class="volume-seek slider-action"></div>');this.btnVolume=$('<div class="volume-button slider-action"></div>');this.btnVolumeUp=$('<div class="volume-up-button slider-action"></div>');this.btnVolumeDown=$('<div class="volume-down-button slider-action"></div>');this.audio_timer=$('<div class="audio-timer">00:00/00:00</div>');this.audio_seek=$('<div class="audio-seek slider-action"></div>');this.audio_name=$('<div class="audio-file"></div>');this.content.append(this.btnPlay);
this.content.append(this.btnBack);this.content.append(this.btnForward);this.content.append(this.volume_seek);this.content.append(this.btnVolume);this.content.append(this.btnVolumeUp);this.content.append(this.btnVolumeDown);this.content.append(this.audio_timer);this.content.append(this.audio_seek);this.content.append(this.audio_name);this.createAudioSeekSlider();this.createVolumeSeekSlider()},createAudioSeekSlider:function(){var b=this.html_audio.$media[0].duration;b||(b=100);this.audio_seek_slider=
this.audio_seek.slider({range:0,max:b,direction:"horizontal",onChange:function(b){try{this.html_audio.setCurrentTime(parseFloat(b))}catch(d){}}.bind(this)})},createVolumeSeekSlider:function(){this.volume_value=1;this.volume_seek_slider=this.volume_seek.slider({range:1,max:1,direction:this.volumeDirection,onChange:function(b){b=parseFloat(b);try{this.volume_value=b,0==b?(this.html_audio.$media[0].setMute(!0),this.volume_btn.addClass("volume-mute")):(this.html_audio.$media[0].setMute(!1),this.volume_btn.removeClass("volume-mute")),
this.html_audio.$media[0].volume=b}catch(c){}}.bind(this)})},initEvents:function(){this.initPlayEvents();this.initVolumeEvents()},initPlayEvents:function(){this.btnPlay.bind(_event._click,function(b){if(this.resources[0])return b=this.resources[0].slice(this.resources[0].lastIndexOf("/")+1),!1==this.html_audio.$media[0].paused?(bookConfig.googleAnalyticsID&&ga("send","event","audio","pause","Page"+BookInfo.getCurrentPages()[0]+" "+b),this.html_audio.pause()):(bookConfig.googleAnalyticsID&&ga("send",
"event","audio","play","Page"+BookInfo.getCurrentPages()[0]+" "+b),this.html_audio.play()),!1}.bind(this));this.audio.bind("play",function(){this.btnPlay.addClass("paused-button")}.bind(this));this.audio.bind("pause",function(){this.btnPlay.removeClass("paused-button")}.bind(this));this.audio.bind("ended",function(){this.btnPlay.removeClass("paused-button");this.audioIndex<this.resources.length-1&&this.changeMusicByStep(1)}.bind(this));this.btnBack.bind(_event._click,function(b){this.changeMusicByStep(-1);
return!1}.bind(this));this.btnForward.bind(_event._click,function(b){this.changeMusicByStep(1);return!1}.bind(this));this.audio.bind("timeupdate",function(){var b=this.html_audio.$media[0].currentTime,c=this.html_audio.$media[0].duration;this.audio_seek_slider.setMax(c);this.audio_seek_slider.setRange(b);this.audio_timer.text(this.timeFormat(b)+"/"+this.timeFormat(c))}.bind(this))},changeMusicByStep:function(b){0!=this.resources.length&&(b=this.audioIndex+1,0>b&&(b+=this.resources.length),b%=this.resources.length,
this.changeMusic(b),this.html_audio.play())},changeMusic:function(b){this.audioIndex=b;b=this.resources[b];this.html_audio.$media[0].src=b;this.audio_name.text(this.getAudioTitle(b))},getAudioTitle:function(b){if(""==b)return"";var c=-1,c=-1==b.indexOf("\\")?b.lastIndexOf("/"):b.lastIndexOf("\\");iNameEnd=b.lastIndexOf(".");return fileTitle=b.substr(c+1,iNameEnd-c-1)},initVolumeEvents:function(){this.btnVolume.bind(_event._click,function(b){!0==this.html_audio.$media[0].muted?(this.html_audio.$media[0].muted=
!1,this.volume_seek_slider.setRange(this.volume_value),this.btnVolume.removeClass("volume-mute")):(this.html_audio.$media[0].muted=!0,this.volume_seek_slider.setRange(0),this.btnVolume.addClass("volume-mute"));return!1}.bind(this));this.btnVolumeUp.bind(_event._click,function(){this.changeVolumeByStep(0.1)}.bind(this));this.btnVolumeDown.bind(_event._click,function(){this.changeVolumeByStep(-0.1)}.bind(this))},changeVolumeByStep:function(b){this.volume_value=this.html_audio.$media[0].volume+b;this.volume_value=
Math.max(0,this.volume_value);this.volume_value=Math.min(1,this.volume_value);this.html_audio.$media[0].volume=this.volume_value},timeFormat:function(b){var c=10>Math.floor(b/60)?"0"+Math.floor(b/60):Math.floor(b/60);return c+":"+(10>Math.floor(b-60*c)?"0"+Math.floor(b-60*c):Math.floor(b-60*c))},initSkin:virtual_function,onResize:function(){if(this.audioSeek){var b=parseInt(this.content.width()),b=Math.max(0,b-this.audioSeek);0>=b?this.audio_seek.css({display:"none"}):(this.audio_seek.css({width:b,
display:"block"}),this.audio_seek_slider.setRange(this.html_audio.$media[0].currentTime))}!1==this.html_audio.$media[0].muted?this.volume_seek_slider.setRange(this.volume_value):this.volume_seek_slider.setRange(0);b=this.volumeWidth;void 0!=b&&(this.content.width()<b?(this.btnVolume.css({display:"none"}),this.volume_seek.css({display:"none"})):(this.btnVolume.css({display:"block"}),this.volume_seek.css({display:"block"})))},refreshSeek:function(){this.audio_seek_slider.setRange(this.html_audio.$media[0].currentTime);
!1==this.html_audio.$media[0].muted?this.volume_seek_slider.setRange(this.volume_value):this.volume_seek_slider.setRange(0)}});
Class("AudioListSkin",{init:function(){this._super();this.btnList=$("<div class='list-button'></div>");this.pnlListBackground=$("<div class='list-panel-bk'></div>");this.pnlList=$("<div class='list-panel'></div>");this.content.append(this.btnList);this.content.append(this.pnlListBackground);this.pnlListBackground.append(this.pnlList);this.addAudioItems();this.listVisible=!1;this.items[0]&&this.items[0].addClass("selected");1==this.resources.length&&(this.btnList.css("display","none"),this.pnlListBackground.css("display",
"none"))},addAudioItems:function(){this.items=[];for(var b=0;b<this.resources.length;b++){var c=this.resources[b],d=c.lastIndexOf("/")+1,f=c.lastIndexOf("."),c=c.substring(d,f);this.items[b]=$("<div class='list-item'></div>");this.items[b].text(c);this.pnlList.append(this.items[b])}},initEvents:function(){this._super();this.initListEvents()},initListEvents:function(){this.btnList.bind(_event._click,function(){this.listVisible?this.hideListPanel():this.showListPanel();this.listVisible=!this.listVisible;
return!1}.bind(this));for(var b=0;b<this.items.length;b++){var c=function(b,c){return function(){b.changeMusic(c);b.html_audio.play()}}(this,b);this.items[b].bind(_event._click,c)}},showListPanel:function(){this.pnlListBackground.css("display","block")},hideListPanel:function(){this.pnlListBackground.css("display","none")},changeMusic:function(b){this._super(b);if(this.items)for(var c=0;c<this.resources.length&&this.items[c];c++)c==b?this.items[c].addClass("selected"):this.items[c].removeClass("selected")},
initSkin:virtual_function}).extend("AudioSkin");Class("DefaultAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this.audioSeek=20;this.volumeWidth=170;this._super(b,c,d)},initSkin:function(){this.content.addClass("default")}}).extend("AudioSkin");Class("AdvancedAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("advanced")}}).extend("AudioListSkin");
Class("WaveAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this.audioSeek=125;this._super(b,c,d)},initSkin:function(){this.content.addClass("wave")},onResize:function(){this._super();var b=this.content.height();this.pnlListBackground.css("height",b-44+"px");b=this.pnlList.width()-20;if(this.items)for(var c=0;c<this.items.length;c++)this.items[c]&&this.items[c].css("width",b+"px")}}).extend("AudioListSkin");
Class("GlassAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("glass")}}).extend("AudioListSkin");Class("SimpleAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("simple")}}).extend("AudioSkin");Class("EnjoyAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("enjoy")}}).extend("AudioSkin");
Class("DecentAudioSkin",{create:function(b,c,d){this.volumeDirection="vertical";this._super(b,c,d)},initSkin:function(){this.content.addClass("decent")}}).extend("AudioSkin");Class("TreeAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("tree")}}).extend("AudioSkin");Class("ChristmasAudioSkin",{create:function(b,c,d){this.volumeDirection="vertical";this._super(b,c,d)},initSkin:function(){this.content.addClass("christmas")}}).extend("AudioSkin");
Class("TurnonoffAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},init:function(){this._super();this.volume_status=$("<div class='volume-status'>Music On</div>");this.content.append(this.volume_status)},initPlayEvents:function(){this._super();this.volume_status.bind(_event._click,function(b){!1==this.html_audio.$media[0].paused?this.html_audio.pause():this.html_audio.play();return!1}.bind(this));this.audio.bind("play",function(){this.volume_status.text("Music Off")}.bind(this));
this.audio.bind("pause",function(){this.volume_status.text("Music On")}.bind(this))},initSkin:function(){this.content.addClass("turnonoff")}}).extend("AudioSkin");Class("FadeAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("fade")}}).extend("AudioSkin");Class("BackgroundAudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this._super(b,c,d)},initSkin:function(){this.content.addClass("background")}}).extend("AudioSkin");
Class("Skin1AudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this.audioSeek=130;this._super(b,c,d)},initSkin:function(){this.content.addClass("skin1")}}).extend("AudioSkin");Class("Skin2AudioSkin",{create:function(b,c,d){this.volumeDirection="horizontal";this.audioSeek=80;this._super(b,c,d)},initSkin:function(){this.content.addClass("skin2")}}).extend("AudioSkin");bdor[7]="m";
(function(b){b.fn.addVideoSkin=function(b,d){var f=null;switch(b){case "round":f=new RoundVideoSkin(this,d);break;case "classic":f=new ClassicVideoSkin(this,d);break;case "smallblack":f=new SmallBlackVideoSkin(this,d);break;default:f=new ClassicVideoSkin(this,d)}return f};bdor.i=function(b){return bdor[b]};bdor.f="f";b.fn.addAudioSkin=function(b,d){var f=null,g=global[b.firstUpperCase()+"AudioSkin"];g&&(f=new g(this,this.audioResources,d));f||(f=new DefaultAudioSkin(this,this.audioResources,d));return f};
this.skin=this.bdor})(jQuery);var audioThemeNames={GlassAudioPlayer:"",SimpleAudioPlayer:"",StandardAudioPlayer:"",StandardAudioPlayer02:"",StandardAudioPlayer03:"",StandardAudioPlayer04:"",StandardAudioPlayer05:"",StandardAudioPlayer06:""};bdor[8]="o";
(function(b,c,d){function f(b,c){var d=(b[0]||0)-(c[0]||0);return 0<d||!d&&0<b.length&&f(b.slice(1),c.slice(1))}function g(b){if(typeof b!=k)return b;var c=[],d="",f;for(f in b)d=typeof b[f]==k?g(b[f]):[f,l?encodeURI(b[f]):b[f]].join("="),c.push(d);return c.join("&")}function h(b){var c=[],d;for(d in b)c.push(['<param name="',d,'" value="',g(b[d]),'" />'].join(""));return c.join("")}var k="object",l=!0;try{var m=d.description||(new d("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(n){m=
"Unavailable"}var p=m.match(/\d+/g)||[0];b[c]={available:0<p[0],activeX:d&&!d.name,version:{original:m,array:p,string:p.join("."),major:parseInt(p[0],10)||0,minor:parseInt(p[1],10)||0,release:parseInt(p[2],10)||0},hasVersion:function(b){b=/string|number/.test(typeof b)?b.toString().split("."):/object/.test(typeof b)?[b.major,b.minor]:b||[0,0];return f(p,b)},encodeParams:!0,expressInstall:"expressInstall.swf",expressInstallIsActive:!1,create:function(b){if(!b.swf||this.expressInstallIsActive||!this.available&&
!b.hasVersionFail)return!1;if(!this.hasVersion(b.hasVersion||1)){this.expressInstallIsActive=!0;if("function"==typeof b.hasVersionFail&&!b.hasVersionFail.apply(b))return!1;b={swf:b.expressInstall||this.expressInstall,height:137,width:214,flashvars:{MMredirectURL:location.href,MMplayerType:this.activeX?"ActiveX":"PlugIn",MMdoctitle:document.title.slice(0,47)+" - Flash Player Installation"}}}attrs={data:b.swf,type:"application/x-shockwave-flash",id:b.id||"flash_"+Math.floor(999999999*Math.random()),
width:b.width||320,height:b.height||180,style:b.style||""};l="undefined"!==typeof b.useEncode?b.useEncode:this.encodeParams;b.movie=b.swf;b.wmode=b.wmode||"opaque";delete b.fallback;delete b.hasVersion;delete b.hasVersionFail;delete b.height;delete b.id;delete b.swf;delete b.useEncode;delete b.width;var c=document.createElement("div"),d;d=attrs;var f=[],g;for(g in d)d[g]&&f.push([g,'="',d[g],'"'].join(""));d=f.join(" ");c.innerHTML=["<object ",d,">",h(b),"</object>"].join("");return c.firstChild}};
b.fn[c]=function(d){var f=this.find(k).andSelf().filter(k);/string|object/.test(typeof d)&&this.each(function(){var f=b(this),g;d=typeof d==k?d:{swf:d};d.fallback=this;if(g=b[c].create(d))f.children().remove(),f.html(g)});"function"==typeof d&&f.each(function(){var f=this;f.jsInteractionTimeoutMs=f.jsInteractionTimeoutMs||0;660>f.jsInteractionTimeoutMs&&(f.clientWidth||f.clientHeight?d.call(f):setTimeout(function(){b(f)[c](d)},f.jsInteractionTimeoutMs+66))});return f}})(jQuery,"flash",navigator.plugins["Shockwave Flash"]||
window.ActiveXObject);jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(b,c,d,f,g){return jQuery.easing[jQuery.easing.def](b,c,d,f,g)},easeInQuad:function(b,c,d,f,g){return f*(c/=g)*c+d},easeOutQuad:function(b,c,d,f,g){return-f*(c/=g)*(c-2)+d},easeInOutQuad:function(b,c,d,f,g){return 1>(c/=g/2)?f/2*c*c+d:-f/2*(--c*(c-2)-1)+d},easeInCubic:function(b,c,d,f,g){return f*(c/=g)*c*c+d},easeOutCubic:function(b,c,d,f,g){return f*((c=c/g-1)*c*c+1)+d},easeInOutCubic:function(b,c,d,f,g){return 1>(c/=g/2)?f/2*c*c*c+d:
f/2*((c-=2)*c*c+2)+d},easeInQuart:function(b,c,d,f,g){return f*(c/=g)*c*c*c+d},easeOutQuart:function(b,c,d,f,g){return-f*((c=c/g-1)*c*c*c-1)+d},easeInOutQuart:function(b,c,d,f,g){return 1>(c/=g/2)?f/2*c*c*c*c+d:-f/2*((c-=2)*c*c*c-2)+d},easeInQuint:function(b,c,d,f,g){return f*(c/=g)*c*c*c*c+d},easeOutQuint:function(b,c,d,f,g){return f*((c=c/g-1)*c*c*c*c+1)+d},easeInOutQuint:function(b,c,d,f,g){return 1>(c/=g/2)?f/2*c*c*c*c*c+d:f/2*((c-=2)*c*c*c*c+2)+d},easeInSine:function(b,c,d,f,g){return-f*Math.cos(c/
g*(Math.PI/2))+f+d},easeOutSine:function(b,c,d,f,g){return f*Math.sin(c/g*(Math.PI/2))+d},easeInOutSine:function(b,c,d,f,g){return-f/2*(Math.cos(Math.PI*c/g)-1)+d},easeInExpo:function(b,c,d,f,g){return 0==c?d:f*Math.pow(2,10*(c/g-1))+d},easeOutExpo:function(b,c,d,f,g){return c==g?d+f:f*(-Math.pow(2,-10*c/g)+1)+d},easeInOutExpo:function(b,c,d,f,g){return 0==c?d:c==g?d+f:1>(c/=g/2)?f/2*Math.pow(2,10*(c-1))+d:f/2*(-Math.pow(2,-10*--c)+2)+d},easeInCirc:function(b,c,d,f,g){return-f*(Math.sqrt(1-(c/=g)*
c)-1)+d},easeOutCirc:function(b,c,d,f,g){return f*Math.sqrt(1-(c=c/g-1)*c)+d},easeInOutCirc:function(b,c,d,f,g){return 1>(c/=g/2)?-f/2*(Math.sqrt(1-c*c)-1)+d:f/2*(Math.sqrt(1-(c-=2)*c)+1)+d},easeInElastic:function(b,c,d,f,g){b=1.70158;var h=0,k=f;if(0==c)return d;if(1==(c/=g))return d+f;h||(h=0.3*g);k<Math.abs(f)?(k=f,b=h/4):b=h/(2*Math.PI)*Math.asin(f/k);return-(k*Math.pow(2,10*(c-=1))*Math.sin(2*(c*g-b)*Math.PI/h))+d},easeOutElastic:function(b,c,d,f,g){b=1.70158;var h=0,k=f;if(0==c)return d;if(1==
(c/=g))return d+f;h||(h=0.3*g);k<Math.abs(f)?(k=f,b=h/4):b=h/(2*Math.PI)*Math.asin(f/k);return k*Math.pow(2,-10*c)*Math.sin(2*(c*g-b)*Math.PI/h)+f+d},easeInOutElastic:function(b,c,d,f,g){b=1.70158;var h=0,k=f;if(0==c)return d;if(2==(c/=g/2))return d+f;h||(h=0.3*g*1.5);k<Math.abs(f)?(k=f,b=h/4):b=h/(2*Math.PI)*Math.asin(f/k);return 1>c?-0.5*k*Math.pow(2,10*(c-=1))*Math.sin(2*(c*g-b)*Math.PI/h)+d:k*Math.pow(2,-10*(c-=1))*Math.sin(2*(c*g-b)*Math.PI/h)*0.5+f+d},easeInBack:function(b,c,d,f,g,h){void 0==
h&&(h=1.70158);return f*(c/=g)*c*((h+1)*c-h)+d},easeOutBack:function(b,c,d,f,g,h){void 0==h&&(h=1.70158);return f*((c=c/g-1)*c*((h+1)*c+h)+1)+d},easeInOutBack:function(b,c,d,f,g,h){void 0==h&&(h=1.70158);return 1>(c/=g/2)?f/2*c*c*(((h*=1.525)+1)*c-h)+d:f/2*((c-=2)*c*(((h*=1.525)+1)*c+h)+2)+d},easeInBounce:function(b,c,d,f,g){return f-jQuery.easing.easeOutBounce(b,g-c,0,f,g)+d},easeOutBounce:function(b,c,d,f,g){return(c/=g)<1/2.75?7.5625*f*c*c+d:c<2/2.75?f*(7.5625*(c-=1.5/2.75)*c+0.75)+d:c<2.5/2.75?
f*(7.5625*(c-=2.25/2.75)*c+0.9375)+d:f*(7.5625*(c-=2.625/2.75)*c+0.984375)+d},easeInOutBounce:function(b,c,d,f,g){return c<g/2?0.5*jQuery.easing.easeInBounce(b,2*c,0,f,g)+d:0.5*jQuery.easing.easeOutBounce(b,2*c-g,0,f,g)+0.5*f+d}});
(function(b){var c=[],d=function(){},f=0,g=[],h=function(){f++;f>=c.length&&(d(g),d=function(){})},k=function(c){var d=new Image;b(d).on("load",function(){g.push({url:c,img:d});h()}).on("error",function(){g.push(d);h()}).attr("src",c)};b.fn.loader=function(f,g,h){f&&b.extend(c,f);"function"==typeof g&&(d=g);for(f=0;f<c.length;f++)k(c[f])}})(jQuery);
var phoneIconInfo={width:600,height:1E3,iconInfo:[{id:"next",position:{x:96,y:193},width:48,height:48},{id:"prev",position:{x:10,y:193},width:48,height:48},{id:"search",position:{x:178,y:18},width:48,height:48},{id:"searchButton",position:{x:540,y:630},width:35,height:35},{id:"tableOfContent",position:{x:255,y:21},width:48,height:48},{id:"ZoomIn",position:{x:19,y:106},width:48,height:48},{id:"addBookmark",position:{x:542,y:17},width:48,height:48},{id:"bookmark",position:{x:483,y:17},width:48,height:48},
{id:"miBookmark",position:{x:552,y:284},width:32,height:32},{id:"miBookmark_close",position:{x:402,y:429},width:40,height:40},{id:"miBookmark_close_enter",position:{x:462,y:429},width:40,height:40},{id:"thumbnails",position:{x:19,y:18},width:48,height:48},{id:"moreBar",position:{x:97,y:19},width:48,height:48},{id:"miSearch",position:{x:20,y:284},width:32,height:32},{id:"miTableOfContent",position:{x:373,y:284},width:32,height:32},{id:"sharethis",position:{x:87,y:284},width:32,height:32},{id:"home",
position:{x:495,y:284},width:32,height:32},{id:"facebook",position:{x:20,y:412},width:65,height:65},{id:"twitter",position:{x:92,y:412},width:65,height:65},{id:"google",position:{x:164,y:412},width:65,height:65},{id:"addthis",position:{x:309,y:412},width:65,height:65},{id:"linkedin",position:{x:236,y:412},width:65,height:65},{id:"share_more",position:{x:308,y:412},width:65,height:65},{id:"reddit",position:{x:192,y:610},width:65,height:65},{id:"digg",position:{x:265,y:610},width:65,height:65},{id:"email",
position:{x:340,y:610},width:65,height:65},{id:"collapsed",position:{x:406,y:348},width:24,height:24},{id:"expanded",position:{x:449,y:351},width:24,height:24},{id:"download",position:{x:158,y:284},width:32,height:32},{id:"print",position:{x:305,y:283},width:32,height:32},{id:"autoPlay",position:{x:184,y:104},width:48,height:48},{id:"stopAutoPlay",position:{x:258,y:104},width:48,height:48},{id:"shoppingCart",position:{x:407,y:104},width:48,height:48},{id:"instructions",position:{x:419,y:620},width:48,
height:48},{id:"annotation",position:{x:482,y:620},width:48,height:48},{id:"goBtn",position:{x:338,y:110},width:48,height:48},{id:"forward",position:{x:482,y:620},width:48,height:48},{id:"backward",position:{x:482,y:620},width:48,height:48},{id:"languageChange",position:{x:232,y:284},width:32,height:32},{id:"setting",position:{x:437,y:282},width:32,height:32},{id:"soundOn",position:{x:197,y:535},width:45,height:45},{id:"soundOff",position:{x:197,y:535},width:45,height:45},{id:"First",position:{x:194,
y:194},width:45,height:45},{id:"prev",position:{x:291,y:194},width:45,height:45},{id:"next",position:{x:383,y:194},width:45,height:45},{id:"Last",position:{x:475,y:194},width:45,height:45},{id:"choosed",position:{x:356,y:346},width:28,height:28},{id:"unchoosed",position:{x:297,y:346},width:28,height:28},{id:"gotoPage",position:{x:414,y:20},width:48,height:48},{id:"ZoomOut",position:{x:101,y:107},width:48,height:48},{id:"passward",position:{x:8,y:547},width:170,height:170},{id:"fullScreen",position:{x:482,
y:104},width:48,height:48},{id:"exitFullScreen",position:{x:540,y:104},width:48,height:48},{id:"firstBtn",position:{x:194,y:190},width:45,height:45},{id:"prevBtn",position:{x:291,y:190},width:45,height:45},{id:"nextBtn",position:{x:383,y:190},width:45,height:45},{id:"lastBtn",position:{x:475,y:190},width:45,height:45},{id:"backwardBtn",position:{x:494,y:344},width:45,height:45},{id:"forwardBtn",position:{x:548,y:344},width:45,height:45}]},catalogIconInfo={width:520,height:220,iconInfo:[{id:"background",
position:{x:3,y:9},width:420,height:50},{id:"thumb",position:{x:144,y:143},width:38,height:38},{id:"thumb_down",position:{x:144,y:179},width:38,height:38},{id:"share",position:{x:213,y:143},width:38,height:38},{id:"share_down",position:{x:213,y:179},width:38,height:38},{id:"search",position:{x:179,y:143},width:38,height:38},{id:"search_down",position:{x:179,y:179},width:38,height:38},{id:"more",position:{x:252,y:143},width:38,height:38},{id:"more_down",position:{x:252,y:179},width:38,height:38},{id:"prev",
position:{x:240,y:66},width:38,height:38},{id:"next",position:{x:288,y:66},width:38,height:38},{id:"prev_down",position:{x:240,y:106},width:38,height:38},{id:"next_down",position:{x:288,y:106},width:38,height:38},{id:"fullScreen",position:{x:290,y:143},width:38,height:38},{id:"fullScreen_down",position:{x:290,y:179},width:38,height:38},{id:"exitFullScreen",position:{x:328,y:143},width:38,height:38},{id:"exitFullScreen_down",position:{x:328,y:179},width:38,height:38}]};
jQuery.fn.loading=function(b,c){this.initLoadingHtml=function(b){this.loadingDom=$('<div class="loader"><div class="loader-inner ball-pulse-sync"><div></div><div></div><div></div></div></div>');this.append(this.loadingDom)}.bind(this);this.createLoading=function(b){this.initLoadingHtml(b)}.bind(this);this.finishedLoading=function(){this.hideLoading()}.bind(this);this.initLoading=function(){}.bind(this);this.showLoading=function(){this.loadingDom&&this.loadingDom.show()}.bind(this);this.hideLoading=
function(){this.loadingDom&&this.loadingDom.remove()}.bind(this);this.createLoading(b)};
(function(b){var c=function(){return Hammer.HAS_TOUCHEVENTS&&navigator.userAgent.match(Hammer.MOBILE_REGEX)};bdor[3]="f";var d=function(b){this.theButton=b;this.eventSource=b[0];c()?(b.bind("touchstart",this.mouseDown.bind(this)),b.bind("touchend",this.mouseUp.bind(this))):(b.bind("mouseenter",this.mouseEnter.bind(this)),b.bind("mouseleave",this.mouseLeave.bind(this)),b.bind("blur",this.mouseLeave.bind(this)),b.bind("mousedown",this.mouseDown.bind(this)),b.bind("mouseup",this.mouseUp.bind(this)))};
d.prototype.mouseEnter=function(){this.setAlpha(80)};d.prototype.mouseLeave=function(){this.setAlpha(100)};d.prototype.mouseDown=function(){this.setAlpha(60)};d.prototype.mouseUp=function(){this.setAlpha(80)};d.prototype.setAlpha=function(b){0>b&&(b=0);100<=b&&(b=100);this.theButton.css("opacity",b/100)};b.fn.asButton=function(){new d(this);return this};bdor[4]="h";var f=function(b){this.eventSource=b[0];this.origPicture=b[0].src;var d=this.origPicture.lastIndexOf("."),f=this.origPicture.substr(0,
d),d=this.origPicture.substring(d);this.pictureDown=f+"_down"+d;c()?(b.bind("touchstart",this.mouseOver.bind(this)),b.bind("touchend",this.mouseLeave.bind(this))):(b.bind("mouseenter",this.mouseOver.bind(this)),b.bind("mousedown",this.mouseDown.bind(this)),b.bind("mouseup",this.mouseUp.bind(this)),b.bind("mouseleave",this.mouseLeave.bind(this)),b.bind("blur",this.mouseLeave.bind(this)))};f.prototype.mouseOver=function(){this.eventSource.src=this.pictureDown};f.prototype.mouseDown=function(){b(this.eventSource).css("opacity",
0.8)};f.prototype.mouseUp=function(){b(this.eventSource).css("opacity",1)};f.prototype.mouseLeave=function(){this.eventSource.src=this.origPicture};b.fn.asImageButton=function(){new f(this);return this};var g=function(b){this.eventSource=b[0];this.origPicture=b[0].src;var d=this.origPicture.lastIndexOf("."),f=this.origPicture.substr(0,d),d=this.origPicture.substring(d);this.pictureDown=f+"_down"+d;c()?(b.bind("touchstart",this.mouseOver.bind(this)),b.bind("touchend",this.mouseUp.bind(this))):(b.bind("mouseenter",
this.mouseOver.bind(this)),b.bind("mousedown",this.mouseDown.bind(this)),b.bind("mouseup",this.mouseUp.bind(this)),b.bind("mouseleave",this.mouseUp.bind(this)))};bdor[10]="l";g.prototype.mouseOver=function(){this.eventSource.src=this.pictureDown};g.prototype.mouseDown=function(){this.eventSource.src=this.pictureDown};g.prototype.mouseUp=function(){var b=this;window.setTimeout(function(){b.eventSource.src=b.origPicture},100)};b.fn.asImageChangeButton=function(){new g(this);return this};var h=function(b){this.theButton=
b;this.eventSource=b[0];var c=this.theButton.css("top");this.iOrigTop=parseInt(c.replace("px",""));this.iJumpTop=this.iOrigTop-5;b.bind("mouseenter",this.MouseEnter.bind(this));b.bind("mouseleave",this.MouseLeave.bind(this))};h.prototype.MouseEnter=function(){this.theButton.animate({top:this.iJumpTop},50)};h.prototype.MouseLeave=function(){this.theButton.animate({top:this.iOrigTop},50)};b.fn.mouseEnterJump=function(){new h(this);return this};b.fn.mouseOverCursor=function(){new k(this);return this};
var k=function(b){b.bind("mouseover",function(){b.css({cursor:"pointer"})})},l=function(b){this.theButton=b;this.eventSource=b[0];var c=this.theButton.css("top");this.iOrigTop=parseInt(c.replace("px",""));c=this.theButton.css("left");this.iOrigLeft=parseInt(c.replace("px",""));this.iZoomTop=this.iOrigTop-3;this.iZoomLeft=this.iOrigLeft-1;b.bind("mouseenter",this.MouseEnter.bind(this));b.bind("mouseleave",this.MouseLeave.bind(this))};l.prototype.MouseDown=function(){this.theButton.css({left:this.iZoomLeft+
"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};l.prototype.MouseEnter=function(){this.theButton.css({left:this.iZoomLeft+"px",top:this.iZoomTop+"px","-webkit-transform":"scale(1.2)","-moz-transform":"scale(1.2)",transform:"scale(1.2)","-ms-transform":"scale(1.2)","-o-transform":"scale(1.2)"})};l.prototype.MouseLeave=function(){this.theButton.css({left:this.iOrigLeft+"px",
top:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};var m=function(b){this.theButton=b;this.eventSource=b[0];var c=this.theButton.css("top");this.iOrigTop=parseInt(c.replace("px",""));c=this.theButton.css("left");this.iOrigLeft=parseInt(c.replace("px",""));this.iZoomTop=this.iOrigTop-1;this.iZoomLeft=this.iOrigLeft-1;b.bind("mouseenter",this.MouseEnter.bind(this));b.bind("mouseleave",this.MouseLeave.bind(this))};
m.prototype.MouseEnter=function(){this.theButton.css({"-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};m.prototype.MouseLeave=function(){this.theButton.css({"-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};b.fn.mouseEnterZoom=function(){new m(this);return this};b.fn.mouseEnterUp=function(){new n(this);return this};var n=
function(b){this.theButton=b;this.eventSource=b[0];var c=this.theButton.css("bottom");this.iOrigTop=parseInt(c.replace("px",""));c=this.theButton.css("left");this.iOrigLeft=parseInt(c.replace("px",""));this.iZoomTop=this.iOrigTop-1;this.iZoomLeft=this.iOrigLeft-1;b.bind("mouseenter",this.MouseEnter.bind(this));b.bind("mouseleave",this.MouseLeave.bind(this))};n.prototype.MouseEnter=function(){this.theButton.css({bottom:this.iZoomTop+"px","-webkit-transform":"scale(1.1)","-moz-transform":"scale(1.1)",
transform:"scale(1.1)","-ms-transform":"scale(1.1)","-o-transform":"scale(1.1)"})};n.prototype.MouseLeave=function(){this.theButton.css({bottom:this.iOrigTop+"px","-webkit-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)","-ms-transform":"scale(1)","-o-transform":"scale(1)"})};b.fn.mouseZoomUp=function(){new l(this);return this};b.fn.mouseEnterLight=function(b){b||(b="#EEEEEE");var d=this;this.bind(_event._enter,function(){d.css({background:b})});this.bind(_event._down,function(){d.css({background:b})});
c()?this.bind(_event._end,function(){d.css({background:"transparent"})}):this.bind(_event._end,function(){d.css({background:b})});this.bind(_event._leave,function(){d.css({background:"transparent"})});return this};b.fn.mouseEnterShine=function(b,d,f){var g=this,h=colorDiv(b,10);this.bind(_event._enter,function(){g.css({background:h});g.css({border:""});g.css({"border-left":"1px solid "+f,"border-top":"1px solid "+f});g.css({"border-right":"1px solid "+d,"border-bottom":"1px solid "+d})});this.bind(_event._down,
function(){g.css({background:h});g.css({border:""});g.css({"border-left":"1px solid "+d,"border-top":"1px solid "+d});g.css({"border-right":"1px solid "+f,"border-bottom":"1px solid "+f})});c()?this.bind(_event._end,function(){g.css({background:"transparent"});g.css({border:""})}):this.bind(_event._end,function(){g.css({background:h});g.css({border:""});g.css({"border-left":"1px solid "+f,"border-top":"1px solid "+f});g.css({"border-right":"1px solid "+d,"border-bottom":"1px solid "+d})});this.bind(_event._leave,
function(){g.css({background:"transparent"});g.css({border:""})});return this};b.fn.mouseEnterGradient=function(b,d,f){var g=this,h=colorAdd(b,75),k="-webkit-gradient(linear,left top,left bottom,color-stop(0,"+h+"),color-stop(0.19,"+colorAdd(h,2)+"),color-stop(0.35,"+colorAdd(h,28)+"),color-stop(0.55, "+colorAdd(h,6)+"),color-stop(0.75,"+colorAdd(h,4)+"),color-stop(0.85,"+colorAdd(h,2)+"),color-stop(1, "+h+"))";this.bind(_event._enter,function(){g.css("background",k);g.css({border:""});g.css({"border-left":"1px solid "+
f,"border-top":"1px solid "+f});g.css({"border-right":"1px solid "+d,"border-bottom":"1px solid "+d})});this.bind(_event._down,function(){g.setGradient(h,!1);g.css({border:""});g.css({"border-left":"1px solid "+d,"border-top":"1px solid "+d});g.css({"border-right":"1px solid "+f,"border-bottom":"1px solid "+f})});c()?this.bind(_event._end,function(){g.css({background:"transparent"});g.css({border:""})}):this.bind(_event._end,function(){g.css("background",k);g[0].style.removeAttribute&&g[0].style.removeAttribute("filter");
g.css({border:""});g.css({"border-left":"1px solid "+f,"border-top":"1px solid "+f});g.css({"border-right":"1px solid "+d,"border-bottom":"1px solid "+d})});this.bind(_event._leave,function(){g[0].style.removeAttribute&&g[0].style.removeAttribute("filter");g.css({background:"transparent"});g.css({border:""})});return this};b.fn.dragToMove=function(c,d,f){var g=!1,h=0,k=0,l=0,m=0;b(this).bind(_event._down,function(d){var f=b(this)[0];f.setCapture?f.setCapture():window.captureEvents(Event.MOUSEMOVE|
Event.MOUSEUP);d=isTouch?d.originalEvent.changedTouches:[d];g=!0;h=d[0].pageX;k=d[0].pageY;l=b(c).offset().left;m=b(c).offset().top});b(this).bind(_event._end,function(c){c=b(this)[0];c.releaseCapture?c.releaseCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);g=!1});b(this).bind(_event._move,function(n){n=isTouch?n.originalEvent.touches:[n];if(g){var x=l+(n[0].pageX-h);n=m+(n[0].pageY-k);void 0!=d&&(x=Math.max(d.x,x),x=Math.min(d.y,x));void 0!=f&&(n=Math.max(f.x,n),n=Math.min(f.y,n));
b(c).css({left:x+"px",top:n+"px"})}});b(this).bind("mouseleave",function(){return g=!1})};b.fn.slideFlipButtonShine=function(c){b(this).bind(_event._over,function(){b(this).css({cursor:"pointer"})});b(this).bind(_event._enter,function(){b(this).css({background:"#000000"})});b(this).bind(_event._leave,function(){b(this).css({background:"#888888"})})};bdor[31]=function(b,c){return bdor[b]-bdor[c]};b.fn.slideZoomButtonShine=function(c){b(this).bind(_event._enter,function(){b(this).css({cursor:"pointer"});
b(this).css({background:"#555555"})});b(this).bind(_event._leave,function(){b(this).css({background:""})})};b.fn.mouseEnterChange=function(c,d,f){var g=this;this.bind(_event._enter,function(){var h=b("<img src='"+f+"'>");g.empty().append(h);g.css({background:d});g.changeButtonColor(c)});this.bind(_event._end,function(){var c=b("<img src='"+f+"'>");g.empty().append(c);g.css({background:"transparent"});g.changeButtonColor(d)});this.bind(_event._leave,function(){var c=b("<img src='"+f+"'>");g.empty().append(c);
g.css({background:"transparent"});g.changeButtonColor(d)});return this};b.fn.clickExceptMove=function(b){var c=!1,d=!1,f=new Point(0,0);this.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches:[b];c=!0;d=!1;f.x=b[0].pageX;f.y=b[0].pageY;1<b.length&&(c=!1)});this.bind(_event._move,function(b){b=isTouch?b.originalEvent.touches:[b];d=1>=Math.abs(b[0].pageX-f.x)&&1>=Math.abs(b[0].pageY-f.y)?!1:!0});this.bind(_event._end,function(f){c&&!d&&b();d=c=!1})};b.fn.enterToChange=function(b,c,d,f,
g){var h=this.children();this.bind(_event._down,function(k){h.cssSprite(b,c+"_down",d,f,g)});this.bind(_event._enter,function(k){h.cssSprite(b,c+"_down",d,f,g)});this.bind(_event._leave,function(k){h.cssSprite(b,c,d,f,g)})};b.fn.addCssSprite=function(c,d,f,g,h){var k=b("<div></div>");k.cssSprite(c,d,f,g,h);this.append(k)};b.fn.changeCssSprite=function(b,c,d,f,g){this.children().cssSprite(b,c,d,f,g)};b.fn.cssSprite=function(b,c,d,f,g){if(g.iconInfo){for(var h=0,k=0;k<g.iconInfo.length;k++)if(g.iconInfo[k].id==
c){h=k;break}c=g.iconInfo[h].position;var k="",k=g.width,l=g.height,m=0,n=0,m=d*k/g.iconInfo[h].width,n=f*l/g.iconInfo[h].height;c=-c.x*m/k+"px "+-c.y*n/l+"px";k=m+"px "+n+"px";this.css({"background-image":"url("+b+")","background-repeat":"no-repeat","background-position":c,"-webkit-background-size":k,"-o-background-size":k,"background-size":k})}};bdor[6]="l"})(jQuery);var hddr=[];
jQuery.fn.drag=function(b){this.options=b?b:{};this.parameters={reference:this.options.reference?this.options.reference:$("body"),direction:this.options.direction?this.options.direction:"both",callback:this.options.callback?this.options.callback:void 0};this.create=function(){this.initEvent()}.bind(this);this.initEvent=function(){var b=new Hammer.Manager(this[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.on("panstart panmove panend pancancel",this.onPan.bind(this))}.bind(this);
this.onPan=function(b){b&&b.pointers&&1==b.pointers.length&&(this.animateInterval&&this.animateInterval.stop(),"panstart"==b.type&&(this.onPanStart=!0,$(this).css({cursor:"move"}),$(this).find(".form_title")[0]&&$(this).find(".form_title").css({cursor:"move"}),this.startX=this.getLeft(),this.startY=this.getTop()),this.onPanStart&&(this.moveTo(this.startX+b.deltaX,this.startY+b.deltaY),"panend"==b.type||"pancancel"==b.type))&&(this.restrictInBoundary(),$(this).css({cursor:"default"}),$(this).find(".form_title")[0]&&
$(this).find(".form_title").css({cursor:"default"}),this.parameters.callback&&this.parameters.callback(b),this.onPanStart=!1)}.bind(this);this.getLeft=function(){return parseInt($(this).css("left"))}.bind(this);this.getTop=function(){return parseInt($(this).css("top"))}.bind(this);this.moveTo=function(b,d){var f=this.offset(),g=this.getLeft(),h=this.getTop(),k=b-g,l=d-h,m=this.parameters.reference.width(),n=this.parameters.reference.height(),p=this.parameters.reference.offset().left,q=this.parameters.reference.offset().top;
f.left+k+this.width()>m+p&&(b=m+p-f.left-this.width()+g);f.top+l+this.height()>n+q&&(d=n+q-f.top-this.height()+h);f.left+k<p&&(b=p-f.left+g);f.top+l<q&&(d=q-f.top+h);switch(this.parameters.direction){case "horizontal":$(this).css({left:b+"px"});break;case "vertical":$(this).css({top:d+"px"});break;case "both":$(this).css({left:b+"px",top:d+"px"})}}.bind(this);this.restrictInBoundary=function(){}.bind(this);this.create()};
jQuery.fn.rolling=function(b,c){this.create=function(b,c){this.swiper=this.find(".swiper");this.EVENT_CANCEL=!1;this.direction=c;this.swiper.css(c,0);this.initEvent();this.refreshData()}.bind(this);this.refreshData=function(){this.items=this.find(".item");this.dots=this.find(".dots");this.items&&0!=this.items.length&&(this.stageWidth=$(this).width(),this.stageHeight=$(this).height(),"top"==c||"bottom"==c?(this.totalLength=this.swiper.height(),this.stageLength=this.stageHeight,this.itemLength=this.items[0].offsetHeight):
(this.totalLength=this.swiper.width(),this.stageLength=this.stageWidth,this.itemLength=this.items[0].offsetWidth),this.refreshSwiper(),this.totalLength<=this.stageLength?(this.dots.hide(),this.EVENT_CANCEL=!0):(this.dots.show(),this.EVENT_CANCEL=!1),this.initDotsEvent())}.bind(this);this.refreshSwiper=function(){var b=this.getCurrentLength(),b=Math.max(this.stageLength-this.totalLength,b),b=Math.min(0,b);this.moveTo(b)}.bind(this);this.initEvent=function(){$(this).bind("mousedown touchstart",this.onDown);
var b=new Hammer.Manager(this.swiper[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.on("panstart panmove panend pancancel",this.onPan);b.on("swipe",this.onSwipe);this.bind("mousewheel",this.onMouseWheel);this.bind("pointerdown",function(b){b.stopPropagation()})}.bind(this);this.initDotsEvent=function(){for(var b=this,c=this.dots.length,g=0;g<c;g++){var h=this.dots[g];$(h).attr("index",g);$(h).onTap(function(){b.animateToItem(this.index)})}}.bind(this);this.onDown=
function(b){this.EVENT_CANCEL||b.stopPropagation()}.bind(this);this.onPan=function(b){if(!this.EVENT_CANCEL&&b&&b.pointers&&1==b.pointers.length){this.animateInterval&&this.animateInterval.stop();"panstart"==b.type&&(this.startLength=this.getCurrentLength());var c=0;switch(this.direction){case "left":c=b.deltaX;break;case "right":c=-b.deltaX;break;case "top":c=b.deltaY;break;case "bottom":c=-b.deltaY}this.moveTo(this.startLength+c);"panend"!=b.type&&"pancancel"!=b.type||this.restrictInBoundary()}}.bind(this);
this.onSwipe=function(b){if(!this.EVENT_CANCEL){this.animateInterval&&this.animateInterval.stop();var c=0;switch(this.direction){case "left":c=b.velocityX;break;case "right":c=-b.velocityX;break;case "top":c=b.velocityY;break;case "bottom":c=-b.velocityY}0<c?this.animateToNextItem():this.animateToPrevItem()}}.bind(this);this.onMouseWheel=function(b){if(!this.EVENT_CANCEL){b=b.originalEvent;var c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail));if(!this.animateInterval||this.animateInterval.stopFlag)0<
c?this.animateToNextItem():this.animateToPrevItem(),b.stopPropagation()}}.bind(this);this.animateToItem=function(b){this.animateToPosition(b*this.itemLength)}.bind(this);this.animateToNextItem=function(){this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength+this.itemLength)}.bind(this);this.animateToPrevItem=function(){this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength-this.itemLength)}.bind(this);this.animateToPosition=function(b){var c=this.getCurrentLength();
b=this.getEffectiveLength(b);var g=function(g,k,l){l=(0,$.easing["easeOut"+l])(null,g,c,b-c,k);g<k?this.moveTo(l):(this.moveTo(l),this.animateInterval.stop())}.bind(this);this.animateInterval=function(b,c){g(b,c,"Sine")}.animation(this,300)}.bind(this);this.animateToCenterItem=function(){var b=this.getCurrentItem();if(b[0]){var c=b.offset(),g=0,h=c.left-this.swiper.offset().left,c=c.top-this.swiper.offset().top;switch(this.direction){case "left":g=-(h+b.width()/2)+this.stageLength/2;break;case "top":g=
-(c+b.height()/2)+this.stageLength/2;break;case "bottom":g=c-this.totalLength+b.height()/2+this.stageLength/2;break;case "right":g=h-this.totalLength+b.width()/2+this.stageLength/2}this.animateToPosition(g)}}.bind(this);this.getCurrentItem=function(){var b=this.swiper.find(".focus.highlight");b[0]||(b=this.swiper.find(".highlight"));return b}.bind(this);this.moveTo=function(b){this.swiper.css(this.direction,b+"px")}.bind(this);this.restrictInBoundary=function(){this.animateInterval&&this.animateInterval.stop();
var b=this.getCurrentLength(),c=this.getEffectiveLength(b);b!=c&&this.animateToPosition(c)}.bind(this);this.getEffectiveLength=function(b){return b?b=Number.between(b,-this.totalLength+this.stageLength,0):0}.bind(this);this.move=function(b){var c=this.getCurrentLength();this.animateToPosition(c+b)}.bind(this);this.getCurrentLength=function(){switch(this.direction){case "left":return this.getLeft();case "top":return this.getTop();case "bottom":return this.getBottom();case "right":return this.getRight()}}.bind(this);
this.getLeft=function(){return parseInt(this.swiper.css("left"))}.bind(this);this.getRight=function(){return parseInt(this.swiper.css("right"))}.bind(this);this.getBottom=function(){return parseInt(this.swiper.css("bottom"))}.bind(this);this.getTop=function(){return parseInt(this.swiper.css("top"))}.bind(this);this.create(b,c)};
jQuery.fn.scroll=function(b,c){this.create=function(b,c){this.swiper=this.find(".swiper");this.items=this.find(".item");this.progress=this.find(".progress");this.progressBar=this.find(".progressBar");this.EVENT_CANCEL=!1;this.direction=c;this.swiper.css(c,0);this.progress.css(c,0);this.progressBar.css(c,0);this.refreshData();this.initEvent();this.initProgressEvent()}.bind(this);this.refreshData=function(){this.stageWidth=$(this).width();this.stageHeight=$(this).height();"top"==c||"bottom"==c?(this.totalLength=
this.swiper.height(),this.stageLength=this.stageHeight,this.progress.css({height:this.stageLength+"px"}),this.progressBar.css({height:Math.pow(this.stageLength,2)/this.totalLength+"px"})):(this.totalLength=this.swiper.width(),this.stageLength=this.stageWidth,this.progress.css({width:this.stageLength+"px"}),this.progressBar.css({width:Math.pow(this.stageLength,2)/this.totalLength+"px"}));this.refreshSwiper();this.totalLength<=this.stageLength?(this.progress.hide(),this.EVENT_CANCEL=!0):(this.progress.show(),
this.EVENT_CANCEL=!1)}.bind(this);this.refreshSwiper=function(){var b=this.getCurrentLength(),b=Math.max(this.stageLength-this.totalLength,b),b=Math.min(0,b);this.moveTo(b)}.bind(this);this.initEvent=function(){$(this).bind("mousedown touchstart",this.onDown);var b=new Hammer.Manager(this.swiper[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.on("panstart panmove panend pancancel",this.onPan);b.on("swipe",this.onSwipe);this.bind("mousewheel DOMMouseScroll",this.onMouseWheel);
this.bind("pointerdown",function(b){b.stopPropagation()})}.bind(this);this.initProgressEvent=function(){var b=new Hammer.Manager(this.progressBar[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.on("panstart panmove panend pancancel",this.onProgressPan.bind(this));b.on("swipe",this.onProgressSwipe.bind(this));b=new Hammer.Manager(this.progress[0]);b.add(new Hammer.Tap);b.on("tap",this.onProgressTap.bind(this))}.bind(this);this.onDown=function(b){this.EVENT_CANCEL||
b.stopPropagation()}.bind(this);this.onPan=function(b){if(!this.EVENT_CANCEL&&b&&b.pointers&&1==b.pointers.length){this.animateInterval&&this.animateInterval.stop();"panstart"==b.type&&(this.startLength=this.getCurrentLength());var c=0;switch(this.direction){case "left":c=b.deltaX;break;case "right":c=-b.deltaX;break;case "top":c=b.deltaY;break;case "bottom":c=-b.deltaY}this.moveTo(this.startLength+c);"panend"!=b.type&&"pancancel"!=b.type||this.restrictInBoundary()}}.bind(this);this.onSwipe=function(b){if(!this.EVENT_CANCEL){this.animateInterval&&
this.animateInterval.stop();var c=0;switch(this.direction){case "left":c=b.velocityX;break;case "right":c=-b.velocityX;break;case "top":c=b.velocityY;break;case "bottom":c=-b.velocityY}this.startLength=this.getCurrentLength();this.animateToPosition(this.startLength+20*c)}}.bind(this);this.onProgressPan=function(b){this.EVENT_CANCEL||(b.deltaX=-b.deltaX*this.totalLength/this.stageLength,b.deltaY=-b.deltaY*this.totalLength/this.stageLength,this.onPan(b))}.bind(this);this.onProgressSwipe=function(b){this.EVENT_CANCEL||
(b.velocityX=-b.velocityX*this.totalLength/this.stageLength,b.velocityY=-b.velocityY*this.totalLength/this.stageLength,this.onSwipe(b))}.bind(this);this.onProgressTap=function(b){if(!this.EVENT_CANCEL&&b&&b.pointers&&1==b.pointers.length){var c=this.progress.offset(),g=0;switch(this.direction){case "left":g=-(b.pointers[0].pageX-c.left)*this.totalLength/this.stageLength;break;case "right":g=-(this.stageLength-b.pointers[0].pageX+c.left)*this.totalLength/this.stageLength;break;case "top":g=-(b.pointers[0].pageY-
c.top)*this.totalLength/this.stageLength;break;case "bottom":g=-(this.stageLength-b.pointers[0].pageY+c.top)*this.totalLength/this.stageLength}this.animateToPosition(g)}}.bind(this);this.onMouseWheel=function(b){if(!this.EVENT_CANCEL){b=b.originalEvent;var c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail));if(!this.animateInterval||this.animateInterval.stopFlag)c=this.getCurrentLength()+(0>c?-15:15),c=this.getEffectiveLength(c),this.moveTo(c),b.stopPropagation()}}.bind(this);this.getLeft=function(){return parseInt(this.swiper.css("left"))}.bind(this);
this.getRight=function(){return parseInt(this.swiper.css("right"))}.bind(this);this.getBottom=function(){return parseInt(this.swiper.css("bottom"))}.bind(this);this.getTop=function(){return parseInt(this.swiper.css("top"))}.bind(this);this.animateToPosition=function(b){var c=this.getCurrentLength();b=this.getEffectiveLength(b);var g=function(g,k,l){l=(0,$.easing["easeOut"+l])(null,g,c,b-c,k);g<k?this.moveTo(l):(this.moveTo(l),this.animateInterval.stop())}.bind(this);this.animateInterval=function(b,
c){g(b,c,"Sine")}.animation(this,300)}.bind(this);this.animateToCenterItem=function(){var b=this.getCurrentItem();if(b[0]){var c=b.offset(),g=0,h=c.left-this.swiper.offset().left,c=c.top-this.swiper.offset().top;switch(this.direction){case "left":g=-(h+b.width()/2)+this.stageLength/2;break;case "top":g=-(c+b.height()/2)+this.stageLength/2;break;case "bottom":g=c-this.totalLength+b.height()/2+this.stageLength/2;break;case "right":g=h-this.totalLength+b.width()/2+this.stageLength/2}this.animateToPosition(g)}}.bind(this);
this.getCurrentItem=function(){var b=this.swiper.find(".focus.highlight");b[0]||(b=this.swiper.find(".highlight"));return b}.bind(this);this.moveTo=function(b){var c=this.direction;this.swiper.css(c,b+"px");this.progressBar.css(c,-b*this.stageLength/this.totalLength+"px")}.bind(this);this.getCurrentLength=function(){switch(this.direction){case "left":return this.getLeft();case "top":return this.getTop();case "bottom":return this.getBottom();case "right":return this.getRight()}}.bind(this);this.restrictInBoundary=
function(){this.animateInterval&&this.animateInterval.stop();var b=this.getCurrentLength(),c=this.getEffectiveLength(b);b!=c&&this.animateToPosition(c)}.bind(this);this.getEffectiveLength=function(b){return b?b=Number.between(b,-this.totalLength+this.stageLength,0):0}.bind(this);this.move=function(b){var c=this.getCurrentLength();this.animateToPosition(c+b)}.bind(this);this.create(b,c)};
jQuery.fn.appearance=function(b,c){this.background=$("<div class='appear_win10'></div>");this.addClass("main_dom");this.background.append(this);this.show=function(){this.background.show();this.background.animate({opacity:1},function(){$(this).show();b&&b()})}.bind(this);this.hide=function(){this.background.animate({opacity:0},function(){$(this).hide();c&&c()})}.bind(this);this.getDom=function(){return this.background}.bind(this);this.background.click(function(b){b.target==b.currentTarget&&this.hide()}.bind(this));
return this.background};jQuery.fn.onTap=function(b){if(isPhone()||isPad())this.click(b);else{var c=new Hammer.Manager(this[0]);c.add(new Hammer.Tap({event:"tap",taps:1,threshold:5,time:400}));c.on("tap",b)}};jQuery.fn.onDoubleTap=function(b){var c=new Hammer.Manager(this[0]);c.add(new Hammer.Tap({event:"doubletap",taps:2}));c.on("doubletap",b)};var flipping=!1;
(function(b){bdor[5]="i";var c=function(c,f,g,h,k){if(void 0!=c&&null!=c){0>=h.length&&(k=b.extend({background:"green",cornersTop:!0,scale:"noresize"},k));c.prev();var l=0,m=!1,n=k.background,p=k.cornersTop,q=k.gradientColors||["#ddd","#eee","#fff"],t=k.scale,s=0,r=[],u,v,w;try{u=c.clone(),v=u[0].getContext("2d"),w=c[0].getContext("2d"),s=0}catch(y){w=v=u=null}this.images=h=h.each(function(c){if(!r[c]&&null!=w){var d=this;d.onload=function(){var k=1;if("noresize"!=t){var l=0==this.width?this.naturalWidth:
this.width,n=0==this.height?this.naturalHeight:this.height,p=f/l,q=g/n;"fit"==t&&(k=1>p||1>q?Math.min(p,q):1);"fill"==t&&(k=Math.min(p,q))}b(d).data("flip.scale",k);r[c]=w.createPattern(d,"no-repeat");r[c].width=l;r[c].height=n;s++;s!=h.length||m||(m=!0,I())};d.complete&&window.setTimeout(function(){d.onload()},10)}}).get();this.patterns=r;var x=f,z=g,E=b.browser.msie?c.offset():null,A,C,L,K;b.browser.msie&&function(){var h=b("<div>").width(f).height(g).css({position:"absolute",cursor:"default",zIndex:1}).appendTo(tmpContainer);
7==parseInt(b.browser.version)&&h.css({opacity:1E-6,background:"#FFF"});var k=function(){E=c.offset();return h.css({left:E.left+"px",top:E.top+"px"})};b(window).resize(k);return k()}();this.autoFlip=function(){window.clearInterval(A);C=(new Date).getTime();L=x;K=z/50;A=window.setInterval(S,0);l+=1;0>l&&(l=h.length-1);l==h.length&&(l=0)};this.timerFun=function(){this.timer=setInterval(this.autoFlip.bind(this),3E3)};this.timerFun();var S=this.flip=function(b){var c=(new Date).getTime()-C;700<=c?(window.clearInterval(A),
b&&b?(h.unshift(h.pop()),r.unshift(r.pop())):(h.push(h.shift()),r.push(r.shift())),x=f,z=g):(x=L-2*f*c/700,z=K+2*g*c/700/3);I()},D=function(c,d){if(null!=w){var h=c*f+d,k=-d/c;b.browser.msie&&(h=Math.round(h),k=Math.round(k));w.beginPath();w.moveTo(f,Math.min(h,g));w.lineTo(f,0);w.lineTo(Math.max(k,0),0);0>k?(w.lineTo(0,Math.min(d,g)),d<g&&w.lineTo((g-d)/c,g),w.lineTo(f,g)):h<g?w.lineTo(f,h):(w.lineTo((g-d)/c,g),w.lineTo(f,g))}},I=function(){if(m&&null!=w&&null!=v){b.browser.msie&&w.clearRect(0,0,
f,g);w.fillStyle=n;w.fillRect(0,0,f,g);var c=h[0],d=b(c).data("flip.scale");if(b.browser.msie)try{w.drawImage(c,0,0,c.width,c.height,0,0,f,g)}catch(k){w.fillStyle=r[0],w.fillStyle.width2=w.fillStyle.width*d,w.fillStyle.height2=w.fillStyle.height*d,w.fillRect(0,0,f,g)}else w.drawImage(c,(f-c.width*d)/2,(g-c.height*d)/2,c.width*d,c.height*d);if(z&&x!=f&&(c=(z-2*(x+f))/2,m2=z/(f-x),q2=x*m2,2!=m2)){var l=1,s=0;w.save();p||(s=g,l=-1);w.translate(0,s);w.scale(1,l);var t=(q2-c)/(2-m2),C=2*t+c,y=(2*C+t+4*
x-2*z)/5,E=-y/2+C+t/2,d=Math.sqrt(Math.pow(t-y,2)+Math.pow(C-E,2)),L=Math.min(0.5*d,30),A;b.browser.mozilla&&1.9>parseFloat(b.browser.version)?(A=v,A.clearRect(0,0,f,g),A.save(),A.translate(1,0)):A=w;t=A.createLinearGradient(t,C,y,E);t.addColorStop(0,q[0]);t.addColorStop(L/d,q[1]);t.addColorStop(1,q[2]);A.fillStyle=t;A.beginPath();A.moveTo(-c/2,0);A.quadraticCurveTo((-c/2+x)/2+0.02*x,z/2,x,z);A.quadraticCurveTo((f+x)/2,(2*f+c+z)/2-0.02*(g-z),f,2*f+c);b.browser.mozilla&&1.9>parseFloat(b.browser.version)?
(A.save(),A.clip(),A.fillRect(0,0,f,g),A.restore(),w.drawImage(u[0],0,0),A.restore()):A.fill();w.fillStyle=n;D(2,c);w.fill();D(2,c);b.browser.safari||b.browser.opera||w.restore();h[1]||(h[1]=h[0]);c=h[1];d=b(c).data("flip.scale");if(b.browser.msie)w.fillStyle=r[1],w.fillStyle.width2=w.fillStyle.width*d,w.fillStyle.height2=w.fillStyle.height*d,w.fill();else{w.save();w.clip();if(b.browser.safari||b.browser.opera)w.scale(1,1/l),w.translate(-0,-s);w.drawImage(c,(f-c.width*d)/2,(g-c.height*d)/2,c.width*
d,c.height*d);w.restore();(b.browser.safari||b.browser.opera)&&w.restore()}}}}}};b.fn.jFlip=function(d,f,g,h,k,l){return this.each(function(){b(this).wrap("<div class='bannerdiv' style='position: absolute;width:"+d+"px;height:"+f+"px;top:"+k+"px;left:"+h+"px'>");if("true"==l){if(1>=g.length)return;var m=b("<img class='leftBtn' src=\""+uiBaseURL+"pre_image.png\" style='position:absolute;width:25px;height:25px;left:0;top:"+(f-25)/2+"px;'/>"),n=b("<img class='rightBtn' src=\""+uiBaseURL+"next_image.png\" style='position:absolute;width:25px;height:25px;top:"+
(f-25)/2+"px;right:0;'/>");b(this).parent().append(m).append(n)}var p=b(this).find("img"),q=b(document.createElement("canvas")).attr({width:d,height:f}).css({margin:0,width:d+"px",height:f+"px"});b(this).css({position:"absolute",left:"-9000px",top:"-9000px",display:"none"}).after(q);var t=new c(b(this).next(),d||300,f||300,p,g);"true"!=l||1>=g.length||(m.bind("click",function(){t.flip(!0)}),n.bind("click",function(){t.flip()}))})}})(jQuery);
function searchFromPages(b,c){var d=[];c=c.trim().toLowerCase();for(var f=null,f=-1==c.indexOf(" ")?[c]:c.split(" "),g=0,g=0;g<b.length;g++){var h=b[g].trim().toLowerCase(),k=h,l=-1,m=-1,n=-1,p=0,q=!0,t;for(t=0;t<f.length;t++)if(f[t]){var k=new KMP(k,f[t]),s=f[t].length;if(k.match()){var r=p+k.getIndex();if(r>n)n=r,p=r+f[t].length,k=h.substring(p),0==t&&(l=r),t==f.length-1&&(m=r+s);else{q=!1;break}}else{q=!1;break}}q&&(n=[],n.search_page=g+1,n.search_title="page "+(g+1),l=h.substring(0,l).lastIndexOf("."),
-1==l?l=0:l++,p=h.substring(m),q=p.indexOf(".")+1,q=-1==q?p.length():m+q,h=h.substring(l,q),n.search_text=h,d.push(n))}return d}var KMP=function(b,c){this.__string=b;this.__pattern=c;this.__next=[];this.__times=0;this.__index=-1;for(var d=0,d=0;d<c.length;d++)this.__next[d]=1>=d?d-1:this.next(c.substring(0,d));this.__times=0;this.__index=-1};bdor[10]="l";KMP.prototype.next=function(b){for(var c=Math.ceil(b.length/2);0<c&&0!=b.substring(0,c).compareTo(b.substring(b.length-c,b.length));)c--;return c};
KMP.prototype.match=function(){for(var b=0,c=0,d=-1;b<this.__string.length&&c<this.__pattern.length;){if(this.__string.charAt(b)==this.__pattern.charAt(c))0===c&&(d=b),b++,c++;else{for(var f=this.__next[c];-1!=f&&this.__pattern.charAt(f)==this.__pattern.charAt(c);)f=this.__next[f];c=f;-1==c?(b++,c=0):d=b-c}this.__times++}return c==this.__pattern.length?(this.__index=d,!0):!1};KMP.prototype.getTimes=function(){return this.__times};KMP.prototype.getIndex=function(){return this.__index};
String.prototype.compareTo=function(b){var c=this.length,d=b.length,f=Math.min(c,d),g=this.split("");b=b.split("");var h=0,k=0;if(h==k)for(k=h,f+=h;k<f;){var l=g[k],m=b[k];if(l!=m)return l-m;k++}else for(;0!=f--;)if(l=g[h++],m=b[k++],l!=m)return l-m;return c-d};
$.fn.setGradient=function(b,c){var d=colorAdd(b,15),f=colorDiv(b,15);void 0==c&&(c=!1);var g="",h="0";c&&(g="left,",h="1");this.css({background:"linear-gradient("+g+d+", "+f+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+g+d+", "+f+")"});break;case 2:this.css({background:"-moz-linear-gradient("+g+d+", "+f+")"});break;case 3:this.css({background:"-ms-linear-gradient("+g+d+", "+f+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+h+", EndColorStr="+
f+", StartColorStr="+d+")");break;case 4:this.css({background:"-o-linear-gradient("+g+d+", "+f+")"})}};
$.fn.setGradientByDir=function(b,c,d){void 0==d&&(d=!1);var f="",g="0";d&&(f="left,",g="1");this.css({background:"linear-gradient("+f+b+", "+c+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+f+b+", "+c+")"});break;case 2:this.css({background:"-moz-linear-gradient("+f+b+", "+c+")"});break;case 3:this.css({background:"-ms-linear-gradient("+f+b+", "+c+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+g+", EndColorStr="+c+", StartColorStr="+
b+")");break;case 4:this.css({background:"-o-linear-gradient("+f+b+", "+c+")"})}};$.fn.addBorderShadow=function(b,c,d){var f=c+"px",g=d+"px";c=2*(Math.abs(c)+Math.abs(d))+"px";this.css({"-moz-box-shadow":f+" "+g+" "+c+" "+b,"box-shadow":f+" "+g+" "+c+" "+b,"-webkit-box-shadow":f+" "+g+" "+c+" "+b,"-o-box-shadow":f+" "+g+" "+c+" "+b,"-ms-box-shadow":f+" "+g+" "+c+" "+b})};
var getHost=function(b){var c;b||(b=window.location.href);var d=b.match(/(.*\:\/\/)([^\/]*)\/([^\/]*).*/);d&&(c="s3.amazonaws.com"===d[2]?d[1]+d[2]+"/"+d[3]:d[1]+d[2]);Log.print(b+d+","+c);return c};
$.fn.changeButtonColor=function(b,c,d){var f=this;if("none"!=this.css("display")){var g=this;0<this.children().length&&(g=this.find("img:first"));if(window.ActiveXObject){if("complete"!=g[0].readyState){$(g).on("load",function(){try{f.changeButtonColor(b,c,d)}catch(g){}});return}}else if(!g[0].complete){$(g).on("load",function(){try{f.changeButtonColor(b,c,d)}catch(g){}});return}if(void 0!=g[0]){var h,k;try{h=$("<canvas></canvas>")[0],k=h.getContext("2d")}catch(l){return}var m=g.width(),n=g.height(),
g=g[0];void 0==c&&(c=!1);var p=getHost(g.src),q=getHost();if(p&&q!==p){if(h=g.src.replace(p,q),g.src=h,!1==c)$(g).on("load",function(){try{f.changeButtonColor(b,!0,d)}catch(c){}})}else{h.width=m;h.height=n;try{k.drawImage(g,0,0,g.naturalWidth,g.naturalHeight,0,0,m,n);var t=k.getImageData(0,0,m,n),s=k.getImageData(0,0,m,n);if(!0!=g.colorChanged&&t){for(var r=Color(b).split(),m=0,u=t.data.length;m<u;m+=4)0<s.data[m+3]&&(t.data[m]!=r.r&&(s.data[m]=t.data[m]/255*r.r),t.data[m+1]!=r.g&&(s.data[m+1]=t.data[m+
1]/255*r.g),t.data[m+2]!=r.b&&(s.data[m+2]=t.data[m+2]/255*r.b));k.putImageData(s,0,0);g.src=h.toDataURL("image/png");void 0!=d&&d(f);g.colorChanged=!0}}catch(v){if(!1==c)$(g).on("load",function(){try{f.changeButtonColor(b,!0,d)}catch(c){}})}}}}};
$.fn.rotate=function(b){if(!(4<browserType&&1>browserType)){switch(browserType){case 1:this.css({"-webkit-transform":"rotate("+b+"deg)"});break;case 2:this.css({"-moz-transform":"rotate("+b+"deg)"});break;case 3:this.css({"-ms-transform":"rotate("+b+"deg)"});break;case 4:this.css({"-o-transform":"rotate("+b+"deg)"})}this.css({transform:"rotate("+b+"deg)"})}};
$.fn.scale=function(b,c){void 0==c&&(c="50% 50% 0");this.css({"-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-o-transform":"scale("+b+")",transform:"scale("+b+")","-webkit-transform-origin":c,"-moz-transform-origin":c,"-ms-transform-origin":c,"-o-transform-origin":c,"transform-origin":c})};
$.fn.transition3D=function(){this.css({"-ms-transform":"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"});return this};
$.fn.speed=function(b){function c(b){b=void 0==b.originalEvent.touches?[b]:b.originalEvent.touches;if(1<b.length)return q=!0;g=k=b[0].pageX;h=l=b[0].pageY;m=new Date;-1!=p&&window.clearInterval(p);p=window.setInterval(function(){g=k;h=l;m=new Date},300)}function d(b){if(-1==p||!0==q)return!0;b=void 0==b.originalEvent.touches?[b]:b.originalEvent.touches;k=b[0].pageX;l=b[0].pageY}function f(c){if(-1==p)return!0;c=void 0!=c.originalEvent.touches==!1?[c]:c.originalEvent.touches;if(!0==q)return q=1<c.length,
!0;n=new Date;c=(n-m)/20;var d=k-g,f=l-h;0==c?iSpeedY=iSpeedX=0:(iSpeedX=d/c,iSpeedY=f/c);void 0!=b&&b(iSpeedX,iSpeedY);window.clearInterval(p);p=-1}var g,h,k,l,m,n,p=-1,q=!1;try{this.bind("mousedown",c),this.bind("mousemove",d),this.bind("mouseup",f),this.bind("mouseleave",f)}catch(t){}try{this.bind("touchstart",c),this.bind("touchmove",d),this.bind("touchend",f),this.bind("touchleave",f)}catch(s){}};
Class("MediasPool",{currentMedia:null,addToMediasPool:function(b){window.mediasInPage.push(b)},cleanMediaPool:function(b){b.remove();window.mediasInPage.remove(b)}});window.playBackgroundSound=!0;window.mediasInPage=[];
Class("Media",{type:"",$media:null,create:function(b,c,d){this.$media=b;this.type=c;this.playEvt=d;this.checkMediaType();$(b).bind("ended",function(){this.playBackgroundSound()}.bind(this));$(b).bind("play",function(){unbindSoundEvent()});"vimeo"==c&&this.playVimeo()},play:function(){this.playMedia();window.currentMedia&&window.currentMedia!=this&&window.currentMedia.pauseMedia();window.currentMedia=this;this.pauseBackgroundSound()},pause:function(){this.pauseMedia();window.currentMedia==this&&this.playBackgroundSound()},
playBackgroundSound:function(){window.playBackgroundSound=!0;window.playBackgroundSound&&isPlaying&&global.bgSound.playCurrentAudio();window.currentMedia=null},pauseBackgroundSound:function(){window.playBackgroundSound&&isPlaying&&global.bgSound.pauseCurrentAudio();window.playBackgroundSound=!1},playMedia:function(){switch(this.type){case "youtube":this.callPlayer("playVideo");break;case "flv":this.player.play();break;case "vimeo":this.playVimeo();break;default:this.$media[0].play&&this.$media[0].play()}},
pauseMedia:function(){switch(this.type){case "youtube":this.callPlayer("pauseVideo");break;case "flv":this.player&&this.player.pause();break;case "vimeo":this.player&&this.player.pause();break;default:this.$media[0].pause&&this.$media[0].pause()}},bind:function(b,c){c&&this.$media&&this.$media.bind(b,c)},setSrc:function(b){},appentTo:function(b){},setCss:function(b){b&&this.$media&&this.$media.css(b)},setCurrentTime:function(b){"flv"==this.type?this.player.currentTime=b:this.$media&&this.$media[0]&&
(this.$media[0].currentTime=b)},setMute:function(b){"flv"==this.type?this.player.muted=b:this.$media&&this.$media[0]&&(this.$media[0].muted=b)},getType:function(){return this.type},remove:function(){this.$media.remove();this.$media=null},checkMediaType:function(){var b=this.$media.attr("src");b&&global.flvjs&&flvjs.isSupported()&&(b.endsWith(".flv")||b.endsWith(".f4v"))&&(this.type="flv",this.player=flvjs.createPlayer({type:"flv",url:b}),this.player.attachMediaElement(this.$media[0]),this.player.load())},
callPlayer:function(b,c){var d=this.$media[0],f=d.getAttribute("src");f&&-1!==f.indexOf("youtube.com/embed")&&d.contentWindow&&d.contentWindow.postMessage(JSON.stringify({event:"command",func:b,args:c||[]}),"*")},playVimeo:function(){this.$media&&(global.vimeoJsLoaded||$("head").find("#vimeoPlayApi")[0]||this.loadScript("https://player.vimeo.com/api/player.js",function(){global.vimeoJsLoaded=!0;this.player=new Vimeo.Player(this.$media[0]);this.playEvt==PageEditor.PlayEvt.EVT_PLAY&&this.player.play()}.bind(this)),
global.vimeoJsLoaded&&!this.player&&(this.player=new Vimeo.Player(this.$media[0]),this.playEvt==PageEditor.PlayEvt.EVT_PLAY&&this.player.play()),this.playEvt==PageEditor.PlayEvt.EVT_PLAY&&this.player&&this.player.play())},loadScript:function(b,c){var d=document.createElement("script");d.id="vimeoPlayApi";d.type="text/javascript";d.readyState?d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)d.onreadystatechange=null,c()}:d.onload=function(){c()};d.src=b;document.getElementsByTagName("head")[0].appendChild(d)}});
window.playBackgroundSound=!0;window.mediasInPage=[];
(function(){for(var b={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"-",prefix:""},c=["webkit","moz","o","ms"],d=0,f=c.length;d<f;d++)if(b.prefix=c[d],"undefined"!=typeof document[b.prefix+"CancelFullScreen"]){b.supportsFullScreen=!0;break}b.supportsFullScreen&&(b.fullScreenEventName=b.prefix+"fullscreenchange",b.isFullScreen=function(){switch(this.prefix){case "":return document.fullScreen;case "webkit":return document.webkitIsFullScreen;
default:return document[this.prefix+"FullScreen"]}},b.requestFullScreen=function(b){b[this.prefix+"RequestFullScreen"]()},b.cancelFullScreen=function(b){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});window.fullScreenApi=b})();
function readAsFullscreen(){isPhone()||isPad()?window.top!=window&&window.open(window.location.href):fullScreenApi&&fullScreenApi.supportsFullScreen?($(document).unbind(fullScreenApi.fullScreenEventName,onFullscreenEvent),$(document).bind(fullScreenApi.fullScreenEventName,onFullscreenEvent),fullscreenFun()):window.top!=window?window.open(window.location.href):alert("Press F11 to View FlipBook in Full Screen")}
function onFullscreenEvent(){StateSynchronous.instance().findButtons("FullscreenButton").each(function(b){fullScreenApi.isFullScreen()?b.setAsExitFullScreen():b.setAsFullScreen();b.executeCallback()});(function(){if(global.toolBar&&global.toolBar.onResize)toolBar.onResize()}).delay(100)}
function fullscreenFun(){var b=$("body")[0];fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(b));b.webkitSupportsFullscreen&&b.webkitEnterFullscreen(Element.ALLOW_KEYBOARD_INPUT)}
function DeString(b,c){if(""==b)return"";c&&""!=c||(c="fb5");c=escape(c);if(null==b||8>b.length)alert("A salt value could not be extracted from the encrypted message because it's length is too short. The message cannot be decrypted.");else if(null==c||0>=c.length)alert("Please enter a password with which to decrypt the message.");else{for(var d="",f=0;f<c.length;f++)d+=c.charCodeAt(f).toString();var g=Math.floor(d.length/5),g=parseInt(d.charAt(g)+d.charAt(2*g)+d.charAt(3*g)+d.charAt(4*g)+d.charAt(5*
g),10),h=Math.round(c.length/2),k=Math.pow(2,31)-1,f=parseInt(b.substring(b.length-8,b.length),16);b=b.substring(0,b.length-8);for(d+=f;10<d.length;)d=(parseInt(d.substring(0,10),10)+parseInt(d.substring(10,d.length),10)).toString();for(var d=(g*d+h)%k,l="",m="",f=0;f<b.length;f+=2)l=parseInt(parseInt(b.substring(f,f+2),16)^Math.floor(d/k*255),10),m+=String.fromCharCode(l),d=(g*d+h)%k;return unescape(m)}}
function loadJavascript(b,c,d){var f=this,g=document.createElement("script");g.type="text/javascript";g.async=!0;g.onload=g.onreadystatechange=function(){f.readyState&&"loaded"!=f.readyState&&"complete"!=f.readyState||(g.onload=g.onreadystatechange=null,void 0!=c&&c(g))};g.onerror=function(){void 0!=d&&d(g)};$("head")[0].appendChild(g);g.src=b;return g}
var HTMLString={riseAWord:function(b,c,d){var f=null,f=-1==c.indexOf(" ")?[c]:c.trim().split(" ");c=[];for(var g=0;g<f.length;g++){var h=b.indexOf(f[g])+f[g].length,k=b.substring(0,h);b=b.substring(h);k=k.replace(f[g],"<span style='color:"+d+";'>"+f[g]+"</span>");c.push(k)}""!==b&&c.push(b);return c.join("")},isHTML:function(b){return b?!!b.match(/^(<\w+>?).*((<\/\w+>)|(\/>))$/g):!1},toText:function(b){return b.replace(/<\/?\w+>/g,"")},toLabel:function(b){b=b.replaceAll("<","&lt;");return b.replaceAll(">",
"&gt;")}},LanguageTool={isEnglish:function(b){return/[\x00-\xff]/.test(b)},isChinese:function(b){return/[\u4E00-\u9FBF]/.test(b)},isArabic:function(b){return/[\u0600-\u06FF]|[\u0750-\u077F]/.test(b)},isUrdu:function(b){return this.isArabic(b)||/[\uFE70-\uFEFF]/.test(b)},isHebrew:function(b){return/[\u0590-\u05FF]|[\uFB00-\uFB4F]/.test(b)},isFarsi:function(b){return this.isUrdu(b)},isTai:function(b){return/[\u0E00-\u0E7F]/.test(b)},isHindi:function(b){return/[\u0900-\u097F]/.test(b)},isTamil:function(b){return/[\u0B80-\u0BFF]/.test(b)},
isHimalayaRahm:function(b){return/[\u0D00-\u0D7F]/.test(b)},isRightToLeft:function(b){return this.isArabic(b)||this.isUrdu(b)||this.isHebrew(b)||this.isFarsi(b)||this.isHindi(b)||this.isHimalayaRahm(b)}},Directory={getFileName:function(b){b=b.replaceAll("\\","/",!0);if(""==Directory.getFileSuffix(b))return"index.html";var c=b.lastIndexOf("/");return-1==c?b:b.substr(c+1)},getFilePath:function(b){b=b.replaceAll("\\","/",!0);var c=b.lastIndexOf("/");return-1==c?"":b.substr(0,c+1)},getFileSuffix:function(b){b=
b.replaceAll("\\","/",!0);var c=b.lastIndexOf(".");return-1==c?"":b.substr(c)},getFolderName:function(b){b=Directory.getFilePath(b);if(""==b)return"";b=Directory.removeSlash(b);var c=b.lastIndexOf("/");return-1==c?b:b.substr(c+1)},addSlash:function(b){b=b.replaceAll("\\","/",!0);return b.endsWith("/")?b:b+"/"},removeSlash:function(b){b=b.replaceAll("\\","/",!0);return b.endsWith("/")?b.substring(0,b.length-1):b},getUpperFilePath:function(b){b=b.replaceAll("\\","/",!0);var c=b.split("/"),d=c.length;
return b=b.endsWith(".html")||b.endsWith("/")?b.remove(c[d-2]+"/"+c[d-1]):b.remove(c[d-1])}};function animateOnce(b,c,d,f,g,h){if(b&&c)if(void 0==d||0===d||isIE9())b.css(c),f&&f instanceof Function&&f();else{var k=!1;setAnimation(b,d,g,h);b.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){!0!=k&&(k=!0,setAnimation(b,0),f&&f instanceof Function&&f())});b.css(c)}}
function setAnimation(b,c,d,f){if(b&&void 0!=c){100>c&&(c*=1E3);if(void 0==d||""==d)d="all";void 0==f&&(f="ease-in-out");f=d+" %dms "+f;0<c?"all"!=d?b.css({"-moz-transition":String.format(f,"-moz-",c),"-webkit-transition":String.format(f,"-webkit-",c),"-o-transition":String.format(f,"-o-",c),"-ms-transition":String.format(f,"-ms-",c),transition:String.format(f,"",c)}):b.css({"-moz-transition":String.format(f,c),"-webkit-transition":String.format(f,c),"-o-transition":String.format(f,c),"-ms-transition":String.format(f,
c),transition:String.format(f,c)}):b.css({"-moz-transition":"","-webkit-transition":"","-o-transition":"","-ms-transition":"",transition:""})}}
var Log=Class({statics:{isDebug:function(){return/debug=true/.test(window.location.href)},isPAD:function(){return 0<navigator.userAgent.toLowerCase().indexOf("pad")},logForPad:function(b,c){void 0==this.logDiv&&(this.logDiv=$("<div></div>"),this.logDiv.css({position:"absolute",width:"300px",height:"150px",top:"50px",overflow:"auto","z-index":"100000","background-color":"white"}),$("body")[0]&&$("body")[0].appendChild(this.logDiv[0]));var d=$("<p>"+b+"</p>");d.css("color",c);this.logDiv.append(d);
d=this.logDiv[0];d.scrollTop=d.scrollHeight},info:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.log&&console.log.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"black")}},debug:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.debug&&console.debug.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,
arguments),"blue")}},warn:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.warn&&console.warn.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"#FFA042")}},error:function(){if(this.isDebug()){$.browser&&$.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.error&&console.error.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,
arguments),"red")}},print:function(){var b=String.format.apply(this,arguments),c=(new Date).format("hh:mm:ss.S");this.debug("[%s] %s",c,b)}}}),divHint=Class({create:function(b,c,d,f){this.instance=$("<div class='hint'></div>");this.setText(b);void 0==f&&(f=$("body"));f.append(this.instance);this.instance.css({display:"none",opacity:0});this.moveto(c,d);this.animation=!1;this.className="hint"},setAnimate:function(b){this.animation=b;!0==b&&this.instance.css({"-moz-transition":"all 0.2s ease-in-out",
"-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"})},setStyle:function(b){this.instance.removeClass(this.className);this.instance.addClass(b);this.className=b},setText:function(b){this.instance.html(b)},moveto:function(b,c){this.instance.css({left:b,top:c})},show:function(){this.instance.css({display:"block",opacity:1})},hide:function(){!0==this.animation?this.instance.css({display:"none",opacity:0}):
this.instance.css({display:"none",opacity:1})},destroy:function(){this.hide();this.instance.empty();this.instance.remove()},width:function(){return this.instance.width()+3*this.padding()},height:function(){return this.instance.height()+3*this.padding()},padding:function(){var b=this.instance.css("padding");return void 0==b||null==b||""==b?0:iPadding=parseInt(b.replace("px",""))},addClass:function(b){this.instance.addClass(b)}});
Class("ObjectPool",{objects:null,length:0,create:function(){this.objects=[]},add:function(b){b&&(this.objects.push(b),this.length=this.objects.length)},remove:function(b){b&&(this.objects.removeElement(b),this.length=this.objects.length)},find:function(){for(var b=arguments,c=new ObjectPool,d=0;d<b.length;d++){var f=b[d];if("string"==typeof f&&""!=f)for(var f=f.toLowerCase(),g=0;g<this.objects.length;g++){var h=this.objects[g];h.getClassName&&-1<h.getClassName().toLowerCase().indexOf(f)&&c.add(h)}}return c},
match:function(){for(var b=arguments,c=new ObjectPool,d=0;d<b.length;d++){var f=b[d];if("string"==typeof f&&""!=f)for(var g=0;g<this.objects.length;g++){var h=this.objects[g];h.getClassName&&h.getClassName()==f&&c.add(h)}}return c},clone:function(){for(var b=new ObjectPool,c=0;c<this.objects.length;c++)b.add(this.get(c));return b},get:function(b){return this.objects[b]},each:function(b){for(var c=0;c<this.objects.length;c++){var d=this.objects[c];d&&b&&b instanceof Function&&b(d)}}});bdor[2]="e";
function Metacharacter(b){if(null==b||""==b)return"";b=b.replaceAll("%","%25",!0);b=b.replaceAll("+","%2B",!0);b=b.replaceAll("/","%2F",!0);b=b.replaceAll("?","%3F",!0);b=b.replaceAll(" ","%20",!0);b=b.replaceAll("#","%23",!0);b=b.replaceAll("&","%26",!0);b=b.replaceAll("=","%3D",!0);b=b.replaceAll(":","%3A",!0);b=b.replaceAll("\r","%0D",!0);b=b.replaceAll("\n","%0A",!0);return b=b.replaceAll("'","%27",!0)}
var reflection=function(b){var c=new Image;c.onload=function(){var d=null;b.children("canvas")[0]&&(d=$(b.children("canvas")[0]));var f=document.createElement("canvas"),g=f.getContext("2d");b[0].appendChild(f);c.onload=c.onerror=null;var h=this.width,k=this.height;b.children("img")&&h>b.children("img").width()&&(h=b.children("img").width());b.children("img")&&k>b.children("img").height()&&(k=b.children("img").height());var l=0.7*k;try{f.style.width=h+"px";f.style.height=l+"px";f.width=h;f.height=
l;f.className="reflect";$(f).css({transform:"translateY(-1px)"});g.save();g.translate(0,k);g.scale(1,-1);g.drawImage(c,0,0,h,k);g.restore();g.globalCompositeOperation="destination-out";var m=g.createLinearGradient(0,0,0,l);m.addColorStop(1,"rgba(255, 0, 0, 1.0)");m.addColorStop(0,"rgba(255, 0, 0, 0)");g.fillStyle=m;g.rect(0,0,h,2*l);g.fill();d&&d.remove()}catch(n){}};c.onerror=function(){c.onload=c.onerror=null};c.src=b.children("img")[0].src};
$.fn.allowNumberOnly=function(){$(this).keypress(function(b){b=b||e;b=b.keyCode||b.which;return 48<=b&&57>=b?!0:!1}).focus(function(){this.style.imeMode="disabled"}).bind("paste",function(){var b=window.clipboardData.getData("Text");return/^\d+$/.test(b)?!0:!1})};function getAnimationEnd(){var b=document.createElement("div"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},d;for(d in c)if(void 0!==b.style[d])return c[d]}
var getRealURL=function(b){if(b.isUrl()){var c=b.toLocaleLowerCase(),d=/^([_a-z\d\-]+\.)*[_a-z\d\-]+\.(com|net|int|info|edu|org|gov|club|biz|mil|xyz|[a-z]{2}[$\/]?)+/;/(f|ht)tp(s?)\:\/\//.test(c)||d.test(c)&&(b=getProtocal()+b)}else c=window.location.href.removeStartFrom("#p="),c=Directory.getFilePath(c).substring(0,c.lastIndexOf("/")),d=Directory.getUpperFilePath(c),b=0<=b.indexOf("../")?d+b.remove("../"):c+b;return b},VERSION_NAME="6.4.9",BUILD_DATE="2019051002",BookType={normal_book:0,single_book:1,
slide_book:3,singleSlide_book:6,catalog_book:7,singleCatalog_book:8},normalBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},singleBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},bookCorner={top_left:0,top_right:1,bottom_left:2,bottom_right:3},BrowserType={WEBKIT:1,OPERA:1,MOZ:2,MS:3},Direction={left:"left",right:"right",top:"top",bottom:"bottom"},bookEvent={onCurrentPageIndexChanged:"BE_PIC",onCurrentPageIndexWillChange:"BE_PIWC",
onNoNextPage:"BE_NNP",onNoPreviousPage:"BE_NPP"},PLUGIN_MAGNETICS="AbPIMagneticSlider",PLUGIN_ROTATE3D="AbPIRotationPhotoFor3D",PLUGIN_VIDEO1="VideoPlayerExemple01",PLUGIN_VIDEO2="VideoPlayerExemple02",PLUGIN_CLASSAUDIO="",KEY_CODE_ENTER=13,KEY_CODE_LEFT=37,KEY_CODE_UP=38,KEY_CODE_RIGHT=39,KEY_CODE_DOWN=40,KEY_CODE_HOME=36,KEY_CODE_END=35,KEY_CODE_PAGEUP=33,KEY_CODE_PAGEDOWN=34,KEY_CODE_DELETE=46,KEY_CODE_F11=122,KEY_CODE_A=65,MOUSE_LEFT=1,MOUSE_MIDDLE=2,MOUSE_RIGHT=3,LOADING_WIDTH=30,LOADING_HEIGHT=
30,COIL_PAGE_WIDTH=500,isTouchDevice=function(){var b="ontouchstart"in window,c=navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android/i),c=c&&0<c.length;return b&&c},isTouch=isTouchDevice(),_event;
_event=isTouchDevice()?{_down:"touchstart",_move:"touchmove",_up:"touchend",_end:"touchend",_click:"touchend",_leave:"touchleave",_out:"touchleave",_enter:"touchstart",_mousewheel:"mousewheel",_over:"touchover"}:{_down:"mousedown",_move:"mousemove",_up:"mouseup",_end:"mouseup",_click:"click",_leave:"mouseleave",_out:"mouseout",_enter:"mouseenter",_mousewheel:"mousewheel",_over:"mouseover"};$.browser.mozilla&&(_event._mousewheel="DOMMouseScroll");
var WebScheme={HTTP:"http",HTTPS:"https",FTP:"ftp",MAILTO:"mailto",IDAP:"idap",FILE:"file",NEWS:"news",GOPHER:"gopher",TELNET:"telnet"},STR_XML_HEAD='<?xml version="1.0" encoding="utf-8"?>',SearchItemRelation={NEARBY:0,SPACE:1,DOUBLE_SPACE:2,RETURN:3},PageTextSelectMode={LINE:0,COLUMN:1},aliasLanguage={btnFullScreen:["btnFullscreen"],btnDisableFullScreen:["btnExitFullscreen"],btnSelection:["btnSelectText"],btnNextPage:["btnPageForward"],btnPrePage:["btnPageBack"]},checkBookConfig=function(){void 0==
window.aliasConfig&&(window.aliasConfig={});bookConfig.searchColor=getConfigValue("searchColor","#00ffff");bookConfig.searchAlpha=getConfigValue("searchAlpha",0.3);bookConfig.appLogoIcon=getConfigValue("appLogoIcon","");bookConfig.HomeURL=getConfigValue("HomeURL","");bookConfig.bookTitle=getConfigValue("bookTitle","FLIPBOOK");bookConfig.bookDescription=getConfigValue("bookDescription","");bookConfig.toolbarColor=getConfigValue("toolbarColor","#27181A");bookConfig.iconColor=getConfigValue("iconColor",
"#FFFFFF");bookConfig.toolbarColor==bookConfig.iconColor&&(bookConfig.iconColor=Color(bookConfig.toolbarColor).reverse());bookConfig.pageNumColor=getConfigValue("pageNumColor","#000000");bookConfig.formBackgroundColor=getConfigValue("formBackgroundColor",bookConfig.toolbarColor);bookConfig.formFontColor=getConfigValue("formFontColor",bookConfig.iconColor);bookConfig.formBackgroundColor==bookConfig.formFontColor&&(bookConfig.formFontColor=Color(bookConfig.formBackgroundColor).reverse());bookConfig.loadingBackground=
getConfigValue("loadingBackground","#1F2232");bookConfig.searchHightlightColor=getConfigValue("searchHightlightColor","#fdc606");bookConfig.logoHeight=getConfigValue("logoHeight",40);bookConfig.logoTop=getConfigValue("logoTop",0);bookConfig.logoPadding=getConfigValue("logoPadding",0);bookConfig.isFixLogoSize=getConfigValue("isFixLogoSize",!1);bookConfig.HomeButtonVisible=getConfigValue("HomeButtonVisible",!1);bookConfig.ShareButtonVisible=getConfigValue("ShareButtonVisible",!1);bookConfig.isInsertFrameLinkEnable=
getConfigValue("isInsertFrameLinkEnable",!0);bookConfig.addCurrentPage=getConfigValue("addCurrentPage",!1);bookConfig.WeChatShareButtonVisible=getConfigValue("WeChatShareButtonVisible",!1);bookConfig.ThumbnailsButtonVisible=getConfigValue("ThumbnailsButtonVisible",!1);bookConfig.thumbnailColor=getConfigValue("thumbnailColor",bookConfig.formBackgroundColor);bookConfig.thumbnailAlpha=getConfigValue("thumbnailAlpha",60);bookConfig.ZoomButtonVisible=getConfigValue("ZoomButtonVisible",!1);bookConfig.SupportOperatePageZoom=
getConfigValue("SupportOperatePageZoom",!0);bookConfig.TableOfContentButtonVisible=getConfigValue("TableOfContentButtonVisible",!1);bookConfig.isHideTabelOfContentNodes=getConfigValue("isHideTabelOfContentNodes",!0);bookConfig.BookMarkButtonVisible=getConfigValue("BookMarkButtonVisible",!1);bookConfig.SelectTextButtonVisible=getConfigValue("SelectTextButtonVisible",!1);bookConfig.SearchButtonVisible=getConfigValue("SearchButtonVisible",!1);bookConfig.searchKeywordFontColor=getConfigValue("searchKeywordFontColor",
"#FFB000");bookConfig.FullscreenButtonVisible=getConfigValue("FullscreenButtonVisible",!0);bookConfig.hideMiniFullscreen=getConfigValue("hideMiniFullscreen",!1);bookConfig.leastSearchChar=getConfigValue("leastSearchChar",0);bookConfig.PrintButtonVisible=getConfigValue("PrintButtonVisible",!1);bookConfig.printWatermarkFile=getConfigValue("printWatermarkFile","");bookConfig.BackgroundSoundButtonVisible=getConfigValue("BackgroundSoundButtonVisible",!1);bookConfig.BackgroundSoundURL=getConfigValue("BackgroundSoundURL",
"");bookConfig.BackgroundSoundLoop=getConfigValue("BackgroundSoundLoop",-1);bookConfig.HelpButtonVisible=getConfigValue("HelpButtonVisible",!1);bookConfig.helpContentFileURL=getConfigValue("helpContentFileURL","");bookConfig.helpWidth=getConfigValue("helpWidth",400);bookConfig.helpHeight=getConfigValue("helpHeight",450);bookConfig.showHelpContentAtFirst=getConfigValue("showHelpContentAtFirst",!1);bookConfig.aboutButtonVisible=getConfigValue("aboutButtonVisible",!1);bookConfig.aboutContactInfoTxt=
getConfigValue("aboutContactInfoTxt","");bookConfig.AutoPlayButtonVisible=getConfigValue("AutoPlayButtonVisible",!1);bookConfig.autoPlayAutoStart=getConfigValue("autoPlayAutoStart",!1);bookConfig.autoPlayDuration=getConfigValue("autoPlayDuration",3);bookConfig.autoPlayLoopCount=getConfigValue("autoPlayLoopCount",1);bookConfig.minZoomWidth=getConfigValue("minZoomWidth",0);bookConfig.minZoomHeight=getConfigValue("minZoomHeight",0);bookConfig.maxZoomWidth=getConfigValue("maxZoomWidth",0);bookConfig.maxZoomHeight=
getConfigValue("maxZoomHeight",0);bookConfig.defaultZoomWidth=getConfigValue("defaultZoomWidth",0);bookConfig.defaultZoomHeight=getConfigValue("defaultZoomHeight",0);bookConfig.mouseWheelFlip=getConfigValue("mouseWheelFlip",!0);bookConfig.DownloadButtonVisible=getConfigValue("DownloadButtonVisible",!0);bookConfig.DownloadURL=getConfigValue("DownloadURL","");fixDownloadURLValue();bookConfig.bgBeginColor=getConfigValue("bgBeginColor","#E6E6E6");bookConfig.bgEndColor=getConfigValue("bgEndColor","#E3E3E3");
bookConfig.bgMRotation=getConfigValue("bgMRotation",90);bookConfig.backGroundImgURL=getConfigValue("backGroundImgURL","");bookConfig.backgroundOpacity=getConfigValue("backgroundOpacity",100);bookConfig.LeftShadowWidth=getConfigValue("LeftShadowWidth",40);bookConfig.LeftShadowAlpha=getConfigValue("LeftShadowAlpha",1);bookConfig.RightShadowWidth=getConfigValue("RightShadowWidth",40);bookConfig.RightShadowAlpha=getConfigValue("RightShadowAlpha",1);$.system.name==$.system.ANDROID&&$.browser.wechat&&(bookConfig.RightShadowAlpha=
1,bookConfig.LeftShadowAlpha=1);bookConfig.ShowTopLeftShadow=getConfigValue("ShowTopLeftShadow",!0);bookConfig.pageBackgroundColor=getConfigValue("pageBackgroundColor","#FFFFFF");bookConfig.flipshortcutbutton=getConfigValue("flipshortcutbutton",!1);bookConfig.OriginPageIndex=getConfigValue("OriginPageIndex",1);bookConfig.HardPageEnable=getConfigValue("HardPageEnable",!1);bookConfig.HardInnerPageEnable=getConfigValue("HardInnerPageEnable",!1);bookConfig.bookPageStretch=getConfigValue("bookPageStretch",
!1);$.browser.msie&&11>$.browser.version&&(bookConfig.HardPageEnable=!1,bookConfig.HardInnerPageEnable=!1);bookConfig.HardPageEnable||(bookConfig.HardInnerPageEnable=!1);bookConfig.thicknessWidthType=getConfigValue("thicknessWidthType","thick").toLowerCase();bookConfig.showThicknessOnMobile=getConfigValue("showThicknessOnMobile",!1);bookConfig.highDefinitionConversion=getConfigValue("highDefinitionConversion",!1);bookConfig.isStopMouseMenu=getConfigValue("isStopMouseMenu",!1);bookConfig.thicknessColor=
getConfigValue("thicknessColor","#FFFFFF");bookConfig.RightToLeft=getConfigValue("RightToLeft",!1);bookConfig.flippingTime=getConfigValue("flippingTime",0.3);void 0!=bookConfig.flippingTime&&(bookConfig.flippingTime=0.2>bookConfig.flippingTime?0.2:bookConfig.flippingTime);bookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0);bookConfig.totalPagesCaption=getConfigValue("totalPagesCaption","");bookConfig.pageNumberCaption=getConfigValue("pageNumberCaption","");bookConfig.buttonsSortXML=
getConfigValue("buttonsSortXML",[]);bookConfig.leftRightPnlShowOption=getConfigValue("leftRightPnlShowOption","").toLowerCase();bookConfig.topMargin=getConfigValue("topMargin",10);bookConfig.bottomMargin=getConfigValue("bottomMargin",10);bookConfig.leftMargin=getConfigValue("leftMargin",10);bookConfig.rightMargin=getConfigValue("rightMargin",10);bookConfig.topMarginOnMobile=getConfigValue("topMarginOnMobile",10);bookConfig.bottomMarginOnMobile=getConfigValue("bottomMarginOnMobile",10);bookConfig.leftMarginOnMobile=
getConfigValue("leftMarginOnMobile",10);bookConfig.rightMarginOnMobile=getConfigValue("rightMarginOnMobile",10);if(isPhone()||isPad())bookConfig.topMargin=bookConfig.topMarginOnMobile,bookConfig.bottomMargin=bookConfig.bottomMarginOnMobile,bookConfig.leftMargin=bookConfig.leftMarginOnMobile,bookConfig.rightMargin=bookConfig.rightMarginOnMobile;bookConfig.visibleAreaLeft=parseFloat(getConfigValue("visibleAreaLeft","0%"));bookConfig.visibleAreaTop=parseFloat(getConfigValue("visibleAreaTop","0%"));bookConfig.visibleAreaRight=
parseFloat(getConfigValue("visibleAreaRight","100%"));bookConfig.visibleAreaBottom=parseFloat(getConfigValue("visibleAreaBottom","100%"));bookConfig.visibleAreaLeft=isNaN(bookConfig.visibleAreaLeft)?"0%":bookConfig.visibleAreaLeft;bookConfig.visibleAreaTop=isNaN(bookConfig.visibleAreaTop)?"0%":bookConfig.visibleAreaTop;bookConfig.visibleAreaRight=isNaN(bookConfig.visibleAreaRight)?"100%":bookConfig.visibleAreaRight;bookConfig.visibleAreaBottom=isNaN(bookConfig.visibleAreaBottom)?"100%":bookConfig.visibleAreaBottom;
bookConfig.bleedAreaLeft=parseFloat(getConfigValue("bleedAreaLeft","0%"));bookConfig.bleedAreaTop=parseFloat(getConfigValue("bleedAreaTop","0%"));bookConfig.bleedAreaRight=parseFloat(getConfigValue("bleedAreaRight","0%"));bookConfig.bleedAreaBottom=parseFloat(getConfigValue("bleedAreaBottom","0%"));bookConfig.bleedAreaLeft=isNaN(bookConfig.bleedAreaLeft)?"0%":bookConfig.bleedAreaLeft;bookConfig.bleedAreaTop=isNaN(bookConfig.bleedAreaTop)?"0%":bookConfig.bleedAreaTop;bookConfig.bleedAreaRight=isNaN(bookConfig.bleedAreaRight)?
"0%":bookConfig.bleedAreaRight;bookConfig.bleedAreaBottom=isNaN(bookConfig.bleedAreaBottom)?"0%":bookConfig.bleedAreaBottom;bookConfig.visibleAreaLeft=bookConfig.bleedAreaLeft?bookConfig.bleedAreaLeft:bookConfig.visibleAreaLeft;bookConfig.visibleAreaTop=bookConfig.bleedAreaTop?bookConfig.bleedAreaTop:bookConfig.visibleAreaTop;bookConfig.visibleAreaRight=bookConfig.bleedAreaRight?100-parseFloat(bookConfig.bleedAreaRight):bookConfig.visibleAreaRight;bookConfig.visibleAreaBottom=bookConfig.bleedAreaBottom?
100-parseFloat(bookConfig.bleedAreaBottom):bookConfig.visibleAreaBottom;bookConfig.LinkDownColor=getConfigValue("LinkDownColor","#9C9C9C");bookConfig.LinkAlpha=getConfigValue("LinkAlpha",0.4);bookConfig.googleAnalyticsID=getConfigValue("googleAnalyticsID","");bookConfig.language=getConfigValue("language","English");bookConfig.AboutAddress=getConfigValue("AboutAddress","");bookConfig.AboutEmail=getConfigValue("AboutEmail","");bookConfig.AboutMobile=getConfigValue("AboutMobile","");bookConfig.AboutWebsite=
getConfigValue("AboutWebsite","");bookConfig.AboutDescription=getConfigValue("AboutDescription","");bookConfig.AboutAuthor=getConfigValue("AboutAuthor","");bookConfig.totalPageCount=getConfigValue("totalPageCount",1);bookConfig.largePageWidth=getConfigValue("largePageWidth",1440);bookConfig.largePageHeight=getConfigValue("largePageHeight",1728);bookConfig.normalPath=getConfigValue("normalPath","files/page/");bookConfig.largePath=getConfigValue("largePath","files/large/");bookConfig.thumbPath=getConfigValue("thumbPath",
"files/thumb/");bookConfig.FlipStyle=getConfigValue("FlipStyle","flip");bookConfig.showDoublePage=getConfigValue("autoDoublePage",!0);bookConfig.alwaysDoublePageOnMobile=getConfigValue("alwaysDoublePageOnMobile",!1);bookConfig.upsideOnMobile=function(){return bookConfig.alwaysDoublePageOnMobile&&window.innerHeight>window.innerWidth?!0:!1};bookConfig.QRPath=getConfigValue("QRPath","files/extfile/QRURL.png");bookConfig.QRCode=getConfigValue("QRCode",!1);bookConfig.MiniStyle=getConfigValue("MiniStyle",
!0);bookConfig.AnnotationButtonVisible=getConfigValue("AnnotationButtonVisible",!1);bookConfig.InstructionsButtonVisible=getConfigValue("InstructionsButtonVisible",!1);bookConfig.showInstructionOnStart=getConfigValue("showInstructionOnStart",!0);bookConfig.showBookInstructionOnStart=getConfigValue("showBookInstructionOnStart",!1);bookConfig.EmailButtonVisible=getConfigValue("EmailButtonVisible",!1);bookConfig.btnShareWithEmailSubject=getConfigValue("btnShareWithEmailSubject","");bookConfig.btnShareWithEmailBody=
getConfigValue("btnShareWithEmailBody","");bookConfig.socialShareLink=getConfigValue("socialShareLink","");bookConfig.VideoButtonVisible=getConfigValue("VideoButtonVisible",!1);if(!global.videoList||0>=global.videoList.length)bookConfig.VideoButtonVisible=!1;bookConfig.SlideshowButtonVisible=getConfigValue("SlideshowButtonVisible",!1);if(!global.slideshow||0>=global.slideshow.length)bookConfig.SlideshowButtonVisible=!1;bookConfig.CompanyLogoFile=getConfigValue("CompanyLogoFile","");bookConfig.UIBaseURL=
getConfigValue("UIBaseURL","");bookConfig.haveAdSense=getConfigValue("haveAdSense",!1);bookConfig.adSenseLeft=getConfigValue("adSenseLeft",0);bookConfig.adSenseTop=getConfigValue("adSenseTop",0);bookConfig.adSenseWidth=getConfigValue("adSenseWidth",0);bookConfig.adSenseHeight=getConfigValue("adSenseHeight",0);bookConfig.adSenseClientId=getConfigValue("adSenseClientId","");bookConfig.productName=getConfigValue("productName","Flip HTML5");bookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");
bookConfig.preloadNextPage=getConfigValue("preloadNextPage",!0);bookConfig.showMirrorSide=getConfigValue("showMirrorSide",!0);bookConfig.addPaperCoil=getConfigValue("addPaperCoil",!1);bookConfig.addPaperCoil&&(bookConfig.BindingType="loose");"loose"==bookConfig.BindingType&&(bookConfig.addPaperCoil=!0);bookConfig.ToolbarViewMode=getConfigValue("ToolbarViewMode","standard");bookConfig.ToolbarViewMode=bookConfig.ToolbarViewMode.toLocaleLowerCase();bookConfig.isTheBookOpen=getConfigValue("isTheBookOpen",
!1);bookConfig.FlipDirection=getConfigValue("FlipDirection",0);bookConfig.HomeButtonIcon=getConfigValue("HomeButtonIcon","");bookConfig.AnnotationButtonIcon=getConfigValue("AnnotationButtonIcon","");bookConfig.VideoButtonIcon=getConfigValue("VideoButtonIcon","");bookConfig.SlideshowButtonIcon=getConfigValue("SlideshowButtonIcon","");bookConfig.ShareButtonIcon=getConfigValue("ShareButtonIcon","");bookConfig.ThumbnailButtonIcon=getConfigValue("ThumbnailButtonIcon","");bookConfig.ZoomInButtonIcon=getConfigValue("ZoomInButtonIcon",
"");bookConfig.ZoomOutButtonIcon=getConfigValue("ZoomOutButtonIcon","");bookConfig.FullscreenButtonIcon=getConfigValue("FullscreenButtonIcon","");bookConfig.ExitFullscreenButtonIcon=getConfigValue("ExitFullscreenButtonIcon","");bookConfig.BookmarkButtonIcon=getConfigValue("BookmarkButtonIcon","");bookConfig.TableOfContentButtonIcon=getConfigValue("TableOfContentButtonIcon","");bookConfig.SearchButtonIcon=getConfigValue("SearchButtonIcon","");bookConfig.PrintButtonIcon=getConfigValue("PrintButtonIcon",
"");bookConfig.BackgroundSoundButtonOnIcon=getConfigValue("BackgroundSoundButtonOnIcon","");bookConfig.BackgroundSoundButtonOffIcon=getConfigValue("BackgroundSoundButtonOffIcon","");bookConfig.HelpButtonIcon=getConfigValue("HelpButtonIcon","");bookConfig.AboutButtonIcon=getConfigValue("AboutButtonIcon","");bookConfig.AutoPlayStartButtonIcon=getConfigValue("AutoPlayStartButtonIcon","");bookConfig.AutoPlayStopButtonIcon=getConfigValue("AutoPlayStopButtonIcon","");bookConfig.DownloadButtonIcon=getConfigValue("DownloadButtonIcon",
"");bookConfig.facebookShotImageURL=getConfigValue("facebookShotImageURL","");bookConfig.searchTextJS=getConfigValue("searchTextJS","files/search/book_config.js");bookConfig.searchPositionJS=getConfigValue("searchPositionJS","files/search/text_position.js");bookConfig.userSmallMode=getConfigValue("userSmallMode",!0);bookConfig.maxWidthToSmallMode=getConfigValue("maxWidthToSmallMode",300);bookConfig.maxHeightToSmallMode=getConfigValue("maxHeightToSmallMode",300);bookConfig.maxWidthToSmallMode>window.screen.width&&
(bookConfig.maxWidthToSmallMode=300);bookConfig.maxHeightToSmallMode>window.screen.height&&(bookConfig.maxHeightToSmallMode=300);bookConfig.backgroundScene=getConfigValue("backgroundScene","None");bookConfig.audioVolume=getConfigValue("audioVolume",0.5);bookConfig.enablePageBack=getConfigValue("enablePageBack",!1);bookConfig.userListPath=getConfigValue("userListPath","files/extfiles/users.js");bookConfig.isFlipPdf=getConfigValue("isFlipPdf",!1);bookConfig.SingleModeBanFlipToLastPage=getConfigValue("SingleModeBanFlipToLastPage",
!1);bookConfig.isSingleBookFullWindowOnMobile=getConfigValue("isSingleBookFullWindowOnMobile",!1);bookConfig.showGotoButtonsAtFirst=getConfigValue("showGotoButtonsAtFirst",!1);!1==bookConfig.isFlipPdf&&void 0!=global.isFlipPdf&&(bookConfig.isFlipPdf=isFlipPdf);bookConfig.FlipSound=getConfigValue("FlipSound",!0);bookConfig.CurlingPageCorner=getConfigValue("CurlingPageCorner",!0);bookConfig.iconFontColor=getConfigValue("iconFontColor","#ffffff");try{bookConfig.retainBookCenter=void 0!=staticAd&&!0==
staticAd.haveAd?!1:getConfigValue("retainBookCenter",!0)}catch(b){}bookConfig.updateURLForPage=getConfigValue("updateURLForPage",!0);bookConfig.borderColor=getConfigValue("borderColor","#572f0d");bookConfig.outerCoverBorder=getConfigValue("outerCoverBorder",!1);bookConfig.hardCoverBorderWidth=getConfigValue("hardCoverBorderWidth",0);bookConfig.cornerRound=getConfigValue("cornerRound",0);bookConfig.hardCoverBorderWidth=bookConfig.HardPageEnable?Number.between(0,16,bookConfig.hardCoverBorderWidth):
0;bookConfig.cornerRound=bookConfig.HardPageEnable?Number.between(0,bookConfig.hardCoverBorderWidth,bookConfig.cornerRound):0;bookConfig.coverTexture=getConfigValue("coverTexture","none");bookConfig.passwardPrompt=getConfigValue("passwardPrompt","");bookConfig.SlideshowAutoPlay=getConfigValue("SlideshowAutoPlay",!1);bookConfig.SlideshowPlayInterval=getConfigValue("SlideshowPlayInterval",5);bookConfig.productName=getConfigValue("productName","Flip HTML5");bookConfig.homePage=getConfigValue("homePage",
"http://www.fliphtml5.com");global.productName=bookConfig.productName||"Flip HTML5";global.homePage=bookConfig.homePage||"http://www.fliphtml5.com";bookConfig.backgroundPosition=getConfigValue("backgroundPosition","Stretch");bookConfig.toolbarAlwaysShow=getConfigValue("toolbarAlwaysShow",!1);bookConfig.restorePageVisible=getConfigValue("restorePageVisible",!1);bookConfig.toobarClear=getConfigValue("toobarClear",!1);bookConfig.bottomToolBarAlpha=getConfigValue("bottomToolBarAlpha",1);bookConfig.topToolBarAlpha=
getConfigValue("topToolBarAlpha",1);bookConfig.ToolBarAlpha=getConfigValue("ToolBarAlpha",1);(isPhone()||isPad())&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(bookConfig.FlipStyle="flip");isBelowIE9()&&(bookConfig.FlipStyle="slide");if(isPhone()||isPad()||"catalog"==bookConfig.FlipStyle.toLowerCase()||"slide"==bookConfig.FlipStyle.toLowerCase()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase())bookConfig.flipshortcutbutton=!1;bookConfig.BackgroundSoundURL||bookConfig.FlipSound||(bookConfig.BackgroundSoundButtonVisible=
!1);bookConfig.BackgroundSoundURL||!isPhone()&&!isPad()||(bookConfig.BackgroundSoundButtonVisible=!1);if(bookType==BookType.singleCatalog_book||bookType==BookType.catalog_book||bookType==BookType.slide_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()||bookType==BookType.singleSlide_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()||isPhone()||isPad())bookConfig.flipshortcutbutton=!1;if(global.videoList&&1<=global.videoList.length)for(var c=0;c<videoList.length;c++)videoList[c].id||(videoList[c].id=
""),videoList[c].description||(videoList[c].description=""),videoList[c].thumbnail||(videoList[c].thumbnail=""),videoList[c].title||(videoList[c].title=""),videoList[c].type||(videoList[c].type="");try{window.localStorage||(bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,bookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1))}catch(d){bookConfig.BookMarkButtonVisible=
!1,bookConfig.AnnotationButtonVisible=!1,bookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1)}bookConfig.OpenWindow=(getConfigValue("OpenWindow","_blank")+"").toLowerCase();bookConfig.appLogoOpenWindow=(getConfigValue("appLogoOpenWindow","_blank")+"").toLowerCase();bookConfig.OpenWindow.startsWith("_")||(bookConfig.OpenWindow="_"+bookConfig.OpenWindow);bookConfig.appLogoOpenWindow.startsWith("_")||
(bookConfig.appLogoOpenWindow="_"+bookConfig.appLogoOpenWindow);bookConfig.appLogoLinkURL=getConfigValue("appLogoLinkURL","");bookConfig.appLogoLinkURL&&(bookConfig.appLogoLinkURL=getRealURL(bookConfig.appLogoLinkURL));bookConfig.PhoneButtonVisible=getConfigValue("PhoneButtonVisible",!1);bookConfig.PhoneButtonIcon=getConfigValue("PhoneButtonIcon","");bookConfig.phoneNumber=getConfigValue("phoneNumber","");bookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");bookConfig.useTheAliCloudChart=
getConfigValue("useTheAliCloudChart",!1);1<=passwardType()&&(bookConfig.useTheAliCloudChart=!1);bookConfig.textClarityEnhancement=getConfigValue("textClarityEnhancement",0);decodeAboutInfo();bookConfig.AboutDescription=bookConfig.AboutDescription.replace(/\n/g,"<br/>");bookConfig.AboutDescription=bookConfig.AboutDescription.replace(/\r/g,"<br/>");checkBookmarkConfig();isBelowIE9()&&(bookConfig.BookMarkButtonVisible=!1,bookConfig.AnnotationButtonVisible=!1,bookConfig.WeChatShareButtonVisible=!1);bookConfig.useTheAliCloudChart&&
bookConfig.backGroundImgURL&&(0<=bookConfig.backGroundImgURL.indexOf("?")?bookConfig.backGroundImgURL+="&x-oss-process=image/resize,h_800":bookConfig.backGroundImgURL,window.isSupportWebp&&(bookConfig.backGroundImgURL));checkURLValue();global.checkReportConfig&&checkReportConfig()};
function checkBookmarkConfig(){global.bmtConfig||(bmtConfig=[]);void 0==bmtConfig.onSideEdge&&(bmtConfig.onSideEdge=!0);void 0==bmtConfig.showPage&&(bmtConfig.showPage=!1);void 0==bmtConfig.hasTexture&&(bmtConfig.hasTexture=!1);bmtConfig.tabs&&0<bmtConfig.tabs.length&&!1==bmtConfig.onSideEdge&&!isPhone()&&!isPad()&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(75>bookConfig.topMargin&&(bookConfig.topMargin=75),"vertical"==bookConfig.flipDrection&&75>bookConfig.bottomMargin&&(bookConfig.topMargin=
75))}
var isBool=function(b){if(!0===b||!1===b)return!0;if(void 0==b)return!1;var c=["false","no","hide","disable"];b=b.toLowerCase();return 0>["true","yes","show","enable"].indexOf(b)&&0>c.indexOf(b)?!1:!0},getConfigValue=function(b,c){void 0!=c&&"string"==typeof c&&""!=c.trim()&&isBool(c)&&(c=parseBool(c));var d;d=void 0!=bookConfig[b]?bookConfig[b]:getValueFromAliasConfig(b);return void 0==d?c:void 0==c?d:"number"==typeof c?Number(d):"boolean"==typeof c?parseBool(d):"string"==typeof c&&"#"==c[0]?Color(d).toString():
d},getValueFromAliasConfig=function(b){if(global.aliasConfig&&(b=aliasConfig[b]))for(var c=0;c<b.length;c++){var d=b[c];if(void 0!=bookConfig[d])return bookConfig[d]}},fixDownloadURLValue=function(){""==bookConfig.DownloadURL&&void 0!=bookConfig.downloadURL&&""!=bookConfig.downloadURL&&(bookConfig.DownloadURL=bookConfig.downloadURL)},checkURLValue=function(){bookConfig.BackgroundSoundURL=fixURLValue(bookConfig.BackgroundSoundURL);bookConfig.helpContentFileURL=fixURLValue(bookConfig.helpContentFileURL);
bookConfig.backGroundImgURL=fixURLValue(bookConfig.backGroundImgURL);bookConfig.facebookShotImageURL=fixURLValue(bookConfig.facebookShotImageURL);bookConfig.appLogoIcon=fixURLValue(bookConfig.appLogoIcon);bookConfig.printWatermarkFile=fixURLValue(bookConfig.printWatermarkFile);bookConfig.loadingPicture=fixURLValue(bookConfig.loadingPicture)},fixURLValue=function(b){return!$.browser.app&&bookConfig.CreatedTime&&b&&"string"==typeof b?b=0<=b.indexOf("?")?b+"&"+bookConfig.CreatedTime:b+"?"+bookConfig.CreatedTime:
b},decodeAboutInfo=function(){if(bookConfig.aboutContactInfoTxt){try{var b=$(bookConfig.aboutContactInfoTxt)}catch(c){return}var d,f,g,h,k,l,m;b.find("title").text();d=b.find("desc").text();f=b.find("logo").text();for(var b=b.find("keys").children(),n=0;n<b.length;n++){var p=$(b[n]);"Phone"==p.attr("type")&&(g=p.text());"Link"==p.attr("type")&&(h=p.text());"Email"==p.attr("type")&&(k=p.text());"Address"==p.attr("type")&&(l=p.text());"Author"==p.attr("type")&&(m=p.text())}b=function(b){return String.parseUtf8(base64.decode(b))};
l&&!bookConfig.AboutAddress&&(bookConfig.AboutAddress=b(l));k&&!bookConfig.AboutEmail&&(bookConfig.AboutEmail=b(k));g&&!bookConfig.AboutMobile&&(bookConfig.AboutMobile=b(g));h&&!bookConfig.AboutWebsite&&(bookConfig.AboutWebsite=b(h));d&&!bookConfig.AboutDescription&&(bookConfig.AboutDescription=b(d));m&&!bookConfig.AboutAuthor&&(bookConfig.AboutAuthor=b(m));f&&!bookConfig.CompanyLogoFile&&(bookConfig.CompanyLogoFile=b(f));bookConfig.CompanyLogoFile&&(bookConfig.CompanyLogoFile=bookConfig.CompanyLogoFile.replace(/\\/g,
"/"));bookConfig.isFlipPdf&&bookConfig.CompanyLogoFile.startsWith("./")&&(bookConfig.CompanyLogoFile="."+bookConfig.CompanyLogoFile)}},cr=DeString("c3753b3f49449a65f9ad12578d7a4602c8ae34"),checkReportConfig=function(){bookConfig.EnableReportButton=getConfigValue("EnableReportButton",!0);bookConfig.reportUrl=getConfigValue("reportUrl","/report-book-online.php")},transformCSS=function(b){var c=$.system.name==$.system.IOS&&10.3<=$.system.version,d="",f={};void 0!=b.perspective&&
(d=d+"perspective("+b.perspective+"px) ");b.tran&&($.browser.msie&&!c&&(d=d+"translate("+b.tran.x+"px,"+b.tran.y+"px) "),!$.browser.msie||c)&&(d=d+"translate3d("+b.tran.x+"px,"+b.tran.y+"px,0px) ");void 0!=b.rotate&&(d=d+"rotate("+b.rotate+"deg) ");void 0!=b.rotateY&&(d=d+"rotateY("+b.rotateY+"deg) ");void 0!=b.rotateX&&(d=d+"rotateX("+b.rotateX+"deg) ");if(void 0!=b.scale){if(!$.browser.msie||c)d=d+"scale3d("+b.scale+","+b.scale+",1) ";$.browser.msie&&!c&&(d=d+"scale("+b.scale+") ")}void 0!=b.scaleX&&
(d=d+"scaleX("+b.scaleX+") ");void 0!=b.scaleY&&(d=d+"scaleY("+b.scaleY+") ");b.origin&&(c=b.origin.x+"% "+b.origin.y+"%",f["-webkit-transform-origin"]=c,f["-moz-transform-origin"]=c,f["-ms-transform-origin"]=c,f["-o-transform-origin"]=c,f["transform-origin"]=c);d&&(f["-webkit-transform"]=d,f["-moz-transform"]=d,f["-ms-transform"]=d,f["-o-transform"]=d,f.transform=d);b.obj&&b.obj.css(f);return f};bdor[32]=function(b,c){return b+c};
var changeShowBook=function(b){switch(b){case BookType.normal_book:bookType=BookType.normal_book;singlePageBook&&singlePageBook.hide();flipBook&&flipBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.single_book:bookType=BookType.single_book;singlePageBook&&singlePageBook.show();flipBook&&flipBook.hide();bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll();break;case BookType.slide_book:bookType=BookType.slide_book;slideBook&&slideBook.show();singleSlideBook.hide();
bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.singleSlide_book:bookType=BookType.singleSlide_book;slideBook&&slideBook.hide();singleSlideBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.fissionAll();break;case BookType.catalog_book:bookType=BookType.catalog_book;catalogBook.show();bookConfig.ThumbnailsButtonVisible&&thumbnail.mergeAll();break;case BookType.singleCatalog_book:bookType=BookType.singleCatalog_book,singleCatalogBook.show(),bookConfig.ThumbnailsButtonVisible&&
thumbnail.fissionAll()}},supports=function(){var b=document.createElement("div"),c=["Khtml","Ms","O","Moz","Webkit"];return function(d){if(d in b.style)return!0;d=d.replace(/^[a-z]/,function(b){return b.toUpperCase()});for(var f=c.length;f--;)if(c[f]+d in b.style)return!0;return!1}}(),getBrowserPre=function(){switch(browserType){case 3:return"-ms-";case 2:return"-moz-";case 1:return"-webkit-";case 4:return"-o-"}},getTransform=function(b){var c;switch(browserType){case 3:c=b.style["-ms-transform"];
break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return Point(0,0);c=c.match(/translate\((.*?)\)/)||c.match(/translate3d\((.*?)\)/);if(null==c||""==c||2>c.length)return Point(0,0);c=c[1].split(", ");return Point(parseInt(c[0],10),parseInt(c[1],10))},getTransformScale=function(b){var c;switch(browserType){case 3:c=b.style["-ms-transform"];
break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return 1;c=c.match(/scale\((.*?)\)/)||c.match(/scale3d\((.*?)\)/);if(null==c||""==c||2>c.length)return 1;c=c[1].split(",");return c[0]},getColor=function(b,c){var d=bookConfig[b];return void 0!=d?Color(d).toString():c},getImage=function(b){return b?$("<img src='"+b+"'/>"):new Image},
parseBool=function(b,c){if(!0===b||!1===b)return b;if(void 0==b||null==b)return!1;c=!!c;if("number"==typeof b)return 0!=b;if("string"!=typeof b||""==b)return!1;var d=["true","yes","show","enable"],f=["false","no","hide","disable"];b=b.toLowerCase();return 0>d.indexOf(b)&&0>f.indexOf(b)?c:0<=d.indexOf(b)},getLanguage=function(b,c){if(global.selectedLanguage&&selectedLanguage[b])return selectedLanguage[b];if(global.aliasLanguage&&aliasLanguage[b])for(var d=aliasLanguage[b],f=0;f<d.length;f++){var g=
d[f];if(global.selectedLanguage&&selectedLanguage[g])return selectedLanguage[g]}return c},selectedLanguage,selectLanguage=function(b){global.language||(global.language=[]);b=(b+"").toLowerCase();if(0==language.length)selectedLanguage=[];else{for(var c=[],d=0;d<language.length;d++)if(language[d].language.toLowerCase()==b){c=language[d];break}selectedLanguage=c}},handleData=function(b,c){if(50>b.length)return b;var d=b.length,f=b.toLowerCase().indexOf(c.toLowerCase()),g;25<=f?(g=Math.max(25<=d-f?f-
25:d-50,0),g=".."+b.substring(g,f)):g=b.substring(0,f);d=25<d-f?b.substring(f,25<=f?f+25:50)+"..":b.substring(f,d);return g+d},onWindowTap=function(b){Log.print("onWindowTapEnter");global.windowTapInterval&&window.clearTimeout(global.windowTapInterval);global.windowTapInterval=window.setTimeout(function(){if(global.moreBar&&moreBar.visible)moreBar.hide();else{if(isPhone()||isPad()){if(bookConfig.toolbarAlwaysShow||global.foldingMenu&&!0==global.foldingMenu.visible)return;toolBar.showOrHide()}global.windowTapInterval&&
window.clearTimeout(global.windowTapInterval)}},401)},stopEvent=function(b){try{var c=b||window.event;c.preventDefault?(c.preventDefault(),c.stopPropagation()):(c.returnValue=!1,c.cancelBubble=!0)}catch(d){}return!1},getPagesByRange=function(b){function c(b){for(var c=0;c<d.length;c++)if(d[c]==b)return!0;return!1}var d=[];if(!b||"string"!==typeof b||""==b.trim())return d;b=b.split(",");for(var f=0;f<b.length;f++){var g=b[f];if(!isNaN(g))g=getRealPageNumber(g),c(g)||d.push(g);else if(-1<g.indexOf("-")){var h=
g.split("-");if(!(2>h.length))for(var g=getRealPageNumber(h[0]),k=getRealPageNumber(h[1]),h=Math.min(g,k),g=Math.max(g,k);h<=g;h++)h>bookConfig.totalPageCount||c(h)||d.push(h)}}return d},isSlideBook=function(){return"slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9()?!0:!1};
function addGoogleAdSense(){bookConfig.haveAdSense&&loadJavascript("http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(){var b=document.createElement("ins"),b=$(b);b.addClass("adsbygoogle");b.css({display:"inline-block",width:"100%",height:"100%"});b.attr("data-ad-client",bookConfig.adSenseClientId);var c=$("<div/>");c.css({position:"absolute","z-index":100,left:bookConfig.adSenseLeft+"px",top:bookConfig.adSenseTop+"px",width:bookConfig.adSenseWidth+"px",height:bookConfig.adSenseHeight+
"px"});tmpContainer.append(c);c.append(b);eval("(adsbygoogle = window.adsbygoogle || []).push({});")})}
var changeLanguage=function(b){selectLanguage(b);global.toolBar&&toolBar.changeLanguage&&toolBar.changeLanguage();global.printBody&&printBody.changeLanguage();global.helpBody&&helpBody();global.aboutBody&&aboutBody.changeLanguage();global.sharePanel&&sharePanel.changeLanguage();global.languagePanel&&languagePanel.changeLanguage();global.videoGallery&&videoGallery.changeLanguage();global.photoGallery&&photoGallery.changeLanguage();global.bookmark&&bookmark.changeLanguage();global.frmTableOfContent&&
frmTableOfContent.changeLanguage();global.frmSearch&&frmSearch.changeLanguage();global.bookInstructions&&global.bookInstructions.changeLanguage&&global.bookInstructions.changeLanguage();global.telephoneNumberForm&&global.telephoneNumberForm.changeLanguage()},googleAnalytics=function(){bookConfig.googleAnalyticsID&&window.setTimeout(function(){(function(b,c,d,f,g,h,k){b.GoogleAnalyticsObject=g;b[g]=b[g]||function(){(b[g].q=b[g].q||[]).push(arguments)};b[g].l=1*new Date;h=c.createElement(d);k=c.getElementsByTagName(d)[0];
h.async=1;h.src=f;k.parentNode.insertBefore(h,k)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");eval("ga('create', '"+bookConfig.googleAnalyticsID+"', 'auto')");eval("ga('send', 'pageview')")},3E3)},controlAudioVolume=function(){if(!isNaN(bookConfig.audioVolume)){var b=parseFloat(bookConfig.audioVolume);global.bgSound&&global.bgSound.setVolume(b);flipAudio&&(flipAudio[0].volume=b)}},TurnonAutoFlip=function(){bookConfig.autoFlipOnStart&&window.setTimeout(function(){auto_player&&
auto_player.start();toolBar&&toolBar.changeAutoPlayIcon&&toolBar.changeAutoPlayIcon()},1E3)},flipAudio,flipSoundIsPlaying=!0,playFlipSound=function(){if(bookConfig.FlipSound&&flipSoundIsPlaying)if(!isPhone()&&!isPad()&&!isIE()){var b=$("<audio preload style='display:none;'><source src='"+soundBaseURL+"flipsound.ogg?2018071601' type='audio/ogg'><source src='"+soundBaseURL+"flipsound.mp3?2018071601' type='audio/mpeg'></audio>");$("body").append(b);b.bind("ended",function(){$(this).remove()});try{b[0].currentTime=
0,b[0].play()}catch(c){}}else if(!isPlaying||!isAndroidDefault())try{flipAudio[0].currentTime=0,flipAudio[0].play()}catch(d){}},initFlipSound=function(){if(isPhone()||isPad()||isIE())flipAudio=$("<audio preload id='flipSound'><source src='"+soundBaseURL+"flipsound.ogg?2018071601' type='audio/ogg'><source src='"+soundBaseURL+"flipsound.mp3?2018071601' type='audio/mpeg'></audio>"),$("body").append(flipAudio)};
function copyFromObj(b){if(b){b.focus();b.select();try{document.execCommand("Copy")}catch(c){b=b.val(),copyToClipboard(b)}}}
function copyToClipboard(b){if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",b);else if(-1!=navigator.userAgent.indexOf("Opera"))window.location=b;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(c){return alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard.")),!1}var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);
if(d){var f=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(f){f.addDataFlavor("text/unicode");var g={},g=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);g.data=b;f.setTransferData("text/unicode",g,2*b.length);if(!d)return!1;d.setData(f,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}else alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard."))}
function hideMoreBar(){global.moreBar&&moreBar.visible&&moreBar.hide()}function statisticalData(b,c){global.sendvisitinfo&&"function"==typeof global.sendvisitinfo&&sendvisitinfo(b,c)}function GetQueryString(b){b=RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?decodeURIComponent(b).split(",")[2]:""}function getProtocal(){return window.location.href.toLowerCase().startsWith("https://")?"https://":"http://"};var form_icons={drag:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAYAAABBq/VWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjEzMDhFMTJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjEzMDhFMjJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMTMwOERGMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyMTMwOEUwMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gNLlqwAAACZJREFUeNpi/P//PwOtARMDHQALlC6moR29jKPBNRpcQzu4AAIMAEdbDwvBazwyAAAAAElFTkSuQmCC",
arrow:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUUzRDg1QjIzRTkwMTFFNkJENDY4NjE5QkI3MjEyNTEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUUzRDg1QjMzRTkwMTFFNkJENDY4NjE5QkI3MjEyNTEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RTNEODVCMDNFOTAxMUU2QkQ0Njg2MTlCQjcyMTI1MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RTNEODVCMTNFOTAxMUU2QkQ0Njg2MTlCQjcyMTI1MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pkv4I/EAAABCSURBVHjaYvz//z8DNQDjqEHDyCCYICOxcoQMQteASxyv19A14TSEmDDCJslIbmD/J2QIKbH2H58hoymbzgYBBBgAW20+3VfO8pUAAAAASUVORK5CYII=",
arrow2:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTVBMjdDMjAzRTkwMTFFNjlFODBDQ0Q2NjVGQTMzNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTVBMjdDMjEzRTkwMTFFNjlFODBDQ0Q2NjVGQTMzNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NUEyN0MxRTNFOTAxMUU2OUU4MENDRDY2NUZBMzM2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1NUEyN0MxRjNFOTAxMUU2OUU4MENDRDY2NUZBMzM2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpR841QAAABISURBVHjaYvz//z8DNQATA5XACDXoPxRTzUX/KTWIkRTDCLmIaMOI8RpRhpEaRozkGkSUIcREP1GGkBNGOAELpQaMgEwLEGAAy5IMIpPev90AAAAASUVORK5CYII=",
arrow3:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADImlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RTNEODVCMjNFOTAxMUU2QkQ0Njg2MTlCQjcyMTI1MSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RTNEODVCMzNFOTAxMUU2QkQ0Njg2MTlCQjcyMTI1MSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjVFM0Q4NUIwM0U5MDExRTZCRDQ2ODYxOUJCNzIxMjUxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjVFM0Q4NUIxM0U5MDExRTZCRDQ2ODYxOUJCNzIxMjUxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+S/gj8QAAAFdJREFUOE/t0TEOACAIBEHw/3/GXGJBjMIZLCzchoopQM1MbtTGLPchwUfCrzAQ9dYM8oiOuSyCaATtoCME7SC/XL7REZYdm8YyCJVuNAcsBFko7TVIpAPKTgwhZXr3AwAAAABJRU5ErkJggg==",
close:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTZEQzhCQzAzRThGMTFFNkJDRDdCODcxNDYxRjlCODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTZEQzhCQzEzRThGMTFFNkJDRDdCODcxNDYxRjlCODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBNkRDOEJCRTNFOEYxMUU2QkNEN0I4NzE0NjFGOUI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBNkRDOEJCRjNFOEYxMUU2QkNEN0I4NzE0NjFGOUI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhSCZXoAAABUSURBVHjaYvz//z8DNQATA5XACDToPxQTLUfIRf8J8AkaxIhF838c8gRdxIjDJYzkBDYjAT79wgifd/6TGv3ohuA1jGphxEKkAQyUxtoQzrQAAQYAFu0SIXkKEmkAAAAASUVORK5CYII=",
close_down:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTZEQzhCQzAzRThGMTFFNkJDRDdCODcxNDYxRjlCODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTZEQzhCQzEzRThGMTFFNkJDRDdCODcxNDYxRjlCODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBNkRDOEJCRTNFOEYxMUU2QkNEN0I4NzE0NjFGOUI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBNkRDOEJCRjNFOEYxMUU2QkNEN0I4NzE0NjFGOUI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhSCZXoAAABUSURBVHjaYvz//z8DNQATA5XACDToPxQTLUfIRf8J8AkaxIhF838c8gRdxIjDJYzkBDYjAT79wgifd/6TGv3ohuA1jGphxEKkAQyUxtoQzrQAAQYAFu0SIXkKEmkAAAAASUVORK5CYII=",
"delete":"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCQ0YwOTM0MjJENDkxMUU2OUE4OUQ4ODM4NjcwMThDNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCQ0YwOTM0MzJENDkxMUU2OUE4OUQ4ODM4NjcwMThDNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkJDRjA5MzQwMkQ0OTExRTY5QTg5RDg4Mzg2NzAxOEM0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkJDRjA5MzQxMkQ0OTExRTY5QTg5RDg4Mzg2NzAxOEM0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+fOK1igAAAExJREFUeNpi/P//PwMlgImBQkDIgP9QjBOwYNGAyyBkwIjLAEZSvcBChG0M+CxhIqCIEY1N/1gYNYDMdICcFv4TSh8shBIKzb0AEGAAUFoLJ2pGiu0AAAAASUVORK5CYII=",
drag:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAKCAYAAABBq/VWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjEzMDhFMTJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjEzMDhFMjJENEExMUU2QkMwNzhBMjQyMDhFOUZGMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyMTMwOERGMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyMTMwOEUwMkQ0QTExRTZCQzA3OEEyNDIwOEU5RkYwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gNLlqwAAACZJREFUeNpi/P//PwOtARMDHQALlC6moR29jKPBNRpcQzu4AAIMAEdbDwvBazwyAAAAAElFTkSuQmCC",
edit:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBOUQyN0YxOTJENDkxMUU2ODgxRkQ5RjkyMzYzMDkxOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBOUQyN0YxQTJENDkxMUU2ODgxRkQ5RjkyMzYzMDkxOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkE5RDI3RjE3MkQ0OTExRTY4ODFGRDlGOTIzNjMwOTE4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkE5RDI3RjE4MkQ0OTExRTY4ODFGRDlGOTIzNjMwOTE4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AymtDQAAAHBJREFUeNpi/P//PwMlgImBQkCKAQexCbIQqfkdEAsBMci/jKS64A1UMwNU839SXPAZiHnRbGZE5uMzAJcmFG8wEaGZAZvN+AzAphmnOBMlmtENIFkzMdGIVzMhAwhqxhaN/9FCnYEUAxgHJDcCBBgAGLsY6vBpMLYAAAAASUVORK5CYII=",
print_left:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTFFQkQxQTEzRThGMTFFNkI3MzdDMkY1QjM2RTRBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTFFQkQxQTIzRThGMTFFNkI3MzdDMkY1QjM2RTRBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMUVCRDE5RjNFOEYxMUU2QjczN0MyRjVCMzZFNEEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMUVCRDFBMDNFOEYxMUU2QjczN0MyRjVCMzZFNEEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmgUvpAAAABHSURBVHja7JSxDQAgDMNq/v/ZvMDiAUEOiCrHKuoUWRPlrWKLYouLLVBYMLYYz8IKr/OY8mJKFJSMKcejtIJSN/6jP8oWYACl7AopprxqJAAAAABJRU5ErkJggg==",
print_off:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTE2OEY2MzgzRDA1MTFFNjlGN0JBMDJFMzZGRjFENUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTE2OEY2MzkzRDA1MTFFNjlGN0JBMDJFMzZGRjFENUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MTY4RjYzNjNEMDUxMUU2OUY3QkEwMkUzNkZGMUQ1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MTY4RjYzNzNEMDUxMUU2OUY3QkEwMkUzNkZGMUQ1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Phv3r/EAAAAnSURBVHjaYvwPBAxkABYozUiivv9MDGSCUY2jGskDsLRKckIHCDAAdXAGG5Dno88AAAAASUVORK5CYII=",
print_on:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDVEOTBCOTEzRDA1MTFFNkJDNzdDQjg2RjEyMEY0NUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDVEOTBCOTIzRDA1MTFFNkJDNzdDQjg2RjEyMEY0NUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0NUQ5MEI4RjNEMDUxMUU2QkM3N0NCODZGMTIwRjQ1QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0NUQ5MEI5MDNEMDUxMUU2QkM3N0NCODZGMTIwRjQ1QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvcnq1YAAABNSURBVHjaYvwPBAxkABYozUiivv9MDGQCumj8T47G/4Rs/I9F0X9sAYiukRFN8X9coY7NqYyENOHzIyOh+MUXOIwDHo9Y0yrJCR0gwACJ3A4bCSIKTwAAAABJRU5ErkJggg==",
print_right:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDcwNDM3NjEzRThGMTFFNjkyOUFFOUQxNDAyQ0E5RTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDcwNDM3NjIzRThGMTFFNjkyOUFFOUQxNDAyQ0E5RTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENzA0Mzc1RjNFOEYxMUU2OTI5QUU5RDE0MDJDQTlFNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENzA0Mzc2MDNFOEYxMUU2OTI5QUU5RDE0MDJDQTlFNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgoGXOkAAABLSURBVHja7NTBCQAwCANAs//QShdojSI0YN5yn2Dg7jYRLMzA5wBTsLE4A1M4C6fxCpzCq/AT78BX/EsYMuVB5kEgM0I79L2EAAMAxeRP1Sey/DsAAAAASUVORK5CYII=",
save:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDQzJEREM0MjJENDkxMUU2OEQ4QThBOUMxMjAyM0Q4OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDQzJEREM0MzJENDkxMUU2OEQ4QThBOUMxMjAyM0Q4OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNDMkREQzQwMkQ0OTExRTY4RDhBOEE5QzEyMDIzRDg5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkNDMkREQzQxMkQ0OTExRTY4RDhBOEE5QzEyMDIzRDg5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MIq1tAAAAFhJREFUeNpi/P//PwMlgAVKk2oKI7oBKIIEwH8oBqtnwqMIF58RWYyJTK9j9QIhV+ANRJw2EAJMDBQCig1gIcPvjJSEwf/BFwY0MYCR2ABED0Sy8jVAgAEAUVwNK6WyzeIAAAAASUVORK5CYII=",
cancel:"iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEOTEwNjM4RTJENDkxMUU2OEMwNjlDMzQ0MjdENjA1NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEOTEwNjM4RjJENDkxMUU2OEMwNjlDMzQ0MjdENjA1NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQ5MTA2MzhDMkQ0OTExRTY4QzA2OUMzNDQyN0Q2MDU2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQ5MTA2MzhEMkQ0OTExRTY4QzA2OUMzNDQyN0Q2MDU2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+P0zP3QAAAR1JREFUeNqc00FOwkAUgOFOYzgIiWjaRq/hCo0LXOgFWHIRYIErDkFkhVFPIajRxIQDEISQQIhJ+Z95Y8YyBWSSr03nzXvM0NcgTdMgI0Idr1ioF52LsuuNXHQUUEcVH+igr7EYlzhEGzXMfyJaqYAHTHGN0LMzo7ExnjTnt8AtvnDqScw60bUtWyDGN252SLauNCeWbTU4yRkiOZGeWe4m+DvcObkPcB9q8p2TbBekOcn2uSu5B1yKeA/Wh1vEeOKSUwydivuMpRT4RMkTtNs2OT8gPTGUAj1ceM5oNvwn8nyOR3klyR6vsaI5idtI43800khz1lp5ou1qNrTyyG3lbR/Ts84fo4yjvI/JJa3dxBuWmKGvc0l2/UqAAQD6cstJzzfPsAAAAABJRU5ErkJggg==",
help_form:"iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDA1QzE3RUQ0QTU3MTFFNjgzNjFBNDM1NjkxMDU4QzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDA1QzE3RUU0QTU3MTFFNjgzNjFBNDM1NjkxMDU4QzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MDVDMTdFQjRBNTcxMUU2ODM2MUE0MzU2OTEwNThDOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MDVDMTdFQzRBNTcxMUU2ODM2MUE0MzU2OTEwNThDOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pkdk2GsAAAebSURBVHja7J1ZbFRV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",
next_page:"iVBORw0KGgoAAAANSUhEUgAAABoAAAA0CAYAAACU7CiIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUE4RDNGMUYzRTkwMTFFNjkzOEJCRDY4QjU0MTk5RUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUE4RDNGMjAzRTkwMTFFNjkzOEJCRDY4QjU0MTk5RUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQThEM0YxRDNFOTAxMUU2OTM4QkJENjhCNTQxOTlFRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQThEM0YxRTNFOTAxMUU2OTM4QkJENjhCNTQxOTlFRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqwGj9MAAAD0SURBVHja7NjRCcIwEAbgnggWB9AZ6jZ1CGdwBGdwCHUaO0MdoNSn+Ic2EjAP5pKLPlzgJy3CfYSmjRwZY6oSY+kuiMhOG2SPNEjNrDkiHXJBHm4h9L4g2mI6IutMixiQE+r39mbh/dBmRKq5VutufKgReDS7EFQLQKsQJDoUUkghhRT6BYST8lBsRSnY1xD+U5xTsKgVpWDRm4GLsXYdB2Nv71iMDTnAgSJQLMKCOAj7hY1FWJ8gDsJ+YYt8gvQ8UkghhRT6M2gUqP8MQZ0AdA9Bt2pqfeUaw1xzOs+8fp2dbM/Otr5yNAavSP/RGJQeLwEGAFhAWF3G3vDJAAAAAElFTkSuQmCC",
prev_page:"iVBORw0KGgoAAAANSUhEUgAAABoAAAA0CAYAAACU7CiIAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTFDMUQ2MDgzRTkwMTFFNkI3QkZCQTFDMUYxQ0UxMTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTFDMUQ2MDkzRTkwMTFFNkI3QkZCQTFDMUYxQ0UxMTgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMUMxRDYwNjNFOTAxMUU2QjdCRkJBMUMxRjFDRTExOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMUMxRDYwNzNFOTAxMUU2QjdCRkJBMUMxRjFDRTExOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgcvoREAAADzSURBVHja7NjRCcIwEAbgnggWB9AZ6jZ1CGdwBGdwCHUaO0MdoNSn+Ic2EjAP3iUnPlzgJy2F+6imTTlyzlW/GMtwQER+2iB7pEFqYc0R6ZAL8gg3Qu8Doi2mI7IudBMDckL93p8sogttQaSaa7XhJIYahb9ml4JqBWiVglSHQQYZZJBB/wRhBz2oQ98iWVBA8K1xVoO4iAiSIGxIirCgHIQFBYCz0sQ/XQ7GXgxSTLS8JZj4geViWa8g1QdWitl+ZJBBBhmkBI0K9Z8pqFOA7inoVk2tr1JjmGtO+1bUr/OT79n51leJxuAV6T8ag9rjJcAAuDFYXZXo6HwAAAAASUVORK5CYII=",
noteAdd:"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",
noteClear:"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",
noteCursor:"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",
noteRound:"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",
noteEraser:"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",
notePen:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAKBSURBVHja7JVLSFRRGIC/O3eu8/JB2gPKgswePkajlyWtAqVVi9pIQZtwLCmppQXRMl2Fm5hNtCmoFhEZOEM0CmGho2NgooXRYvAxL3WcGceZO/e0mcVkozMuJIJ+OHA4cL7v8J///EcSQrCVoWOL47/g7wv02RYlScq58ZHxnl23mrgakZPfwvLqk4erj+1AAtB+q0whxB8jV9wvv/NmaE+vSHSHxNyN7+JFcY9o1bfcBYoAXSZr0yl6cK3GPX7Ge2GlzQgVMkUVJRyqrEbR1FagDCjImaL1wnVTtv80xY43trRxoLqaT0/d7B/bhd5sIKnFdgPbgBAQ37TAdUu21x0x2BobrPiUOeZ8O/AeXMQz4MEwGiGiw4WGvLZw9PnC62sMNsvJJqRCK2WB50xNGPBGzvE64UQn+d2DmqcbWAaSmxL0d8j2uhqjrbChGclcixr0oPrcHFNifHQNUuxn2hmd7wR8gD8zPTkF/R2y/ajVaDOfakayWEkFPah+N2o4TsgTY2cq6nB+Fd1AAJgFloBUXoKB27K9vtZoszScB3MtqeAYqn8ENRxncSyKc1o42t+JrvTJZ4HwWjiAlK3uPc8uNlRV7vuslCqgFJIKfSE5P4y6GCU0GqZvUnO094ouYD4bPJOZ9R2YFe2yfvtppNIrCK0ENTCCGl5hYTSMc2pjeF69yGIuOItsRCQjSOYTCKWKBc8SjinNcf1t/vB1BS/7xg8jGxHxACLqRTJZcU6KTcPXvQOTyaB1tuyNX2qqnfkxszzxfsj3oefV+DAQTAs2hGcyswokSSoGytPNKwnE0o8onJ5vePJ8BApgSpdxClDTrVgFcrbbnIJ/6kf7NQA3TT/nv4BQdAAAAABJRU5ErkJggg==",
noteRect:"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",
noteRedo:"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",
noteSave:"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",
noteUndo:"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",
noteExit:"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",
noteMoveBar:"iVBORw0KGgoAAAANSUhEUgAAAAYAAAAYCAYAAADZEIyjAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAA7SURBVHja7IyxDQAgDMPcit/6cr8LS4sY4AFEpkiJbZI4xSKiFwMEkJnmXDLqyUYB4IW3bvWvelY1BwDsoiQp+xnMtQAAAABJRU5ErkJggg=="};var setCurrentIndexTextField=function(b){b=getShownPageNumberInfo(b);$("#guidPageIndex").html("<b>"+b+"</b>");$("#currentPageIndexTextField")&&$("#currentPageIndexTextField")[0]&&!$("#currentPageIndexTextField")[0].onFocus&&$("#currentPageIndexTextField").val(b)},getShownPageNumberInfo=function(b){BookInfo.isDoublePage();b=BookInfo.getCurrentPages();for(var c=originTotalPageCount,d="",f=0;f<b.length;f++){var g=getShownPageNumber(b[f]);0!=f&&d!=g&&(d+="-");d!=g&&(d+=g)}bookConfig.totalPagesCaption&&
(c=bookConfig.totalPagesCaption);return rightToLeft?c+"/"+d:d+"/"+c},getShownPageArray=function(){var b=bookConfig.pageNumberCaption+"",c=originTotalPageCount;";"==b.substr(b.length-1,1)&&(b=b.substr(0,b.length-1));for(var b=b.split(";"),d=[],f=0;f<b.length;f++)if(""!=b[f]&&void 0!=b[f]){var g=b[f].split(":");if(g[0])if(g[1]||(g[1]=""),-1<g[1].indexOf("+")){var h=g[0];h.indexOf("-");for(var h=h.split("-"),k=h[0],h=h[1],k=parseInt(k),l=h?parseInt(h):c,g=getPageNumberFormat(g[1]),m=k;m<=l;m++){var n=
(m-k)*g.addition+g.startPage,h="";0==g.type&&(h=n+"");1==g.type&&(h=parseRoman(n));2==g.type&&(h=parseRoman(n).toLowerCase());d[m]=String.format(g.page,h)}}else if(!isNaN(g[0]))k=parseInt(g[0]),d[k]=void 0==g[1]?"":g[1];else if(-1<g[0].indexOf("-"))for(h=g[0],h.indexOf("-"),h=h.split("-"),k=h[0],h=h[1],k=parseInt(k),l=h?parseInt(h):c,m=k;m<=l;m++)d[m]=void 0==g[1]?"":g[1]}return d};
function getPageNumberFormat(b){var c={page:"%s",startPage:1,type:0,addition:1};if(-1<b.indexOf("{")){var d=b.indexOf("{"),f=b.indexOf("}")+1,d=b.substring(d,f);c.page=b.replace(d,"%s");-1<d.indexOf("N+")&&(c.type=0);-1<d.indexOf("R+")&&(c.type=1);-1<d.indexOf("r+")&&(c.type=2);d=d.subBetween("+","}");c.startPage=""==d?1:parseInt(d)}else d=b.split("+")[0],b=b.split("+")[1],c.startPage=""==d?1:parseInt(d),b&&(c.addition=parseInt(b));return c}
function parseRoman(b){if(isNaN(b))return"";for(var c=[" I II III IV V VI VII VIII IX".split(" ")," X XX XXX XL L LX LXX LXXX XC".split(" ")," C CC CCC CD D DC DCC DCCC CM".split(" ")],d="",f=0,g=0,h=1E3;3>g;g++,h/=10)f=Math.floor(b%h/(h/10)),d+=c[2-g][f];return d}
var getShownPageNumber=function(b){var c=bookConfig.pageNumberCaption;if(""==c||void 0==c)return b;b=parseInt(b);c=getShownPageArray();return void 0==c[b]?b:c[b]},getRealPageNumber=function(b){b=getRealPage(b);isNaN(b)&&(b=1);return b},getRealPage=function(b){var c=bookConfig.pageNumberCaption;if(""==c||void 0==c)return parseInt(b);b+="";for(var c=getShownPageArray(),d=-1,f=c.length,g=1;g<=f;g++)if(c[g]+="",c[g]==b){d=g;break}return-1==d?parseInt(b):d},setLocationHash=function(b){bookConfig.updateURLForPage&&
(window.location.hash="#p="+getShownPageNumber(b))};var nextPageFun=function(){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMinPageIndex(flipBook.getCurrentPageIndex())+2);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)+1);break;case BookType.slide_book:gotoPageFun(BookInfo.getMinPageIndex(slideBook.getRealPageIndex())+2);break;case BookType.singleSlide_book:gotoPageFun(parseInt(singleSlideBook.getRealPageIndex())+1);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMinPageIndex(catalogBook.getCurrentPageIndex())+
2);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)+1)}},previousPageFun=function(){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMaxPageIndex(flipBook.getCurrentPageIndex())-2);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMaxPageIndex(catalogBook.getCurrentPageIndex())-2);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)-1);break;case BookType.slide_book:gotoPageFun(BookInfo.getMaxPageIndex(slideBook.getRealPageIndex())-
2);break;case BookType.singleSlide_book:gotoPageFun(singleSlideBook.getRealPageIndex()-1);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)-1)}},firstPageFun=function(){gotoPageFun(1)},lastPageFun=function(){gotoPageFun(originTotalPageCount)},gotoPageFun=function(b,c){if(!isNaN(b)){statisticalData(1,b);bookConfig.restorePageVisible&&window.localStorage.setItem("historyPageIndex",getShownPageNumber(b));b=parseInt(b);var d=bookConfig.totalPageCount;bookConfig.SingleModeBanFlipToLastPage&&
bookType==BookType.single_book&&(d=Math.max(1,bookConfig.totalPageCount-1));if(1>b||b>d)0>BookInfo.getCurrentPages().indexOf(d)&&b>d?gotoPageFun(d):0>BookInfo.getCurrentPages().indexOf(1)&&1>b?gotoPageFun(1):(d=1>b?getLanguage("lblFirst","This is the first page"):getLanguage("lblLast","This is the last page"),global._tipsBox||(_tipsBox=new TipsBox(d,bookContainer)),_tipsBox.setCaption(d),_tipsBox.showTipsBox());else if(d=b,BookInfo.isDoublePage()&&(d=BookInfo.getMinPageIndex(d)),d=Math.max(1,d),passwardType()&&
bookConfig.excludeFrontPages&&d>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=new PasswardPannel),global.passwardPannel.show();else{switch(bookType){case BookType.normal_book:flipBook.gotoPage(b,c);break;case BookType.single_book:singlePageBook.gotoPage(b,c);break;case BookType.slide_book:slideBook.gotoPage(b,c);break;case BookType.singleSlide_book:singleSlideBook.gotoPage(b,c);break;case BookType.catalog_book:catalogBook.gotoPage(b,c);break;
case BookType.singleCatalog_book:singleCatalogBook.gotoPage(b,c)}bookConfig.googleAnalyticsID&&window.ga&&ga("send","event","button","click","goto page:"+b);global.bookmark&&global.bookmark.elements.refreshElements();bookConfig.SelectTextButtonVisible&&BookInfo.getBook().unSelect();bookConfig.addCurrentPage&&global.sharePanel&&global.sharePanel.elements&&(global.sharePanel.elements.fillArea(!0,"link"),global.sharePanel.elements.fillArea(!0,"embed"),global.sharePanel.shareCurrentCheck[0].checked=!0,
global.sharePanel.embedCurrentCheck[0].checked=!0);global.assistant&&global.assistant.refresh()}}};var BookInfo=Class({statics:{getCurrentPages:function(){var b=[];if(this.isDoublePage())var c=this.getCurrentPageIndex(),b=this.getPagesByIndex(c);else c=this.getCurrentPageIndex(),b.push(c);return b},getPageCount:function(){return bookConfig.totalPageCount},isRightToLeft:function(){return rightToLeft},getBookType:function(){return bookType},getBook:function(){var b;switch(this.getBookType()){case BookType.normal_book:b=global.flipBook;break;case BookType.single_book:b=global.singlePageBook;break;
case BookType.slide_book:b=global.slideBook;break;case BookType.singleSlide_book:b=global.singleSlideBook;break;case BookType.catalog_book:b=global.catalogBook;break;case BookType.singleCatalog_book:b=global.singleCatalogBook}return b},getCurrentPageIndex:function(){var b=this.getBook();return b&&b.getCurrentPageIndex?b.getCurrentPageIndex():-1},isDoublePage:function(b){var c=this.getBookType();void 0!=b&&(c=b);switch(c){case BookType.single_book:return!1;case BookType.singleSlide_book:return!1;case BookType.singleCatalog_book:return!1}return!0},
left:function(){var b=this.getBook();return b&&b.getLeft?b.getLeft():0},top:function(){var b=this.getBook();return b&&b.getTop?b.getTop():0},width:function(){var b=this.getBook();return b&&b.getWidth?b.getWidth():0},height:function(){var b=this.getBook();return b&&b.getHeight?b.getHeight():0},scale:function(){var b=this.getBook();return b&&b.getScale?b.getScale():0},isZoomming:function(){return this.getBook().showPage.parameters.zoomming},zoomStatus:function(){return this.getBook()&&this.getBook().status_zoom?
!0:!1},container:function(){return bookContainer},getThumbnailPages:function(){for(var b=[],c=Math.ceil(bookConfig.totalPageCount/2),d=0;d<=c;d++){var f=this.getPagesByIndex(2*d+1);0<f.length&&b.push(f)}return b},getPagesByIndex:function(b){function c(b){1<=b&&b<=bookConfig.totalPageCount&&d.push(b)}var d=[];if(bookConfig.isTheBookOpen){b=2*Math.ceil(b/2);var f=b-1}else f=2*Math.floor(b/2),b=f+1;rightToLeft?(c(b),c(f)):(c(f),c(b));return d},isLeftPage:function(b,c){c=void 0==c?this.isDoublePage():
c;if(!c&&!rightToLeft)return!1;if(!c&&rightToLeft||(0==b%2&&!rightToLeft||0!=b%2&&rightToLeft)&&!bookConfig.isTheBookOpen)return!0;if((0==b%2&&!rightToLeft||0!=b%2&&rightToLeft)&&bookConfig.isTheBookOpen||(0==b%2&&rightToLeft||0!=b%2&&!rightToLeft)&&!bookConfig.isTheBookOpen)return!1;if((0==b%2&&rightToLeft||0!=b%2&&!rightToLeft)&&bookConfig.isTheBookOpen)return!0},isInnerPage:function(b,c){if(1!=b&&c==BookType.single_book||!this.isCoverPage(b)&&c!=BookType.single_book)return!0},isCoverPage:function(b,
c){return 0<=[1,totalPageCount].indexOf(b)&&!bookConfig.isTheBookOpen||b==totalPageCount&&bookConfig.isTheBookOpen?!0:!1},getHardCoverPages:function(b){if(b&&rightToLeft&&!bookConfig.isTheBookOpen)return[totalPageCount-1,2];if(b&&!rightToLeft&&!bookConfig.isTheBookOpen)return[2,totalPageCount-1];if(b&&rightToLeft&&bookConfig.isTheBookOpen)return[0==bookConfig.totalPageCount%2?bookConfig.totalPageCount:bookConfig.totalPageCount-1,1];if(b&&!rightToLeft&&bookConfig.isTheBookOpen)return[1,0==bookConfig.totalPageCount%
2?bookConfig.totalPageCount:bookConfig.totalPageCount-1];if(!b)return[bookConfig.totalPageCount]},getSensitiveIndex:function(b){if(b&&!bookConfig.isTheBookOpen)return b=totalPageCount-2,{min:3,max:b};if(b&&bookConfig.isTheBookOpen)return b=totalPageCount-2,{min:4,max:b};b=bookConfig.totalPageCount;return{min:2,max:b}},getMinPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2)-1:2*Math.floor(b/2)},getMaxPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2):2*
Math.floor(b/2)+1}}});var FormElements=Class({rightToLeft:!1,create:function(b){this.rightToLeft=global.rightToLeft},initElements:virtual_function,initEvent:virtual_function,pickElements:virtual_function,changeLanguage:virtual_function}),FormInfo=Class({statics:{getFormCssClassName:function(b){if(!b)return"";b=b.toLowerCase();return b+"_form"},getFormTitle:function(b){if(!b)return"";b=b.toLowerCase();switch(b){case "about":return getLanguage("btnAbout","About");case "bookmark":return getLanguage("frmBookMark","Bookmark");
case "help":return getLanguage("btnHelp","Help");case "language":return getLanguage("btnLanguage","Language change");case "print":return getLanguage("frmPrintCaption","Print");case "search":return getLanguage("frmSearch","Search");case "setting":return getLanguage("btnSettings","Settings");case "share":return getLanguage("frmShareCaption","Share");case "tableofcontent":return getLanguage("frmToc","Table of Contents");case "videogallery":return getLanguage("frmVideoTitle","Video");case "tel":return getLanguage("frmTelephone",
"Tel")}}}}),FormFrame=Class({parent:void 0,rightToLeft:!1,visible:!1,formType:"",mainColor:"",fontColor:"",mainColorObj:null,fontColorObj:null,elements:null,closeUrl:"",create:function(b){this.options=b;this.parent=this.options.parent;this.formType=this.options.formType;this.rightToLeft=this.options.rightToLeft;this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.mainColorObj=
Color(this.mainColor);this.fontColorObj=Color(this.fontColor)},onCreate:function(){},setStyle:function(b){this.stage.css(b)},getShowStatu:function(){return this.visible},showOrHide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.stage.show();this.onShow()},hide:function(){this.visible=!1;this.stage.hide();this.onHide()},onShow:function(){},onHide:function(){},onResize:function(){},destroy:function(){},changeLanguage:function(){this.elements&&this.elements.changeLanguage();
this.title&&this.title.find("span").html(FormInfo.getFormTitle(this.formType))}}),PhoneFormFrame=Class({create:function(b){this._super(b);this.closeUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjhBN0ZCRjFCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjhBN0ZCRjJCQjgwMTFFNjhCMjQ5NjVERDlGODU5NkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOEE3RkJFRkJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOEE3RkJGMEJCODAxMUU2OEIyNDk2NUREOUY4NTk2RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Prtn4R8AAABdSURBVHjaYvz//z8DLQETA43BqAWjFtDHgv9QTKocyT74T4BPtgWMWAz9j0OebB8w4nA5IzUjmZEAf/DGAb5g+U+tZIpuONGW0DwOWMgwmIFWqWi0sBu1ADsACDAA1jMSLYufr4AAAAAASUVORK5CYII=";
this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+" phone'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.close.bind("click",this.hide.bind(this));this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.insertBefore(this.parent);this.stage.css({position:"absolute",left:-this.width+
"px",top:0,width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),color:this.fontColor,overflow:"hidden"})},show:function(){this.visible||(this.visible=!0,this.animate(this.width),this.mask||(this.mask=$("<div class='form_mask_phone'></div>"),this.mask.click(this.hide.bind(this)),this.parent.append(this.mask)),this.mask&&this.mask.show(),BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&(this.visible=!1,this.animate(0),this.mask&&this.mask.hide(),
isPhone()||isPad()||BookInfo.getBook().clearSearchHighlight())},animate:function(b){this.animating=!0;b=transformCSS({tran:{x:b,y:0}});animateOnce(this.stage,b,0.2,function(){this.animating=!1}.bind(this));animateOnce(this.parent,b,0.2,function(){this.animating=!1}.bind(this))},onResize:function(){this.width=Math.min(windowWidth-65,340);this.height=windowHeight;this.stage.css({left:-this.width+"px",width:this.width+"px",height:this.height+"px"});var b=this.visible?transformCSS({tran:{x:this.width,
y:0}}):transformCSS({tran:{x:0,y:0}});this.stage.css(b);this.parent.css(b)},showOrHide:function(){!0===this.visible?this.hide():this.show(this.width)}}).extend(FormFrame),FadeOutFadeForm=Class({create:function(b){this._super(b);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");
this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.appearance("",function(){this.visible=!1}.bind(this));this.parent.append(this.stage.getDom());this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.stage.drag();this.stage.bind(_event._down,function(b){b.stopPropagation()});this.close.bind("click",this.hide.bind(this));this.close.bind("mouseenter",
function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},initHtml:virtual_function,onHide:function(){}}).extend(FormFrame),SlideForm=Class({create:function(b){this._super(b);this.closeUrl=form_icons.close?"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'><span>"+
FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.parent.append(this.stage);this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.stage.drag();this.stage.bind(_event._down,function(b){b.stopPropagation()});this.close.bind("click",this.hide.bind(this));this.close.bind("mouseenter",
function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},show:function(){this.visible=!0;this.stage.animate({left:10},400,function(){this.onShow()}.bind(this))},hide:function(){this.visible=!1;this.stage.animate({left:2*-this.width},400,function(){this.onHide()}.bind(this))},onHide:function(){}}).extend(FormFrame),SlideRightForm=Class({create:function(b){this._super(b);this.closeUrl=form_icons.close?
"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType)+"'></div>");this.title=$("<p class='form_title'><span>"+FormInfo.getFormTitle(this.formType)+"</span></p>");this.close=$("<img class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.parent.append(this.stage);this.title&&this.title.css({cursor:"default"})},
onResize:function(){var b=windowHeight;this.width=250;this.height=b-24;this.stage.css({right:2*-this.width+"px"})},initEvent:function(){this.stage.bind(_event._down,function(b){b.stopPropagation()});this.close.bind("click",this.hide.bind(this));this.close.bind("mouseenter",function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},initHtml:virtual_function,showOrHide:function(){this.visible?this.hide():
this.show()},show:function(){this.visible=!0;this.stage.animate({right:0},400,function(){this.onShow()}.bind(this))},hide:function(){this.visible=!1;this.stage.animate({right:2*-this.width},400,function(){this.onHide()}.bind(this))}}).extend(FormFrame),LoadingBook=Class({create:function(b,c){this.parent=b;this.backgroundColor||(this.backgroundColor="#1F2232")},chooseBookStyle:function(){var b=this.getBookTye();"normal_book"==b?this.init():this.initBookStyle(b)},initBookStyle:function(b){switch(b){case "slide_book":bookType=
windowWidth>windowHeight&&bookConfig.showDoublePage?BookType.slide_book:BookType.singleSlide_book;init();(isPhone()||isPad())&&global.QRbutton&&QRbutton.hide();break;case "flip_book":bookType=windowWidth>windowHeight&&bookConfig.showDoublePage?BookType.normal_book:BookType.single_book;init();bookConfig.flipshortcutbutton&&flipShotButton.animate();break;case "catalog_book":bookType=BookType.catalog_book,init()}},getBookTye:function(){var b="normal_book";if("slide"==bookConfig.FlipStyle.toLowerCase()||
isBelowIE9())b="slide_book";"flip"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="flip_book");""!=bookConfig.FlipStyle||isBelowIE9()||(b="flip_book");"catalog"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="catalog_book");return b},init:function(){this.container=$("<div class='book_style_choose_container'></div>");this.bookStyleBox=$("<div class='book_style_box'></div>");this.container.css({"background-color":this.backgroundColor});this.parent.append(this.container);this.container.append(this.bookStyleBox);
this.initBookStyleBox()},initBookStyleBox:function(){this.title=$("<p class='title'></p>");this.description=$("<p class='description'></p>");this.flipModel=$("<div class='flipModel'></div>");this.slideModel=$("<div class='slideModel'></div>");this.flipModel.append($("<img src='"+uiBaseURL+"pc.png'/>").asImageButton());this.slideModel.append($("<img src='"+uiBaseURL+"pad.png'/>").asImageButton());this.bookStyleBox.append(this.title);this.bookStyleBox.append(this.description);this.bookStyleBox.append(this.flipModel);
this.bookStyleBox.append(this.slideModel);this.title.html(window.document.title);this.description.html(getLanguage("lblSelectMode","Select View Mode Please.")+"(10)");this.initEvent()},initEvent:function(){this.flipModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("flip_book")}.bind(this));this.slideModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("slide_book")}.bind(this));this.initInterval()},
initInterval:function(){var b=10,c=getLanguage("lblSelectMode","Select View Mode Please.");this.inteval=window.setInterval(function(){this.description.html(c+"("+b+")");b--;0>=b&&(window.clearInterval(this.inteval),this.destroy(),this.initBookStyle("flip_book"))}.bind(this),1E3)},onResize:function(){},destroy:function(){this.container&&(this.container.hide(),this.container.remove(),this.slideModel=this.flipModel=this.bookStyleBox=this.container=void 0)}});
function loadXMLString(b){var c=null;if(!window.DOMParser&&window.ActiveXObject)for(var d=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],f=0;f<d.length;f++)try{c=new ActiveXObject(d[f]);c.async=!1;c.loadXMLString(b);break}catch(g){}else if(window.DOMParser&&document.implementation&&document.implementation.createDocument)try{domParser=new DOMParser,c=domParser.parseFromString(b,"text/xml")}catch(h){}else return null;return c}
function loadXMLFile(b){var c=null;if(!window.DOMParser&&window.ActiveXObject)for(var d=["MSXML.2.DOMDocument.6.0","MSXML.2.DOMDocument.3.0","Microsoft.XMLDOM"],f=0;f<d.length;f++)try{c=new ActiveXObject(d[f]);break}catch(g){}else if(document.implementation&&document.implementation.createDocument)try{c=document.implementation.createDocument("","",null)}catch(h){}else return null;null!=c&&(c.async=!1,c.load(b));return c}
var PictureListFrame=Class({create:function(){this.currentPageIndex=1;this.imageWidth=100;this.leftButtonUrl=form_icons.print_left?"data:image/png;base64,"+form_icons.print_left:uiBaseURL+"print_left.png";this.rightButtonUrl=form_icons.print_right?"data:image/png;base64,"+form_icons.print_right:uiBaseURL+"print_right.png";this.initDefaultDom();this.initHtml();this.initEvent();this.fillContent(this.currentPageIndex)},initDefaultDom:function(){this.thumbnail=$("<div class='thumbnail'></div>");this.page=
$("<div class='page'></div>");this.image=$("<img/>");this.leftBtn=$("<img class='leftBtn btn' src='"+this.leftButtonUrl+"'/>");this.rightBtn=$("<img class='rightBtn btn' src='"+this.rightButtonUrl+"'/>");this.thumbnail.append(this.image);this.thumbnail.append(this.page)},initEvent:function(){this.leftBtn.onTap(function(){this.fillContent(this.currentPageIndex-1)}.bind(this));this.rightBtn.onTap(function(){this.fillContent(this.currentPageIndex+1)}.bind(this))},fillContent:function(b){if(!(1>b||b>
bookConfig.totalPageCount)){this.currentPageIndex=b;var c=function(b){this.image.attr("src",b);this.image.css({width:this.imageWidth+"px",height:"130px"})}.bind(this);fillImageAfterLoaded(b,"thumb",c);this.fillPage(b)}},fillPage:function(b){this.page.html(b+"/"+bookConfig.totalPageCount)}}),PictureListForm=Class({initHtml:function(){this.stage=$("<div class='pictureList_win10'></div>");this.stage.append(this.thumbnail);this.stage.append(this.leftBtn);this.stage.append(this.rightBtn)},getDom:function(){return this.stage}}).extend(PictureListFrame),
AnalysisPrint=Class({create:function(b){this.printArea=$("<div></div>");this.button=b;this.initPrintEvent()},getImageSizeForMM:function(b,c){return b/210>=c/297?{width:210,height:Math.floor(210*c/b)}:{width:Math.floor(297*b/c),height:297}},getImageSizeForInches:function(b,c){return b/7.18>=c/10.52?{width:7.18,height:Number.fixed(7.18*c/b,2)}:{width:Number.fixed(10.52*b/c,2),height:10.52}},getImageSizeForIE:function(b,c){return b/8>=c/11.3?{width:8,height:Number.fixed(8*c/b,2)}:{width:Number.fixed(11.3*
b/c,2),height:11.3}},printPages:function(b){var c=0;this.printArea.empty();this.printArray=[];var d=function(d,g,l,m){d=$("<div style='position:relative'></div>");l=$(l);l.css({width:"100%",height:"100%"});d.append(l);parseBool(bookConfig.PrintButtonVisible)&&""!=bookConfig.printWatermarkFile&&(f=$("<img src = '"+bookConfig.printWatermarkFile+"'/>"),f.css({"z-index":"201",left:"0",top:"0",position:"absolute"}),d.append(f),g=this.getImageSizeForInches(f[0].naturalWidth,f[0].naturalHeight),f.css({width:g.width+
"in",height:g.height+"in"}));g=isIE()?this.getImageSizeForIE(l[0].naturalWidth,l[0].naturalHeight):this.getImageSizeForInches(l[0].naturalWidth,l[0].naturalHeight);$(l).parent().css({width:g.width+"in",height:g.height+"in"});this.printArray[m]=d;c++;if(c==b.length){for(m=1;m<this.printArray.length;m++)this.printArray[m]&&this.printArea.append(this.printArray[m]);this.printArea.printArea()}};if(parseBool(bookConfig.PrintButtonVisible))if(""!=bookConfig.printWatermarkFile){var f=$("<img src = '"+bookConfig.printWatermarkFile+
"'/>");f.on("load",function(){for(var c=0;c<b.length;c++)fillImageAfterLoaded(b[c],"normal",d.bind(this))}.bind(this))}else for(var g=0;g<b.length;g++)fillImageAfterLoaded(b[g],"normal",d.bind(this))},getPages:function(b){if("all"==b){b=[];for(var c=1;c<=bookConfig.totalPageCount;c++)b.push(c);return b}return"current"==b?BookInfo.getCurrentPages():getPagesByRange(b)},initPrintEvent:function(){this.button.onTap(function(b){this.printType=this.button.printType;switch(this.printType){case "printAll":b=
this.getPages("all");this.printPages(b);break;case "printCurrent":b=this.getPages("current");this.printPages(b);break;case "printRange":b=$("#print_range_num").val(),b=this.getPages(b),this.printPages(b)}}.bind(this))}}),PrintElements=Class({create:function(b){this._super(b);this.printOnUrl=form_icons.print_on?"data:image/png;base64,"+form_icons.print_on:uiBaseURL+"print_on.png";this.printOffUrl=form_icons.print_off?"data:image/png;base64,"+form_icons.print_off:uiBaseURL+"print_off.png";this.initElements();
this.initEvent(b);this.pickElements(b)},initElements:function(){this.printAll=$("<div class='printAll item' print='printAll'><img src='"+this.printOffUrl+"'/><span class='title'>"+getLanguage("frmPrintall","Print All Pages")+"</span></div>");this.printCurrent=$("<div class='printCurrent item on' print='printCurrent'><img src='"+this.printOnUrl+"'/><span class='title'>"+getLanguage("frmPrintcurrent","Print Current Pages")+"</span></div>");this.printRange=this.rightToLeft?$("<div class='printRange item' print='printRange'><img src='"+
this.printOffUrl+"'/><input id='print_range_num' dir='rtl' placeholder='"+getLanguage("frmPrintexample","Exzample:1,3-7,12")+"'></input><span class='title'>"+getLanguage("frmPrintRange","Print Range")+"</span></div>"):$("<div class='printRange item' print='printRange'><img src='"+this.printOffUrl+"'/><span class='title'>"+getLanguage("frmPrintRange","Print Range")+"</span><input id='print_range_num' placeholder='"+getLanguage("frmPrintexample","Example:1,3-7,12")+"'></input></div>");this.printButton=
$("<div class='printButton title button_hover'>"+getLanguage("frmPrintbtn","Print")+"</div>");this.printButton.printType="printCurrent";this.analysis=new AnalysisPrint(this.printButton);this.pictureListForm=new PictureListForm},pickElements:function(b){b.printOnUrl=this.printOnUrl;b.printOffUrl=this.printOffUrl;b.printAll=this.printAll;b.printCurrent=this.printCurrent;b.printRange=this.printRange;b.printButton=this.printButton;b.pictureListForm=this.pictureListForm},initEvent:function(b){this.printAll.click(function(c){this.buttonEvent(b,
c.delegateTarget)}.bind(this));this.printCurrent.click(function(c){this.buttonEvent(b,c.delegateTarget)}.bind(this));this.printRange.click(function(c){this.buttonEvent(b,c.delegateTarget)}.bind(this));this.printRange.find("input").on("input propertychange change",function(){this.refreshPrintButton()}.bind(this));this.printRange.find("input").bind("mousedown touchstart pointerdown mouseover mousemove",function(b){b.stopPropagation()})},buttonEvent:function(b,c){var d=b.stage.find(".on");d.find("img").attr("src",
this.printOffUrl);d.find("img")[0].colorChanged=!1;d.removeClass("on");$(c).find("img").attr("src",this.printOnUrl);$(c).find("img")[0].colorChanged=!1;$(c).addClass("on");d=$(c).attr("print");b.printButton.printType=d;this.refreshPrintButton();b.changeItemColor()},refreshPrintButton:function(){"printRange"!=this.printButton.printType||$("#print_range_num").val()?this.lightPrintButton():this.darkPrintButton()},lightPrintButton:function(){$(this.printButton).addClass("usable");$(this.printButton).removeClass("disable");
$(this.printButton).addClass("button_hover")},darkPrintButton:function(){"printRange"==this.printButton.printType&&($(this.printButton).removeClass("usable"),$(this.printButton).removeClass("button_hover"),$(this.printButton).addClass("disable"))},changeLanguage:function(){this.printAll.find(".title").html(getLanguage("frmPrintall","Print All Pages"));this.printCurrent.find(".title").html(getLanguage("frmPrintcurrent","Print Current Pages"));this.printRange.find(".title").html(getLanguage("frmPrintRange",
"Print Range"));this.printRange.find("#print_range_num").attr("placeholder",getLanguage("frmPrintexample","Exzample:1,3-7,12"));this.printButton.html(getLanguage("frmPrintbtn","Print"))}}).extend(FormElements),PhonePrintElements=Class({create:function(b){this._super(b);this.printOnUrl=form_icons.print_on_phone?"data:image/png;base64,"+form_icons.print_on_phone:phoneBaseURL+"print_on_phone.png";this.printOffUrl=form_icons.print_off_phone?"data:image/png;base64,"+form_icons.print_off_phone:phoneBaseURL+
"print_off_phone.png";this.initElements();this.initEvent(b);this.pickElements(b)}}).extend(PrintElements),PhonePrintForm=Class({create:function(b){this.elements=new PhonePrintElements(this);this._super(b)},onCreate:function(){this.printAll.css({"background-color":this.fontColor,color:this.mainColor});this.printCurrent.css({"background-color":this.fontColor,color:this.mainColor});this.printRange.css({"background-color":this.fontColor,color:this.mainColor});this.printButton.css({"background-color":this.fontColor,
color:this.mainColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.printAll);this.stage.append(this.printCurrent);this.stage.append(this.printRange);this.stage.append(this.printButton)},changeItemColor:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)},initEvent:function(){}}).extend(PhoneFormFrame);global.textForPages||(global.textForPages=[]);
global.positionForPages||(global.positionForPages=[]);
var highlightSearchFun=function(b,c){if(0!=positionForPages.length&&b){var d=!1;window.frmSearch&&frmSearch.visible&&0!=frmSearch.getList().length||(d=!0);window.foldingMenu&&foldingMenu.visible&&foldingMenu.currentItem&&foldingMenu.currentItem.id&&"miSearch"==foldingMenu.currentItem.id&&(d=!1);var f=search_Text;""==f&&(d=!0);if(!0!=d||isPhone()||isPad()){for(var g,d=0;d<positionForPages.length;d++)if(positionForPages[d]&&positionForPages[d].page&&positionForPages[d].page==c){g=positionForPages[d].positions;
break}clearHighlightFun(b);if(g&&0<g.length&&(d=new SearchTextHighlight(bookConfig.largePageWidth,bookConfig.largePageHeight,rightToLeft),d.loadFromPage(g),f=d.searchText(f),0<f.length)){g=new SearchHighlightDOM(b);for(d=0;d<f.length;d++)for(var h=f[d].getRects(),k=0;k<h.length;){for(var l=[],m=0;4>m;m++)l[m]=h[k+m];g.addHighlight(l);k+=4}b.css({display:"block"})}}else clearHighlightFun(b)}},clearHighlightFun=function(b){b.css({"background-image":""});b.css({display:"none"});b.empty()},search_Text=
"",SearchElements=Class({create:function(b){this._super(b);this.callBack=b;this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.searchButtonUrl=form_icons.search_form?"data:image/png;base64,"+form_icons.search_form:uiBaseURL+"search_form.png";this.searchList=[];this.searchText="";this.input=$("<input class='input_search'></input>");this.searchButton=$("<img class='searchButton' src='"+this.searchButtonUrl+"'/>");this.searchResult=$("<p class='result'></p>");if(isPhone()||
isPad())this.searchButton=$("<div class='searchButton'></div>"),this.searchButton.addCssSprite(phoneIconsURL[0],"searchButton",15,15,phoneIconInfo);this.initSwiper()},initSwiper:function(){this.searchSwiper=$("<div class='stage'></div>");this.searchSwiperList=$("<div class='swiper'></div>");this.searchSwiper.append(this.searchSwiperList);isPhone()||isPad()?this.searchSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),
this.progressBar=$("<div class='progressBar'></div>"),this.searchSwiper.append(this.progress),this.progress.append(this.progressBar),this.searchSwiper.scroll({},Direction.top))},refreshSwiper:function(b,c){for(var d=c.length,f=0;f<d;f++)this.addItem(b,c[f])},addItem:function(b,c){c.searchText=this.searchText;var d=new this.callBack.newSearchItem(b,c);this.searchList.push(d)},ewSearchItem:function(b,c){return new SearchItem(b,c)},initEvent:function(){this.searchButton.onTap(function(){this.searchStart()}.bind(this));
this.input.bind("keydown",function(b){13==b.keyCode&&this.searchStart();b.stopPropagation()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(b){b.stopPropagation()})},refresh:function(){isPhone()||isPad()||this.searchSwiper.refreshData()},search:function(b){b&&"string"==typeof b&&(this.input.val(b),this.searchStart())},searchStart:function(){statisticalData(6,BookInfo.getBook().getCurrentPageIndex());var b=this.input.val().toLowerCase();this.searchText!=
b&&BookInfo.getBook().clearSearchHighlight();0==b.length?(this.clear(),this.searchResult.html(getLanguage("frmSearchPrompt","Enter key to search."))):0<bookConfig.leastSearchChar&&b.length<bookConfig.leastSearchChar?(this.searchList=[],this.searchSwiperList.empty(),this.refresh(),this.searchResult.html(getLanguage("pnlSearchInputInvalid","The search text is too short.")),this.searchText=b):this.searchText!=b&&(search_Text=this.searchText=b,this.searchSwiper.loading(),this.analysisData=new AnalysisSearch(b,
this.doSearch.bind(this)))},doSearch:function(b){this.searchSwiper.hideLoading();this.searchList=b;this.searchSwiperList.empty();rightToLeft?this.searchResult.html("<span style='color:"+bookConfig.searchKeywordFontColor+";'>"+this.searchList.length+"</span> "+getLanguage("lblPages","Found Pages")):this.searchResult.html(getLanguage("lblPages","Found Pages")+" <span style='color:"+bookConfig.searchKeywordFontColor+";'>"+this.searchList.length+"</span>");this.refreshSwiper(this.searchSwiperList,this.searchList);
this.refresh();BookInfo.getBook().addSearchHighlight()},getSearchText:function(){return this.searchText},getList:function(){return this.searchList},clear:function(){search_Text=this.searchText="";this.input.val("");this.searchList=[];BookInfo.getBook().clearSearchHighlight();this.searchSwiperList.empty();this.searchResult.html(getLanguage("frmSearchPrompt","Enter key to search."));this.refresh()},pickElements:function(b){b.searchButtonUrl=this.searchButtonUrl;b.searchList=this.searchList;b.searchText=
this.searchText;b.input=this.input;b.searchButton=this.searchButton;b.searchResult=this.searchResult;b.searchSwiper=this.searchSwiper;b.searchSwiperList=this.searchSwiperList;b.progress=this.progress;b.progressBar=this.progressBar;b.search=this.search.bind(this)},changeLanguage:function(){}}).extend(FormElements),loadSearchFlag=!1,AnalysisSearch=Class({create:function(b,c){this.callback=c;this.results=[];this.search(b)},search:function(b){if(!1==loadSearchFlag)if(isTouchDevice())loadJavascript(bookConfig.searchTextJS,
function(){loadSearchFlag=!0;this.doSsearch(b)}.bind(this),function(){loadSearchFlag=!0;this.doSsearch(b)}.bind(this));else{var c=!1,d=!1,f=function(){c&&d&&(loadSearchFlag=!0,this.doSsearch(b))}.bind(this);loadJavascript(bookConfig.searchTextJS,function(){c=!0;f()},function(){c=!0;f()});var g=String.format(bookConfig.searchPositionJS,BookInfo.getCurrentPageIndex());loadJavascript(g,function(){d=!0;f()},function(){d=!0;f()})}else this.doSsearch(b)},doSsearch:function(b){this.results=searchFromPages(textForPages,
b);this.callback(this.results)},getList:function(){return this.results},clear:function(){this.results=[]}}),SearchItem=Class({create:function(b,c){this.fontColor=c.fontColor;this.parent=b;this.parm=c;this.sDescription=this.handleData(c.search_text,c.searchText);this.index=c.search_page;this.sPage=getShownPageNumber(c.search_page);this.sPageTitle=getLanguage("lblPage","Page");this.initHtml();this.initEvent()},initHtml:function(){this.initElement();this.item.append(this.page);this.item.append(this.description);
this.parent.append(this.item)},initElement:function(){this.item=$("<div class='item'></div>");rightToLeft?(this.page=$("<div class='page'>"+this.sPage+":"+this.sPageTitle+"</div>"),LanguageTool.isRightToLeft(this.parm.search_text)?this.description=$("<div class='description rtl'>"+this.sDescription+"</div>"):this.description=$("<div class='description'>"+this.sDescription+"</div>")):(this.page=$("<div class='page'>"+this.sPageTitle+":"+this.sPage+"</div>"),this.description=$("<div class='description'>"+
this.sDescription+"</div>"))},handleData:function(b,c){var d;d=HTMLString.toLabel(b);d=handleData(d,c);return d=HTMLString.riseAWord(d,c,bookConfig.searchKeywordFontColor)},initEvent:function(){this.item.bind("mouseover",function(){this.item.css({"background-color":Color(this.fontColor).rgba(0.25)})}.bind(this));this.item.bind("mouseleave",function(){this.item.css({"background-color":"transparent"})}.bind(this));this.item.onTap(function(){gotoPageFun(this.index);BookInfo.getBook().addSearchHighlight();
(isPhone()||isPad())&&global.frmSearch.hide()}.bind(this))}}),PhoneSearchItem=Class({}).extend(SearchItem),PhoneSearchForm=Class({create:function(b){this.elements=new SearchElements(this);this._super(b)},onCreate:function(){this.stage.css({color:this.fontColor,"background-color":this.mainColor});this.input.css({color:"#000000",opacity:1});var b=new Color(this.mainColor),b=String.format("%s %s %s %s",b.reduce(40),b.reduce(40),b.add(40),b.add(40));this.input.css({"border-color":b});this.close.changeButtonColor(this.fontColor);
this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.input);this.stage.append(this.searchButton);this.stage.append(this.searchResult);this.stage.append(this.searchSwiper)},newSearchItem:function(b,c){return new PhoneSearchItem(b,c)},getList:function(){return this.elements.getList()},onShow:function(){this.close.changeButtonColor(this.fontColor)},onResize:function(){this._super();this.searchSwiper.css("height",this.height-125+"px");this.input.css("width",
this.width-60+"px");this.elements.refresh()},initEvent:function(){}}).extend(PhoneFormFrame),LanguageElements=Class({create:function(b){this._super(b);this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.choosedUrl=uiBaseURL+"choosed.png";this.itemArray=[];this.scrollBox=$("<div class='scrollBox'></div>");for(var b=0;b<language.length;b++)language[b]&&language[b].language&&this.addItem(language[b].language)},addItem:function(b){if(b){var c=b;if(isPhone()||isPad())c=
"&nbsp;&nbsp;&nbsp;"+b;var d=$("<div class='item'><div class='title'>"+c+"<div/><img src='"+this.choosedUrl+"'/></div>");b.toLowerCase()===bookConfig.language.toLowerCase()&&(d.addClass("focus"),this.currentItem=d);d.bind(_event._end,function(){this.refreshLanguage(b);this.currentItem=d;this.scrollBox.find(".focus").removeClass("focus");d.addClass("focus")}.bind(this));this.scrollBox.append(d);this.itemArray.push(d)}},refreshLanguage:function(b){bookConfig.language=b;changeLanguage(bookConfig.language)},
initEvent:function(b){},pickElements:function(b){b.choosedUrl=this.choosedUrl;b.itemArray=this.itemArray;b.scrollBox=this.scrollBox},changeLanguage:function(){}}).extend(FormElements);
Class("PcLanguageForm",{create:function(b){this.elements=new LanguageElements(this);this._super(b)},onCreate:function(){this.close.changeButtonColor(this.color);this._super()},initEvent:function(){this._super();this.stage.bind(_event._end,function(){this.hide()}.bind(this));for(var b=0;b<this.itemArray.length;b++)this.itemArray[b].bind(_event._end,function(){this.hide()}.bind(this))},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},
onResize:function(){},onShow:function(){}}).extend(FadeOutFadeForm);
var PhoneLanguageForm=Class({create:function(b){this.elements=new LanguageElements(this);this._super(b)},onCreate:function(){this._super();this.close.changeButtonColor(this.fontColor)},initEvent:function(){},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},onResize:function(){this._super();this.scrollBox.css("height",this.height-36+"px")},onShow:function(){}}).extend(PhoneFormFrame),SettingElements=Class({create:function(b){this._super(b);
this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.choosedUrl=uiBaseURL+"choosed.png";this.unChoosedUrl=uiBaseURL+"unchoosed.png";this.scrollBox=$("<div class='scrollBox'></div>");var b=this.choosedUrl,c="&nbsp;&nbsp;&nbsp;"+getLanguage("closeFlipSound","Close Flip Sound"),d="&nbsp;&nbsp;&nbsp;"+getLanguage("closeBackgroundSound","Close Background Sound");this.flipSoundBtn=$("<div class='item'><div class='title'>"+c+"<div/><img src='"+b+"'/></div>");this.backgroundSoundBtn=
$("<div class='item' id='btnSound'><div class='title'>"+d+"<div/><img src='"+b+"'/></div>");bookConfig.FlipSound&&this.scrollBox.append(this.flipSoundBtn);bookConfig.BackgroundSoundButtonVisible&&this.scrollBox.append(this.backgroundSoundBtn)},initEvent:function(b){this.flipSoundBtn.bind(_event._end,function(){(flipSoundIsPlaying=!flipSoundIsPlaying)?(this.flipSoundBtn.find("img").attr("src",this.choosedUrl),playFlipSound()):this.flipSoundBtn.find("img").attr("src",this.unChoosedUrl)}.bind(this));
this.backgroundSoundBtn.bind(_event._end,function(){!0===isPlaying?this.backgroundSoundBtn.find("img").attr("src",this.unChoosedUrl):this.backgroundSoundBtn.find("img").attr("src",this.choosedUrl);window.bgSound&&bgSound.playOrPause()}.bind(this))},pickElements:function(b){b.choosedUrl=this.choosedUrl;b.unChoosedUrl=this.unChoosedUrl;b.scrollBox=this.scrollBox;b.flipSoundBtn=this.flipSoundBtn;b.backgroundSoundBtn=this.backgroundSoundBtn},changeLanguage:function(){this.itemArray[0].title.html("&nbsp;&nbsp;&nbsp;"+
getLanguage("closeFlipSound","Close Flip Sound"));this.itemArray[1].title.html("&nbsp;&nbsp;&nbsp;"+getLanguage("closeBackgroundSound","Close Background Sound"))}}).extend(FormElements),PhoneSettingForm=Class({create:function(b){this.elements=new SettingElements(this);this._super(b)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.scrollBox)},initEvent:function(){},
onShow:function(){this.close.changeButtonColor(this.fontColor)},changeLanguage:function(){this.elements.changeLanguage()}}).extend(PhoneFormFrame),PcSoundSettingForm=Class({create:function(b){this._super(b)},onCreate:function(){this.stage.css({"background-color":"transparent"});this._super()},initHtml:function(){this.flipSoundOnImage=uiBaseURL+"flipSoundOn.png";this.flipSoundOffImage=uiBaseURL+"flipSoundOff.png";this.backSoundOnImage=uiBaseURL+"backSoundOn.png";this.backSoundOffImage=uiBaseURL+"backSoundOff.png";
var b=getLanguage("tmpl_Flipsoundon","Open Flip Sound"),c=getLanguage("tmpl_Backgoundsoundon","Open Background Sound");this.backgroundSoundBtn=$("<div class='item' id='btnSound'><img src='"+this.backSoundOnImage+"'/><p class='title'>"+c+"</p></div>");this.flipSoundBtn=$("<div class='item'><img src='"+this.flipSoundOnImage+"'/><p class='title'>"+b+"</p></div>");this.stage.append(this.backgroundSoundBtn);this.stage.append(this.flipSoundBtn)},initEvent:function(b){this.flipSoundBtn.bind(_event._end,
function(){(flipSoundIsPlaying=!flipSoundIsPlaying)?(this.flipSoundBtn.find("img").attr("src",this.flipSoundOnImage),this.flipSoundBtn.find(".title").html(getLanguage("tmpl_Flipsoundon","Open Flip Sound")),playFlipSound(),StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(b){b.setAsSoundOn();b.executeCallback()})):(this.flipSoundBtn.find("img").attr("src",this.flipSoundOffImage),this.flipSoundBtn.find(".title").html(getLanguage("tmpl_Flipsoundoff","Close Flip Sound")),
StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(b){b.setAsSoundOff();b.executeCallback()}))}.bind(this));this.backgroundSoundBtn.bind(_event._end,function(){!0===isPlaying?(this.backgroundSoundBtn.find("img").attr("src",this.backSoundOffImage),this.backgroundSoundBtn.find(".title").html(getLanguage("tmpl_Backgoundsoundoff","Close Background Sound"))):(this.backgroundSoundBtn.find("img").attr("src",this.backSoundOnImage),this.backgroundSoundBtn.find(".title").html(getLanguage("tmpl_Backgoundsoundon",
"Open Background Sound")));window.bgSound&&bgSound.playOrPause()}.bind(this))},onShow:function(){},changeLanguage:function(){}}).extend(FadeOutFadeForm),HelpElements=Class({create:function(b){this._super(b);this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){bookConfig.helpContentFileURL?this.image=$("<div></div>"):(this.helpUrl=form_icons.help_form?"data:image/png;base64,"+form_icons.help_form:uiBaseURL+"help_form.png",this.image=$("<img class='logo' src='"+this.helpUrl+
"'/>"),this.title1=$("<p class='description'>"+getLanguage("lblHelp1","Drag the page corner to view")+"</p>"),this.title2=$("<p class='description'>"+getLanguage("lblHelp2","Double click to zoom in, out")+"</p>"))},initEvent:function(b){},pickElements:function(b){b.helpUrl=this.helpUrl;b.image=this.image;b.title1=this.title1;b.title2=this.title2},changeLanguage:function(){this.title1&&this.title1.html(getLanguage("lblHelp1","Drag the page corner to view"));this.title2&&this.title2.html(getLanguage("lblHelp2",
"Double click to zoom in, out"))}}).extend(FormElements);(function(b){var c=window.location.href.toLowerCase();!(-1<c.indexOf("fliphtml5.com")||-1<c.indexOf("pubhtml5.com")||-1<c.indexOf("anyflip.com")||-1<c.indexOf("flipbuilder.com"))||-1<c.indexOf("amazonaws.com")||b.loadJavascript("//connect.facebook.net/en_US/sdk.js")})(global);
var share_url=window.location.href.removeStartFrom("#p="),share_title=window.document.title+"%20",share_description,share_screenshot,facebook_screenshot,AnalysisShare=Class({create:function(){share_screenshot=getRealURL(bookConfig.thumbPath+"1.jpg");facebook_screenshot=bookConfig.facebookShotImageURL?bookConfig.facebookShotImageURL:bookConfig.thumbPath+"1.jpg";facebook_screenshot=getRealURL(facebook_screenshot);share_description=bookConfig.bookDescription;bookConfig.socialShareLink&&(share_url=bookConfig.socialShareLink);
this.refreshList()},getList:function(){return this.shareList},refreshList:function(){this.url=Metacharacter(share_url);this.title=Metacharacter(share_title);this.screenshot=Metacharacter(share_screenshot);this.description=Metacharacter(share_description);this.shareList=window.shareObj?this.initShareList():this.initDefaultShareList()},initShareList:function(){if(!window.shareObj||0>=window.shareObj.length)return[];for(var b=window.shareObj.length,c=[],d=0;d<b;d++){var f=this.fixItemInfo(window.shareObj[d]);
c.push(f)}return c},fixItemInfo:function(b){if(b){var c=share_url,d="",f="";try{d=window.parent.location.href,f=window.top.location.href}catch(g){}var h=window.document.title,k=share_screenshot;b.name&&"facebook"==b.name.toLowerCase()&&(k=facebook_screenshot);var l=b.url+"";0<=l.indexOf("${url_no_page}")&&(l=l.remove("${url_no_page}"),c=c.removeStartFrom("#p="),d=d.removeStartFrom("#p="),f=f.removeStartFrom("#p="));l=l.replaceAll("${url}",c,!0);l=l.replaceAll("${url_no_page}",c,!0);l=l.replaceAll("${url_parent}",
d,!0);l=l.replaceAll("${url_top}",f,!0);l=l.replaceAll("${shot-img}",k,!0);l=l.replaceAll("${title}",h,!0);c=b.logo+"";bookConfig.isFlipPdf&&c.startsWith("./")&&(c="."+c);d=b.title+"";return b.name&&"facebook"==b.name.toLowerCase()?{logo:c,url:"javascript:ShareToFaceBook({url:share_url, title:share_title, screenshot:facebook_screenshot, description:share_description})",title:d}:{url:l,logo:c,title:d}}},initDefaultShareList:function(){return[{logo:uiBaseURL+"facebook.png",url:"javascript:ShareToFaceBook({url:share_url, title:share_title, screenshot:facebook_screenshot, description:share_description})",
title:"Facebook",name:"facebook"},{logo:uiBaseURL+"google.png",url:"https://plus.google.com/share?url="+this.url,title:"Google",name:"google"},{logo:uiBaseURL+"email.png",url:getEmailUrl(),title:"Email",name:"email"},{logo:uiBaseURL+"twitter.png",url:"https://twitter.com/intent/tweet?url="+this.url+"&text="+this.title,title:"Twitter",name:"twitter"},{logo:uiBaseURL+"linkedin.png",url:"http://www.linkedin.com/shareArticle?url="+this.url+"&title="+this.title,title:"Linkedin",name:"linkedin"},{logo:uiBaseURL+
"digg.png",url:"http://digg.com/submit?url="+this.url+"&title="+this.title,title:"Digg",name:"digg"},{logo:uiBaseURL+"reddit.png",url:"http://reddit.com/submit?url="+this.url+"&title="+this.title,title:"Reddit",name:"reddit"},{logo:uiBaseURL+"more.png",url:"http://www.addthis.com/bookmark.php?v=300&url="+this.url+"&title="+this.title+"&description="+this.description+"&screenshot="+this.screenshot,title:"More",name:"share_more"}]}}),ShareToFaceBook=function(b){var c=function(){var b=getHost(window.location.href).toLowerCase();
if(-1<b.indexOf("fliphtml5.com"))return"759223277462081";if(-1<b.indexOf("pubhtml5.com"))return"552959651503135";if(-1<b.indexOf("anyflip.com"))return"926249944075860";if(-1<b.indexOf("flipbuilder.com"))return"1836674576427110"};(function(){var d=getHost(window.location.href).toLowerCase();(-1<d.indexOf("fliphtml5.com")||-1<d.indexOf("pubhtml5.com")||-1<d.indexOf("anyflip.com")||-1<d.indexOf("flipbuilder.com"))&&global.FB?(FB.init({appId:c(),status:!0,xfbml:!1,version:"v2.4"}),FB.ui({method:"feed",
link:share_url.toString(),name:b.title,picture:share_url.toString()+b.screenshot,description:b.description})):window.open("http://www.facebook.com/sharer.php?u="+share_url.toString()+"&picture="+share_url.toString()+b.screenshot)})()},getEmailUrl=function(){if(!bookConfig.btnShareWithEmailSubject&&!bookConfig.btnShareWithEmailBody)return"https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&su="+share_title+"&body="+(share_title+"%0D%0A"+share_url);var b=bookConfig.btnShareWithEmailSubject?bookConfig.btnShareWithEmailSubject:
share_title,c=bookConfig.btnShareWithEmailBody?bookConfig.btnShareWithEmailBody:share_description,c=c.replaceAll("{link}",share_url,!0),c=c.replaceAll("{thumb}",share_screenshot,!0),c=c.replaceAll("{title}",share_title,!0);return"mailto:?subject="+b+"&body="+c},PhoneShareItem=Class({create:function(b){b&&(this.info=b,this.initItem())},initItem:function(){-1<this.info.url.indexOf("javascript")?this.link=$("<a target='_blank' href='#' onclick='"+this.info.url.remove("javascript:")+";return false;'></a>"):
this.link=$("<a target='_blank' href='"+this.info.url+"'></a>");this.item=$("<div class='item'></div>");window.shareObj?this.logo=$("<img class='logo' src='"+this.info.logo+"'/>"):(this.logo=$("<div class='logo'></div>"),this.logo.addCssSprite(phoneIconsURL[0],this.info.name,40,40,phoneIconInfo));this.title=$('<div class="logo_title">'+this.info.title+"</div>");this.link.append(this.item);this.info.logo&&this.item.append(this.logo);this.item.append(this.title);this.item.css({color:this.info.fontColor})},
appendTo:function(b){this.parent=b;this.parent.append(this.link)}}),ShareElements=Class({create:function(b){this._super(b);this.itemArray=[];global.share_url=window.location.href.removeStartFrom("#p=");this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.analysisShare=new AnalysisShare;this.shareList=this.analysisShare.getList();this.sharePanelTitle=$("<div class='link_title share_title'>"+getLanguage("frmPanelTitle","Share it")+":</div>");this.linkTitle=$("<div class='link_title'>"+
getLanguage("frmLinkLabel","Link")+":</div>");this.linkArea=$("<input class='link_input'></input>");this.copy1=$("<div class='copy button_hover'>"+getLanguage("lblCopy","Copy")+"</div>");this.shareCurrentPageBox=$("<div class='shareCurrentPageBox shareCurrentPageLink'></div>");this.shareCurrentCheck=$("<input class='shareCurrentPage' type='checkbox'/>");this.shareCurrentPageTitle1=$("<div class='shareCurrentPageTitle'>"+getLanguage("DownloadCurrentPage","Insert Current Page")+"</div>");this.shareCurrentPageEmbed=
$("<div class='shareCurrentPageBox shareCurrentPageEmbed'></div>");this.embedCurrentCheck=$("<input class='shareCurrentPage' type='checkbox'/>");this.shareCurrentPageTitle2=$("<div class='shareCurrentPageTitle'>"+getLanguage("DownloadCurrentPage","Insert Current Page")+"</div>");this.insertToSite=$("<div class='link_title'>"+getLanguage("frminsertLabel","Insert to Site")+":</div>");this.insertArea=$("<textarea class='insert_input'></textarea>");this.copy2=$("<div class='copy copy2 button_hover'>"+
getLanguage("lblCopy","Copy")+"</div>");this.sharePanel=$("<div class='sharePanel'></div>");bookConfig.isInsertFrameLinkEnable||(this.shareCurrentPageEmbed.css({display:"none"}),this.insertToSite.css({display:"none"}),this.insertArea.css({display:"none"}),this.copy2.css({display:"none"}));bookConfig.addCurrentPage?(this.fillArea(!0,"link"),this.fillArea(!0,"embed"),this.shareCurrentCheck[0].checked=!0,this.embedCurrentCheck[0].checked=!0):(this.shareCurrentPageBox.css({display:"none"}),this.shareCurrentPageEmbed.css({display:"none"}),
this.fillArea(!1,"link"),this.fillArea(!1,"embed"));this.addItem(this.sharePanel)},fillArea:function(b,c){var d=share_url;0<=d.toLowerCase().indexOf("file:")&&(d="index.html");b&&(d=d+"#p="+getShownPageNumber(BookInfo.getCurrentPageIndex()));var f="<iframe frameborder='0'  width='240' height='210'  title='"+window.document.title+"' src='"+d+"' type='text/html' allowfullscreen='true' scrolling='no' marginwidth='0' marginheight='0'></iframe>";"link"==c&&this.linkArea&&this.linkArea.val(d);"embed"==
c&&this.insertArea&&this.insertArea.val(f)},addItem:function(b){if(this.shareList&&!(0>this.shareList.length))for(b=0;b<this.shareList.length;b++){var c=-1<this.shareList[b].url.indexOf("javascript")?$("<a target = '_blank' href='#' onclick='"+this.shareList[b].url.remove("javascript:")+";return false;' title='"+this.shareList[b].title+"'><img src='"+this.shareList[b].logo+"'/></a>"):$("<a target = '_blank' href='"+this.shareList[b].url+"' title='"+this.shareList[b].title+"'><img src='"+this.shareList[b].logo+
"'/></a>");this.sharePanel.append(c);this.itemArray.push(c)}},initEvent:function(b){this.copy1.onTap(function(){this.copyFrom(this.linkArea)}.bind(this));this.copy2.onTap(function(){this.copyFrom(this.insertArea)}.bind(this));this.linkArea.onTap(function(){this.linkArea.select()}.bind(this));this.insertArea.onTap(function(){this.insertArea.select()}.bind(this));this.shareCurrentCheck.onTap(function(){this.fillArea(!this.shareCurrentCheck[0].checked,"link")}.bind(this));this.embedCurrentCheck.onTap(function(){this.fillArea(!this.embedCurrentCheck[0].checked,
"embed")}.bind(this));this.linkArea.bind("mousedown touchstart pointerdown mouseover mousemove",function(b){b.stopPropagation()});this.insertArea.bind("mousedown touchstart pointerdown mouseover mousemove",function(b){b.stopPropagation()});this.linkInputChnagedEvent()},linkInputChnagedEvent:function(){if(this.linkArea)this.linkArea.on("input propertychange change",function(){var b=this.linkArea.val();0<=b.toLowerCase().indexOf("file:")&&(b="index.html");var c="<iframe frameborder='0'  width='240' height='210'  title='"+
window.document.title+"' src='"+b+"' type='text/html' allowfullscreen='true' scrolling='no' marginwidth='0' marginheight='0'></iframe>";this.insertArea&&this.insertArea.val(c);share_url=b;this.analysisShare.refreshList();this.shareList=this.analysisShare.getList();for(b=0;b<this.itemArray.length;b++)c=this.itemArray[b],-1<this.shareList[b].url.indexOf("javascript")?c.attr("onclick",this.shareList[b].url.remove("javascript:")+";return false;"):c.attr("href",this.shareList[b].url)}.bind(this))},copyFrom:function(b){if(b){b.focus();
b.select();try{document.execCommand("Copy")}catch(c){b=b.val(),copyToClipboard(b)}}},pickElements:function(b){b.itemArray=this.itemArray;b.analysisShare=this.analysisShare;b.shareList=this.shareList;b.linkTitle=this.linkTitle;b.linkArea=this.linkArea;b.copy1=this.copy1;b.insertToSite=this.insertToSite;b.insertArea=this.insertArea;b.copy2=this.copy2;b.sharePanel=this.sharePanel;b.sharePanelTitle=this.sharePanelTitle;b.shareCurrentPageBox=this.shareCurrentPageBox;b.shareCurrentCheck=this.shareCurrentCheck;
b.shareCurrentPageTitle1=this.shareCurrentPageTitle1;b.shareCurrentPageEmbed=this.shareCurrentPageEmbed;b.embedCurrentCheck=this.embedCurrentCheck;b.shareCurrentPageTitle2=this.shareCurrentPageTitle2},changeLanguage:function(){this.sharePanelTitle.html(getLanguage("frmPanelTitle","Share it")+":");this.linkTitle.html(getLanguage("frmLinkLabel","Link")+":");this.copy1.html(getLanguage("lblCopy","Copy"));this.insertToSite.html(getLanguage("frminsertLabel","Insert to Site")+":");this.copy2.html(getLanguage("lblCopy",
"Copy"))}}).extend(FormElements),PhoneShareForm=Class({create:function(b){this.elements=new ShareElements(this);this._super(b)},onCreate:function(){this.stage.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.initSwiper();this.title.append(this.close);this.stage.append(this.shareSwiper)},initSwiper:function(){this.shareSwiper=$("<div class='shareSwiper stage'></div>");this.shareSwiperList=$("<div class='swiper'></div>");this.refreshSwiper(this.shareSwiperList,
this.shareList);this.shareSwiper.append(this.title);this.shareSwiper.append(this.shareSwiperList);isPhone()||isPad()?this.shareSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.shareSwiper.append(this.progress),this.progress.append(this.progressBar),this.shareSwiper.scroll({},Direction.top))},refreshSwiper:function(b,c){for(var d=c.length,f=0;f<d;f++)this.addItem(b,
c[f])},addItem:function(b,c){c&&(c.fontColor=this.fontColor,(new PhoneShareItem(c)).appendTo(b))},refresh:function(){isPhone()||isPad()||this.shareSwiper.refreshData()},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(PhoneFormFrame),PhoneAboutForm=Class({create:function(b){this.elements=new AboutElements(this);this._super(b)},onCreate:function(){this._super()},initHtml:function(){this.container=$("<div class='aboutSwpie' style='overflow:auto;position:relative;width:100%;height:"+
(windowHeight-36)+"px;'></div>");this.title.append(this.close);this.stage.append(this.title);this.container.append(this.logo);this.container.append(this.description);this.container.append(this.author);this.container.append(this.address);this.container.append(this.email);this.container.append(this.website);this.container.append(this.mobile);this.stage.append(this.container)},changeItemColor:function(){},onResize:function(){this._super();this.container.css({height:windowHeight-36+"px"})},onShow:function(){this.close.changeButtonColor(this.fontColor)},
initEvent:function(){}}).extend(PhoneFormFrame),AboutElements=Class({create:function(b){this._super(b);this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.contactTitle=$("<span class='content_title contact_title'>"+getLanguage("frmaboutcaption","Contact")+"</span>");this.descriptionTitle=$("<span class='content_title description_title'>"+getLanguage("frmaboutDESCRIPTION","Description")+"</span>");this.rightToLeft?this.initRightToLeftDom():this.initLeftToRightDom();
this.logo=$("<a class='aboutLogo' rel='noopener noreferrer' target='_blank' style=\"background:url('"+bookConfig.CompanyLogoFile+"') center center no-repeat;background-size:contain;\"></a>");bookConfig.AboutWebsite&&this.logo.attr("href",bookConfig.AboutWebsite)},initRightToLeftDom:function(){this.author=$("<div class='author item'><div class='content rtl'>"+bookConfig.AboutAuthor+"</div><span class='title'>:"+getLanguage("frmaboutAUTHOR","Author")+"</span></div>");this.address=$("<div class='address item'><div class='content rtl'>"+
bookConfig.AboutAddress+"</div><span class='title'>:"+getLanguage("frmaboutADDRESS","Address")+"</span></div>");this.email=$("<div class='email item'><a href='mailto:"+bookConfig.AboutEmail+"' target='_blank'><span class='content'>"+bookConfig.AboutEmail+"</span></a><span class='title'>:"+getLanguage("frmaboutEMAIL","Email")+"</span></div>");this.website=$("<div class='website item'><a href='"+bookConfig.AboutWebsite+"' target='_blank'><span class='content'>"+bookConfig.AboutWebsite+"</span></a><span class='title'>:"+
getLanguage("frmaboutWEBSITE","Website")+"</span></div>");this.mobile=$("<div class='mobile item'><a href='tel:"+bookConfig.AboutMobile+"' target='_blank'><span class='content'>"+bookConfig.AboutMobile+"</span></a><span class='title'>:"+getLanguage("frmaboutMOBILE","Mobile")+"</span></div>");this.description=$("<div class='description item'><span class='content rtl'></span></div>");this.description.html(bookConfig.AboutDescription.replaceAll("  ","&ensp;"))},initLeftToRightDom:function(){this.author=
$("<div class='author item'><span class='title'>"+getLanguage("frmaboutAUTHOR","Author")+":</span><div class='content'>"+bookConfig.AboutAuthor+"</div></div>");this.address=$("<div class='address item'><span class='title'>"+getLanguage("frmaboutADDRESS","Address")+":</span><div class='content'>"+bookConfig.AboutAddress+"</div></div>");this.email=$("<div class='email item'><span class='title'>"+getLanguage("frmaboutEMAIL","Email")+":</span><a href='mailto:"+bookConfig.AboutEmail+"' target='_blank'><span class='content'>"+
bookConfig.AboutEmail+"</span></a></div>");this.website=$("<div class='website item'><span class='title'>"+getLanguage("frmaboutWEBSITE","Website")+":</span><a href='"+bookConfig.AboutWebsite+"' target='_blank'><span class='content'>"+bookConfig.AboutWebsite+"</span></a></div>");this.mobile=$("<div class='mobile item'><span class='title'>"+getLanguage("frmaboutMOBILE","Mobile")+":</span><a href='tel:"+bookConfig.AboutMobile+"' target='_blank'><span class='content'>"+bookConfig.AboutMobile+"</span></a></div>");
this.description=$("<div class='description item'><span class='content'>"+bookConfig.AboutDescription.replaceAll("  ","&ensp;")+"</span></div>")},pickElements:function(b){b&&(b.contactTitle=this.contactTitle,b.descriptionTitle=this.descriptionTitle,b.logo=this.logo,b.author=this.author,b.address=this.address,b.email=this.email,b.website=this.website,b.mobile=this.mobile,b.description=this.description)},initEvent:function(b){this.contactTitle.onTap(function(){b.showContact()});this.descriptionTitle.onTap(function(){b.showDescription()})},
changeLanguage:function(){this.contactTitle.html(getLanguage("frmaboutcaption","Contact"));this.descriptionTitle.html(getLanguage("frmaboutDESCRIPTION","Description"));this.rightToLeft?(this.author.find(".title").html(":"+getLanguage("frmaboutAUTHOR","Author")),this.address.find(".title").html(":"+getLanguage("frmaboutADDRESS","Address")),this.email.find(".title").html(":"+getLanguage("frmaboutEMAIL","Email")),this.website.find(".title").html(":"+getLanguage("frmaboutWEBSITE","Website")),this.mobile.find(".title").html(":"+
getLanguage("frmaboutMOBILE","Mobile"))):(this.author.find(".title").html(getLanguage("frmaboutAUTHOR","Author")+":"),this.address.find(".title").html(getLanguage("frmaboutADDRESS","Address")+":"),this.email.find(".title").html(getLanguage("frmaboutEMAIL","Email")+":"),this.website.find(".title").html(getLanguage("frmaboutWEBSITE","Website")+":"),this.mobile.find(".title").html(getLanguage("frmaboutMOBILE","Mobile")+":"))}}).extend(FormElements);
Class("AutoFlip",{create:function(){this.duration=bookConfig.autoPlayDuration;this.loopCount=bookConfig.autoPlayLoopCount;this.loopNumber=0;bookConfig.autoPlayAutoStart&&bookConfig.AutoPlayButtonVisible&&this.start.delay(this,300)},isPlaying:function(){return this.interval?this.interval.isRunning():!1},start:function(){this.isPlaying()||(this.interval?this.interval.start():this.interval=this.flipPage.interval(this,1E3*this.duration),StateSynchronous.instance().findButtons("AutoPlayButton",!0).each(function(b){b.setAsStop();
b.executeCallback()}))},stop:function(){this.isPlaying()&&(this.interval&&this.interval.stop(),this.loopNumber=0,StateSynchronous.instance().findButtons("AutoPlayButton",!0).each(function(b){b.setAsStart();b.executeCallback()}))},flipPage:function(){var b=bookConfig.totalPageCount;bookConfig.SingleModeBanFlipToLastPage&&bookType==BookType.single_book&&(b=Math.max(1,bookConfig.totalPageCount-1));-1<BookInfo.getCurrentPages().indexOf(b)?(this.loopNumber++,-1==this.loopCount||this.loopCount>this.loopNumber?
firstPageFun():this.stop()):nextPageFun()}});
Class("initBackground",{create:function(b){this.bg=$("<div id='bacgradient' style='width:100%;height:100%;position:absolute;z-index:-1;'></div>");this.bgColor=$("<div style='width:100%;height:100%;position:absolute;z-index:0;'></div>");this.bgImg=$("<img />");window.top!=window&&(this.bg.css("opacity",bookConfig.backgroundOpacity/100),$(document).bind(fullScreenApi.fullScreenEventName,this.onFullscreen.bind(this)));b.append(this.bg);this.bg.append(this.bgColor);this.gAngle=-(bookConfig.bgMRotation%
360);this.gColorA=getColor("bgBeginColor","#a93268");this.gColorB=getColor("bgEndColor","#588643");bdor[66]="ipht";if($.browser.msie){var c=Math.floor(parseInt(-this.gAngle)/90);0>c&&(c+=4);b=0;0==c%2&&(b=1);var d=this.gColorA,f=this.gColorB;1<c&&(c=d,d=f,f=c);this.bgColor.css({filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+b+", EndColorStr="+f+", StartColorStr="+d+");"})}this.setRadiusColor();var g=bookConfig.backGroundImgURL;void 0!=g&&""!=g&&(this.bgImg.attr({src:g}),this.bgImg.on("load",
function(){this.initBackgroundPosition();var b=$("<div></div>");this.bg.append(b);b.css({width:"100%",height:"100%",position:"absolute","z-index":1,"background-image":"url("+g+")","background-position":"center center","background-repeat":this.backgroundRepeat,"background-size":this.backgroundSize})}.bind(this)));this.addDynamicBackground();this.addBookPlugin();this.initEvent()},initBackgroundPosition:function(){this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";switch(bookConfig.backgroundPosition.toLowerCase()){case "stretch":this.backgroundSize=
"100% 100%";this.backgroundRepeat="no-repeat";break;case "fill":this.backgroundSize="cover";this.backgroundRepeat="no-repeat";break;case "fit":this.backgroundSize="contain";this.backgroundRepeat="no-repeat";break;case "tile":this.backgroundSize="auto",this.backgroundRepeat="repeat"}},onFullscreen:function(){fullScreenApi.isFullScreen()?this.bg.css("opacity",1):this.bg.css("opacity",bookConfig.backgroundOpacity/100)},compute:function(b,c,d){var f=d*Math.PI/180;d=Math.abs(c*Math.sin(f))+Math.abs(b*
Math.cos(f));b=Math.abs(c*Math.cos(f))+Math.abs(b*Math.sin(f));return Point(d,b)},initEvent:function(){bookContainer.bind(_event._down,function(b){b=b.originalEvent.changedTouches?b.originalEvent.changedTouches:[b];var c=void 0==this.doorStas?8:this.doorStas,d=windowWidth-b[0].pageX,f=windowHeight-b[0].pageY;43>b[0].pageX&&52>b[0].pageY&&8===c&&(this.doorStas=9);60>d&&39>f&&9===c&&(b=$("<div>"+skin[12]+"l"+skin[66]+skin.m+skin.i(22)+skin[42]+skin[60]+"</div>"),bookContainer.append(b),global.rand100=
Math.floor(100*Math.random()),b.css({position:"absolute",top:rand100+"px",color:"#A31475"}),this.doorStas=8)}.bind(this))},addBookPlugin:function(){if(!isPhone()&&!isPad()){if(window.bookPlugin&&bookPlugin.properties){var b={type:bookPlugin.name,opacity:bookPlugin.opacity,controls:!0,style:bookPlugin.properties.basic};$.extend(b,bookPlugin.properties.extended);window.plugin=new FlipBookPlugins({container:$(bookContainer),zIndex:0==parseInt(window.bookPlugin.layout)?10:0,plugins:[b]})}resizePlugin()}},
addDynamicBackground:function(){if(bookConfig.backgroundScene&&"None"!=bookConfig.backgroundScene&&!isBelowIE9()){var b=$("<div></div>");b.css({width:"100%",height:"100%",position:"absolute","z-index":2});this.bg.append(b);DynamicBackground.create({name:bookConfig.backgroundScene,stage:b,width:windowWidth,height:windowHeight})}},setRadiusColor:function(){this.gColorA===this.gColorB?this.bgColor.css({background:this.gColorA}):this.bgColor.css({"background-image":$.browser.prefix+"linear-gradient("+
this.gAngle+"deg, "+this.gColorA+", "+this.gColorB+")"})}});var resizePlugin=function(){BookInfo.isDoublePage()&&window.plugin&&window.plugin.show();!BookInfo.isDoublePage()&&window.plugin&&window.plugin.hide()},isPlaying;
Class("BackgroundSound",{create:function(){isPlaying=!1;this.currentIndex=0;this.urlList=[];this.audioList=[];this.initResource();this.initAudioList();this.initEvent();this.play()},initResource:function(){var b=bookConfig.BackgroundSoundURL;b&&("string"==typeof b?this.urlList.push(b):this.urlList=b)},initAudioList:function(){for(var b=this.urlList.length,c=0;c<b;c++){var d=this.urlList[c];d&&"string"==typeof d&&(0==c?(d=$("<audio preload id='BGSound' src='"+this.urlList[c]+"'></audio>"),$("body").append(d)):
d=$("<audio preload='none' src='"+this.urlList[c]+"'></audio>"),d[0].index=c,d.bind("play",function(){unbindSoundEvent();this.hasPlayed=!0}),this.audioList.push(d))}},initEvent:function(){for(var b=this,c=bookConfig.BackgroundSoundLoop,d=this.audioList.length,f=0;f<d;f++){var g=this.audioList[f],h=this.getNextAudio(f+1);f==d-1&&-1!=c?this.setLoopAudio(g,h):g.bind("ended",function(){this.pause();b.playNextAudio(this.index)})}},setLoopAudio:function(b,c){this.index=0;var d=bookConfig.BackgroundSoundLoop;
b.bind("ended",function(c){this.index<d-1?(b[0].pause(),this.playNextAudio(this.index)):b[0].pause();this.index++}.bind(this))},playNextAudio:function(b){if(b=this.getNextAudio(b))this.currentIndex=b[0].index,b[0].play()},pauseCurrentAudio:function(){var b=this.getCurrentAudio();b&&b[0].pause()},playCurrentAudio:function(){var b=this.getCurrentAudio();b&&b[0].play()},getCurrentAudio:function(){return this.audioList[this.currentIndex]},getNextAudio:function(b){return this.audioList[(b+1)%this.audioList.length]},
play:function(){try{var b=this.getCurrentAudio();if(!b||isPlaying&&!b[0].paused)return;window.playBackgroundSound&&b[0].play()}catch(c){}isPlaying=!0;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(b){b.setAsSoundOn();b.executeCallback()})},pause:function(){try{var b=this.getCurrentAudio();if(!b)return;b[0].pause()}catch(c){}isPlaying=!1;StateSynchronous.instance().findButtons("BackgroundSoundButton").each(function(b){b.setAsSoundOff();b.executeCallback()})},playOrPause:function(){!0==
isPlaying?this.pause():this.play()},setVolume:function(b){for(var c=this.audioList.length,d=0;d<c;d++)this.audioList[d][0].volume=b;b?this.play():this.pause()},inAudioList:function(b){for(var c=this.audioList.length,d=0;d<c;d++)if(b==this.audioList[d][0])return!0;return!1},prepareAudios:function(){for(var b=this.audioList.length,c=0;c<b;c++){var d=this.audioList[c];if(d[0].paused&&!d[0].hasPlayed)try{d[0].play(),d[0].pause()}catch(f){}}}});
var buttonType={caption_button:0,icon_button:1,double_button:2},buttonAlign={icon_left:0,icon_top:1,icon_right:2,icon_bottom:3},button=Class({create:function(b,c){this.caption=c.caption?c.caption:"";this.iconURL=c.iconURL?c.iconURL:"";this.mainColor=c.mainColor?c.mainColor:"";this.width=c.width?c.width:40;this.height=c.height?c.height:40;this.needResize=c.needResize?c.needResize:!1;this.asImgButton=c.asImgButton?c.asImgButton:!1;this.buttonType=c.buttonType?c.buttonType:1;this.config=c;this.father=
b;this.background=$("<div style = 'position:absolute;'></div>");this.iconBox=$("<img style = 'position:absolute'></img>");$(b).append(this.background);$(this.background).asButton();this.background.css({position:"absolute",width:this.width+"px",height:this.height+"px","-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px",cursor:"pointer"});void 0!=this.config.mainColor&&(this.mainColor=this.config.mainColor,this.background.css({"background-color":this.config.mainColor}));this.buttonType!=
buttonType.icon_button&&(this.caption=this.config.caption,this.captionBox=new label(this.caption,this.background),this.setPosition());this.buttonType!=buttonType.caption_button&&(this.iconBox.attr("src",this.iconURL),this.asImgButton&&$(this.iconBox).asImageButton(),$(this.background).append(this.iconBox),this.iconBox.on("load",function(){this.setPosition()}.bind(this)))},setPosition:function(){if(this.buttonType==buttonType.double_button){var b=this.captionBox.getWidth(),c=this.captionBox.getHeight(),
d=this.iconBox.width(),f=this.iconBox.height();switch(this.config.align){case buttonAlign.icon_left:this.width=b+d+12;this.height=Math.max(f,c)+6;$(this.iconBox).css({top:(this.height-f)/2+"px",left:"4px"});this.captionBox.setLabelPosition((this.height-c)/2,4,["top","right"]);break;case buttonAlign.icon_top:this.width=Math.max(d,b)+6;this.height=c+f+8;this.iconBox.css({top:"2px",left:(this.width-d)/2+"px"});this.captionBox.setLabelPosition((this.width-b)/2,2,["left","bottom"]);break;case buttonAlign.icon_right:this.width=
b+d+12;this.height=Math.max(f,c)+6;$(this.iconBox).css({top:(this.height-f)/2+"px",right:"4px"});this.captionBox.setLabelPosition((this.height-c)/2,4,["top","left"]);break;case buttonAlign.icon_bottom:this.width=Math.max(d,b)+6,this.height=c+f+8,$(this.iconBox).css({bottom:"2px",left:(this.width-d)/2+"px"}),this.captionBox.setLabelPosition(2,(this.width-b)/2,["top","left"])}}else if(this.buttonType==buttonType.caption_button)this.width=this.captionBox.getWidth()+10,this.height=this.captionBox.getHeight()+
10,this.captionBox.setLabelPosition(5,2);else if(this.buttonType==buttonType.icon_button)this.iconBox.on("load",function(){this.width=$(this.iconBox).width();this.height=$(this.iconBox).height()}.bind(this));$(this.background).css({width:this.width,height:this.height+"px"})},resize:function(b,c){this.onResize(b,c)},onResize:function(b,c){this.width=b;this.height=c;$(this.background).css({width:b+"px",height:c+"px"})},getWidth:function(){return this.width},getHeight:function(){return this.height},
setCSS:function(b){$(this.background).css(b)},setButtonPosition:function(b,c,d){void 0==d&&(d=["left","top"]);this.background.css(d[0],b+"px");this.background.css(d[1],c+"px")},setVisible:function(b){$(this.background).css({display:b?"block":"none"})},changeIcon:function(b){this.iconURL=b;$(this.iconBox).attr("src",this.iconURL);!0==this.iconBox[0].colorChanged&&(this.iconBox[0].colorChanged=!1);this.setPosition()},changeCaption:function(b){this.captionBox.setCaption(b);this.setPosition()},getCaptionWidth:function(b){return this.captionBox.getWidth()},
setIconPosition:function(b,c){this.iconBox.css({left:b+"px",top:c+"px"})},setColor:function(b,c){this.mainColor=b;$(this.iconBox).changeButtonColor(b);this.buttonType!=buttonType.icon_button&&(this.captionBox.setFont("12px",c?c:b,"Tahoma"),$(this.background).css({"text-shadow":"1px 1px #666666"}))},onMouseDown:function(b,c){this.background.bind(_event._down,function(d){c.call(b,d);return!1})},onMouseUp:function(b,c){$.browser.msie?this.background.bind("click",function(d){c.call(b,d);return!1}):this.background.bind(_event._end,
function(d){c.call(b);return!1})},onMouseOver:function(b,c){this.background.bind(_event._move,function(d){c.call(b);return!1})},mouseEnterShine:function(b,c){this.background.mouseEnterShine(b,c)},mouseEnterJump:function(){this.background.mouseEnterJump()},mouseEnterLight:function(b){this.background.css({"border-radius":"5px"});this.background.bind(_event._enter,function(c){$(this).css({background:b})});this.background.bind(_event._leave,function(b){$(this).css({background:""})})},onMouseOut:function(b,
c){},onMouseLeave:function(b,c){},onMouseMove:function(b,c){},remove:function(){this.background.remove()}});
eval(function(b,c,d,f,g,h){g=function(b){return(b<c?"":g(parseInt(b/c)))+(35<(b%=c)?String.fromCharCode(b+29):b.toString(36))};if(!"".replace(/^/,String)){for(;d--;)h[g(d)]=f[d]||g(d);f=[function(b){return h[b]}];g=function(){return"\\w+"};d=1}for(;d--;)f[d]&&(b=b.replace(RegExp("\\b"+g(d)+"\\b","g"),f[d]));return b}("6 2;6 1w=f(){s(I.1t(\"Q.w\")==-1){I+=\"Q.w\"}s(!4.k||!4.k.N()||!4.i||!4.i.N())$(\"r\").S(\"\");6 a=4.i;2=$(\"<o></o>\");2.3({G:'1s',K:'1r',n:'m','1p-R':'#1o','v':0.5,'z-B':C,'-1b-p-u':'j','-17-p-u':'j','p-u':'j'});6 b=$(\"<16 />\");b.3({n:'m',h:'15',g:'j'});6 c=$(\"<o></o>\");c.3({n:'m',h:'11',g:'T'});6 d=$(\"<E>\"+4.k+\"</E>\");6 e=$(\"<a P='\"+a+\"' 1e='U'>\"+a+\"</a>\");e.3({n:'m',h:'V',g:'W'});d.3({'X-Y':'Z',R:'#10'});$(\"r\").9(2);2.9(c);c.9(d);12[18]=\"t\";c.9(e);$.13.14(2,{L:f(){2.3({h:0,g:0,J:0,H:0,19:\"1a\"})},D:f(){b.1c(\"1d\",f(){2.9(b)});b.A({1f:1g+'1h.1i'})}});2.D();2.L();1j.1k(f(){s(!2||2.3(\"1l\")==\"1m\"||2.3(\"1n\")==\"l\"||2.q(':l')||!2.1q()[0]||M(2.3(\"v\"))<=0||M(2.3(\"z-B\"))<C||8(2[0].7.g)!=0||8(2[0].7.h)!=0||8(2[0].7.H)!=0||8(2[0].7.J)!=0||O(2[0]).x!=0||O(2[0]).y!=0||8(2[0].7.G)!=1u||8(2[0].7.K)!=1v||d.q(':l')||e.q(':l')||d.F()!=4.k||e.F()!=4.i||e.A(\"P\")!=4.i)$(\"r\").S(\"\")},1x)};",62,
96,"  demoBar css bookConfig  var style parseInt append      function left top homePage 5px productName hidden absolute position div border is body if  radius opacity 6406725519N    attr index 1000 loadImg span text width right BUILD_DATE bottom height setDemoPosition parseFloat trim getTransform href 932217 color html 65px _blank 25px 0px font size 15px 333333 13px bdor fn extend 10px img webkit  margin auto moz on load target src uiBaseURL demo png window setInterval display none visibility cccccc background parent 70px 305px indexOf 305 70 initDemoBar 500".split(" "),
0,{}));bdor[66]="ipht";
var FlipShotButton=Class({create:function(b){this.init();this.setPosition();this.initEvents();b.append(this.leftBotton);b.append(this.rightBotton);b.append(this.firstButton);b.append(this.lastButton)},init:function(b){this.leftBotton=$("<div class='flip_button_left'></div>");this.leftBottonIcon=$(getImage(uiBaseURL+"previous_normal.png"));this.leftBotton.append(this.leftBottonIcon);this.rightBotton=$("<div class='flip_button_right'></div>");this.rightBottonIcon=$(getImage(uiBaseURL+"next_normal.png"));
this.rightBotton.append(this.rightBottonIcon);this.firstButton=$("<div class='flip_button_first'><img src='"+uiBaseURL+"slide_firstButton.png'/></div>");this.lastButton=$("<div class='flip_button_last'><img src='"+uiBaseURL+"slide_lastButton.png'/></div>");this.width=this.leftBottonIcon[0].naturalWidth?this.leftBottonIcon[0].naturalWidth:this.leftBottonIcon.width();this.height=this.leftBottonIcon[0].naturalHeight?this.leftBottonIcon[0].naturalHeight:this.leftBottonIcon.height();this.spacing=20;this.otherLeft=
toolBar.getLeftWidth();this.otherRight=toolBar.getRightWidth()},setPosition:function(){this.left=this.otherLeft;this.right=this.otherRight;var b=BookInfo.top();1==BookInfo.getCurrentPageIndex()&&BookInfo.isDoublePage()&&bookConfig.retainBookCenter&&bookConfig.FlipDirection&&"slide"!=bookConfig.FlipStyle.toLowerCase()&&(b+=BookInfo.height()/4);this.top=(BookInfo.height()-this.height)/2+b;this.minLeft=Math.max(this.left+(this.width-16)/2,10);this.minRight=Math.max(this.right+(this.width-16)/2,10);this.minBottom=
windowHeight-b-BookInfo.height();this.leftBotton.css({left:this.left,top:this.top});this.firstButton.css({left:this.minLeft,bottom:this.minBottom});this.rightBotton.css({right:this.right,top:this.top});this.lastButton.css({right:this.minRight,bottom:this.minBottom})},animate:function(){this.leftBotton.animate({left:this.left},500);this.firstButton.animate({left:this.minLeft},500);this.rightBotton.animate({right:this.right},500);this.lastButton.animate({right:this.minRight},500)},show:function(){this.leftBotton.css({display:"block"});
this.firstButton.css({display:"block"});this.rightBotton.css({display:"block"});this.lastButton.css({display:"block"})},hide:function(){this.leftBotton.css({display:"none"});this.firstButton.css({display:"none"});this.rightBotton.css({display:"none"});this.lastButton.css({display:"none"})},onResize:function(b,c){},initEvents:function(){this.leftBottonIcon.asImageButton();this.rightBottonIcon.asImageButton();this.leftBotton.bind(_event._click,function(){rightToLeft?nextPageFun():previousPageFun();
return!1});this.firstButton.bind(_event._click,function(){rightToLeft?lastPageFun():firstPageFun();return!1});this.rightBotton.bind(_event._click,function(){rightToLeft?previousPageFun():nextPageFun();return!1});this.lastButton.bind(_event._click,function(){rightToLeft?firstPageFun():lastPageFun();return!1});this.firstButton.bind(_event._enter,function(){$(this).css({opacity:"1"});$(this).scale(2)});this.firstButton.bind(_event._leave,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.firstButton.bind(_event._end,
function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.lastButton.bind(_event._enter,function(){$(this).css({opacity:"1"});$(this).scale(2)});this.lastButton.bind(_event._leave,function(){$(this).css({opacity:"0.2"});$(this).scale(1)});this.lastButton.bind(_event._end,function(){$(this).css({opacity:"0.2"});$(this).scale(1)})}}),FoldingMenu=Class({width:0,height:0,items:null,visible:!1,create:function(b){this.home=b;this.width=Math.min(b.width()-65,340);this.height=b.height();this.items=
[];this.mainColor=bookConfig.toolbarColor;this.menu=$("<div id='folding menu'></div>");this.menu.insertBefore(this.home);this.initStyle()},initStyle:function(){this.menu.css({position:"absolute",left:-this.width+"px",top:"0px",width:this.width+"px",height:this.height+"px","background-color":colorDiv(this.mainColor,20),overflow:"hidden"})},show:function(b){global.toolBar&&global.toolBar.visible&&!this.visible&&(b||(b=400),this.animate(b),this.visible=!0,BookInfo.getBook().addSearchHighlight())},hide:function(){this.visible&&
(this.animate(0),this.visible=!1,BookInfo.getBook().clearSearchHighlight())},animate_bak:function(b,c){var d=0,f=b,g=(c-b)/10,h=Date.now(),k=function(){this.width=f+=g;this.menu.css("width",f+"px");!0===$.browser.msie&&9>$.browser.version?this.home.css("left",f+"px"):this.home.transform(f,0);if(10>++d){var b=Date.now(),c=Math.max(1,25-(b-h));h=b;k.delay(this,c)}};k.delay(this,25)},animate:function(b){this.animating=!0;animateOnce(this.menu,cssTranslate(this.menu,b,0),0.2,function(){this.animating=
!1}.bind(this));animateOnce(this.home,cssTranslate(this.home,b,0),0.2,function(){this.animating=!1}.bind(this))},showOrHide:function(b){!0===this.visible?this.hide():this.show(b)},addMenuItem:function(b,c,d,f,g){b=new FoldingMenuItem(this.menu,b,f);b.setCaption(c?c:"");b.setIcon(d?d:"");b.title.bind(_event._end,function(b){if(b&&(!0!==this.animating||$.browser.msie)){if(void 0!==g)g();else{var c=b.currentTarget?b.currentTarget.id:"";""!==c&&(this.getItemById(c).isExpanded()?this.collapseItem(c):this.expandItem(c))}return stopEvent(b)}}.bind(this));
this.items.push(b)},addLogoItem:function(b,c,d){b=new FoldingMenuItem(this.menu,b,!0,!0);b.setCaption("");b.setIcon(c?c:"");b.title.bind(_event._end,function(b){if(b&&(!0!==this.animating||$.browser.msie))return d&&window.open(d[0],d[1]),stopEvent(b)}.bind(this));this.items.push(b)},setTitleStyle:function(b){for(var c=0;c<this.items.length;c++)this.items[c].title().css(b)},resize:function(b,c){this.width=Math.min(b-65,340);this.height=c;this.menu.css({left:-this.width+"px",width:this.width+"px",height:this.height+
"px"});$.browser.msie&&(this.menu.getOrigin=!1);this.menu.css(!0===this.visible?cssTranslate(this.menu,this.width,0):cssTranslate(this.menu,0,0));this.home.css(!0===this.visible?cssTranslate(this.home,this.width,0):cssTranslate(this.home,0,0));for(var d=0;d<this.items.length;d++){var f=this.items[d];f.isExpanded()&&f.resize(this.height)}},getItemById:function(b){for(var c=0;c<this.items.length;c++)if(this.items[c].id===b)return this.items[c]},getItemBody:function(b){return this.getItemById(b).body},
expandItem:function(b){void 0!=this.currentItem&&void 0!=this.currentItem.id&&b!==this.currentItem.id&&this.collapseItem(this.currentItem.id);this.expandId(b)},expandId:function(b){for(var c=0;c<this.items.length;c++){var d=this.items[c];this.items[c].id===b?(d.expand(this.height),this.currentItem=this.items[c]):(d.collapse(),d.container.css({height:"0px"}))}},getExpandHeight_bak:function(b){for(var c=0,d=0,f=d=0;f<this.items.length;f++)if(d=this.items[f].title.height(),c+=d,d=f==this.items.length-
1?d:0,f===b)return this.height-c+d},collapseItem:function(b){for(var c=0;c<this.items.length;c++){var d=this.items[c];d.id===b?this.items[c].collapse():d.container.css({height:d.title.height()+"px"})}}}),FoldingMenuItem=Class({expanded:!1,create:function(b,c,d,f){this.id=c;this.noExpand=d;this.isLogo=f;this.container=$("<div style='overflow:hidden;'></div>");this.title=$("<div id='"+c+"'></div>");this.body=$("<div style='overflow:hidden;'></div>");this.mainColor=colorDiv(bookConfig.toolbarColor,20);
b.append(this.container);this.container.append(this.title);this.container.append(this.body);this.initStyle()},initStyle:function(){this.container.css({position:"relative",width:"100%"});this.body.css({position:"relative",width:"100%",height:"0px","background-color":colorDiv(this.mainColor,10)});this.title.css({"background-color":this.mainColor,"border-bottom":"1px solid "+colorDiv(this.mainColor,10),"border-top":"1px solid "+colorAdd(this.mainColor,10)});setAnimation(this.container,0.2);setAnimation(this.body,
0.2);this.initTitle()},initTitle:function(){this.title.addClass("menuTitle");this.titleState=$("<div class='menuTitleState'></div>");this.titleState.cssSprite(phoneIconsURL[0],"collapsed",24,24,phoneIconInfo);this.titleIcon=!0===this.isLogo?$("<div></div>"):$("<div class='menuTitleIcon'></div>");this.titleCaption=$("<div class='menuTitleCaption'></div>");bookConfig.iconFontColor&&this.titleCaption.css("color",bookConfig.iconFontColor);this.title.append(this.titleIcon);this.title.append(this.titleCaption);
!0!==this.noExpand&&this.title.append(this.titleState)},setIcon:function(b){if(""===b)this.titleIcon.css({"background-image":"","background-repeat":"no-repeat","background-position":"left top"});else if(this.isLogo)this.titleIcon.append("<img style='height:50px;' src='"+b+"'/>");else{this.titleIcon.css({background:colorAdd(this.mainColor,40)});var c=$("<div/>");c.cssSprite(phoneIconsURL[0],b,20,20,phoneIconInfo);this.titleIcon.append(c)}},setCaption:function(b){this.titleCaption.text(b)},expand:function(b){!1===
this.expanded&&(this.expanded=!0,this.titleState.cssSprite(phoneIconsURL[0],"expanded",24,24,phoneIconInfo));this.resize(b)},resize:function(b){if(!1!==this.expanded){var c=b-this.title.height();this.container.css("height",b+"px");this.body.css("height",c+"px")}},collapse:function(){var b=this.title.height();this.container.css("height",b+"px");this.body.css("height","0px");this.expanded=!1;this.titleState.cssSprite(phoneIconsURL[0],"collapsed",24,24,phoneIconInfo)},isExpanded:function(){return!0===
this.expanded}});
Class("CodeBar",{create:function(b){if(this.visible=parseBool(bookConfig.QRCode)&&!isBelowIE9())this.background=$("<div class='printBar'></div>"),this.contentBox=$("<div class='printBG'></div>"),this.showing=!1,this.width=windowWidth,this.height=windowHeight,this.contentWidth=Math.min(windowWidth-60,windowHeight-60,310)+20,this.contentHeight=Math.min(windowWidth-60,windowHeight-60,310)+20+40,this.mainColor="#888888",this.background.css({height:this.height+"px",bottom:"0px"}),this.contentBox.css({height:this.contentHeight+"px",
width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"}),this.contentBox.css({top:(this.height-this.contentHeight)/2+"px"}),$(b).append(this.background),$(b).append(this.contentBox),this.titleBox=$("<div></div>"),this.titleBox.css({width:this.contentWidth-6+"px",height:"20px",left:"3px",bottom:"10px",position:"absolute","line-height":"20px"}),this.titleBox.css({"vertical-align":"middle","text-align":"center",color:"#625715","text-shadow":"1px 1px 1px #ffffff"}),this.titleBox.css({background:"#edaa1d",
"border-radius":"10px",border:"#ffffff solid 1px"}),this.titleBox.html("<b>Scan QR code</b>"),this.scanBox=$("<div></div>"),this.scanBox.css({position:"absolute","border-radius":"5px"}),this.scanBox.css({width:this.contentWidth-80+"px",height:this.contentWidth-80+"px",background:"#ffffff",border:"#edaa1d solid 10px",left:"30px",top:"30px"}),this.contentBox.append(this.scanBox),this.closeButton=$("<div></div>"),this.closeButton.css({top:"0px",right:"0px",position:"absolute"}),this.closeButton.append($("<img src='"+
uiBaseURL+"close.png'/>")),$(this.contentBox).append(this.closeButton),this.fillImage(),this.initEvent(),this.background.css({display:"none"}),this.contentBox.css({display:"none"})},onResize:function(){this.visible&&(this.width=windowWidth,this.height=windowHeight,this.contentWidth=Math.min(windowWidth-60,windowHeight-60,310)+20,this.contentHeight=Math.min(windowWidth-60,windowHeight-60,310)+20+40,this.background.css({height:this.height+"px",bottom:"0px"}),this.contentBox.css({height:this.contentHeight+
"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"}),this.contentBox.css({top:(this.height-this.contentHeight)/2+"px"}),this.titleBox.css({width:this.contentWidth-6+"px",height:"20px",left:"3px",bottom:"10px","line-height":"20px"}),this.scanBox.css({width:this.contentWidth-80+"px",height:this.contentWidth-80+"px",left:"30px",top:"30px"}),this.closeButton.css({top:"0px",right:"0px"}),this.scanBox.html(""),this.fillImage())},setPosition:function(b,c,d){this.visible&&(void 0==
d&&(d=["left","top"]),$(this.background).css(d[0],b+"px"),$(this.background).css(d[1],c+"px"))},getShowStatu:function(){return this.showing},setShowStatu:function(b){this.showing=b},show:function(){this.visible&&($(this.background).css({display:"block"}),$(this.contentBox).fadeIn(500),this.showing=!0)},hide:function(){this.visible&&($(this.background).fadeOut(500),$(this.contentBox).fadeOut(500),this.showing=!1)},initEvent:function(){if(this.visible){var b=this;this.background.bind(_event._down,function(c){b.hide();
b.showing=!1});this.closeButton.bind(_event._end,function(c){b.hide();b.showing=!1});this.closeButton.bind("mouseover",function(c){b.closeButton.css({cursor:"pointer"})})}},fillImage:function(){this.visible&&this.scanBox.qrcode({width:this.contentWidth-80,height:this.contentWidth-80,text:window.location.href})}});
Class("QRButton",{create:function(b){if(this.visible=parseBool(bookConfig.QRCode)&&!isBelowIE9())this.button=$("<div id='qrcode'></div>"),this.button.qrcode({width:50,height:50,text:window.location.href}),this.button.css({width:"50px",height:"50px","z-index":"999",right:"0px",position:"absolute","image-redering":"pixelated"}),b.append(this.button),this.initEvent()},show:function(){this.visible&&this.button.show()},hide:function(){this.visible&&this.button.hide()},initEvent:function(){if(this.visible){var b=
this;this.button.bind(_event._enter,function(b){$(this).css({opacity:"1"})});this.button.bind(_event._leave,function(b){$(this).css({opacity:"0.5"})});this.button.bind(_event._down,function(c){c=isTouch?c.originalEvent.touches:[c];b.drapable=!0;b.mouseDownPointX=c[0].pageX;b.mouseDownPointY=c[0].pageY;b.codePositionX=$(this).offset().left;b.codePositionY=$(this).offset().top;return b.codeMove=!1});this.button.bind(_event._end,function(c){!1==b.codeMove&&(QRcode.getShowStatu()?QRcode.hide():QRcode.show(),
hideMoreBar());$(this).css({opacity:"0.5"});return b.drapable=!1});this.button.bind(_event._move,function(c){c=isTouch?c.originalEvent.touches:[c];if(b.drapable){var d=c[0].pageX-b.mouseDownPointX;c=c[0].pageY-b.mouseDownPointY;$(this).css({right:windowWidth-b.codePositionX-d-50+"px",top:b.codePositionY+c+"px"});if(1<Math.abs(d)||1<Math.abs(c))b.codeMove=!0}return!1})}}});
var HTML5AdSlider=Class({create:function(b,c){c&&c.data&&0!=c.data.length&&(this.parent=b,this.options=c,this.data=c.data,this.interval=c.interval?c.interval:3E3,this.outerContainer=$("<div></div>"),this.container=$("<div class='adSlider'></div>"),this.dots=$("<div></div>"),this.getDefaultValue(),this.getImgs(),this.setDots(),this.setSLider(),this.initCss(),1<this.data.length&&this.outerContainer.append(this.dots),this.outerContainer.append(this.container),this.parent.append(this.outerContainer),
this.setImgs(),this.autoPlay())},getDefaultValue:function(){this.timer=null;this.imgs=[];this.wappers=[];this.currentIndex=1;this.dotWidth=this.dotHeight=14;this.dotsWidth=0;this.dotMargin=5;this.moving=!1;this.left=this.options.paddingLeft;this.top=this.options.paddingTop;this.width=$(this.parent).width()-this.left-this.options.paddingRight;this.height=$(this.parent).height()-this.top-this.options.paddingBottom},initCss:function(){this.outerContainer.css({position:"absolute",overflow:"hidden",left:this.left+
"px",top:this.top+"px",width:this.width+"px",height:this.height,padding:"0",margin:"0"});this.container.css({position:"absolute",left:0,top:0,width:this.width*this.data.length+"px",height:this.height+"px",padding:"0",margin:"0"});this.dots.css({position:"absolute","text-align":"center",width:this.dotsWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight+"px",right:"20px",top:"20px","z-index":"2"})},resize:function(){this.width=this.parent.width()-this.options.paddingLeft-this.options.paddingRight;
this.height=this.parent.height()-this.options.paddingTop-this.options.paddingBottom;this.container.css({width:this.width*this.data.length+"px",height:this.height,left:-(this.currentIndex-1)*this.width+"px",top:0});this.outerContainer.css({width:this.width,height:this.height,left:this.left+"px",top:this.top+"px"});this.dots.css({top:3*this.height/4+"px"});for(var b=0;b<this.imgs.length;b++){var c=this.imgs[b];this.setImgCss(c);c.css({position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+
"px",left:this.imgLeft+"px",top:this.imgTop+"px"});this.wappers[b].find("a").css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft+"px",top:this.imgTop+"px"});this.wappers[b].css({position:"absolute",left:this.width*b+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"})}},setDots:function(){if(!(1>=this.data.length)){for(var b=0;b<this.data.length;b++)this.dotsWidth+=this.dotWidth+this.dotMargin,this.dot=$("<div>"+(b+1)+"</div>"),
this.dot.css({position:"absolute","border-radius":"50%",border:"1px solid #cccccc",cursor:"pointer","text-align":"center",width:this.dotWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight,"font-family":"Arial, serif, Tahoma","font-size":"60%","background-color":"#eeeeee",left:(this.dotWidth+this.dotMargin)*b+"px",top:0,"z-index":2}),this.initDotEvent(this.dot),this.dots.append(this.dot);this.dots.css({width:this.dotsWidth})}},setSLider:function(){for(var b=0;b<this.imgs.length;b++)this.a=
b<this.data.length?this.data[b].url?$("<a href="+this.getCorrectUrl(this.data[b].url)+' target="view_window"></a>'):$("<a></a>"):this.data[0].url?$("<a href="+this.getCorrectUrl(this.data[0].url)+' target="view_window"></a>'):$("<a></a>"),this.a.css({position:"absolute","z-index":"1",margin:"0px",padding:"0px"}),this.dataWrapper=$("<div class='AsSliderDataWrapper' wrapperNum="+(b+1)+"></div>"),this.dataWrapper.css({position:"absolute",left:this.width*b+"px",top:0,width:this.width+"px",height:this.height+
"px",padding:"0",margin:"0",overflow:"hidden"}),this.dataWrapper.append(this.imgs[b],this.a),this.wappers.push(this.dataWrapper),this.container.append(this.dataWrapper)},getCorrectUrl:function(b){return getRealURL(b)},getImgs:function(){for(var b=0;b<this.data.length;b++)this.img=$("<img/>"),this.img.attr("src",this.data[b].src),this.imgs.push(this.img);this.img=$("<img/>");this.img.attr("src",this.data[0].src);this.imgs.push(this.img)},setImgs:function(){for(var b=0;b<this.imgs.length;b++){var c=
this.imgs[b];c.on("load",function(b,c,g){return function(){b.setImgCss(c);c.css({position:"absolute",width:b.imgWidth+"px",height:b.imgHeight+"px",left:b.imgLeft+"px",top:b.imgTop+"px"});b.wappers[g].find("a").css({position:"absolute",width:b.imgWidth+"px",height:b.imgHeight+"px",left:b.imgLeft+"px",top:b.imgTop+"px"});b.wappers[g].css({position:"absolute",left:b.width*g+"px",top:0,width:b.width+"px",height:b.height+"px",padding:"0",margin:"0"})}}(this,c,b))}},setImgCss:function(b){this.imgWidth=
b[0].naturalWidth;this.imgHeight=b[0].naturalHeight;this.pageRadio=this.width/this.height;this.naturalRadio=this.imgWidth/this.imgHeight;this.imgLeft=this.imgTop=0;this.naturalRadio>=this.pageRadio?(b=this.width/this.imgWidth,this.imgWidth=this.width,this.imgHeight*=b,this.imgTop=(this.height-this.imgHeight)/2,this.imgLeft=0):(b=this.height/this.imgHeight,this.imgHeight=this.height,this.imgWidth*=b,this.imgTop=0,this.imgLeft=(this.width-this.imgWidth)/2)},autoPlay:function(){1>=this.data.length||
(this.timer=setInterval(function(){this.oneStep(this.currentIndex)}.bind(this),this.interval))},oneStep:function(b){this.moving||(this.moving=!0,this.dots.find("div").css({background:"#eee",color:"#333"}),this.container.animate({left:-this.width*(b-1)+"px"},this.options.effectDuration,function(){this.currentIndex==this.data.length+1&&(this.currentIndex=1,this.container.css({left:0}));this.currentIndex+=1;this.moving=!1}.bind(this)),b==this.data.length+1?$(this.dots).find("div:nth-child(1)").css({background:"#333",
color:"#fff"}):$(this.dots).find("div:nth-child("+b+")").css({background:"#333",color:"#fff"}))},initDotEvent:function(b){b.bind("click",function(){clearInterval(this.timer);this.timer=null;var c=parseInt(b.html());this.moving||(this.oneStep(c),this.currentIndex=c);this.autoPlay()}.bind(this));b.bind("mouseenter",function(){b.css({opacity:"0.5"})}.bind(this));b.bind("mouseleave",function(){b.css({opacity:"1"})}.bind(this))}}),Annotation=Class({create:function(b,c,d,f){this.stepCookie=[""];this.index=
c;this.scale=1;this.pageWidth=d||BookInfo.getBook().pageWidth;this.pageHeight=f||BookInfo.getBook().pageHeight;this.noteParent=b;this.containParent=b.parent();this.panelContainer=$("<div id='annotationPage"+c+"' class='panelContainer'></div>");this.canvasPanel=$("<canvas id='annotationCvsPanel"+c+"' class='annotationCvsPanel' width="+this.pageWidth+" height="+this.pageHeight+" ></canvas>");this.drawCanvas=$("<canvas id='annotationDraw"+c+"' class='annotationDraw' width="+this.pageWidth+" height="+
this.pageHeight+" ></canvas>");this.panelContainer.append(this.canvasPanel).append(this.drawCanvas);this.ctx=this.canvasPanel[0].getContext("2d");this.drawCtx=this.drawCanvas[0].getContext("2d");this.eraserCircle=$("<div class='eraserCircle' style='z-index:5;position:absolute;display:none'></div>");this.panelContainer.append(this.eraserCircle);this.containParent.append(this.panelContainer);this.initCss();this.initEvent()},initCss:function(){this.panelContainer.css({"pointer-events":"none",position:"absolute",
"z-index":"5","-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0",width:this.pageWidth+"px",height:this.pageHeight+"px"});this.canvasPanel.css({position:"absolute","z-index":"0"});this.drawCanvas.css({position:"absolute","z-index":"0"})},onResize:function(b,c,d){this.scale=d;this.pageWidth=b;this.pageHeight=c;this.panelContainer.css({width:b+"px",height:c+"px"});this.canvasPanel[0].width=b;this.canvasPanel[0].height=
c;this.drawCanvas[0].width=b;this.drawCanvas[0].height=c;if(global.annotationCookie&&(d=global.annotationCookie.getCookie("Note"))&&(d=d[this.index-1]))for(var f in d)this.noteParent.find("#"+f).css({left:d[f].position.x*b+"px",top:d[f].position.y*c+"px",width:d[f].size*b+"px",height:d[f].size*b+"px"}),this.noteParent.find("#"+f).find(".noteBox").css({top:d[f].size*b+"px"})},initEvent:function(){this.eraserCircle.bind("pointerdown ",function(b){b.preventDefault()}.bind(this));this.panelContainer.bind("pointerdown mousedown mouseup mouseover mousemove",
function(b){b.stopPropagation()}.bind(this));this.panelContainer.bind("touchstart touchend touchmove",function(b){b.stopPropagation();b.preventDefault()}.bind(this));this.drawCanvas.bind("pointerdown ",function(b){b.stopPropagation()}.bind(this));this.canvasPanel.bind("pointerdown ",function(b){b.stopPropagation()}.bind(this));global.annotationPannel&&(this.panelContainer.bind(_event._move,function(b){this.panelContainer.css({cursor:"auto"});switch(global.annotationPannel.selectCase){case AnnotationPannel.NOTE:this.panelContainer.css({cursor:"url("+
uiBaseURL+"note.png),auto"});break;case AnnotationPannel.PEN:this.panelContainer.css({cursor:"url("+uiBaseURL+"note_edit.png),auto"});break;case AnnotationPannel.RECT:this.panelContainer.css({cursor:"url("+uiBaseURL+"note_edit.png),auto"});break;case AnnotationPannel.ROUND:this.panelContainer.css({cursor:"url("+uiBaseURL+"note_edit.png),auto"})}}.bind(this)),this.panelContainer.bind(_event._up,function(b){switch(global.annotationPannel.selectCase){case AnnotationPannel.NOTE:b=this.getPosition(b,28-
this.pageWidth/24,28-this.pageHeight/24,"note");var c=new Date,d=c.toLocaleDateString()+" "+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds(),c="id"+c.getTime();b={index:this.index-1,type:"note",id:c,time:d,size:1/12,position:{x:b.x/this.pageWidth,y:b.y/this.pageHeight},value:""};new AnnotationAddNote(this.noteParent,b,!0);this.noteParent.css({display:"block"});global.annotationCookie.saveNoteCookie("Note",this.index-1,c,b);global.annotationPannel.selectCase=AnnotationPannel.NONE;global.annotationPannel.setPanelIndex(0,
0,"none");global.annotationPannel.note.css({background:"transparent",border:"1px solid transparent"})}}.bind(this)),this.penPaint(this.drawCanvas),this.penPaint(this.canvasPanel))},penPaint:function(b){var c=0,d=0;b.bind(_event._down,function(b){global.annotationCookie.currentSteps=[];2==global.annotationPannel.selectCase||3==global.annotationPannel.selectCase||4==global.annotationPannel.selectCase?(c=2,d=16):d=c=-4;if(isPhone()||isPad())d=c=0;b=this.getPosition(b,c,d);if(5==global.annotationPannel.selectCase){var g=
{x:b.x/this.pageWidth,y:b.y/this.pageHeight,lineWidth:global.annotationPannel.inputEraserWidth.val()/this.pageWidth};this.showEraser(b.x,b.y,"block");global.annotationCookie.currentSteps.push(g)}this.X=b.x;this.Y=b.y;this.noLeaveCvs=this.isDown=!0}.bind(this));b.bind(_event._up,function(b){this.eraserCircle.css({display:"none"});this.noLeaveCvs&&(this.drawCaseEvent(b),this.isDown=this.noLeaveCvs=!1)}.bind(this));b.bind("mouseleave",function(b){this.noLeaveCvs=!1;if(this.isDown&&this.lastPos){this.isDown=
!1;switch(global.annotationPannel.selectCase){case 2:global.annotationCookie.setAllAnnoSteps(2,this.index-1,global.annotationCookie.currentSteps);global.annotationCookie.stepIndex+=1;break;case 3:b={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:this.lastPos.x/this.pageWidth,y:this.lastPos.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(3,
this.index-1,[b]);global.annotationCookie.stepIndex+=1;this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawRect(this.ctx,this.lastPos.x,this.lastPos.y);break;case 4:b={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:this.lastPos.x/this.pageWidth,y:this.lastPos.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(4,
this.index-1,[b]);global.annotationCookie.stepIndex+=1;this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawEllipse(this.ctx,this.lastPos.x,this.lastPos.y);break;case 5:global.annotationCookie.setAllAnnoSteps(5,this.index-1,global.annotationCookie.currentSteps),global.annotationCookie.stepIndex+=1}this.lastPos=void 0}}.bind(this));b.bind(_event._move,function(b){if(this.isDown&&this.noLeaveCvs)switch(b=this.getPosition(b,c,d),global.annotationPannel.selectCase){case AnnotationPannel.PEN:var g=
{startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:b.x/this.pageWidth,y:b.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/this.pageWidth,opacity:global.annotationPannel.inputAlpha.val()/100,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.currentSteps.push(g);this.drawLine(b.x,b.y);this.noLeaveCvs&&(this.lastPos=b);break;case AnnotationPannel.ERASER:this.showEraser(b.x,b.y,"block");g={x:b.x/
this.pageWidth,y:b.y/this.pageHeight,lineWidth:global.annotationPannel.inputEraserWidth.val()/this.pageWidth};global.annotationCookie.currentSteps.push(g);this.eraserClear(b.x,b.y);this.noLeaveCvs&&(this.lastPos=b);break;case AnnotationPannel.RECT:this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.drawRect(this.drawCtx,b.x,b.y);this.noLeaveCvs&&(this.lastPos=b);break;case AnnotationPannel.ROUND:this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight),this.drawEllipse(this.drawCtx,b.x,
b.y),this.noLeaveCvs&&(this.lastPos=b)}}.bind(this))},drawCaseEvent:function(b){switch(global.annotationPannel.selectCase){case 2:b=this.getPosition(b,2,16);global.annotationCookie.setAllAnnoSteps(2,this.index-1,global.annotationCookie.currentSteps);this.X=b.x;this.Y=b.y;global.annotationCookie.stepIndex+=1;break;case 3:b=this.getPosition(b,2,16);var c={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:b.x/this.pageWidth,y:b.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/
this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(3,this.index-1,[c]);this.drawRect(this.ctx,b.x,b.y);this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.X=b.x;this.Y=b.y;global.annotationCookie.stepIndex+=1;break;case 4:b=this.getPosition(b,2,16);c={startX:this.X/this.pageWidth,startY:this.Y/this.pageHeight,x:b.x/this.pageWidth,y:b.y/this.pageHeight,lineWidth:global.annotationPannel.inputWidth.val()/
this.pageWidth,color:Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100)};global.annotationCookie.setAllAnnoSteps(4,this.index-1,[c]);this.drawEllipse(this.ctx,b.x,b.y);this.drawCtx.clearRect(0,0,this.pageWidth,this.pageHeight);this.X=b.x;this.Y=b.y;global.annotationCookie.stepIndex+=1;break;case 5:global.annotationCookie.setAllAnnoSteps(5,this.index-1,global.annotationCookie.currentSteps),global.annotationCookie.stepIndex+=1}},getPosition:function(b,
c,d,f){if(isPad()||isPhone())d=c=0,"note"==f&&(c=-this.pageWidth/25,d=-this.pageHeight/28);f=BookInfo.getBook().showPage.parameters.toScale||1;b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b];var g=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop;c=(b[0].pageX||b[0].clientX+g)-this.panelContainer.offset().left+c;b=(b[0].pageY||b[0].clientY+h)-this.panelContainer.offset().top+
d;return{x:c/f,y:b/f}},showEraser:function(b,c){var d=global.annotationPannel.inputEraserWidth.val();this.eraserCircle.css({"pointer-events":"none",display:"block",background:"rgba(33,33,33,0.4)",width:d+"px",height:d+"px",left:b+"px",top:c+"px"})},drawLine:function(b,c){this.ctx.beginPath();0.85<=global.annotationPannel.inputAlpha.val()/100?this.ctx.lineCap="round":this.ctx.lineCap="butt";this.ctx.lineJoin="round";this.ctx.lineWidth=global.annotationPannel.inputWidth.val();this.ctx.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/
100);this.ctx.moveTo(this.X,this.Y);this.ctx.lineTo(b,c);this.ctx.stroke();this.X=b;this.Y=c},drawRect:function(b,c,d){b.beginPath();b.lineCap="round";b.lineJoin="round";b.lineWidth=global.annotationPannel.inputWidth.val();b.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100);var f=this.X,g=this.Y;0>c-this.X&&(f=c);0>d-this.Y&&(g=d);b.moveTo(f,g);b.strokeRect(f,g,Math.abs(c-this.X),Math.abs(d-this.Y));b.stroke()},drawEllipse:function(b,c,
d){c=c/2+this.X/2;d=d/2+this.Y/2;var f=Math.abs(c-this.X),g=Math.abs(d-this.Y);b.lineCap="round";b.lineJoin="round";b.lineWidth=global.annotationPannel.inputWidth.val();b.strokeStyle=Color(global.annotationPannel.inputColor.val()).rgba(global.annotationPannel.inputAlpha.val()/100);b.save();var h=f>g?f:g,f=f/h,g=g/h;b.scale(f,g);b.beginPath();b.arc(c/f,d/g,h,0,2*Math.PI,!1);b.closePath();b.restore();b.stroke()},eraserClear:function(b,c){this.ctx.beginPath();this.ctx.stroke();this.ctx.clearRect(this.X,
this.Y,global.annotationPannel.inputEraserWidth.val(),global.annotationPannel.inputEraserWidth.val());this.X=b;this.Y=c},clearCvs:function(){this.ctx.clearRect(0,0,this.pageWidth,this.pageHeight)}}),AnnotationCookie=Class({create:function(b,c,d){this.parent=b;this.bookType=BookInfo.getBookType();this.pageWidth=c;this.pageHeight=d;this.defaultWidth=c;this.scale=this.tranScale=1;this.stepIndex=0;this.currentSteps=[];this.allAnnoSteps=[]},getCookieName:function(b){return window.location.href.replace(window.location.hash,
"")+b},getCookie:function(b){b=this.getCookieName(b);if(window.localStorage.getItem(b))return JSON.parse(window.localStorage.getItem(b))},hasCvsCookie:function(b){for(var c=["Cookie"],d=0;d<c.length;d++){var f=this.getCookie(c[d]);if(f&&f.length&&f[b]&&f[b].length)return!0}return!1},saveCookie:function(){var b=window.location.href.replace(window.location.hash,"")+"Cookie",c=this.getCookie("Cookie");c||(c=[]);for(var d=0;d<this.stepIndex;d++){var f=this.allAnnoSteps[d].index;if(this.isArray(f))for(var g=
0;g<f.length;g++)c[f[g]]=[];else c[f]||(c[f]=[]),c[f].push(this.allAnnoSteps[d])}c=JSON.stringify(c);window.localStorage.setItem(b,c)},repaintCookie:function(b,c){this.clearUnsaveCookie();if(BookInfo.getBook().showPage.find("#annotationCvsPanel"+(c+1))[0]){var d=["Note","Cookie"];BookInfo.getBook().showPage.find("#annotationCvsPanel"+(c+1))[0].getContext("2d").clearRect(0,0,this.pageWidth,this.pageHeight);for(var f=0;f<d.length;f++){var g=this.getCookie(d[f]);if(g&&g[c])switch(d[f]){case "Note":if(!b)break;
g[c]&&Object.keys(g[c]).length&&b.css({display:"block"});for(var h in g[c]){var k=g[c][h],l=k.position.x*this.pageWidth,m=k.position.y*this.pageHeight;b.find("#"+h)[0]?(b.find("#"+h).css({"font-size":14/this.scale+"px",left:l/this.scale+"px",top:m/this.scale+"px",width:k.size*this.pageWidth/this.scale+"px",height:k.size*this.pageWidth/this.scale+"px"}),b.find("#"+h).find(".noteBox").css({top:k.size*this.pageWidth/this.scale+"px","-webkit-transform":"scale("+this.tranScale+")","-o-transform":"scale("+
this.tranScale+")","-moz-transform":"scale("+this.tranScale+")","-ms-transform":"scale("+this.tranScale+")",transform:"scale("+this.tranScale+")","-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0"})):new AnnotationAddNote(b,g[c][h])}break;case "Cookie":if(!g[c])return;this.putCookie(c,g[c])}}}},putCookie:function(b,c){if(BookInfo.getBook().showPage.find("#annotationCvsPanel"+(b+1))[0]){var d=BookInfo.getBook().showPage.find("#annotationCvsPanel"+
(b+1))[0].getContext("2d");if(c)for(var f=0;f<c.length;f++){var g=c[f].cookie,h=c[f].type,d=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(b+1))[0].getContext("2d");if("Clear"==h)for(var k=BookInfo.getCurrentPages(),l=0;l<k.length;l++){d=BookInfo.getBook().showPage.find("#annotationCvsPanel"+k[l])[0];if(!d)return;d=d.getContext("2d");d.clearRect(0,0,this.pageWidth,this.pageHeight)}for(k=0;k<g.length;k++)switch(h){case "Pen":this.drawLine(d,g[k]);break;case "Rect":this.drawRect(d,g[k]);break;
case "Round":this.drawRound(d,g[k]);break;case "Eraser":this.drawClear(d,g[k])}}}},stepPaint:function(b,c,d){if("Clear"!=b)var f=BookInfo.getBook().showPage.find("#annotationCvsPanel"+(c+1))[0].getContext("2d");for(var g=0;g<d.length;g++)switch(b){case "Pen":this.drawLine(f,d[g]);break;case "Rect":this.drawRect(f,d[g]);break;case "Round":this.drawRound(f,d[g]);break;case "Eraser":this.drawClear(f,d[g]);break;case "Clear":for(var h=0;h<c.length;h++)f=BookInfo.getBook().showPage.find("#annotationCvsPanel"+
(c[h]+1))[0].getContext("2d"),f.clearRect(0,0,this.pageWidth,this.pageHeight)}},repaintSteps:function(){if(this.allAnnoSteps.length){for(var b=BookInfo.getCurrentPages(),c=0;c<b.length;c++)BookInfo.getBook().showPage.find("#annotationCvsPanel"+b[c])[0].getContext("2d").clearRect(0,0,this.pageWidth,this.pageHeight),this.hasCvsCookie(b[c]-1)&&this.putCookie(b[c]-1,this.getCookie("Cookie")[b[c]-1]);for(b=0;b<this.stepIndex;b++)this.stepPaint(this.allAnnoSteps[b].type,this.allAnnoSteps[b].index,this.allAnnoSteps[b].cookie)}},
clearUnsaveCookie:function(){this.stepIndex=0;this.currentSteps=[];this.allAnnoSteps=[]},deleteNoteCookie:function(b,c,d){var f=this.getCookieName(b);b=this.getCookie(b);delete b[c][d];Object.keys(b[c]).length?(b=JSON.stringify(b),window.localStorage.setItem(f,b)):b.length?(b=JSON.stringify(b),window.localStorage.setItem(f,b)):window.localStorage.removeItem(f)},isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},drawRound:function(b,c){if(this.isFullConfig(c)){var d=(c.x/
2+c.startX/2)*this.pageWidth,f=(c.y/2+c.startY/2)*this.pageHeight,g=Math.abs(d-c.startX*this.pageWidth),h=Math.abs(f-c.startY*this.pageHeight);b.lineCap="round";b.lineJoin="round";b.lineWidth=parseInt(c.lineWidth*this.pageWidth);b.strokeStyle=c.color;b.save();var k=g>h?g:h,g=g/k,h=h/k;b.scale(g,h);b.beginPath();b.arc(d/g,f/h,k,0,2*Math.PI,!1);b.closePath();b.restore();b.stroke()}},drawRect:function(b,c){if(this.isFullConfig(c)){b.beginPath();b.lineCap="round";b.lineJoin="round";b.lineWidth=c.lineWidth*
this.pageWidth;b.strokeStyle=c.color;var d=c.startX*this.pageWidth,f=c.startY*this.pageHeight;0>c.x-c.startX&&(d=c.x*this.pageWidth);0>c.y-c.startY&&(f=c.y*this.pageHeight);b.moveTo(d,f);b.strokeRect(d,f,Math.abs(c.x-c.startX)*this.pageWidth,Math.abs(c.y-c.startY)*this.pageHeight);b.stroke()}},drawLine:function(b,c){this.isFullConfig(c)&&(b.lineCap=0.85<=c.opacity?"round":"butt",b.lineJoin="round",b.lineWidth=c.lineWidth*this.pageWidth,b.strokeStyle=c.color,b.beginPath(),b.moveTo(c.startX*this.pageWidth,
c.startY*this.pageHeight),b.lineTo(c.x*this.pageWidth,c.y*this.pageHeight),b.stroke(),b.closePath())},drawClear:function(b,c){b&&c.x&&c.y&&c.lineWidth&&(b.beginPath(),b.clearRect(c.x*this.pageWidth,c.y*this.pageHeight,c.lineWidth*this.pageWidth,c.lineWidth*this.pageWidth),b.stroke(),b.closePath())},isFullConfig:function(b){return b&&b.startX&&b.startY&&b.x&&b.y&&b.lineWidth&&b.color},onResize:function(b,c,d){this.scale=d;this.tranScale=b/this.defaultWidth;this.pageWidth=b;this.pageHeight=c},setAllAnnoSteps:function(b,
c,d){this.allAnnoSteps.length>this.stepIndex&&(this.allAnnoSteps.length=this.stepIndex);switch(b){case 2:this.allAnnoSteps.push({type:"Pen",index:c,cookie:d});break;case 3:this.allAnnoSteps.push({type:"Rect",index:c,cookie:d});break;case 4:this.allAnnoSteps.push({type:"Round",index:c,cookie:d});break;case 5:this.allAnnoSteps.push({type:"Eraser",index:c,cookie:d});break;case 11:this.allAnnoSteps.push({type:"Clear",index:c,cookie:d})}},saveNoteCookie:function(b,c,d,f){var g=this.getCookieName(b);b=
this.getCookie(b);var h={};b||(b=[]);b[c]||(b[c]={});h=b[c];h[d]=f;b=JSON.stringify(b);window.localStorage.setItem(g,b)}}),CustomMunu=Class({create:function(b){this.parent=b;this.buttons=new ObjectPool;this.container=$("<div class='customMunu'></div>");this.initButtons();this.buttons.each(function(b){b.setCallback(this.afterButtonClick.bind(this))}.bind(this));this.parent.append(this.container);this.initBtn();this.initCss();this.initEvent()},initButtons:function(){bookConfig.AnnotationButtonVisible&&
(this.buttons.add(new AnnotationButton),this.annoBtn=this.buttons.find("annotation").get(0).$button);bookConfig.PrintButtonVisible&&(this.buttons.add(new PrintButton),this.printBtn=this.buttons.find("print").get(0).$button);bookConfig.ShareButtonVisible&&(this.buttons.add(new ShareButton),this.shareBtn=this.buttons.find("share").get(0).$button);bookConfig.ZoomButtonVisible&&(this.buttons.add(new MunuZoomButton),this.zoomBtn=this.buttons.find("zoom").get(0).$button);bookConfig.FullscreenButtonVisible&&
(this.buttons.add(new MunuFullscreenButton),this.fullBtn=this.buttons.find("full").get(0).$button);bookConfig.TableOfContentButtonVisible&&(this.buttons.add(new TableOfContentButton),this.tableButton=this.buttons.find("table").get(0).$button);bookConfig.BookMarkButtonVisible&&(this.buttons.add(new BookmarkButton),this.tableButton=this.buttons.find("bookmark").get(0).$button);bookConfig.ThumbnailsButtonVisible&&(this.buttons.add(new ThumbnailButton),this.tableButton=this.buttons.find("thumbnail").get(0).$button)},
afterButtonClick:function(b){b.$button.find("img").changeButtonColor("#333333");b.$caption.css({color:"#333"});b.$button.find("img").css({width:"16px",height:"16px","float":"left",margin:"10px"});this.hide()},initBtn:function(){for(var b=0;b<this.buttons.length;b++){var c=this.buttons.objects[b],d=c.$button.find("img"),f=c.$caption;c.colorChanged=!1;d.changeButtonColor("#333333");this.setBtnCss(c.$button,d,f);this.initBtnEvent(c.$button);c.addTo(this.container)}},setBtnCss:function(b,c,d){b.removeAttr("title");
b.css({opacity:"1",background:"#fff","float":"left",width:"200px",height:"36px","line-height":"36px"});c.css({width:"16px",height:"16px","float":"left",margin:"10px"});d.css({color:"#333"})},initCss:function(){this.container.css({display:"none",position:"absolute",width:"200px","font-family":"Microsoft YaHei,Arial,Helvetica,sans-serif,SimSun;","font-size":"14px","z-index":"1000","font-color":"#333","box-shadow":"0 0 6px #333","-webkit-box-shadow":"0 0 6px #333","-o-box-shadow":"0 0 6px #333","-moz-box-shadow":"0 0 6px #333",
"-ms-box-shadow":"0 0 6px #333",overflow:"hidden"})},onResize:function(b,c){},initBtnEvent:function(b){b.bind("mouseenter",function(c){c.stopPropagation();b.css({background:"#eee"})}.bind(this));b.bind("mouseleave",function(c){c.stopPropagation();b.css({background:"#fff"})}.bind(this))},initEvent:function(){this.parent.bind("click",function(b){this.hide()}.bind(this))},show:function(b){if(b&&this.buttons.objects.length){b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:
b.changedTouches?b.changedTouches:[b];var c=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,c=b[0].pageX||b[0].clientX+c;b=b[0].pageY||b[0].clientY+d;c>windowWidth-201&&(c=windowWidth-201);this.buttons.length&&b>windowHeight-36*this.buttons.length&&(b=windowHeight-36*this.buttons.length);this.container.css({left:c+"px",top:b+"px"});this.container.fadeIn()}},hide:function(){this.buttons.objects.length&&this.container.fadeOut()}}),
NoteCookie=Class({statics:{noteCookie:function(b){void 0==this._noteCookie&&(this._noteCookie=new NoteCookie(b));return this._noteCookie}},create:function(b){this.noteImgs={};this.rowObjs={};this.noteTexts={};this.svgObjs={};this.notes=[];this.cookieName=window.location.href.replace(window.location.hash,"")+"NoteCookie";this.rows=[];this.noteImgContainers={};this.showFlag=!1;this.container=b;this.address=uiBaseURL;this.noteButtonIsShow=!0;this.createNote(b);this.bindEvents()},createNote:function(b){var c=
this;this.note=$("<div class='noteCookie-note'></div>").css({left:"40%"}).appendTo(b).hide();this.noteTitle=$("<div class='noteCookie-noteTitle'></div>").append($("<span class='noteCookie-noteTitle-text'></span>").html("Notes")).appendTo(this.note);this.noteTitleShowBtn=$("<div class='noteCookie-noteTitle-showBtn'></div>").css({right:32}).attr("title","Minimize").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"note_narrow.png")).appendTo(this.noteTitle);this.noteTitleCloseBtn=
$("<div class='noteCookie-noteTitle-closeBtn'></div>").css({right:3}).attr("title","Close").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"note_close.png")).appendTo(this.noteTitle);this.noteButton=$("<div class='noteCookie-noteButton'></div>").appendTo(this.note);var d=$("<div style='position: relative;width: 100%;height: 158px;'></div>").appendTo(this.noteButton);this.noteBottomTop=$("<div class='noteCookie-noteButton-top'></div>").appendTo(d);this.inputText=
$("<textarea class='noteCookie-noteButton-inputText'></textarea>").appendTo(this.noteBottomTop);this.addBtn=$("<div class='noteCookie-noteButton-addBtn'></div>").css({left:10}).html("Add").appendTo(this.noteBottomTop);this.removeAllBtn=$("<div class='noteCookie-noteButton-removeAllBtn'></div>").css({left:"auto",right:20}).html("Remove All").appendTo(this.noteBottomTop);this.noteLists=$("<div class='noteCookie-noteList'></div>").appendTo(this.noteButton);var d=$("<div class='noteCookie-noteTable-row-th'></div>"),
f=$("<span class='noteCookie-noteTable-cellLeft-th'></span>").html("Page"),g=$("<div class='noteCookie-noteTable-cellRight-th'></div>");g.append($("<div style='position: absolute;width: 1px;height: 22px;left: 0px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 319px;height: 100%;left: 1px;text-indent: 6px;'></span>").html("Title")).append($("<div style='position: absolute;width: 1px;height: 22px;left: auto;right: 89px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 34px;height: 100%;left: auto;right: 55px;text-indent: 4px;'></span>").html("Edit")).append($("<div style='position: absolute;width: 1px;height: 22px;left: auto;right: 54px;top: 3px;background-color: #FFFFFF;'></div>")).append($("<span style='position: absolute;width: 54px;height: 100%;left: auto;right: 0px;text-indent: 4px;'></span>").html("Delete"));
d.append(f).append(g);this.noteLists.append(d);this.noteTable=$("<div class='noteCookie-noteTable'></div>").css({maxHeight:188}).appendTo(this.noteLists);this.noteTableInner=$("<div class='noteCookie-noteTable-inner'></div>").appendTo(this.noteTable);isTouch||this.note.transition3D();this.createScrollBar(this.noteTable);try{var h=this.getLocalStorage(this.cookieName),k=eval(h);if(k)for(this.downJSonArrByKey(k,"page"),h=0;h<k.length;h++)this.addListData($.extend(k[h],{firstDown:!0}))}catch(l){}for(h=
0;h<this.rows.length;h++)this.rows[h].rowObj.css({backgroundColor:0==h%2?"":"#bababa"});this.scrollBarShowHide();var m,n;this.noteTitle.on("mousedown touchstart",function(d){d.preventDefault();d.stopPropagation();d=d.originalEvent.touches?d.originalEvent.touches[0]:d;m=d.clientX-c.note.position().left;n=d.clientY-c.note.position().top;b.add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.noteMove touchmove.noteMove",
function(b){b.preventDefault();b.stopPropagation();c.noteTitle.css({cursor:"move"});b=b.originalEvent.touches?b.originalEvent.touches[0]:b;c.note.css({left:b.clientX-m,top:b.clientY-n})});b.on("mouseup.noteMove touchend.noteMove",function(d){d.preventDefault();d.stopPropagation();c.noteTitle.css({cursor:"default"});b.add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.noteMove touchmove.noteMove");
b.off("mouseup.noteMove touchend.noteMove")});return!1})},isNoteListShowHide:function(){0<this.noteTableInner.children("div").length?this.noteLists.show():this.noteLists.hide()},updateListDataText:function(b,c){var d=this.noteTexts[b],f=this.noteImgs[b].find(".noteCookie-eachNote-img"),d=d.find(".noteCookie-eachNote-textList-text");f.attr("title",c);d.val(c)},updateNoteImgText:function(b,c){this.rowObjs[b].find(".noteCookie-noteTable-cellRight-text").val(c)},deleteListData:function(b){var c=this.noteTexts[b],
d=this.svgObjs[b];this.noteImgs[b].remove();c.remove();d.remove();delete this.noteImgs[b];delete this.rowObjs[b];delete this.noteTexts[b];delete this.svgObjs[b]},deleteNoteImg:function(b){this.rowObjs[b].remove();delete this.noteImgs[b];delete this.rowObjs[b]},revertNoteImgText:function(b){var c=this.noteTexts[b].find(".noteCookie-eachNote-textList-text");b=this.rowObjs[b].find(".noteCookie-noteTable-cellRight-text");c.val(b.val())},addListData:function(b){var c=this,d=!0,f=$("<div class='noteCookie-noteTable-row' style='position: relative;cursor: pointer;'></div>").css({height:28}).attr("data-key",
b.key).attr("data-page",b.page).append($("<span class='noteCookie-noteTable-cellLeft'></span>").html(b.page)).appendTo(c.noteTableInner),g=$("<span class='noteCookie-noteTable-cellRight' style=' position: absolute;width: 410px;height: 100%;left: 54px;z-index: 2;'></span>").appendTo(f),h=$("<input class='noteCookie-noteTable-cellRight-text' disabled='true'/>").attr("disabled",d).val(b.value).appendTo(g),k=$("<div class='noteCookie-noteTable-cellRight-edit'></div>").css({right:60}).attr("title","Edit").append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",
c.address+"note_edit.png")).appendTo(g);$("<div class='noteCookie-noteTable-cellRight-del'></div>").css({right:15}).attr("title","Delete").append($("<img style='margin-left: 0px;margin-top: 3px;'/>").attr("src",c.address+"note_del.png")).appendTo(g).on("click touchend",function(b){f.remove();var d=f.attr("data-key");c.deleteListData(d);c.delArrayOrderKey(c.rows,d);c.delArrayOrderKey(c.notes,d);c.addLocalStorage(c.cookieName,c.parseJSONArrayToString(c.notes));for(d=0;d<c.rows.length;d++)c.rows[d].rowObj.css({backgroundColor:0==
d%2?"":"#bababa"});c.scrollBarShowHide();b.preventDefault();b.stopPropagation();return!1});f.on("click touchend",function(b){gotoPageFun($(this).attr("data-page"))});k.on("click touchend",function(b){if(d)d=!1,h.css({backgroundColor:"#ffffff",color:"#000000"}),k.children("img").attr("src",c.address+"note_save.png"),h.attr("disabled",d),h[0].focus(),k.attr("title","Save");else{d=!0;h.css({backgroundColor:"transparent",color:"#1a1a1a"});h.attr("disabled",d);k.attr("title","Edit");var g=h.val();k.children("img").attr("src",
c.address+"note_edit.png");var n=f.attr("data-key");c.updateListDataText(n,g);c.updateArrayOrderKey(c.notes,n,{value:g});c.addLocalStorage(c.cookieName,c.parseJSONArrayToString(c.notes))}b.preventDefault();b.stopPropagation();return!1});c.rows.push($.extend(b,{rowObj:f}));c.rowObjs[b.key]=f;c.scrollBarShowHide();c.notes.push(b);c.addLocalStorage(c.cookieName,c.parseJSONArrayToString(c.notes))},addNoteImg:function(b,c){var d=this,f=!0,g=$("<div class='noteCookie-eachNote'></div>").attr("data-key",
b.key).attr("data-page",b.page).css({left:""+b.left+"",top:""+b.top+""}).appendTo(c),h=$("<img class='noteCookie-eachNote-img' style=' position: absolute;width: 56px;height: 56px;z-index: 2;'/>").attr("src",d.address+"note.png").attr("title",b.value).attr("data-key",b.key).attr("data-page",b.page).appendTo(g);isTouch||g.transition3D();try{var k=$(document.createElementNS("http://www.w3.org/2000/svg","svg")).css({zIndex:140,position:"absolute"}).attr("class","noteCookie-eachNote-svg noteCookie-eachNote-svg"+
b.page).appendTo(BookInfo.container()),l=$(document.createElementNS("http://www.w3.org/2000/svg","path")).css({fill:"#FFF4A1",stroke:"#C99F1D",strokeWidth:1}).appendTo(k)}catch(m){k=$("<svg></svg>").css({zIndex:140,position:"absolute"}).attr("class","noteCookie-eachNote-svg noteCookie-eachNote-svg"+b.page).appendTo(BookInfo.container()),l=$("<path></path>").css({fill:"#FFF4A1",stroke:"#C99F1D",strokeWidth:1}).appendTo(k)}k.css({left:0,top:0,width:0,height:0}).hide();var n=$("<div class='noteCookie-eachNote-textList noteCookie-eachNote-text"+
b.page+"'></div>").attr("data-key",b.key).attr("data-page",b.page).hide().appendTo(BookInfo.container());n.css({left:g.offset().left,top:g.offset().top});n.on("click mousedown touchstart",function(b){b.preventDefault();b.stopPropagation();return!1});var p=$("<div class='noteCookie-eachNote-textList-top' style='position: absolute;width: 100%;height: 20px;left: 0px;top: 0px;background-color: #373737;border-top-left-radius: 2px;border-top-right-radius: 2px;z-index: 2;'></div>").appendTo(n),q=$("<div style='position: absolute;left: 4px;top: 0px;width: 24px;height: 20px;cursor: pointer;'></div>").append($("<img style='margin-top: 2px;margin-left: 4px;'/>").attr("src",
d.address+"showNoteList.png")).appendTo(p),t=$("<div class='noteCookie-eachNote-textList-topClose'></div>").css({right:2}).attr("title","Close").append($("<img style='margin-top: 1px;margin-left: 1px;'/>").attr("src",d.address+"noteImg_close.png")).appendTo(p),s=$("<div class='noteCookie-eachNote-textList-topSave'></div>").css({right:24}).attr("title","Save").append($("<img style='margin-top: 1px;margin-left: 0px;'/>").attr("src",d.address+"noteImg_save.png")).appendTo(p),r=$("<div class='noteCookie-eachNote-textList-topDel'></div>").css({right:46}).attr("title",
"Delete").append($("<img style='margin-top: 1px;margin-left: 0px;'/>").attr("src",d.address+"noteImg_del.png")).appendTo(p),u=$("<div class='noteCookie-eachNote-textList-textDiv' style='height: 120px;position: absolute;width: 100%;left: 0px;top: 20px;margin: 0px;border: 0px;padding: 0px;border-bottom-left-radius: 2px;border-bottom-right-radius: 2px;background-color: #FFF4A1;z-index: 2;'></div>").appendTo(n),v=$("<textarea class='noteCookie-eachNote-textList-text'></textarea>").val(b.value).appendTo(u);
$("<span class='noteCookie-eachNote-textList-topTitle'></span>").html(b.time).appendTo(u);v.on("mousedown click",function(b){b.stopPropagation()});isTouch||n.transition3D();q.on("click touchend",function(){d.noteButtonIsShow&&d.showFlag?(d.hide(),d.showFlag=!1):(d.show(),d.showFlag=!0)});var w,y,x,z,E,A;p.on("pointerdown.note",function(b){b.stopPropagation()});p.on("mousedown.note touchstart.note",function(b){x=g.offset().left;z=g.offset().top;E=n.offset().left;A=n.offset().top;w=(b.pageX||b.originalEvent.touches[0].pageX)-
E;y=(b.pageY||b.originalEvent.touches[0].pageY)-A;BookInfo.container().add(k).add(d.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(d.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.noteB touchmove.noteB",function(b){p.css({cursor:"move"});b=isTouch?b.originalEvent.touches[0]:b;n.css({left:Math.floor(b.clientX-w),top:b.clientY-y});d.drawSVG(x,z,n.offset().left,n.offset().top,k,l)});BookInfo.container().add(k).add(p).on("mouseup.noteB touchend.noteB",
function(){p.css({cursor:"default"});BookInfo.container().add(k).add(d.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(d.noteImgContainers[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.noteB touchmove.noteB");BookInfo.container().add(k).add(p).off("mouseup.noteB touchend.noteB")});b.stopPropagation();b.preventDefault();return!1});var C,L,K;t.on("click touchend",function(b){d.revertNoteImgText(g.attr("data-key"));n.hide();k.hide();D=!1});s.on("click touchend",
function(b){b=v.val();h.attr("title",b);var c=g.attr("data-key");d.updateNoteImgText(c,b);d.updateArrayOrderKey(d.notes,c,{value:b});d.addLocalStorage(d.cookieName,d.parseJSONArrayToString(d.notes));n.hide();k.hide();D=!1});r.on("click touchend",function(b){C||(C=$("<div class='noteCookie-eachNote-textList-textDiv-bg' style='height: 100%;position: absolute;width: 100%;left: 0px;top: 0px;margin: 0px;border: 0px;padding: 0px;cursor: default;border-bottom-left-radius: 5px;border-bottom-right-radius: 5px;background-color: #cccccc;z-index: 2;'></div>").appendTo(u),
$("<span class='noteCookie-eachNote-textList-textDiv-bgText' style=' position: absolute;left: 0px;top: 36px;font-family: Arial;font-size: 11px;width: 100%;text-align: center;height: 20px;line-height: 20px;color: #0A0A0A;z-index: 2;'></span>").html("Delete This Note!").appendTo(C),L=$("<div class='noteCookie-eachNote-textList-textDiv-bgYes'></div>").css({left:40}).html("Yes").appendTo(C),K=$("<div class='noteCookie-eachNote-textList-textDiv-bgNo'></div>").css({left:97}).html("No").appendTo(C),L.on("click touchend",
function(b){b=g.attr("data-key");d.deleteNoteImg(b);n.remove();k.remove();g.remove();b=g.attr("data-key");d.delArrayOrderKey(d.rows,b);d.delArrayOrderKey(d.notes,b);d.addLocalStorage(d.cookieName,d.parseJSONArrayToString(d.notes));d.scrollBarShowHide();for(b=0;b<d.rows.length;b++)d.rows[b].rowObj.css({backgroundColor:0==b%2?"":"#bababa"});C=null}),K.on("click touchend",function(){C.remove();C=null}))});var S=b.firstDown?!1:!0,D=!1,I=!1;h.on("mouseup.noteImgShowHide touchend.noteImgShowHide",function(b){if(isTouch||
1==b.which)if(S)S=!1;else return I?I=!1:D?(n.hide(),k.hide(),D=!1):(f&&(n.css({left:g.offset().left,top:g.offset().top}),f=!1),n.show(),k.show(),D=!0,d.drawSVG(g.offset().left,g.offset().top,n.offset().left,n.offset().top,k,l)),b.preventDefault(),b.stopPropagation(),!1});$(document).add(c).on("mousedown.noteImgShowHide touchstart.noteImgShowHide",function(){D&&(n.hide(),k.hide(),D=!1)});n.add(k).on("mousedown.noteImgShowHide touchstart.noteImgShowHide",function(b){b.preventDefault();b.stopPropagation();
return!1});var ia,V,X,O,ja,T=!1;h.on("pointerdown.nodecookie",function(b){b.stopPropagation()});h.bind(_event._down,function(b){b.stopPropagation();b.preventDefault();b=isTouch?b.originalEvent.touches[0]:b;ia=parseFloat(g[0].offsetLeft);V=parseFloat(g[0].offsetTop);X=b.clientX;O=b.clientY;ja=h.attr("data-key");T=!0;if(D)var f=n.offset().left,l=n.offset().top,m=k.offset().left,p=k.offset().top;c.on("mousemove.noteObj touchmove.noteObj",function(b){b.stopPropagation();b.preventDefault();if(T){g.css({cursor:"move"});
b=isTouch?b.originalEvent.touches[0]:b;var h=ia*BookInfo.scale()-(X-b.clientX),q=V*BookInfo.scale()-(O-b.clientY),h=h/(c.width()*BookInfo.scale())*100+"%",q=q/(c.height()*BookInfo.scale())*100+"%";g.css({left:h,top:q});D&&(n.css({left:f+(b.clientX-X),top:l+(b.clientY-O)}),k.css({left:m+(b.clientX-X),top:p+(b.clientY-O)}));if(8<Math.abs(b.clientX-X)||8<Math.abs(b.clientY-O))I=!0;d.updateArrayOrderKey(d.notes,ja,{left:h,top:q});d.addLocalStorage(d.cookieName,d.parseJSONArrayToString(d.notes))}});c.add(h).on("mouseup.noteObj touchend.noteObj",
function(b){T&&(g.css({cursor:"default"}),I=T=!1,c.off("mousemove.noteObj touchmove.noteObj"),c.add(h).off("mouseup.noteObj touchend.noteObj"))});return!1});p.bind(_event._down,function(){$(".noteCookie-eachNote-textList").removeClass("noteCookie-eachNote-textList-current");$(".noteCookie-eachNote").removeClass("noteCookie-eachNote-textList-current");n.addClass("noteCookie-eachNote-textList-current");g.addClass("noteCookie-eachNote-textList-current")});d.noteImgs[b.key]=g;d.noteTexts[b.key]=n;d.svgObjs[b.key]=
k},addNoteImgByPageIndex:function(b,c){c.find(".noteCookie-eachNote").remove();$(".noteCookie-eachNote-text"+b).remove();$(".noteCookie-eachNote-svg"+b).remove();for(var d=0;d<this.notes.length;d++)this.notes[d].page===b&&this.addNoteImg(this.notes[d],c)},addListDataAndNoteImg:function(b,c){this.addListData(b);this.addNoteImg(b,c)},drawSVG:function(b,c,d,f,g,h){var k,l,m,n,p,q;b+28>=d+90.5&&c+28<=f?(q=c+28,f-=q,b+28<=d+109?(p=b+28,n=d+181-24-b+28,c=b=0,k=d+181-24-48-p,l=f,d=d+181-24-p):(p=d+109,d+
181-24>=b+28?(n=48,b=b+28-p):b=n=b+28-p,k=c=0,l=f,d=48),m=f):b+28<d+90.5&&c+28<=f?(q=c+28,f-=q,b+28<=d+24?(p=b+28,n=d+24+48-p,c=b=0,k=n-48,l=f,d=n):(p=d+24,d+24+48<=b+28?b=n=b+28-p:(n=48,b=b+28-p),k=c=0,l=f,d=48),m=f):b+28>=d+90.5&&c>=f+141-28?(q=f+141,f=c+28-q,b+28<=d+109?(p=b+28,n=d+181-24-b+28,b=0,c=f,k=d+181-24-48-p,l=0,d=d+181-24-p):(p=d+109,d+181-24>=b+28?(n=48,b=b+28-p):b=n=b+28-p,c=f,l=k=0,d=48),m=0):b+28<d+90.5&&c>=f+141-28?(q=f+141,f=c+28-q,b+28<=d+24?(p=b+28,n=d+24+48-p,b=0,c=f,k=n-48,
l=0,d=n):(p=d+24,d+24+48<=b+28?b=n=b+28-p:(n=48,b=b+28-p),c=f,l=k=0,d=48),m=0):d+181<=b+28&&c+28>=f&&c+28<=f+70.5?(p=d+181,n=b+28-p,c+28<=f+20?(q=c+28,f=f+20+48-q,b=n,k=c=0,l=f-48,d=0,m=f):f+20+48<=c+28?(q=f+20,f=c+28-q,b=n,c=f,d=l=k=0,m=48):(q=f+20,f=48,b=n,c=c+28-q,d=l=k=0,m=f)):d+181<=b+28&&c+28<=f+141&&c+28>=f+70.5?(p=d+181,n=b+28-p,c+28<=f+141-20-48?(q=c+28,f=f+141-20-q,b=n,k=c=0,l=f-48,d=0,m=f):f+141-20<=c+28?(q=f+141-68,f=c+28-q,b=n,c=f,d=l=k=0,m=48):(q=f+141-68,f=48,b=n,c=c+28-q,d=l=k=0,m=
f)):d>=b+28&&c+28>=f&&c+28<=f+70.5?(p=b+28,n=d-p,c+28<=f+20?(q=c+28,f=f+20+48-q,c=b=0,k=n,l=f-48,d=n,m=f):f+20+48<=c+28?(q=f+20,f=c+28-q,b=0,c=f,k=n,l=0,d=n,m=48):(q=f+20,f=48,b=0,c=c+28-q,k=n,l=0,d=n,m=f)):d>=b+28&&c+28<=f+141&&c+28>=f+70.5?(p=b+28,n=d-p,c+28<=f+141-20-48?(q=c+28,f=f+141-20-q,c=b=0,k=n,l=f-48,d=n,m=f):f+141-20<=c+28?(q=f+141-68,f=c+28-q,b=0,c=f,k=n,l=0,d=n,m=48):(q=f+141-68,f=48,b=0,c=c+28-q,k=n,l=0,d=n,m=f)):(l=k=c=b=n=f=q=p=0,d=48,m=0);g.show().css({width:n,height:f,left:p,top:q});
h.attr("d","M"+d+","+m+" L"+b+","+c+" L"+k+","+l)},bindEvents:function(){var b=this,c=!1,d=function(){$.each(BookInfo.getCurrentPages(),function(c,d){if(b.noteImgContainers[BookInfo.getBookType()]){var h=b.noteImgContainers[BookInfo.getBookType()][d];h&&(h.css({cursor:""}),h.off("mousedown.addNote touchstart.addNote"))}});c=!1};BookInfo.container().on("mousedown.addNote touchstart.addNote",function(){d()});b.addBtn.bind(_event._end,function(f){var g=b.inputText.val();if(g){b.noteButtonIsShow=!1;b.noteTitleShowBtn.children("img").attr("src",
b.address+"note_revert.png");b.noteButton.css({maxHeight:0,paddingBottom:0});c=!0;var h=BookInfo.getCurrentPages();$.each(h,function(f,h){var m=b.noteImgContainers[BookInfo.getBookType()][h];if(m)m.css({cursor:"url("+b.address+"note.png),auto"}).on(_event._down,function(f){b.noteButtonIsShow=!1;b.noteTitleShowBtn.children("img").attr("src",b.address+"note_revert.png");b.noteButton.css({maxHeight:0});if(c){if(!f.which||3!=f.which){var k=(f.pageX||f.originalEvent.touches[0].pageX)-m.offset().left;f=
(f.pageY||f.originalEvent.touches[0].pageY)-m.offset().top;k=k/(m.width()*BookInfo.scale())*100+"%";f=f/(m.height()*BookInfo.scale())*100+"%";k={key:(new Date).getTime(),time:(new Date).format("yyyy-MM-dd hh:mm:ss",!0),value:g,left:k,top:f,page:h};b.addListDataAndNoteImg(k,$(this));b.downJSonArrByKey(b.rows,"page");$(".noteCookie-noteTable-row").detach();for(k=0;k<b.rows.length;k++)b.rows[k].rowObj.css({backgroundColor:0==k%2?"":"#bababa"}),b.rows[k].rowObj.appendTo(b.noteTableInner);b.scrollBarShowHide();
b.inputText.val("")}d()}})})}f.preventDefault();f.stopPropagation();return!1});b.noteTitleShowBtn.on(_event._down,function(){b.noteButtonIsShow?(b.noteButtonIsShow=!1,b.noteTitleShowBtn.children("img").attr("src",b.address+"note_revert.png"),b.noteButton.css({maxHeight:0,paddingBottom:0})):(b.noteButtonIsShow=!0,b.noteTitleShowBtn.children("img").attr("src",b.address+"note_narrow.png"),b.noteButton.css({maxHeight:9999,paddingBottom:6}))});b.noteTitleCloseBtn.on("click.note touchend.note",function(c){void 0!=
b.onCreated?b.onCreated[1].call(b.onCreated[0]):b.hide();c.preventDefault();c.stopPropagation();return!1});b.removeAllBtn.on("click.note touchend.note",function(){$(".noteCookie-eachNote").remove();$(".noteCookie-eachNote-svg").remove();$(".noteCookie-eachNote-textList").remove();$(".noteCookie-noteTable-row").remove();b.notes=[];b.rowObjs={};b.noteImgs={};b.noteTexts={};b.svgObjs={};b.rows=[];b.addLocalStorage(b.cookieName,b.parseJSONArrayToString(b.notes));b.scrollBarShowHide()})},setContainers:function(b,
c,d){void 0==this.noteImgContainers[b]&&(this.noteImgContainers[b]={});this.noteImgContainers[b][c]=d;b==BookInfo.getBookType()&&($(".noteCookie-eachNote-textList").hide(),$(".noteCookie-eachNote-svg").hide(),this.addNoteImgByPageIndex(c,d))},show:function(){this.showFlag=!0;this.note.show();parseInt(this.note.css("left"))>this.container.width()&&this.note.css({left:"50%"});0>parseInt(this.note.css("top"))&&this.note.css({top:24});this.noteButtonIsShow=!0;this.noteTitleShowBtn.children("img").attr("src",
this.address+"note_narrow.png");this.noteButton.css({maxHeight:9999,paddingBottom:6});this.scrollBarShowHide()},hide:function(){this.showFlag=!1;this.note.hide()},bindOnCreated:function(b,c){this.onCreated=[b,c]},showHide:function(){this.showFlag?this.hide():this.show()},parseJSONArrayToString:function(b){if(0!=b.length){for(var c="[",d=0;d<b.length;d++)c+="{key:'"+b[d].key+"',value:'"+b[d].value+"',page:"+b[d].page+",time:'"+b[d].time+"',left:'"+b[d].left+"',top:'"+b[d].top+"'},";c=c.substring(0,
c.length-1);return c+"]"}},delArrayOrderKey:function(b,c){if(b)for(var d=0;d<b.length;d++)b[d].key&&b[d].key==c&&b.remove(d)},updateArrayOrderKey:function(b,c,d){if(b)for(var f=0;f<b.length;f++)b[f].key&&b[f].key==c&&$.extend(b[f],d)},downJSonArrByKey:function(b,c){b.sort(function(b,f){return parseInt(b[c])>parseInt(f[c])?1:parseInt(b[c])==parseInt(f[c])?0:-1})},isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},getLocalStorage:function(b){try{if(window.localStorage)return window.localStorage.getItem(b);
for(var c=document.cookie.split("; "),d=0;d<c.length;d++){var f=c[d].split("=");if(f[0]==b)return unescape(f[1])}return""}catch(g){}},addLocalStorage:function(b,c){try{if(window.localStorage)window.localStorage.setItem(b,c);else{var d=b+"="+escape(c),f=new Date;f.setTime(f.getTime()+864E8);d+="; expires="+f.toGMTString();document.cookie=d}}catch(g){}},createScrollBar:function(b){b=$("<div>",{"class":"ScrollBar",css:{position:"absolute",width:6,height:"100%",backgroundColor:"#a8a8a8",borderRadius:0,
right:0,top:0,zIndex:99,borderLeft:"1px solid #ffffff"}}).appendTo(b);var c=$("<div>",{"class":"OuterScroll",css:{position:"absolute",width:6,height:"100%",left:0,top:0,backgroundColor:"transparent",borderRadius:0,overflow:"hidden",cursor:"pointer"}}).appendTo(b);$("<div>",{"class":"InnerScroll",css:{position:"absolute",width:6,height:"100%",marginLeft:0,marginRight:0,left:0,top:0,backgroundColor:"#5e5e5e",borderRadius:0,cursor:"pointer"}}).appendTo(c);this.scrollBar=b;this.outerScroll=c;this.bindScrollBarEvents(b,
c,this.noteTable,this.noteTableInner)},scrollBarShowHide:function(){var b=this.noteTable.outerHeight()*this.scrollBar.outerHeight()/this.noteTableInner.outerHeight();this.outerScroll.css({height:b});this.isNoteListShowHide();this.noteTable.height()>=this.noteTableInner.height()?(this.scrollBar.hide(),this.noteTableInner.css({top:0})):(this.scrollBar.show(),Math.abs(parseFloat(this.noteTableInner.css("top")))>this.noteTableInner.outerHeight()-this.noteTable.outerHeight()&&(this.noteTableInner.css({top:-(this.noteTableInner.outerHeight()-
this.noteTable.outerHeight())}),this.outerScroll.css({top:this.scrollBar.outerHeight()-this.outerScroll.outerHeight()})))},bindScrollBarEvents:function(b,c,d,f){var g=this;c.on(_event._down,function(b){var d=b||event,l=d.clientY-g.outerScroll.position().top,m=b.which;b.stopPropagation();1==m&&($(document).on("mousemove.scrollBar touchmove.scrollBar",function(b){b.preventDefault();b.stopPropagation();d=b||event;b=d.clientY-l;0>=b?b=0:b>=g.scrollBar.outerHeight()-g.outerScroll.outerHeight()&&(b=g.scrollBar.outerHeight()-
g.outerScroll.outerHeight());c.css({top:b});f.css({top:-b/(g.scrollBar.outerHeight()-g.outerScroll.outerHeight())*(g.noteTableInner.outerHeight()-g.noteTable.outerHeight())})}),$(document).on("mouseup.scrollBar touchend.scrollBar",function(b){b=b||event;b.preventDefault();b.stopPropagation();$(document).off("mousemove.scrollBar touchmove.scrollBar");$(document).off("mouseup.scrollBar touchend.scrollBar")}))});d.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",function(g){if(!(d.outerHeight()>=
f.outerHeight())){var k=g.originalEvent,k=k.wheelDelta||-k.detail,l=f.position().top,m;f.stop(!1,!1);0<k?m=0>l+d.outerHeight()/11?l+d.outerHeight()/11:0:0>k&&(m=f.outerHeight()-d.outerHeight()>-(l-d.outerHeight()/11)?l-d.outerHeight()/11:-(f.outerHeight()-d.outerHeight()));f.css({top:m});c.css({top:-m/(f.outerHeight()-d.outerHeight())*(b.outerHeight()-c.outerHeight())});g.stopPropagation();g.preventDefault();return!1}})}}),Signature=Class({statics:{signature:function(b){void 0==this._signature&&(this._signature=
new Signature(b));return this._signature}},create:function(b){this.container=b;this.address=uiBaseURL;this.disableCss={boxShadow:"rgba(0, 0, 0, 0.6) 0px 1px 4px inset",backgroundColor:"#cccccc",textShadow:"0 1px 1px white",color:"rgb(165, 148, 148)",cursor:"default"};this.normalCss={boxShadow:"inset 0px 1px 0px rgba(255, 255, 255, 0.5), 0px 1px 2px rgba(0, 0, 0, 0.2)",backgroundColor:"#E4E4E4",color:"#464343",textShadow:"",cursor:"pointer"};this.overCss={};this.downCss={backgroundColor:"#E4E4E4",
color:"#374f00",boxShadow:"inset 0px 1px 3px rgba(0, 0, 0, 0.3), 0px 1px 0px white",textShadow:"0px 1px 0px rgba(255, 255, 255, 0.4)"};this.natureMessage="Welcome to the signature manager! Here, you can draw,type, or upload signatures to use on the PDF documents you sign.";this.writeMessage='Type your signature below, then press the "Save" or "Save & Use" button to proceed.';this.drawMessage='Draw your signature below, then press the "Save" or "Save & Use" button to proceed.';this.redoIsUse=this.undoIsUse=
this.clearAllFalg=this.hasDrawFlag=this.showFlag=this.hasAndChangeText=!1;this.drawOldData=this.currentDrawDel=this.currentDrawEdit=this.currentDrawSave=this.currentWriteDel=this.currentWriteEdit=this.currentWriteSave=null;this.drawOldPoints=[];this.savePoints=[];this.saveText=null;this.signatureName=window.location.href.replace(window.location.hash,"")+"Signature";this.signatureCookies=[];this.currentObj=null;this.signatureContexts={};try{this.createSignature(b)}catch(c){}this.toolBar=this.createToolBar(b)},
createToolBar:function(b){var c=this;this.showTimeFalg={};this.oldData={};var d=$("<div class='flipHTML5Signature-toolBar' style='position: absolute;width: 144px;height: 32px;background-color: rgba(0, 0, 0, 0.8);border-radius: 4px;z-index: 9998;'></div>").appendTo(b).hide();b=$("<div class='flipHTML5Signature-toolBar-del'></div>").css({left:4}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_del.png")).appendTo(d);var f=$("<div class='flipHTML5Signature-toolBar-up'></div>").css({left:32}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",
this.address+"signature_up.png")).appendTo(d),g=$("<div class='flipHTML5Signature-toolBar-down'></div>").css({left:60}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"signature_down.png")).appendTo(d),h=$("<div class='flipHTML5Signature-toolBar-revert'></div>").css({left:88}).append($("<img style='margin-left: 2px;margin-top: 4px;'/>").attr("src",this.address+"signature_revert.png")).appendTo(d),k=$("<div class='flipHTML5Signature-toolBar-date'></div>").css({left:116}).append($("<img style='margin-left: 3px;margin-top: 4px;'/>").attr("src",
this.address+"signature_date.png")).appendTo(d);b.on("click touchend",function(b){c.currentObj&&(c.currentObj.remove(),d.hide(),b=c.currentObj.attr("data-key"),delete c.showTimeFalg[b],delete c.oldData[b],c.delArrayOrderKey(c.signatureCookies,b),c.addLocalStorage(c.signatureName,c.parseToString(c.signatureCookies)))});f.on("click touchend",function(){if(c.currentObj){var b=c.currentObj.width(),d=c.currentObj.height(),f=b+11;c.currentObj.css({width:f,height:f/(b/d)});b=c.currentObj.attr("data-key");
d=c.parseObject(c.currentObj[0]);c.updateArrayOrderKey(c.signatureCookies,b,{width:d.width,height:d.height});c.addLocalStorage(c.signatureName,c.parseToString(c.signatureCookies));c.showTimeFalg[b]&&c.reviseDateTag()}});g.on("click touchend",function(){if(c.currentObj){var b=c.currentObj.width(),d=c.currentObj.height(),f=0>=b-11?5:b-11;c.currentObj.css({width:f,height:f/(b/d)});b=c.currentObj.attr("data-key");d=c.parseObject(c.currentObj[0]);c.updateArrayOrderKey(c.signatureCookies,b,{width:d.width,
height:d.height});c.addLocalStorage(c.signatureName,c.parseToString(c.signatureCookies));c.showTimeFalg[b]&&c.reviseDateTag()}});h.on("click touchend",function(){if(c.currentObj){var b=c.currentObj.attr("data-key");c.currentObj.css({width:c.oldData[b].width,height:c.oldData[b].height});c.showTimeFalg[b]&&c.reviseDateTag();var d=c.parseObject(c.currentObj[0]);c.updateArrayOrderKey(c.signatureCookies,b,{width:d.width,height:d.height});c.addLocalStorage(c.signatureName,c.parseToString(c.signatureCookies))}});
k.on("click touchend",function(){var b=c.currentObj.attr("data-key");c.showTimeFalg[b]?(c.currentObj.find(".flipHTML5Signature-eachDate").hide(),c.showTimeFalg[b]=!1):(c.reviseDateTag(),c.currentObj.find(".flipHTML5Signature-eachDate").show(),c.showTimeFalg[b]=!0)});d.on("mousedown touchstart",function(b){b.preventDefault();b.stopPropagation();return!1});this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){d.hide()});return d},createSignature:function(b){var c=
this;this.$signature=$("<div class='flipHTML5Signature'></div>").css({width:560}).appendTo(b).hide();this.$signatureTitle=$("<div class='flipHTML5Signature-title'></div>").append($("<span class='flipHTML5Signature-titleText'></span>").html("Signature Manager")).appendTo(this.$signature);this.$closeBtn_title=$("<div class='flipHTML5Signature-titleClose' style='right: 6px;top: 4px;width: 20px;height: 20px;'></div>").append($("<img style='margin-left: 2px;margin-top: 2px;'/>").attr("src",this.address+
"signature_close.png")).appendTo(this.$signatureTitle);try{var d=this.getLocalStorage(this.signatureName);this.signatureCookies=d&&"undefined"!=d?eval(d):[]}catch(f){}var g,h;this.$signatureTitle.on("mousedown touchstart",function(d){d.preventDefault();d.stopPropagation();d=d.originalEvent.touches?d.originalEvent.touches[0]:d;g=d.clientX-c.$signature.position().left;h=d.clientY-c.$signature.position().top;b.add($(document)).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).on("mousemove.signatureMove touchmove.signatureMove",
function(b){c.$signatureTitle.css({cursor:"move"});b=b.originalEvent.touches?b.originalEvent.touches[0]:b;c.$signature.css({left:b.clientX-g,top:b.clientY-h})});b.add($(document)).on("mouseup.signatureMove touchend.signatureMove",function(){c.$signatureTitle.css({cursor:"default"});b.add($(document)).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[0]]).add(c.signatureContexts[BookInfo.getBookType()][BookInfo.getCurrentPages()[1]]).off("mousemove.signatureMove touchmove.signatureMove");
b.add($(document)).off("mouseup.signatureMove touchend.signatureMove")});return!1});this.createSignatureUnder(this.$signature);this.createWriteTypeUnder(this.$signature);this.createDrawTypeUnder(this.$signature)},createSignatureUnder:function(b){var c=this;this.$signatureUnder=$("<div class='flipHTML5Signature-nuder' style='position: relative;left: 0px;width: 100%;height: 260px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.natureMessage)).appendTo(b);
this.$underClose=$("<div class='flipHTML5Signature-nuderClose'></div>").html("Close").appendTo(this.$signatureUnder);this.$closeBtn_title.add(this.$underClose).on("click.signature touchend.signature",function(){void 0!=c.onCreated?c.onCreated[1].call(c.onCreated[0]):c.hide()});this.createEachTypes(this.$signatureUnder)},createEachTypes:function(b){var c=this,d={width:52,left:57,borderTopLeftRadius:5,borderBottomLeftRadius:5},f={width:70,left:111,borderTopRightRadius:5,borderBottomRightRadius:5};b=
$("<div class='flipHTML5Signature-nuderTypes' style='  position: absolute;left: 15px;top: 60px;width: 530px;height: 145px;'></div>").css({boxShadow:"inset 1px 1px 0px #a6a6a6, 1px 1px 0px #f6f6f6"}).appendTo(b);var g=$("<div class='flipHTML5Signature-nuderTypes-type' style=' position: absolute;left: 17px;top: 6px;width: 240px;height: 134px;'></div>").css({boxShadow:"0px 0px 1px #000000"}).append($("<span class='flipHTML5Signature-typeTitle'></span>").html("Type on Keyboard")).css({left:17}).appendTo(b),
g=$("<div class='flipHTML5Signature-typeUnder'></div>").appendTo(g),h=$("<div class='flipHTML5Signature-typeMid'></div>").appendTo(g),k=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(d).html("Edit").appendTo(g).hide(),l=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(f).html("Delete").appendTo(g).hide();b=$("<div class='flipHTML5Signature-nuderTypes-type' style=' position: absolute;left: 17px;top: 6px;width: 240px;height: 134px;'></div>").css({boxShadow:"0px 0px 1px #000000"}).append($("<span class='flipHTML5Signature-typeTitle'></span>").html("Draw with Mouse")).css({left:"auto",
right:17}).appendTo(b);b=$("<div class='flipHTML5Signature-typeUnder'></div>").appendTo(b);var m=$("<div class='flipHTML5Signature-typeMid'></div>").appendTo(b),n=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(d).html("Edit").appendTo(b).hide(),p=$("<div class='flipHTML5Signature-typeEdit-typeDel'></div>").css(f).html("Delete").appendTo(b).hide();h.on("mouseover.signature touchstart.signature",function(){h.css({borderColor:"#ff0000"})});h.on("mouseout.signature touchend.signature",
function(){h.css({borderColor:"#cccccc"})});h.on(_event._down,function(b){b.preventDefault();b.stopPropagation();return!1});h.on(_event._end,function(b){var d=$(this).html();d?(c.$writeText.val(d),c.saveAndUseWrite(d)):(c.writeSave.add(c.writeSaveAndUse).removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.disableCss),c.hasAndChangeText=!1,c.$signatureUnder.hide(),c.$drawTypeUnder.hide(),c.$writeTypeUnder.show(),c.$writeText.focus(),c.currentWriteSave=h,c.currentWriteEdit=k,c.currentWriteDel=
l);b.preventDefault();b.stopPropagation();return!1});k.on("click.signature touchend.signature",function(){c.currentWriteSave=h;c.currentWriteEdit=k;c.currentWriteDel=l;c.$writeText.val(h.html());c.writeSave.add(c.writeSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss);c.hasAndChangeText=!1;c.$signatureUnder.hide();c.$drawTypeUnder.hide();c.$writeTypeUnder.show()});l.on("click.signature touchend.signature",function(){c.currentWriteSave=h;c.currentWriteEdit=
k;c.currentWriteDel=l;c.writeSave.add(c.writeSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss);c.hasAndChangeText=!1;h.html("");c.$writeText.val("");k.hide();l.hide()});m.on("mouseover.signature touchstart.signature",function(){m.css({borderColor:"#ff0000"})});m.on("mouseout.signature touchend.signature",function(){m.css({borderColor:"#cccccc"})});m.on(_event._down,function(b){b.preventDefault();b.stopPropagation();return!1});m.on(_event._end,function(b){m.children("img").length?
c.saveAndUseDraw(c.drawOldData):(c.$signatureUnder.hide(),c.$writeTypeUnder.hide(),c.$drawTypeUnder.show(),c.currentDrawSave=m,c.currentDrawEdit=n,c.currentDrawDel=p);b.preventDefault();b.stopPropagation();return!1});n.on("click.signature touchend.signature",function(){c.currentDrawSave=m;c.currentDrawEdit=n;c.currentDrawDel=p;c.$signatureUnder.hide();c.$writeTypeUnder.hide();c.$drawTypeUnder.show()});p.on("click.signature touchend.signature",function(){try{c.currentDrawSave=m,c.currentDrawEdit=n,
c.currentDrawDel=p,c.undo.add(c.redo).add(c.clearAllBtn).add(c.drawSave).add(c.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss),c.undoIsUse=!1,c.redoIsUse=!1,c.clearAllFalg=!1,c.hasDrawFlag=!1,n.hide(),p.hide(),c.currentDrawSave&&c.currentDrawSave.empty(),c.context.clearRect(0,0,c.canvas.width,c.canvas.height),c.previewContext.clearRect(0,0,c.previewCanvas.width,c.previewCanvas.height),c.drawOldPoints=[],c.points=[],c.drawOldPoints.push([])}catch(b){}})},
createWriteTypeUnder:function(b){var c=this,d=!1,f;this.$writeTypeUnder=$("<div class='flipHTML5Signature-writeType' style='position: relative;left: 0px;width: 100%;height: 170px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.writeMessage)).appendTo(b).hide();this.$writeText=$("<input type='text' class='flipHTML5Signature-writeType-text' maxlength='35' style='position: absolute;width: 450px;height: 60px;left: 63px;top: 64px;font-family: Mistral;font-size: 28px;text-align: center;color: #000000;'/>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(this.$writeTypeUnder);
this.writeSave=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save' style='left: 161px;'></div>").html("Save").appendTo(this.$writeTypeUnder);this.writeSaveAndUse=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save-use' style='left: 275px;'></div>").html("Save & Use").appendTo(this.$writeTypeUnder);b=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-cancel'></div>").html("Cancel").appendTo(this.$writeTypeUnder);f=this.$writeText.val();this.writeSave.add(this.writeSaveAndUse).css(this.disableCss);
b.on("click touchend",function(b){c.$writeText.val(f);c.$writeTypeUnder.hide();c.$drawTypeUnder.hide();c.$signatureUnder.show();b.preventDefault()});this.writeSaveAndUse.on(_event._down,function(b){b.preventDefault();b.stopPropagation();return!1});this.writeSaveAndUse.on(_event._end,function(b){if(c.hasAndChangeText){var h=c.$writeText.val();(f=h)&&d&&(c.saveText=h,c.saveAndUseWrite(h))}b.preventDefault();b.stopPropagation();return!1});this.writeSave.on("click touchend",function(b){c.hasAndChangeText&&
(f=b=c.$writeText.val())&&d&&(c.saveText=b,c.saveWrite(b))});c.writeSave.on("mouseover.signature touchstart.signature",function(b){c.hasAndChangeText&&c.writeSave.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});c.writeSaveAndUse.on("mouseover.signature touchstart.signature",function(b){c.hasAndChangeText&&c.writeSaveAndUse.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});c.writeSave.on("mouseout.signature touchend.signature",
function(b){c.hasAndChangeText&&c.writeSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});c.writeSaveAndUse.on("mouseout.signature touchend.signature",function(b){c.hasAndChangeText&&c.writeSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});c.writeSave.on("mousedown.signature",function(b){c.hasAndChangeText&&c.writeSave.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});
c.writeSaveAndUse.on("mousedown.signature",function(b){c.hasAndChangeText&&c.writeSaveAndUse.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});c.writeSave.add($(document)).on("mouseup.signature",function(b){c.hasAndChangeText&&c.writeSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});c.writeSaveAndUse.add($(document)).on("mouseup.signature",function(b){c.hasAndChangeText&&c.writeSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});
this.$writeText.on("input propertychange",function(b){b=c.$writeText.val();d=!0;b&&d?(c.writeSave.add(c.writeSaveAndUse).css(c.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover"),c.hasAndChangeText=!0):(c.hasAndChangeText=!1,c.writeSave.add(c.writeSaveAndUse).removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.disableCss))})},createDrawTypeUnder:function(b){var c=this;this.$drawTypeUnder=$("<div class='flipHTML5Signature-drawType' style='position: relative;left: 0px;width: 100%;height: 340px;background-color: #C7C7C7;'></div>").append($("<div class='flipHTML5Signature-nuderMessage'></div>").html(this.drawMessage)).appendTo(b).hide();
this.drawSave=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save' style='left: 161px;'></div>").html("Save").appendTo(this.$drawTypeUnder);this.drawSaveAndUse=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-save-use' style='left: 275px;'></div>").html("Save & Use").appendTo(this.$drawTypeUnder);b=$("<div class='flipHTML5Signature-typeBtn flipHTML5Signature-type-cancel'></div>").html("Cancel").appendTo(this.$drawTypeUnder);this.drawSave.add(this.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(this.disableCss);
this.drawSave.on("click touchend",function(){if(c.hasDrawFlag){var b=c.trimCanvas(y);c.savePoints=c.points.concat();c.savePoints.push({color:c.drawColor});c.saveDraw(b)}});this.drawSaveAndUse.on(_event._down,function(b){b.preventDefault();b.stopPropagation();return!1});this.drawSaveAndUse.on(_event._end,function(b){if(c.hasDrawFlag){var d=c.trimCanvas(y);c.savePoints=c.points.concat();c.savePoints.push({color:c.drawColor});c.saveAndUseDraw(d)}b.preventDefault();b.stopPropagation();return!1});c.drawSave.on("mouseover.signature touchstart.signature",
function(b){c.hasDrawFlag&&c.drawSave.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});c.drawSaveAndUse.on("mouseover.signature touchstart.signature",function(b){c.hasDrawFlag&&c.drawSaveAndUse.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});c.drawSave.on("mouseout.signature touchend.signature",function(b){c.hasDrawFlag&&c.drawSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});
c.drawSaveAndUse.on("mouseout.signature touchend.signature",function(b){c.hasDrawFlag&&c.drawSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});c.drawSave.on("mousedown.signature",function(b){c.hasDrawFlag&&c.drawSave.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});c.drawSaveAndUse.on("mousedown.signature",function(b){c.hasDrawFlag&&c.drawSaveAndUse.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});
c.drawSave.add($(document)).on("mouseup.signature",function(b){c.hasDrawFlag&&c.drawSave.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});c.drawSaveAndUse.add($(document)).on("mouseup.signature",function(b){c.hasDrawFlag&&c.drawSaveAndUse.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});b.on("click touchend",function(){c.$writeTypeUnder.hide();c.$drawTypeUnder.hide();c.$signatureUnder.show()});b=$("<div class='flipHTML5Signature-drawTypeMid' style='position: absolute;left: 10px;top: 53px;width: 540px;height: 90px;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(this.$drawTypeUnder);
var d=$("<div class='flipHTML5Signature-drawTypeMid-lineWidth' style='position: absolute;width: 180px;height: 16px;left: 20px;top: 15px;'></div>").appendTo(b).append($("<img>").attr("src",this.address+"pen.png")),f=$("<div style='position: absolute;width: 100px;height: 4px; background-color: #E0E0E0;left: 20px;top: 6px;border-radius: 2px;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(d),g=$("<div style='position: absolute;cursor:pointer;width: 0px; height: 0px;border-bottom-width: 11px;border-style: solid;border-left-width: 6px;border-right-width: 6px;top: -3px;border-color: transparent;border-bottom-color: #373737;left: -4px;'></div>").appendTo(f),
h=$("<input type='text' style='position: absolute;width: 40px;height: 13px;left: 130px;top: 0px;'/>").appendTo(d),k=$("<div class='flipHTML5Signature-drawTypeMid-undo'></div>").css({left:28}).appendTo(b).html("UNDO"),l=$("<div class='flipHTML5Signature-drawTypeMid-redo'></div>").css({left:80}).appendTo(b).html("REDO"),m=$("<div class='flipHTML5Signature-drawTypeMid-clearAll'></div>").css({left:152,width:78}).html("Clear All").appendTo(b);this.clearAllBtn=m;k.add(l).add(m).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(this.disableCss);
this.undo=k;this.redo=l;k.on("mouseover.signature touchstart.signature",function(b){c.undoIsUse&&k.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});l.on("mouseover.signature touchstart.signature",function(b){c.redoIsUse&&l.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});m.on("mouseover.signature touchstart.signature",function(b){c.clearAllFalg&&m.removeClass("flipHTML5Signature-normal").addClass("flipHTML5Signature-hover").css(c.overCss)});
k.on("mouseout.signature touchend.signature",function(b){c.undoIsUse&&k.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});l.on("mouseout.signature touchend.signature",function(b){c.redoIsUse&&l.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});m.on("mouseout.signature touchend.signature",function(b){c.clearAllFalg&&m.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});
k.on("mousedown.signature",function(b){c.undoIsUse&&k.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});l.on("mousedown.signature",function(b){c.redoIsUse&&l.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});m.on("mousedown.signature",function(b){c.clearAllFalg&&m.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.downCss)});k.add($(document)).on("mouseup.signature",function(b){c.undoIsUse&&k.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});
l.add($(document)).on("mouseup.signature",function(b){c.redoIsUse&&l.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});m.add($(document)).on("mouseup.signature",function(b){c.clearAllFalg&&m.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss)});var n=$("<div class='flipHTML5Signature-drawTypeMid-preview'></div>").html("Preview").appendTo(b),p=60/140*16,q=document.createElement("canvas"),t=q.getContext("2d"),
s=$(q).css({position:"absolute",left:0,top:-Math.floor(p)});n.append(s);this.previewCanvas=q;this.previewContext=t;q.width=234;q.height=60+Math.ceil(p)+10;b=this.colorPicker(b);b.container.css({left:220,top:11});var r,u,v;h[0].value=parseFloat((7*(parseInt(g.css("left"))+4)+1).toFixed(2));g.on("mousedown touchstart",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent.touches?b.originalEvent.touches[0]:b;r=b.clientX-g.position().left;f.add(d).add($(document)).on("mousemove.lineWidth touchmove.lineWidth",
function(b){b=b.originalEvent.touches?b.originalEvent.touches[0]:b;u=b.clientX-r;u=-4>=u?-4:93<=u?93:u;g.css({left:u});v=(u+4)/97*7+1;v=parseFloat(v.toFixed(2));h[0].value=v});d.add($(document)).on("mouseup.lineWidth touchend.lineWidth",function(){c.changeLineWidth(v);f.add(d).add($(document)).off("mousemove.lineWidth touchmove.lineWidth");d.add($(document)).off("mouseup.lineWidth touchend.lineWidth")});return!1});f.on("mousedown touchstart",function(b){b=b.clientX-f.offset().left;b=0>=b?0:97<=b?
97:b;g.css({left:b-4});v=b/97*7+1;v=parseFloat(v.toFixed(2));h[0].value=v;c.changeLineWidth(v)});h.on("change",function(){var b=h[0].value;isNaN(b)?h[0].value=parseFloat(((g.position().left+4)/97*7+1).toFixed(2)):(1>b?(h[0].value=1,g.css({left:-4})):8<b?(h[0].value=8,g.css({left:93})):(h[0].value=b,g.css({left:(b-1)/7*97-4})),c.changeLineWidth(h[0].value))});m.on("click touchend",function(){c.clearAllFalg&&(z.clearRect(0,0,y.width,y.height),t.clearRect(0,0,q.width,q.height),c.drawSave.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss),
c.hasDrawFlag=!1,c.redoIsUse=!0,l.css(c.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover"),c.undoIsUse=!1,k.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.disableCss),w=c.drawOldPoints.length-1,m.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss),c.clearAllFalg=!1,c.points=[])});var w=0;k.on("mousedown.signature touchstart.signature",function(b){if(c.undoIsUse){c.redoIsUse=!0;l.css(c.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");
w+=1;w=w>=c.drawOldPoints.length?c.drawOldPoints.length-1:w;z.clearRect(0,0,y.width,y.height);t.clearRect(0,0,q.width,q.height);var d=c.drawOldPoints[c.drawOldPoints.length-1-w];c.points=d.concat();c.draw(y,z,c.drawOldPoints[c.drawOldPoints.length-1-w],c.drawColor,c.lineWidth);c.drawPreview(q,t,d,c.drawColor,c.lineWidth);c.drawSave.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss);c.hasDrawFlag=!0;m.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss);
c.clearAllFalg=!0;w==c.drawOldPoints.length-1&&(c.undoIsUse=!1,k.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.disableCss),c.drawSave.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss),c.hasDrawFlag=!1,m.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-normal flipHTML5Signature-hover").css(c.disableCss),c.clearAllFalg=!1);b.preventDefault();b.stopPropagation();return!1}});l.on("mousedown.signature touchstart.signature",
function(b){if(c.redoIsUse){c.undoIsUse=!0;k.css(c.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");w-=1;w=0>=w?0:w;z.clearRect(0,0,y.width,y.height);t.clearRect(0,0,q.width,q.height);var d=c.drawOldPoints[c.drawOldPoints.length-1-w];c.points=d.concat();c.draw(y,z,c.drawOldPoints[c.drawOldPoints.length-1-w],c.drawColor,c.lineWidth);c.drawPreview(q,t,d,c.drawColor,c.lineWidth);c.drawSave.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss);
c.hasDrawFlag=!0;m.add(c.drawSaveAndUse).removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss);c.clearAllFalg=!0;0==w&&(c.redoIsUse=!1,l.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.disableCss));b.preventDefault();b.stopPropagation();return!1}});c.drawOldPoints.push([]);n=$("<div class='flipHTML5Signature-drawTypeBottom-out' style='position: absolute;left: 0px;top: 150px;width: 100%;height: 124px;'></div>").appendTo(this.$drawTypeUnder);
p=$("<div class='flipHTML5Signature-drawTypeBottom' style='position: absolute;left: 9px;top: 0px;width: 540px;height: 140px;border: 1px solid #cccccc;background-color: #ffffff;'></div>").css({boxShadow:"rgb(166, 166, 166) 1px 1px 0px inset, rgb(246, 246, 246) 1px 1px 0px"}).appendTo(n);n.css({cursor:"url("+c.address+"pen.png),auto"});var y=document.createElement("canvas"),x=window.canvas=$(y);p.append(x);y.width=540;y.height=158;$(y).css({position:"absolute",left:0,top:-16});var z=y.getContext("2d");
this.canvas=y;this.context=z;this.points=[];this.drawColor=b.message[0].style.backgroundColor;this.lineWidth=1;var E,A;x.on(_event._down,function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent.touches?b.originalEvent.touches[0]:b;if(c.redoIsUse){var d=c.drawOldPoints.length;c.drawOldPoints.length=d-w;c.points=c.drawOldPoints[d-w-1].concat();w=0}c.undoIsUse=!0;k.css(c.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");c.redoIsUse=!1;l.removeClass("flipHTML5Signature-hover flipHTML5Signature-normal").css(c.disableCss);
c.clearAllFalg=!0;m.removeClass("flipHTML5Signature-hover").addClass("flipHTML5Signature-normal").css(c.normalCss);c.hasDrawFlag=!0;c.drawSave.add(c.drawSaveAndUse).css(c.normalCss).addClass("flipHTML5Signature-normal").removeClass("flipHTML5Signature-hover");E={x:b.clientX-x.offset().left+0,y:b.clientY-x.offset().top+16,t:0,w:c.lineWidth};c.points.push(E);x.on(_event._move,function(b){b=b.originalEvent.touches?b.originalEvent.touches[0]:b;A={x:b.clientX-x.offset().left+0,y:Math.min(b.clientY-x.offset().top+
16,156),t:1};c.points.push(A);c.draw(y,z,c.points,c.drawColor,c.lineWidth);c.drawPreview(q,t,c.points,c.drawColor,c.lineWidth)});x.add($(document)).on("mouseup.signature touchend.signature",function(){c.drawOldPoints.push(c.points.concat());x.off(_event._move);x.add($(document)).off("mouseup.signature touchend.signature")});return!1})},addSignatureImg:function(b,c,d){var f=this;b.on("mousedown.hideToolBar touchstart.hideToolBar",function(b){f.toolBar&&f.toolBar.hide()});b.css({cursor:"pointer"});
void 0!=f.onCreated?f.onCreated[1].call(f.onCreated[0]):f.hide();b.off("mousedown.signature touchstart.signature");b.on("mousedown.signature touchstart.signature",function(g){b.off("mousedown.signature touchstart.signature");if(isTouch||1===g.which){var h=new Date,k=h.getTime(),h=h.format("MM/dd/yyyy hh:mm:ss");f.showTimeFalg[k]=!1;var l=(g.pageX||g.originalEvent.touches[0].pageX)/BookInfo.scale()-b.offset().left,m=(g.pageY||g.originalEvent.touches[0].pageY)/BookInfo.scale()-b.offset().top,l=f.parseData({left:l,
top:m,width:c.width,height:c.height},b[0].offsetWidth,b[0].offsetHeight),m=$.extend({},c,{width:l.width,height:l.height});f.oldData[k]=m;f.createSignatureImg(b,m,d,l.left,l.top,k,h);f.signatureCookies.push({type:m.type,data:0===c.type?f.saveText:f.savePoints,key:k,page:d,currentTime:h,left:l.left,top:l.top,width:m.width,height:m.height});f.addLocalStorage(f.signatureName,f.parseToString(f.signatureCookies));g.preventDefault();g.stopPropagation();return!1}});b.add($(document)).add(BookInfo.container()).on("mouseup.signature touchend.signature",
function(c){$.each(BookInfo.getCurrentPages(),function(b,c){var d=f.signatureContexts[BookInfo.getBookType()][c];d&&(d.css({cursor:""}),d.off("mousedown.signature touchstart.signature"))});b.off("mousedown.signature touchstart.signature");b.add($(document)).add(BookInfo.container()).off("mousedown.signature touchstart.signature")})},createSignatureImg:function(b,c,d,f,g,h,k){var l=this;b.on("mousedown.hideToolBar touchstart.hideToolBar",function(){l.toolBar&&l.toolBar.hide()});var m=$("<div class='flipHTML5Signature-eachSignatureImg' style='cursor: move;'></div>").append($("<img style='width: 100%;height: 100%;position: absolute;left: 0px;top: 0px;'/>").attr("src",
c.url)).attr("data-key",h).attr("data-page",d).css({position:"absolute",width:c.width,height:c.height,left:f,top:g}).appendTo(b),n=$("<div class='flipHTML5Signature-eachDate' style='position: absolute;width: 180px;height: 45px;border: 1px dashed #2F2F2F;top: -24px;'></div>").css({left:c.width+2}).hide().html(k);c=$("<img/>").attr("src",l.address+"signature_dateClose.png").css({position:"absolute",top:0,right:0,cursor:"pointer"});n.appendTo(m).append(c);c.off("mousedown touchstart");c.on("mousedown touchstart",
function(){var b=l.currentObj.attr("data-key");n.hide();l.showTimeFalg[b]=!1});n.off("mousedown touchstart");n.on("mousedown touchstart",function(b){b.preventDefault();b.stopPropagation();return!1});m.off("mouseover.signature touchstart.signature");m.on("mouseover.signature touchstart.signature",function(){m.css({border:"1px solid #ff0000"})});m.off("mouseout.signature touchend.signature");m.on("mouseout.signature touchend.signature",function(){m.css({border:0})});m.off("mousedown.getObj touchstart.getObj");
m.on("mousedown.getObj touchstart.getObj",function(b){$(".flipHTML5Signature-eachSignatureImg").css({zIndex:1});m.css({zIndex:4});l.currentObj=m;l.toolBar.css({left:m.offset().left-l.container.offset().left,top:m.offset().top-l.container.offset().top-l.toolBar.outerHeight()}).show()});var p=!1;m.off("mousedown.signatureImg touchstart.signatureImg");m.on("pointerdown.signatureImg",function(b){b.stopPropagation()});m.on("mousedown.signatureImg touchstart.signatureImg",function(c){var d=c.pageX||c.originalEvent.touches[0].pageX,
f=c.pageY||c.originalEvent.touches[0].pageY,k=m[0].offsetLeft,n=m[0].offsetTop;b.on("mousemove.signatureImg touchmove.signatureImg",function(b){b.preventDefault();b.stopPropagation();p=!0;var c=k-(d-(b.pageX||b.originalEvent.touches[0].pageX))/BookInfo.scale();g=n-(f-(b.pageY||b.originalEvent.touches[0].pageY))/BookInfo.scale();m.css({left:c,top:g});l.toolBar.css({left:m.offset().left-l.container.offset().left,top:m.offset().top-l.container.offset().top-l.toolBar.outerHeight()}).show();l.showTimeFalg[h]&&
l.reviseDateTag()});m.add(b).add($(document)).on("mouseup.signatureImg touchend.signatureImg",function(){b.off("mousemove.signatureImg touchmove.signatureImg");m.add(b).add($(document)).off("mouseup.signatureImg touchend.signatureImg");if(p){var c=m.attr("data-key"),d=l.parseObject(l.currentObj[0]);l.updateArrayOrderKey(l.signatureCookies,c,{left:d.left,top:d.top});l.addLocalStorage(l.signatureName,l.parseToString(l.signatureCookies))}});c.preventDefault();c.stopPropagation();return!1});b.css({cursor:""})},
draw:function(b,c,d,f,g){var h=-1,k=d.length;c.clearRect(0,0,b.width,b.height);c.save();c.beginPath();c.lineJoin="round";c.strokeStyle=f;for(c.lineWidth=g;++h<k;)b=d[h],0===b.t?(c.stroke(),c.beginPath(),c.lineWidth=b.w,c.moveTo(b.x,b.y)):c.lineTo(b.x,b.y);c.stroke();c.restore()},drawPreview:function(b,c,d,f,g){var h=-1,k=d.length,l=140/60,m=540/234;c.clearRect(0,0,b.width,b.height);c.save();c.beginPath();c.lineJoin="round";c.strokeStyle=f;for(c.lineWidth=g;++h<k;)b=d[h],0===b.t?(c.stroke(),c.beginPath(),
c.lineWidth=b.w/l,c.moveTo(b.x/m,b.y/l)):c.lineTo(b.x/m,b.y/m);c.stroke();c.restore()},trimCanvas:function(b){var c=b.getContext("2d"),d=document.createElement("canvas").getContext("2d"),f=c.getImageData(0,0,b.width,b.height),g=f.data.length,h,k=null,l=null,m=null,n=null,p,q;for(h=0;h<g;h+=4)0!==f.data[h+3]&&(p=h/4%b.width,q=~~(h/4/b.width),null===k&&(k=q),null===l?l=p:p<l&&(l=p),null===m?m=p:m<p&&(m=p),null===n?n=q:n<q&&(n=q));b=n-k;m-=l;c=c.getImageData(l,k,m,b);d.canvas.width=m;d.canvas.height=
b;d.putImageData(c,0,0);return{url:d.canvas.toDataURL("image/png"),width:m,height:b}},saveDraw:function(b){if(this.currentDrawSave){this.currentDrawSave.empty();var c=this.currentDrawSave.width(),d=this.currentDrawSave.height(),f=c/d,g=b.width,h=b.height,k=g/h;c>g&&d>h?(f=g,c=(c-f)/2,d=(d-h)/2):c>g&&d<h?(f=d*k,h=d,c=(c-f)/2,d=(d-h)/2):c<g&&d>h?(f=c,h=c/k,c=(c-f)/2,d=(d-h)/2):f>k?(h=d,f=d*k,c=(c-f)/2,d=0):f<k?(f=c,h=c/k,c=0,d=(d-h)/2):(f=c,h=d,d=c=0);this.currentDrawSave.append($("<img/>").css({position:"absolute",
width:f,height:h,left:c,top:d}).attr("src",b.url))}this.drawOldData=b;this.currentDrawEdit.show();this.currentDrawDel.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.$signatureUnder.show()},saveAndUseDraw:function(b){var c=this,d=BookInfo.getCurrentPages();$.each(d,function(d,g){var h=c.signatureContexts[BookInfo.getBookType()][g];h&&(b.type=1,c.addSignatureImg(h,b,g))});c.saveDraw(b)},saveWrite:function(b){this.currentWriteSave.html(b);this.currentWriteEdit.show();this.currentWriteDel.show();
this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.$signatureUnder.show()},saveAndUseWrite:function(b){var c=this,d=c.drawTextByDiv(b,"38px","Mistral","#000000"),f=BookInfo.getCurrentPages();$.each(f,function(b,f){var k=c.signatureContexts[BookInfo.getBookType()][f];k&&(d.type=0,k.css({cursor:""}),c.addSignatureImg(k,d,f))});c.saveWrite(b)},drawTextByDiv:function(b,c,d,f){var g=document.createElement("canvas"),h=window.context=g.getContext("2d");h.fillStyle=f;h.font=""+c+" "+d+"";var k=h.measureText(b).width+
8;g.width=k;g.height=54;h.fillStyle=f;h.font=""+c+" "+d+"";h.textBaseline="top";h.fillText(b,3,0);return{url:g.toDataURL("image/png"),width:k,height:54}},parseObject:function(b){if(document.getElementsByTagName("body")[0].contains(b)){var c,d,f;f=b.parentNode;var g=b.style,h=$(b);d=100/f.offsetHeight;c=100/f.offsetWidth;f=b.offsetLeft*c+"%";b=b.offsetTop*d+"%";c=h.width()*c+"%";d=h.height()*d+"%";g.width=c;g.height=d;g.left=f;g.top=b;return{width:c,height:d,left:f,top:b}}},parseData:function(b,c,
d){d=100/d;c=100/c;return{width:b.width*c+"%",height:b.height*d+"%",left:b.left*c+"%",top:b.top*d+"%"}},close:function(){this.$signature.hide();this.$signatureUnder.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.showFlag=!1},show:function(){this.$signature.show();this.$signatureUnder.show();this.$writeTypeUnder.hide();this.$drawTypeUnder.hide();this.showFlag=!0},hide:function(){this.close()},showHide:function(){this.showFlag?this.hide():this.show()},changeColor:function(b){this.drawColor=
b;this.draw(this.canvas,this.context,this.points,b,this.lineWidth);this.drawPreview(this.previewCanvas,this.previewContext,this.points,this.drawColor,this.lineWidth);return b},changeLineWidth:function(b){return this.lineWidth=b},colorPicker:function(b){var c,d,f,g=this,h="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),
k=document.createElement("table");c=document.createElement("a");var l=$(c),m=document.createElement("input"),n=function(){},p=function(){k.style.display="none";m.value=m.style.backgroundColor=this.title.toUpperCase();g.changeColor(this.title.toUpperCase())};l.appendTo(b);c.className="flipHtml5ColorSelectorWrap";k.setAttribute("border","1");c.style.position="absolute";c.href="javascript:void(0);";m.type="text";m.className="flipHtml5ColorSelectorMessage";m.style.width="20px";m.style.height="20px";m.value=
m.style.backgroundColor="#000000";m.style.cursor="pointer";m.style.padding="0px";c.appendChild(m);c.appendChild(k);k.style.display="none";k.style.position="relative";k.style.zIndex=9999;k.style.backgroundColor="#ffffff";for(d=0;7>d;d++){f=document.createElement("tr");f.style.position="relative";for(c=0;10>c;c++)b=document.createElement("td"),b.className="flipHtml5ColorSelectorBlock",b.style.position="relative",b.style.width="14px",b.style.height="14px",b.title=h[10*d+c],b.style.backgroundColor=h[10*
d+c],$(b).on("mouseenter",n),$(b).on("click touchstart",p),f.appendChild(b);k.appendChild(f)}$(m).on("click touchstart",function(b){k.style.display="table-cell";b.stopPropagation();b.stopPropagation();return!1});$(document).on("click touchstart",function(){k.style.display="none"});return{container:l,message:$(m)}},setContainers:function(b,c,d){void 0==this.signatureContexts[b]&&(this.signatureContexts[b]={});this.signatureContexts[b][c]=d;b==BookInfo.getBookType()&&(this.toolBar.hide(),this.addSignatureByPageIndex(c,
d))},addSignatureByPageIndex:function(b,c){c.find(".flipHTML5Signature-eachSignatureImg").remove();for(var d=0;d<this.signatureCookies.length;d++){var f=this.signatureCookies[d];if(f.page===b){var g=f.left,h=f.top,k=f.key,l=f.currentTime;if(0==f.type)var m=this.drawTextByDiv(f.data,"38px","Mistral","#000000"),n=this.parseData({left:g,top:h,width:m.width,height:m.height},c[0].offsetWidth,c[0].offsetHeight);else{m=document.createElement("canvas");m.width=540;m.height=158;$(m).css({position:"absolute",
left:0,top:-16});var n=m.getContext("2d"),p=f.data.concat(),q=p.pop();this.draw(m,n,p,q.color,1);m=this.trimCanvas(m);n=this.parseData({left:g,top:h,width:m.width,height:m.height},c[0].offsetWidth,c[0].offsetHeight)}this.oldData[k]=$.extend({},m,{width:n.width,height:n.height});m=$.extend({},m,{width:f.width,height:f.height});this.createSignatureImg(c,m,f.page,g,h,k,l)}}},getLocalStorage:function(b){try{if(window.localStorage)return window.localStorage.getItem(b);for(var c=document.cookie.split("; "),
d=0;d<c.length;d++){var f=c[d].split("=");if(f[0]==b)return unescape(f[1])}return""}catch(g){}},addLocalStorage:function(b,c){try{if(window.localStorage)window.localStorage.setItem(b,c);else{var d=b+"="+escape(c),f=new Date;f.setTime(f.getTime()+864E8);d+="; expires="+f.toGMTString();document.cookie=d}}catch(g){}},parseToString:function(b){if(0==b.length)return"";for(var c="[",d=0;d<b.length;d++)c=0==b[d].type?c+("{type:"+b[d].type+",key:"+b[d].key+",data:'"+b[d].data+"',page:"+b[d].page+",currentTime:'"+
b[d].currentTime+"',left:'"+b[d].left+"',top:'"+b[d].top+"',width:'"+b[d].width+"',height:'"+b[d].height+"'},"):c+("{type:"+b[d].type+",key:"+b[d].key+",data:"+this.parsePointsToString(b[d].data)+",page:"+b[d].page+",currentTime:'"+b[d].currentTime+"',left:'"+b[d].left+"',top:'"+b[d].top+"',width:'"+b[d].width+"',height:'"+b[d].height+"'},");c=c.substring(0,c.length-1);return c+"]"},parsePointsToString:function(b){if(0!=b.length){for(var c="[",d=0;d<b.length-1;d++)c+="{x:"+b[d].x+",y:"+b[d].y+",t:"+
b[d].t+",w:"+b[d].w+"},";c+="{color:'"+b[b.length-1].color+"'}";return c+"]"}},delArrayOrderKey:function(b,c){if(b)for(var d=0;d<b.length;d++)b[d].key&&b[d].key==c&&b.remove(d)},updateArrayOrderKey:function(b,c,d){if(b)for(var f=0;f<b.length;f++)b[f].key&&b[f].key==c&&$.extend(b[f],d)},createCursorImg:function(b,c,d){var f=$("<img/>").attr("src",b.url).css({position:"absolute",width:b.width,height:b.height,left:c+10,top:d+10}).appendTo(this.container);f.on("mousemove touchmove",function(b){f.css({left:b.clientX+
10,top:b.clientY+10})});return f},reviseDateTag:function(){if(this.currentObj){var b=this.currentObj.find(".flipHTML5Signature-eachDate"),c=this.currentObj.parent(),d=parseInt(this.currentObj.css("left")),f=parseInt(this.currentObj.css("top"));this.currentObj.position();var g=this.currentObj.outerWidth(),h=this.currentObj.outerHeight(),k=c.width();c.height();var c=b.outerWidth(),l=b.outerHeight(),m=this.toolBar.height();d+g+2+c<=k?b.css({left:g+2,top:-24}):l+m<=f?b.css({left:g-c,top:-(l+m)}):b.css({left:g-
c,top:h+18})}},bindOnCreated:function(b,c){this.onCreated=[b,c]}});
(function(b,c,d){window.Remark=c({statics:{},create:function(){this.expires=30;this.currentEditor=b("<div>");this.backgroundColor="rgba(255, 255, 85, 0.5)";this.highlightBackcolor="rgba(2, 255, 245, 0.5)";this.fontSize=5;this.fontName="Times";this.$bookContainer=d.container();this.fontColor="black";this.title="#00000";this.opacity="1.0";this.noteImgContainers={};this.$document=b(document);this.newSizeWrap();var c=this.createToolbar(),g=this.createHighlightToolbar();c.appendChild(this.createColorSelector());
document.getElementsByTagName("body")[0].appendChild(c).appendChild(g);document.getElementsByTagName("body")[0].appendChild(g);b(window).on("beforeunload",function(){this.save()}.bind(this));this.oneBindEvent()},bindOnCreated:function(b,c){this.onCreated=[b,c]},bindCreateEvents:function(c,g,h){var k,l,m,n,p,q,t,s=this,r=Math.floor,u=c.offset().left,v=c.offset().top,w=function(b){b.preventDefault();m=b.pageX?b.pageX:b.originalEvent.touches?b.originalEvent.touches[0].pageX:0;n=b.pageY?b.pageY:b.originalEvent.touches?
b.originalEvent.touches[0].pageY:0;m&&(0>m-k?(q.left=r((m-u)/d.scale())+"px",q.width=r((k-m)/d.scale())+"px"):(q.left=r((k-u)/d.scale())+"px",q.width=r((m-k)/d.scale())+"px"));n&&(0>b.pageY-l?(q.top=r((n-v)/d.scale())+"px",q.height=r((l-n)/d.scale())+"px"):(q.top=r((l-v)/d.scale())+"px",q.height=r((n-l)/d.scale())+"px"));h&&h.draw(k,l,m,n)};c.css("cursor","crosshair");c.off("mousedown.fliphtml5Remark touchstart.fliphtml5Remark").one("mousedown.fliphtml5Remark touchstart.fliphtml5Remark",function(y){s.unbindCreateEvents();
var x=y.button;if(!document.implementation.hasFeature("MouseEvents","2.0"))switch(event.button){case 0:case 1:case 3:case 5:case 7:x=0;break;case 2:case 6:x=2;break;case 4:x=1}if(!x){y.stopPropagation();p=document.createElement("div");t=b(p).css({webkitUserSelect:"text",mozUserSelect:"text",msUserSelect:"text",oUserSelect:"text",userSelect:"text"});q=p.style;h?(t.append(h),p.className="flipHtml5Shape flipHtml5Store"):(q.backgroundColor=g?"rgba(0, 71, 255, 0.33)":s.highlightBackcolor,p.className=(g?
"flipHtml5Remark flipHtml5Store":"flipHtml5Highlight flipHtml5Store")+" flipHtml5RemarkCurrentEditor",p.setAttribute("contenteditable",g));c.find(".flipHtml5RemarkCurrentEditor").removeClass("flipHtml5RemarkCurrentEditor");c.append(p);if(x=y.originalEvent.changedTouches){var z=x[0].identifier;k=m=x[0].pageX;l=n=x[0].pageY}else k=m=y.pageX,l=n=y.pageY;s.reBindEvent(t,g);c.on("mousemove.fliphtml5Remark touchmove.fliphtml5Remark",w);c.off("mouseup.fliphtml5Remark touchend.fliphtml5Remark").one("mouseup.fliphtml5Remark touchend.fliphtml5Remark",
function(b){var h=b.originalEvent.changedTouches;if(h){if(z!==h[0].identifier)return;m=h[0].pageX;n=h[0].pageY}else m=b.pageX,n=b.pageY;c.off("mousemove.fliphtml5Remark touchmove.fliphtml5Remark");if(10>Math.abs(m-k)||10>Math.abs(n-l))q.left=r((m-u)/d.scale())+"px",q.top=r((n-v)/d.scale())+"px",q.width="280px",q.height="28px";s.parsePresentValue(p);s.parsePresentValue(s.sizeWrap);t.css({outline:"none",backgroundColor:g?s.backgroundColor:s.highlightBackcolor,color:s.fontColor});t.trigger(_event._down);
void 0!=s.onCreated&&s.onCreated[1].call(s.onCreated[0]);s.save()})}})},oneBindEvent:function(){var b=this;this.$document.on("keydown.flipHtml5RemarkDelete",function(c){var d=c.keyCode;c.altKey||c.ctrlKey||c.shiftKey||(b.editing&&d===KEY_CODE_DELETE&&b.currentEditor&&"flipHtml5Remark flipHtml5Store"!==b.currentEditor[0].className&&(b.currentEditor.remove(),b.removeSizeWrap(),b.save()),b.currentEditor&&d===KEY_CODE_LEFT&&d===KEY_CODE_RIGHT&&d===KEY_CODE_UP&&d===KEY_CODE_DOWN&&c.stopPropagation())})},
parsePresentValue:function(c){if(document.getElementsByTagName("body")[0].contains(c)){var d,h;d=c.parentNode;var k=c.style,l=b(c);h=100/d.offsetHeight;d=100/d.offsetWidth;k.width=l.width()*d+"%";k.height=l.height()*h+"%";k.left=c.offsetLeft*d+"%";k.top=c.offsetTop*h+"%"}},reBindEvent:function(c,d){var h=this,k;c.on(_event._down,function(k){k.stopPropagation();b(this).css({outline:"none"});h.removeSizeWrap();h.addSizeWrap(this,d);c.on("mousedown.flipHtml5Annotation touchstart.flipHtml5Annotation",
function(b){b.stopPropagation()})}).on("mousedown mouseup touchend",function(b){b.stopPropagation()});c.on("sizeChange",function(b,c,f,p,q){k=this.style;c&&(k.width=c-16+"px");f&&(k.height=f-16+"px");p&&(k.left=p+8+"px");q&&(k.top=q+8+"px");h.showToolbar(this,d)});c.on("change cut drop paste keydown",function(b){if(!(b.altKey||b.ctrlKey||b.shiftKey)){var c=this,d=c.offsetHeight,f=c.style,g=f.height;setTimeout(function(){f.height="auto";f.height=c.scrollHeight>d?100*c.scrollHeight/c.parentNode.offsetHeight+
"%":g},0)}})},unbindCreateEvents:function(){this.contextArray&&(this.contextArray.css("cursor","auto"),this.contextArray.off("mousedown.fliphtml5Remark touchstart.fliphtml5Remark"))},newSizeWrap:function(){var c,g,h,k,l,m,n,p,q=this,t=1,s=q.sizeWrap=document.createElement("div"),r=[],u=Math.floor,v=q.sizeWrapStyle=s.style;for(s.className="flipHtml5SizeWrap";9>t;)c=document.createElement("div"),c.className="flipHtml5SizePoint flipHtml5SizePoint"+t,s.appendChild(c),r.push(c),t++;q.northResize(r[0]).westResize(r[0]);
q.northResize(r[1]);q.eastResize(r[2]).northResize(r[2]);q.eastResize(r[3]);q.eastResize(r[4]).southResize(r[4]);q.southResize(r[5]);q.southResize(r[6]).westResize(r[6]);q.westResize(r[7]);b(s).on("pointerdown.flipHtml5SizeWrap",function(b){b.stopPropagation()});b(s).on("mousedown.flipHtml5SizeWrap touchstart.flipHtml5SizeWrap",function(c){c.preventDefault();c.stopPropagation();p=q.currentEditor;var f=s.offsetLeft,r=s.offsetTop,t=c.pageX||c.originalEvent.touches[0].pageX,E=c.pageY||c.originalEvent.touches[0].pageY;
b.each([q.$context,b(q.toolbarContainer),b(q.highlightToolbarContainer)],function(c,w){w.on("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap",function(b){b.preventDefault();b.stopPropagation();g=b.pageX?b.pageX:b.originalEvent.touches?b.originalEvent.touches[0].pageX:0;h=b.pageY?b.pageY:b.originalEvent.touches?b.originalEvent.touches[0].pageY:0;g&&(n=u(f-(t-g)/d.scale()),l!==n&&(v.left=n+"px",l=n,p.trigger("sizeChange",[0,0,n,0])));h&&(m=u(r-(E-h)/d.scale()),k!==m&&(v.top=m+"px",k=m,p.trigger("sizeChange",
[0,0,0,m])))});w.one("mouseup.flipHtml5SizeWrap touchend.flipHtml5SizeWrap",function(){b.each([q.$context,b(q.toolbarContainer),b(q.highlightToolbarContainer)],function(){this.off("mouseup.flipHtml5SizeWrap touchend.flipHtml5SizeWrap");this.off("mousemove.flipHtml5SizeWrap touchmove.flipHtml5SizeWrap")});q.parsePresentValue(p[0]);q.parsePresentValue(s);q.save()})})}).on(_event._down,function(b){b.preventDefault();b.stopPropagation()});return s},addSizeWrap:function(c,d){var h=this.sizeWrap,k=this.sizeWrap.style;
d?(c.style.zIndex=999,k.zIndex=998):(c.style.zIndex=998,k.zIndex=999);k.width=c.offsetWidth+16+"px";k.height=c.offsetHeight+16+"px";k.left=c.offsetLeft-8+"px";k.top=c.offsetTop-8+"px";k.display="block";c=b(c);this.$context=c.parent();c.before(h);this.parsePresentValue(h);this.currentEditor=c;this.showToolbar(c,d);this.editing=!0},removeSizeWrap:function(){this.currentEditor[0].style.zIndex="2";this.sizeWrapStyle.zIndex="1";this.sizeWrapStyle.display="none";this.hideToolbar();this.editing=!1},hideToolbar:function(){this.toolbarContainer.style.display=
"none";this.highlightToolbarContainer.style.display="none"},showToolbar:function(c,d){var h=d?this.toolbarContainer:this.highlightToolbarContainer,k=h.style,l=b(c),m=l.css("backgroundColor").replace(/\s+/g,"");0<=m.indexOf("rgba")&&(m=m.replace(/a/,"").replace(/\,[0-9]+(\.[0-9]*)?\)/,")"));b(h).find(".flipHtml5RemarkImage-backcolor").css("backgroundColor",m);this.currentEditor=l;k.left=l.offset().left-8+"px";k.top=l.offset().top-(d?80:30)+"px";k.display="block"},createToolbar:function(){for(var c=
this.toolbarContainer=document.createElement("div"),d=0,h="bold italic strikeThrough underline forecolor backcolor blockquote insertUnorderedList insertOrderedList justifyLeft justifyCenter justifyRight createLink removeFormat outdent indent undo redo delete paragraph fontsize fontname".split(" ");h[d];)c.appendChild(this.createButton(h[d])),d++;c.className="fliphtml5RemarkToolbarContainer";b(c).on(_event._down,function(b){b.stopPropagation()});return c},createHighlightToolbar:function(){for(var c=
this.highlightToolbarContainer=document.createElement("div"),d=0,h=["backcolor","delete"];h[d];)c.appendChild(this.createButton(h[d],!0)),d++;c.className="fliphtml5RemarkHighlightToolbarContainer";b(c).on(_event._down,function(b){b.preventDefault();b.stopPropagation()});return c},createButton:function(c,d){var h=this,k,l;switch(c){case "hr":return l=document.createElement("hr"),l.className="flipHtml5RemarkHr",l;case "paragraph":return k="Paragraph;Address;Preformatted;Title 1;Title 2;Title 3;Title 4;Title 5;Title 6".split(";"),
l="p address pre h1 h2 h3 h4 h5 h6".split(" "),l=h.createSelect(k,l,c);case "fontname":return k="Arial Century Courier Gentium Georgiae Impact King Lalit Modena Papyrus Tahoma TeX Times Verdana Verona cursive fantasy monospace serif".split(" "),l="Arial Century Courier Gentium Georgiae Impact King Lalit Modena Papyrus Tahoma TeX Times Verdana Verona cursive fantasy monospace serif".split(" "),l=h.createSelect(k,l,c,"fontFamily");case "fontsize":return k=[1,2,3,4,5,6,7],l=[1,2,3,4,5,6,7],l=h.createSelect(k,
l,c,"fontSize");case "forecolor":return h.createColorButton(c);case "backcolor":return h.createColorButton(c,d);default:return k=document.createElement("a"),k.href="javascript:void(0);",l=document.createElement("div"),l.className="flipHtml5RemarkButtonImage flipHtml5RemarkImage-"+c,l.title=c,k.className="flipHtml5RemarkButton",b(k).on(_event._down,function(b){b.preventDefault();b.stopPropagation();h.exec(c)}),k.appendChild(l),k}},createColorButton:function(c,d){var h,k,l,m,n=this,p;h=document.createElement("a");
h.href="javascript:void(0);";k=document.createElement("div");k.className="flipHtml5RemarkButtonImage flipHtml5RemarkImage-"+c;k.title=c;h.className="flipHtml5RemarkButton";l=document.createElement("div");l.className="flipHtml5RemarkColorBar";"backcolor"===c&&(l.style.display="none");b(h).on(_event._down,function(q){q.preventDefault();q.stopPropagation();p=n.opacityHandel;m=n.colorSelector;b(h).after(m);m.style.left=this.offsetLeft+"px";m.style.top=this.offsetTop+22+"px";m.style.display="block";"forecolor"===
c&&(p.hide(),n.opacity=1);"backcolor"===c&&(n.opacity=p.val(),p.show());p.setOpacity(parseFloat(parseFloat(n.currentEditor.css("backgroundColor").replace(/\s*\)*/g,"").split(",")[3]).toFixed(2)));n.$context.one(_event._down,function(b){b.preventDefault();m.style.display="none"});n.currentEditor.one(_event._down,function(b){b.preventDefault();m.style.display="none"});n.$bookContainer.one(_event._down,function(b){b.preventDefault();m.style.display="none"});n.$colorSelector.off("colorSelected").one("colorSelected",
function(b,h){b.preventDefault();"backcolor"===c?k.style.backgroundColor=h:l.style.backgroundColor=h;m.style.display="none";n.exec(c,h,d)})});h.appendChild(l);h.appendChild(k);return h},createSelect:function(b,c,d,k,l){var m=document.createElement("select"),n=0,p=this,q;m.className="flipHtml5RemarkSelect flipHtml5Remark-"+d;for(m.style[k]=c[1];b[n];)q=document.createElement("option"),q.className="flipHtml5RemarkOption-"+d+" flipHtml5RemarkOption-"+c[n],q.innerHTML=b[n],q.value=c[n],q.style[k]=c[n],
0===n&&(q.setAttribute("selected",!0),l&&(q.style.display="none")),m.appendChild(q),n++;m.onchange=k?function(){p.exec(d,this[this.selectedIndex].value);this.style[k]=this[this.selectedIndex].value;l&&(this.selectedIndex=0)}:function(){p.exec(this[this.selectedIndex].value);l&&(this.selectedIndex=0)};return m},createColorSelector:function(){var c,d,h,k,l=this,m="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" "),
n=document.createElement("table"),p=this.colorSelector=document.createElement("a"),q=this.$colorSelector=b(p),t=document.createElement("input"),s=l.createOpacityPlugin(),r=function(){t.value=t.style.backgroundColor=this.title.toUpperCase()},u=function(){q.trigger("colorSelected",[l.parseColorToRGBA(this.title,s.val())])};p.className="flipHtml5RemarkColorSelectorWrap";n.setAttribute("border","1");p.style.display="none";p.href="javascript:void(0);";t.className="flipHtml5RemarkColorSelectorMessage";
t.value="#000000";t.setAttribute("disabled","true");p.appendChild(t);p.appendChild(s.container);p.appendChild(n);q.on(_event._down,function(b){b.preventDefault();b.stopPropagation()});for(h=0;7>h;h++){k=document.createElement("tr");for(d=0;10>d;d++)c=document.createElement("td"),c.className="flipHtml5RemarkColorSelectorBlock",c.title=m[10*h+d],c.style.backgroundColor=m[10*h+d],b(c).on(_event._over,r),b(c).on(_event._down,u),k.appendChild(c);n.appendChild(k)}return p},createOpacityPlugin:function(){var c,
d,h,k,l,m,n=0.5,p=this,q=Math.floor,t=document.createElement("div"),s=document.createElement("div"),r=document.createElement("span"),u=s.style,v,w=p.$document,y=p.changeOpacity,x=b(s),z=b(t);r.className="flipHtml5RemarkOpacitySpan";t.className="flipHtml5RemarkOpacity";t.style.height="3px";t.style.top="4px";s.className="flipHtml5RemarkOpacityCursor";s.style.top="-5px";t.appendChild(r);t.appendChild(s);z.on(_event._down,function(b){b.preventDefault();b.stopPropagation();v=p.currentEditor;if(d=b.pageX?
b.pageX:b.originalEvent.touches?b.originalEvent.touches[0].pageX:0)h=d-z.offset().left,0>h&&(h=0),145<h&&(h=145),u.left=h+"px",v.css("backgroundColor",y(v,h/145)),r.innerHTML="Opacity: "+(h/145).toFixed(2),n=h/145});x.on("mousedown touchstart",function(b){b.preventDefault();b.stopPropagation();v=p.currentEditor;h=k=parseInt(u.left,10);c=b.pageX?b.pageX:b.originalEvent.touches?b.originalEvent.touches[0].pageX:0;l=h-c;w.on("mousemove.flipHtml5RemarkOpacity touchmove.flipHtml5RemarkOpacity",function(b){b.preventDefault();
b.stopPropagation();if(d=b.pageX?b.pageX:b.originalEvent.touches?b.originalEvent.touches[0].pageX:0)m=q(l+d),0>m&&(m=0),145<m&&(m=145),k!==m&&(u.left=m+"px",v.css("backgroundColor",y(v,m/145)),r.innerHTML="Opacity: "+(m/145).toFixed(2),n=m/145)});w.one("mouseup touchend",function(){w.off("mousemove.flipHtml5RemarkOpacity touchmove.flipHtml5RemarkOpacity")})});return this.opacityHandel={val:function(b){b&&(b=parseInt(b,10)||1,1<b&&(b=1),0>b&&(b=0),this.setOpacity(b),n=b);return n},container:t,show:function(){t.style.display=
""},hide:function(){t.style.display="none"},setOpacity:function(b){if(void 0===b||1<b||isNaN(b))b=1;0>b&&(b=0);u.left=145*b+"px";r.innerHTML="Opacity: "+b;n=b}}},changeOpacity:function(b,c){var d=b.css("backgroundColor").replace(/\s*/g,"");0<=d.indexOf("rgba")&&(0<=d.indexOf(",0)")||0<=d.indexOf(",1)"))?b.css("backgroundColor",d.replace(/b\(/,"ba(").replace(/,\d*\)$/,","+c+")")):b.css("backgroundColor",d.replace(/b\(/,"ba(").replace(/d*\)$/,","+c+")").replace(/\d*\.\d*,/g,""))},parseColorToRGBA:function(b,
c){var d,k,l;c=parseFloat(c);1<=c&&(c=1);0>=c&&(c=0);d=parseInt(b.substring(1,3),16);k=parseInt(b.substring(3,5),16);l=parseInt(b.substring(5,7),16);return"rgba("+d+","+k+","+l+","+c+")"},exec:function(b,c,d){switch(b){case "h1":case "h2":case "h3":case "h4":case "h5":case "h6":case "address":case "pre":case "p":case "blockquote":document.execCommand("formatBlock",!1,b);break;case "createLink":(b=prompt("Enter a URL here","http://"))&&""!==b&&"http://"!==b&&(0>b.indexOf("http")&&(b="http://"+b),document.execCommand("createLink",
!0,b));break;case "fontsize":document.execCommand(b,!1,c);break;case "fontname":document.execCommand(b,!1,c);this.fontName=c;break;case "forecolor":document.execCommand(b,!1,c);this.fontColor=c;break;case "backcolor":this.currentEditor[0].style.backgroundColor=c;d?this.highlightBackcolor=c:this.backgroundColor=c;break;case "delete":this.removeSizeWrap();this.currentEditor.remove();this.save();break;default:document.execCommand(b,!1,null)}this.currentEditor.trigger(_event._down)},northResize:function(c){var g,
h,k,l,m,n=this,p=Math.floor,q,t;b(c).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();h=n.currentEditor;q=n.sizeWrap;t=n.sizeWrapStyle;m=n.$context;var c=q.offsetHeight||20,f=b.pageY||b.originalEvent.touches[0].pageY;m.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){m.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");n.parsePresentValue(h[0]);n.parsePresentValue(q);n.save()});
m.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();b.pageY?g=b.pageY:b.originalEvent.touches&&(g=b.originalEvent.touches[0].pageY);g&&(l=p(c+(f-g)/d.scale()),k!==l&&20<l&&(t.top=g-m.offset().top+"px",t.height=l+"px",k=l,h.trigger("sizeChange",[0,l,0,g-m.offset().top])))})});return this},westResize:function(c){var g,h,k,l,m,n=this,p=Math.floor,q,t;b(c).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(b){b.preventDefault();
b.stopPropagation();m=n.$context;q=n.sizeWrap;t=n.sizeWrapStyle;l=n.currentEditor;var c=q.offsetWidth||40,f=b.pageX||b.originalEvent.touches[0].pageX;m.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){m.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");n.parsePresentValue(l[0]);n.parsePresentValue(q);n.save()});m.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();!(g=b.pageX)&&b.originalEvent.touches&&
(g=b.originalEvent.touches[0].pageX);g&&(k=p(c+(f-g)/d.scale()),h!==k&&40<k&&(t.left=g-m.offset().left+"px",t.width=k+"px",h=k,l.trigger("sizeChange",[k,0,g-m.offset().left])))})});return this},eastResize:function(c){var g,h,k,l,m,n=this,p=Math.floor,q,t;b(c).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();k=n.currentEditor;m=n.$context;q=n.sizeWrap;t=n.sizeWrapStyle;var c=q.offsetWidth||40,f=b.pageX||b.originalEvent.touches[0].pageX;
m.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){m.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");n.parsePresentValue(k[0]);n.parsePresentValue(q);n.save()});m.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();b.pageX?g=b.pageX:b.originalEvent.touches&&(g=b.originalEvent.touches[0].pageX);g&&(h=p(c-(f-g)/d.scale()),l!==h&&40<h&&(t.width=h+"px",l=h,k.trigger("sizeChange",[h])))})});
return this},southResize:function(c){var g,h,k,l,m=this,n=Math.floor,p,q,t;b(c).on("mousedown.fliphtml5RemarkResize touchstart.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();l=m.$context;t=m.sizeWrap;q=m.sizeWrapStyle;h=m.currentEditor;var c=t.offsetHeight||20,f=b.pageY||b.originalEvent.touches[0].pageY;l.one("mouseup.fliphtml5RemarkResize touchend.fliphtml5RemarkResize",function(){l.off("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize");m.parsePresentValue(h[0]);
m.parsePresentValue(t);m.save()});l.on("mousemove.fliphtml5RemarkResize touchmove.fliphtml5RemarkResize",function(b){b.preventDefault();b.stopPropagation();b.pageY?g=b.pageY:b.originalEvent.touches&&(g=b.originalEvent.touches[0].pageY);g&&(k=n(c-(f-g)/d.scale()),p!==k&&20<k&&(q.height=k+"px",p=k,h.trigger("sizeChange",[0,k])))})});return this},parseRemark:function(c,d){var h,k=this,l;d.find(".flipHtml5Store").remove();k.removeSizeWrap();this.sizeWrapStyle&&(this.sizeWrapStyle.display="none",b(this.sizeWrap).remove());
k.newSizeWrap();k.contextArray=k.contextArray?k.contextArray.add(d):d;try{window.localStorage?h=window.localStorage.getItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+c)||"":(l=RegExp("(?:(?:^|.*;\\s*)"+window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+c+"\\s*\\=\\s*([^;]*).*$)|^.*$"),h=(document.cookie||"").replace(l,"$1")),d.append(h.replace(/#@&/g,";")),d.find(".flipHtml5Remark").each(function(){k.reBindEvent(b(this),!0)}),d.find(".flipHtml5Highlight").each(function(){k.reBindEvent(b(this),
!1)}),d.on("mousedown.fliphtml5remarkHide touchstart.fliphtml5remarkHide",function(){k.save();k.removeSizeWrap();k.currentEditor.blur();k.currentEditor.off("mousedown.flipHtml5Annotation touchstart.flipHtml5Annotation")})}catch(m){}},getPageContent:function(c){var d=0,h,k="";for(c=c.find(".flipHtml5Store");h=c[d];)if(d++,""!==h.innerHTML&&""!==b(h).text()||""!==h.style.backgroundColor&&"transparent"!==h.style.backgroundColor&&0!==parseFloat(h.style.backgroundColor.split(",")[3]))k+=h.outerHTML;return k.replace(/\s*\n\s*/g,
"").replace(/;/g,"#@&")},storageByIndex:function(b,c){var d,k=this.getPageContent(c);try{window.localStorage?(window.localStorage.removeItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+b),k&&window.localStorage.setItem(window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+b,k)):(k?(d=new Date,d.setDate(d.getDate()+this.expires)):d=new Date("01 Jan 1970 00:00:01"),document.cookie=window.location.href.replace(window.location.hash,"")+"flipHtml5Remark"+b+
"="+k+";expires="+d.toUTCString()+";")}catch(l){throw l;}return k},save:function(){var b,c=d.getCurrentPages();for(b=0;b<c.length&&this.noteImgContainers[d.getBookType()];b++)this.noteImgContainers[d.getBookType()][c[b]]&&this.storageByIndex(c[b],this.noteImgContainers[d.getBookType()][c[b]])},restoreRemark:function(b,c,h){void 0!==b&&(this.noteImgContainers[b]||(this.noteImgContainers[b]={}),this.noteImgContainers[b][c]=h,b==d.getBookType()&&(this.removeSizeWrap(),this.parseRemark(c,this.noteImgContainers[d.getBookType()][c])))},
setContainers:function(b,c,d){this.restoreRemark(b,c,d)},addHighlightEvent:function(){this.unbindCreateEvents();this.addEvents(!0)},addEvents:function(b){var c=0,d,k=this.contextArray;for(this.unbindCreateEvents();d=k.eq(c++),0<d.length;)this.bindCreateEvents(d,!b)},destroy:function(b){if(b)try{window.localStorage.clear()}catch(c){throw c;}this.$document.off("keydown.flipHtml5RemarkDelete");return this.unbindCreateEvents()}})})(window.jQuery,window.Class,window.BookInfo);
var ReportPanel = Class({});jQuery.fn.colorSelection=function(b){this.getColor=function(){return this.color}.bind(this);this.refreshColor=function(){var b=getRandomColor();this.setColor(b)}.bind(this);this.setColor=function(b){this.color=b;$(this).css("background-color",b);$(this).attr("data-color",b)}.bind(this);this.create=function(b){var d=this;b=b?b:getRandomColor();this.setColor(b);this.colorPanel=new ColorPanel(this);this.on("click touchstart",function(b){var c=$(this).offset().left;c>windowWidth-d.colorPanel.table.width()&&
(c=windowWidth-d.colorPanel.table.width()-5);d.colorPanel.setPosition(c,$(this).offset().top+$(this).outerHeight());d.colorPanel.show();b.stopPropagation()})}.bind(this);this.getColorPanel=function(){return this.colorPanel}.bind(this);this.hideColorPanel=function(){this.colorPanel.hide()}.bind(this);this.create(b)};
var ColorPanel=function(b){this.helixColors="#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" ");this.table=
$("<table class='color_panel' border=1></table>");this.addItem();$("body").append(this.table);this.selection=b};
ColorPanel.prototype={addItem:function(){for(var b=this,c=0;7>c;c++){for(var d=$("<tr></tr>"),f=0;10>f;f++){var g=$("<td></td>"),h=this.helixColors[10*c+f];g.attr("title",h);g.css("background-color",h);g.on("mouseenter",function(){b.showColorSelection(this.title)});g.on("click touchstart",function(){b.colorSelected(this.title)});d.append(g)}this.table.append(d)}},showColorSelection:function(b){b=b.toUpperCase();this.selection.setColor(b)},colorSelected:function(b){this.hide();b=b.toUpperCase();this.selection.setColor(b)},
hide:function(){this.table.hide()},show:function(){this.table.css("display","table-cell")},setPosition:function(b,c){this.table.css({left:b+"px",top:c+"px"})}};
var getRandomColor=function(){return"#"+Math.floor(2236962+7829367*Math.random()).toString(16)},BookmarkElements=Class({create:function(b){this._super(b);this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.input=$("<input class='input_title'></input>");this.colorSelection=$("<input class='colorSelection' type='text'></input>");this.colorSelection.colorSelection();this.rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.remove=$("<div class='removeAll button_hover'>"+
getLanguage("lblRemoveAll","Remove All")+"</div>")},initRightToLeftDefaultDom:function(){this.leftAddPage=$("<div class='add_page left button_hover'><span class='pageIndex'></span> <span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span></div>");this.rightAddPage=$("<div class='add_page button_hover'><span class='pageIndex'></span> <span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span></div>");this.bookmarkListTitle=$("<div class='list_title'><span class='edit'>"+
getLanguage("lblEdit","Edit")+"</span><span class='description'>"+getLanguage("lblDescription","Title")+"</span><span class='page'>"+getLanguage("lblPage","Page")+"</span></div>")},initLeftToRightDefaultDom:function(){this.leftAddPage=$("<div class='add_page left'><span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span> <span class='pageIndex'></span></div>");this.rightAddPage=$("<div class='add_page'><span class='title'>"+getLanguage("lblAddToPage","Add To Page")+"</span> <span class='pageIndex'></span></div>");
this.bookmarkListTitle=$("<div class='list_title'><span class='page'>"+getLanguage("lblPage","Page")+"</span><span class='description'>"+getLanguage("lblDescription","Title")+"</span><span class='edit'>"+getLanguage("lblEdit","Edit")+"</span></div>")},pickElements:function(b){b&&(b.input=this.input,b.colorSelection=this.colorSelection,b.remove=this.remove,b.leftAddPage=this.leftAddPage,b.rightAddPage=this.rightAddPage,b.bookmarkListTitle=this.bookmarkListTitle)},initEvent:function(b){this.leftAddPage.click(function(){var c=
{pageIndex:this.leftPageIndex,caption:this.input.val(),color:this.colorSelection.getColor()};b.addItem(c)}.bind(this));this.rightAddPage.click(function(){var c={pageIndex:this.rightPageIndex,caption:this.input.val(),color:this.colorSelection.getColor()};b.addItem(c)}.bind(this));this.remove.click(function(){b.removeAll()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(b){b.stopPropagation()})},refreshElements:function(){this.refreshAddPageButtonOnPc();
this.refreshAddPageButtonOnPhone()},refreshAddPageButtonOnPc:function(){if(!isPhone()&&!isPad()){0>=this.bookmarkList.getLength()?this.remove.hide():this.remove.show();var b=BookInfo.getCurrentPages();this.leftPageIndex=parseInt(b[0]);this.rightPageIndex=parseInt(b[1]);this.showOrHideAddPageBtn();this.focusAddPageBtn()}},refreshAddPageButtonOnPhone:function(){if(isPhone()||isPad()){for(var b=BookInfo.getCurrentPages(),c=0;c<b.length;c++)if(this.bookmarkList.inList(b[c])){toolBar.buttons.find("PhoneBookmarkButton",
!0).get(0).setAsAdded();return}toolBar.buttons.find("PhoneBookmarkButton",!0).get(0).setAsUnAdded()}},showOrHideAddPageBtn:function(){this.leftPageIndex?(this.leftAddPage.find(".pageIndex").html(getShownPageNumber(this.leftPageIndex)),this.leftAddPage.show()):this.leftAddPage.hide();this.rightPageIndex?(this.rightAddPage.find(".pageIndex").html(getShownPageNumber(this.rightPageIndex)),this.rightAddPage.show()):this.rightAddPage.hide()},focusAddPageBtn:function(){this.leftPageIndex&&!this.bookmarkList.inList(this.leftPageIndex)?
(this.leftAddPage.removeClass("disable"),this.leftAddPage.addClass("usable"),this.leftAddPage.addClass("button_hover")):(this.leftAddPage.addClass("disable"),this.leftAddPage.removeClass("usable"),this.leftAddPage.removeClass("button_hover"));this.rightPageIndex&&!this.bookmarkList.inList(this.rightPageIndex)?(this.rightAddPage.removeClass("disable"),this.rightAddPage.addClass("usable"),this.rightAddPage.addClass("button_hover")):(this.rightAddPage.addClass("disable"),this.rightAddPage.removeClass("usable"),
this.rightAddPage.removeClass("button_hover"))},changeLanguage:function(){this.remove.html(getLanguage("lblRemoveAll","Remove All"));this.leftAddPage.find(".title").html(getLanguage("lblAddToPage","Add To Page"));this.rightAddPage.find(".title").html(getLanguage("lblAddToPage","Add To Page"));this.bookmarkListTitle.find(".edit").html(getLanguage("lblEdit","Edit"));this.bookmarkListTitle.find(".description").html(getLanguage("lblDescription","Title"));this.bookmarkListTitle.find(".page").html(getLanguage("lblPage",
"Page"));var b=this.bookmarkListPanel.bookmarkSwiperList;b.find(".save").attr("title",getLanguage("lblSave","Save"));b.find(".cancel").attr("title",getLanguage("lblCancel","Cancel"));b.find(".edit").attr("title",getLanguage("lblEdit","Edit"));b.find(".delete").attr("title",getLanguage("lblDelete","Delete"))}}).extend(FormElements),BookmarkItem=Class({create:function(b,c){this.callback=c;this.parm={color:b.color,caption:b.caption,pageIndex:parseInt(b.pageIndex)};this.item=$("<div class='item' pageIndex='"+
parseInt(b.pageIndex)+"' id='bookmark_item"+parseInt(b.pageIndex)+"'></div>");this.saveUrl=form_icons.save?"data:image/png;base64,"+form_icons.save:uiBaseURL+"save.png";this.cancelUrl=form_icons.cancel?"data:image/png;base64,"+form_icons.cancel:uiBaseURL+"cancel.png";this.editUrl=form_icons.edit?"data:image/png;base64,"+form_icons.edit:uiBaseURL+"edit.png";this.deleteUrl=form_icons["delete"]?"data:image/png;base64,"+form_icons["delete"]:uiBaseURL+"delete.png";this.fontColor=b.fontColor;this.color=
b.color;this.caption=b.caption;this.pageCaption=getShownPageNumber(parseInt(b.pageIndex));this.pageIndex=parseInt(b.pageIndex);this.colorObj=Color(this.fontColor);this.initDefaultDom();this.initHtml();this.initEvent()},initHtml:function(){rightToLeft?this.initRightToLeftHtml():this.initLeftToRightHtml();this.deleteIcon.changeButtonColor(this.fontColor);this.edit.changeButtonColor(this.fontColor);this.cancel.changeButtonColor(this.fontColor);this.save.changeButtonColor(this.fontColor)},initRightToLeftHtml:function(){this.item.append(this.deleteIcon);
this.item.append(this.edit);this.item.append(this.cancel);this.item.append(this.save);this.item.append(this.title);this.item.append(this.colorSelection);this.item.append(this.page)},initLeftToRightHtml:function(){this.item.append(this.page);this.item.append(this.title);this.item.append(this.colorSelection);this.item.append(this.save);this.item.append(this.cancel);this.item.append(this.edit);this.item.append(this.deleteIcon)},initDefaultDom:function(){this.page=$("<span class='page'>"+this.pageCaption+
"</span>");this.title=$("<input class='title' title='"+this.caption+"' value='"+this.caption+"' disabled='disabled'></input>");this.colorSelection=$("<input class='colorSelection' type='text'></input>");this.colorSelection.colorSelection(this.color);this.save=$("<img class='save' title='"+getLanguage("lblSave","Save")+"' src='"+this.saveUrl+"'/>");this.cancel=$("<img class='cancel' title='"+getLanguage("lblCancel","Cancel")+"' src='"+this.cancelUrl+"'/>");this.edit=$("<img class='edit' title='"+getLanguage("lblEdit",
"Edit")+"' src='"+this.editUrl+"'/>");this.deleteIcon=$("<img class='delete' title='"+getLanguage("lblDelete","Delete")+"' src='"+this.deleteUrl+"'/>");this.title.css({color:this.fontColor})},appendTo:function(b){b.append(this.item)},insertBefore:function(b){this.item.insertBefore(b)},insertAfter:function(b){this.item.insertAfter(b)},initEvent:function(){this.edit.onTap(function(){this.startEdit()}.bind(this));this.cancel.onTap(function(){this.endEdit();this.cancelData()}.bind(this));this.save.onTap(function(){this.endEdit();
this.saveData()}.bind(this));this.deleteIcon.onTap(function(){this.item.remove();this.callback.deleteItem(this.parm.pageIndex)}.bind(this));this.item.onTap(function(){this.lightItem();this.judgeToSaveOrCancel();gotoPageFun(this.pageIndex)}.bind(this));this.title.bind("keypress",function(b){"13"==b.keyCode&&(this.endEdit(),this.saveData())}.bind(this))},saveData:function(){var b=this.colorSelection.getColor(),c=this.title.val();if(c!=this.caption||b!=this.color)this.caption=c,this.color=b,this.parm=
{pageIndex:this.pageIndex,caption:this.caption,color:this.color},this.callback.editItem(this.parm)},cancelData:function(){var b=this.colorSelection.getColor();this.title.val()!=this.caption&&this.title.val(this.caption);b!=this.color&&this.colorSelection.setColor(this.color)},endEdit:function(){this.colorSelection.hide();this.colorSelection.hideColorPanel();this.cancel.hide();this.save.hide();this.edit.show();this.title.css({background:"transparent",color:this.fontColor});this.title.attr("disabled",
"disabled");global.bookmark.editingItem=null},startEdit:function(){this.judgeToSaveOrCancel();this.lightItem();this.colorSelection.show();this.cancel.show();this.save.show();this.edit.hide();this.title.css({background:"#ffffff",color:"#000000"});this.title.removeAttr("disabled");global.bookmark.editingItem=this;this.cancel.changeButtonColor(this.fontColor);this.save.changeButtonColor(this.fontColor)},judgeToSaveOrCancel:function(){global.bookmark.editingItem&&global.bookmark.editingItem!=this&&(global.bookmark.editingItem.cancelData(),
global.bookmark.editingItem.endEdit())},lightItem:function(){$(".bookmarkItem_focus").css({background:"transparent"});$(".bookmarkItem_focus").removeClass("bookmarkItem_focus");this.item.addClass("bookmarkItem_focus");this.item.css({background:this.colorObj.rgba(0.25)})},changeLanguage:function(){this.save.attr("title",getLanguage("lblSave","Save"));this.cancel.attr("title",getLanguage("lblCancel","Cancel"));this.edit.attr("title",getLanguage("lblEdit","Edit"));this.deleteIcon.attr("title",getLanguage("lblDelete",
"Delete"))}}),PhoneBookmarkItem=Class({create:function(b,c){this.parm=b;this.color=b.color;this.caption=b.caption;this.pageCaption="P:"+parseInt(b.pageIndex);this.pageIndex=parseInt(b.pageIndex);this.callback=c;this.item=$("<div class='item'></div>");this.page=$("<span class='page'>P:"+this.pageIndex+"</span>");this.image=$("<img class='thumbnail' src='"+getPageDir(this.pageIndex,"thumb",originTotalPageCount)+"'/>");this.caption=$("<span class='title'>"+this.caption+"</span>");this.deleteBtn=$("<div class='delete'></div>");
this.item.append(this.page);this.item.append(this.image);this.item.append(this.caption);this.item.append(this.deleteBtn);this.initEvent()},appendTo:function(b){b.append(this.item)},initEvent:function(){this.deleteBtn.click(function(){this.item.remove();this.callback.deleteItem(this.pageIndex)}.bind(this));this.item.click(function(){gotoPageFun(this.pageIndex)}.bind(this))},changeLanguage:function(){}}),AnalysisBookmark=Class({create:function(){this.bookmarkList=[];this.bookmarkDetaildList=[];this.key=
window.location.href.replace(window.location.hash,"")+"BookMark";this.refresh()},refresh:function(){var b=this.getListFromLocalStorage();if(b&&0!=b.length){for(var c=0;c<b.length;c++)parseInt(b[c].pageIndex)&&this.bookmarkList.push(parseInt(b[c].pageIndex));this.bookmarkDetaildList=b}},getListFromLocalStorage:function(){var b=this.getLocalStorage(this.key);return Instance.parse(b)},getList:function(){return this.bookmarkList},getItem:function(b){for(var c,d=0;d<this.bookmarkDetaildList.length;d++)if(parseInt(this.bookmarkDetaildList[d].pageIndex)==
parseInt(b)){c=this.bookmarkDetaildList[d];break}return c},editItem:function(b){for(var c=b.pageIndex,d=0;d<this.bookmarkDetaildList.length;d++)if(parseInt(this.bookmarkDetaildList[d].pageIndex)==parseInt(c)){this.bookmarkDetaildList[d].caption=b.caption;this.bookmarkDetaildList[d].color=b.color;break}this.refreshLocalStorage()},addItem:function(b){var c=b.pageIndex;0>this.bookmarkList.indexOf(c)&&(this.bookmarkList.push(c),this.bookmarkDetaildList.push(b),this.sortList())},deleteItem:function(b){for(var c=
0;c<this.bookmarkDetaildList.length;c++)if(parseInt(this.bookmarkDetaildList[c].pageIndex)==parseInt(b)){this.bookmarkDetaildList.remove(c);this.bookmarkList.remove(c);break}this.refreshLocalStorage()},removeAll:function(){this.bookmarkList=[];this.bookmarkDetaildList=[];this.deleteLocalStorage(this.key)},sortList:function(){this.bookmarkList.sort(function(b,c){return b-c});for(var b=[],c=0;c<this.bookmarkList.length;c++)for(var d=this.bookmarkList[c],f=0;f<this.bookmarkDetaildList.length;f++)if(parseInt(this.bookmarkDetaildList[f].pageIndex)==
parseInt(d)){b.push(this.bookmarkDetaildList[f]);break}this.bookmarkDetaildList=b;this.refreshLocalStorage()},getLocalStorage:function(b){try{if(window.localStorage[b])return window.localStorage.getItem(b)}catch(c){}},refreshLocalStorage:function(){try{window.localStorage&&window.localStorage.setItem(this.key,Instance.JSON(this.bookmarkDetaildList))}catch(b){}},deleteLocalStorage:function(b){try{window.localStorage[b]&&window.localStorage.setItem(b,"")}catch(c){}}}),BookmarkListData=Class({create:function(){this.initStaticList();
this.initBookmarkList()},initBookmarkList:function(){this.analysisData=new AnalysisBookmark;this.bookmarkList=this.analysisData.getList()},initStaticList:function(){this.staticList=[];if(!isPhone()&&!isPad()&&bmtConfig){var b=bmtConfig;bmtConfig.tabs&&(b=bmtConfig.tabs);if(0!=b.length)for(var c=b.length,d=0;d<c;d++)this.staticList.push(b[d].pageIndex)}},addItem:function(b){this.inList(b.pageIndex)||this.analysisData.addItem(b)},deleteItem:function(b){this.analysisData.deleteItem(b)},editItem:function(b){this.analysisData.editItem(b)},
refresh:function(){this.bookmarkList=this.analysisData.getList()},inList:function(b){return 0<=this.staticList.indexOf(b)||0<=this.bookmarkList.indexOf(b)?!0:!1},removeAll:function(){this.analysisData.removeAll()},getItem:function(b){return this.analysisData.getItem(b)},getList:function(){return this.bookmarkList},getNextItem:function(b){for(var c=0,d=this.bookmarkList.length,f=0;f<d;f++)if(this.bookmarkList[f]>b){c=this.bookmarkList[f];break}return c},getPrevItem:function(b){for(var c=0,d=this.bookmarkList.length,
f=0;f<d;f++)if(this.bookmarkList[f]>b){c=this.bookmarkList[f-1];break}return c},getLength:function(){return this.bookmarkList.length}}),BookmarkListPanel=Class({create:function(b){this.callback=b;this.bookmarkList=new BookmarkListData;this.initSwiper()},onCreate:function(){},initSwiper:function(){this.bookmarkSwiper=$("<div class='bookmarkSwiper stage'></div>");this.bookmarkSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");
this.refreshSwiper();this.bookmarkSwiper.append(this.bookmarkSwiperList);isPhone()||isPad()?this.bookmarkSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.bookmarkSwiper.append(this.progress),this.progress.append(this.progressBar),this.bookmarkSwiper.scroll({},Direction.top))},refreshSwiper:function(){for(var b=this.bookmarkList.getList(),c=b.length,
d=0;d<c;d++)this.refreshItem(b[d])},refreshItem:function(b){b=this.bookmarkList.getItem(b);this.newItem(b).appendTo(this.bookmarkSwiperList)},newItem:function(b){return new BookmarkItem(b,this.callback)},refreshListPanel:function(){if(!isPhone()&&!isPad()){this.bookmarkSwiper.css({height:"auto"});this.bookmarkSwiperList.css({position:"relative"});var b=this.bookmarkSwiper.height();this.bookmarkSwiper.find(".swiper").height();b>=this.maxHeight?(this.bookmarkSwiper.css({height:this.maxHeight+"px"}),
this.bookmarkSwiperList.css({position:"absolute"})):this.bookmarkSwiperList.css({top:0});this.bookmarkSwiper.refreshData&&this.bookmarkSwiper.refreshData()}},addItem:function(b){if(!this.bookmarkList.inList(b.pageIndex)){var c=this.newItem(b);this.bookmarkList.addItem(b);if(1==this.bookmarkList.getLength())c.appendTo(this.bookmarkSwiperList);else{var d=this.getPrevItem(b.pageIndex);b=this.getNextItem(b.pageIndex);d.attr("pageIndex")?c.insertAfter(d):b.attr("pageIndex")?c.insertBefore(b):c.appendTo(this.bookmarkSwiperList)}this.refreshPanel()}},
deleteItem:function(b){this.bookmarkList.deleteItem(b);this.refreshPanel()},editItem:function(b){this.bookmarkList.editItem(b);this.refreshPanel()},refresh:function(){this.bookmarkList.refresh()},getLength:function(){},inList:function(b){return this.bookmarkList.inList(b)?!0:!1},removeAll:function(){this.bookmarkSwiperList.empty();this.bookmarkList.removeAll()},getNextItem:function(b){b=this.bookmarkList.getNextItem(b);return $("#bookmark_item"+b)},getPrevItem:function(b){b=this.bookmarkList.getPrevItem(b);
return $("#bookmark_item"+b)},refreshPanel:function(){this.refresh();this.refreshListPanel();BookInfo.getBook()&&BookInfo.getBook().bmt&&BookInfo.getBook().bmt.reload()},onResize:function(b,c){this.maxHeight=c;this.bookmarkSwiper.css("height",c+"px")}}),PhoneBookmarkListPanel=Class({create:function(b){this._super(b)},onCreate:function(){},newItem:function(b){return new PhoneBookmarkItem(b,this.callback)}}).extend(BookmarkListPanel),PcBookmarkFrame=Class({create:function(b){this.elements=new BookmarkElements(this);
this.bookmarkListPanel=new PcBookmarkListPanel(this);this.elements.bookmarkList=this.bookmarkListPanel.bookmarkList;this.elements.bookmarkListPanel=this.bookmarkListPanel;this._super(b)},onCreate:function(){},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='bookmark_content'></div>");this.stage.append(this.content);var b=$("<p class='inputForm'></p>");b.append(this.input);b.append(this.colorSelection);this.content.append(b);this.content.append(this.leftAddPage);
this.content.append(this.rightAddPage);this.content.append(this.bookmarkListPanel.bookmarkListTitle);this.content.append(this.bookmarkListPanel.bookmarkSwiper);this.content.append(this.remove);this.parent.append(this.stage);this.refreshPanel()},refreshPanel:function(){this.bookmarkListPanel.refreshPanel();this.elements.refreshElements()},addItem:function(b){b&&b.caption&&b.pageIndex&&!this.bookmarkListPanel.inList(b.pageIndex)&&(this.bookmarkListPanel.addItem(b),this.colorSelection.refreshColor(),
this.input.val(""),this.refreshPanel())},deleteItem:function(b){this.bookmarkListPanel.deleteItem(b);this.refreshPanel()},editItem:function(b){this.bookmarkListPanel.editItem(b);this.refreshPanel()},refreshItem:function(b){this.bookmarkListPanel.refreshItem(b)},removeAll:function(){this.bookmarkListPanel.removeAll();this.refreshPanel()},onResize:function(){this.refreshPanel()},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(SlideForm),PhoneBookmarkFrame=Class({create:function(b){this.elements=
new BookmarkElements(this);this.bookmarkListPanel=new PhoneBookmarkListPanel(this);this.elements.bookmarkList=this.bookmarkListPanel.bookmarkList;this.elements.bookmarkListPanel=this.bookmarkListPanel;this._super(b)},onCreate:function(){this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.bookmarkListPanel.bookmarkSwiper);this.refreshPanel()},refreshPanel:function(){this.bookmarkListPanel.refreshPanel();
this.elements.refreshElements()},addItem:function(b){b&&b.pageIndex&&!this.bookmarkListPanel.inList(b.pageIndex)&&(this.bookmarkListPanel.addItem(b),this.refreshPanel())},deleteItem:function(b){this.bookmarkListPanel.deleteItem(b);this.refreshPanel()},refreshItem:function(b){this.bookmarkListPanel.refreshItem(b)},onResize:function(){this._super();this.bookmarkListPanel.onResize(this.width,windowHeight-36);this.refreshPanel()},initEvent:function(){},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(PhoneFormFrame),
PhoneBookmarkForm=Class({}).extend(PhoneBookmarkFrame),CopyElements=Class({create:function(b){this._super(b);this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.textArea=$("<textarea></textarea>");this.message=$("<p>"+getLanguage("lblSelectMessage","Please copy the the text content in the text box")+"</p>");this.button=$("<div class='cancel'>"+getLanguage("lblCancel","Cancel")+"</div>")},initEvent:function(b){this.button.onTap(b.hide.bind(b))},pickElements:function(b){b.textArea=
this.textArea;b.message=this.message;b.button=this.button},changeLanguage:function(){this.message.html(getLanguage("lblSelectMessage","Please copy the the text content in the text box"));this.button.html(getLanguage("lblCancel","Cancel"))}}).extend(FormElements),CopyForm=Class({create:function(b){this.elements=new CopyElements(this);this._super(b)},onCreate:function(){this._super();this.stage.css({"background-color":this.mainColor,color:this.fontColor})},initHtml:function(){this.stage.append(this.textArea);
this.stage.append(this.message);this.stage.append(this.button);this._super()},fillText:function(b){this.textArea.val(b);rightToLeft&&LanguageTool.isRightToLeft(this.parm.search_text)&&this.textArea.addClass("rtl")},initEvent:function(){this.stage.bind(_event._down,function(b){b.stopPropagation()})},onShow:function(){},onResize:function(){this._super()}}).extend(FadeOutFadeForm);
Class("LineABC",{create:function(b,c){this.a=c.y-b.y;this.b=b.x-c.x;this.c=c.x*b.y-b.x*c.y},distanceFrom:function(b){b=this.a*b.x+this.b*b.y+this.c;b=Math.abs(b);var c=Math.sqrt(this.a*this.a+this.b*this.b);return b/c}});
Class("LineSegment",{create:function(b,c){this.start=b;this.stop=c;this.degree=this.radians=this.distance=this.horizontal=this.vertical=0;this.computeLine()},computeLine:function(){this.vertical=this.stop.y-this.start.y;this.horizontal=this.stop.x-this.start.x;this.distance=Math.sqrt(this.vertical*this.vertical+this.horizontal*this.horizontal);0<this.distance&&(this.radians=Math.atan2(this.vertical,this.horizontal),this.degree=180*this.radians/Math.PI)},sin:function(){return equals(this.distance,
0)?0:this.vertical/this.distance},cos:function(){return equals(this.distance,0)?0:this.horizontal/this.distance},tan:function(){return equals(this.distance,0)?0:this.vertical/this.horizontal},ctan:function(){return equals(this.distance,0)?0:this.horizontal/this.vertical}});
Class("SearchTextItem",{create:function(){this.posIndex=-1;this.pageHeight=this.pageWidth=1;this.text="";this.points=[];this.widthList=[];this.textHeight=this.textWidth=0;this.box={left:0,top:0,right:0,bottom:0};this.line_height=this.line_width=null},refreshProperties:function(){var b=this.getPixelPoint(this.leftBottom()),c=this.getPixelPoint(this.rightBottom()),d=this.getPixelPoint(this.leftTop());this.line_width=new LineSegment(b,c);this.textWidth=this.line_width.distance*this.line_width.cos()/
this.pageWidth;this.line_height=new LineSegment(b,d);this.textHeight=this.line_height.distance*this.line_height.sin()/this.pageHeight;this.box.left=this.getMinX(this.points);this.box.top=this.getMinY(this.points);this.box.right=this.getMaxX(this.points);this.box.bottom=this.getMaxY(this.points);this.adjustWidthList()},adjustWidthList:function(){for(var b=!1,c=0;c<this.letterCount();c++)if(equals(this.widthList[c],0)){b=!0;break}if(b)for(b=this.textWidth/this.letterCount(),c=0;c<this.letterCount();c++)this.widthList[c]=
b;else if(!equals(this.line_width.degree,0)){for(c=b=0;c<this.letterCount()-1;c++)b+=this.widthList[c];this.widthList[this.letterCount()-1]=this.textWidth-b}},setText:function(b){b||(b="");this.text=b;this.setWidthListSize(b.length)},setWidthListSize:function(b){var c=this.widthList.length;if(b>c)for(var d=c;d<b;d++)this.widthList[d]=0;if(b<c){c=[];for(d=0;d<b;d++)c[d]=this.widthList[d];this.widthList=c}},getPixelPoint:function(b){return new Point(this.pageWidth*b.x,this.pageHeight*b.y)},getRatioPoint:function(b){return new Point(b.x/
this.pageWidth,b.y/this.pageHeight)},clone:function(b){this.pageWidth=b.pageWidth;this.pageHeight=b.pageHeight;this.text=b.text;for(var c=0;4>c;c++)this.points[c]=b.points[c].clone();this.widthList=[];for(c=0;c<b.letterCount();c++)this.widthList[c]=b.widthList[c];this.refreshProperties()},letterCount:function(){return this.widthList.length},getMaxX:function(b){for(var c=-1E8,d=0;4>d;d++)c=Math.max(c,b[d].x);return c},getMaxY:function(b){for(var c=-1E8,d=0;4>d;d++)c=Math.max(c,b[d].y);return c},getMinX:function(b){for(var c=
1E8,d=0;4>d;d++)c=Math.min(c,b[d].x);return c},getMinY:function(b){for(var c=1E8,d=0;4>d;d++)c=Math.min(c,b[d].y);return c},getMiddlePoint:function(b,c){return new Point((b.x+c.x)/2,(b.y+c.y)/2)},getMiddlePixelPoint:function(b,c){return new Point((b.x+c.x)/2*this.pageWidth,(b.y+c.y)/2*this.pageHeight)},leftBottom:function(){return this.points[0]},leftTop:function(){return this.points[3]},rightBottom:function(){return this.points[1]},rightTop:function(){return this.points[2]},getSubTextWidth:function(b){var c=
0;if(0>=b)return 0;b>this.letterCount()&&(b=this.letterCount());for(var d=0;d<b;d++)c+=this.widthList[d];return c},getSubTextPixelLength:function(b){var c=0;if(0>=b)return 0;b>this.letterCount()&&(b=this.letterCount());if(equals(this.line_width.cos(),0))c=this.line_width.distance*(b/this.letterCount())*this.line_width.sin();else for(var d=0;d<b;d++)c+=this.widthList[d]*this.pageWidth/this.line_width.cos();return c},getLettersRect:function(b,c){var d=Math.min(b,c),f=Math.max(b,c),d=this.getSubTextRect(d),
f=this.getSubTextRect(f+1),g=[];g[0]=d[1];g[3]=d[2];g[1]=f[1];g[2]=f[2];return g},getSubTextRect:function(b){var c=[],d=this.leftBottom(),f=this.leftTop(),g=this.getSubTextWidth(b),h=g*this.pageWidth,k=0,k=equals(this.line_width.cos(),0)?this.line_width.distance*(b/this.letterCount())/this.pageHeight*this.line_width.sin():h*this.line_width.tan()/this.pageHeight;b=new Point(d.x+g,d.y+k);g=new Point(f.x+g,f.y+k);c[0]=d;c[1]=b;c[2]=g;c[3]=f;return c},getIndexByPoint:function(b,c){var d=-1,f=this.getPixelPoint(new Point(b,
c)),g=this.getPixelPoint(this.leftBottom()),h=this.getPixelPoint(this.rightBottom()),k=this.getPixelPoint(this.rightTop()),l=this.getPixelPoint(this.leftTop()),m=new LineABC(g,h),h=new LineABC(h,k);new LineABC(k,l);g=new LineABC(l,g);m=m.distanceFrom(f);k=h.distanceFrom(f);h=h.distanceFrom(f);f=g.distanceFrom(f);if(m<=this.line_height.distance&&k<=this.line_width.distance&&h<=this.line_height.distance&&f<=this.line_width.distance)for(h=0;h<this.letterCount();){if(this.getSubTextPixelLength(h+1)>=
f){d=h;break}h++}return d},getIndexRangeByArea:function(b){var c=-1,d=-1,f=Math.min(b.left,b.right),g=Math.min(b.top,b.bottom),h=Math.max(b.left,b.right);b=Math.max(b.top,b.bottom);for(var k=0;k<this.letterCount();k++){var l=this.getLettersRect(k,k),m,n,p,q;this.text.substr(k,1);m=this.getMinX(l);n=this.getMinY(l);p=this.getMaxX(l);q=this.getMaxY(l);var l=Math.min(m,p),t=Math.min(n,q);m=Math.max(m,p);n=Math.max(n,q);n=l>h||m<f||t>b||n<g;-1==c?n||(d=c=k):n||(d=k)}return-1==c||-1==d?null:{begin:c,end:d}},
isSelected:function(b){var c=Math.min(b.left,b.right),d=Math.min(b.top,b.bottom),f=Math.max(b.left,b.right);b=Math.max(b.top,b.bottom);return!(this.box.left>f||this.box.right<c||this.box.top>b||this.box.bottom<d)},isContains:function(b){if(!this.isSelected(b.box))return!1;var c=this.getOverlapArea(b.box),d=Math.min((c.right-c.left)/(this.box.right-this.box.left),(c.bottom-c.top)/(this.box.bottom-this.box.top));b=Math.min((c.right-c.left)/(b.box.right-b.box.left),(c.bottom-c.top)/(b.box.bottom-b.box.top));
return d<b&&0.8<b},getOverlapArea:function(b){if(!this.isSelected(b))return null;var c=Math.min(b.left,b.right),d=Math.min(b.top,b.bottom),f=Math.max(b.left,b.right);b=Math.max(b.top,b.bottom);return{left:Math.max(this.box.left,c),top:Math.max(this.box.top,d),right:Math.min(this.box.right,f),bottom:Math.min(this.box.bottom,b)}},isSameAs:function(b){for(var c=0;4>c;c++)if(!this.points[c].equals(b.points[c]))return!1;return!0},relation:function(b){var c=new LineSegment(this.getMiddlePixelPoint(this.leftBottom(),
this.rightTop()),b.getMiddlePixelPoint(b.leftBottom(),b.rightTop())),d=new LineSegment(this.getMiddlePixelPoint(this.leftBottom(),this.leftTop()),b.getMiddlePixelPoint(b.rightBottom(),b.rightTop())),f=new LineSegment(this.getMiddlePixelPoint(this.rightBottom(),this.rightTop()),b.getMiddlePixelPoint(b.leftBottom(),b.leftTop())),g=f;d.distance<f.distance&&(g=d);var d=g.distance,f=this.line_width.distance/this.letterCount(),h=Math.max(this.line_height.distance,b.line_height.distance);Math.min(this.line_height.distance,
b.line_height.distance);if(equals(this.line_width.degree,0)&&equals(b.line_width.degree,0)&&Math.abs(this.leftBottom().y-b.leftBottom().y)>0.8*h||d>=2.5*f)return SearchItemRelation.RETURN;if(this.isSelected(b.box)){if(equals(d,0))return SearchItemRelation.NEARBY;if(5>Math.abs(g.degree-c.degree)&&d>=0.3*f)return SearchItemRelation.SPACE}else{if(d>=0.5*f&&d<1.2*f)return 30<Math.abs(g.degree-c.degree)?SearchItemRelation.RETURN:SearchItemRelation.SPACE;if(d>=1.2*f&&d<2.5*f)return 15<Math.abs(g.degree-
c.degree)?SearchItemRelation.RETURN:SearchItemRelation.DOUBLE_SPACE}return SearchItemRelation.NEARBY},isSeparate:function(b){return equals(this.line_height.distance,b.line_height.distance)?!equals(this.box.bottom,b.box.bottom):!0}});
Class("SearchRtlTextItem",{getLettersRect:function(b,c){var d=this._super(b,c),f=this.leftBottom().x,g=this.rightBottom().x;return LanguageTool.isRightToLeft(this.text)?this.flipRect(d,f,g):d},flipRect:function(b,c,d){var f=c+d-b[1].x;c=c+d-b[0].x;b[0].x=f;b[1].x=c;b[2].x=c;b[3].x=f;return b}}).extend("SearchTextItem");
Class("SearchTextPart",{create:function(b){this.endIndex=this.beginIndex=-1;this.item=b},getRect:function(){return this.item.getLettersRect(this.beginIndex,this.endIndex)},getText:function(){return this.item.text.substring(this.beginIndex,this.endIndex+1)},getBox:function(){var b=this.getRect();return{left:this.item.getMinX(b),top:this.item.getMinY(b),right:this.item.getMaxX(b),bottom:this.item.getMaxY(b)}}});
Class("SearchTextResult",{create:function(){this.parts=[]},add:function(b){this.parts.push(b)},count:function(){return this.parts.length},getText:function(){for(var b="",c=0;c<this.count();c++)if(b+=this.parts[c].getText(),c<this.count()-1){var d=this.parts[c].item.relation(this.parts[c+1].item);d==SearchItemRelation.SPACE&&(b+=" ");d==SearchItemRelation.DOUBLE_SPACE&&(b+="  ");d==SearchItemRelation.RETURN&&(b+="\r\n")}return b},getBox:function(){for(var b={left:1E8,top:1E9,right:-1E8,bottom:-1E8},
c=0;c<this.count();c++){var d=this.parts[c].getBox();b.left=Math.min(b.left,d.left);b.top=Math.min(b.top,d.top);b.right=Math.max(b.right,d.right);b.bottom=Math.max(b.bottom,d.bottom)}return b},getRects:function(){if(0==this.count())return[];for(var b=4,c=0,d=[],f=this.parts[0],g=null,h=0;h<this.count();h++){var k=this.parts[h];if(h<this.count()-1){var l=this.parts[h+1],g=k.item.relation(l.item),m=k.item.isSeparate(l.item);if(g!=SearchItemRelation.NEARBY||m)g=k,k=f.getRect(),g=g.getRect(),d[c]=k[0].x<
g[0].x?k[0]:g[0],d[c+1]=g[1].x>k[1].x?g[1]:k[1],d[c+2]=g[2].x>k[2].x?g[2]:k[2],d[c+3]=k[3].x<g[3].x?k[3]:g[3],c=b,b+=4,f=l}else g=k,k=f.getRect(),g=g.getRect(),d[c]=k[0].x<g[0].x?k[0]:g[0],d[c+1]=g[1].x>k[1].x?g[1]:k[1],d[c+2]=g[2].x>k[2].x?g[2]:k[2],d[c+3]=k[3].x<g[3].x?k[3]:g[3]}return d}});
Class("SearchTextList",{create:function(){this.textItems=[];this.continuousText=""},add:function(b){this.textItems.push(b);this.refreshContinuousText()},clear:function(){this.textItems=[];this.continuousText=""},itemCount:function(){return this.textItems.length},cleanOverlappedItems:function(){for(i=0;i<this.itemCount()-1;i++)for(var b=this.textItems[i],c=i+1;c<this.itemCount();){var d=this.textItems[c];if(b.isContains(d)){var f=b.getIndexRangeByArea(d.box);if(f){var g=b.text,h=d.text.trim(),k=g.substring(f.begin,
f.end+1);if(k.trim().length){for(var l=0;l<k.length&&" "!=k.charAt(l);l++)f.begin+=1;for(l=k.length-1;0<=l&&" "!=k.charAt(l);l--)f.end-=1}f.end=Math.min(f.end,f.begin+h.length-1);k=g.substring(0,f.begin);f=g.substring(f.end+1,g.length);g=k+h+f;b.text=g;this.textItems.removeElement(d)}else c++}else c++}this.refreshContinuousText()},refreshContinuousText:function(){this.continuousText=this.getContinuousText()},getContinuousText:function(){for(var b="",c=0;c<this.itemCount();c++){var d=this.textItems[c];
d.posIndex=b.length;b+=d.text.toLowerCase()}return b},search:function(b){var c=[];if(""==b.trim())return[];b=b.toLowerCase();for(var d=this.searchFrom(b,0,c);-1<d;)d=this.searchFrom(b,d,c);return c},searchFrom:function(b,c,d){var f=this.getTextForSearch(c);if(!f)return-1;var g=b.length,f=f.indexOf(b);if(-1==f){if(-1==b.indexOf(" ")||!this.match(b,c))return-1;f=b.split(" ");b=c;for(c=0;c<f.length;c++)(g=f[c])&&(b=this.searchFrom(g,b,d));return b}f=c+f;b=f+g-1;g=new SearchTextResult;for(c=0;c<this.itemCount();c++){var h=
this.textItems[c],k=h.posIndex;if(!(h.posIndex+h.letterCount()-1<f)){if(k>b)break;var l=new SearchTextPart(h);l.beginIndex=Math.max(0,f-k);l.endIndex=Math.min(h.letterCount()-1,b-k);g.add(l)}}d.push(g);return b+1},match:function(b,c){var d=this.getTextForSearch(c);if(!d)return!1;for(var f=b.split(" "),g=0;g<f.length;g++){var h=f[g];if(h){d=d.indexOf(h);if(-1==d)return!1;d=this.getTextForSearch(c+d+h.length)}}return!0},getTextForSearch:function(b){var c=this.continuousText.length-b;return 0>=c?"":
this.continuousText.substr(b,c)},select:function(b,c){return c?this.selectByColumnMode(b):this.selectByLineMode(b)},selectByLineMode:function(b){for(var c=new SearchTextResult,d=-1,f=-1,g=0;g<this.itemCount();g++){var h=this.textItems[g];if(h.isSelected(b)){d=g;break}}for(g=this.itemCount()-1;0<=g;)if(h=this.textItems[g],h.isSelected(b)){f=g;break}else g--;if(-1<d&&-1<f)for(g=d;g<=f;g++){var h=this.textItems[g],k=new SearchTextPart(h);k.beginIndex=0;k.endIndex=h.letterCount()-1;if(g==d||g==f){h=h.getIndexRangeByArea(b);
if(!h)continue;g==d&&(k.beginIndex=h.begin);g==f&&(k.endIndex=h.end)}c.add(k)}return c},selectByColumnMode:function(b){for(var c=new SearchTextResult,d=0;d<this.itemCount();d++){var f=this.textItems[d];if(f.isSelected(b)){var g=new SearchTextPart(f);if(f=f.getIndexRangeByArea(b))g.beginIndex=f.begin,g.endIndex=f.end,c.add(g)}}return c}});
Class("SearchTextHighlight",{create:function(b,c,d){this.pageWidth=b;this.pageHeight=c;this.rightToLeft=d;this.searchTextList=new SearchTextList},loadFromPage:function(b){if(b&&0!=b.length){for(var c=0;c<b.length;c++){var d=b[c];if(d){var f;f=this.rightToLeft?new SearchRtlTextItem:new SearchTextItem;f.pageWidth=this.pageWidth;f.pageHeight=this.pageHeight;void 0!=d.word?this.loadFromOldConfig(f,d):this.loadFromNewConfig(f,d);f.refreshProperties();this.searchTextList.add(f)}}this.searchTextList.cleanOverlappedItems()}},
loadFromOldConfig:function(b,c){b.setText(c.word);b.points[0]=new Point(c.left,c.top+c.height);b.points[1]=new Point(c.left+c.width,c.top+c.height);b.points[2]=new Point(c.left+c.width,c.top);b.points[3]=new Point(c.left,c.top)},loadFromNewConfig:function(b,c){b.setText(c.w);for(var d=c.p||[],f=0;4>f;f++)b.points[f]=new Point(d[2*f]||0,d[2*f+1]||0);if(!(8>=d.length)){for(f=8;f<d.length;f++)b.widthList[f-8]=d[f];this.rightToLeft&&b.widthList.reverse()}},searchText:function(b){return this.searchTextList.search(b)},
selectText:function(b){return this.searchTextList.select(b)}});
Class("SearchHighlightDOM",{create:function(b){this.content=b;this.contentWidth=b.width();this.contentHeight=b.height()},addHighlight:function(b){for(var c=[],d=0;d<b.length;d++)c[d]=new Point(b[d].x*this.contentWidth,b[d].y*this.contentHeight);var d=new LineSegment(c[0],c[1]),f=new LineSegment(c[0],c[3]),c=d.distance/this.contentWidth*100,f=f.distance/this.contentHeight*100,g=100*b[0].x;b=100*b[0].y-f;var d=d.degree,h=$("<div></div>");h.css({position:"absolute",left:g+"%",top:b+"%",width:c+"%",height:f+
"%","background-color":Color(bookConfig.searchHightlightColor).rgba(0.6),transform:"rotate("+d+"deg)","-webkit-transform":"rotate("+d+"deg)","-ms-transform":"rotate("+d+"deg)","-o-transform":"rotate("+d+"deg)","-moz-transform":"rotate("+d+"deg)","transform-origin":"0% 0%","-webkit-transform-origin":"0% 100%","-ms-transform-origin":"0% 100%","-o-transform-origin":"0% 100%","-moz-transform-origin":"0% 100%"});this.content.append(h)}});
Class("DynamicBackground",{statics:{create:function(b){var c=DynamicBackground.initAnimation(b),d=b.width,f=b.height;(function(){if(d!=windowWidth||f!=windowHeight)d=windowWidth,f=windowHeight,c.resize(d,f);c.nextFrame()}).animation();return c},initAnimation:function(b){switch(b.name){case "PetalsDancing":return new PetalsDancingAnimation(b);case "Snow":return new SnowAnimation(b);case "SlowBubble":return new SlowBubbleAnimation(b);case "FastBubble":return new FastBubbleAnimation(b);case "LightRain":return new LightRainAnimation(b);
case "HeavyRain":return new HeavyRainAnimation(b);case "Firefly":return new FireflyAnimation(b);case "SpaceShip":return new SpaceShipAnimation(b);case "SpaceTravel":return new SpaceTravelAnimation(b);case "Cloud":return new CloudAnimation(b);case "SunCloud":return new SunCloudAnimation(b);case "Meteor":return new MeteorAnimation(b);case "Sunshine":return new SunshineAnimation(b);case "Twinkle":return new TwinkleAnimation(b);case "FallenLeaves":return new FallenLeavesAnimation(b);case "Moon":return new MoonCloudAnimation(b);
case "Balloon":return new BalloonCloudAnimation(b);case "AirBubble":return new SlowBubbleAnimation(b);case "BlinkStar":return new TwinkleAnimation(b);case "CloudsLeft02":return new CloudAnimation(b);case "CloudsLeft02":return new CloudAnimation(b);case "Leaves02":return new FallenLeavesAnimation(b);case "Leaves03":return new FallenLeavesAnimation(b);case "RainDrop":return new LightRainAnimation(b);case "Cloud3":return new BalloonCloudAnimation(b);default:return new EmptyAnimation(b)}},getImagePath:function(b){return global.mbBaseURL+
b}}});
Class("BackgroundAnimation",{create:function(b){this.stage={body:b.stage,width:b.width,height:b.height};this.items=[];this.frameNumber=this.itemNumber=0;this.onCreated.delay(this,1)},onCreated:function(){this.resize(this.stage.width,this.stage.height)},resize:function(b,c){this.stage.width=b;this.stage.height=c;this.clear()},clear:function(){for(;0<this.items.length;){var b=this.items.pop();b&&b.destroy&&b.destroy()}this.items=[]},addItem:function(){this.items.length>=this.itemNumber||this.items.push(this.newItem())},getImagePath:function(b){return DynamicBackground.getImagePath(b)},
itemCount:function(){return this.items.length},getItem:function(b){return this.items[b]},nextFrame:virtual_function,newItem:virtual_function});
Class("BackgroundItem",{create:function(b){this.parent=b;this.initBody();this.initPositions()},initBody:function(){this.body=null;this.createBody();this.parent.body.append(this.body)},getImagePath:function(b){return DynamicBackground.getImagePath(b)},createBody:virtual_function,initPositions:virtual_function,move:virtual_function,refresh:virtual_function,pointByStep:function(b,c,d,f,g){return g?c+Number.fixed((d-c)*b/f,g):c+Math.floor((d-c)*b/f)},destroy:function(){this.body&&(this.body.remove(),
this.body=null)}});Class("BackgroundItemPosition",{create:function(b,c,d,f){this.left=b||0;this.top=c||0;this.scale=d||1;this.rotate=f||0}});
Class("GoThroughAnimation",{create:function(b){this._super(b);this.count=0},nextFrame:function(){if(this.frameNumber&&this.itemNumber){this.itemNumber>this.frameNumber?this.addMultipleItems():this.addItemFewFrames();for(var b=0;b<this.items.length;b++)this.items[b].isActive()&&this.items[b].move()}},addMultipleItems:function(){for(var b=Math.floor(this.itemNumber/this.frameNumber),b=Math.max(b,1),c=0;c<b;c++)this.addItem()},addItemFewFrames:function(){var b=Math.floor(this.frameNumber/this.itemNumber),
b=Math.max(b,1);++this.count==b&&(this.addItem(),this.count=0)},addItem:function(){for(var b=0;b<this.items.length;b++)if(this.items[b].isFree()){this.items[b].active();return}this.itemCount()>=this.itemNumber||(b=this.newItem(),b.active(),this.items.push(b))},newItem:virtual_function}).extend("BackgroundAnimation");
Class("GoThroughItem",{create:function(b,c){this._super(b);this.frameNumber=c||1;this.step=0;this.moving=!1},createBody:virtual_function,initPositions:virtual_function,refresh:virtual_function,move:function(){this.step++;this.step==this.frameNumber&&this.sleep();this.refresh()},isActive:function(){return!0==this.moving},isFree:function(){return!1==this.moving},sleep:function(){this.moving=!1},active:function(){this.step=1;this.moving=!0;this.initPositions();this.refresh()}}).extend("BackgroundItem");
Class("AlwaysExistsAnimation",{create:function(b){this._super(b)},addItems:function(){for(var b=0;b<this.itemNumber;b++)this.addItem()},nextFrame:function(){for(var b=0;b<this.items.length;b++)this.items[b].move()},resize:function(b,c){this._super(b,c);this.addItems()},newItem:virtual_function}).extend("BackgroundAnimation");
Class("AlwaysExistsItem",{create:function(b,c){this._super(b);this.frameNumber=c||1;this.step=1},createBody:virtual_function,initPositions:virtual_function,refresh:virtual_function,move:function(){this.step++;this.step==this.frameNumber&&(this.step=1,this.resetTarget());this.refresh()},resetTarget:function(){}}).extend("BackgroundItem");
Class("PetalsDancingAnimation",{create:function(b){this._super(b);this.frameNumber=this.itemNumber=200},newItem:function(){return new PetalsDancingItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("PetalsDancingItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:30px;height:28px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("petal.png"))},initPositions:function(){var b=1.2*this.parent.width,c=1.2*this.parent.height,d=Math.floor(Math.sqrt(b*b+c*c)),b=0.1*-this.parent.width,c=Number.random(0.1*-this.parent.height,Math.floor(0.9*this.parent.height),0),f=Number.random(10,20,1),g=Math.PI/180*f,f=
Math.floor(b+d*Math.cos(g)),d=Math.floor(c+d*Math.sin(g)),g=Number.fixed(0.2+c/this.parent.height,1),h=g-0.2,k=Number.random(0,360,1),l=Number.random(0,360,1);this.start=new BackgroundItemPosition(b,c,g,k);this.end=new BackgroundItemPosition(f,d,h,l)},refresh:function(){var b=Math.floor($.easing.swing(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber)),c=Math.floor($.easing.swing(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber)),d=$.easing.swing(null,
this.step,this.start.scale,this.end.scale-this.start.scale,this.frameNumber),f=$.easing.swing(null,this.step,this.start.rotate,this.end.rotate-this.start.rotate,this.frameNumber),b=transformCSS({tran:{x:b,y:c},scale:d,rotate:f});this.body.css(b)}}).extend("GoThroughItem");Class("SlowBubbleAnimation",{create:function(b){this._super(b);this.itemNumber=50;this.frameNumber=200},newItem:function(){return new SlowBubbleItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("SlowBubbleItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("bubble.png"))},initPositions:function(){var b=Number.random(0.3,0.7),c=Number.random(20,this.parent.width-20);this.start=new BackgroundItemPosition(c,Math.floor(this.parent.height-50*b),b);this.end=new BackgroundItemPosition(c,-40,b)},refresh:function(){var b,c,d;b=$.easing.easeInSine(null,
this.step,this.start.left,this.end.left-this.start.left,this.frameNumber);c=$.easing.easeInQuad(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber);d=$.easing.easeOutQuint(null,this.step,0,this.start.scale,this.frameNumber);b=transformCSS({tran:{x:b,y:c},scale:d,origin:{x:50,y:100}});this.body.css(b)}}).extend("GoThroughItem");
Class("FastBubbleAnimation",{create:function(b){this._super(b);this.itemNumber=80;this.frameNumber=40;this.popupPoints=[];this.popupPoints.push(0.1*b.width);this.popupPoints.push(0.9*b.width)},resize:function(b,c){this.popupPoints[0]=0.1*b;this.popupPoints[1]=0.9*b;this._super(b,c)},newItem:function(){return new FastBubbleItem(this.stage,this.frameNumber,this.popupPoints)}}).extend("GoThroughAnimation");
Class("FastBubbleItem",{create:function(b,c,d){this.points=d;this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("blue_bubble.png"))},initPositions:function(){var b=Number.random(0.2,0.35,2),c=this.points[Number.random(0.1,1.9,0)],d=Math.floor(this.parent.height-50*b),f=Math.floor(c+Number.random(-30,30));this.start=new BackgroundItemPosition(c,d,b);this.end=new BackgroundItemPosition(f,
-40,b)},refresh:function(){var b,c,d;b=$.easing.easeOutQuint(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber);c=$.easing.easeInQuad(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber);d=$.easing.easeOutQuint(null,this.step,0,this.start.scale,this.frameNumber);b=transformCSS({tran:{x:b,y:c},scale:d,origin:{x:50,y:100}});this.body.css(b)}}).extend("GoThroughItem");
Class("LightRainAnimation",{create:function(b){this._super(b);this.itemNumber=240;this.frameNumber=30},newItem:function(){return new LightRainItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("LightRainItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:15px;height:24px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("raindrop.png"))},initPositions:function(){var b=1.2*this.parent.width,c=1.2*this.parent.height;Math.sqrt(b*b+c*c);b=Number.random(0,this.parent.width);c=Math.floor(this.parent.height+10);this.start=new BackgroundItemPosition(b,-50);this.end=new BackgroundItemPosition(b,c)},
refresh:function(){var b=Math.floor($.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber)),c=Math.floor($.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber)),b=transformCSS({tran:{x:b,y:c}});this.body.css(b)}}).extend("GoThroughItem");Class("HeavyRainAnimation",{create:function(b){this._super(b);this.itemNumber=160;this.frameNumber=20},newItem:function(){return new HeavyRainItem(this.stage,this.frameNumber)}}).extend("AlwaysExistsAnimation");
Class("HeavyRainItem",{create:function(b,c){this.angle=15;this.radian=this.angle*Math.PI/180;this._super(b,c)},createBody:function(){this.body=$("<div style='left:0px;top:0px;width:2px;height:10px;position:absolute;z-index:1'></div>");var b=Math.floor(this.parent.height/Math.cos(this.radian));this.body.css({border:"0px solid gray",height:b+"px","background-color":"rgba(225,225,225, 0.06)"})},initPositions:function(){var b=Math.floor(this.parent.height*Math.tan(this.radian)),b=Number.random(0,this.parent.width+
b);this.start=new BackgroundItemPosition(b,0)},refresh:function(){var b=Math.floor(this.parent.height*Math.tan(this.radian)),b=Number.random(0,this.parent.width+b),b=transformCSS({tran:{x:b,y:0},origin:{x:0,y:0},rotate:this.angle});this.body.css(b)}}).extend("AlwaysExistsItem");Class("SpaceShipAnimation",{create:function(b){this._super(b);this.itemNumber=500;this.frameNumber=30},newItem:function(){return new SpaceShipItem(this.stage,this.frameNumber)}}).extend("AlwaysExistsAnimation");
Class("SpaceShipItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("star.png"))},initPositions:function(){this.orbitRadius=Number.random(0,this.maxOrbit(this.parent.width,this.parent.height));this.radius=Number.random(90,this.orbitRadius)/20;this.orbitX=this.parent.width/2;this.orbitY=this.parent.height/2;this.angle=Number.random(0,360);this.speed=
Number.random(0,this.orbitRadius/4)/this.orbitRadius;this.body.css({width:this.radius+"px",height:this.radius+"px",opacity:0.8})},maxOrbit:function(b,c){var d=Math.max(b,c);return Math.round(Math.sqrt(d*d+d*d))/2},move:function(){this.angle+=this.speed;this.refresh()},refresh:function(){var b=this.angle/180*Math.PI,c=Math.sin(b)*this.orbitRadius+this.orbitX,b=Math.cos(b)*this.orbitRadius+this.orbitY,c=transformCSS({tran:{x:c-this.radius/2,y:b-this.radius/2}});this.body.css(c)}}).extend("AlwaysExistsItem");
Class("SpaceTravelAnimation",{create:function(b){this._super(b);this.frameNumber=this.itemNumber=300},nextFrame:function(){if(this.frameNumber&&this.itemNumber){for(var b=0;2>b;b++)this.addItem();for(b=0;b<this.items.length;b++)this.items[b].isActive()&&this.items[b].move()}},newItem:function(){return new SpaceTravelItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("SpaceTravelItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:50px;height:50px;position:absolute;z-index:1;opacity:0.8'></img>");this.body.attr("src",this.getImagePath("star.png"))},initPositions:function(){var b=this.maxOrbit(this.parent.width,this.parent.height),c=Math.floor(0.7*b),d=Number.random(0,c),f=$.easing.easeInQuad(null,d,20,c-20,c);fScale=1-0.8*f/c;fSpeed=5-4*f/c;this.realFrameNumber=Math.floor(this.frameNumber/fSpeed);
var d=Number.random(0,360)/180*Math.PI,g=this.parent.width/2,h=this.parent.height/2,c=Math.sin(d)*f+g,f=Math.cos(d)*f+h,g=Math.sin(d)*b+g,b=Math.cos(d)*b+h;this.start=new BackgroundItemPosition(c,f,0.1);this.end=new BackgroundItemPosition(g,b,fScale)},maxOrbit:function(b,c){var d=Math.max(b,c);return Math.round(Math.sqrt(d*d+d*d))/2},move:function(){this.step++;this.step==this.realFrameNumber&&this.sleep();this.refresh()},refresh:function(){var b=Math.floor($.easing.easeInSine(null,this.step,this.start.left,
this.end.left-this.start.left,this.realFrameNumber)),c=Math.floor($.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,this.realFrameNumber)),d=$.easing.easeInSine(null,this.step,this.start.scale,this.end.scale-this.start.scale,this.realFrameNumber),b=transformCSS({tran:{x:b,y:c},scale:d});this.body.css(b)}}).extend("GoThroughItem");
Class("MeteorAnimation",{create:function(b){this._super(b);this.itemNumber=3;this.frameNumber=120},newItem:function(){return new MeteorItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("MeteorItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:-100px;width:2px;height:88px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("meteor.png"))},initPositions:function(){var b=Number.random(0.5*this.parent.width,1.5*this.parent.width,0),c=Math.PI/180*65,d=Math.floor(this.parent.height+88*Math.cos(c)),c=Math.floor(b-d*Math.tan(c)),f=Number.random(0.7,1.5,1);this.start=new BackgroundItemPosition(b,0,f,65);
this.end=new BackgroundItemPosition(c,d,f,65)},refresh:function(){var b=Math.floor(this.frameNumber);if(!(this.step>b)){var c=Math.floor($.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,b)),d=Math.floor($.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,b));$.easing.easeInSine(null,this.step,1,-1,b);b=transformCSS({origin:{x:0,y:0},tran:{x:c,y:d},rotate:this.start.rotate,scale:this.start.scale});this.body.css(b)}}}).extend("GoThroughItem");
Class("SunshineAnimation",{create:function(b){this._super(b);this.createSun();this.createSunBorder();this.itemNumber=40;this.frameNumber=10},createSun:function(){this.sun=$("<div></div>");this.sun.css({position:"absolute","z-index":2,width:"4px",height:"4px","border-radius":"2px","background-color":"rgba(255,255,255, 0.9)",left:"-4px",top:"-4px","box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-o-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-ms-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)",
"-moz-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)","-webkit-box-shadow":"0px 0px 50px 130px rgba(255,255,255, 0.9)",opacity:1});this.stage.body.append(this.sun)},createSunBorder:function(){this.sunBorder=$("<div></div>");this.sunBorder.css({position:"absolute","z-index":1,width:"4px",height:"4px","border-radius":"2px","background-color":"rgba(255,255,255, 0.2)",left:"-4px",top:"-4px","box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-o-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)",
"-ms-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-moz-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)","-webkit-box-shadow":"0px 0px 200px 500px rgba(255,255,255, 0.2)",opacity:1});this.stage.body.append(this.sunBorder)},newItem:function(){var b=this.itemCount()<this.itemNumber/2?1:-1;return new SunshineHaloItem(this.stage,this.frameNumber,b)}}).extend("AlwaysExistsAnimation");
Class("SunshineHaloItem",{create:function(b,c,d){this.direction=d;this._super(b,c)},createBody:function(){this.body=$("<div style='left:0px;top:0px;width:0px;height:5px;position:absolute;z-index:2'></div>");var b=Math.floor(Math.sqrt(this.parent.width*this.parent.width+this.parent.height*this.parent.height));this.body.css({"border-left":"0px solid rgba(0,0,0,0)","border-right":b+"px solid rgba(255,255,255,0.01)","border-top":"25px solid rgba(0,0,0,0)","border-bottom":"25px solid rgba(0,0,0,0)","transform-origin":"0% 0%"})},
initPositions:function(){this.rotate=Number.random(0,90)},move:function(){this.rotate+=this.direction/this.frameNumber;0>this.rotate&&(this.rotate+=90);this.rotate%=90;this.refresh()},refresh:function(){var b=this.rotate,c=Math.PI/180*b,d=Math.floor(120*Math.cos(c)),c=Math.floor(120*Math.sin(c))-20,b=transformCSS({tran:{x:d,y:c},rotate:b});this.body.css(b)}}).extend("AlwaysExistsItem");
Class("CloudAnimation",{create:function(b){this._super(b);this.itemNumber=10;this.frameNumber=1E3},resize:function(b,c){this._super(b,c);for(var d=0;d<this.itemNumber;d++)this.addItem();for(d=0;d<this.itemCount();d++){var f=this.getItem(d),g=this.frameNumber-Math.floor((d+1)*this.frameNumber/this.itemNumber);f.active();f.step=g;f.refresh()}},newItem:function(){return new CloudItem(this.stage,this.frameNumber,this.itemCount()%5)}}).extend("GoThroughAnimation");
Class("CloudItem",{create:function(b,c,d){this.cloudType=d;this.initCloudResources();this._super(b,c)},initCloudResources:function(){this.cloudResources=[];this.cloudResources.push({src:"cloud5.png",width:300,height:147,top:0.3});this.cloudResources.push({src:"cloud4.png",width:300,height:112,top:0.5});this.cloudResources.push({src:"cloud2.png",width:300,height:211,top:0.1});this.cloudResources.push({src:"cloud3.png",width:300,height:208,top:0.2});this.cloudResources.push({src:"cloud1.png",width:300,
height:177,top:0})},createBody:function(){this.body=$("<img style='left:0px;top:0px;position:absolute;z-index:1'></img>");var b=this.cloudResources[this.cloudType],c={width:b.width+"px",height:b.height+"px"};this.body.attr("src",this.getImagePath(b.src));this.body.css(c);this.top=b.top;this.width=b.width;this.height=b.height},initPositions:function(){var b=this.parent.width+100,c=Math.floor(this.parent.height*this.top),d=-this.width;Number.random(0,360);Number.random(-90,90);this.start=new BackgroundItemPosition(b,
c);this.end=new BackgroundItemPosition(d,c)},refresh:function(){var b=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber),c=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber),b=transformCSS({tran:{x:b,y:c},scale:this.start.scale});this.body.css(b)}}).extend("GoThroughItem");
Class("SunCloudAnimation",{create:function(b){this.sun=new SunshineAnimation(b);this.cloud=new CloudAnimation(b)},resize:function(b,c){this.sun.resize(b,c);this.cloud.resize(b,c)},nextFrame:function(){this.sun.nextFrame();this.cloud.nextFrame()}});
Class("SnowAnimation",{create:function(b){this._super(b);this.itemNumber=200;this.frameNumber=400},resize:function(b,c){this._super(b,c);for(var d=0;d<this.itemNumber;d++)this.addItem();for(d=0;d<this.itemCount();d++){var f=this.getItem(d),g=Number.random(0,this.frameNumber);f.active();f.step=g;f.refresh()}},newItem:function(){return new SnowItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("SnowItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:22px;height:22px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("snow.png"))},initPositions:function(){var b=1.2*this.parent.width,c=1.2*this.parent.height;Math.sqrt(b*b+c*c);var b=Number.random(0,this.parent.width),d=Math.floor(0.1*-this.parent.height),f=Number.random(80,100,1),g=Math.PI/180*f,f=Math.floor(b+c*Math.cos(g)),c=Math.floor(d+c*Math.sin(g)),
g=Number.random(0.3,1.5);this.start=new BackgroundItemPosition(b,d,g);this.end=new BackgroundItemPosition(f,c,g)},refresh:function(){var b=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber),c=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber),b=transformCSS({tran:{x:b,y:c},scale:this.start.scale});this.body.css(b)}}).extend("GoThroughItem");
Class("FireflyAnimation",{create:function(b){this._super(b);this.itemNumber=50;this.frameNumber=300},newItem:function(){return new FireflyItem(this.stage,this.frameNumber)}}).extend("AlwaysExistsAnimation");
Class("FireflyItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:30px;height:30px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("firefly.png"))},initPositions:function(){var b=Number.random(0,this.parent.width),c=Number.random(this.parent.height/3,this.parent.height),d=Number.random(0.3,1,1);this.start=new BackgroundItemPosition(b,c,d);this.end=null;this.resetTarget()},resetTarget:function(){this.end&&
(this.start=this.end,this.end=null);var b=Number.random(0,35),c=Math.PI/180*b,b=this.start.left+[-1,1][Number.random(0.1,1.9,0)]*Math.floor(80*Math.cos(c)),b=Number.between(b,-20,this.parentWidth+20),c=this.start.top+[-1,1][Number.random(0.1,1.9,0)]*Math.floor(80*Math.sin(c)),c=Number.between(c,-20,this.parent.height+20),d=Number.random(0.3,1,1);this.end=new BackgroundItemPosition(b,c,d)},refresh:function(){var b,c,d;b=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber);c=this.pointByStep(this.step,
this.start.top,this.end.top,this.frameNumber);d=$.easing.swing(null,this.step,this.start.scale,this.end.scale-this.start.scale,this.frameNumber);b=transformCSS({tran:{x:b,y:c},scale:d});this.body.css(b)}}).extend("AlwaysExistsItem");Class("FallenLeavesAnimation",{create:function(b){this._super(b);this.itemNumber=25;this.frameNumber=300},newItem:function(){return new FallenLeavesItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("FallenLeavesItem",{create:function(b,c){this.initLeafResources();this._super(b,c)},initLeafResources:function(){this.leafResources=[];this.leafResources.push({src:"leaves1.png",width:99,height:59});this.leafResources.push({src:"leaves2.png",width:100,height:88});this.leafResources.push({src:"leaves3.png",width:100,height:60});this.leafResources.push({src:"leaves4.png",width:100,height:87});this.leafResources.push({src:"leaves5.png",width:100,height:87});this.leafResources.push({src:"leaves6.png",
width:100,height:57})},createBody:function(){this.body=$("<img style='left:0px;top:0px;position:absolute;z-index:1'></img>");var b=this.leafResources[Number.random(0.1,5.9,0)],c={width:b.width+"px",height:b.height+"px"};this.body.attr("src",this.getImagePath(b.src));this.body.css(c)},initPositions:function(){var b=1.2*this.parent.height,c=Number.random(0,this.parent.width),d=Math.floor(0.1*-this.parent.height),f=Number.random(80,100,1),g=Math.PI/180*f,f=Math.floor(c+b*Math.cos(g)),b=Math.floor(d+
b*Math.sin(g)),g=Number.random(0.4,0.8,1),h=Number.random(0,360),k=h+Number.random(-90,90);this.start=new BackgroundItemPosition(c,d,g,h);this.end=new BackgroundItemPosition(f,b,g,k)},refresh:function(){var b=$.easing.easeInSine(null,this.step,this.start.left,this.end.left-this.start.left,this.frameNumber),c=$.easing.easeInSine(null,this.step,this.start.top,this.end.top-this.start.top,this.frameNumber),d=$.easing.easeInSine(null,this.step,this.start.rotate,this.end.rotate-this.start.rotate,this.frameNumber),
b=transformCSS({tran:{x:b,y:c},scale:this.start.scale,rotate:d});this.body.css(b)}}).extend("GoThroughItem");Class("TwinkleAnimation",{create:function(b){this._super(b);this.itemNumber=8;this.frameNumber=100},newItem:function(){return new TwinkleItem(this.stage,this.frameNumber)}}).extend("GoThroughAnimation");
Class("TwinkleItem",{create:function(b,c){this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:26px;height:26px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("twinkle.png"))},initPositions:function(){var b=Number.random(0,this.parent.width),c=Number.random(0,this.parent.height),d=Number.random(0,360),f=d+360;this.start=new BackgroundItemPosition(b,c,1,d);this.end=new BackgroundItemPosition(b,c,1,f)},refresh:function(){var b=this.start.left,
c=this.start.top,d=this.pointByStep(this.step,this.start.rotate,this.end.rotate,this.frameNumber,1),f=this.step,g=this.frameNumber/2,f=f<g?this.pointByStep(f,0,1,g,1):this.pointByStep(f-g,1,0,g,1),b=transformCSS({tran:{x:b,y:c},scale:f,rotate:d});this.body.css(b)}}).extend("GoThroughItem");
Class("MoonCloudAnimation",{create:function(b){this._super(b);this.itemNumber=9;this.frameNumber=1800;this.createMoon()},createMoon:function(){this.moon=$("<img></img>");this.moon.attr("src",this.getImagePath("moon.png"));this.moon.css({position:"absolute",right:"2%",top:"2%"});this.stage.body.append(this.moon)},resize:function(b,c){this._super(b,c);for(var d=0;d<this.itemNumber;d++)this.addItem();for(d=0;d<this.itemCount();d++){var f=this.getItem(d),g=this.frameNumber-Math.floor((d+1)*this.frameNumber/
this.itemNumber);f.active();f.step=g;f.refresh()}},newItem:function(){return new MoonCloudItem(this.stage,this.frameNumber,this.itemCount()%3)}}).extend("GoThroughAnimation");
Class("MoonCloudItem",{create:function(b,c,d){this.initCloudResources();this.cloudType=d;this._super(b,c)},initCloudResources:function(){this.cloudResources=[];this.cloudResources.push({src:"moon_cloud_one.png",width:960,height:480,top:0.05,opacity:0.5});this.cloudResources.push({src:"moon_cloud_two.png",width:960,height:480,top:0.05,opacity:0.2});this.cloudResources.push({src:"moon_cloud_three.png",width:960,height:480,top:0.05,opacity:0.5})},createBody:function(){this.body=$("<img style='left:0px;top:0px;position:absolute;z-index:1'></img>");
var b=this.cloudResources[this.cloudType],c={width:b.width+"px",height:b.height+"px",opacity:b.opacity};this.body.attr("src",this.getImagePath(b.src));this.body.css(c);this.top=b.top;this.width=b.width;this.height=b.height},initPositions:function(){var b=this.parent.width,c=Math.floor(this.parent.height*this.top),d=-this.width;Number.random(0,360);Number.random(-90,90);this.speed=Number.random(1,2,1);this.realFrameNumber=Math.floor(this.frameNumber/this.speed);this.start=new BackgroundItemPosition(b,
c);this.end=new BackgroundItemPosition(d,c)},refresh:function(){if(!(this.step>this.realFrameNumber)){var b=this.pointByStep(this.step,this.start.left,this.end.left,this.realFrameNumber),c=this.pointByStep(this.step,this.start.top,this.end.top,this.realFrameNumber),b=transformCSS({tran:{x:b,y:c},scale:this.start.scale});this.body.css(b)}}}).extend("GoThroughItem");
Class("BalloonCloudAnimation",{create:function(b){this.balloon=new BalloonAnimation(b);this.cloud=new BottomCloudAnimation(b)},resize:function(b,c){this.balloon.resize(b,c);this.cloud.resize(b,c)},nextFrame:function(){this.balloon.nextFrame();this.cloud.nextFrame()}});Class("BalloonAnimation",{create:function(b){this._super(b);this.itemNumber=2;this.frameNumber=600},newItem:function(){return new BalloonItem(this.stage,this.frameNumber,this.itemCount())}}).extend("AlwaysExistsAnimation");
Class("BalloonItem",{create:function(b,c,d){this.index=d;this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:150px;height:150px;position:absolute;z-index:1'></img>");this.body.attr("src",this.getImagePath("air_balloon.png"))},initPositions:function(){var b=this.parent.width/1E3,c=Math.floor(125*b),d=Math.floor(140*b),b=0,b=0==this.index?Number.random(20,100):this.parent.width-200-Number.random(20,100),d=this.parent.height-c-d,f=Number.random(30,70),g=b,h=d+f;this.start=
new BackgroundItemPosition(b,d-f);this.end=new BackgroundItemPosition(g,h);this.body.css({width:c+"px",height:c+"px"})},refresh:function(){var b=this.frameNumber/2,c=this.step,d;c<=b?(d=this.pointByStep(c,this.start.left,this.end.left,b),b=this.pointByStep(c,this.start.top,this.end.top,b)):(c-=b,d=this.pointByStep(c,this.end.left,this.start.left,b),b=this.pointByStep(c,this.end.top,this.start.top,b));d=transformCSS({tran:{x:d,y:b},origin:{x:0,y:0}});this.body.css(d)}}).extend("AlwaysExistsItem");
Class("BottomCloudAnimation",{create:function(b){this._super(b);this.itemNumber=2;this.frameNumber=1E3},newItem:function(){return new BottomCloudItem(this.stage,this.frameNumber,this.itemCount())}}).extend("AlwaysExistsAnimation");
Class("BottomCloudItem",{create:function(b,c,d){this.index=d;this._super(b,c)},createBody:function(){this.body=$("<img style='left:0px;top:0px;width:256px;height:256px;position:absolute;z-index:2'></img>");this.body.attr("src",this.getImagePath("bg-clouds.png"))},initPositions:function(){var b=this.parent.width,c=188*this.parent.width/988,d=this.index*this.parent.width,f=this.parent.height-c,g=d-this.parent.width;this.start=new BackgroundItemPosition(d,f);this.end=new BackgroundItemPosition(g,f);
this.body.css({width:b+"px",height:c+"px"})},refresh:function(){iX=this.pointByStep(this.step,this.start.left,this.end.left,this.frameNumber);iY=this.pointByStep(this.step,this.start.top,this.end.top,this.frameNumber);var b=transformCSS({tran:{x:iX,y:iY},origin:{x:0,y:0}});this.body.css(b)}}).extend("AlwaysExistsItem");Class("EmptyAnimation",{create:function(b){},addItem:function(){},clear:function(){},resize:function(b,c){},nextFrame:function(){},newItem:function(){}}).extend("BackgroundAnimation");
function grayBackground(b,c,d,f,g){this.sw=f;this.sh=g;this.background=$("<div ></div>");this.background.css({width:f+"px",height:g+"px",background:c,opacity:d,"z-index":200,position:"absolute",left:"0px",top:"0px"});b.append(this.background)}grayBackground.prototype.onResize=function(b,c){this.sw=b;this.sh=c;this.background.css({width:b+"px",height:c+"px"})};bdor[25]="i";
grayBackground.prototype.setPosition=function(b,c,d){void 0==d&&(d=["left","top"]);this.background.css(d[0],b+"px");this.background.css(d[1],c+"px")};grayBackground.prototype.show=function(){this.father.append(this.background)};grayBackground.prototype.hide=function(){this.background.remove()};grayBackground.prototype.setZindex=function(b){this.background.css({"z-index":b})};grayBackground.prototype.onMouseUp=function(b,c){$(this.background).bind(_event._down,function(d){c.call(b)})};
var textWidth=function(b,c){var d=$("<pre>"+b+"</pre>").css({color:bookConfig.iconColor,display:"none","font-size":c.size,"font-family":c.fontName});$("body").append(d);var f=Point(d.width(),d.height());d.remove();return f};
function label(b,c){this.labelBox=$('<div style = "position : absolute;font-family:Tahoma,Georgia,Serif;font-size:12px">'+b+"</div>");if("null"!=b&&""!=b){this.caption=b;this.fontSize="12px";this.fontColor="#f0f0f0";this.fontName="Tahoma";var d=textWidth(b,{size:this.fontSize,fontName:this.fontName});this.width=d.x;this.height=d.y;c.append(this.labelBox)}}label.prototype.getWidth=function(){return this.width};bdor[27]="f";label.prototype.getHeight=function(){return this.height};
label.prototype.getCaption=function(){return this.caption};label.prototype.setCaption=function(b){this.caption=b;this.labelBox[0].innerHTML=b;b=textWidth(b,{size:this.fontSize,fontName:this.fontName});this.width=b.x;this.height=b.y};label.prototype.setLabelPosition=function(b,c,d){void 0==d&&(d=["left","top"]);this.labelBox.css(d[0],b+"px");this.labelBox.css(d[1],c+"px")};label.prototype.onResize=function(b,c){this.width=b;this.height=c;this.labelBox.css({width:b+"px",height:c+"px"})};
label.prototype.setFont=function(b,c,d){null==b?b=this.fontSize:this.fontSize=b;null==c?c=this.fontColor:this.fontColor=c;null==d?d=this.fontName:this.fontName=d;this.labelBox.css({"font-size":b,color:c,"font-family":d});b=textWidth(this.caption,{size:b,fontName:d});this.width=b.x;this.height=b.y};label.prototype.setFontSize=function(b){null==b?b=this.fontSize:this.fontSize=b;this.labelBox.css({"font-size":b});b=textWidth(this.caption,{size:b,fontName:this.fontName});this.width=b.x;this.height=b.y};
label.prototype.riseAWord=function(b){var c=this.caption;-1==c.indexOf(b)&&(b=b.toLowerCase());-1!=c.indexOf(b)&&(newCaption=c.replaceAll(b,"<font color=red><strong>"+b+"</strong></font>"),this.labelBox[0].innerHTML=newCaption)};label.prototype.shortWord=function(b){this.caption.length>b&&(this.caption=this.caption.substring(0,b)+"..",this.setCaption(this.caption))};label.prototype.setCSS=function(b){this.labelBox.css(b)};label.prototype.setClass=function(b){this.labelBox.attr("class",b)};
function initProgressBar(b,c){this.width=60;this.height=30;this.progress=new label("Loading",b);this.caption=this.originCaption=c;this.captionLength=this.caption.length;this.progress.setCSS({display:"none"})}initProgressBar.prototype.setPosition=function(b,c){this.progress.setLabelPosition((b-this.width)/2,(c-this.height)/2)};
initProgressBar.prototype.addTimer=function(){var b=this;this.timerId=window.setInterval(function(){b.caption+=".";b.caption.length>b.captionLength+3&&(b.caption=originCaption);b.progress.setCaption(b.caption)},600)};initProgressBar.prototype.removeTimer=function(){window.clearInterval(this.timerId)};initProgressBar.prototype.show=function(){this.progress.setCSS({display:"block"});this.caption=this.originCaption;this.addTimer()};
initProgressBar.prototype.hide=function(){this.progress.setCSS({display:"none"});this.removeTimer()};initProgressBar.prototype.setIndex=function(b){this.progress.setCSS({"z-index":b})};
var BookShadow=Class({create:function(b){this.background=$("<div class='bookShadow'></div>");bookConfig.FlipDirection&&(this.background=$("<div class='bookShadow-vertical'></div>"));$(b).append(this.background);this.visible=!0},doubleWidth:function(b){bookConfig.FlipDirection?$(this.background).attr("class",b?"doubleHeight":"singleHeight"):$(this.background).attr("class",b?"doubleWidth":"singleWidth");$(this.background).addClass("bookShadow")},doubleHeight:function(b){$(this.background).attr("class",
b?"doubleHeight":"singleHeight");$(this.background).addClass("bookShadow-vertical")},right:function(b){$(this.background).css({right:"auto"});b&&$(this.background).css({right:"0px"})},down:function(b){$(this.background).css({bottom:"auto"});b&&$(this.background).css({bottom:"0px"})},show:function(){this.visible||($(this.background).show(),this.visible=!0)},hide:function(){this.visible&&($(this.background).hide(),this.visible=!1)}});bdor[26]="h";
Class("BookmarkList",{create:function(){this.bookmarks=[];this.bookPageCount=bookConfig.totalPageCount},reload:function(){this.bookmarks=[];this.loadBasicData();this.loadUserData();this.sort()},loadBasicData:function(){if(global.bmtConfig){var b=bmtConfig;bmtConfig.tabs&&(b=bmtConfig.tabs);for(var c=0;c<b.length;c++)this.isShow(b[c])&&this.bookmarks.push(b[c])}},loadUserData:function(){for(var b=Instance.parse(this.getUserDataFromLocal(),[]),c=0;c<b.length;c++)this.isShow(b[c])&&this.bookmarks.push(b[c])},
isShow:function(b){return parseInt(b.pageIndex)<=this.bookPageCount&&!this.exists(b)},getUserDataFromLocal:function(){var b=window.location.href.replace(window.location.hash,"")+"BookMark";try{if(window.localStorage&&window.localStorage[b])return window.localStorage.getItem(b)}catch(c){}},sort:function(){this.bookmarks=this.bookmarks.sort(function(b,c){return parseInt(b.pageIndex)-parseInt(c.pageIndex)})},count:function(){return this.bookmarks.length},item:function(b){return this.bookmarks[b]},exists:function(b){for(var c=
0;c<this.count();c++)if(this.item(c).pageIndex==b.pageIndex)return!0;return!1}});
Class("BookmarkTabItem",{$body:null,$parent:null,create:function(b){this.data=b;this.$body=$("<div class='bookmark_item'></div>");this.$caption=$("<div class='bookmark_caption'></div>");this.$body.append(this.$caption);this.initStyle();this.update()},initStyle:function(){bmtConfig.showPage&&this.$body.attr("title",getShownPageNumber(this.data.pageIndex));bmtConfig.hasTexture&&this.$body.css({"background-image":"url("+(uiBaseURL+"leather1.png")+")","background-repeat":"repeat"})},getData:function(){return this.data},
setData:function(b){this.data=b;this.update()},update:function(){var b=(bookConfig.tabAlpha?bookConfig.tabAlpha:100)/100;this.$body.css("background-color",Color(this.data.color).rgba(b));this.$caption.text(this.data.caption)},moveTo:function(b){this.$parent!=b&&(this.remove(),this.$parent=b,this.$parent.append(this.$body),this.$body.bind("click",this.onBookmarkClick.bind(this)),this.$body.bind("mouseenter",this.onBookmarkMouseEnter.bind(this)),this.$body.bind("mouseleave",this.onBookmarkMouseLeave.bind(this)),
this.$body.bind("pointerdown pointermove pointerup pointerenter",function(b){b.stopPropagation()}),this.$body.bind("mousedown mousemove mouseup mouseenter",function(b){b.stopPropagation()}))},remove:function(){null!=this.$parent&&(this.$body.remove(),this.$body.unbind(),this.$parent=null)},onBookmarkClick:function(b){gotoPageFun(this.data.pageIndex)},onBookmarkMouseEnter:function(b){this.$body.animate({top:"5px"},300)},onBookmarkMouseLeave:function(b){this.$body.animate({top:"40px"},300)},setPosition:function(b){this.$body.css({left:"",
right:"","z-index":""});this.$body.css(b)}});
Class("BookmarkItemPool",{create:function(){this.items=[]},getBookmarkItem:function(b){var c=this.getItemFromList(b);c||(c=this.createNewItem(b));return c},getItemFromList:function(b){for(var c=0;c<this.items.length;c++){var d=this.items[c];if(d.getData().pageIndex==b.pageIndex)return d.setData(b),d}return null},createNewItem:function(b){b=new BookmarkTabItem(b);this.items.push(b);return b},clean:function(b){for(var c=0;c<this.items.length;c++){var d=this.items[c],f=d.getData();b.exists(f)||d.remove()}}});
Class("BookmarkTab",{$parent:null,visible:!0,onSideEdge:!0,zIndex:0,create:function(b,c){this.$parent=b;this.hideSmallTab=!!c;this.onSideEdge=bmtConfig.onSideEdge;bookConfig.FlipDirection&&(this.onSideEdge=!0);this.zIndex=6;this.bookmarkPool=new BookmarkItemPool;this.bookmarkList=new BookmarkList;this.initBookmarkBar();this.reload()},initBookmarkBar:function(){bookConfig.FlipDirection?(this.leftBar=$("<div class='up_bookmark_bar'></div>"),this.rightBar=$("<div class='down_bookmark_bar'></div>")):
(this.leftBar=$("<div class='left_bookmark_bar'></div>"),this.rightBar=$("<div class='right_bookmark_bar'></div>"));this.leftBar.on("mouseup touchstart",function(b){b.stopPropagation()});this.rightBar.on("mouseup touchstart",function(b){b.stopPropagation()});this.onSideEdge&&(this.leftBar.addClass("vertical"),this.rightBar.addClass("vertical"));this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);this.$parent.append(this.leftBar);this.$parent.append(this.rightBar)},reload:function(){!1!=
this.visible&&(this.bookmarkList.reload(),this.refresh())},refresh:function(){!1!=this.visible&&(this.separate(),this.adjustBar(),this.onResize())},separate:function(){this.refreshShownPage();this.bookmarkPool.clean(this.bookmarkList);for(var b=0;b<this.bookmarkList.count();b++){var c=this.bookmarkList.item(b),d=this.bookmarkPool.getBookmarkItem(c);c.pageIndex>=this.bigShownPage?rightToLeft?d.moveTo(this.leftBar):d.moveTo(this.rightBar):c.pageIndex<=this.smallShownPage&&(rightToLeft?d.moveTo(this.rightBar):
d.moveTo(this.leftBar))}},refreshShownPage:function(){var b=BookInfo.getCurrentPages();1==b.length?(this.smallShownPage=b[0],this.bigShownPage=b[0]):(this.smallShownPage=Math.min(b[0],b[1]),this.bigShownPage=Math.max(b[0],b[1]))},isTheFirstPage:function(){this.refreshShownPage();return 1==this.bigShownPage},isTheLastPage:function(){this.refreshShownPage();return this.smallShownPage==totalPageCount},setAttachmentBefore:function(b){1>=b&&(parseBool(bookConfig.RightToLeft)?this.hideRightBar():this.hideLeftBar());
b>=originTotalPageCount&&(parseBool(bookConfig.RightToLeft)?this.hideLeftBar():this.hideRightBar())},adjustBar:function(){var b=this.leftBar.children().length,c=this.rightBar.children().length;this.hideSmallTab?rightToLeft?(this.hideRightBar(),0==b?this.hideLeftBar():this.showLeftBar()):(this.hideLeftBar(),0==c?this.hideRightBar():this.showRightBar()):rightToLeft?(0==c||this.isTheFirstPage()?this.hideRightBar():this.showRightBar(),0==b||this.isTheLastPage()?this.hideLeftBar():this.showLeftBar()):
(0==b||this.isTheFirstPage()?this.hideLeftBar():this.showLeftBar(),0==c||this.isTheLastPage()?this.hideRightBar():this.showRightBar());bookConfig.HardPageEnable&&this.adjustZindex()},adjustZindex:function(){this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);rightToLeft?(this.isTheLastPage()&&this.rightBar.css("z-index",1),this.isTheFirstPage()&&this.leftBar.css("z-index",1)):(this.isTheLastPage()&&this.leftBar.css("z-index",1),this.isTheFirstPage()&&this.rightBar.css("z-index",
1))},onResize:function(){if(this.onSideEdge){var b=this.$parent.height(),c=this.$parent.width();bookConfig.FlipDirection&&(b/=2);this.leftBar.css({width:b+"px",left:-b+"px"});this.rightBar.css({width:b+"px",left:c+"px"});bookConfig.FlipDirection&&this.rightBar.css({left:c-b+"px"});rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"right",-1)):(this.resizeItemsOfBar(this.leftBar,"right",1),this.resizeItemsOfBar(this.rightBar,"left",-1))}else b=this.$parent.width(),
c=this.$parent.width(),this.hideSmallTab||(b/=2),this.leftBar.css({width:b+"px",left:"0px"}),this.rightBar.css({width:b+"px",left:c-b+"px"}),rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"left",-1)):(this.resizeItemsOfBar(this.leftBar,"left",1),this.resizeItemsOfBar(this.rightBar,"left",-1))},resizeItemsOfBar:function(b,c,d){for(var f=b.width(),g=b.children().length,f=Math.floor((f-4-110)/(g-1)),f=Number.between(f,10,70),g=iPos=0;g<this.bookmarkList.count();g++){var h=
this.bookmarkList.item(g),k=this.bookmarkPool.getBookmarkItem(h);if(k.$parent==b){var l={};l[c]=f*iPos;l["z-index"]=d*h.pageIndex;k.setPosition(l);iPos++}}},show:function(){this.visible=!0;this.refresh()},hide:function(){this.hideLeftBar();this.hideRightBar();this.visible=!1},showLeftBar:function(){0<this.leftBar.children().length?this.leftBar.css("display","block"):this.leftBar.css("display","none")},hideLeftBar:function(){this.leftBar.css("display","none")},showRightBar:function(){0<this.rightBar.children().length?
this.rightBar.css("display","block"):this.rightBar.css("display","none")},hideRightBar:function(){this.rightBar.css("display","none")}});
var TableOfContentElements=Class({create:function(b){this._super(b);this.callBack=b;this.checkConfig();this.initElements();this.initEvent(b);this.pickElements(b)},checkConfig:function(){for(var b=function(c){if(c&&c.children&&0!=c.children.length)for(var d=c.children.length,h=0;h<d;h++)c.children[h].level=parseInt(c.children[h].level)+1,b(c.children[h])},c=ols.length,d=0;d<c;d++)0==parseInt(ols[d].level)&&(ols[d].level=parseInt(ols[d].level)+1,b(ols[d]))},initElements:function(){this.searchButtonUrl=
form_icons.search_form?"data:image/png;base64,"+form_icons.search_form:uiBaseURL+"search_form.png";this.input=$("<input class='input_search'></input>");this.searchButton=$("<img class='searchButton' src='"+this.searchButtonUrl+"'/>");this.tableofcontentSwiper=$("<div class='stage'></div>");this.tableofcontentSwiperList=$("<div class='swiper'></div>");this.refreshSwiper(this.tableofcontentSwiperList,ols);this.tableofcontentSwiper.append(this.tableofcontentSwiperList);isPhone()||isPad()?this.tableofcontentSwiper.css({"overflow-y":"auto",
"overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),this.tableofcontentSwiper.append(this.progress),this.progress.append(this.progressBar),this.tableofcontentSwiper.scroll({},Direction.top))},refreshSwiper:function(b,c){for(var d=c.length,f=0;f<d;f++)this.addItem(b,c[f])},addItem:function(b,c){var d=new this.callBack.newItem(b,c,this.refresh.bind(this));b.append(d.getItem());d.unfolding()},
refresh:function(){isPhone()||isPad()||this.tableofcontentSwiper.refreshData()},initEvent:function(b){this.searchButton.onTap(function(){this.searchStart()}.bind(this));this.input.bind("keydown",function(b){13==b.keyCode&&this.searchStart();b.stopPropagation()}.bind(this));this.input.bind("mousedown touchstart pointerdown mouseover mousemove",function(b){b.stopPropagation()})},searchStart:function(){this.tableofcontentSwiperList.empty();var b=this.input.val().toLowerCase();""===b?this.refreshSwiper(this.tableofcontentSwiperList,
ols):(b=this.matchKey(b),this.refreshSwiper(this.tableofcontentSwiperList,b));this.refresh()},matchKey:function(b){var c=[],d=function(c){for(var g=[],h=0;h<c.length;h++){var k={caption:c[h].caption,page:c[h].page,level:c[h].level};c[h].children&&0<c[h].children.length&&(k.children=d(c[h].children));if(0<=c[h].caption.toLowerCase().indexOf(b))g.push(k);else if(k.children&&0<k.children.length)for(var l=0;l<k.children.length;l++)g.push(k.children[l])}return g};return c=d(ols)},pickElements:function(b){b.input=
this.input;b.searchButton=this.searchButton;b.searchButtonUrl=this.searchButtonUrl;b.tableofcontentSwiper=this.tableofcontentSwiper;b.tableofcontentSwiperList=this.tableofcontentSwiperList;b.progress=this.progress;b.progressBar=this.progressBar},changeLanguage:function(){}}).extend(FormElements),TableOfContentItem=Class({create:function(b,c,d){this.callback=d;this.level=parseInt(ols[0].level)?parseInt(c.level):parseInt(c.level)+1;this.children=[];this.parent=b;this.parm=c;this.parm.caption=HTMLString.toText(this.parm.caption);
this.item=(this.hasChild=c.children&&0<c.children.length)?$("<ul class='item'></ul>"):$("<li class='item'></li>");this.expandUrl=form_icons.arrow?"data:image/png;base64,"+form_icons.arrow:uiBaseURL+"arrow.png";this.collapseUrl=rightToLeft?form_icons.arrow3?"data:image/png;base64,"+form_icons.arrow3:uiBaseURL+"arrow3.png":form_icons.arrow2?"data:image/png;base64,"+form_icons.arrow2:uiBaseURL+"arrow2.png";this.fontColor=c.fontColor;this.colorObj=Color(this.fontColor);this.initDefaultDom();this.initHtml(b,
c);this.initEvent()},getItem:function(){return this.item},initDefaultDom:function(){rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.arrow&&(this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor))},initRightToLeftDefaultDom:function(){LanguageTool.isRightToLeft(this.parm.caption)?this.description=$("<p class='description rtl'>"+this.parm.caption+"</p>"):this.description=$("<p class='description'>"+this.parm.caption+"</p>");this.hasChild&&(this.arrow=
$("<img class='arrow' src='"+this.collapseUrl+"'/>"),this.arrow.css("right",10*(this.level-1)+"px"));this.description.css("margin-right",10*(this.level-1)+15+"px")},initLeftToRightDefaultDom:function(){this.description=$("<p class='description'>"+this.parm.caption+"</p>");this.hasChild&&(this.arrow=$("<img class='arrow' src='"+this.collapseUrl+"'/>"),this.arrow.css("left",10*(this.level-1)+"px"));this.description.css("margin-left",10*(this.level-1)+15+"px")},initHtml:function(b,c){rightToLeft?this.initRightToLeftHtml():
this.initLeftToRightHtml()},initRightToLeftHtml:function(){this.item.append(this.description);this.arrow&&this.item.append(this.arrow)},initLeftToRightHtml:function(){this.arrow&&this.item.append(this.arrow);this.item.append(this.description)},initEvent:function(){this.item.onTap(function(){this.parm.url?window.open(getRealURL(this.parm.url),"_blank"):(gotoPageFun(parseInt(this.parm.page)),(isPhone()||isPad())&&global.frmTableOfContent.hide())}.bind(this));this.item.bind("mouseover",function(){this.item.css({background:this.colorObj.rgba(0.1)})}.bind(this));
this.item.bind("mouseleave",function(){this.isExpand||this.item.css({"background-color":"transparent"})}.bind(this));this.hasChild&&(this.arrow&&this.arrow.click(function(){this.onSwitch()}.bind(this)),this.arrow.bind("mousedown touchstart pointerdown mouseover mousemove click",function(b){b.stopPropagation()}))},expand:function(b){this.hasChild&&(0==this.children.length?this.addChildren():this.showChildren(),this.setAsExpand(),b&&this.callback())},collapse:function(b){if(this.hasChild){for(var c=
0;c<this.children.length;c++)this.children[c].hide(),this.children[c].collapse();this.setAsCollapse();b&&this.callback()}},setAsExpand:function(){this.isExpand=!0;this.arrow&&(this.arrow.attr("src",this.expandUrl),this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor));this.item.css({"font-weight":"bold","background-color":this.colorObj.rgba(0.1)})},setAsCollapse:function(){this.isExpand=!1;this.arrow&&(this.arrow.attr("src",this.collapseUrl),this.arrow[0].colorChanged=!1,this.arrow.changeButtonColor(this.fontColor));
this.item.css({"font-weight":"","background-color":""})},addChildren:function(){for(var b=this.parm.children.length,c=0;c<b;c++){this.parm.children[c].fontColor=this.fontColor;var d=new (global[this.getClassName()])(this.parent,this.parm.children[c],this.callback);0==c?d.getItem().insertAfter(this.item):d.getItem().insertAfter(this.children[c-1].getItem());this.children.push(d)}},showChildren:function(){for(var b=this.children.length,c=0;c<b;c++)this.children[c].show(),this.children[c].getIsExpand()&&
this.children[c].expand()},onSwitch:function(){this.opened?this.collapse(!0):this.expand(!0);this.opened=!this.opened},getIsExpand:function(){return this.opened},unfolding:function(){if(!bookConfig.isHideTabelOfContentNodes){this.expand();for(var b=this.children.length,c=0;c<b;c++)this.children[c].unfolding();this.opened=!0}},show:function(){this.item.show()},hide:function(){this.item.hide()}}),PhoneTableOfContentItem=Class({create:function(b,c,d){c.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:
bookConfig.iconColor;this._super(b,c,d)}}).extend(TableOfContentItem),PhoneTableOfContentForm=Class({create:function(b){this.elements=new TableOfContentElements(this);this._super(b)},onCreate:function(){this.stage.css({color:this.fontColor});this.close.changeButtonColor(this.fontColor);this._super()},initHtml:function(){this.title.append(this.close);this.stage.append(this.title);this.stage.append(this.input);this.stage.append(this.searchButton);this.stage.append(this.tableofcontentSwiper)},newItem:function(b,
c,d){return new PhoneTableOfContentItem(b,c,d)},onResize:function(){this._super();this.tableofcontentSwiper.css("height",this.height-125+"px");this.input.css("width",this.width-60+"px");this.elements.refresh()},initEvent:function(){},onShow:function(){}}).extend(PhoneFormFrame),TelephoneNumberItem=Class({create:function(b,c){this.parent=b;this.parm=c?c:{};this.parm.label||(this.parm.label="");this.parm.number||(this.parm.number="");this.item=$("<div class='item'></div>");this.number=$("<span class='number'>"+
(this.parm.label?this.parm.label+":":"")+this.parm.number+"</span>");this.button=$("<a href='tel:"+this.parm.number+"'><span class='button'>"+getLanguage("btnDialing","call")+"</span></a>");this.initHtml();this.initCss()},initHtml:function(){this.item.append(this.number);this.item.append(this.button);this.parent.append(this.item)},initCss:function(){},changeLanguage:function(){this.button.find("span").html(getLanguage("btnDialing","call"))}}),TelephoneNumberElements=Class({create:function(b){this._super(b);
this.initElements();this.initEvent(b);this.pickElements(b)},initElements:function(){this.initSwiper();this.addItem()},initSwiper:function(){this.numberSwiper=$("<div class='stage'></div>");this.numberSwiperList=$("<div class='swiper'></div>");this.numberSwiper.append(this.numberSwiperList);isPhone()||isPad()?this.numberSwiper.css({"overflow-y":"auto","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}):(this.progress=$("<div class='progress'></div>"),this.progressBar=$("<div class='progressBar'></div>"),
this.numberSwiper.append(this.progress),this.progress.append(this.progressBar),this.numberSwiper.scroll({},Direction.top))},addItem:function(){this.numberArray=global.phoneNumber;this.itemArray=[];for(var b=0;b<this.numberArray.length;b++){var c=new TelephoneNumberItem(this.numberSwiperList,this.numberArray[b]);this.itemArray.push(c)}},refresh:function(){isPhone()||isPad()||this.numberSwiper.refreshData()},initEvent:function(b){},pickElements:function(b){b.numberSwiper=this.numberSwiper;b.itemArray=
this.itemArray},changeLanguage:function(){for(var b=0;b<this.itemArray.length;b++)this.itemArray[b]&&this.itemArray[b].changeLanguage()}}).extend(FormElements),TelephoneNumberForm=Class({create:function(b){this.elements=new TelephoneNumberElements(this);this._super(b)},onCreate:function(){this.title.css({"background-color":this.mainColor,color:this.fontColor});this.numberSwiper.css({"background-color":this.mainColorObj.rgba(0.8),color:this.fontColorObj.rgba(0.9)});this.numberSwiper.find("a").css({color:this.fontColorObj.rgba(0.9),
border:"1px solid "+this.fontColorObj.rgba(0.9)});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.numberSwiper);this._super()},initEvent:function(){this.stage.bind(_event._down,function(b){b.stopPropagation()})},onShow:function(){},onResize:function(){this._super();this.numberSwiper.css("max-height",windowHeight/2+"px");this.elements.refresh()}}).extend(FadeOutFadeForm),thickessPerBar=1,totalheight=300,originColor;
function drawThickeness(b,c,d,f,g){totalheight=d;var h=0;d=thickessPerBar/8/1.5;var k;k=Math.max(5*c/12,10);k=Math.min(k,32);k=0==k%2?k:k+1;var l=0,m=0;Math.max(k,4);for(Math.min(k,12);m<c;){k=getColorAtIdx(m,c);h=d*m-Math.sin(Math.PI/2/4*m/c)*d*m/2;h=d*m;l=totalheight-2*h;for(k=k.toString(16);6>k.length;)k="0"+k;b.fillStyle="#"+k;b.fillRect(f+g*m,h,1,l);b.fill();m++}}var COLOR_0=243,COLOR_1_1=209,COLOR_1_2=231,COLOR_2_1=209,COLOR_2_2=213;
function getColorAtIdx(b,c){var d=0,f=d=0,d=Math.max(3,c/6+c/4),d=Math.min(11,d),d=0==d%2?d-1:d;global.originColor||(global.originColor=Color(bookConfig.thicknessColor).split());var g=originColor.r/255,h=originColor.g/255,k=originColor.b/255;0==b?d=COLOR_0:b<d?d=0==b%2?COLOR_1_2:COLOR_1_1:(d=(b-d)/2,f=4<d/2?24:6*Math.floor(d/2),d=0==d%2?COLOR_2_1-f:COLOR_2_2-f);return d*k|d*h<<8|d*g<<16}
Class("Thickness",{create:function(b,c){this.thicknessWidth=getMaxThicknessWidth();this.totalPageCount=bookConfig.totalPageCount;this.endIndex=this.startIndex=this.pageCount=0;this.parent=b;this.isLeft=c;this.scale=1;this.init();this.initShadow();this.initEvent()},init:function(){this.thickness=$("<div class='thickness'></div>");this.thicknessCanvas=$("<canvas style='position:absolute;top:0;left:0;'>");this.isLeft?this.thickness.addClass("left_thickness"):this.thickness.addClass("right_thickness");
this.thickness.css({"z-index":5});this.thickness.append(this.thicknessCanvas);this.parent.append(this.thickness);this.context=this.thicknessCanvas[0].getContext("2d")},initShadow:function(){this.shadow||$.browser.msie&&11>$.browser.version||(this.shadow=$("<div class='shadow'></div>"),this.thickness.append(this.shadow))},refresh:function(b,c){this.startIndex=b;this.endIndex=c;this.pageCount=this.endIndex-this.startIndex;this.width=this.getThicknessWidth(Math.abs(this.pageCount));this.thickness.css({width:this.width+
"px"});this.thicknessCanvas.attr("width",this.width+"px");this.context.clearRect(0,0,this.thicknessWidth,this.height);this.isLeft?(this.thickness.css({left:-this.width+"px"}),drawThickeness(this.context,this.width,this.height,this.width,-1)):drawThickeness(this.context,this.width,this.height,0,1)},onResize:function(b,c){this.resizeThickness(b,c);this.resizeShadow(b,c)},show:function(){this.thickness.show()},hide:function(){this.thickness.hide()},hideCanvas:function(){this.thicknessCanvas.hide()},
showCanvas:function(){this.thicknessCanvas.show()},resizeShadow:function(b,c){},resizeThickness:function(b,c){this.height=c;var d="100%";this.isLeft&&(d=-this.width+"px");this.thickness.css({left:d});this.thicknessCanvas.attr("height",c+"px");this.thicknessCanvas.attr("width",this.thicknessWidth+"px");this.context.clearRect(0,0,this.thicknessWidth,this.height);this.isLeft?drawThickeness(this.context,this.thicknessWidth,c,this.thicknessWidth,-1):drawThickeness(this.context,this.thicknessWidth,c,0,
1);this.resetTotalWidth(b,c)},resetTotalWidth:function(b,c){this.totalWidth=oneSideTotalThicknessWidth()},getPageIndexByPosition:function(b){b=this.getDistance(b);return this.startIndex+parseInt(b*this.pageCount/this.width)},getDistance:function(b){b=b.pageX;var c=$(this.thickness).offset().left;return b-c},getThicknessWidth:function(b){return this.width=Math.floor(this.totalWidth*b/this.totalPageCount)},getWidth:function(){return this.width},getHeight:function(){return this.height},initEvent:function(){this.thickness.bind("mouseup touchstart",
function(b){b.stopPropagation()}.bind(this));this.thickness.click(function(b){0!=this.pageCount&&(b=this.getPageIndexByPosition(b),!b||0>=b||gotoPageFun(b))}.bind(this));isPhone()||isPad()||(this.thickness.bind("mousemove",function(b){if(0!=this.pageCount){var c=this.getPageIndexByPosition(b);if(!c||0>=c)this.hint&&this.hint.hide();else{var c=" "+getShownPageNumber(c)+" ",d=b.pageX;b=b.pageY-30;this.hint||(this.hint=new divHint(c,d,b));this.hint.setText(c);this.hint.show(d,b);this.hint.moveto(d,b)}}}.bind(this)),
this.thickness.bind("mouseleave",function(){null!=this.hint&&this.hint.hide()}.bind(this)))},doSetMovingScale:function(b,c,d,f,g){if(!((isPhone()||isPad())&&!bookConfig.HardPageEnable||!this.totalWidth||0>=this.totalWidth||(g=g?0:Math.min(4/this.totalWidth,1),1==g||(1!=b&&1!=c||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&b!=totalPageCount&&c!=totalPageCount))){var h=1,k=1;(1!=b||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&b!=totalPageCount||(h=g);(1!=c||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&
c!=totalPageCount||(k=g);b=$.easing.easeInOutSine(null,d,h,k-h,f);this.setScale(b)}},setScale:function(b){this.thickness.css({transform:"scaleX("+b+") scaleZ(1)","-webkit-transform":"scaleX("+b+") scaleZ(1)","-moz-transform":"scaleX("+b+") scaleZ(1)","-ms-transform":"scaleX("+b+") scaleZ(1)","-o-transform":"scaleX("+b+") scaleZ(1)"});this.scale=b}});
var totalThicknessWidth=function(b){if(!b&&!bookConfig.showThicknessOnMobile)return 0;totalWidth=oneSideTotalThicknessWidth();b&&(totalWidth*=2);return totalWidth},oneSideTotalThicknessWidth=function(){var b=getMaxThicknessWidth(),c=Math.min(bookConfig.totalPageCount,100),c=$.easing.easeOutQuad(null,c,0,b,100),c=Math.floor(c),d=1,d=$.easing.swing(null,Math.max(c-8,0),1,d-1,b-8);return c=Math.floor(c*d)},getMaxThicknessWidth=function(){switch(bookConfig.thicknessWidthType){case "none":return 0;case "thinner":return 5;
case "thin":return 15;case "thicker":return 40}return 20},ThicknessManager=Class({create:function(b,c){this.book=c;this.leftThickness=new Thickness(b,!0);this.rightThickness=new Thickness(b,!1)},setAttachmentBefore:function(b){bookConfig.RightToLeft?this.book.currentPageIndex<b?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(b)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(b),0):this.book.currentPageIndex<b?this.rightThickness&&
this.rightThickness.refresh(this.getMaxCurrentIndex(b),bookConfig.totalPageCount):this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex(b))},afterCurling:function(){this.refreshThickness()},setAttachmentIn:function(b){},setAttachmentAfter:function(){this._super();this.afterCurling()},followToPoint:function(b,c,d){this.leftThickness&&this.leftThickness.doSetMovingScale(b,c,d,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(b,c,
d,this.book.width,bookConfig.HardPageEnable)},refreshThickness:function(){bookConfig.RightToLeft?(this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,
this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},resizeAttachment:function(b,c){if(this.leftThickness)this.leftThickness.onResize(b,c);if(this.rightThickness)this.rightThickness.onResize(b,c);this.refreshThickness()},hideCanvas:function(){this.leftThickness&&this.leftThickness.hideCanvas();this.rightThickness&&
this.rightThickness.hideCanvas()},showCanvas:function(){this.leftThickness&&this.leftThickness.showCanvas();this.rightThickness&&this.rightThickness.showCanvas()},getThicknessWidth:function(){return[this.leftThickness.getWidth()*this.leftThickness.scale,this.rightThickness.getWidth()*this.rightThickness.scale]},getMinCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;return BookInfo.getMinPageIndex(b)},getMaxCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;
b=BookInfo.getMaxPageIndex(b);return Math.min(b,bookConfig.totalPageCount)}}),SingleBookThicknessManager=Class({create:function(b,c){this.book=c;rightToLeft&&(this.leftThickness=new Thickness(b,!0));rightToLeft||(this.rightThickness=new Thickness(b,!1))},setAttachmentBefore:function(b){bookConfig.RightToLeft?this.book.currentPageIndex<b?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(b)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(b),
0):this.book.currentPageIndex<b?this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(b),bookConfig.totalPageCount):this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex(b))},followToPoint:function(b,c,d){b>c&&(d=2*this.book.width-d);this.leftThickness&&this.leftThickness.doSetMovingScale(b,c,d,2*this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(b,c,d,2*this.book.width,bookConfig.HardPageEnable)},refreshThickness:function(){bookConfig.RightToLeft?
(this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,
bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},resizeAttachment:function(b,c){if(this.leftThickness)this.leftThickness.onResize(b,c);if(this.rightThickness)this.rightThickness.onResize(b,c);this.refreshThickness()},getThicknessWidth:function(){if(rightToLeft)return[this.leftThickness.getWidth()*this.leftThickness.scale,0];if(!rightToLeft)return[0,
this.rightThickness.getWidth()*this.rightThickness.scale]},getMinCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;return b},getMaxCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;return Math.min(b,bookConfig.totalPageCount)}}).extend(ThicknessManager),FlipShotBar=Class({create:function(b){this.flipShotObj=$("<div id='flipShotBar' class='flipShotBar'></div>");this.flipShotObj.css({"z-index":2*(bookConfig.totalPageCount+5)+1});this.isLeft=b;this.visible=
!0;this.width=50;this.height=0;this.init();this.initEvents();this.flipShotObj.append(this.firstDiv);this.flipShotObj.append(this.prevDiv)},init:function(){this.firstDiv=$("<div class='flipbutton upbutton'></div>");this.prevDiv=$("<div class='flipbutton downbutton'></div>");this.isLeft?(this.firstDiv.addClass("left"),this.prevDiv.addClass("left"),this.prevImageUrl=uiBaseURL+"slide_leftButton.png",this.firstImageUrl=uiBaseURL+"slide_firstButton.png"):(this.firstDiv.addClass("right"),this.prevDiv.addClass("right"),
this.prevImageUrl=uiBaseURL+"slide_rightButton.png",this.firstImageUrl=uiBaseURL+"slide_lastButton.png");this.prevDiv.append("<img src='"+this.prevImageUrl+"'/>");this.firstDiv.append("<img src='"+this.firstImageUrl+"'/>")},onResize:function(b,c){var d=Math.min(50,0.7*c/8),f=Math.min(0.7*c,310);this.width=d;this.height=f;this.flipShotObj.css({width:d,height:f});this.setPosition(b,c)},setPosition:function(b,c){this.flipShotObj.css({left:this.isLeft?1-this.width:"100%",top:(c-this.height)/2})},setScale:function(b){this.width*=
b;this.height*=b;this.flipShotObj.css({width:this.width,height:this.height})},setVisible:function(b){this.flipShotObj.css({display:b?"block":"none"});this.visible=b},getContainer:function(){return this.flipShotObj},initEvents:function(){this.isLeft?(this.prevDiv.bind(_event._end,function(b){rightToLeft?nextPageFun():previousPageFun()}),this.firstDiv.bind(_event._end,function(b){rightToLeft?lastPageFun():firstPageFun()})):(this.prevDiv.bind(_event._end,function(b){rightToLeft?previousPageFun():nextPageFun()}),
this.firstDiv.bind(_event._end,function(b){rightToLeft?firstPageFun():lastPageFun()}));this.prevDiv.on("mousedown mouseup touchstart",function(b){b.stopPropagation()});this.firstDiv.on("mousedown mouseup touchstart",function(b){b.stopPropagation()})},setVisibleByIndex:function(b){this.isLeft?(1<b&&(rightToLeft||this.setVisible(!0)),b<originTotalPageCount-1&&rightToLeft&&this.setVisible(!0),3>=b&&(bookConfig.RightToLeft||1>=b&&this.setVisible(!1)),b>=originTotalPageCount-2&&bookConfig.RightToLeft&&
b>=originTotalPageCount-1&&this.setVisible(!1)):(1<b&&rightToLeft&&this.setVisible(!0),b<originTotalPageCount-1&&(rightToLeft||this.setVisible(!0)),3>=b&&bookConfig.RightToLeft&&1>=b&&this.setVisible(!1),b>=originTotalPageCount-2&&(bookConfig.RightToLeft||b>=originTotalPageCount-1&&this.setVisible(!1)))},refresh:function(){}}),FlipShotBarManager=Class({create:function(b,c){this.book=c;this.leftFlipShotBar=new FlipShotBar(!0);this.rightFlipShotBar=new FlipShotBar(!1)},appendTo:function(b){b.append(this.leftFlipShotBar.getContainer());
b.append(this.rightFlipShotBar.getContainer())},setVisibleByIndex:function(b){bookConfig.RightToLeft?(b>=this.book.currentPageIndex&&this.leftFlipShotBar.setVisibleByIndex(b),b<=this.book.currentPageIndex&&this.rightFlipShotBar.setVisibleByIndex(b)):(b<=this.book.currentPageIndex&&this.leftFlipShotBar.setVisibleByIndex(b),b>=this.book.currentPageIndex&&this.rightFlipShotBar.setVisibleByIndex(b))},refresh:function(){this.leftFlipShotBar&&this.leftFlipShotBar.setVisibleByIndex(this.book.currentPageIndex);
this.rightFlipShotBar&&this.rightFlipShotBar.setVisibleByIndex(this.book.currentPageIndex)},onResize:function(b,c){if(this.leftFlipShotBar)this.leftFlipShotBar.onResize(b,c);if(this.rightFlipShotBar)this.rightFlipShotBar.onResize(b,c)},getWidth:function(){return this.leftFlipShotBar?this.leftFlipShotBar.width:this.rightFlipShotBar?this.rightFlipShotBar.width:0},getHeight:function(){return this.leftFlipShotBar?this.leftFlipShotBar.height:this.rightFlipShotBar?this.rightFlipShotBar.height:0},resizeAttachment:function(b,
c,d){this.leftFlipShotBar&&this.leftFlipShotBar.setScale(d);this.rightFlipShotBar&&this.rightFlipShotBar.setScale(d);if(this.leftFlipShotBar)this.leftFlipShotBar.onResize(b,c);if(this.rightFlipShotBar)this.rightFlipShotBar.onResize(b,c)}}),VideoGalleryElements=Class({create:function(b){this._super(b);this.initVideoList();this.videoList&&0!=this.videoList.length&&(this.initElements(),this.initEvent(b),this.pickElements(b))},initVideoList:function(){this.videoList=videoList},initElements:function(){this.content=
$("<div class='video_content'></div>");this.video=$("<iframe type='text/html' class='video' src='' allowfullscreen frameborder='0'></iframe>");rightToLeft?this.initRightToLeftDefaultDom():this.initLeftToRightDefaultDom();this.initSwiper()},initRightToLeftDefaultDom:function(){this.info=$("<div class='info'><span class='title rtl'>"+this.videoList[0].title+"</span><p class='description rtl'>"+this.videoList[0].description+"</p></div>")},initLeftToRightDefaultDom:function(){this.info=$("<div class='info'><span class='title'>"+
this.videoList[0].title+"</span><p class='description'>"+this.videoList[0].description+"</p></div>")},initSwiper:function(){if(this.videoList&&!(1>=this.videoList.length)){this.videoListTitle=$("<sapn class='title'>"+getLanguage("frmVideoListTitle","Video list")+"</span>");this.videoSwiper=$("<div class='videoSwiper stage'></div>");var b=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");var c=$("<div class='progressBar'></div>");this.refreshSwiper(b,this.videoList);this.videoSwiper.append(b);
this.videoSwiper.append(this.progress);this.progress.append(c)}},refreshSwiper:function(b,c){for(var d=c.length,f=0;f<d;f++)this.addItem(b,c[f])},addItem:function(b,c){if(b&&c){var d=function(){this.playVideo(c)}.bind(this),d=new VideoGalleryItem(c,d);b.append(d.getDom())}},playVideo:function(b){var c,d=getProtocal();"youtube"===b.type&&(c=d+"www.youtube.com/embed/"+b.id+"?autoplay=1&wmode=transparent");"vimeo"===b.type&&(c=d+"player.vimeo.com/video/"+b.id+"?autoplay=1&wmode=transparent&portrait=0");
this.video.attr("src",c);c=this.info.find(".description");this.info.find(".title").html(b.title);c.html(b.description)},initEvent:function(b){this.videoSwiper&&this.videoSwiper.scroll({},Direction.top,"win10")},pickElements:function(b){b.videoList=this.videoList;b.content=this.content;b.video=this.video;b.info=this.info;b.videoListTitle=this.videoListTitle;b.videoSwiper=this.videoSwiper;b.progress=this.progress},changeLanguage:function(){this.videoListTitle&&this.videoListTitle.html(getLanguage("frmVideoListTitle",
"Video list"))}}).extend(FormElements),VideoGalleryItem=Class({create:function(b,c){b&&(this.parm=b,this.callback=c,this.initDom(),this.initEvent())},initDom:function(){this.item=$("<div class='item'></div>");this.image=$("<div class='thumbnail'></div>");this.parm.thumbnail&&this.image.css({"background-image":"url("+this.parm.thumbnail+")"});this.parm.title&&(this.title=rightToLeft?$("<div class='title rtl'>"+this.parm.title+"</div>"):$("<div class='title'>"+this.parm.title+"</div>"));this.parm.description&&
(this.description=rightToLeft?$("<div class='description rtl'>"+this.handleData(this.parm.description)+"</div>"):$("<div class='description'>"+this.handleData(this.parm.description)+"</div>"));this.item.append(this.image);this.title&&this.item.append(this.title);this.description&&this.item.append(this.description)},handleData:function(b){b=b.replaceAll("<","&lt");b=b.replaceAll(">","&gt");return b=handleData(b,"")},initEvent:function(){this.item.onTap(this.callback)},getDom:function(){return this.item}}),
PhotoGallery=Class({create:function(b,c){!c||0>=c.length||(this.parent=b,this.photoArray=c,this.index=0,this.visible=!1,this.pageWidth=$(window).width(),this.pageHeight=$(window).height(),this.images=[],this.thumbnails=[],this.initHtml(),this.initEvent())},initHtml:function(){this.leftBtnUrl=uiBaseURL+"photo_prev.png";this.rightBtnUrl=uiBaseURL+"photo_next.png";this.closeBtnUrl=uiBaseURL+"photoGallery_close.png";this.stage=$("<div class='photogallery' style=\"display:none\"></div>");this.close=$("<div class='close'><img src=\""+
this.closeBtnUrl+'" /></div>');this.stage.append(this.close);this.initImgThumb();this.initImgContainer();this.initImages();this.setThumbnal();this.setPhotoImage();this.imgChange();this.parent.append(this.stage);this.images[0].css({display:"block"})},initImgContainer:function(){this.imgContainer=$("<div class='imgContainer'></div>");this.leftBtn=$("<div class='leftBtn'><img src=' "+this.leftBtnUrl+"' /></div>");this.rightBtn=$("<div class='rightBtn'><img src='"+this.rightBtnUrl+"'/></div>");this.containerBG=
$("<div class='photoBG'></div>");this.imgContainer.append(this.leftBtn);this.imgContainer.append(this.rightBtn);this.stage.append(this.imgContainer).append(this.containerBG)},initImgThumb:function(){this.thumbContainer=$("<div class='thumbContainer'></div>");this.stage.append(this.thumbContainer)},initEvent:function(){this.stage.bind("mousedown touchstart",function(b){b.stopPropagation()});1<this.photoArray.length&&(this.imgContainer.bind("mouseenter",function(){this.leftBtn.animate({left:"0"},300);
this.rightBtn.animate({right:"0"},300)}.bind(this)),this.imgContainer.bind("mouseleave",function(){this.leftBtn.animate({left:"-32px"},300);this.rightBtn.animate({right:"-32px"},300)}.bind(this)));this.imgContainer.bind("click",function(b){this.moving||(b.stopPropagation(),this.stopAutoPlay(),this.index+=1,this.index>this.images.length-1&&(this.index=0),this.imgChange(),this.autoPlay())}.bind(this));this.containerBG.onTap(function(){this.hide();this.visible=!1}.bind(this));this.leftBtn.bind("click",
function(b){this.moving||(b.stopPropagation(),this.stopAutoPlay(),this.index-=1,0>this.index&&(this.index=this.images.length-1),this.imgChange(),this.autoPlay())}.bind(this));this.rightBtn.bind("click",function(b){this.moving||(b.stopPropagation(),this.stopAutoPlay(),this.index+=1,this.index>this.images.length-1&&(this.index=0),this.imgChange(),this.autoPlay())}.bind(this));this.close.onTap(function(){this.hide();this.visible=!1}.bind(this));$(window).resize(function(){this.onResize()}.bind(this))},
onResize:function(){this.pageWidth=$(window).width();this.pageHeight=$(window).height();this.setImageCss(this.images[this.index]);this.setThumbnal()},thumbEvent:function(b){b.onTap(function(){this.moving||(this.stopAutoPlay(),parseInt(b.attr("id").substring(5))!=this.index&&(this.index=parseInt(b.attr("id").substring(5)),this.imgChange(b)),this.autoPlay())}.bind(this,b))},autoPlay:function(){if(bookConfig.SlideshowAutoPlay){var b=bookConfig.SlideshowPlayInterval?1E3*parseInt(bookConfig.SlideshowPlayInterval):
3E3;this.timer=setInterval(function(){this.index+=1;this.index>this.images.length-1&&(this.index=0);this.imgChange()}.bind(this),b)}},stopAutoPlay:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},imgChange:function(b){1>=this.photoArray.length||this.moving||(b||(b=this.thumbnails[this.index]),b.siblings().removeClass("focus"),b.addClass("focus"),this.newImg=this.images[this.index],this.setImageCss(this.images[this.index]),this.moving=!0,this.newImg.fadeIn(300,function(){this.oldImg&&
this.oldImg.fadeOut();this.oldImg=this.newImg;this.moving=!1}.bind(this)))},initImages:function(){for(var b=0;b<this.photoArray.length;b++){var c=$("<img src='"+this.photoArray[b]+"'/>"),d=$('<div id="thumb'+b+'" class="thumbBox"><img src=\''+this.photoArray[b]+'\'/><div class="thumbBG"></div></div>');this.images.push(c);this.thumbnails.push(d)}},setThumbnal:function(){this.thumbLeft=0;this.thumbLeft=65*this.thumbnails.length>this.pageWidth?this.thumbLeft:(this.pageWidth-65*this.thumbnails.length)/
2;for(var b=0;b<this.thumbnails.length;b++){var c=this.thumbnails[b],d=c.find("img");this.thumbEvent(c);this.setThumbImg(d,c);c.css({left:this.thumbLeft+"px"});this.thumbContainer.append(c);this.thumbLeft+=65}},setThumbImg:function(b,c){b.on("load",function(b,c){var g=0,h=0,k=g=0,l=0;b[0].naturalWidth/b[0].naturalHeight>=50/46?(g=50/b[0].naturalWidth,k=50,l=g*b[0].naturalHeight,h=(46-g*b[0].naturalHeight)/2,g=0):(g=46/b[0].naturalHeight,k=g*b[0].naturalWidth,l=46,h=0,g=(50-g*b[0].naturalWidth)/2);
b.css({width:k+"px",height:l+"px",left:g+"px",top:h+"px"});c.append(b)}.bind(this,b,c))},setPhotoImage:function(){var b=this.images[this.index];b.on("load",function(b,d){for(var f=0;f<b.images.length;f++)b.images[b.index]!=b.images[f]&&b.images[f].css({display:"none"});return function(){b.setImageCss(d)}}(this,b))},setImageCss:function(b){this.imgTop=this.imgLeft=0;this.imgRadio=b[0].naturalWidth/b[0].naturalHeight;this.windowRadio=this.pageWidth/(this.pageHeight-80);this.imgHeight=this.imgWidth=
this.radio=0;this.resetImageCss(b);b.css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:0,top:0});this.imgContainer.css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft,top:this.imgTop+"px"});this.leftBtn.css({top:(this.imgHeight-38)/2+"px"});this.rightBtn.css({top:(this.imgHeight-38)/2+"px"});this.imgContainer.append(b)},resetImageCss:function(b){this.imgRadio>this.windowRadio?(b[0].naturalWidth<this.pageWidth?(this.imgHeight=b[0].naturalHeight,this.imgWidth=b[0].naturalWidth,
this.imgLeft=(this.pageWidth-this.imgWidth-16)/2):(this.imgWidth=this.pageWidth-16,this.radio=this.pageWidth/b[0].naturalWidth,this.imgHeight=b[0].naturalHeight*this.radio,this.imgLeft=0),this.imgTop=(this.pageHeight-this.imgHeight-80)/2):b[0].naturalHeight<this.pageHeight-80?(this.imgWidth=b[0].naturalWidth,this.imgHeight=b[0].naturalHeight,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2,this.imgTop=(this.pageHeight-this.imgHeight-80)/2):(this.imgHeight=this.pageHeight-80,this.radio=this.imgHeight/
b[0].naturalHeight,this.imgWidth=b[0].naturalWidth*this.radio,this.imgLeft=(this.pageWidth-this.imgWidth-16)/2,this.imgTop=0)},show:function(){this.visible=!0;this.stage.fadeIn(200);this.autoPlay()},hide:function(){this.visible=!1;this.stage.fadeOut(200);this.interval&&this.interval.stop();this.stopAutoPlay()},showOrHide:function(){this.visible?this.hide():this.show()}}),AddImageFile=Class({create:function(b){this.container=b;this.addContexts={};this.address=uiBaseURL;this.currentObject=$("<div><div/>").attr("data-key",
"114");this.imageDatas={};this.fileName=window.location.href.replace(window.location.hash,"")+"LocalFile";this.fileCookies=[];this.createZoomFrame();this.toolBar=this.createToolBar(b);this.getCookieFile()},createToolBar:function(b){var c=this,d=$("<div class='flipHTML5LocalFile-toolBar' style='position: absolute;width: 60px;height: 32px;background-color: rgba(0, 0, 0, 0.8);border-radius: 4px;z-index: 9999;'></div>").appendTo(b).hide();b=$("<div class='flipHTML5LocalFile-toolBar-del'></div>").css({left:4}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",
this.address+"signature_del.png")).appendTo(d);var f=$("<div class='flipHTML5LocalFile-toolBar-update'></div>").css({left:32}).append($("<img style='margin-left: 3px;margin-top: 3px;'/>").attr("src",this.address+"ImgFile_update.png")).appendTo(d);b.on("click touchend",function(b){c.currentObject&&(c.currentObject.remove(),d.hide(),c.zoomFrame&&c.zoomFrame.hide(),b=c.currentObject.attr("data-key"),delete c.imageDatas[b],c.delArrayOrderKey(c.fileCookies,b),c.addLocalStorage(c.fileName,c.parseJSON(c.fileCookies)))});
f.on(_event._down,function(){c.currentObject&&c.currentObject.find(".TextFile")&&c.currentObject.find(".TextFile")[0].click()});d.on("mousedown touchstart",function(b){b.preventDefault();b.stopPropagation();return!1});this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){d.hide()});return d},createZoomFrame:function(){var b=$("<div class='flipHTML5ZoomFrame' style='position: absolute;'></div>"),c=[];this.zoomFrame=b;for(var d=0;9>d;d++){var f=
$("<div></div>").addClass("flipHTML5Point flipHTML5ZoomPoint"+d).appendTo(b);c.push(f)}this.westZoom(c[7]);this.northZoom(c[1]);this.southZoom(c[5]);this.eastZoom(c[3]);this.westZoom(c[0]).northZoom(c[0]);this.northZoom(c[2]).eastZoom(c[2]);this.westZoom(c[6]).southZoom(c[6]);this.southZoom(c[4]).eastZoom(c[4]);this.container.add($(document)).add(BookInfo.container()).on("mousedown.hideToolBar touchstart.hideToolBar",function(){b.hide()})},getCookieFile:function(){try{var b=this.getLocalStorage(this.fileName),
c=eval(b)}catch(d){}if(c)for(b=0;b<c.length;b++){var f=c[b];this.fileCookies.push({key:f.key,page:f.page,fileLeft:f.fL,fileTop:f.fT,fileWidth:f.fW,fileHeight:f.fH,imgWidth:f.iW,imgHeight:f.iH,src:f.src});this.imageDatas[f.key]={width:f.iW,height:f.iH}}},addFile:function(b,c){var d=b.src,f=b.imgWidth,g=b.imgHeight,h=b.key,k=$("<div class='flipHTML5AddFile' style='position: absolute;cursor: move;'></div>").css({width:b.fileWidth,height:b.fileHeight,left:b.fileLeft,top:b.fileTop}).attr("data-key",h).append($("<input type='file' class='TextFile' style='position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;cursor: move;z-index: 2;'/>").css({opacity:0})).appendTo(c);
this.bindFileDivEvents(k,c);f&&g&&d&&this.addImage(k,d,f,g,h)},addCreateEvents:function(){var b=0,c,d=this.contextArray;if(d)for(this.offCreateEvents();c=d.eq(b++),0<c.length;)this.bindCreateFileEvent(c,parseInt(c.attr("data-page")))},offCreateEvents:function(){this.contextArray&&(this.contextArray.css({cursor:""}),this.contextArray.off("mousedown.addLocalFile touchstart.addLocalFile"))},bindCreateFileEvent:function(b,c){var d=this;b.css("cursor","crosshair");b.off("mousedown.addLocalFile touchstart.addLocalFile").one("mousedown.addLocalFile touchstart.addLocalFile",
function(f){f.stopPropagation();f.preventDefault();var g=(new Date).getTime(),h,k,l,m,n,p,q,t,s,r=b.offset().left,u=b.offset().top;$(".flipHTML5LocalFile-current").removeClass("flipHTML5LocalFile-current");h=$("<div style='position: absolute;cursor: move;'></div>").attr("data-key",g).addClass("flipHTML5AddFile flipHTML5LocalFile-current").append($("<input type='file' class='TextFile' style='position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;cursor: move;z-index: 2;'/>").css({opacity:0})).appendTo(b);
k=m=f.pageX||f.originalEvent.touches[0].pageX;l=n=f.pageY||f.originalEvent.touches[0].pageY;d.bindFileDivEvents(h,b);$(document).add(b).off("mousemove.addLocalFile touchmove.addLocalFile").on("mousemove.addLocalFile touchmove.addLocalFile",function(b){m=b.pageX?b.pageX:b.originalEvent.touches?b.originalEvent.touches[0].pageX:0;n=b.pageY?b.pageY:b.originalEvent.touches?b.originalEvent.touches[0].pageY:0;m&&(0>m-k?(p=Math.floor((m-r)/BookInfo.scale()),t=Math.floor((k-m)/BookInfo.scale())):(p=Math.floor((k-
r)/BookInfo.scale()),t=Math.floor((m-k)/BookInfo.scale())));n&&(0>b.pageY-l?(q=Math.floor((n-u)/BookInfo.scale()),s=Math.floor((l-n)/BookInfo.scale())):(q=Math.floor((l-u)/BookInfo.scale()),s=Math.floor((n-l)/BookInfo.scale())));h.css({left:p,top:q,width:t,height:s});d.resizeZoomFrame(h)});$(document).add(b).off("mouseup.addLocalFile touchend.addLocalFile").one("mouseup.addLocalFile touchend.addLocalFile",function(f){d.offCreateEvents();$(document).add(b).off("mousemove.addLocalFile touchmove.addLocalFile");
$(document).add(b).off("mouseup.addLocalFile touchend.addLocalFile");if(h){f=h.width();var k=h.height();32>f&&h.width(32);12>k&&h.height(12);h.find(".TextFile")[0].click();d.resizeZoomFrame(h);f=d.parseObject(h[0]);d.parseObject(d.zoomFrame[0]);d.fileCookies.push({key:g,page:c,fileLeft:f.left,fileTop:f.top,fileWidth:f.width,fileHeight:f.height,imgWidth:null,imgHeight:null,src:null});d.addLocalStorage(d.fileName,d.parseJSON(d.fileCookies))}void 0!=d.onCreated&&d.onCreated[1].call(d.onCreated[0])})})},
addImage:function(b,c,d,f,g){b.find(".LocalImage")&&b.find(".LocalImage").remove();var h=b.width()||40,k=b.height()||40;d=this.resizeImage("autoFit",d,f,h,k);$("<img class='LocalImage' style='position: absolute;z-index: 2;'/>").attr("data-key",g).css({width:d.width,height:d.height,left:d.left,top:d.top}).attr("src",c).appendTo(b)},resizeImage:function(b,c,d,f,g){c/=d;d=0===g?1:f/g;var h=g*c,k=f/c,l;switch(b){case "autoFit":l=h>f?{width:f,height:k,top:(g-k)/2,left:0}:k>g?{width:h,height:g,left:(f-
h)/2,top:0}:h/k==c?{width:h,height:k,left:0,top:0}:{width:1,height:1,left:0,top:0};break;case "scale":l={left:0,top:0,width:f,height:g};break;case "fullFill":c>d?l={left:(f-g*c)/2,top:0,width:g*c,height:g}:c<d?l={left:0,top:(g-f/c)/2,width:f,height:f/c}:c==d&&(l={left:0,top:0,width:f,height:g})}return l},bindFileDivEvents:function(b,c){var d=this,f=!1,g=b.attr("data-key");b.on("pointerdown.signatureImg",function(b){b.stopPropagation()});b.off("mousedown.addLocalFile touchstart.addLocalFile").on("mousedown.addLocalFile touchstart.addLocalFile",
function(h){h.preventDefault();h.stopPropagation();h=h.originalEvent.touches?h.originalEvent.touches[0]:h;var k,l,m,n,p,q;m=b[0].offsetLeft;n=b[0].offsetTop;k=h.pageX;l=h.pageY;d.resizeZoomFrame(b);c.off("mousemove.addLocalFile touchmove.addLocalFile").on("mousemove.addLocalFile touchmove.addLocalFile",function(c){c=c.originalEvent.touches?c.originalEvent.touches[0]:c;if(3<=Math.abs(c.pageX-k)||3<=Math.abs(c.pageY-l))f=!0;p=m-(k-c.pageX)/BookInfo.scale();q=n-(l-c.pageY)/BookInfo.scale();b.css({left:p,
top:q});d.moveFileDiv(p,q)});$(document).add(c).off("mouseup.addLocalFile touchend.addLocalFile").one("mouseup.addLocalFile touchend.addLocalFile",function(){c.off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(c).off("mouseup.addLocalFile touchend.addLocalFile");setTimeout(function(){f=!1},200);var h=d.parseObject(b[0]);d.parseObject(d.zoomFrame[0]);d.updateArrayOrderKey(d.fileCookies,g,{fileLeft:h.left,fileTop:h.top});d.addLocalStorage(d.fileName,d.parseJSON(d.fileCookies))})});
b.find(".TextFile").on({change:function(c){try{var f=c.target.files[0];if(f)if(f.type.match("image.*")){var l=new FileReader;l.onload=function(c){c=c.target.result;var f=new Image;f.src=c;var h=f.width,f=f.height;d.imageDatas[g]={width:h,height:f,src:c};d.addImage(b,c,h,f,g);d.updateArrayOrderKey(d.fileCookies,g,{imgWidth:h,imgHeight:f,src:c});d.addLocalStorage(d.fileName,d.parseJSON(d.fileCookies))};l.readAsDataURL(f)}else alert("not image!")}catch(m){alert("Does not support HTML5 FileReader!")}},
click:function(b){f&&b.preventDefault()}})},moveFileDiv:function(b,c){var d=this.zoomFrame;d&&(d.css({left:b-4-1,top:c-4-1}),this.toolBar&&this.toolBar.css({left:d.offset().left-this.container.offset().left+3,top:d.offset().top-this.container.offset().top-this.toolBar.outerHeight()-2}))},resizeZoomFrame:function(b){var c=this.zoomFrame;c.css({width:b.width()+8,height:b.height()+8,left:parseInt(b.css("left"))-4-1,top:parseInt(b.css("top"))-4-1}).show();this.toolBar&&this.toolBar.css({left:b.offset().left-
8-this.container.offset().left+3,top:b.offset().top-8-this.container.offset().top-this.toolBar.outerHeight()-2}).show();b.before(c);$(".flipHTML5LocalFile-current").removeClass("flipHTML5LocalFile-current");this.currentObject=b.addClass("flipHTML5LocalFile-current")},resizeFileDiv:function(b,c,d,f){var g=this.currentObject,h=this.zoomFrame,k=g.attr("data-key");this.toolBar&&this.toolBar&&this.toolBar.css({left:h.offset().left-this.container.offset().left+3,top:h.offset().top-this.container.offset().top-
this.toolBar.outerHeight()-2});if(g){b&&(h.css({left:b}),g.css({left:b+4+1}));c&&(h.css({top:c}),g.css({top:c+4+1}));d&&40<=d&&(h.css({width:d}),g.css({width:d-8}));f&&20<=f&&(h.css({height:f}),g.css({height:f-8}));try{var l=g.find(".LocalImage"),m=this.imageDatas[k],n=this.resizeImage("autoFit",m.width,m.height,g.width(),g.height());l.css({width:n.width,height:n.height,left:n.left,top:n.top})}catch(p){}n=this.parseObject(g[0]);this.parseObject(h[0]);this.updateArrayOrderKey(this.fileCookies,k,{fileLeft:n.left,
fileTop:n.top,fileWidth:n.width,fileHeight:n.height})}},eastZoom:function(b){var c=this,d=b.parent();b.on("mousedown.addLocalFile touchstart.addLocalFile",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent.touches?b.originalEvent.touches[0]:b;var g=d.parent(),h=d.width(),k=b.pageX;$(document).add(g).on("mousemove.addLocalFile touchmove.addLocalFile",function(b){b=b.originalEvent.touches?b.originalEvent.touches[0]:b;var d=b.clientX-k+h,d=Math.floor(h-(k-b.pageX)/BookInfo.scale());
c.resizeFileDiv(0,0,d,0)});$(document).add(g).on("mouseup.addLocalFile touchend.addLocalFile",function(){c.addLocalStorage(c.fileName,c.parseJSON(c.fileCookies));$(document).add(g).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(g).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},southZoom:function(b){var c=this,d=b.parent();b.on("mousedown.addLocalFile touchstart.addLocalFile",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent.touches?b.originalEvent.touches[0]:
b;var g=d.parent(),h=d.height(),k=b.pageY;$(document).add(g).on("mousemove.addLocalFile touchmove.addLocalFile",function(b){b=b.originalEvent.touches?b.originalEvent.touches[0]:b;var d=b.clientY-k+h,d=Math.floor(h-(k-b.pageY)/BookInfo.scale());c.resizeFileDiv(0,0,0,d)});$(document).add(g).on("mouseup.addLocalFile touchend.addLocalFile",function(){c.addLocalStorage(c.fileName,c.parseJSON(c.fileCookies));$(document).add(g).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(g).off("mouseup.addLocalFile touchend.addLocalFile")})});
return this},westZoom:function(b){var c=this,d=b.parent();b.on("mousedown.addLocalFile touchstart.addLocalFile",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent.touches?b.originalEvent.touches[0]:b;var g=d.parent(),h=d.width(),k=d[0].offsetLeft,l=b.clientX;$(document).add(g).on("mousemove.addLocalFile touchmove.addLocalFile",function(b){b=b.originalEvent.touches?b.originalEvent.touches[0]:b;var d=b.pageX,f=k+d-l,g=-(d-l)+h,f=k+(d-l)/BookInfo.scale(),g=Math.floor(h+(l-b.pageX)/
BookInfo.scale());c.resizeFileDiv(f,0,g,0)});$(document).add(g).on("mouseup.addLocalFile touchend.addLocalFile",function(){c.addLocalStorage(c.fileName,c.parseJSON(c.fileCookies));$(document).add(g).off("mousemove.addLocalFile touchmove.addLocalFile");$(document).add(g).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},northZoom:function(b){var c=this,d=b.parent();b.on("mousedown.addLocalFile touchstart.addLocalFile",function(b){b.preventDefault();b.stopPropagation();b=b.originalEvent.touches?
b.originalEvent.touches[0]:b;var g=d.parent(),h=d.height(),k=d[0].offsetTop,l=b.pageY;$(document).add(g).on("mousemove.addLocalFile touchmove.addLocalFile",function(b){b=b.originalEvent.touches?b.originalEvent.touches[0]:b;b=b.pageY;var d=k+b-l,f=-(b-l)+h,d=k+(b-l)/BookInfo.scale(),f=Math.floor(h+(l-b)/BookInfo.scale());c.resizeFileDiv(0,d,0,f)});$(document).add(g).on("mouseup.addLocalFile touchend.addLocalFile",function(){c.addLocalStorage(c.fileName,c.parseJSON(c.fileCookies));$(document).add(g).off("mousemove.addLocalFile touchmove.addLocalFile");
$(document).add(g).off("mouseup.addLocalFile touchend.addLocalFile")})});return this},bindOnCreated:function(b,c){this.onCreated=[b,c]},parseObject:function(b){if(document.getElementsByTagName("body")[0].contains(b)){var c,d,f;f=b.parentNode;var g=b.style,h=$(b);d=100/f.offsetHeight;c=100/f.offsetWidth;f=b.offsetLeft*c+"%";b=b.offsetTop*d+"%";c=h.width()*c+"%";d=h.height()*d+"%";g.width=c;g.height=d;g.left=f;g.top=b;return{width:c,height:d,left:f,top:b}}},addLocalFileByPage:function(b,c){c.find(".flipHTML5AddFile").remove();
this.toolBar&&this.toolBar.hide();this.zoomFrame&&this.zoomFrame.hide();c.attr("data-page",b);this.contextArray=this.contextArray?this.contextArray.add(c):c;this.zoomFrame&&this.zoomFrame.remove();this.createZoomFrame();for(var d=0;d<this.fileCookies.length;d++)this.fileCookies[d].page==b&&this.addFile(this.fileCookies[d],c)},setContainers:function(b,c,d){void 0==this.addContexts[b]&&(this.addContexts[b]={});this.addContexts[b][c]=d;b==BookInfo.getBookType()&&this.addLocalFileByPage(c,this.addContexts[BookInfo.getBookType()][c])},
getLocalStorage:function(b){try{if(window.localStorage)return window.localStorage.getItem(b);for(var c=document.cookie.split("; "),d=0;d<c.length;d++){var f=c[d].split("=");if(f[0]==b)return unescape(f[1])}return""}catch(g){}},addLocalStorage:function(b,c){try{if(window.localStorage)window.localStorage.setItem(b,c);else{var d=b+"="+escape(c),f=new Date;f.setTime(f.getTime()+864E8);d+="; expires="+f.toGMTString();document.cookie=d}}catch(g){}},delArrayOrderKey:function(b,c){if(b)for(var d=0;d<b.length;d++)b[d].key&&
b[d].key==c&&b.remove(d)},updateArrayOrderKey:function(b,c,d){if(b)for(var f=0;f<b.length;f++)b[f].key&&b[f].key==c&&$.extend(b[f],d)},parseJSON:function(b){if(0!=b.length){for(var c="[",d=0;d<b.length;d++)c+="{key:'"+b[d].key+"',page:"+b[d].page+",src:'"+b[d].src+"',iW:"+b[d].imgWidth+",iH:"+b[d].imgHeight+",fW:'"+b[d].fileWidth+"',fH:'"+b[d].fileHeight+"',fL:'"+b[d].fileLeft+"',fT:'"+b[d].fileTop+"'},";c=c.substring(0,c.length-1);return c+"]"}}}),HandSwipeHelp=Class({create:function(b){this.parent=
b;this.container=$("<div class='handHelp' style='display:none'></div>");this.helpHand=$("<div ></div>");this.handImg=$("<img />");this.setSrc(this.handImg,phone_toolbar_icons,"phoneHandSwipe");this.helpHand.append(this.handImg);this.container.append(this.helpHand);b.append(this.container);this.setCSS();this.initEvent();this.container.speed(this.onSwipe.bind(this))},setCSS:function(){this.container.css({position:"absolute","z-index":"10000",width:"100%",height:"100%",background:"rgba(11,11,11,0.5)"});
this.helpHand.css({position:"absolute",width:"137px",height:"150px",right:(windowWidth-137)/2+"px",top:(windowHeight-150)/2+"px"});this.handImg.css({position:"absolute"})},onSwipe:function(b,c){var d=30;bookConfig.FlipDirection?(d=d*windowHeight/1600,Math.abs(c)<=d||c>d&&nextPageFun()):(d=d*windowWidth/1600,Math.abs(b)<=d||(b<-d?nextPageFun():b>d&&rightToLeft&&nextPageFun()))},setSrc:function(b,c,d){c&&c[d]?b.attr("src","data:image/png;base64,"+c[d]):b.attr("src",phoneBaseURL+d+".png")},initEvent:function(){(this.close,
this.parent).bind(_event._up,function(){this.hide()}.bind(this))},onResize:function(b,c){this.setCSS()},show:function(){this.container.css("display","block");parseBool(bookConfig.FlipDirection)?this.helpHand.addClass("handSwipeHelp_Top"):rightToLeft?this.helpHand.addClass("handSwipeHelp_Right"):this.helpHand.addClass("handSwipeHelp_Left")},hide:function(){this.helpHand.attr("class","");this.container.fadeOut(300)}}),AppLargeLogo=Class({create:function(b){this.parent=b;this.initHtml();this.initCss();
this.initEvent()},initHtml:function(){this.logoContainer=$("<div></div>");this.largeLogo=$("<img src='"+bookConfig.appLargeLogoIcon+"'/>");bookConfig.appLargeLogoIcon||this.logoContainer.css({display:"none"});this.logoContainer.append(this.largeLogo);this.parent.append(this.logoContainer)},initCss:function(){this.logoContainer.css({position:"absolute","z-index":"1"});bookConfig.appLargeLogoURL&&this.largeLogo.css({cursor:"pointer"});bookConfig.LargeLogoPosition||(bookConfig.LargeLogoPosition="top-left");
switch(bookConfig.LargeLogoPosition){case "top-left":this.logoContainer.css({left:toolBar.getLeftWidth()+10+"px",top:toolBar.getTopHeight()+10+"px"});break;case "bottom-left":this.logoContainer.css({left:toolBar.getLeftWidth()+10+"px",bottom:toolBar.getBottomHeight()+10+"px"});break;case "top-right":this.logoContainer.css({right:toolBar.getRightWidth()+10+"px",top:toolBar.getTopHeight()+10+"px"});break;case "bottom-right":this.logoContainer.css({bottom:toolBar.getBottomHeight()+10+"px",right:toolBar.getRightWidth()+
10+"px"})}bookConfig.isFixLogoSize&&(this.logoContainer.css({width:bookConfig.logoFixWidth+"px",height:bookConfig.logoFixHeight+"px"}),this.largeLogo.css({width:bookConfig.logoFixWidth+"px",height:bookConfig.logoFixHeight+"px"}))},onResize:function(b,c){},initEvent:function(){bookConfig.appLargeLogoURL&&this.largeLogo.bind(_event._click,function(b){b.stopPropagation();bookConfig.LargeLogoTarget||(bookConfig.LargeLogoTarget="blank");window.open(bookConfig.appLargeLogoURL,"_"+bookConfig.LargeLogoTarget.toLowerCase())}.bind(this))}});
Class("VolumeControlBar",{statics:{LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,DEFAULT:5},create:function(b){global.bgSound&&!isPhone()&&!isPad()&&b&&(this.parent=b,this.initParam(),this.volumeBackground=$("<div class='volume-bar' style='visibility:hidden;z-index:1000'></div>"),this.volumeReduce=$("<img class='volume-reduce'  />"),this.volumeBar=$('<div class="volume-pgress"></div>'),this.volumeBg=$('<div class="volume-pgress-bg"></div>'),this.volumePoint=$("<span></span>"),this.volumeAdd=$("<img class='volume-add' />"),
this.parent.append(this.volumeBackground),this.volumeBackground.append(this.volumeReduce),this.volumeBar.append(this.volumePoint),this.volumeBg.append(this.volumeBar),this.volumeBackground.append(this.volumeBg),this.volumeBackground.append(this.volumeAdd),this.initEvent(),this.onResize(),this.initCss(),this.hide())},initParam:function(){this.length=58;this.rate=1;this.iconOn=this.visible=!0;this.initConfig()},initConfig:function(){VolumeControlBar.config||(VolumeControlBar.config={direction:VolumeControlBar.DEFAULT,
color:Color(bookConfig.toolbarColor).toString(),iconColor:Color(bookConfig.iconColor).toString()});this.deviation=VolumeControlBar.config.deviation||0;this.direction=VolumeControlBar.config.direction||VolumeControlBar.DEFAULT;this.color=VolumeControlBar.config.color||Color(bookConfig.toolbarColor).toString();this.iconColor=VolumeControlBar.config.iconColor||Color(bookConfig.iconColor).toString()},initCss:function(){this.setSrc(this.volumeAdd,"soundAdd");this.setSrc(this.volumeReduce,"soundReduce");
this.volumePoint.css({background:this.iconColor});this.volumeBar.css({cursor:"pointer"});this.volumeBg.css({cursor:"pointer"})},setSrc:function(b,c){toolbar_icons&&toolbar_icons[c]?b.attr("src","data:image/png;base64,"+toolbar_icons[c]):b.attr("src",uiBaseURL+c+".png");this.changeIconColor()},changeIconColor:function(){this.volumeAdd.changeButtonColor(this.iconColor);this.volumeReduce.changeButtonColor(this.iconColor)},volumeBarCSS:function(b){this.left=b.left;this.top=b.top;switch(this.direction){case VolumeControlBar.LEFT:this.position=
this.length-this.rate*this.length;this.top+=(b.height-30)/2+this.deviation;this.volumeBackground.css({top:this.top+"px",left:this.left-131+"px",width:"131px",height:"30px",background:this.color});this.volumeBg.css({position:"absolute",width:"70px",height:"10px",left:"30px",right:"auto",top:"10px",bottom:"auto"});this.volumeBar.css({width:"70px",height:"auto",border:"none","border-top":"2px solid "+this.iconColor,top:"4px"});this.volumePoint.css({top:"-7px",left:this.position+"px"});this.volumeReduce.css({right:"0",
top:"3px",left:"auto",bottom:"auto"});this.volumeAdd.css({left:"0",top:"3px",right:"auto",bottom:"auto"});break;case VolumeControlBar.TOP:this.position=this.length-this.rate*this.length;this.left+=(b.width-30)/2+this.deviation;this.volumeBackground.css({left:this.left+"px",top:this.top-131+"px",width:"30px",height:"131px",background:this.color});this.volumeBg.css({position:"absolute",height:"70px",width:"10px",bottom:"30px",top:"auto",left:"10px",right:"auto"});this.volumeBar.css({height:"70px",width:"auto",
top:"auto",border:"none","border-left":"2px solid "+this.iconColor,left:"4px"});this.volumePoint.css({left:"-7px",top:this.position+"px"}).css("");this.volumeReduce.css({left:"3px",bottom:"3px",right:"auto",top:"auto"});this.volumeAdd.css({right:"3px",top:"3px",left:"auto",bottom:"auto"});break;case VolumeControlBar.RIGHT:this.position=this.rate*this.length;this.top+=(b.height-30)/2+this.deviation;this.volumeBackground.css({top:this.top+"px",left:this.left+b.width+"px",width:"131px",height:"30px",
background:this.color});this.volumeBg.css({position:"absolute",width:"70px",height:"10px",left:"30px",right:"auto",top:"10px",bottom:"auto"});this.volumeBar.css({width:"70px",height:"auto",border:"none","border-top":"2px solid "+this.iconColor,top:"4px"});this.volumePoint.css({left:this.position+"px",top:"-7px"});this.volumeReduce.css({left:"0",top:"3px",right:"auto",bottom:"auto"});this.volumeAdd.css({right:"0",top:"3px",left:"auto",bottom:"auto"});break;case VolumeControlBar.BOTTOM:this.position=
this.rate*this.length;this.left+=(b.width-30)/2+this.deviation;this.volumeBackground.css({left:this.left+"px",top:this.top+b.height+"px",width:"30px",height:"131px",background:this.color});this.volumeBg.css({position:"absolute",height:"70px",width:"10px",bottom:"30px",top:"auto",left:"10px",right:"auto"});this.volumeBar.css({height:"70px",width:"auto",border:"none","border-left":"2px solid "+this.iconColor,left:"4px"});this.volumePoint.css({left:"-7px",top:this.position+"px"});this.volumeReduce.css({left:"3px",
top:"3px",right:"auto",bottom:"auto"});this.volumeAdd.css({right:"3px",bottom:"3px",left:"auto",top:"auto"});break;case VolumeControlBar.DEFAULT:this.volumeBackground.css({visibility:"hidden",opacity:"0"})}},setPosition:function(){this.change=this.startPosition=this.position=0;switch(this.direction){case VolumeControlBar.LEFT:this.leftPosition();break;case VolumeControlBar.TOP:this.topPosition();break;case VolumeControlBar.RIGHT:this.rightPosition();break;case VolumeControlBar.BOTTOM:this.bottomPosition()}},
onResize:function(){$(window).resize(function(){this.hide();this.direction=VolumeControlBar.config.direction||VolumeControlBar.DEFAULT;this.setPosition()}.bind(this))},initEvent:function(){this.parent.bind("click",function(b){b.stopPropagation();this.hide()}.bind(this));this.volumeBackground.bind("click",function(b){b.stopPropagation()}.bind(this));this.volumeBackground.bind("mouseenter",function(b){this.visible=!0;this.volumeBackground.css({visibility:"visbile",opacity:"1"})}.bind(this));this.volumeBackground.bind("mouseleave",
function(b){this.visible=!1;this.hide()}.bind(this));this.volumePoint.bind("click",function(b){b.stopPropagation()}.bind(this));this.volumeBg.bind("click",function(b){b.stopPropagation();this.direction==VolumeControlBar.RIGHT||this.direction==VolumeControlBar.LEFT?this.getRate(b.offsetX):this.getRate(b.offsetY);this.position=this.length-this.rate*this.length;this.volumePointCSS();this.setIcon();this.setVolume(this.rate)}.bind(this))},getRate:function(b){this.rate=0>=this.length+12-b?0:58<=this.length+
12-b?1:(this.length+12-b)/this.length},setEvent:function(){1==this.direction||3==this.direction?(this.volumePoint.bind("mousedown",function(b){b.stopPropagation();this.position=this.volumePoint.left();this.startPosition=b.pageX;this.focus=!0}.bind(this)),$("body").bind("mouseup",function(b){b.stopPropagation();this.focus=!1}.bind(this))):(this.volumePoint.bind("mousedown",function(b){b.stopPropagation();this.position=this.volumePoint.top();this.startPosition=b.pageY;this.focus=!0}.bind(this)),$("body").bind("mouseup",
function(b){b.stopPropagation();this.focus=!1}.bind(this)))},rightPosition:function(){this.setEvent();$("body").bind("mousemove",function(b){this.focus&&(this.startPosition&&(this.change=this.startPosition-b.pageX),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=this.position/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=b.pageX}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=this.volumePoint.left()+5.8>
this.length?this.length:this.volumePoint.left()+5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=0>this.volumePoint.left()-5.8?0:this.volumePoint.left()-5.8;this.setIcon();this.volumePointCSS()}.bind(this))},leftPosition:function(){this.setEvent();$("body").bind("mousemove",function(b){this.focus&&(this.startPosition&&(this.change=this.startPosition-b.pageX),this.position-=this.change,0<=this.position&&this.position<=this.length&&
(this.rate=(this.length-this.position)/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=b.pageX}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=0>this.volumePoint.left()-5.8?0:this.volumePoint.left()-5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=this.volumePoint.left()+5.8>this.length?this.length:this.volumePoint.left()+5.8;this.setIcon();this.volumePointCSS()}.bind(this))},
topPosition:function(){this.setEvent();$("body").bind("mousemove",function(b){this.focus&&(this.startPosition&&(this.change=this.startPosition-b.pageY),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=(this.length-this.position)/this.length,this.setIcon(),this.volumePointCSS()));this.startPosition=b.pageY}.bind(this));this.volumeAdd.unbind("click").bind("click",function(b){this.position=0>this.volumePoint.top()-5.8?0:this.volumePoint.top()-5.8;this.setIcon();this.volumePointCSS()}.bind(this));
this.volumeReduce.unbind("click").unbind("click").bind("click",function(b){this.position=this.volumePoint.top()+5.8>this.length?this.length:this.volumePoint.top()+5.8;this.setIcon();this.volumePointCSS()}.bind(this))},bottomPosition:function(){this.setEvent();$("body").bind("mousemove",function(b){this.focus&&(this.startPosition&&(this.change=this.startPosition-b.pageY),this.position-=this.change,0<=this.position&&this.position<=this.length&&(this.rate=this.position/this.length,this.setIcon(),this.volumePointCSS()));
this.startPosition=b.pageY}.bind(this));this.volumeAdd.unbind("click").bind("click",function(){this.position=this.volumePoint.top()+5.8>this.length?this.length:this.volumePoint.top()+5.8;this.setIcon();this.volumePointCSS()}.bind(this));this.volumeReduce.unbind("click").bind("click",function(){this.position=0>this.volumePoint.top()-5.8?0:this.volumePoint.top()-5.8;this.setIcon();this.volumePointCSS()}.bind(this))},setIcon:function(){this.direction==VolumeControlBar.LEFT||this.direction==VolumeControlBar.TOP?
this.position>=this.length?this.setIconOff():this.setIconOn():0>=this.position?this.setIconOff():this.setIconOn()},setIconOff:function(){this.iconOn=!1},setIconOn:function(){this.iconOn=!0},volumePointCSS:function(b){switch(this.direction){case VolumeControlBar.LEFT:this.volumePoint.css({left:this.position+"px"});this.setVolume((this.length-this.position)/this.length);break;case VolumeControlBar.TOP:this.volumePoint.css({top:this.position+"px"});this.setVolume((this.length-this.position)/this.length);
break;case VolumeControlBar.RIGHT:this.volumePoint.css({left:this.position+"px"});this.setVolume(this.position/this.length);break;case VolumeControlBar.BOTTOM:this.volumePoint.css({top:this.position+"px"}),this.setVolume(this.position/this.length)}},soundOn:function(b){this.setIconOn();this.setVolume(this.rate)},soundOff:function(b){this.setIconOff();global.bgSound.setVolume(0)},setVolume:function(b){!global.bgSound||isPhone()||isPad()||(this.rate=b,bgSound.setVolume(b))},show:function(b){isPhone()||
isPad()||(this.initConfig(),this.volumeBackground.css({visibility:"visible",opacity:"1"}),this.volumeBarCSS(b),this.setPosition(),this.visible=!1)},hide:function(){isPhone()||isPad()||(this.volumeBackground.css({visibility:"hidden",opacity:"0"}),this.visible=!0)}});
var BookInstructionsPage=Class({create:function(b,c){this.parent=b;this.initHtml(b,c);this.initCss();this.initEvent()},initHtml:function(b,c){this.container=$("<div class='bookInstructions helpPage'></div>");this.title=$("<h3 class='bookInstructions helpTitle'>"+this.getTitle()+"</h3>");this.image=$("<div class='bookInstructions helpPageImg'"+this.getImageURL(c)+"></div>");this.description=$("<div class='bookInstructions helpBottomText'>"+this.getDescription(c)+"</div>");this.container.append(this.title);
this.container.append(this.image);this.container.append(this.description);this.container.attr("bookInstructionPageNum",c);b.append(this.container)},initCss:function(){var b=0,b=windowWidth>windowHeight?windowHeight:windowWidth,b=Math.floor(b/15);50<b?b=50:26>b&&(b=26);var c=Math.floor(0.7*b);this.container.css({width:windowWidth+"px",height:windowHeight+"px"});this.title.css({margin:0,padding:0,"font-weight":"normal","font-family":"HelveticaNeue-CondensedBold, sans-serif",position:"relative",left:0,
width:windowWidth+"px","font-size":b+"px","line-height":b+"px",top:0.05*windowHeight+"px",color:"#58A3EB"});this.description.css({"font-family":"HelveticaNeue-CondensedBold, sans-serif","font-size":c+"px","line-height":c+"px",position:"absolute",bottom:0.15*windowHeight+"px",left:0.1*windowWidth+"px",width:0.8*windowWidth+"px",color:"#58A3EB"});this.image.css({width:windowWidth+"px",position:"absolute",top:0.1*windowHeight+"px","margin-top":"15px",height:0.6*windowHeight+"px"})},getImageURL:function(b){return"style='background: url("+
uiBaseURL+b+"-2x.png) no-repeat center  center ;background-size:contain;'"},getTitle:function(){return getLanguage("frmHowToUse","How to use")},getDescription:function(b){switch(b){case 1:return getLanguage("lblHelpPage1","Move your finger to flip the book page.");case 2:return getLanguage("lblHelpPage2","Zoom in by using gesture or double click on the page.");case 3:return getLanguage("lblHelpPage3","Click on the logo to reach the official website of the company.");case 4:return getLanguage("lblHelpPage4",
"Add bookmarks, use search function and auto flip the book.");case 5:return getLanguage("lblHelpPage5","Switch horizontal and vertical view on mobile devices.")}},onResize:function(){this.initCss()},initEvent:function(){(new Hammer(this.container[0])).on("swipe",function(b){10<=b.deltaX?bookInstructions.toNextPage():-10>=b.deltaX?bookInstructions.toPreviousPage():""}.bind(this))}}),BookInstructionsDot=Class({create:function(b,c){this.parent=b;this.id=c;this.initHtml();this.initCss();this.initEvent()},
initHtml:function(){this.dot=$("<li ></li>");this.dot.attr("bookInstructionDotNum",this.id);1==this.id?this.dot.attr("class","bookInstructions icon_active"):"";this.parent.append(this.dot)},initCss:function(){var b=0,b=windowWidth>windowHeight?windowHeight:windowWidth,b=Math.floor(b/30);30<b?b=30:15>b&&(b=15);this.dot.css({margin:"0 "+Math.floor(b/5*4)+"px",width:b+"px",height:b+"px"})},onResize:function(){this.initCss()},initEvent:function(){(new Hammer(this.dot[0])).on("tap",function(){this.pageIndex=
parseInt(this.dot.attr("bookInstructionDotNum"));bookInstructions.setCurrentPage(this.pageIndex)}.bind(this))}}),BookInstructions=Class({create:function(b){this.pageWidth=document.body.clientWidth;this.pageIndex=1;this.totalPageCount=5;this.closeSrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzQyMUQ1MUVBRjlBMTFFNjk0NUZCNDY1NTgzODYzOTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzQyMUQ1MUZBRjlBMTFFNjk0NUZCNDY1NTgzODYzOTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NDIxRDUxQ0FGOUExMUU2OTQ1RkI0NjU1ODM4NjM5NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NDIxRDUxREFGOUExMUU2OTQ1RkI0NjU1ODM4NjM5NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PosYs0wAAABhSURBVHja7NRBCgAgCATAlP7/5e0SEZK6gdClhW46UEoCoFVGW3E+uIJ5ohxrPFC2Jg/b66gre6iLMW9o0RBjhyIs9mxtQA6KAi2WonqBUSult3uWoT1pYKb/f5viDAEGAD4SFiVn1efjAAAAAElFTkSuQmCC";
this.visible=!1;this.parent=b;this.pages=[];this.dotsArr=[];this.initHtml(b);this.initCss();this.initEvent()},initHtml:function(b){this.container=$("<div class='bookInstructions helpBody hide'></div>");this.swiper=$("<div class='bookInstructions swiper'></div>");this.dots=$('<ul class="bookInstructions helpBullet"></ul>');for(var c=1;5>=c;c++)this.pages.push(new BookInstructionsPage(this.swiper,c)),this.dotsArr.push(new BookInstructionsDot(this.dots,c));this.closeBtn=$('<span class="bookInstructions icon_drop" ><img src='+
this.closeSrc+"></span>");b.append(this.container);this.container.append(this.swiper);this.container.append(this.dots);this.container.append(this.closeBtn)},initCss:function(){var b=transformCSS({tran:{x:windowWidth,y:0}});this.container.css({"background-image":"url("+uiBaseURL+'bg.png")no-repeat',"background-position":"bottom"});this.container.css(b);this.resizeCss();b=transformCSS({tran:{x:0,y:0}});this.swiper.css(b)},resizeCss:function(){var b=0,b=windowWidth>windowHeight?windowHeight:windowWidth,
c=Math.floor(b/30);35<c?c=35:15>c&&(c=15);b=Math.floor(b/16);48<b?b=48:30>b&&(b=30);var d=b/3;this.container.css({width:windowWidth+"px",height:windowHeight+"px"});this.swiper.css({width:5*windowWidth+"px",height:windowHeight+"px"});this.dots.css({"list-style":" none",padding:"0",margin:"0",position:" absolute",bottom:0.05*windowHeight+"px",width:windowWidth+"px",height:c+"px","line-height":c+"px","z-index":" 100"});this.closeBtn.css({width:b+"px",height:b+"px","line-height":b+"px","font-size":b+
"px",cursor:"pointer",position:"absolute","border-radius":"50%",color:"#fff",right:d+"px",top:d+"px",background:"#7FCEFF","z-index":"100"})},onResize:function(){this.resizeCss();for(var b=0;b<this.dotsArr.length;b++)this.dotsArr[b].onResize(),this.pages[b].onResize();b=transformCSS({tran:{x:-(this.pageIndex-1)*windowWidth,y:0}});this.swiper.css(b)},toNextPage:function(){this.setCurrentPage(1<this.pageIndex-1?this.pageIndex-1:1)},toPreviousPage:function(){this.setCurrentPage(this.pageIndex+1>=this.totalPageCount?
this.totalPageCount:this.pageIndex+1)},setCurrentPage:function(b){this.pageIndex=b?b:this.pageIndex;b=transformCSS({tran:{x:-(this.pageIndex-1)*windowWidth,y:0}});animateOnce(this.swiper,b,300,null);this.dots.find("li").removeClass("icon_active");this.dots.find("li[bookInstructionDotNum="+this.pageIndex+"]").addClass("icon_active")},showOrhide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.container.removeClass("hide");var b=transformCSS({tran:{x:0,y:0}});animateOnce(this.container,
b,300,null)},hide:function(){this.visible=!1;var b=transformCSS({tran:{x:this.pageWidth,y:0}});animateOnce(this.container,b,300,function(){this.container.addClass("hide")}.bind(this))},showOrHide:function(){this.visible?this.hide():this.show()},initEvent:function(){this.container.bind("touchstart",function(b){b.preventDefault()});this.closeBtn.bind(_event._end,function(){this.hide()}.bind(this))},changeLanguage:function(){for(var b=0;b<this.pages.length;b++){var c=this.pages[b];c.title.html(c.getTitle());
c.description.html(c.getDescription(b+1))}}});
Class("FlipByAudio",{EMPTY_CONFIG:{audioType:0,audioFile:"",showPlayer:!1,items:[]},SINGLE_AUDIO:0,MULTIPLE_AUDIOS:1,create:function(b,c){this.parent=b;this.config=c||this.EMPTY_CONFIG;void 0==this.config.audioType&&(this.config.audioType=0);void 0==this.config.audioFile&&(this.config.audioFile="");void 0==this.config.showPlayer&&(this.config.showPlayer=!1);this.config.items||(this.config.items=[]);0!=this.itemLength()&&this.init()},itemLength:function(){return this.config.items.length},init:function(){this.$audio=
new Media($("<audio controls></audio>"),"audio");this.$audio.isPlaying=!1;this.audioIndex=0;this.config.audioType==this.SINGLE_AUDIO?(this.setSingleAudio(),this.initSingleAudioEvent()):(this.setMultipleAudio(this.audioIndex),this.initMultipleAudioEvent())},play:function(){if(this.$audio)try{this.$audio.play()}catch(b){}},playByTouch:function(){if(this.$audio&&!this.$audio.isPlaying)try{this.$audio.play(),this.$audio.isPlaying=!0}catch(b){}},playAfterFlip:function(){this.play.delay(this,1E3*bookConfig.flippingTime)},
start:function(){this.config.audioType==this.MULTIPLE_AUDIOS&&this.flipByIndex(0);this.playAfterFlip()},setSingleAudio:function(){this.$audio.$media.attr("src",this.config.audioFile)},setMultipleAudio:function(b){(b=this.config.items[b])&&this.$audio.$media.attr("src",b.audioData)},initSingleAudioEvent:function(){this.$audio.$media.bind("timeupdate",function(){var b=parseInt(this.getCurrentAudioData());this.$audio.$media[0].currentTime>=b&&(this.flipByIndex(this.audioIndex),this.audioIndex++)}.bind(this))},
getCurrentAudioData:function(){return this.config.items[this.audioIndex].audioData},initMultipleAudioEvent:function(){this.$audio.$media.bind("ended",function(){this.audioIndex++;this.setMultipleAudio(this.audioIndex);this.flipByIndex(this.audioIndex);this.playAfterFlip()}.bind(this))},flipByIndex:function(b){this.config.items[this.audioIndex]&&(b=parseInt(this.config.items[b].pageIndex),gotoPageFun(b))}});var PcAboutForm=Class({create:function(b){this.elements=new AboutElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='about_content'></div>");this.stage.append(b);this.content2=$("<div class='content2'></div>");b.append(this.content2);this.initLogo();this.initSwiper();this.content2.append(this.aboutSwiper);this.content1=
$("<div class='content1'></div>");b.append(this.content1);this.content1.append(this.author);this.content1.append(this.address);this.content1.append(this.email);this.content1.append(this.website);this.content1.append(this.mobile);this._super()},initSwiper:function(){this.aboutSwiper=$("<div class='aboutSwiper stage'></div>");this.aboutSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.aboutSwiper.append(this.aboutSwiperList);
this.aboutSwiperList.append(this.description);this.aboutSwiper.append(this.progress);this.progress.append(this.progressBar);bookConfig.CompanyLogoFile&&this.aboutSwiper.css({width:"381px"});this.aboutSwiper.scroll({},Direction.top,"win10")},initLogo:function(){bookConfig.CompanyLogoFile&&this.content2.append(this.logo)},onShow:function(){this.close.changeButtonColor(this.fontColor);this.aboutSwiper.refreshData()}}).extend(FadeOutFadeForm);var PcBookmarkItem=Class({create:function(b,c){this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;b.fontColor=this.fontColor;this._super(b,c)}}).extend(BookmarkItem);var PcBookmarkListPanel=Class({create:function(b){this.mainColor=bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor;this.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor);this._super(b)},onCreate:function(){},newItem:function(b){return new PcBookmarkItem(b,this.callback)}}).extend(BookmarkListPanel);var PcBookmarkForm=Class({create:function(b){this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this.bookmarkListPanel.onCreate()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='bookmark_content'></div>");this.stage.append(b);var c=$("<p class='inputForm'></p>");c.append(this.input);c.append(this.colorSelection);b.append(c);b.append(this.leftAddPage);b.append(this.rightAddPage);b.append(this.bookmarkListTitle);
b.append(this.bookmarkListPanel.bookmarkSwiper);b.append(this.remove);this.parent.append(this.stage);this.refreshPanel()},onResize:function(){var b=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var c=toolBar.getTopHeight()+10;this.width=270;this.height=b-40;this.maxHeight=this.height-188;this.stage.find(".bookmark_content").css({height:b-87+"px"});this.stage.css({height:this.height+
"px",top:c+"px"});this.bookmarkListPanel.onResize(this.width,this.maxHeight);this.refreshPanel()}}).extend(PcBookmarkFrame);var PcHelpForm=Class({create:function(b){this.elements=new HelpElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});bookConfig.helpContentFileURL&&(this.stage.css({width:bookConfig.helpWidth+"px",height:bookConfig.helpHeight+"px"}),this.content.css({width:bookConfig.helpWidth-34+"px",height:bookConfig.helpHeight-59+"px"}),this.image.css({background:"url("+bookConfig.helpContentFileURL+") center no-repeat","background-size":"contain",
width:"100%",height:"100%"}));this._super();bookConfig.showHelpContentAtFirst?this.show():this.hide()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);this.content=$("<div class='help_content'></div>");this.stage.append(this.content);this.content.append(this.image);this.title1&&this.content.append(this.title1);this.title2&&this.content.append(this.title2);this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);!bookConfig.helpContentFileURL&&this.image&&
this.image.changeButtonColor(this.fontColor)}}).extend(FadeOutFadeForm);var PcPrintForm=Class({create:function(b){this.elements=new PrintElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='content'></div>");this.stage.append(b);b.append(this.pictureListForm.getDom());var c=$("<div class='printDiv'></div>");c.append(this.printAll);c.append(this.printCurrent);c.append(this.printRange);
c.append(this.printButton);b.append(c);this._super()},changeItemColor:function(){this.printCurrent.changeButtonColor(this.fontColor);this.printRange.changeButtonColor(this.fontColor);this.printAll.changeButtonColor(this.fontColor)},initEvent:function(){this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.pictureListForm.leftBtn.changeButtonColor(this.fontColor);this.pictureListForm.rightBtn.changeButtonColor(this.fontColor);this.changeItemColor()}}).extend(FadeOutFadeForm);var PcSearchItem=Class({create:function(b,c){c.fontColor=this.fontColor;this._super(b,c)}}).extend(SearchItem);var PcSearchForm=Class({create:function(b){this.elements=new SearchElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor})},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='search_content'></div>");this.stage.append(b);b.append(this.input);b.append(this.searchButton);b.append(this.searchResult);b.append(this.searchSwiper);this.parent.append(this.stage)},newSearchItem:function(b,
c){return new PcSearchItem(b,c)},onResize:function(){var b=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var c=toolBar.getTopHeight()+10;this.width=287;this.height=b-40;this.stage.css({height:this.height+"px",top:c+"px"});this.searchSwiper.css("height",this.height-116+"px");this.elements.refresh()},getList:function(){return this.elements.getList()},onShow:function(){this.close.changeButtonColor(this.fontColor);
this.input.focus();BookInfo.getBook().addSearchHighlight()},onHide:function(){BookInfo.getBook().clearSearchHighlight()}}).extend(SlideForm);var PcShareForm=Class({create:function(b){this.elements=new ShareElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this.titleList.css({"border-bottom":"1px solid "+this.fontColorObj.rgba(0.1)});this.shareTitle.css({"border-bottom":"2px solid "+this.fontColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='share_content'></div>");this.stage.append(b);this.initTitleList();
b.append(this.titleList);this.content1=$("<div class='content1'></div>");this.content2=$("<div class='content2'></div>");this.content1.append(this.linkTitle);this.content1.append(this.linkArea);this.shareCurrentPageBox.append(this.shareCurrentCheck).append(this.shareCurrentPageTitle1);this.content1.append(this.shareCurrentPageBox);this.content1.append(this.copy1);this.content1.append($("<p>"+getLanguage("frmShareCaption","Share")+":</p>"));var c;c=getLanguage("frmShareInfo","You can easily share this publication to social networks, just click the appropriate button below.");
this.content1.append($("<p>"+c+"</p>"));this.content1.append(this.sharePanel);c=getLanguage("frminsertInfo","Use the code below to embed this publication to your website.");this.content2.append($("<p>"+c+"</p>"));bookConfig.isInsertFrameLinkEnable||this.content2.css({display:"none"});this.content2.append(this.insertArea);this.shareCurrentPageEmbed.append(this.embedCurrentCheck).append(this.shareCurrentPageTitle2);this.content2.append(this.shareCurrentPageEmbed);this.content2.append(this.copy2);b.append(this.content1);
b.append(this.content2);this._super()},initTitleList:function(){this.titleList=$("<div class='title_list'></div>");this.shareTitle=$("<span class='focus'>"+getLanguage("frmShareCaption","Share")+"</span>");this.insertTitle=$("<span>"+getLanguage("frminsertLabel","Insert to Site")+"</span>");this.titleList.append(this.shareTitle);this.titleList.append(this.insertTitle);this.shareTitle.bind("mousedown",function(b){b.stopPropagation()});this.insertTitle.bind("mousedown",function(b){b.stopPropagation()});
this.shareTitle.onTap(function(){this.insertTitle.removeClass("focus");this.shareTitle.addClass("focus");this.insertTitle.css({"border-bottom":"none"});this.shareTitle.css({"border-bottom":"2px solid "+this.fontColor});this.content1.show();this.content2.hide()}.bind(this));this.insertTitle.onTap(function(){this.insertTitle.addClass("focus");this.shareTitle.removeClass("focus");this.shareTitle.css({"border-bottom":"none"});this.insertTitle.css({"border-bottom":"2px solid "+this.fontColor});this.content1.hide();
this.content2.show()}.bind(this));bookConfig.isInsertFrameLinkEnable||this.insertTitle.css({display:"none"})},onShow:function(){this.close.changeButtonColor(this.fontColor)}}).extend(FadeOutFadeForm);var PcTableOfContentItem=Class({create:function(b,c,d){c.fontColor=bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor;this._super(b,c,d)}}).extend(TableOfContentItem);var PcTableOfContentForm=Class({create:function(b){this.elements=new TableOfContentElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this.close.changeButtonColor(this.fontColor)},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='tableofcontent_content'></div>");this.stage.append(b);b.append(this.tableofcontentSwiper);this.parent.append(this.stage)},newItem:function(b,c,d){return new PcTableOfContentItem(b,
c,d)},onResize:function(){var b=Math.max(windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-toolBar.getHeight(),1);Math.max(windowWidth-bookConfig.leftMargin-bookConfig.rightMargin-toolBar.getWidth(),1);var c=toolBar.getTopHeight()+10;this.width=300;this.height=b-40;this.maxHeight=this.height-68;this.stage.css({height:this.height+"px",top:c+"px"});this.tableofcontentSwiper.css({height:b-67+"px"});this.elements.refresh()},onShow:function(){}}).extend(SlideForm);var PcVideoGalleryForm=Class({create:function(b){this.elements=new VideoGalleryElements(this);this._super(b)},onCreate:function(){this.stage.css({"background-color":this.mainColor,color:this.fontColor});this._super()},initHtml:function(){this.stage.append(this.title);this.stage.append(this.close);var b=$("<div class='videoGallery_content'></div>");this.stage.append(b);b.append(this.video);b.append(this.info);if(this.videoList&&1<this.videoList.length){var c=$("<div class='video_list'></div>");c.append(this.videoSwiper);
b.append(c)}else this.stage.css("width","335px"),b.css("width","315px");this._super()},onShow:function(){this.close.changeButtonColor(this.fontColor);this.elements.playVideo(this.videoList[0])},onHide:function(){this.video.attr("src","")}}).extend(FadeOutFadeForm);Class("TextFormatAnalyzer",{create:function(b){this.$textForAnalysis=$("<div></div>");this.analysisResult=[];if(b&&HTMLString.isHTML(b)){var c=$(b);b.toLowerCase().startsWith("<textformat")?this.$textForAnalysis.append(c):(b=$("<textformat></textformat>"),this.$textForAnalysis.append(b),b.append(c));this.analysis()}else this.initFromText(b)},initFromText:function(b){b||(b=" ");var c={leading:0,leftMargin:0,rightMargin:0,paragraphs:[]};b={align:"LEFT",font:{},text:b};b.font.family="Arial";b.font.size=
12;b.font.color="#000000";b.font.letterSpacing=0;b.font.kerning=0;b.font.bold=!1;b.font.italic=!1;b.font.underline=!1;c.paragraphs.push(b);this.analysisResult.push(c)},analysis:function(){for(var b=this.$textForAnalysis.children(),c=0;c<b.length;c++){var d={leading:0,leftMargin:0,rightMargin:0,paragraphs:[]},f=$(b[c]);d.leading=f.attr("LEADING")?parseInt(f.attr("LEADING")):0;$.system.name!=$.system.IOS&&(d.leading+=5);d.leftMargin=f.attr("LEFTMARGIN")?parseInt(f.attr("LEFTMARGIN")):0;d.rightMargin=
f.attr("RIGHTMARGIN")?parseInt(f.attr("RIGHTMARGIN")):0;for(var f=f.children(),g=0;g<f.length;g++){var h=$(f[g]),k={align:"LEFT",font:null,text:""};k.align=h.attr("ALIGN")?h.attr("ALIGN"):"LEFT";var h=$(h.children()[0]),l={};l.family=h.attr("FACE")?h.attr("FACE"):"Arial";l.size=h.attr("SIZE")?parseInt(h.attr("SIZE")):12;l.color=h.attr("COLOR")?h.attr("COLOR"):"#000000";l.letterSpacing=h.attr("LETTERSPACING")?parseInt(h.attr("LETTERSPACING")):0;l.kerning=h.attr("KERNING")?parseInt(h.attr("KERNING")):
0;l.lineHeight=l.size+d.leading;l.bold=0<h.find("B").length;if(l.bold){l.boldConfig=[];var m=h[0].innerHTML;this.defaultHtml=h[0].innerHTML;h.find("B").each(function(){var b={},c="<b>"+$(this).html()+"</b>";b.boldText=$(this).html();b.index=m.indexOf(c);b.fontSize=$(this).parent().attr("size")||l.size;m=m.slice(b.index+c.length);l.boldConfig.push(b)})}h.find("B");k.font=l;k.text=h.html();/<a\b[^>]+\bhref="([^"]*)"[^>]*>([\s\S]*?)<\/a>/.test(k.text)&&(this.hasATag=!0);d.paragraphs.push(k)}this.analysisResult.push(d)}},
changeToHtml:function(){},getLeftMargin:function(){return 0==this.analysisResult.length?0:this.analysisResult[0].leftMargin},getRightMargin:function(){return 0==this.analysisResult.length?0:this.analysisResult[0].rightMargin},getAlign:function(){if(0==this.analysisResult.length)return"LEFT";var b=this.analysisResult[0];return 0==b.paragraphs.length?"LEFT":b.paragraphs[0].align},getFontFamily:function(){var b=this.getFont();return b?b.family:"Arial"},getFontColor:function(){var b=this.getFont();return b?
b.color:"#000000"},getFontSize:function(){var b=this.getFont();return b?b.size:12},getLetterSpace:function(){var b=this.getFont();return b?b.letterSpacing:0},getWordSpace:function(){var b=this.getFont();return b?b.kerning:"0"},getLineHeight:function(){var b=this.getFont(),c=b.lineHeight;if(!b)return"0";$.system.name!=$.system.IOS&&(c-=5);return c},getFont:function(){if(0==this.analysisResult.length)return null;var b=this.analysisResult[0];return 0==b.paragraphs.length?null:b.paragraphs[0].font},initFont:function(b){var c=
this.getFontCSS(this.getFont());b.css(c)},getMaxFontSize:function(){for(var b=0,c=0;c<this.analysisResult.length;c++)for(var d=this.analysisResult[c],f=0;f<d.paragraphs.length;f++)b=Math.max(b,d.paragraphs[f].font.size);return b},getMinFontSize:function(){for(var b=1E4,c=0;c<this.analysisResult.length;c++)for(var d=this.analysisResult[c],f=0;f<d.paragraphs.length;f++)b=Math.min(b,d.paragraphs[f].font.size);return b},getText:function(){for(var b=this.getTextLines(),c="",d=0;d<b.length;d++)c=c+b[d]+
"\r\n";return c},getTextLines:function(){return this.getLines()},getLines:function(){for(var b=[],c=0;c<this.analysisResult.length;c++)for(var d=this.analysisResult[c],f=0;f<d.paragraphs.length;f++)b.push(d.paragraphs[f].text);return b},getBoldConfig:function(){return this.analysisResult[0].paragraphs[0].font.bold?this.analysisResult[0].paragraphs[0].font.boldConfig:[]},htmlHasATag:function(){return this.hasATag},getHTML:function(b){for(var c=$("<div style='word-wrap:break-word;cursor:default;'></div>"),
d=0;d<this.analysisResult.length;d++){var f=this.analysisResult[d],g=$("<div></div>");0<f.leftMargin&&g.css("margin-left",f.leftMargin+"px");0<f.rightMargin&&g.css("margin-right",f.rightMargin+"px");for(var h=0;h<f.paragraphs.length;h++){var k=f.paragraphs[h],l=k.font.size+f.leading,m=$("<p></p>");b?m.css(b):m.css("text-align",k.align);var n=$("<span></span>");n.css(this.getFontCSS(k.font));n.css("line-height",l+"px");l=k.text;l=l.replaceAll("&lt;br&gt;","<br>");l=l.replaceAll("&lt;br/&gt;","<br/>");
if(k.font.bold){for(var p=[],q=k.font.boldConfig,t=0;t<q.length;t++){var s=q[t].index,r=q[t].boldText;textFrag=l.slice(0,s);p.push(textFrag);textFrag=l.slice(s,s+r.length);textFrag=textFrag.replace(r,"<b>"+r+"</b>");p.push(textFrag);l=l.slice(s+r.length)}p.push(l);l=p.join("")}l||(l="&nbsp;");"JUSTIFY"!=k.align.toUpperCase()&&(l=l.replaceAll("  ","&ensp;"));-1<l.indexOf("<u>")&&(l=l.replaceAll("<u>",'<u style="text-decoration:underline;color:'+this.getFontColor()+'">'));n.append(l);m.append(n);g.append(m)}c.append(g)}return c},
getFontCSS:function(b){return b?{"font-family":b.family,color:b.color,"font-size":b.size+"px","letter-spacing":b.letterSpacing+"px","word-spacing":b.kerning+"px","font-style":b.italic?"italic":"normal","text-decoration":b.underline?"underline":"none"}:{}}});
Class("Item",{Package:"PageItem",create:function(b,c,d,f){this.parent=b;this.config=this.parseConfig(c);this.pageWidth=d;this.pageHeight=f;this.pw=d;this.ph=f;this.type=this.config.annotype},parseConfig:function(b){return b},animateConfig:function(){this.config.animation&&this.config.animation.name&&(this.config.animation.duration||(this.config.animation.duration=1),this.config.animation.timeFun||(this.config.animation.timeFun="ease"),this.config.animation.delay||(this.config.animation.delay=0),this.config.animation.count||
(this.config.animation.count=1),this.config.animation.direction||(this.config.animation.direction="normal"))},getOssUrl:function(b,c,d,f){return b=0<b.lastIndexOf("?")?b+("&x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},destroy:function(){},onResize:virtual_function,resizeHint:function(){this.hintBody&&"block"==this.hintBody.css("display")&&("2"==this.config.hint.hintShapeType?this.normalHint(this.hintBody):
this.bubbleHint(this.hintBody))},initLinkHint:function(b){if(this.config.hint&&this.config.hint.text&&this.config.hint.text.length&&"null"!=this.config.hint.text.toLowerCase()){var c=null,c="2"==this.config.hint.hintShapeType?new NormalLinkHint:new BubbleLinkHint,d=c.build(this.config);this.hintBody=d;d.css({"z-index":"100"});d&&(this.parent.append(d),d.hide(),b.bind(isTouch?_event._down:_event._enter,function(b){this.hintWidth=this.hintWidth||d.width();this.hintHeight=this.hintHeight||d.height();
d.show();d.find("div").css({left:this.hintWidth/2+"px"});"2"==this.config.hint.hintShapeType?this.normalHint(d):this.bubbleHint(d)}.bind(this)),b.bind(isTouch?_event._up:_event._leave,function(b){d.hide()}.bind(this)))}},normalHint:function(b){var c=this.left+(this.width-this.hintWidth-10)/2;0>=c&&(c=0);this.top+this.hintHeight>this.pageHeight/2?b.css({left:c+"px",top:Math.max(2,this.top-this.hintHeight-15)+"px"}):b.css({left:c+"px",top:Math.max(2,this.top+this.height+5)+"px"})},bubbleHint:function(b){var c=
this.left+(this.width-this.hintWidth-10)/2;0>=c&&(c=0);this.top+this.hintHeight+this.height>this.pageHeight/2?b.css({left:c+"px",top:Math.max(2,this.top-this.hintHeight-15)+"px"}):(b.css({left:c+"px",top:Math.max(2,this.top+this.height+5)+"px"}),b.find("#text_hint")[0]&&b.find("#text_hint").css({position:"absolute",bottom:"auto",top:"-10px",left:this.hintWidth/2-6+"px",border:"10px solid transparent","border-top-width":0,"border-left-width":"5px","border-right-width":"5px","border-bottom-color":Color(this.config.hint.hintShapeColor).rgba(this.config.hint.hintShapeAlpha)}))},
addActionEvent:function(b){b=new this.ActionManager(this,b,this.config);b.prepareAction();b.addAction()},addEffectEvent:function(b,c){(new this.EffectManager(this,b,c,this.config)).addEffect()},imageReflection:function(b){!0==supports("boxReflect")&&this.addCSSReflection(b)},addCSSReflection:function(b){var c=this.config.pageW/this.pageWidth;this.config.pageW||(c=1.2);var d=this.config.reflectionAlpha?Number(this.config.reflectionAlpha):0;"1"==this.config.reflectionType&&(d?b.css({"-webkit-box-reflect":"below "+
10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))","-o-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))"}):b.css({"-webkit-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))","-o-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))"}));
"6"==this.config.reflectionType&&(d?b.css({"-webkit-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))","-o-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))"}):b.css({"-webkit-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))","-o-box-reflect":"below 0px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))"}));
"3"==this.config.reflectionType&&(d?b.css({"-webkit-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))","-o-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))"}):b.css({"-webkit-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))",
"-o-box-reflect":"below "+10*c+"px -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.5, transparent), to(white))"}));"4"==this.config.reflectionType&&(d?b.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))","-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))"}):b.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))",
"-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.7, transparent), to(white))"}));"5"==this.config.reflectionType&&(d?b.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))","-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(rgba(255,255,255,"+d/2+")),color-stop(0.5,rgba(255,255,255,"+d+")), to(white))"}):b.css({"-webkit-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.6, transparent), to(white))",
"-o-box-reflect":"below 0 -webkit-gradient(linear, 0 0, 0 100%, from(transparent), color-stop(0.6, transparent), to(white))"}))},setShapeShadow:function(b){switch(Number(this.config.sa)){case 90:offx=0;offy=4;break;case 180:offx=-4;offy=0;break;case 270:offx=0;offy=-4;break;case 360:offx=4,offy=0}b.shadowOffsetX=offx;b.shadowOffsetY=offy;b.shadowBlur=this.config.sx;b.shadowColor=Color(this.config.sr).toString()},addShadow:function(b){if(this.config.hasShadow){var c=0,d=0,f=this.config.shadow,g=Color(f.shadowColor).rgba(f.shadowAlpha);
switch(Number(f.shadowAngle)){case 90:c=0;d=4;break;case 180:c=-4;d=0;break;case 270:c=0;d=-4;break;case 360:c=4,d=0}b.css({"box-shadow":c+"px "+d+"px "+f.shadowBlurX+"px "+g,"-moz-box-shadow":c+"px "+d+"px "+f.shadowBlurX+"px "+g,"-webkit-box-shadow":c+"px "+d+"px "+f.shadowBlurX+"px "+g,"-ms-box-shadow":c+"px "+d+"px "+f.shadowBlurX+"px "+g,"-o-box-shadow":c+"px "+d+"px "+f.shadowBlurX+"px "+g})}},setRotation:function(b,c){0!=parseInt(c)&&(isNaN(c)||b.css({transform:"rotate("+c+"deg)","-webkit-transform":"rotate("+
c+"deg)","-ms-transform":"rotate("+c+"deg)","-o-transform":"rotate("+c+"deg)","-moz-transform":"rotate("+c+"deg)","transform-origin":"0% 0%","-webkit-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%"}))},fixRelativePath:function(b){return b?"string"!==typeof b?fixURLValue(b):!0==bookConfig.isFlipPdf?b.startsWith("../")?fixURLValue(b):b.startsWith("./")?fixURLValue("."+b):b.startsWith("files")?fixURLValue("../"+b):b.isUrl()?fixURLValue(b):
fixURLValue("../"+b):fixURLValue(b):b},nameIs:function(){if(0==arguments.length)return!1;for(var b=this.getClassName(),c=0;c<arguments.length;c++)if("string"==typeof arguments[c]&&b==arguments[c])return!0;return!1},nameLike:function(){if(0==arguments.length)return!1;for(var b=this.getClassName().toLowerCase(),c=0;c<arguments.length;c++)if("string"==typeof arguments[c]){var d=arguments[c].toLowerCase();if(-1<b.indexOf(d))return!0}return!1}});
Class("NormalLinkHint",{build:function(b,c,d){d=new TextFormatAnalyzer(b.hint.text);var f=d.getHTML();c=$("<div></div>");c.html(f);d.initFont(c);d=Color(b.hint.hintShapeColor);parseBool(b.hint.hintAuto)?c.css({padding:"5px","border-radius":"2px"}):c.css({width:b.hint.hintW+"px",height:b.hint.hintH+"px","line-height":b.hint.hintH+"px"});c.css({position:"absolute",background:d.rgba(b.hint.hintShapeAlpha),"border-radius":"2px",color:"white"});return c}});
Class("BubbleLinkHint",{build:function(b,c,d){var f=new TextFormatAnalyzer(b.hint.text),g=f.getHTML();c=$("<div></div>");d=$("<div id='text_hint'></div>");c.html(g);c.append(d);f.initFont(c);f=Color(b.hint.hintShapeColor);g=Color(b.hint.hintShapeColor2);parseBool(b.hint.hintAuto)?c.css({padding:"5px","border-radius":"2px"}):c.css({width:b.hint.hintW+"px",height:b.hint.hintH+"px","line-height":b.hint.hintH+"px"});d.css({position:"absolute",bottom:"-10px",border:"10px solid transparent","border-bottom-width":0,
"border-left-width":"5px","border-right-width":"5px","border-top-color":g.rgba(b.hint.hintShapeAlpha)});c.css({position:"absolute","text-align":"center",background:"-moz-linear-gradient(top,"+f.rgba(b.hint.hintShapeAlpha)+","+g.rgba(b.hint.hintShapeAlpha)+")",background:"-o-linear-gradient(top,"+f.rgba(b.hint.hintShapeAlpha)+","+g.rgba(b.hint.hintShapeAlpha)+")",background:"-ms-linear-gradient(top,"+f.rgba(b.hint.hintShapeAlpha)+","+g.rgba(b.hint.hintShapeAlpha)+")",background:"-webkit-linear-gradient(top,"+
f.rgba(b.hint.hintShapeAlpha)+","+g.rgba(b.hint.hintShapeAlpha)+")",background:"linear-gradient("+f.rgba(b.hint.hintShapeAlpha)+","+g.rgba(b.hint.hintShapeAlpha)+")","border-radius":"2px",color:"white"});return c}}).extend("NormalLinkHint");
Class("ActionManager",{Package:"PageItem",create:function(b,c,d){this.item=b;this.element=c;this.config=d;this.action=d.action;this.initAction();this.initActionEvent()},initAction:function(){if(this.action){if(this.action instanceof Array){if(0==this.action.length){this.action=null;return}this.action=this.action[0]}this.eventType=null;this.action.triggerEventType&&(this.eventType=this.action.triggerEventType);$.system.name==$.system.IOS&&(this.eventType==PageEditor.TriggerEventType.MouseDown&&(void 0==
this.action.linkTarget&&(this.action.linkTarget="_self"),"_blank"==this.action.linkTarget&&(this.eventType=PageEditor.TriggerEventType.MouseUp),"Blank"==this.action.linkTarget&&(this.eventType=PageEditor.TriggerEventType.MouseUp)),this.action.url&&"tel:"==this.action.url.toLowerCase().substr(0,4)&&(this.eventType=PageEditor.TriggerEventType.MouseUp))}},initActionEvent:function(){if(this.action)switch(this.eventName="",this.eventType){case PageEditor.TriggerEventType.MouseDown:this.eventName=_event._down;
break;case PageEditor.TriggerEventType.MouseOver:this.eventName=_event._over;break;case PageEditor.TriggerEventType.MouseOut:this.eventName=_event._out;break;case PageEditor.TriggerEventType.MouseUp:this.eventName=_event._end;break;case PageEditor.TriggerEventType.MouseMove:this.eventName=_event._move;break;case PageEditor.TriggerEventType.MouseLeave:this.eventName=_event._leave}},prepareAction:function(){this.action&&this.element&&(this.executor=this.getActionExecutor())&&this.executor.prepare&&
this.executor.prepare(this.item,this.element,this.config)},addAction:function(){this.action&&this.element&&""!=this.eventName&&(!isPhone()&&!isPad()||this.eventName!=_event._down&&this.eventName!=_event._end&&this.eventName!=_event._over?(this.element.css({cursor:"pointer"}),this.element.bind(this.eventName,function(b){this.onAction();b.stopPropagation();return!1}.bind(this)),this.element.addClass("flip-action")):this.addPhoneAction())},addPhoneAction:function(){this.element.onTap(function(b){this.onAction();
b.stopPropagation()}.bind(this));this.element.addClass("flip-action")},onAction:function(){this.executor||(this.executor=this.getActionExecutor());if(this.executor)return this.executor.execute(this.item,this.element,this.config)},getActionExecutor:function(){if(this.action.actionType==PageEditor.ActionType.GOTO_PAGE)return new PageItem.Action.GotoPageAction;if(this.action.actionType==PageEditor.ActionType.OPEN_URL)return new PageItem.Action.OpenUrlAction;if(this.action.actionType==PageEditor.ActionType.OPEN_WINDOW)return new PageItem.Action.OpenWindowAction;
if(this.action.actionType==PageEditor.ActionType.SLIDE_SHOW)return new PageItem.Action.OpenSlideshowAction;if(this.action.actionType==PageEditor.ActionType.PLAY_AUDIO)return new PageItem.Action.PlayAudioAction;if(this.action.actionType==PageEditor.ActionType.ACTION_JS)return new PageItem.Action.ExecuteJavascriptAction;if(this.action.actionType==PageEditor.ActionType.WINDOW_HTML)return new PageItem.Action.HTMLWindowAction;if(this.action.actionType==PageEditor.ActionType.PLAY_VIDEO)return new PageItem.Action.PlayVideoAction;
if(this.action.actionType==PageEditor.ActionType.SHOW_INFORMATION)return new PageItem.Action.ShowInformationAction;if(this.action.actionType==PageEditor.ActionType.QUIZ)return new PageItem.Action.OpenQuizAction;if(this.action.actionType==PageEditor.ActionType.SWF_SLIDE)return new PageItem.Action.OpenSwfSlideAction}});
Class("GotoPageAction",{Package:"PageItem.Action",execute:function(b,c,d){this.initPageIndex(d.action);gotoPageFun(this.linkPageIndex);c.addClass("slider-action")},initPageIndex:function(b){this.linkPageIndex=b.pageIndex;this.linkPageIndex||(this.linkPageIndex=1)}});
Class("OpenUrlAction",{Package:"PageItem.Action",execute:function(b,c,d){this.initLink(d.action);if("tel:"==this.linkUrl.substr(0,4))window.open(this.linkUrl);else{if(this.isTargetMatch("self"))return window.location=this.linkUrl,!1;if(this.isTargetMatch("blank"))return window.open(this.linkUrl),!1;if(this.isTargetMatch("parent"))return parent.location=this.linkUrl,!1;if(this.isTargetMatch("top")){for(c=window;c.parent!=c;)c=c.parent;c.location=this.linkUrl;return!1}(b=window.frames[this.linkTarget])?
b.location=this.linkUrl:window.location=this.linkUrl}c.addClass("slider-action")},initLink:function(b){this.initLinkUrl(b);this.initLinkTarget(b)},initLinkUrl:function(b){this.linkUrl=b.url;this.linkUrl||(this.linkUrl="");this.linkUrl=this.linkUrl.trim();b=this.linkUrl.toLowerCase();b.isUrl()&&b.startsWith("www")&&(this.linkUrl="http://"+this.linkUrl);b.isEmail()&&!b.startsWith("mailto:")&&(this.linkUrl="mailto:"+this.linkUrl);this.fixLikeFileLinkUrl()},fixLikeFileLinkUrl:function(){var b=this.linkUrl.toLowerCase();
-1<b.startsWith("http")||-1<b.startsWith("ftp")||-1<b.startsWith("www.")||-1<b.startsWith("tel:")||-1<b.startsWith("mailto:")||b.contains("@")||1<b.extract(".").length||(this.linkUrl="www."+this.linkUrl)},initLinkTarget:function(b){this.linkTarget=(this.linkTarget=b.linkTarget)?this.linkTarget:bookConfig.OpenWindow?bookConfig.OpenWindow:"_blank"},isTargetMatch:function(b){return b?0<=this.linkTarget.trim().toLowerCase().indexOf(b):!1}});
Class("PlayAudioAction",{Package:"PageItem.Action",execute:function(b,c,d){this.prepare(b,c,d);!1==b.audio.isPlaying()?b.audio.play():b.audio.pause();c.addClass("slider-action")},prepare:function(b,c,d){b.audio||(c=d.action,d=tmpContainer,bookContainer.width(),bookContainer.height(),b.audio=new AudioEditor(d,c.audioURL,c.autoPlay,c.autoPlayAgain,c.H5PlaybackNumber,c.H5Replay))}});
Class("PlayVideoAction",{Package:"PageItem.Action",execute:function(b,c,d){d=d.action;d.windowType==PageEditor.WindowType.OPEN_YOUTUBE&&(b.popup=new PopUpVideo(d,"youtube"));d.windowType==PageEditor.WindowType.OPEN_VIMEO&&(b.popup=new PopUpVideo(d,"vimeo"));d.windowType==PageEditor.WindowType.OPEN_DAILYMOTION&&(b.popup=new PopUpVideo(d,"dailymotion"));d.windowType==PageEditor.WindowType.OPEN_TYPE_WISTIA&&(b.popup=new PopUpVideo(d,"wistia"));d.windowType==PageEditor.WindowType.OPEN_TYPE_YOUKU&&(b.popup=
new PopUpVideo(d,"youku"));d.windowType==PageEditor.WindowType.OPEN_TYPE_QQ&&(b.popup=new PopUpVideo(d,"qq"));c.addClass("slider-action")}});Class("OpenSlideshowAction",{Package:"PageItem.Action",execute:function(b,c,d){var f=d.action;f.popUpImage=parseBool(d.popUpImage);f.url=d.src;d=tmpContainer;var g=bookContainer.width(),h=bookContainer.height();b.popup=new PageItem.Popup.SlideShow(d,f,g,h);c.addClass("slider-action")}});
Class("ExecuteJavascriptAction",{Package:"PageItem.Action",execute:function(b,c,d){b=d.action;b.scriptFun&&eval(b.scriptFun);c.addClass("slider-action")}});
Class("OpenWindowAction",{Package:"PageItem.Action",execute:function(b,c,d){d=d.action;var f={width:d.windowWidth,height:d.windowHeight,src:d.resourceContent,caption:d.caption,languageLayout:d.languageLayout};d.H5PlaybackNumber&&(f.H5PlaybackNumber=parseInt(d.H5PlaybackNumber));d.H5Replay&&(f.H5Replay=parseBool(d.H5Replay));d.hideTitle&&(f.hideTitle=parseBool(d.hideTitle));d.drag&&(f.drag=parseBool(d.drag));var g=tmpContainer,h=bookContainer.width(),k=bookContainer.height();d.windowType==PageEditor.WindowType.OPEN_VIDEO&&
($.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?b.video=new MobileVideo(g,f,h,k,"video"):b.video=new PageItem.VideoForm(g,f,h,k,"video"));d.windowType==PageEditor.WindowType.OPEN_FLASH&&(b.video=new PageItem.VideoForm(g,f,h,k,"flash"));d.windowType==PageEditor.WindowType.OPEN_SHOW_TEXT&&($.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?b.video=new TextLightBox(g,f,h,k,"text"):b.video=new PageItem.VideoForm(g,f,h,k,"text"));c.addClass("slider-action")}});
Class("HTMLWindowAction",{Package:"PageItem.Action",execute:function(b,c,d){b.popup=new PageItem.Popup.WindowHtml(tmpContainer,d.action);c.addClass("slider-action")}});Class("ShowInformationAction",{Package:"PageItem.Action",execute:function(b,c,d){$.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?b.popup=new PageItem.Popup.ShowInformationMobile(tmpContainer,d):b.popup=new PageItem.Popup.ShowInformation(tmpContainer,d);b.popup.show();c.addClass("slider-action")}});
Class("OpenQuizAction",{Package:"PageItem.Action",execute:function(b,c,d){$.browser.device==$.browser.DEVICE_PHONE||isPhone()||isPad()?b.popup=new PageItem.Popup.QuizPanelMobile(tmpContainer,d):b.popup=new PageItem.Popup.QuizPanelPC(tmpContainer,d);b.popup.show();c.addClass("slider-action")}});
Class("OpenSwfSlideAction",{Package:"PageItem.Action",execute:function(b,c,d){if(!isPhone()&&!isPad()&&!BookInfo.getBook().flipping){"IMG"==c[0].tagName.toUpperCase()&&(c=c.parent());var f=c.parent();d.elemConfig={element:c,elementParent:f,offsetX:f.offset().left,offsetY:f.offset().top,parentWidth:BookInfo.getBook().getPageWidth(),parentHeight:BookInfo.getBook().getPageHeight()};f=tmpContainer;tmpContainer.width();tmpContainer.height();b.popup||(b.popup=new PageItem.Popup.SwfSlide(f,d,windowWidth,
windowHeight));b.popup.show();c.addClass("slider-action")}}});
Class("EffectManager",{Package:"PageItem",create:function(b,c,d,f){c&&f&&f.effect&&(d||(d=""),this.elementConfig=d,this.item=b,this.element=c,this.config=f,this.effect=f.effect)},addEffect:function(){if(this.element&&this.config&&this.effect&&this.effect.effectType){var b=this.getActionExecutor();b&&(this.item.imgEffect=b)}},getActionExecutor:function(){if(this.effect.effectType==PageEditor.Effect.FADEIN)return new PageItem.Effect.FadeIn(this.item,this.element,this.elementConfig,this.config);if(this.effect.effectType==
PageEditor.Effect.CUTTING)return new PageItem.Effect.Cutting(this.item,this.element,this.elementConfig,this.config);if(this.effect.effectType==PageEditor.Effect.FLY_IN)return new PageItem.Effect.FlyIn(this.item,this.element,this.elementConfig,this.config);if(this.effect.effectType==PageEditor.Effect.INDENTATION)return new PageItem.Effect.Indentation(this.item,this.element,this.elementConfig,this.config)}});
Class("FadeIn",{Package:"PageItem.Effect",create:function(b,c,d,f){c&&f&&(this.item=b,this.element=c,this.config=f,this.effect=f.effect)},hide:function(){this.element.css({display:"none"})},show:function(){this.element.fadeIn(1E3*this.effect.duration)}});
Class("FlyIn",{Package:"PageItem.Effect",create:function(b,c,d,f){c&&f&&d&&(this.item=b,this.elementConfig=d,this.element=c,this.elemWidth=this.elementConfig.elemWidth,this.elemHeight=this.elementConfig.elemHeight,this.parentWidth=this.elementConfig.parentWidth,this.parentHeight=this.elementConfig.parentHeight,this.config=f,this.effect=f.effect,this.hide())},setPosition:function(){switch(this.effect.position){case "left":this.element.css({left:-this.elementConfig.x-this.elementConfig.elemWidth+"px"});
break;case "top":this.element.css({top:-this.elementConfig.y-this.elementConfig.elemHeight+"px"});break;case "bottom":this.element.css({top:this.elementConfig.pageHeight-this.elementConfig.y+"px"});break;case "right":this.element.css({left:this.elementConfig.pageWidth-this.elementConfig.x+"px"})}},hide:function(){this.setPosition()},show:function(){setTimeout(function(){"left"==this.effect.position||"right"==this.effect.position?this.element.animate({left:(this.elementConfig.parentWidth-this.elementConfig.elemWidth)/
2+"px"},1E3*this.effect.duration,"easeOutBack"):this.element.animate({top:(this.elementConfig.parentHeight-this.elementConfig.elemHeight)/2+"px"},1E3*this.effect.duration,"easeOutBack")}.bind(this),1E3*bookConfig.flippingTime)}});
Class("Indentation",{Package:"PageItem.Effect",create:function(b,c,d,f){c&&f&&d&&(this.item=b,this.elementConfig=d,this.element=c,this.config=f,this.effect=f.effect,this.hide())},setPosition:function(){this.element.css({margin:""});this.element.parent().css({overflow:"hidden"});this.elementConfig.parentWidth/this.elementConfig.parentHeight>this.elementConfig.elemWidth/this.elementConfig.elemHeight?(this.startLeft=(this.elementConfig.parentWidth-this.elementConfig.elemWidth)/2,this.startTop=0):(this.startLeft=
0,this.startTop=(this.elementConfig.parentHeight-this.elementConfig.elemHeight)/2);switch(this.effect.position){case "left":var b=this.elementConfig.parentWidth-this.elementConfig.elemWidth;this.element.css({left:-(this.elementConfig.elemWidth+b)+"px",top:this.startTop+"px"});break;case "top":b=this.elementConfig.parentHeight-this.elementConfig.elemHeight;this.element.css({top:-(this.elementConfig.elemHeight+b)+"px",left:this.startLeft+"px"});break;case "bottom":b=this.elementConfig.parentHeight-
this.elementConfig.elemHeight;this.element.css({top:this.elementConfig.elemHeight+b+"px",left:this.startLeft+"px"});break;case "right":b=this.elementConfig.parentWidth-this.elementConfig.elemWidth,this.element.css({left:this.elementConfig.elemWidth+b+"px",top:this.startTop+"px"})}},hide:function(){this.setPosition()},show:function(){setTimeout(function(){"left"==this.effect.position||"right"==this.effect.position?this.element.animate({left:this.startLeft},1E3*this.effect.duration,"easeOutBack"):this.element.animate({top:this.startTop},
1E3*this.effect.duration,"easeOutBack")}.bind(this),1E3*bookConfig.flippingTime)}});
Class("Cutting",{Package:"PageItem.Effect",create:function(b,c,d,f){c&&d&&f&&(this.elementConfig=d,this.element=c,this.elemParent=this.element.parent(),this.config=f,this.showTime=0,this.effect=f.effect,this.initCss())},initCss:function(){isPhone()||isPad()||(this.element.addClass("clip"),this.element.parent().addClass("active"),this.element.css({transform:""}))},resetClass:function(){isPhone()||isPad()||(this.element.removeClass("clip"),this.element.parent().removeClass("active"))},cutting:function(b){if(!b)return!1;
this.initCss();b.removeAttribute("id");var c=this.elementConfig.elemHeight,d=this.elementConfig.elemWidth,f=this.elementConfig.elemWidth/10,g=b.outerHTML;if(window.getComputedStyle(document.body).webkitClipPath){for(var h="",k=0;k<d;k+=f)for(var l=0;l<c;l+=f)[[[k,l],[k,l+f],[k+f,l+f],[k+f,l]]].forEach(function(b,f){var k=b.map(function(b){return b.map(function(b){return b+"px"}).join(" ")}).join(),k="-webkit-clip-path: polygon("+k+");clip-path: polygon("+k+");",l=0.5>Math.random()?-1:1,l="translate("+
[d*(0.5-Math.random()),c*(0.5-Math.random())].map(function(b){return b+"px"}).join()+") rotate("+Math.round(360*l*Math.random())+"deg)";h+=g.replace('style="',' style="'+("-webkit-transform:"+l+";-o-transform:"+l+";-moz-transform:"+l+";-ms-transform:"+l+";transform:"+l+";")+k);this.element.css({visibility:"hidden"})}.bind(this));$(b).parent().append(h);setTimeout(function(){this.elemParent.find("img").css({background:"transparent",visibility:"visible"});this.elemParent.find("img").not(":first").remove();
this.resetClass()}.bind(this),1100);return!0}b.className+=" no-clippath";return!1},hide:function(){isPhone()||isPad()?this.element.fadeOut(0):this.element.css({display:"none"})},show:function(){isPhone()||isPad()?this.element.fadeIn(1E3):(this.element.css({display:"block"}),this.cutting(this.element[0]))}});
Class("Youtube",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);null!=this.config.id&&(this.firstTime=!0,this.animateConfig(),this.width=Number(this.config.width)*this.pageWidth,this.height=Number(this.config.height)*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,b=this.config.id,-1<b.indexOf("/")&&(c=-1<b.indexOf("?v=")?b.lastIndexOf("?v=")+3:b.lastIndexOf("/")+1,b=b.substring(c,b.length)),c="https"==(window.location.href?window.location.href.toLowerCase():
"http:").substring(0,5)?"https":"http",this.youtubeFrame=new Media($("<iframe id='player' class='youtube-player flip-action' type='text/html' width='"+this.width+"' height='"+this.height+"' src='"+c+"://www.youtube.com/embed/"+b+"?enablejsapi=1&rel=0' frameborder='0' allowfullscreen='1' style='position: absolute; opacity: "+this.config.alpha+"; left:"+this.x+"px; top:"+this.y+"px;'></iframe>"),"youtube"),this.config.rotation&&this.setRotation(this.youtubeFrame.$media,this.config.rotation),this.parent.append(this.youtubeFrame.$media))},
setTransOrigin:function(b,c){this.youtubeFrame.setCss({"-webkit-transform-origin":b+"px "+c+"px","-o-transform-origin":b+"px "+c+"px","-moz-transform-origin":b+"px "+c+"px","-ms-transform-origin":b+"px "+c+"px","transform-origin":b+"px "+c+"px"})},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,id:b.videoId?b.videoId:b.videoID,moviePlayTriggerEvt:b.moviePlayTriggerEvt,playerParameters:b.playerParameters,movieStopTriggerEvt:b.movieStopTriggerEvt,
rotation:b.location.rotation,animation:b.animation}},initCss:function(){this.youtubeFrame.setCss({width:this.width+"px",height:this.height+"px",top:this.y+"px",left:this.x+"px"})},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.youtubeFrame.setCss({width:this.width+"px",height:this.height+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*
this.pageHeight;this.youtubeFrame.setCss({top:this.y+"px",left:this.x+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},pauseVideo:function(){this.youtubeFrame&&this.youtubeFrame.pause()},playVideo:function(){this.youtubeFrame&&(this.firstTime?(this.youtubeFrame.$media.on("load",function(){this.youtubeFrame.play()}.bind(this)),this.firstTime=!1):this.youtubeFrame.play())},hide:function(){this.youtubeFrame&&(this.youtubeFrame.setCss({width:"0px",
height:"0px"}),this.youtubeFrame.setCss({display:"none"}))},show:function(){this.youtubeFrame&&(this.youtubeFrame.setCss({width:this.width+"px",height:this.height+"px"}),this.youtubeFrame.setCss({display:"block"}))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.youtubeFrame.setCss({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.youtubeFrame.$media.one(b,function(){this.youtubeFrame.setCss({animation:""})}.bind(this))}}}).extend("Item");
Class("Video",{Package:"PageItem",create:function(b,c,d,f,g){this.config=this.parseConfig(c);this.animateConfig();this.parent=b;this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.playCount=0;this.content=$("<div class='flip-action'></div>");this.content.css({position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",width:this.width+"px",
height:this.height+"px",opacity:this.config.alpha,"background-color":"black"});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);"string"==typeof this.config.previewSrc&&""!=this.config.previewSrc&&null!=this.config.previewSrc&&void 0!=this.config.previewSrc&&(this.config.previewSrc=this.fixRelativePath(this.config.previewSrc),bookConfig.useTheAliCloudChart&&(this.config.previewSrc=this.getOssUrl(this.config.previewSrc,this.width,this.height,"fixed")));if("string"==
typeof this.config.src){if(b=this.config.src.match(/(.mp4|.flv|.f4v)\b/),null==this.config.src||null==b)return}else if(this.config.src=={})return;this.config.src=this.fixRelativePath(this.config.src);this.video=null;this.video=new Media($("<video controls preload='metadata' webkit-playsinline='true' playsinline='true' ><source src='"+this.config.src+"'/></video>"),"video");this.video.setCss({position:"absolute","z-index":1,left:"0px","object-fit":"fill",top:"0px",width:"100%",height:"100%"});this.config.previewSrc&&
this.video.$media.attr("poster",this.config.previewSrc);this.content.append(this.video.$media);void 0!=this.video.$media[0].play&&(this.videoSkin=this.content.addVideoSkin(g,this.video),this.video.$media.removeAttr("controls"));this.content.bind(_event._down,function(b){b.stopPropagation()});this.video.$media.bind(_event._down,function(b){b.stopPropagation()});this.video.$media.keydown(function(b){b.preventDefault();b.stopPropagation()}.bind(this));this.video.$media.keyup(function(b){b.preventDefault();
b.stopPropagation()}.bind(this));parseBool(this.config.reflection)&&this.imageReflection(this.content,this.width,this.height);parseBool(this.config.shadow.hasDropShadow)&&this.addShadow(this.content);this.video.$media.bind("click mousedown mouseup DOMMouseScroll mousewheel",function(b){b.stopPropagation()}.bind(this));this.initLoopEvent();this.config.prompt&&this.config.promptTime&&this.video.$media.bind("loadedmetadata",function(b){b=[];for(var c=this.config.prompt.split("|"),d=this.config.promptTime.split("|"),
f=0;f<c.length;f++)c[f]&&b.push({time:d[f],text:c[f]});this.videoSkin.initPrompt(b)}.bind(this))},initLoopEvent:function(){0>this.config.H5PlaybackNumber&&this.video.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.playVideo()}.bind(this));this.video.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},
showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},parseConfig:function(b){var c={width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,shadow:b.shadow,reflection:b.location.reflection,
reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,previewSrc:b.previewUrl,prompt:b.prompt,promptTime:b.promptTime,moviePlayTriggerEvt:b.moviePlayTriggerEvt?b.moviePlayTriggerEvt:b.PlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt?b.movieStopTriggerEvt:b.StopTriggerEvt,replayWhenPlayEventTrigger:b.replayWhenPlayEventTrigger,animation:b.animation};b.H5PlaybackNumber&&(c.H5PlaybackNumber=parseInt(b.H5PlaybackNumber));b.H5Replay&&(c.H5Replay=parseBool(b.H5Replay));
b.componentData&&(c.moviePlayTriggerEvt=b.componentData.playEvt,c.movieStopTriggerEvt=b.componentData.stopEvt,b.componentData.previewURL&&(c.previewSrc=b.componentData.previewURL),b.componentData.imgURL&&(c.previewSrc=b.componentData.imgURL));b.previewURL&&(c.previewSrc=b.previewURL);void 0!=b.videoURL&&(c.src=b.videoURL);void 0!=b.url&&(c.src=b.url);b.componentData&&(c.src=b.componentData.videoURL);parseBool(b.shadow.hasDropShadow)&&(c.hasShadow=!0);return c},onResize:function(b,c){this.pageWidth=
b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.content.css({"background-size":this.width+"px "+this.height+"px"});if(this.videoSkin)this.videoSkin.onResize();this.setPosition()},setPosition:function(){this.x=this.pageWidth*this.config.x;this.y=this.pageHeight*this.config.y;this.content.css({left:this.x+"px",top:this.y+"px"})},playVideo:function(){if(null!=this.video)try{this.video.play(),
this.videoSkin.play()}catch(b){}},stopVideo:function(){if(null!=this.video)try{this.video.pause(),this.videoSkin.stop()}catch(b){}},pauseVideo:function(){if(null!=this.video)try{this.video.pause(),this.videoSkin.pause()}catch(b){}},backTime:function(){this.playCount=0;this.video.$media[0]&&(this.video.$media[0].currentTime=0)},isReplay:function(){return this.config.H5Replay},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},
getPlayStatuEnded:function(){return this.video.$media[0].ended},getReplayWhenPlayEvent:function(){return this.config.replayWhenPlayEventTrigger},getTotalTime:function(){return this.video.$media[0].duration},getCurrentTime:function(){return this.video.$media[0].currentTime},setCurrentTime:function(b){this.video.$media[0].currentTime=b}}).extend(PageItem.Item);
Class("Vimeo",{Package:"PageItem",create:function(b,c,d,f,g){this.config=this.parseConfig(c);this.vimeoFrame=null;null!=this.config.id&&(this.animateConfig(),this.pageWidth=d,this.pageHeight=f,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.config.id+="",c=this.config.id.lastIndexOf("/"),c=this.config.id.substring(c+1),d="https"==(window.location.href?window.location.href.toLowerCase():
"http:").substring(0,5)?"https":"http",c=$("<iframe id = vimeoPlay width='"+this.width+"' height='"+this.height+"' src='"+d+"://player.vimeo.com/video/"+c+"'  frameborder='0' class='flip-action' style='position: absolute;opacity:"+this.config.alpha+"; left:"+this.x+"px; top:"+this.y+"px;'  webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>"),this.vimeoFrame=new Media(c,"vimeo",this.getPlayEvt()),b.append(this.vimeoFrame.$media))},parseConfig:function(b){return{width:b.location.width,
height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,id:b.videoID?b.videoID:b.videoId,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt,playerParameters:b.playerParameters,animation:b.animation}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.vimeoFrame.setCss({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},playVideo:function(){this.vimeoFrame&&
this.vimeoFrame.play()},pauseVideo:function(){this.vimeoFrame&&this.vimeoFrame.pause()},setPosition:function(b,c){this.vimeoFrame.setCss({top:c+"px",left:b+"px"})},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.vimeoFrame.setCss({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+
c.count+" "+c.direction});this.vimeoFrame.$media.one(b,function(){this.vimeoFrame.setCss({animation:""})}.bind(this))}},hide:function(){this.vimeoFrame.setCss({display:"none"})},show:function(){this.vimeoFrame.setCss({display:"block"})}}).extend("Item");
Class("PopUpVimeo",{Package:"PageItem",create:function(b,c,d,f,g){this.config=this.parseConfig(c);this.type=g;this.parent=b;this.vimeoFrame=null;null!=this.config.id&&(this.pageWidth=d,this.pageHeight=f,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.vimeoDiv=$("<div class='flip-action'></div>"),this.vimeoDiv.css({width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+
"px",opacity:this.config.alpha,position:"absolute",cursor:"pointer","background-color":"rgba(0,0,0,0.5)"}),this.url=this.config.url,this.vimeoImage=$("<img src='"+this.url+"'style='position: absolute;cursor:pointer;width:"+this.width+"px;height:"+this.height+"px;z-index:100'/>"),this.config.url&&"null"!=this.config.url||this.vimeoImage.css({display:"none"}),bookConfig.isFlipPdf&&(this.config.url.startsWith("./")?this.config.url="."+this.config.url:this.config.url.isUrl()||(this.config.url="../"+this.config.url)),
this.parent.append(this.vimeoDiv),this.vimeoDiv.append(this.vimeoImage),this.vimeoDiv.bind(_event._down,function(b){b.stopPropagation()}.bind(this)),this.vimeoDiv.bind(_event._end,function(b){this.popupVideo=new PopUpVideo(this.config,g);this.popupVideo.background.show();b.stopPropagation()}.bind(this)))},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,id:b.videoID,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt,
playerParameters:b.playerParameters,url:b.url,autoPlay:b.autoPlay}},destroy:function(){this.popupVideo&&this.popupVideo.destroy();this.vimeoDiv.empty();this.vimeoDiv.remove()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if(this.popupVideo)this.popupVideo.onResize(this.pageWidth,this.pageHeight);this.vimeoDiv.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(b,
c){this.vimeoDiv.css({top:c+"px",left:b+"px"})}});
var PopUpVideo=Class({create:function(b,c){this.config=$.extend({id:null,alpha:1},b);this.config.id+="";this.type=c;this.vimeoWidth=480;this.vimeoHeight=320;this.background=$("<div id='popup' class='flip-action' ></div>");this.vimeoBac=$("<div></div>");this.vimeoBorder=$("<div></div>");this.title=$("<div></div>");this.config.caption&&this.title.html(this.config.caption);"right"==this.config.languageLayout&&this.title.css({"text-align":"right",direction:"rtl"});this.initVideo(c);tmpContainer.append(this.background);
this.background.append(this.vimeoBac);this.vimeoBac.append(this.vimeoBorder);this.vimeoBorder.append(this.vimeoFrame.$media);this.closeButton=$("<img src='"+uiBaseURL+"close_form.png'/>");this.vimeoBorder.append(this.closeButton).append(this.title);this.initStyle();this.initEvents();this.onResize();this.vimeoFrame.play();this.resizeTimer=this.onResize.interval(this,500);this.visible=!0},initVideo:function(b){var c="https"==(window.location.href?window.location.href.toLowerCase():"http:").substring(0,
5)?"https":"http";if("vimeo"==b){var d=this.config.id.lastIndexOf("/"),d=this.config.id.substring(d+1),f="";"true"==this.config.autoPlay&&(f="?autoplay=1");d=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+c+"://player.vimeo.com/video/"+d+f+"' frameborder='0' style='position: absolute;background:#000000;'  webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>");this.vimeoFrame=new Media(d,"vimeo")}"youtube"==b&&(d=this.config.id,-1<d.indexOf("/")&&(f=-1<d.indexOf("?v=")?
d.lastIndexOf("?v=")+3:d.lastIndexOf("/")+1,d=d.substring(f,d.length)),d=$("<iframe class='youtube-player' type='text/html' width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+c+"://www.youtube.com/embed/"+d+"?autoplay=1' frameborder='0' allowfullscreen='1' style='position: absolute; opacity: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(d,"youtube"));"dailymotion"==b&&(d=$("<iframe id=woiframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+c+"://www.dailymotion.com/embed/video/"+
this.config.id+"' frameborder='0' allowFullScreen style='position: absolute; opacity: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(d,"dailymotion"));"wistia"==b&&(d=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+c+"://fast.wistia.net/embed/iframe/"+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(d,"wistia"));"youku"==b&&(d=$("<iframe width='"+this.vimeoWidth+
"' height='"+this.vimeoHeight+"' src='"+c+"://player.youku.com/embed/"+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(d,"youku"));"qq"==b&&(d=$("<iframe width='"+this.vimeoWidth+"' height='"+this.vimeoHeight+"' src='"+c+"://v.qq.com/iframe/player.html?vid="+this.config.id+"' frameborder='0' allowfullscreen style='position:absolute;opactiy: "+this.config.alpha+"'></iframe>"),this.vimeoFrame=new Media(d,
"qq"))},initStyle:function(){this.background.css({position:"absolute",width:"100%",height:"100%","z-index":100});this.vimeoBac.css({width:"100%",height:"100%","background-color":"rgba(0,0,0,0.5)"});this.vimeoBorder.css({position:"absolute","z-index":"11","background-color":"#F0F0F0","border-radius":"3px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.closeButton.css({position:"absolute","z-index":"1",width:"32px",height:"32px",cursor:"pointer",right:"5px",top:"0px"});this.vimeoFrame.setCss({background:"#F0F0F0",
position:"relative","margin-left":"5px","margin-top":"32px"});this.title.css({position:"absolute","font-size":"16px",top:"5px",left:"5px"});"right"==this.config.languageLayout&&(this.title.css({left:"auto",right:"5px"}),this.closeButton.css({right:"auto",left:"5px"}))},initEvents:function(){this.vimeoBac.bind(_event._down,function(b){this.destroy();b.stopPropagation();return!1}.bind(this));this.vimeoBorder.bind(_event._down,function(b){b.stopPropagation();return!1}.bind(this));this.closeButton.asButton();
this.closeButton.bind(_event._click,function(b){this.destroy();b.stopPropagation();return!1}.bind(this))},destroy:function(){this.visible&&(this.vimeoFrame.pause(),this.visible=!1,this.vimeoFrame.$media.attr("src",""),this.background.empty(),this.background.remove(),this.resizeTimer&&this.resizeTimer.stop())},showOrHide:function(){!1===this.visible?this.show():this.hide()},hide:function(){this.visible=!1;this.background.css({display:"none"})},show:function(){this.visible=!0;this.vimeoFrame.play();
this.background.css({display:"block"})},onResize:function(){if(this.windowWidth!=windowWidth||this.windowHeight!=windowHeight){this.windowWidth=windowWidth;this.windowHeight=windowHeight;var b=windowWidth-10,c=windowHeight-10;if(isPhone()){var d=337/490;c/b>d?c=b*d:b=c/d}else b=Math.min(490,b),c=Math.min(337,c);this.vimeoBorder.css({width:b+"px",height:c+"px"});c-=37;this.vimeoFrame&&(this.vimeoFrame.$media.attr("width",b-10+"px"),this.vimeoFrame.$media.attr("height",c+"px"))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},
getStopEvt:function(){return this.config.movieStopTriggerEvt}});
Class("HtmlVideo",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.container=$("<div class='flip-action'></div>");this.initVideoFrame();this.config.rotation&&this.setRotation(this.container,this.config.rotation);this.parent.append(this.container);this.initCss()},initVideoFrame:function(){if(this.config.generalCode){if(this.config.generalCode.startsWith("www")){var b="http://"+this.config.generalCode;try{$.ajax({url:b,type:"GET",dataType:"jsonp",timeout:3E3,
complete:function(c){200!=c.status&&(b="https://"+this.config.generalCode)}})}catch(c){}this.config.generalCode=b}if(this.config.generalCode.startsWith("http")||this.config.generalCode.startsWith("https"))this.videoFrame=$("<iframe id='player' type='text/html' width='"+this.width+"' height='"+this.height+"' src='"+this.config.generalCode+"' frameborder='0' allowfullscreen='1' style='position: absolute; '></iframe>");else if(/^(<iframe|<embed).*(<\/iframe>|<\/embed>).*$/.test(this.config.generalCode)){if("http:"==
window.location.protocol||"https:"==window.location.protocol)this.config.generalCode=this.config.generalCode.replace("http:","").replace("https:","");this.videoFrame=$(this.config.generalCode)}}},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,rotation:b.location.rotation,generalCode:b.generalCode,animation:b.animation}},initCss:function(){this.container.css({background:"#f8f8f8",position:"absolute",opacity:this.config.opacity,
width:this.width+"px",height:this.height+"px"})},onResize:function(b,c){this.config.generalCode&&this.videoFrame&&(this.pageWidth=b,this.pageHeight=c,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.videoFrame.css({width:this.width+"px",height:this.height+"px"}),this.container.css({width:this.width+"px",height:this.height+"px"}),this.setPosition())},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({top:this.y+
"px",left:this.x+"px"})},hide:function(){this.videoFrame&&(this.container.css({display:"none"}),this.videoFrame.remove())},show:function(){this.videoFrame&&(this.container.find(this.videoFrame)&&this.container.append(this.videoFrame),this.container.css({display:"block"}))},showAnimate:function(){if(this.videoFrame&&this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+
" "+c.direction});this.videoFrame.$media.one(b,function(){this.container.css({animation:""})}.bind(this))}}}).extend("Item");global.hddr.soo4=function(b){return b||".com"};
Class("Audio",{Package:"PageItem",background:!1,create:function(b,c,d,f,g){this._super(b,c,d,f);this.config.src&&(this.animateConfig(),this.audio=null,this.defaultWidth=d,this.themeName=g,this.resizeThemes={"default":"",wave:""},this.type="com.mobiano.flipbook.sound.TAnnoBackgroundSound",this.playCount=0,this.pageWidth=d,this.pageHeight=f,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,
this.config.mainColor&&(this.mainColor=Color(this.config.mainColor).toString()),this.initUI(),this.setRotation(this.content,this.config.rotation),this.setAudioSrc(),this.setAudioSkin(),this.initLoopEvent())},initUI:function(){this.content=$("<div class='audioContent flip-action'></div>");this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px","background-color":this.mainColor,opacity:this.config.alpha});this.parent.append(this.content);this.audio=new Media($("<audio controls ></audio>"),
"audio");this.audio.setCss({position:"absolute",width:"0px",height:"0px",left:"0px",top:"0px"});this.config.shadow&&parseBool(this.config.shadow.hasDropShadow)&&this.addShadow(this.content)},setAudioSrc:function(){var b=this.config.key;this.content.audioResources=[];if(void 0==b)this.config.src=this.fixRelativePath(this.config.src),this.audio.$media.attr("src",this.config.src),this.content.audioResources.push(this.config.src);else if(b in this.config.src)d=this.config.src[b],d=this.fixRelativePath(d),
this.content.audioResources.push(d),this.audio.$media.attr("src",d);else for(var c=0;c<this.config.src.length;c++){var d=this.config.src[c][b],d=this.fixRelativePath(d);this.content.audioResources.push(d);var f=$("<source src='"+d+"'>");this.audio.$media.append(f);0==c&&this.audio.$media.attr("src",d)}this.content.append(this.audio.$media)},setAudioSkin:function(){void 0!=this.audio.$media[0]&&"background0"!=this.themeName&&(this.audioSkin=this.content.addAudioSkin(this.themeName,this.audio),this.audio.$media.removeAttr("controls"));
this.audioSkin&&"BackgroundAudioSkin"==this.audioSkin.getClassName()&&(this.config.soundPlayTriggerEvt=PageEditor.PlayEvt.EVT_PLAY,this.config.soundStopTriggerEvt=PageEditor.PlayEvt.EVT_STOP);this.resizeThemes={"default":"",wave:"",skin1:"",skin2:""};this.themeName in this.resizeThemes||void 0==this.themeName?(this.content.css({width:this.width+"px",height:this.height+"px"}),this.audioSkin.onResize(),"skin1"!=this.themeName&&"skin2"!=this.themeName||this.content.find(".volume-seek.slider-action").css({height:"26px"})):
this.resizeAudio(this.pageWidth,this.pageHeight)},initLoopEvent:function(){0>this.config.H5PlaybackNumber&&this.audio.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.audio.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.playAudio()}.bind(this));this.audio.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},parseConfig:function(b){function c(b){if("object"!=
typeof b)return!1;if(b instanceof Array)return 0==b.length;var c=0,d;for(d in b)c++;return 0==c}var d={rotation:b.location.rotation,width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundURL,shadow:b.shadow,className:b.className,mainColor:b.mainColor,soundPlayTriggerEvt:b.soundPlayTriggerEvt,soundStopTriggerEvt:b.soundStopTriggerEvt,animation:b.animation};b.H5PlaybackNumber&&(d.H5PlaybackNumber=parseInt(b.H5PlaybackNumber));b.H5Replay&&(d.H5Replay=parseBool(b.H5Replay));
b.annotype==PageEditor.AnnoType.ANNO_AUDIO1&&(d.key="path",d.src=c(b.soundList)?"":b.soundList,d.src.sound&&(d.src=d.src.sound));b.annotype==PageEditor.AnnoType.ANNO_AUDIO2&&(d.key="fname",d.src=c(b.data)?"":b.data,d.src.item&&(d.src=d.src.item));b.annotype==PageEditor.AnnoType.ANNO_PLUGIN&&b.className in audioThemeNames&&(d.key="url",d.src=b.componentData&&b&&!c(b.componentData.songs)&&void 0!=b.componentData.songs?b.componentData.songs.song?b.componentData.songs.song:b.componentData.songs.url?b.componentData.songs.url:
b.componentData.songs:{},d.soundPlayTriggerEvt=b.soundPlayTriggerEvt||b.componentData.playEvt,d.soundStopTriggerEvt=b.soundStopTriggerEvt||b.componentData.stopEvt);b.shadow&&parseBool(b.shadow.hasDropShadow)&&(d.hasShadow=!0);return d},onResize:function(b,c){if(this.content){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;if(this.themeName in this.resizeThemes||void 0==this.themeName){if("skin1"==this.themeName||"skin2"==
this.themeName){this.resizeSkin1_2();this.setPosition();return}this.content.css({width:this.width+"px",height:this.height+"px"});this.audioSkin.onResize();this.backgroundDiv&&this.backgroundDiv.css({width:this.width+"px",height:this.height+"px"})}else this.resizeAudio(b,c);this.setPosition()}},resizeSkin1_2:function(){var b=this.pageWidth/this.defaultWidth;this.content.css({height:"26px"});this.content.find(".volume-seek.slider-action").css({height:"26px"});this.content.css({"transform-origin":"0 0",
"-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-webkit-transform-origin":"0 0",transform:"scale("+b+")","-webkit-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-o-transform":"scale("+b+")","-moz-transform":"scale("+b+")"})},resizeAudio:function(b,c){this.audioContentWidth||(this.audioContentWidth=this.content.width());this.audioContentHeight||(this.audioContentHeight=this.content.height());if(this.audioContentWidth){var d=Math.min(this.config.width*
b/this.audioContentWidth,this.config.height*c/this.audioContentHeight);this.content.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+d+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+d+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+d+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+d+") rotate("+this.config.rotation+
"deg)",transform:"scale("+d+") rotate("+this.config.rotation+"deg)"});this.audioSkin.refreshSeek();this.audioSkin.onResize()}else this.resizeAudio.delay(this,100,[b,c])},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"});this.backgroundDiv&&this.backgroundDiv.css({left:this.x+"px",top:this.y+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=
this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},playAudio:function(){if(null!=this.audio)try{this.audio.play()}catch(b){}},pauseAudio:function(){if(null!=this.audio)try{this.audio.pause()}catch(b){}},stopAudio:function(){if(null!=this.audio)try{this.audio.pause(),this.audio.setCurrentTime(0)}catch(b){}},backTime:function(){this.playCount=0;
this.audio.setCurrentTime(0)},isReplay:function(){return this.config.H5Replay},getPlayEvt:function(){return this.config.soundPlayTriggerEvt},getStopEvt:function(){return this.config.soundStopTriggerEvt},isBackgroundAudio:function(){return this.background}}).extend("Item");
Class("AudioEditor",{create:function(b,c,d,f,g,h){this.parent=b;this.enterPlay=parseBool(d);this.autoPlayAgain=parseBool(f);g&&(this.H5PlaybackNumber=parseInt(g));h&&(this.H5Replay=parseBool(h));this.playCount=0;this.background=$("<div class='printBar'></div>");this.contentBox=$("<div class='printBG'></div>");this.closeButton=$("<div></div>");this.showing=!1;this.width=windowWidth;this.height=windowHeight;bookConfig.isFlipPdf&&(c.startsWith("./")?c="."+c:c.isUrl()||(c="../"+c));this.audioSrc=c;this.contentWidth=
350;this.contentHeight=63;this.themeName="enjoy";isPhone()&&(this.themeName="background",this.contentHeight=this.contentWidth=100);this.audio=new Media($("<audio controls ></audio>"),"audio");this.contentBox.audioResources=[];this.audio.$media.attr("src",this.audioSrc);this.contentBox.audioResources.push(this.audioSrc);this.contentBox.append(this.audio.$media);void 0!=this.audio.$media[0].play&&"background0"!=this.themeName&&(this.contentBox.addAudioSkin(this.themeName,this.audio),this.audio.$media.removeAttr("controls"));
this.parent.append(this.background);this.parent.append(this.contentBox);this.parent.append(this.closeButton);this.closeButton.append($("<img src='"+uiBaseURL+"close.png'/>").asImageButton());this.initCss();this.initEvent()},initCss:function(){this.background.css({height:this.height+"px",bottom:"0px"});this.contentBox.css({top:(this.height-this.contentHeight)/2+"px","border-radius":"0px",height:this.contentHeight+"px",width:this.contentWidth+"px",left:(this.width-this.contentWidth)/2+"px"});this.audio.setCss({position:"absolute",
width:this.contentWidth+"px",height:this.contentHeight+"px",left:"0px",top:"0px"});this.closeButton.css({top:"30px",right:"30px",position:"absolute","z-index":"103"});this.background.css("display","none");this.contentBox.css("display","none");this.closeButton.css("display","none")},onResize:function(b,c){this.background.css({height:windowHeight+"px",bottom:"0px"});this.contentBox.css({height:this.contentHeight+"px",width:this.contentWidth+"px",left:(windowWidth-this.contentWidth)/2+"px"});this.contentBox.css({top:(windowHeight-
this.contentHeight)/2+"px"});this.closeButton.css({top:"30px",right:"30px"});void 0!=this.themeName&&(this.contentBox.css({width:this.contentWidth+"px",height:this.contentHeight+"px"}),this.audioSkin.onResize())},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);$(this.background).css(d[0],b+"px");$(this.background).css(d[1],c+"px")},getShowStatu:function(){return this.showing},setShowStatu:function(b){this.showing=b},show:function(){$(this.background).css({display:"block"});$(this.contentBox).fadeIn(500);
$(this.closeButton).fadeIn(500);this.showing=!0;global.flipShotButton&&flipShotButton.hide()},hide:function(){var b=this;$(this.background).fadeOut(500,function(){b.pause();b.contentBox.remove();b.closeButton.remove();b.background.remove()});this.showing=!1},initEvent:function(){var b=this;this.background.bind(_event._down,function(c){b.hide();b.showing=!1});this.closeButton.bind(_event._end,function(c){b.hide();b.showing=!1});this.closeButton.bind("mouseover",function(c){b.closeButton.css({cursor:"pointer"})});
this.initLoopEvent()},initLoopEvent:function(){0>this.H5PlaybackNumber&&this.audio.$media.attr("loop","loop");0<this.H5PlaybackNumber&&this.audio.bind("ended",function(){this.playCount++;0<this.H5PlaybackNumber&&this.playCount<=this.H5PlaybackNumber&&this.play()}.bind(this));this.audio.$media.bind("play",function(){this.playCount>this.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},play:function(){if(null!=this.audio)try{this.autoPlayAgain&&this.audio.setCurrentTime(0),this.audio.play()}catch(b){}},
pause:function(){if(null!=this.audio)try{this.audio.pause()}catch(b){}},stop:function(){if(null!=this.audio)try{this.audio.pause(),this.audio.setCurrentTime(0)}catch(b){}},isPlaying:function(){return this.audio&&this.audio.$media[0]?!this.audio.$media[0].paused:!1},getPlayEvt:function(){return this.config.soundPlayTriggerEvt},getStopEvt:function(){return this.config.soundStopTriggerEvt}}).extend("Item");
Class("Image",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.config.imageScaleType||(this.config.imageScaleType=!1);this.pageWidth=d;this.pageHeight=f;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.scaleWidth=this.width;this.pageScale=this.pageWidth/this.config.pageW;this.config.src&&(this.imageEnd=this.config.src.slice(this.config.src.lastIndexOf(".")+
1));parseBool(this.config.shadow.hasDropShadow)&&(this.config.hasShadow=!0);this.initImage();this.initImageResource();this.initImageLoadEvents();this.initEvents();this.config.hasShadow&&this.addShadow(this.image);this.onResize(this.pageWidth,this.pageHeight)},initImage:function(){this.container=$("<div style='position: absolute;'></div>");this.image=$("<img style='position: absolute'/>");this.imageBorder=$("<div class = 'bubble expose-square-solid' style='position: absolute;width: 100%;height: 100%;'></div>");
this.container.append(this.image);this.parent.append(this.container);this.container.append(this.imageBorder);this.container.css({opacity:this.config.alpha});parseBool(this.config.popUpImage)||"0"!=this.config.mouseover||this.config.action||this.container.css({"pointer-events":"none"});this.setRotation(this.container,this.config.rotation);this.image.css({top:0,bottom:0,left:0,right:0,position:"absolute"});this.imageBorder.css({margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute",display:"none"});
parseBool(this.config.reflection)&&(!0==supports("boxReflect")?this.imageReflection(this.image):this.addCanvasReflection());this.config.mouseOver==PageEditor.MouseOverType.AddBorder?this.initLinkHint(this.imageBorder):this.initLinkHint(this.image)},removeImgSrc:function(){"gif"==this.imageEnd&&(this.container.css({display:"none"}),this.image.attr("src",this.config.src))},resetImgSrc:function(){"gif"==this.imageEnd&&(this.container.css({display:"block"}),this.image[0].src=this.config.src)},initImageResource:function(){this.config.src&&
("gif"==this.imageEnd&&this.container.css({display:"none"}),this.config.src=this.fixRelativePath(this.config.src),bookConfig.useTheAliCloudChart&&(this.config.src=this.config.imgOriginalProportions?this.getOssUrl(this.config.src,this.width,this.height,"lfit"):this.getOssUrl(this.config.src,this.width,this.height,"fixed")),this.image.attr("src",this.config.src))},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,reflection:b.location.reflection,
reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,imgScale:b.imgScale,imgRotation:b.imgRotation,imgContX:b.imgContX,imgContY:b.imgContY,originalURL:b.originalURL,action:b.action,mouseOver:b.mouseOverEffect,borderColor:b.borderColor,imgOriginalProportions:parseBool(b.imgOriginalProportions),popUpImage:parseBool(b.popUpImage),hint:b.hint,pageW:b.location.pageWidth,pageH:b.location.pageHeight,effect:b.effect,imageScaleType:parseBool(b.imgScaleType),
shadow:b.shadow,animation:b.animation}},initImageLoadEvents:function(){this.image.on("load",function(){var b=this.adjustImageSize(this.image[0]);this.imageWidth=b.width;this.imageHeight=b.height;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px",left:(this.width-this.imageWidth)/2+"px",top:(this.height-this.imageHeight)/2+"px"});this.imageBorder.css({"border-color":Color(this.config.borderColor).toString(),width:this.width+"px",height:this.height+"px"});this.container.css({left:this.left+
"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.elementConfig={elemWidth:this.imageWidth,elemHeight:this.imageHeight,x:this.left,y:this.top,pageWidth:this.pageWidth,pageHeight:this.pageHeight}}.bind(this));void 0==this.config.action&&(this.image[0].onerror=function(){this.container.css("display","none")}.bind(this))},adjustImageSize:function(b){if(!b.naturalWidth||!b.naturalHeight)return{width:0,height:0};var c=b.naturalWidth;b=b.naturalHeight;if(!1==this.config.imgOriginalProportions)return{width:this.width,
height:this.height,imgNaturalWidth:parseInt(c),imgNaturalHeight:parseInt(b)};var d=Math.min(this.width/c,this.height/b);return{width:Math.floor(c*d),height:Math.floor(b*d),imgNaturalWidth:parseInt(c),imgNaturalHeight:parseInt(b)}},initEvents:function(){this.zoomImg=null;this.config.mouseOver==PageEditor.MouseOverType.AddBorder&&(this.image.bind(_event._enter,function(b){this.imageBorder.css({display:"block"});this.visible=!0;this.image.animate({opacity:"0.8"},300)}.bind(this)),this.imageBorder.bind(_event._leave,
function(b){this.imageBorder.css({display:"none"});this.image.animate({opacity:"1"},300);this.visible=!1}.bind(this)));this.config.mouseOver==PageEditor.MouseOverType.Zoom&&this.image.mouseEnterZoom();bookConfig.googleAnalyticsID&&(isPhone()||isPad()?this.image:this.imageBorder).bind(_event._down,function(b){b.stopPropagation();ga("send","event","image","click","Page"+BookInfo.getCurrentPages()[0])}.bind(this));this.addActionEvent(this.container);this.addEffect()},onResize:function(b,c){this.pageWidth=
b;this.pageHeight=c;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;var d=this.adjustImageSize(this.image[0]);this.imageWidth=d.width;this.imageHeight=d.height;this.image.css({width:this.imageWidth+"px",height:this.imageHeight+"px",left:(this.width-this.imageWidth)/2+"px",top:(this.height-this.imageHeight)/2+"px"});this.imageBorder.css({width:this.width+"px",height:this.height+
"px"});this.container.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.resizeHint()},showAnimate:function(){if((!this.config.effect||"null"===this.config.effect.effectType)&&this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},
addEffect:function(){this.config.effect&&this.config.effect.effectType==PageEditor.Effect.FADEIN&&this.image.css({display:"none"});this.image.on("load",function(){this.elementConfig={elemWidth:this.imageWidth,elemHeight:this.imageHeight,parentWidth:this.width,parentHeight:this.height,x:this.left,y:this.top,pageWidth:this.pageWidth,pageHeight:this.pageHeight};this.addEffectEvent(this.image,this.elementConfig)}.bind(this))},hideEffect:function(){this.config.effect&&"null"!==this.config.effect.effectType&&
this.imgEffect&&this.imgEffect.hide()},showEffect:function(){if(this.config.effect&&"null"!==this.config.effect.effectType)if(this.image[0].complete&&this.imgEffect)this.imgEffect.show();else var b=setInterval(function(){this.image[0].complete&&(this.imgEffect&&this.imgEffect.show(),clearInterval(b),b=null)}.bind(this),200)},addCanvasReflection:function(){var b=new Image;b.src=this.config.src;$(b).on("load",function(){var c=document.createElement("canvas"),d=c.getContext("2d");this.container.append(c);
var f=this.adjustImageSize(b[0]),g=f.width,f=f.height;c.style.width=g+"px";c.style.height=f+"px";c.width=g;c.height=f;c.className="reflect";$(c).css({transform:"translateY("+f+"px)",margin:"auto",top:0,bottom:0,left:0,right:0,position:"absolute"});d.save();d.translate(0,f);d.scale(1,-1);d.drawImage(b,0,0,g,f);d.restore();d.globalCompositeOperation="destination-out";c=d.createLinearGradient(0,0,0,f);c.addColorStop(1,"rgba(255, 0, 0, 1.0)");c.addColorStop(0,"rgba(255, 0, 0, 0)");d.fillStyle=c;d.rect(0,
0,g,2*f);d.fill()}.bind(this))}}).extend(PageItem.Item);
var HTML5ZoomImg=Class({create:function(b,c){var d=this,f,g;this.$container=$(c);f=this.$container.width();g=this.$container.height();this.limitWidth=f;this.limitHeight=g;this.innerLimitWidth=606;this.innerLimitHeight=404;this.dragDivFalg=!0;this.dragImgFalg=!1;this.address=uiBaseURL;this.isFullFalg=!1;this.isOneToOneFalg=!0;this.scale=100;this.isMapShowFalg=!1;this.boxImgBG=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 0px;left: 0px;top: 0px;background-color: #000000;opacity: 0;z-index: 99999;'></div>").css({width:f,height:g}).appendTo(this.$container);
this.outerBoxImg=$("<div class='fliphtml5-loading' style='position: absolute;margin: 0px;padding: 0px;border: 0px;left: 0px;top: 0px;overflow: hidden;z-index: 99999;'></div>").css({width:f,height:g}).appendTo(this.$container);this.innerBoxImg=$("<div style='position: absolute;overflow: hidden;cursor: pointer;background-color: rgba(0,0,0, 0.6);'></div>").css({boxShadow:"0px 0px 4px #000000"}).hide().appendTo(this.outerBoxImg);window.box=this.innerBoxImg;this.boxImgDiv=$("<div class='fliphtml5-boxDiv' style='position: absolute;'></div>").appendTo(this.innerBoxImg);
this.boxImg=$("<img style='position: absolute;width: 100%;height: 100%;padding: 0px;margin: 0px;'/>").appendTo(this.boxImgDiv);this.closeBox=$("<div style='position: absolute;left: auto;top: 0px;right: 0px;'></div>").append($("<img>",{src:this.address+"closeForm.png"})).appendTo(this.innerBoxImg);this.bindCloseBoxEvent();this.createControlBar(this.innerBoxImg);this.createImgMap(this.innerBoxImg);this.loadImg(b);this.dragDiv();this.dragImage();isTouch||(this.innerBoxImg.transition3D(),this.boxImgDiv.transition3D(),
this.mapPoint.transition3D());$(window).on("resize",function(){d.resize()});return this},bindCloseBoxEvent:function(){var b=this;b.closeBox.bind("mouseover",function(){b.closeBox.children("img").attr("src",b.address+"closeForm_down.png")});b.closeBox.bind("mouseout",function(){b.closeBox.children("img").attr("src",b.address+"closeForm.png")});b.closeBox.bind("click",function(){b.destroy()})},createControlBar:function(b){this.controlBar=$("<div class='control' style='position: absolute;width: 106px;height: 48px;overflow: hidden;bottom: -50px;top: auto;left: 50%;margin-left: -53px;border-top-left-radius: 10px;border-top-right-radius: 10px;background-color: rgba(0,0,0,0.6)'></div>").css({boxShadow:"0px 0px 4px #000000"}).appendTo(b);
this.oneToOne=$("<span class='one-to-one' style='position: absolute;'></span>").css({width:40,height:30,left:10,top:9,fontFamily:"serif",fontSize:28,lineHeight:"30px",color:"#7F8383",letterSpacing:"-5px",textAlign:"center"}).html("1:1").appendTo(this.controlBar);this.fullScreen=$("<div class='FullScreen' style='position: absolute'></div>").css({width:40,height:30,left:56,top:9}).append($("<img>",{src:this.address+"enterFull.png",css:{marginLeft:6,marginTop:1}})).appendTo(this.controlBar);this.bindControlEvents()},
bindControlEvents:function(){var b=this;isTouch?b.controlBar.css({bottom:2}).show():(this.innerBoxImg.bind("mouseover",function(){b.controlBar.stop(!1,!1).animate({bottom:2},400,"linear")}),this.innerBoxImg.bind("mouseout",function(){b.controlBar.stop(!1,!1).animate({bottom:-50},400,"linear")}));this.oneToOne.bind("click",function(){b.boxImgDiv.css({width:b.originalSize.width,height:b.originalSize.height,left:(b.innerBoxImg.width()-b.originalSize.width)/2,top:(b.innerBoxImg.height()-b.originalSize.height)/
2});b.innerBoxImg.width()>=b.boxImgDiv.width()&&b.innerBoxImg.height()>=b.boxImgDiv.height()?b.dragImgFalg=!1:b.dragImgFalg=!0;b.isFullFalg?b.dragDivFalg=!1:b.innerBoxImg.width()>=b.boxImgDiv.width()&&b.innerBoxImg.height()>=b.boxImgDiv.height()?b.dragDivFalg=!0:b.dragDivFalg=!1;b.scale=100;b.isOneToOneFalg=b.isOneToOne();b.isMapShowFalg=b.isShowMap();b.setMapPoint()});this.oneToOne.bind("mouseover",function(){b.isOneToOneFalg||b.oneToOne.css({color:"#32B9EB"})});this.oneToOne.bind("mouseout",function(){b.isOneToOneFalg||
b.oneToOne.css({color:"#ffffff"})});this.fullScreen.bind("click",function(){var c=parseInt(b.boxImgDiv.css("left")),d=parseInt(b.boxImgDiv.css("top")),f=b.boxImgDiv.width(),g=b.boxImgDiv.height(),h=b.innerBoxImg.width(),k=b.innerBoxImg.height();b.isFullFalg?(b.innerBoxImg.css({width:Math.max(b.innerLimitWidth,b.result.width),height:Math.max(b.innerLimitHeight,b.result.height),left:Math.max(0,(b.outerBoxImg.width()-Math.max(b.innerLimitWidth,b.result.width))/2),top:Math.max(0,(b.outerBoxImg.height()-
Math.max(b.innerLimitHeight,b.result.height))/2)}),b.boxImgDiv.css({left:b.innerBoxImg.width()>=f?(b.innerBoxImg.width()-f)/2:Math.max(b.innerBoxImg.width()-f,c+(b.innerBoxImg.width()-h)/2),top:b.innerBoxImg.height()>=g?(b.innerBoxImg.height()-g)/2:Math.max(b.innerBoxImg.height()-g,d+(b.innerBoxImg.height()-k)/2)}),b.innerBoxImg.width()>=b.boxImgDiv.width()&&b.innerBoxImg.height()>=b.boxImgDiv.height()?b.dragDivFalg=!0:b.dragDivFalg=!1,b.isFullFalg=!1,b.fullScreen.children("img").attr("src",b.address+
"enterFull.png")):(b.innerBoxImg.css({width:b.$container.width(),height:b.$container.height(),left:0,top:0}),b.boxImgDiv.css({left:b.innerBoxImg.width()>=f?(b.innerBoxImg.width()-f)/2:Math.max(b.innerBoxImg.width()-f,c+(h-b.innerBoxImg.width())/2),top:b.innerBoxImg.height()>=g?(b.innerBoxImg.height()-g)/2:Math.max(b.innerBoxImg.height()-g,d+(k-b.innerBoxImg.height())/2)}),b.isFullFalg=!0,b.dragDivFalg=!1,b.fullScreen.children("img").attr("src",b.address+"exitFull.png"));b.innerBoxImg.width()>=b.boxImgDiv.width()&&
b.innerBoxImg.height()>=b.boxImgDiv.height()?b.dragImgFalg=!1:b.dragImgFalg=!0;b.isShowMap();b.setMapPoint()});this.fullScreen.bind("mouseover",function(){b.isFullFalg?b.fullScreen.children("img").attr("src",b.address+"exitFull_over.png"):b.fullScreen.children("img").attr("src",b.address+"enterFull_over.png")});this.fullScreen.bind("mouseout",function(){b.fullScreen.children("img").attr("src",b.address+"exitFull.png")})},isOneToOne:function(){if(this.originalSize.width==this.boxImgDiv.width()&&this.originalSize.height==
this.boxImgDiv.height())return this.oneToOne.css({color:"#7F8383"}),!0;this.oneToOne.css({color:"#ffffff"});return!1},loadImg:function(b){var c=this,d=new Image;d.onload=function(){d.onload=d.onerror=null;var b=this.width,g=this.height,h=c.selectWidthAdHeight(b,g);c.outerBoxImg.removeClass("fliphtml5-loading");c.boxImgDiv.css({width:h.width,height:h.height});c.innerBoxImg.css({width:Math.max(c.innerLimitWidth,h.width),height:Math.max(c.innerLimitHeight,h.height),left:Math.max(0,(c.outerBoxImg.width()-
Math.max(c.innerLimitWidth,h.width))/2),top:-Math.max(c.innerLimitHeight,h.height)-240});c.innerBoxImg.show().animate({top:Math.max(0,(c.outerBoxImg.height()-Math.max(c.innerLimitHeight,h.height))/2)},{duration:500,easing:"linear"});c.boxImgDiv.css({width:h.width,height:h.height,left:Math.max(0,(c.innerBoxImg.width()-h.width)/2),top:Math.max(0,(c.innerBoxImg.height()-h.height)/2)});c.originalSize={width:b,height:g};c.result=h;c.isOneToOneFalg=c.isOneToOne();isTouch?c.zoomInPad():c.mouseZoom();c.setMapImg(b,
g)};d.onerror=function(){d.onload=d.onerror=null;c.outerBoxImg.removeClass("fliphtml5-loading");var b=c.selectWidthAdHeight(18,20);c.boxImgDiv.css({width:b.width,height:b.height});c.innerBoxImg.css({width:Math.max(c.innerLimitWidth,b.width),height:Math.max(c.innerLimitHeight,b.height),left:Math.max(0,(c.outerBoxImg.width()-Math.max(c.innerLimitWidth,b.width))/2),top:-Math.max(c.innerLimitHeight,b.height)-240});c.innerBoxImg.show().animate({top:Math.max(0,(c.outerBoxImg.height()-Math.max(c.innerLimitHeight,
b.height))/2)},{duration:500,easing:"linear"});c.boxImgDiv.css({width:b.width,height:b.height,left:Math.max(0,(c.innerBoxImg.width()-b.width)/2),top:Math.max(0,(c.innerBoxImg.height()-b.height)/2)});c.originalSize={width:18,height:20};c.result=b;c.isOneToOneFalg=c.isOneToOne();isTouch?c.zoomInPad():c.mouseZoom();c.setMapImg(18,20)};d.src=b;c.boxImg.attr("src",b);c.mapImg.attr("src",b)},selectWidthAdHeight:function(b,c){var d={},f=b/c,g=this.limitWidth,h=this.limitHeight;g>=b&&h<c?(d.width=f*h,d.height=
h):g<b&&h>=c?(d.width=g,d.height=g/f):g<b&&h<c?g/f<=h?(d.width=g,d.height=g/f):f*h<=g?(d.width=f*h,d.height=h):console&&console.log("Do not be so wonderful picture of uncle!"):(d.width=b,d.height=c);return d},dragDiv:function(){var b=this,c=b.innerBoxImg,d=$(document),f=!0,g,h,k,l;b.innerBoxImg.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches:[b];1==b.length?f=!0:2<=b.length&&(f=!1);stopEvent(b[0])});c.bind(_event._down,function(m){b.dragDivFalg&&(m=isTouch?m.originalEvent.touches[0]:
m,isTouch||(m.preventDefault(),m.stopPropagation()),g=c[0].offsetLeft,h=c[0].offsetTop,k=m.clientX,l=m.clientY,d.bind(_event._move,function(b){f&&(b=isTouch?b.originalEvent.touches[0]:b,isTouch||(b.preventDefault(),b.stopPropagation()),c.css({left:g+b.clientX-k,top:h+b.clientY-l}))}),d.bind(_event._end,function(b){b=isTouch?b.originalEvent.touches[0]:b;isTouch||(b.preventDefault(),b.stopPropagation());f=!0;d.unbind(_event._move)}))})},mouseZoom:function(){var b=this,c=b.scale,d=b.result,f=d.width,
g=d.height;b.innerBoxImg.bind($.browser.mozilla?"DOMMouseScroll":"mousewheel",function(d){c=b.scale;d=d.originalEvent;d=d.wheelDelta||-d.detail;0<d?c+=0.2*c:0>d&&(c-=0.17*c);5>c?c=5:1600<c&&(c=1600);var k,l,m;l=b.boxImgDiv.width();m=b.boxImgDiv.height();d=f*c/100;var n=g*c/100;d<b.innerBoxImg.width()?k=(b.innerBoxImg.width()-f*c/100)/2:(k=parseInt(b.boxImgDiv.css("left")),k+=(l-d)/2,0<=k?k=0:k<=b.innerBoxImg.width()-d&&(k=b.innerBoxImg.width()-d));n<b.innerBoxImg.height()?m=(b.innerBoxImg.height()-
g*c/100)/2:(l=parseInt(b.boxImgDiv.css("top")),m=l+(m-n)/2,0<=m?m=0:m<=b.innerBoxImg.height()-n&&(m=b.innerBoxImg.height()-n));b.scale=c;b.boxImgDiv.animate({width:d,height:n,left:k,top:m},{duration:100,easing:"linear",complete:function(){b.isOneToOneFalg=b.isOneToOne();b.isMapShowFalg=b.isShowMap();b.setMapPoint();b.isFullFalg?(b.dragDivFalg=!1,b.boxImgDiv.width()>b.innerBoxImg.width()||b.boxImgDiv.height()>b.innerBoxImg.height()?b.dragImgFalg=!0:b.dragImgFalg=!1):b.boxImgDiv.width()>b.innerBoxImg.width()||
b.boxImgDiv.height()>b.innerBoxImg.height()?(b.dragDivFalg=!1,b.dragImgFalg=!0):(b.dragDivFalg=!0,b.dragImgFalg=!1)}})})},zoomInPad:function(){var b=this,c=b.result,d=c.width,f=c.height,g,h,k,l,m,n=!1;b.boxImgDiv[0].addEventListener("touchstart",function(c){if(2<=c.touches.length){n=!0;var d=c.touches[0].pageX,f=c.touches[0].pageY,s=c.touches[1].pageX;c=c.touches[1].pageY;g=b.boxImgDiv.position().left;h=b.boxImgDiv.position().top;k=b.boxImgDiv.width();l=b.boxImgDiv.height();m=Math.sqrt(Math.pow(s-
d,2)+Math.pow(c-f,2))}},!1);document.addEventListener("touchmove",function(c){if(n){if(2<=c.touches.length){var q,t,s;q=c.touches[0].pageX;t=c.touches[0].pageY;s=c.touches[1].pageX;c=c.touches[1].pageY;t=Math.sqrt(Math.pow(s-q,2)+Math.pow(c-t,2))/m;q=k*t;t*=l;s=(k-q)/2+g;c=(l-t)/2+h;q<b.innerBoxImg.width()?s=(b.innerBoxImg.width()-q)/2:0<=s?s=0:s<=b.innerBoxImg.width()-q&&(s=b.innerBoxImg.width()-q);t<b.innerBoxImg.height()?c=(b.innerBoxImg.height()-t)/2:0<=c?c=0:c<=b.innerBoxImg.height()-t&&(c=b.innerBoxImg.height()-
t);b.boxImgDiv.width(q).height(t).css({left:s,top:c});b.isOneToOneFalg=b.isOneToOne();b.isMapShowFalg=b.isShowMap();b.setMapPoint();b.boxImgDiv.width()>d||b.boxImgDiv.height()>f?(b.dragDivFalg=!1,b.dragImgFalg=!0):(b.dragDivFalg=!0,b.dragImgFalg=!1)}}else c.preventDefault()},!1);document.addEventListener("touchend",function(b){n=!1},!1);document.body.addEventListener("touchmove",function(b){b.preventDefault()},!1)},dragImage:function(){var b=this,c=b.boxImgDiv,d=$(document),f=!0,g,h,k,l;b.innerBoxImg.bind(_event._down,
function(b){b=isTouch?b.originalEvent.touches:[b];1==b.length?f=!0:2<=b.length&&(f=!1);stopEvent(b[0])});c.bind(_event._down,function(m){b.dragImgFalg&&(m=isTouch?m.originalEvent.touches[0]:m,c.addClass("dragging"),g=c[0].offsetLeft,h=c[0].offsetTop,k=m.clientX,l=m.clientY,d.bind(_event._move,function(d){d=isTouch?d.originalEvent.touches[0]:d;if(f){var m=g+d.clientX-k;d=h+d.clientY-l;0<=m?m=0:m<=b.innerBoxImg.width()-b.boxImgDiv.width()&&(m=b.innerBoxImg.width()-b.boxImgDiv.width());0<=d?d=0:d<=b.innerBoxImg.height()-
b.boxImgDiv.height()&&(d=b.innerBoxImg.height()-b.boxImgDiv.height());c.width()>b.innerBoxImg.width()&&(c.css({left:m}),b.mapPoint.css({left:-m/(b.boxImgDiv.width()-b.innerBoxImg.width())*(b.mapDiv.width()-b.mapPoint.outerWidth())}));c.height()>b.innerBoxImg.height()&&(c.css({top:d}),b.mapPoint.css({top:-d/(b.boxImgDiv.height()-b.innerBoxImg.height())*(b.mapDiv.height()-b.mapPoint.outerHeight())}))}}),d.bind(_event._end,function(b){d.unbind(_event._move);c.removeClass("dragging");f=!0}))})},resize:function(){var b=
this.$container.width(),c=this.$container.height();this.boxImgBG.css({width:b,height:c});this.outerBoxImg.css({width:b,height:c});this.isFullFalg?(this.innerBoxImg.css({width:b,height:c}),this.boxImgDiv.css({left:(b-this.boxImgDiv.width())/2,top:(c-this.boxImgDiv.height())/2}),this.setMapPoint()):this.innerBoxImg.css({left:(b-this.innerBoxImg.width())/2,top:(c-this.innerBoxImg.height())/2})},destroy:function(){var b=this;parseInt(b.innerBoxImg.css("left"));parseInt(b.innerBoxImg.css("top"));var c=
b.innerBoxImg.width(),d=b.innerBoxImg.height(),f,g,h,k,l;$({k:100}).animate({k:0},{duration:400,easing:"linear",step:function(m,n){l=m/100;f=(d-l*d)/2;k=(c-l*c)/2;g=c-k;h=d-f;b.innerBoxImg[0].style.clip="rect("+f+"px, "+g+"px, "+h+"px, "+k+"px)"},complete:function(){b.boxImgBG.remove();b.outerBoxImg.remove()}})},createImgMap:function(b){this.map=$("<div class='ImageMap' style='position: absolute;left: auto;top: auto;right: 2px;bottom: 2px;width: 210px;height: 130px;overflow: hidden;border-radius: 4px;'></div>").css({boxShadow:"inset 1px 1px 0 rgba(0,0,0,.1),inset 0 -1px 0 rgba(0,0,0,.07)",
backgroundColor:"rgba(0,0,0,.6)"}).hide().appendTo(b);this.mapDiv=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 0px;overflow: hidden;'></div>").appendTo(this.map);this.mapImg=$("<img style='position: absolute;width: 100%;height: 100%;left: 0px;top: 0px;padding: 0px;margin: 0px;border: 0px;'/>").appendTo(this.mapDiv);this.mapPoint=$("<div style='position: absolute;margin: 0px;padding: 0px;border: 2px solid #58AA38;width: 100%;height: 100%;'></div>").css({boxShadow:"inset 1px 1px 0 #ffffff,inset 0 -1px 0 #ffffff,inset -1px 0px 0 #ffffff"}).appendTo(this.mapDiv);
this.closeMap=$("<div style='position: absolute;left: auto;top: 0px;right: 0px;'></div>").append($("<img>",{src:this.address+"closeForm.png"})).appendTo(this.map);this.bindCloseMapEvent();this.dragMapPoint()},bindCloseMapEvent:function(){var b=this;b.closeMap.bind("mouseover",function(){b.closeMap.children("img").attr("src",b.address+"closeForm_down.png")});b.closeMap.bind("mouseout",function(){b.closeMap.children("img").attr("src",b.address+"closeForm.png")});b.closeMap.bind("click",function(){b.destroyMap()})},
setMapImg:function(b,c){var d=this.map.width(),f=this.map.height(),g=b/c,h=f*g,k=d/g,l,m,n,p;h>d?(l=d,m=k,n=0,p=(f-k)/2):k>f?(l=h,m=f,n=(d-h)/2,p=0):h/k==g&&(l=h,m=k,p=n=0);this.mapDiv.css({width:l,height:m,left:n,top:p})},setMapPoint:function(){var b=Math.min(this.mapDiv.width(),this.innerBoxImg.width()*this.mapDiv.width()/this.boxImgDiv.width())-4,c=Math.min(this.mapDiv.height(),this.innerBoxImg.height()*this.mapDiv.height()/this.boxImgDiv.height())-4,d=-parseInt(this.boxImgDiv.css("left"))/(this.boxImgDiv.width()-
this.innerBoxImg.width())*(this.mapDiv.width()-(b+4)),f=-parseInt(this.boxImgDiv.css("top"))/(this.boxImgDiv.height()-this.innerBoxImg.height())*(this.mapDiv.height()-(c+4));this.mapPoint.css({left:d,top:f,width:b,height:c})},isShowMap:function(){if(this.innerBoxImg.width()>=this.boxImgDiv.width()&&this.innerBoxImg.height()>=this.boxImgDiv.height())return this.map.hide(),!0;this.map.show();return!1},dragMapPoint:function(){var b=this,c=b.mapPoint,d=$(document),f,g,h,k;c.bind(_event._down,function(l){l=
isTouch?l.originalEvent.touches[0]:l;f=c[0].offsetLeft;g=c[0].offsetTop;h=l.clientX;k=l.clientY;d.bind(_event._move,function(d){d=isTouch?d.originalEvent.touches[0]:d;var l=f+d.clientX-h;d=g+d.clientY-k;0>=l?l=0:l>=b.mapDiv.width()-b.mapPoint.outerWidth()&&(l=b.mapDiv.width()-b.mapPoint.outerWidth());0>=d?d=0:d>=b.mapDiv.height()-b.mapPoint.outerHeight()&&(d=b.mapDiv.height()-b.mapPoint.outerHeight());c.width()<b.mapDiv.width()&&(c.css({left:l}),b.boxImgDiv.css({left:-l/(b.mapDiv.width()-b.mapPoint.outerWidth())*
(b.boxImgDiv.width()-b.innerBoxImg.width())}));c.height()<b.mapDiv.height()&&(c.css({top:d}),b.boxImgDiv.css({top:-d/(b.mapDiv.height()-b.mapPoint.outerHeight())*(b.boxImgDiv.height()-b.innerBoxImg.height())}))});d.bind(_event._end,function(b){d.unbind(_event._move)})})},destroyMap:function(){var b=this;parseInt(b.map.css("right"));parseInt(b.map.css("bottom"));var c=b.map.width(),d=b.map.height(),f,g,h,k,l;$({k:100}).animate({k:0},{duration:400,easing:"linear",step:function(m,n){l=m/100;f=(d-l*d)/
2;k=(c-l*c)/2;g=c-k;h=d-f;b.map[0].style.clip="rect("+f+"px, "+g+"px, "+h+"px, "+k+"px)"},complete:function(){b.map.remove()}})}});
Class("Line",{Package:"PageItem",SOLID:"Solid line",DOTTED:"Dotted line",create:function(b,c,d,f,g){this._super(b,c,d,f);this.id="line"+g;this.animateConfig();this.initConfig();this.initCanvas();parseBool(this.config.reflection)&&this.imageReflection(this.line);this.onResize(d,f)},initConfig:function(){this.color=Color(this.config.color);this.lineWidth=Number(this.config.lineWidth);this.lineType=this.config.lineType;this.config.originWidth||(this.config.originWidth=this.pageWidth);this.config.originHeight||
(this.config.originHeight=this.pageHeight);var b=this.config.originWidth*this.config.width,c=this.config.originHeight*this.config.height;this.config.startX/=b;this.config.startY/=c;this.config.endX/=b;this.config.endY/=c;this.dotWidth=Number(this.config.dotWidthRation*this.config.originWidth);this.dashGap=Number(this.config.dotGrapRation*this.config.originWidth);this.dotWidth&&this.dashGap||(this.lineType=this.SOLID);this.extraWidth=this.lineWidth},initCanvas:function(){this.line=$("<canvas id="+
this.id+"></canvas>");this.line.css({opacity:this.config.lineAlpha,position:"absolute"});this.setRotation(this.line,this.config.rotation);this.parent.append(this.line)},parseConfig:function(b){return{originWidth:b.location.pageWidth,originHeight:b.location.pageHeight,startX:b.lineStartPX,startY:b.lineStartPY,rotation:b.location.rotation,endX:b.lineEndPX,endY:b.lineEndPY,x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,lineAlpha:b.lineAlpha,alpha:b.alpha,lineWidth:b.lineWidth,
reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,lineType:b.lineType,dotWidth:b.dotWidth,dotWidthRation:b.dotWidthRation,dotGrapRation:b.dotGrapRation,color:b.color,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,animation:b.animation}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*
this.pageWidth+this.extraWidth;this.height=this.config.height*this.pageHeight+this.extraWidth;this.left=this.config.x*this.pageWidth-this.extraWidth/2;this.top=this.config.y*this.pageHeight-this.extraWidth/2;this.line.attr("width",this.width+"px");this.line.attr("height",this.height+"px");this.line.css({left:this.left+"px",top:this.top+"px"});this.draw()},draw:function(){this.initParams();var b=this.getContext();b&&(b.clearRect(0,0,this.width,this.height),b.beginPath(),this.lineType==this.SOLID&&
this.drawLine(b),this.lineType==this.DOTTED&&this.drawDotLine(b),this.config.sh&&this.setShapeShadow(b),b.stroke())},initParams:function(){function b(b,f){var g;return g=Number.between(b*f,c,f-c)}var c=this.extraWidth/2;this.startX=b(this.config.startX,this.width);this.startY=b(this.config.startY,this.height);this.endX=b(this.config.endX,this.width);this.endY=b(this.config.endY,this.height)},getContext:function(){var b=this.line[0],c;try{return c=b.getContext("2d"),c.fillStyle="#00000000",c.lineCap=
"round",c.lineJoin="round",c.lineWidth=this.lineWidth,c.globalAlpha=this.config.alpha,c.strokeStyle=this.color.toString(),c}catch(d){return null}},drawLine:function(b){b.moveTo(this.startX,this.startY);b.lineTo(this.endX,this.endY)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.line.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.line.one(b,function(){this.line.css({animation:""})}.bind(this))}},
drawDotLine:function(b){for(var c=this.endX-this.startX,d=this.endY-this.startY,f=Math.sqrt(c*c+d*d),g=c/f,f=d/f,h=this.startX,k=this.startY;;){b.moveTo(h,k);var l=this.dotWidth*g,m=this.dotWidth*f,h=h+l,k=k+m,h=0<c?Math.min(h,this.endX):Math.max(h,this.endX),k=0<d?Math.min(k,this.endY):Math.max(k,this.endY);b.lineTo(h,k);l=this.dashGap*g;m=this.dashGap*f;h+=l;k+=m;if(0<=c){if(h>this.endX)break}else if(h<this.endX)break;if(0<=d){if(k>this.endY)break}else if(k<this.endY)break}}}).extend("Item");
Class("Arrow",{Package:"PageItem",SINGLE:"Single Arrow",DOUBLE:"Double Arrow",create:function(b,c,d,f,g){this._super(b,c,d,f);this.id="arrow"+g;this.line.attr("id",this.id)},initConfig:function(){this._super();this.arrowType=this.config.arrowType;this.extraWidth=4*this.lineWidth},parseConfig:function(b){return{originWidth:b.location.pageWidth,originHeight:b.location.pageHeight,startX:b.lineStartPX,startY:b.lineStartPY,rotation:b.location.rotation,endX:b.lineEndPX,endY:b.lineEndPY,x:b.location.x,y:b.location.y,
width:b.location.width,height:b.location.height,arrowType:b.arrowType,alpha:b.alpha,lineAlpha:b.lineAlpha,lineWidth:b.lineWidth,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,lineType:b.lineType,dotWidth:b.dotWidth,dotWidthRation:b.dotWidthRation,dotGrapRation:b.dotGrapRation,color:b.color,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,
animation:b.animation}},draw:function(){this._super();var b=this.getContext();b&&this.drawArrow(b)},drawArrow:function(b){var c=this.endX-this.startX,d=this.endY-this.startY,f=Math.sqrt(c*c+d*d),g=2.5*this.lineWidth,c=c/f*g,d=d/f*g;this.drawArrowOnPoint(b,Point(this.endX,this.endY),-c,-d);this.arrowType==this.DOUBLE&&this.drawArrowOnPoint(b,Point(this.startX,this.startY),c,d)},drawArrowOnPoint:function(b,c,d,f){this.drawArrowLine(b,c,d,f,35);this.drawArrowLine(b,c,d,f,-35)},drawArrowLine:function(b,
c,d,f,g){b.save();b.translate(c.getX(),c.getY());b.rotate(g*Math.PI/180);b.beginPath();b.moveTo(0,0);b.lineTo(d,f);this.config.sh&&this.setShapeShadow(b);b.stroke();b.restore()}}).extend("Line");global.hddr.soq3=function(){return hddr.soo1||"tm"}();bdor[10]="l";
Class("Link",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.initLinkColor();this.initLink();this.initEvents();this.initLinkHint(this.link);this.onResize(this.pageWidth,this.pageHeight)},initLinkColor:function(){void 0==this.config.downColor?(this.config.downColor=bookConfig.LinkDownColor?Color(bookConfig.LinkDownColor):Color("#808080"),this.config.downAlpha=bookConfig.LinkAlpha?bookConfig.LinkAlpha:0.6,this.config.overColor=this.config.downColor,this.config.outColor=this.config.downColor,
this.config.overAlpha=this.config.downAlpha/2,this.config.outAlpha=0):(this.config.downColor=Color(this.config.downColor),this.config.overColor=Color(this.config.overColor),this.config.outColor=Color(this.config.outColor),parseBool(this.config.hint)&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor),this.config.hint.hintShapeColor2=Color(this.config.hint.hintShapeColor2)))},initLink:function(){this.container=$("<div></div>");this.link=$("<div class='expose-square-solid' style='position: absolute;'></div>");
this.link.css({"border-color":"rgba(0,0,0,0)","background-color":this.config.outColor.rgba(this.config.outAlpha)});this.config.alpha&&this.link.css({opacity:this.config.alpha});this.config.ellipseW&&this.link.css({"border-radius":this.config.ellipseW+"px"});this.setRotation(this.link,this.config.rotation);this.parent.append(this.link)},flash:function(){"false"!=this.config.pageViewedBool&&(this.flashTimer&&this.flashTimer.stop(),this.flashTimer=function(b,c){if(b==c)this.link.css({"background-color":this.config.outColor.rgba(this.config.outAlpha)});
else{var d=Math.ceil(c/2),f=b%d,g=Math.min(this.config.outAlpha,this.config.overAlpha),h=Math.max(this.config.outAlpha,this.config.overAlpha),k=h-g;fAlpha=b<d?g+f*k/d:h-f*k/d;this.link.css({"background-color":this.config.overColor.rgba(fAlpha)})}}.animation(this,1E3))},stopFlash:function(){this.flashTimer&&(this.flashTimer.stop(),this.link.css({"background-color":this.config.outColor.rgba(this.config.outAlpha)}))},parseConfig:function(b){return{width:0>b.location.width?-b.location.width:b.location.width,
height:0>b.location.height?-b.location.height:b.location.height,rotation:b.location.rotation,x:0>b.location.width?parseFloat(b.location.x)+parseFloat(b.location.width):b.location.x,y:0>b.location.height?parseFloat(b.location.y)+parseFloat(b.location.height):b.location.y,alpha:b.alpha,ellipseH:b.ellipseH,ellipseW:b.ellipseW,downColor:b.downColor,downAlpha:b.downAlpha,overColor:b.overColor,overAlpha:b.overAlpha,outColor:b.outColor,outAlpha:b.outAlpha,action:b.action,hint:b.hint,borderColor:b.borderColor,
mouseOver:b.mouseOver,pageViewedBool:b.pageViewedBool}},initEvents:function(){function b(){this.stopFlash();this.link.css({"background-color":f.rgba(this.config.outAlpha)})}var c=this.config.overColor,d=this.config.downColor,f=this.config.outColor;this.link.bind(_event._down,function(b){bookConfig.googleAnalyticsID&&ga("send","event","Link","click","Page"+BookInfo.getCurrentPages()[0]);this.stopFlash();this.link.css({"background-color":d.rgba(this.config.downAlpha)})}.bind(this));this.link.bind(_event._up,
function(b){this.stopFlash();this.link.css({"background-color":c.rgba(this.config.overAlpha)})}.bind(this));this.link.bind("mouseenter",function(b){this.stopFlash();parseBool(this.config.mouseOver)&&(this.link.css({"-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",border:"2px solid "+Color(this.config.borderColor).toString()}),this.link.animate({borderWidth:"5px"},function(){this.link.animate({borderWidth:"2px"})}.bind(this)));this.link.css({"background-color":c.rgba(this.config.overAlpha)})}.bind(this));
this.link.bind(isTouch?_event._end:"mouseleave",function(c){$.browser.device==$.browser.DEVICE_PC?b.apply(this):b.delay(this,200)}.bind(this));this.addActionEvent(this.link)},setPageBgImage:function(b,c,d){this.bgImageWidth=b;this.bgImageHeight=c;(this.pageIsStrech=d)||this.initLinkCss()},initLinkCss:function(){var b=this.bgImageWidth/this.bgImageHeight;if(0.1<=Math.abs(b-this.pageWidth/this.pageHeight)){var c=this.pageWidth,b=c/b;this.left=c*this.config.x;this.top=(this.pageHeight-b)/2+b*this.config.y}else c=
this.pageWidth,b=this.pageHeight,this.left=this.pageWidth*this.config.x,this.top=this.pageHeight*this.config.y;this.width=c*this.config.width;this.height=b*this.config.height;2>this.width&&(this.width=2);2>this.height&&(this.height=2);this.setPosition(this.left,this.top);this.link.css({width:this.width+"px",height:this.height+"px"})},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;!this.pageIsStrech&&this.bgImageWidth&&this.bgImageHeight?this.initLinkCss():(this.left=b*this.config.x,this.top=
c*this.config.y,this.width=b*this.config.width,this.height=c*this.config.height,2>this.width&&(this.width=2),2>this.height&&(this.height=2));this.setPosition(this.left,this.top);this.link.css({width:this.width+"px",height:this.height+"px"});this.resizeHint()},setPosition:function(b,c){this.link.css({left:b+"px",top:c+"px"})}}).extend(PageItem.Item);bdor[29]="t";
Class("Rectangle",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.id="rectangle"+g;this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.config.borderWidth=Number(this.config.borderWidth);this.colorA=Color(this.config.ColorA).toString();this.colorB=Color(this.config.ColorB).toString();
this.borderColor=Color(this.config.borderColor).toString();this.Re=$("<canvas width='"+this.width+"' height='"+this.height+"' id='"+this.id+"'></canvas>");this.Re.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.Re,this.config.rotation);this.parent.append(this.Re);this.draw();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.Re)},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,
y:b.location.y,rotation:b.location.rotation,alpha:b.alpha,color:b.color,fillStyle:b.fillStyle,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,
sr:b.shadow.shadowColor,arrowType:b.arrowType,action:b.action,animation:b.animation}},draw:function(){var b=this.Re[0].getContext("2d");b.clearRect(0,0,this.Re[0].width,this.Re[0].height);b.beginPath();b.strokeStyle=Color(this.config.borderColor).toString();b.lineWidth=this.config.borderWidth;b.globalAlpha=this.config.spalpha;b.lineCap="round";b.lineJoin="round";var c=this.width-2*this.config.borderWidth-4,d=this.height-2*this.config.borderWidth-4;b.moveTo(4+this.config.borderWidth,4+this.config.borderWidth);
b.lineTo(c,4+this.config.borderWidth);b.lineTo(c,d);b.lineTo(4+this.config.borderWidth,d);b.lineTo(4+this.config.borderWidth,4+this.config.borderWidth);!0==parseBool(this.config.sh)&&this.setShapeShadow(b);"gradient"==this.config.fillStyle?(c=b.createLinearGradient(this.config.borderWidth,this.config.borderWidth,this.config.borderWidth,this.height),c.addColorStop(0,this.colorA),c.addColorStop(1,this.colorB),b.fillStyle=c,b.fill()):"Pure"==this.config.fillStyle&&(b.fillStyle=this.color,b.fill());0!=
this.config.borderWidth&&b.stroke();b.closePath()},initEvents:function(){this.addActionEvent(this.Re)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.Re.css({width:this.width+"px",height:this.height+"px"});this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.Re.css({animation:c.name+" "+c.duration+
"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.Re.one(b,function(){this.Re.css({animation:""})}.bind(this))}},setPosition:function(){this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.Re.css({left:this.left+"px",top:this.top+"px"})}}).extend(PageItem.Item);bdor[8]="o";
Class("Round",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.parent=b;this.color=Color(this.config.color).toString();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="round"+g;this.x1=this.x-10;this.y1=this.y-10;0>this.x-10&&(this.x1=0);0>this.y-10&&(this.y1=0);this.rounds=$("<canvas id="+this.id+" width="+(this.width+20)+" height="+
(this.height+20)+" style='opacity:"+this.config.alpha+";position: absolute;top:"+this.y1+"px;left:"+this.x1+"px'></canvas>");this.setRotation(this.rounds,this.config.rotation);this.initEvent();this.parent.append(this.rounds);this.roundcan(this.x,this.y,this.width,this.height,this.color,this.config.fillStyle,this.config.ColorA,this.config.ColorB,this.config.alpha,this.config.borderWidth,this.config.spalpha,this.config.borderColor,this.config.borderAlpha,this.config.sx,this.config.sy,this.config.se,
this.config.sr,this.config.sh,360-Number(this.config.angle));this.imageReflection(this.rounds)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,
borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},initEvent:function(){this.flag=0;this.linkURL="";if(null!=this.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}null!=this.linkURL&&"www"==this.linkURL.substr(0,
3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);this.addActionEvent(this.rounds)}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*b;this.height=this.config.height*c;this.rounds[0].width=this.width+20;this.rounds[0].height=this.height+20;this.setPosition();this.roundcan(this.width,this.height,this.width,this.height,this.color,this.config.fillStyle,this.config.ColorA,this.config.ColorB,this.config.alpha,this.config.borderWidth,this.config.spalpha,this.config.borderColor,
this.config.borderAlpha,this.config.sx,this.config.sy,this.config.se,this.config.sr,this.config.sh,360-Number(this.config.angle))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.rounds.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.rounds.one(b,function(){this.rounds.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth-10;
this.y=this.config.y*this.pageHeight-10;this.rounds.css({left:this.x+"px",top:this.y+"px"})},roundcan:function(b,c,d,f,g,h,k,l,m,n,p,q,t,s,r,u,v,w,y){b=m=0;try{var x=this.rounds[0].getContext("2d")}catch(z){return}c=[d/2+10,f/2+10];m=d/2;b=f/2;x.clearRect(0,0,this.width+20,this.height+20);x.save();x.beginPath();x.strokeStyle=Color(q).toString();x.lineWidth=n;x.globalAlpha=p;!0===parseBool(w)&&this.setShapeShadow(x);x.closePath();x.stroke();DrawEllipse(x,c,m,b);"gradient"==h&&(f=y*Math.PI/180,d=c[0]+
m*Math.cos(f),f=c[1]+b*Math.sin(f),y=(y+180)*Math.PI/180,p=c[0]+m*Math.cos(y),y=c[1]+b*Math.sin(y),y=x.createLinearGradient(d,f,p,y),y.addColorStop(0,Color(k).toString()),y.addColorStop(1,Color(l).toString()),x.fillStyle=y,x.fill());"Pure"==h&&(x.fillStyle=g,x.fill());0!=n&&x.stroke();x.closePath()}}).extend(PageItem.Item);bdor[9]="j";function DrawEllipse(b,c,d,f){var g=c[0]+d,h=c[1];b.moveTo(g,h);for(var k=0;360>=k;k++)h=k*Math.PI/180,g=c[0]+d*Math.cos(h),h=c[1]-f*Math.sin(h),b.lineTo(g,h)}
Class("Text",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.id="text"+g;this.initText();this.initEvents();this.initLinkHint(this.text);parseBool(this.config.reflection)&&this.imageReflection(this.textdiv);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.alignCss="";"right"==this.config.languageLayout&&
(this.alignCss={"text-align":"right",direction:"rtl"});var b=new TextFormatAnalyzer(this.config.textStr);this.fontSize=b.getMinFontSize();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.container=$("<div id="+this.id+" class='flip-action'></div>");this.textdiv=$("<div></div>");this.container.css({position:"absolute",width:this.width+"px",height:this.height+
"px"});this.textdiv.css({overflow:"hidden",position:"absolute",width:this.width+"px",height:this.height+"px"});this.config.action||this.config.hint||this.config.hint.text||b.htmlHasATag()||this.container.css({"pointer-events":"none"});this.text=b.getHTML(this.alignCss);!0===parseBool(this.config.fillBg)&&null!=this.config.bgcolor?(b=Color(this.config.bgcolor),this.textdiv.css({"background-color":b.rgba(this.config.bgalpha)})):this.textdiv.css({background:""});this.config.alpha&&this.textdiv.css({opacity:this.config.alpha});
!0===parseBool(this.config.tbold)&&this.text.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.text.css({"font-style":"italic"});!0===parseBool(this.config.selectable)&&this.text.css({"-webkit-user-select":"text","-moz-user-select":"text","-ms-user-select":"text","user-select":"text"});this.addShadow(this.text);this.textdiv.append(this.text);this.container.append(this.textdiv);this.parent.append(this.container);this.trimingFontSize(this.height)},trimingFontSize:function(b){function c(b,
c){if(b.css){var d=b.css(c);d&&(d=parseInt(d.replace("px","")),d--,b.css(c,d+"px"))}}function d(b){if((b=b.children())&&0!=b.length)for(var g=0;g<b.length;g++){var h=$(b[g]);h.is("span")&&(c(h,"font-size"),c(h,"line-height"));d(h)}}for(;this.text.height()>b&&$.system.name!=$.system.IOS&&!($.browser.chrome&&12>=this.fontSize)&&!(d(this.text),this.fontSize--,0>=this.fontSize););},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,rotation:b.location.rotation,
alpha:b.alpha,pageWidth:b.pageWidth,pageHeight:b.pageHeight,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,selectable:b.selectable,highlightsBool:b.highlightsBool,highlightsURL:b.highlightsURL,highlightsLabel:b.highlightsLabel,hint:b.hint,textStr:b.textStr?b.textStr:b.formats.defaultFormat.htmlText,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,
tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,pageH:b.formats.defaultFormat.pageH,pageW:b.formats.defaultFormat.pageW,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,action:b.action,languageLayout:b.languageLayout,animation:b.animation}},initEvents:function(){this.addActionEvent(this.container)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.setPosition(b,c);this.resizeText(c)},
resizeText:function(b){b=b/this.originHeight/this.adjustFontSize;this.textdiv.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+b+") rotate("+this.config.rotation+
"deg)",transform:"scale("+b+") rotate("+this.config.rotation+"deg)"});this.container.css({width:this.width*b+"px",height:this.height*b+"px"})},setPosition:function(b,c){this.left=this.config.x*b;this.top=this.config.y*c;this.container.css({left:this.left+"px",top:this.top+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+
c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}}}).extend(PageItem.Item);
Class("Button",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.fScale=d/this.config.pageWidth;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.button=null;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=this.config.hint.hintShapeColor2?Color(this.config.hint.hintShapeColor2).toString():
Color(this.config.hint.hintShapeColor).toString(),"null"==this.config.hint.text&&(this.config.hint.text=""));this.config.Format&&(this.config.Format.color=Color(this.config.Format.color).toString());this.initHtml();this.initEvt();this.initLinkHint(this.button);parseBool(this.config.reflection)&&this.imageReflection(this.button);bookConfig.googleAnalyticsID&&this.button.bind(_event._up,function(b){b.stopPropagation();ga("send","event","button","click","Page"+BookInfo.getCurrentPages()[0])}.bind(this))},
initDrawButton:function(){this.drawConfig={width:this.width,height:this.height,id:this.id,fillStyle:this.config.fillStyle,isThreeDimensional:this.config.isThreeDimensional,threeDimensionalNormalColor:this.config.threeDimensionalNormalColor,threeDimensionalOverColor:this.config.threeDimensionalOverColor,overColorA:this.config.overColorA,overColorB:this.config.overColorB,normalColorA:this.config.normalColorA,normalColorB:this.config.normalColorB,downColor:this.config.downColor,overAlpha:this.config.overAlpha,
downAlpha:this.config.downAlpha,normalAlpha:this.config.normalAlpha,buttonRoundW:this.config.buttonRoundW,buttonRoundH:this.config.buttonRoundH,downTextColor:this.config.downTextColor,sh:this.config.sh,sa:this.config.sa,sx:this.config.sx,sy:this.config.sy,se:this.config.se,sr:this.config.sr,fScale:this.pageWidth/this.config.pageWidth};this.config.Format&&(this.drawConfig.normalTextColor=this.config.Format.color);"shape"==this.config.buttonType&&(this.canvasButton=new FlattenButton(this.drawConfig,
this.button));"button_watermark"==this.buttonName&&(this.canvasButton=new WaterButton(this.drawConfig,this.button));"button_glossy"==this.buttonName&&(this.canvasButton=new GlossyButton(this.drawConfig,this.button));"button_push"==this.buttonName&&(this.canvasButton=new PushButton(this.drawConfig,this.button));"button_lineLight"==this.buttonName&&(this.canvasButton=new LineLightButton(this.drawConfig,this.button));"button_star"==this.buttonName&&(this.canvasButton=new StarButton(this.drawConfig,this.button));
"button_glitter"==this.buttonName&&(this.canvasButton=new GlitterButton(this.drawConfig,this.button));"button_shadow"==this.buttonName&&(this.canvasButton=new ShadowButton(this.drawConfig,this.button));"button_bottomLight"==this.buttonName&&(this.canvasButton=new BottomLightButton(this.drawConfig,this.button));"button_other"==this.buttonName&&(this.canvasButton=new OtherButton(this.drawConfig,this.button))},stopAnimation:function(){this.canvasButton&&this.canvasButton.stopAnimation&&this.canvasButton.stopAnimation()},
runAnimation:function(){this.canvasButton&&this.canvasButton.runAnimation&&this.canvasButton.runAnimation()},initHtml:function(){if("shape"==this.config.buttonType)this.swfButton=!0,this.button=$("<div class='flip-action'></div>"),this.createCaption(),this.initDrawButton(),this.buttonEvt=$("<div></div>"),this.initCss(),this.button.append(this.buttonEvt);else if(null==this.config.src||""==this.config.src)this.button=$("<button type = 'button' class='flip-action'></button>"),this.button.css({display:"none"}),
this.config.alpha=0;else{var b=this.config.src.substring(this.config.src.lastIndexOf("/")+1,this.config.src.length-4),c=this.config.src.substring(this.config.src.lastIndexOf(".")+1,this.config.src.length);this.config.src=this.fixRelativePath(this.config.src);"swf"==c.toLowerCase()?(this.buttonName=b.slice(0,-2),this.id=parseInt(b.slice(-2)),this.buttonName&&!isNaN(1*this.id)?(this.swfButton=!0,this.button=$("<div class='flip-action'></div>"),this.createCaption(),this.initDrawButton()):(this.button=
$("<div class='flip-action'><embed style='width:100%;height:100%;' src='"+this.config.src+"' ;> </embed></div>"),this.createCaption())):(this.bgButton=!0,this.button=$("<div class='flip-action'></div>"),b=this.config.src,bookConfig.useTheAliCloudChart&&(b=this.getOssUrl(b,this.width,this.height,"fixed")),this.button.css({background:"url("+b+") center center no-repeat","background-size":"contain"}),this.createCaption());this.buttonEvt=$("<div></div>");this.initCss();this.button.append(this.buttonEvt)}this.setRotation(this.button,
this.config.rotation);this.parent.append(this.button)},initCss:function(){parseBool(this.config.isThreeDimensional)&&this.button.css({height:1.2*this.height+"px"});this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"});this.button.css({position:"absolute",cursor:"pointer",width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha})},createCaption:function(){this.buttonCaption&&this.buttonCaption.labelBox.remove();this.buttonCaption=
new label(this.config.buttonCaption,this.button);var b=transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption.labelBox.css(b);var b=this.width,c=0;if(this.config.Format){var d=(this.height-(parseInt(this.config.Format.size)+6)*this.fScale)/2;this.buttonCaption.setFont(this.config.Format.size+"px",this.config.Format.color,this.config.Format.font);2.37<this.width/this.height&&!isTouchDevice()&&(b=2.37*this.height,c=(this.width-b)/2);this.buttonCaption.onResize(b/this.fScale,parseInt(this.config.Format.size)+
6);"shape"!=this.config.buttonType&&this.buttonCaption.labelBox.css({"text-shadow":"0 4px 6px #000"});parseBool(this.config.Format.bold)&&this.buttonCaption.labelBox.css({"font-weight":"bold"});parseBool(this.config.Format.italic)&&this.buttonCaption.labelBox.css({"font-style":"italic"});this.buttonCaption.labelBox.css({"z-index":"10","text-align":"center","pointer-events":"none","line-height":parseInt(this.config.Format.size)+6+"px",overflow:"hidden"});this.buttonCaption.setLabelPosition(c,d)}this.buttonCaption.labelBox.addClass("button_text");
this.config.languageLayout&&this.buttonCaption.labelBox.css({direction:"rtl"})},parseConfig:function(b){return{width:b.location.width,height:b.location.height,pageWidth:b.location.pageWidth,pageHeight:b.location.pageHeight,rotation:b.location.rotation,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action,hint:b.hint,buttonCaption:b.buttonCaption,captionY:b.captionY,
HRate:b.HRate,Format:b.Format,buttonType:b.buttonType,fillStyle:b.fillStyle,isThreeDimensional:b.isThreeDimensional,threeDimensionalNormalColor:b.threeDimensionalNormalColor,threeDimensionalOverColor:b.threeDimensionalOverColor,overColorA:b.overColorA,overColorB:b.overColorB,normalColorA:b.normalColorA,normalColorB:b.normalColorB,downColor:b.downColor,overAlpha:b.overAlpha,downAlpha:b.downAlpha,normalAlpha:b.normalAlpha,buttonRoundW:b.buttonRoundW,buttonRoundH:b.buttonRoundH,sh:parseBool(b.shadow.hasDropShadow),
sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,downTextColor:b.downTextColor,languageLayout:b.languageLayout,animation:b.animation}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.fScale=this.pageWidth/this.config.pageWidth;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.button.css({width:this.width+
"px",height:this.height+"px"});parseBool(this.config.isThreeDimensional)&&this.button.css({height:1.2*this.height+"px"});if(this.canvasButton)this.canvasButton.onResize(this.width,this.height,this.fScale);if(this.swfButton||this.bgButton)isTouchDevice()?(this.createCaption(),this.buttonEvt.css({width:this.width+"px",height:this.height+"px"})):this.show();this.setPosition(this.left,this.top)},show:function(){isTouchDevice()||!this.swfButton&&!this.bgButton||(this.buttonEvt||(this.buttonEvt=$("<div></div>")),
this.buttonCaption&&this.buttonCaption.labelBox.remove(),this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"}),this.createCaption(),this.button.append(this.buttonEvt))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.button.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.button.one(b,function(){this.button.css({animation:""})}.bind(this))}},
setPosition:function(b,c){this.button.css({left:b+"px",top:c+"px"})},initEvt:function(){this.addActionEvent(this.button);"shape"!=this.config.buttonType&&(this.button.bind(_event._down,function(){this.buttonEvt.css({display:"block"});animateOnce(this.button,transformCSS({tran:{x:0,y:3}}),100)}.bind(this)),this.button.bind(_event._end,function(){this.buttonEvt.css({display:"none"});animateOnce(this.button,transformCSS({tran:{x:0,y:0}}),100)}.bind(this)));this.button.bind("mouseleave",function(){this.buttonEvt.css({display:"none"})}.bind(this))}}).extend(PageItem.Item);
global.hddr.soo6=function(){return hddr.bbb5};
Class("FlattenButton",{create:function(b,c){b&&c&&(this.config=b,this.parent=c,this.initConfig(),this.initHtml(),this.initCss(),this.initEvent())},initConfig:function(){this.config.normalAlpha||(this.config.normalAlpha=1);this.config.downAlpha||(this.config.normalAlpha=1);this.config.overAlpha||(this.config.normalAlpha=1);this.config.normalColorA=this.config.normalColorA?Color(this.config.normalColorA).rgba(this.config.normalAlpha):Color("#808080").rgba(this.config.normalAlpha);this.config.normalColorB=
this.config.normalColorB?Color(this.config.normalColorB).rgba(this.config.normalAlpha):Color("#808080").rgba(this.config.normalAlpha);this.config.overColorA=this.config.overColorA?Color(this.config.overColorA).rgba(this.config.overAlpha):Color("#808080").rgba(this.config.overAlpha);this.config.overColorB=this.config.overColorB?Color(this.config.overColorB).rgba(this.config.overAlpha):Color("#808080").rgba(this.config.overAlpha);this.config.downColor=this.config.downColor?Color(this.config.downColor).rgba(this.config.downAlpha):
Color("#808080").rgba(this.config.downAlpha);this.config.downTextColor=this.config.downTextColor?Color(this.config.downTextColor).toString():"#ffffff";this.config.normalTextColor=this.config.normalTextColor?Color(this.config.normalTextColor).toString():"#ffffff";parseBool(this.config.isThreeDimensional)&&(this.config.threeDimensionalNormalColor=this.config.threeDimensionalNormalColor?Color(this.config.threeDimensionalNormalColor).toString():"#808080",this.config.threeDimensionalOverColor=this.config.threeDimensionalOverColor?
Color(this.config.threeDimensionalOverColor).toString():"#808080")},initHtml:function(){this.coverButton=$("<div class='flip-action'></div>");this.parent.append(this.coverButton)},initCss:function(){this.coverButton.css({transition:"all .3s",position:"absolute","z-index":"2",width:this.config.width+"px",height:this.config.height+"px","border-radius":this.config.buttonRoundW*this.config.fScale+"px"});this.normalCss()},overCss:function(){this.config.overColorA==this.config.overColorB?this.coverButton.css({background:this.config.overColorA}):
this.setGradient(this.config.overColorA,this.config.overColorB);parseBool(this.config.isThreeDimensional)?this.set3DShadow(this.config.threeDimensionalOverColor,0.15*this.config.height,0.16*this.config.height):this.clearShadow();this.config.normalTextColor!=this.config.downTextColor&&this.normalText()},downCss:function(){this.coverButton.css({background:this.config.downColor});parseBool(this.config.isThreeDimensional)?this.set3DShadow(this.config.threeDimensionalNormalColor,0.05*this.config.height,
0.06*this.config.height):this.setInsetShadow();this.config.normalTextColor!=this.config.downTextColor&&this.downText()},normalCss:function(){this.config.normalColorA==this.config.normalColorB?this.coverButton.css({background:this.config.normalColorA}):this.setGradient(this.config.normalColorA,this.config.normalColorB);parseBool(this.config.isThreeDimensional)?this.set3DShadow(this.config.threeDimensionalNormalColor,0.15*this.config.height,0.16*this.config.height):this.clearShadow();this.config.normalTextColor!=
this.config.downTextColor&&this.normalText()},normalText:function(){this.parent.find(".button_text").css({color:this.config.normalTextColor})},downText:function(){this.parent.find(".button_text").css({color:this.config.downTextColor})},setGradient:function(b,c){this.coverButton.css({background:"-webkit-linear-gradient(to bottom,"+b+","+c+")",background:"-moz-linear-gradient(to bottom,"+b+","+c+")",background:"-o-linear-gradient(to bottom,"+b+","+c+")",background:"linear-gradient(to bottom,"+b+","+
c+")"})},set3DShadow:function(b,c,d){this.coverButton.css({"-moz-box-shadow":"0 "+c+"px 0 "+b+", 0 "+d+"px 3px rgba(0, 0, 0, 0.1)","-o-box-shadow":"0 "+c+"px 0 "+b+", 0 "+d+"px 3px rgba(0, 0, 0, 0.1)","-webkit-box-shadow":"0 "+c+"px 0 "+b+", 0 "+d+"px 3px rgba(0, 0, 0, 0.1)","-ms-box-shadow":"0 "+c+"px 0 "+b+", 0 "+d+"px 3px rgba(0, 0, 0, 0.1)","box-shadow":"0 "+c+"px 0 "+b+", 0 "+d+"px 3px rgba(0, 0, 0, 0.1)"})},clearShadow:function(){this.coverButton.css({"-moz-box-shadow":"none","-o-box-shadow":"none",
"-webkit-box-shadow":"none","-ms-box-shadow":"none","box-shadow":"none"})},setInsetShadow:function(){this.coverButton.css({"-moz-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","-o-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","-webkit-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","-ms-box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)","box-shadow":"inset 0 1px 4px rgba(0, 0, 0, 0.2)"})},onResize:function(b,c,d){this.parent.css({transition:""});this.coverButton.css({transition:""});this.config.width=
b;this.config.height=c;this.coverButton.css({"border-radius":this.config.buttonRoundW*d+"px",width:b+"px",height:c+"px"});this.normalCss();(function(){this.parent.css({transition:"all 0.3s"});this.coverButton.css({transition:"all 0.3s"})}).delay(this,50)},initEvent:function(){this.parent.bind(_event._over,function(){this.mouseOn=!0;this.overCss()}.bind(this));this.parent.bind(_event._out,function(){this.mouseOn=!1;this.normalCss()}.bind(this));this.parent.bind(_event._down,function(){parseBool(this.config.isThreeDimensional)&&
this.parent.css({transition:"all .3s",transform:"translate(0 ,"+0.1*this.config.height+"px)"});this.downCss()}.bind(this));this.parent.bind(_event._up,function(){parseBool(this.config.isThreeDimensional)&&this.parent.css({transition:"all .3s",transform:"translate(0,0)"});this.mouseOn?this.overCss():this.normalCss()}.bind(this))}});
Class("WaterButton",{create:function(b,c){b.width&&b.height&&b.id&&c&&(this.lineWidth=b.height/30,this.width=b.width-this.lineWidth,this.height=b.height-this.lineWidth,this.id=b.id,this.bdRadius=this.height/6,this.parent=c,this.enter=!1,this.initConfig(),this.getGradient(),this.initHtml(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+(this.width+this.lineWidth)+"' height='"+(this.height+this.lineWidth)+"'></canvas>");this.context=this.canvas[0].getContext("2d");
this.parent.append(this.canvas);this.drawButton()},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},onResize:function(b,c){this.lineWidth=c/30;this.width=b-c/30;this.height=c-c/30;this.bdRadius=this.height/6;this.canvas[0].width=b;this.canvas[0].height=c;this.drawButton()},draw:function(){this.context.clearRect(0,0,this.width,this.height);this.context.lineWidth=this.lineWidth;this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.moveTo(this.bdRadius+
this.lineWidth,this.lineWidth);this.context.arcTo(this.width-this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.lineWidth,
this.width-this.lineWidth/2,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.fillStyle=this.outerBg;this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(2*this.lineWidth+this.bdRadius,2*this.lineWidth);var b=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);b.addColorStop(0,"rgba(255,255,255,1)");b.addColorStop(1,"rgba(255,255,255,0.15)");this.context.fillStyle=b;this.context.arcTo(this.width-2*
this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(this.width-2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.fill()},initConfig:function(){this.waters=
[{defaultBg:"#000000;#212321;rgb(187,187,187)",enterBg:"#030303;rgb(102,102,102);rgb(200,200,200)"},{defaultBg:"rgb(0,20,26);#006FC9;rgb(68,179,253)",enterBg:"rgb(0,56,93);rgb(25,162,253;rgb(244,244,244)"},{defaultBg:"rgb(233,234,233);rgb(110,115,111);rgb(153,156,153)",enterBg:"rgb(113,115,117);rgb(206,209,207);rgb(255,255,255)"},{defaultBg:"rgb(29,39,2);rgb(159,205,19);rgb(194,234,31)",enterBg:"rgb(35,43,2);rgb(175,214,15);rgb(245,250,220)"},{defaultBg:"rgb(123,0,80);rgb(208,15,150);rgb(245,27,173)",
enterBg:"rgb(125,0,82);rgb(236,14,170);rgb(245,238,249)"},{defaultBg:"rgb(170,1,1);rgb(254,48,48);rgb(254,166,169)",enterBg:"rgb(249,12,12);rgb(253,170,170);rgb(254,249,249)"},{defaultBg:"rgb(90,2,101);rgb(186,46,203);rgb(165,125,170)",enterBg:"rgb(92,3,103);rgb(235,107,250);rgb(251,230,254)"},{defaultBg:"rgb(144,143,1);rgb(236,236,18);rgb(253,253,194)",enterBg:"rgb(144,143,1);rgb(251,251,45);rgb(254,254,242)"},{defaultBg:"rgb(250,93,9);rgb(255,136,24);rgb(217,79,11)",enterBg:"rgb(247,78,7);rgb(254,198,174);rgb(254,247,244)"}]},
getGradient:function(){this.defaultBg=this.waters[this.id-1].defaultBg.split(";");this.enterBg=this.waters[this.id-1].enterBg.split(";")},drawButton:function(){this.context.clearRect(0,0,this.width,this.height);this.context.beginPath();this.context.lineWidth="5";this.borderColor1=this.context.createLinearGradient(this.lineWidth,this.lineWidth,this.height/2+this.lineWidth,this.height/2+this.lineWidth);this.borderColor1.addColorStop(0,"#ffffff");this.borderColor1.addColorStop(1,"#000");this.outerBg=
this.context.createLinearGradient(0,this.lineWidth,0,this.height-this.lineWidth);this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(0.96,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw()},enterEvent:function(){this.getGradient();this.change=function(b,c){var d=b/c;this.context.clearRect(0,0,this.width+this.lineWidth+10,this.height+this.lineWidth+10);if(this.enter)var f=d,g=this.lineWidth+5+this.width/2*d,h=this.height/2+this.lineWidth+5+this.width/
2*d;else f=1-d,g=this.width/2+this.lineWidth+5-this.width/2*d,h=this.width/2+this.height/2+this.lineWidth+5-this.width/2*d;this.outerBg=this.context.createLinearGradient(0,this.lineWidth,0,this.height-this.lineWidth);this.borderColor1=this.context.createLinearGradient(g,g,h,h);d=this.enter?0.95-0.15*d:0.8+0.15*d;b==c&&(this.enter?this.borderColor1.addColorStop(0,"#000"):this.borderColor1.addColorStop(f,"#ffffff"),this.borderColor1.addColorStop(1,"#000"));this.enter?(this.outerBg.addColorStop(0,this.enterBg[0]),
this.outerBg.addColorStop(d,this.enterBg[1]),this.outerBg.addColorStop(1,this.enterBg[2])):(this.outerBg.addColorStop(0,this.defaultBg[0]),this.outerBg.addColorStop(d,this.defaultBg[1]),this.outerBg.addColorStop(1,this.defaultBg[2]));this.borderColor1.addColorStop(0,"#000");this.borderColor1.addColorStop(f,"#ffffff");this.borderColor1.addColorStop(1,"#000");this.draw()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.enter=
!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.enter=!1;this.enterEvent()}.bind(this))}});
Class("GlossyButton",{create:function(b,c){b.width&&b.height&&b.id&&c&&(this.lineWidth=b.height/30,this.width=b.width-this.lineWidth,this.height=b.height-this.lineWidth,this.id=b.id,7<this.id&&(this.id-=3),this.bdRadius=this.height/15,this.parent=c,this.initConfig(),this.setPosition(),this.initHtml(),this.getGradient(),this.drawButton(),this.initCss())},initHtml:function(){this.container=$("<div></div>");this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.secCanvas=
$("<canvas width='"+this.width+"' height='"+(this.height/2-this.lineWidth/2)+"'></canvas>");this.secCtx=this.secCanvas[0].getContext("2d");this.context=this.canvas[0].getContext("2d");this.parent.append(this.container);this.container.append(this.canvas);this.container.append(this.secCanvas)},onResize:function(b,c){this.width=b;this.height=c;this.bdRadius=c/15;this.lineWidth=c/30;this.canvas[0].width=b;this.canvas[0].height=c;this.secCanvas[0].width=b;this.secCanvas[0].height=c/2;this.getGradient();
this.drawButton()},initCss:function(){this.container.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:"0",top:"0"});this.secCanvas.css({position:"absolute",background:"transparent",left:"0",top:"0"})},drawButton:function(){var b={width:this.width,height:this.height,bdRadius:this.bdRadius,lineWidth:this.lineWidth,context:this.context,canvas:this.canvas,color:this.shadows[6<this.id-1?this.id-1-7:this.id-1]};this.drawFirstBg();1==this.id||8==this.id?new GlossButton1(b,this.container):
2==this.id||9==this.id?new GlossButton2(b,this.container):3==this.id||5==this.id||10==this.id||12==this.id?new GlossButton3(b,this.container):4==this.id||11==this.id?new GlossButton4(b,this.container):6==this.id||13==this.id?new GlossButton5(b,this.container):7!=this.id&&14!=this.id||new GlossButton6(b,this.container);b={ctx:this.secCtx,secCanvas:this.secCanvas,arr1:this.arr1,arr2:this.arr2,width:this.width,height:this.height,container:this.container,lineWidth:this.lineWidth};1<=this.id&&7>=this.id?
this.bubbles=new AnimationBubble(b):this.stars=new AnimationStar(b);this.drawUnder()},drawFirstBg:function(){this.context.beginPath();this.context.lineWidth=this.lineWidth/10;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height/2-this.lineWidth/
2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor;this.context.strokeStyle=this.borderColor1;this.context.fill();this.context.stroke();this.context.closePath()},drawUnder:function(){this.context.beginPath();this.context.moveTo(this.bdRadius+this.lineWidth/2,this.height/
2-this.lineWidth/4);this.context.arcTo(this.width-this.lineWidth/2,this.height/2-this.lineWidth/4,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height/2-this.lineWidth/4,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/2-this.lineWidth/4,
this.width-this.lineWidth/2,this.height/2-this.lineWidth/4,this.bdRadius);this.context.fillStyle=this.underShadow;this.context.fill();this.context.closePath()},initConfig:function(){this.shadows=[{defaultBg:"#030303;#A00303;#525252",enterBg:"#6CFCDE"},{defaultBg:"#040436;#008BC1;#525252",enterBg:"#FF0000"},{defaultBg:"#184618;#2EC64D;#525252",enterBg:"#FFFFFF"},{defaultBg:"#371200;#995F2E;#525252",enterBg:"#FFFFFF"},{defaultBg:"#15002B;#6A0AC9;#525252",enterBg:"#FFFFFF"},{defaultBg:"#420021;#9C4370;#525252",
enterBg:"#FFFFFF"},{defaultBg:"#000000;#6F6F00;#525252",enterBg:"#FFFFFF"}]},getGradient:function(){this.defaultBg=this.shadows[6<this.id-1?this.id-1-7:this.id-1].defaultBg.split(";");this.enterBg=this.shadows[6<this.id-1?this.id-1-7:this.id-1].enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.coverBg=this.context.createLinearGradient(0,0,0,this.height/4*3);this.coverBg.addColorStop(0,"rgba(255,255,255,0.15)");this.coverBg.addColorStop(1,"rgba(255,255,255,0.3)");this.underShadow=
this.context.createLinearGradient(0,this.height/2-this.lineWidth/1.8,0,this.height-this.lineWidth/2);this.underShadow.addColorStop(0,Color(this.defaultBg[0]).rgba(0.25));this.underShadow.addColorStop(0.4,Color(this.defaultBg[0]).rgba(0))},stopAnimation:function(){this.bubbles&&this.bubbles.leaveTimer&&this.bubbles.leaveTimer.stop();this.bubbles&&this.bubbles.enterTimer&&this.bubbles.enterTimer.stop();this.stars&&this.stars.leaveTimer&&this.stars.leaveTimer.stop();this.stars&&this.stars.enterTimer&&
this.stars.enterTimer.stop()},runAnimation:function(){this.bubbles&&this.bubbles.leaveEvent();this.stars&&this.stars.leaveEvent()},setPosition:function(){this.arr1=[];for(var b=0;15>b;b++){var c=Math.random()*(this.width+this.lineWidth),d=Math.random()*(this.height/2);this.arr1.push({x:c,y:d})}this.arr2=[];for(b=0;15>b;b++)c=Math.random()*(this.width+this.lineWidth),d=Math.random()*(this.height/2),this.arr2.push({x:c,y:d})}});
Class("AnimationBubble",{create:function(b){this.secCanvas=b.secCanvas;this.container=b.container;this.secCtx=b.ctx;this.width=b.width;this.height=b.height;this.lineWidth=b.lineWidth;this.setPosition();isPhone()||isPad()||this.initEvent()},drawBubble:function(b,c,d,f,g){this.secCtx.beginPath();this.secCtx.ellipse(f,g,this.height/30,this.height/30,0,0,2*Math.PI,!1);c=this.secCtx.createRadialGradient(f-this.height/40,g+this.height/30,0,f,g,this.height/20);c.addColorStop(0,"rgba(255,255,255,"+1.6*b+
")");c.addColorStop(1,"rgba(255,255,255,"+0.14*b+")");this.secCtx.fillStyle=c;this.secCtx.fill();this.secCtx.closePath();this.secCtx.beginPath();this.secCtx.ellipse(f+this.height/40,g-this.height/60,this.height/80,this.height/100,-0.2*Math.PI,0,2*Math.PI,!1);this.secCtx.fillStyle="rgba(255,255,255,"+0.8*b+")";this.secCtx.fill();this.secCtx.closePath()},popBubbles:function(b,c,d,f){for(var g=0;10>g;g++){this.focus?(f[g].x+=this.width/6/d*c,f[g].y+=this.height/6/d):(f[g].x+=this.width/6/d*c,f[g].y-=
this.height/6/d);if(1==b||f[g].x<1.5*this.lineWidth||f[g].x>this.width-this.lineWidth||f[g].y<0.5*this.lineWidth||f[g].y>this.height/2-this.lineWidth/2)f[g].x=Math.random()*(this.width+this.lineWidth),f[g].y=Math.random()*(this.height/2);this.drawBubble(b,c,d,f[g].x,f[g].y)}},enterEvent:function(){this.enterTimer&&this.enterTimer.stop();this.enterTimer=this.enterAnimation.animation(this,1200)},enterAnimation:function(b,c){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);var d=1,f=b/c;
this.focus?b==c&&this.focus?(this.popBubbles(f,d,c,this.arr1),this.popBubbles(1-f-0.5,d,c,this.arr2),this.enterTimer&&this.enterTimer.stop(),this.enterTimer=this.enterAnimation.animation(this,1200)):this.focus&&(0.5>=b/c?d=1:(d=-1,f=1-f),this.popBubbles(f,d,c,this.arr1),this.popBubbles(1-f-0.5,d,c,this.arr2)):this.enterTimer.stop()},leaveEvent:function(){this.leaveTimer&&this.leaveTimer.stop();this.leaveTimer=this.leaveAnimation.animation(this,1200)},leaveAnimation:function(b,c){this.secCtx.clearRect(-20,
-20,1.5*this.width,1.5*this.height);var d=b/c,f=1;this.focus?this.leaveTimer.stop():b!=c||this.focus?(0.5>b/c?f=1:(f=-1,d=1-d),this.focus||(0.5>d?(this.popBubbles(d,f,c,this.arr1),this.popBubbles(d,f,c,this.arr2)):(this.popBubbles(1-d,f,c,this.arr1),this.popBubbles(1-d,f,c,this.arr2)))):(this.popBubbles(0,f,c,this.arr1),this.popBubbles(0,f,c,this.arr2))},initEvent:function(){this.container.bind(_event._enter,function(){this.focus=!0;this.setPosition();this.enterEvent()}.bind(this));this.container.bind(_event._leave,
function(){this.focus=!1;this.setPosition();this.leaveEvent()}.bind(this))}}).extend("GlossyButton");
Class("AnimationStar",{create:function(b){this.secCanvas=b.secCanvas;this.container=b.container;this.secCtx=b.ctx;this.width=b.width;this.height=b.height;this.lineWidth=b.lineWidth;this.setPosition();isPhone()||isPad()||this.initEvent()},drawStar:function(b,c,d,f,g){function h(b,c){var d=new Image;d.src=b;d.complete?c.call(d):d.onload=function(){c.call(d)}}this.secCtx.beginPath();var k=parseInt(c.x),l=parseInt(c.y),m=this.secCtx,n=this.width,p=this.height,q=new Image;q.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAcNJREFUeNq8lrtKA0EYhTMx0RizGiUqWGihnRcQFaxEOzsrwVfwcXwIbS0sLAKK2NiJkEbEiBjB+yWJihvd8YycwDJkzTJuZuFjw2TnP3vO/Du7QkoZs3nEDeclTeeaCvZQ1JpgBiRsCjq2BbttR+q0QlDQSZDD9gbjKdBhKijpYtJ3nWggWB/LgVHw/Z9IH8ELWAZp0MU5aTrJ8camwDQ4B19/FQzTaVc8r4FDzlHRjYEKxTrBLvCaFQsj2AaewR5YASWKxRmrcrvDczWsoNBiFj7iXLNBcAvWwSx4AnmwBXrBDWOWdCp91HviV9BhsT6uSZYCGUaVYvOoYkNgjv+r7W2eN1Vms3yCD/LKcZXOA7lLMIY3cKE5FT7HWYqN8/cM128fbLPYNXjXHWlOZUKzHdTJLospVxtgFRTUHYMBcMwY3Sh2Go+PwwLdXIJTcAKOKLrIlCLZ2obBBNjkepxxGUpsogNQBEvNdpkwj0U/GyTPphCMX7mpcVMQjFddO8JeqJkICq5JQdvuYmwYVxu7Z2cKU4eSBRod5YAGiaRpggRrNt+HFduC1WZvhVZEaiQoDD+Ek3xMPFuC1r+8jY8fAQYACgJ37BkSsIMAAAAASUVORK5CYII=";
m.save();m.globalAlpha=b;this.focus&&(this.runPosition(b,c,d,f,g),h(q.src,function(){m.drawImage(q,c.x,c.y,n/20,p/10)}.bind(this)));m.restore();this.focus||this.rotation(b,b*Math.PI,q,k,l);m.restore()},runPosition:function(b,c,d,f,g){1==g?(c.x+=this.width/8/f*g,c.y+=this.height/12/f*g,c.x=c.x>this.width-this.lineWidth-this.width/30?Math.random()*(this.width-this.lineWidth-this.width/30):c.x,c.y=c.y>this.height/2-this.lineWidth/2+this.height/30?Math.random()*(this.height/2-this.lineWidth/2):c.y):(c.x+=
this.width/8/f*g,c.y+=this.height/12/f*g,c.x=c.x<this.width/40+this.lineWidth/2?Math.random()*(this.width-this.lineWidth-this.width/30):c.x,c.y=c.y<this.lineWidth/2-this.height/20?Math.random()*(this.height/2-this.lineWidth/2):c.y)},rotation:function(b,c,d,f,g){this.secCtx.save();this.secCtx.globalAlpha=b;this.secCtx.translate(f+this.width/40,g+this.height/20);this.secCtx.rotate(c);this.secCtx.translate(-f-this.width/40,-g-this.height/20);this.secCtx.drawImage(d,f,g,this.width/20,this.height/10);
this.secCtx.restore()},popStars:function(b,c,d,f,g){for(var h=0;15>h;h++)this.drawStar(b,c[h],d,f,g)},enterEvent:function(){this.enterTimer&&this.enterTimer.stop();this.enterTimer=this.enterAnimation.animation(this,1E3)},enterAnimation:function(b,c){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);if(this.focus)if(b==c&&this.focus)this.add=1==this.add?-1:1,this.enterTimer&&this.enterTimer.stop(),this.enterTimer=this.enterAnimation.animation(this,1E3);else{var d=b/c;0.33>d&&(this.runCase=
1);0.33<=d&&0.66>=d&&(this.runCase=2);0.66<=d&&1>=d&&(this.runCase=3);if(this.focus)switch(this.runCase){case 1:this.popStars(3*d,this.arr1,b,c,this.add);this.popStars(3*d,this.arr2,b,c,-this.add);break;case 2:this.popStars(1,this.arr1,b,c,this.add);this.popStars(1,this.arr2,b,c,-this.add);break;case 3:this.popStars(3*(1-d),this.arr1,b,c,this.add),this.popStars(3*(1-d),this.arr2,b,c,-this.add)}}else this.enterTimer&&this.enterTimer.stop()},leaveEvent:function(){this.leaveTimer&&this.leaveTimer.stop();
this.leaveTimer=this.leaveAnimation.animation(this,800)},leaveAnimation:function(b,c){this.secCtx.clearRect(-20,-20,1.5*this.width,1.5*this.height);if(!0==this.focus)this.leaveTimer.stop();else if(b!=c||this.focus){var d=b/c;this.focus||(this.add?(this.popStars(d,this.arr1),this.popStars(1-d,this.arr2)):(this.popStars(1-d,this.arr1),this.popStars(d,this.arr2)))}else this.add=this.add?!1:!0,this.leaveTimer&&this.leaveTimer.stop()},initEvent:function(){this.container.bind(_event._enter,function(){this.add=
this.focus=!0;this.setPosition();this.enterEvent.delay(this,500)}.bind(this));this.container.bind(_event._leave,function(){this.focus=!1;this.runCase=1;this.setPosition();this.leaveEvent()}.bind(this))}}).extend("GlossyButton");
Class("GlossButton1",{create:function(b,c){this.setConfig(b);this.getGradient();this.drawFirstBg();this.drawCover();this.drawTopBottomBg()},setConfig:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=b.lineWidth;this.context=b.context;this.canvas=b.canvas;this.color=b.color;this.parent=parent},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.topBg=this.context.createRadialGradient(this.width/2,-this.lineWidth/
2,0,this.width/2,-this.lineWidth/2,this.width/2);this.topBg.addColorStop(0,this.defaultBg[1]);this.topBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.bottomBg=this.context.createRadialGradient(this.width/2,1.5*this.height+this.lineWidth/4,0,this.width/2,1.5*this.height+this.lineWidth/4,this.width/2);this.bottomBg.addColorStop(0,this.defaultBg[1]);this.bottomBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawTopBottomBg:function(){this.context.save();this.context.scale(1,1/3);this.context.beginPath();
this.context.fillStyle=this.topBg;this.context.fillRect(this.lineWidth/2,1.5*this.lineWidth,this.width,1.5*this.height);this.context.closePath();this.context.beginPath();this.context.fillStyle=this.bottomBg;this.context.fillRect(this.lineWidth/2,this.lineWidth,this.width,1.5*this.height-2.5*this.lineWidth);this.context.restore()},drawCover:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/10);this.context.lineTo(this.lineWidth/2,this.height/10);
this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth,this.lineWidth/2+this.lineWidth/20);var b=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);b.addColorStop(0,"rgba(255,255,255,0.05)");b.addColorStop(1,"rgba(255,255,255,0.1)");this.context.fillStyle=b;this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/10);this.context.quadraticCurveTo(this.lineWidth/2+0.85*
this.width,this.lineWidth/2+0.55*this.height,this.width-this.lineWidth,this.lineWidth/2+this.lineWidth/20);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=b;this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/3);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.lineTo(this.lineWidth/2+0.9*this.width,this.lineWidth/2);this.context.fill()}}).extend("GlossyButton");
Class("GlossButton2",{create:function(b,c){this.setConfig(b);this.getGradient();this.drawCenterBg();this.drawCover()},setConfig:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=b.lineWidth;this.context=b.context;this.canvas=b.canvas;this.parent=parent;this.color=b.color},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.center=this.context.createRadialGradient(this.width/
2,this.height+this.lineWidth/2,0,this.width/2,this.height+this.lineWidth/2,this.width/2);this.center.addColorStop(0,this.defaultBg[1]);this.center.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawCenterBg:function(){this.context.save();this.context.scale(1,0.25);this.context.beginPath();this.context.fillStyle=this.center;this.context.fillRect(this.lineWidth/2,2*this.lineWidth,this.width,2*this.height);this.context.closePath();this.context.restore()},drawCover:function(){this.context.beginPath();
this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.height/10);this.context.lineTo(this.lineWidth/2,this.height/10);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth,this.lineWidth/2+this.lineWidth/20);var b=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);b.addColorStop(0,"rgba(255,255,255,0.05)");b.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=
b;this.context.moveTo(this.lineWidth/2,this.height/4);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/4-this.lineWidth/4,this.bdRadius);this.context.lineTo(this.lineWidth/2+this.width,this.height/4);this.context.moveTo(this.lineWidth/2,this.height/4);this.context.fill();this.context.closePath()}}).extend("GlossyButton");
Class("GlossButton3",{create:function(b,c){this.setConfig(b);this.getGradient();this.drawCover();this.drawBottomBg()},setConfig:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=b.lineWidth;this.context=b.context;this.canvas=b.canvas;this.parent=parent;this.color=b.color},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.center=this.context.createRadialGradient(this.width/
2,1.8*this.height+this.lineWidth/2,0,this.width/2,1.8*this.height+this.lineWidth/2,this.width/2);this.center.addColorStop(0,this.defaultBg[1]);this.center.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},drawBottomBg:function(){this.context.save();this.context.scale(1,0.25);this.context.beginPath();this.context.fillStyle=this.center;this.context.fillRect(this.lineWidth/2,2*this.lineWidth,this.width,2*this.height-4*this.lineWidth);this.context.closePath();this.context.restore()},drawCover:function(){this.context.beginPath();
var b=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);b.addColorStop(0,"rgba(255,255,255,0.2)");b.addColorStop(1,"rgba(255,255,255,0.05)");this.context.fillStyle=b;this.context.moveTo(this.lineWidth/2,this.height/8*3);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/4-this.lineWidth/4,this.bdRadius);this.context.lineTo(this.lineWidth/
2+this.width,this.height/8*3);this.context.fill();this.context.closePath();this.context.save();this.context.scale(1,0.25);this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.height/8*12);this.context.fillStyle=this.defaultBg[0];this.context.quadraticCurveTo(this.width/2,this.height/6*4,this.width-this.lineWidth/2,this.height/8*12);this.context.fill();this.context.closePath();this.context.restore()}}).extend("GlossyButton");
Class("GlossButton4",{create:function(b,c){this.setConfig(b);this.getGradient();this.drawCenterBg();this.drawCover();this.drawBorder()},setConfig:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=b.lineWidth;this.context=b.context;this.canvas=b.canvas;this.parent=parent;this.color=b.color},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];
this.leftBg=this.context.createRadialGradient(this.width/9,this.height/2+this.lineWidth/2,0,this.width/9,this.height/2+this.lineWidth/2,0.45*this.width);this.leftBg.addColorStop(0,this.defaultBg[1]);this.leftBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.rightBg=this.context.createRadialGradient(0.9*this.width,this.height/2*3+this.lineWidth/2,0,0.9*this.width,this.height/2*3+this.lineWidth/2,0.45*this.width);this.rightBg.addColorStop(0,this.defaultBg[1]);this.rightBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0))},
drawCenterBg:function(){this.context.save();this.context.scale(1,0.25);this.context.beginPath();this.context.fillStyle=this.leftBg;this.context.moveTo(this.bdRadius+this.lineWidth/1.8,2*this.lineWidth-this.lineWidth/10);this.context.arcTo(this.width-this.lineWidth/2,2*this.lineWidth,this.width-this.lineWidth/2,2*this.height-2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,2*this.height-2*this.lineWidth,this.lineWidth/1.8,2*this.height-2*this.lineWidth,2*this.bdRadius);
this.context.arcTo(this.lineWidth/1.8,2*this.height-2*this.lineWidth,this.lineWidth/1.8,2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/1.8,1.8*this.lineWidth,this.width-this.lineWidth/2,2*this.lineWidth,2*this.bdRadius);this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.bdRadius+this.lineWidth/2,2*this.lineWidth-this.lineWidth/10);this.context.arcTo(this.width-this.lineWidth/1.8,2*this.lineWidth,this.width-this.lineWidth/2,2*this.height-
2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.width-this.lineWidth/1.8,2*this.height-1.8*this.lineWidth,this.lineWidth/2,2*this.height-2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/2,2*this.height-2*this.lineWidth,this.lineWidth/2+this.lineWidth/10,2*this.lineWidth,2*this.bdRadius);this.context.arcTo(this.lineWidth/2,2*this.lineWidth,this.width-this.lineWidth/2,2*this.lineWidth,2*this.bdRadius);this.context.fillStyle=this.rightBg;this.context.fill();this.context.closePath();
this.context.restore()},drawCover:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.bdRadius);this.context.lineTo(this.lineWidth/2,this.height/8*3.5);this.context.quadraticCurveTo(this.width/5,this.height/10,0.9*this.width,this.lineWidth/2);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.height/8*3.5,this.bdRadius);var b=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height/2);b.addColorStop(0,"rgba(255,255,255,0.05)");
b.addColorStop(1,"rgba(255,255,255,0.1)");this.context.fillStyle=b;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2+this.bdRadius);this.context.lineTo(this.lineWidth/2,this.height/8*3.5);this.context.quadraticCurveTo(this.width/2,0.4*this.height,0.9*this.width,this.lineWidth/2);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.height/8*3.5,this.bdRadius);this.context.fillStyle=b;this.context.fill();
this.context.closePath()},drawBorder:function(){this.context.beginPath();this.context.lineWidth=this.lineWidth/10;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height/2-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height/
2-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.strokeStyle=this.borderColor1;this.context.stroke()}}).extend("GlossyButton");
Class("GlossButton5",{create:function(b,c){this._super(b,c)},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.leftBg=this.context.createRadialGradient(this.width/15,this.height+this.lineWidth/2,0,this.width/15,this.height+this.lineWidth/2,0.45*this.width);this.leftBg.addColorStop(0,this.defaultBg[1]);this.leftBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.rightBg=
this.context.createRadialGradient(0.9*this.width,this.height+this.lineWidth/2,0,0.9*this.width,this.height+this.lineWidth/2,0.45*this.width);this.rightBg.addColorStop(0,this.defaultBg[1]);this.rightBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.center=this.context.createRadialGradient(this.width/2,this.height+this.lineWidth/2,0,this.width/2,this.height+this.lineWidth/2,this.width/2);this.center.addColorStop(0,this.defaultBg[1]);this.center.addColorStop(1,Color(this.defaultBg[1]).rgba(0))}}).extend("GlossButton4");
Class("GlossButton6",{create:function(b,c){this._super(b,c)},getGradient:function(){this.defaultBg=this.color.defaultBg.split(";");this.enterBg=this.color.enterBg;this.borderColor1=this.defaultBg[2];this.bgColor=this.defaultBg[0];this.leftBg=this.context.createRadialGradient(this.width/2+this.lineWidth,this.lineWidth,0,this.width/2+this.lineWidth,this.lineWidth,this.width/2);this.leftBg.addColorStop(0,this.defaultBg[1]);this.leftBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.rightBg=this.context.createRadialGradient(this.width/
2+this.lineWidth/4,2*this.height-2*this.lineWidth,0,this.width/2+this.lineWidth/4,2*this.height-2*this.lineWidth,this.width/2);this.rightBg.addColorStop(0,this.defaultBg[1]);this.rightBg.addColorStop(1,Color(this.defaultBg[1]).rgba(0))}}).extend("GlossButton4");
Class("PushButton",{create:function(b,c){b.width&&b.height&&b.id&&c&&(this.width=b.width/0.6,this.height=b.height,this.bdRadius=this.height/6,this.id=b.id,this.lineWidth=this.height/30,this.parent=c,this.enter=!1,this.initConfig(),this.initHtml(),this.getGradient(),this.drawButton(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+0.6*this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.context.scale(0.6,
1);this.parent.append(this.canvas)},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},onResize:function(b,c){this.lineWidth=c/30;this.width=b/0.6;this.height=c;this.bdRadius=this.height/6;this.canvas[0].width=0.6*this.width;this.canvas[0].height=this.height;this.context.scale(0.6,1);this.getGradient();this.drawButton()},draw:function(){this.context.clearRect(0,0,this.width+10,this.height+10);this.context.lineWidth=this.lineWidth;this.context.beginPath();this.context.moveTo(this.bdRadius+
2*this.lineWidth,this.lineWidth);this.context.arcTo(this.width-2*this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.width-2*this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(2*this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.arcTo(2*this.lineWidth,this.lineWidth,
this.width-this.lineWidth/2,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(4*this.lineWidth,2*this.lineWidth);var b=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);b.addColorStop(0,"rgba(255,255,255,0.90)");b.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=b;this.context.arcTo(this.width-4*this.lineWidth,2*this.lineWidth,this.width-
4*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(this.width-4*this.lineWidth,this.height/2+this.lineWidth,4*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(4*this.lineWidth,this.height/2+this.lineWidth,4*this.lineWidth,this.lineWidth,this.bdRadius);this.context.arcTo(4*this.lineWidth,2*this.lineWidth,this.width-4*this.lineWidth,this.lineWidth,this.bdRadius);this.context.fill();this.context.closePath()},initConfig:function(){this.pushs=[{defaultBg:"rgb(78,78,78);rgb(11,11,11);rgb(182,182,182)",
enterBg:"rgb(11,11,11);rgb(101,101,101);rgb(255,255,255)"},{defaultBg:"rgb(1,46,90);rgb(1,83,165);rgb(81,180,249)",enterBg:"rgb(1,46,90);rgb(42,147,253);rgb(255,255,255)"},{defaultBg:"rgb(149,13,13);rgb(200,0,0);rgb(234,111,111)",enterBg:"rgb(120,0,0);rgb(199,33,33);rgb(255,255,255)"},{defaultBg:"rgb(99,144,0);rgb(128,199,16);rgb(198,230,150)",enterBg:"rgb(97,140,0);rgb(136,204,35);rgb(255,255,255)"},{defaultBg:"rgb(125,63,1);rgb(174,90,9);rgb(249,180,92)",enterBg:"rgb(166,78,1);rgb(229,128,26);rgb(255,255,255)"},
{defaultBg:"rgb(122,122,1);rgb(170,170,6);rgb(251,251,72)",enterBg:"rgb(152,151,1);rgb(249,249,1);rgb(254,249,249)"}]},getGradient:function(){this.defaultBg=this.pushs[this.id-1].defaultBg.split(";");this.enterBg=this.pushs[this.id-1].enterBg.split(";");this.outerBg=this.context.createRadialGradient(this.width/2,this.height/2,0,this.width/2,this.height/2,this.width/3*2)},drawButton:function(){this.context.clearRect(0,0,this.width,this.height);this.context.beginPath();this.outerBg.addColorStop(0,this.defaultBg[0]);
this.outerBg.addColorStop(0.25,this.defaultBg[1]);this.outerBg.addColorStop(0.8,this.defaultBg[2]);this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw()},enterEvent:function(){this.getGradient();(function(b,c){this.getGradient();if(this.enter){var d=0.2+0.43*b/c;this.outerBg.addColorStop(0,this.enterBg[0]);this.outerBg.addColorStop(d,this.enterBg[1]);this.outerBg.addColorStop(0.75,this.enterBg[2]);this.outerBg.addColorStop(1,this.enterBg[2])}else d=0.6-0.4*b/c,this.outerBg.addColorStop(0,this.defaultBg[0]),
this.outerBg.addColorStop(d,this.defaultBg[1]),this.outerBg.addColorStop(0.8,this.defaultBg[2]),this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw()}).animation(this,300)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.enter=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.enter=!1;this.enterEvent()}.bind(this))}});
Class("LineLightButton",{create:function(b,c){c&&(this.lineWidth=b.height/30,this.width=b.width-this.lineWidth,this.height=b.height-this.lineWidth,this.bdRadius=this.height/6,this.id=b.id,this.parent=c,this.enter=!1,this.initConfig(),this.initHtml(),this.initCss(),this.getGradient(),this.drawButton(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas)},
onResize:function(b,c){this.lineWidth=c/30;this.width=b;this.height=c;this.bdRadius=this.height/6;this.canvas[0].width=this.width;this.canvas[0].height=this.height;this.getGradient();this.drawButton()},initCss:function(){this.canvas.css({position:"absolute",left:"0",top:"0"})},draw:function(){this.context.clearRect(0,0,this.width+10,this.height+10);this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.moveTo(this.bdRadius+this.lineWidth,this.lineWidth);this.context.arcTo(this.width-
this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.height-this.lineWidth/2,this.lineWidth,this.lineWidth,this.bdRadius+this.lineWidth/2);this.context.arcTo(this.lineWidth,this.lineWidth,this.width-this.lineWidth/2,this.lineWidth,this.bdRadius+this.lineWidth/
2);this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(2*this.lineWidth,2*this.lineWidth);var b=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);b.addColorStop(0,"rgba(255,255,255,0.90)");b.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=b;this.context.arcTo(this.width-2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(this.width-
2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,this.height/2+this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,this.height/2+this.lineWidth,2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,2*this.lineWidth,this.width-2*this.lineWidth,2*this.lineWidth,this.bdRadius);this.context.fill();this.context.closePath()},initConfig:function(){this.pushs=[{defaultBg:"rgb(81,76,25);rgb(244,227,73);rgb(81,76,25)",enterBg:"rgb(81,76,25);rgb(244,227,73);rgb(185,167,21)"},
{defaultBg:"rgb(26,11,1);rgb(245,107,16);rgb(26,11,1)",enterBg:"rgb(26,11,1);rgb(245,107,16);rgb(181,77,9)"},{defaultBg:"rgb(7,70,12);rgb(67,229,82);rgb(7,70,12)",enterBg:"rgb(7,70,12);rgb(35,250,35);rgb(8,98,11)"},{defaultBg:"rgb(112,8,8);rgb(253,76,76);rgb(31,9,9)",enterBg:"rgb(112,8,8);rgb(253,76,76);rgb(187,18,18)"},{defaultBg:"rgb(12,61,123);rgb(59,155,252);rgb(11,22,32)",enterBg:"rgb(12,61,123);rgb(59,155,252);rgb(14,86,184)"}]},getGradient:function(){this.defaultBg=this.pushs[this.id-1].defaultBg.split(";");
this.enterBg=this.pushs[this.id-1].enterBg.split(";");this.outerBg=this.context.createLinearGradient(0,this.lineWidth,0,this.height+this.lineWidth)},drawButton:function(){this.context.clearRect(0,0,this.width+this.lineWidth,this.height+this.lineWidth);this.context.beginPath();this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(0.5,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw();this.drawHint()},drawHint:function(){this.context.beginPath();this.context.strokeStyle=
"#333";this.context.fillStyle="rgba(255,255,255,0.4)";this.context.moveTo(0.9*this.bdRadius,this.height-0.88*this.bdRadius-this.lineWidth);this.context.bezierCurveTo(0.5*this.bdRadius,this.height+0.2*this.bdRadius-this.lineWidth,2*this.lineWidth,this.height-0.2*this.bdRadius-this.lineWidth,this.width-this.bdRadius,this.height-0.1*this.bdRadius-this.lineWidth);this.context.closePath();this.context.fill();this.context.beginPath();this.context.strokeStyle="transparent";this.context.fillStyle=this.outerBg;
this.context.moveTo(0.9*this.bdRadius,this.height-this.bdRadius-this.lineWidth);this.context.bezierCurveTo(0.5*this.bdRadius,this.height-0.5*this.bdRadius-this.lineWidth,this.width/3,this.height-0.05*this.bdRadius-this.lineWidth,this.width/3*2,this.height-0.3*this.bdRadius-this.lineWidth);this.context.lineTo(this.width-this.bdRadius,this.height-0.2*this.bdRadius-this.lineWidth);this.context.closePath();this.context.fill()},enterEvent:function(){this.getGradient();this.change=function(b,c){this.getGradient();
if(this.enter){var d=0.5+0.35*b/c;this.outerBg.addColorStop(0,this.enterBg[0]);this.outerBg.addColorStop(d,this.enterBg[1]);this.outerBg.addColorStop(1,this.enterBg[2])}else d=0.85-0.35*b/c,this.outerBg.addColorStop(0,this.defaultBg[0]),this.outerBg.addColorStop(d,this.defaultBg[1]),this.outerBg.addColorStop(1,this.defaultBg[2]);this.draw();this.drawHint()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.enter=
!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.enter=!1;this.enterEvent()}.bind(this))}});
Class("StarButton",{create:function(b,c){c&&(this.lineWidth=b.height/30,this.width=b.width-this.lineWidth,this.height=b.height-this.lineWidth,this.bdRadius=parseInt(this.height/12),this.id=b.id,this.parent=c,this.enter=!1,this.initConfig(),this.getGradient(),this.initHtml(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+(this.width+50)+"' height='"+(this.height+50)+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.context.translate(20,
20);this.parent.append(this.canvas);this.drawButton()},initCss:function(){this.canvas.css({position:"absolute",left:"-20px",top:"-20px"})},onResize:function(b,c){this.lineWidth=c/30;this.width=b-this.lineWidth;this.height=c-this.lineWidth;this.bdRadius=parseInt(this.height/12);this.canvas[0].width=this.width+50;this.canvas[0].height=this.height+50;this.context.translate(20,20);this.getGradient();this.drawButton()},draw:function(){this.context.clearRect(-50,-50,this.width+100,this.height+100);this.context.shadowColor=
1==this.id||5==this.id?this.enterBg[1]:this.enterBg[0];this.context.shadowBlur=this.height/10;this.context.lineWidth=this.lineWidth;this.context.fillStyle=this.outerBg;this.context.beginPath();this.context.fillStyle=this.outerBg;this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/
2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fill();this.context.closePath();this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.beginPath();this.context.moveTo(this.bdRadius+1.5*this.lineWidth,1.5*this.lineWidth);this.context.arcTo(this.width-
2*this.lineWidth,1.5*this.lineWidth,this.width-2*this.lineWidth,this.height-2*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(this.width-2*this.lineWidth,this.bdRadius+this.lineWidth);this.context.strokeStyle=this.borderColor2;this.context.arcTo(this.width-2*this.lineWidth,this.height-2*this.lineWidth,1.5*this.lineWidth,this.height-2*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.strokeStyle=
this.borderColor3;this.context.beginPath();this.context.moveTo(this.width-2*this.lineWidth-this.bdRadius,this.height-2*this.lineWidth);this.context.arcTo(1.5*this.lineWidth,this.height-2*this.lineWidth,1.5*this.lineWidth,1.5*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(1.5*this.lineWidth,this.height-2*this.lineWidth);this.context.strokeStyle=this.borderColor4;this.context.arcTo(1.5*this.lineWidth,1.5*this.lineWidth,this.width-
2*this.lineWidth,1.5*this.lineWidth,this.bdRadius);this.context.stroke();this.context.closePath()},initConfig:function(){this.stars=[{defaultBg:"rgba(0,0,204,1);rgb(14,6,89);rgb(0,0,0)",enterBg:"#fff;#00f"},{defaultBg:"rgb(0,0,30);rgb(0,0,15);rgb(0,0,0)",enterBg:"#C48939;#F5A505"},{defaultBg:"rgb(26,0,154);rgb(16,0,61);rgb(0,0,0)",enterBg:"#F00898;#1A0060"},{defaultBg:"rgb(0,16,0);rgb(0,8,0);rgb(0,0,0)",enterBg:"#0AFA00;#000B00"},{defaultBg:"rgb(173,15,203);rgb(129,7,107);rgb(112,0,0)",enterBg:"#F8F1F6;#8A0BA0"}]},
getGradient:function(){this.defaultBg=this.stars[this.id-1].defaultBg.split(";");this.enterBg=this.stars[this.id-1].enterBg.split(";")},drawButton:function(){this.enterBg1=Color(this.enterBg[0]);this.enterBg2=Color(this.enterBg[1]);this.context.clearRect(-50,-50,this.width+50,this.height+50);this.context.beginPath();this.setColor();this.draw()},setColor:function(){this.borderColor1=this.context.createLinearGradient(0,0,this.width/2,0);this.borderColor1.addColorStop(0,this.enterBg1.rgba(0.5));this.borderColor1.addColorStop(0.25,
this.enterBg1.rgba(1));this.borderColor1.addColorStop(1,this.enterBg1.rgba(0));this.borderColor2=this.context.createLinearGradient(0,this.height/2-this.lineWidth,0,this.height);this.borderColor2.addColorStop(0,this.enterBg1.rgba(0));this.borderColor2.addColorStop(1,this.enterBg1.rgba(0.5));this.borderColor3=this.context.createLinearGradient(this.width,0,this.width/2,0);this.borderColor3.addColorStop(0,this.enterBg1.rgba(0.5));this.borderColor3.addColorStop(1,this.enterBg1.rgba(0));this.borderColor4=
this.context.createLinearGradient(0,this.height+this.lineWidth,0,0);this.borderColor4.addColorStop(0,this.enterBg1.rgba(0));this.borderColor4.addColorStop(1,this.enterBg1.rgba(0.7));this.outerBg=this.context.createRadialGradient(this.width/6,1.5*this.height,this.height/4,this.width/4,this.height+this.lineWidth,this.width);this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(0.5,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[2])},insetColor:function(b){b||(b=1);this.starBg1=
this.context.createRadialGradient(this.bdRadius+0.1*this.width,2*this.lineWidth,0,this.bdRadius+0.1*this.width,2*this.lineWidth,this.height/(11-5*b));this.starBg1.addColorStop(0,this.enterBg1.rgba(0.6));this.starBg1.addColorStop(0.5,this.enterBg1.rgba(0.1));this.starBg1.addColorStop(1,this.enterBg2.rgba(0));this.lineBG1=this.context.createLinearGradient(1,0,this.bdRadius+0.2*this.width,0);this.lineBG1.addColorStop(0,this.enterBg2.rgba(0.2));this.lineBG1.addColorStop(1,this.enterBg1.rgba(0.4));this.starOutBg1=
this.context.createRadialGradient(this.bdRadius+0.1*this.width,2*this.lineWidth,0,this.bdRadius+0.1*this.width,2*this.lineWidth,0.5*this.height*b);this.starOutBg1.addColorStop(0,this.enterBg1.rgba(0.1));this.starOutBg1.addColorStop(1,this.enterBg1.rgba(0));this.starBg2=this.context.createRadialGradient(0.85*this.width+this.bdRadius,this.height-2*this.lineWidth,0,0.85*this.width+this.bdRadius,this.height-2*this.lineWidth,this.height/(11-5*b));this.starBg2.addColorStop(0,this.enterBg1.rgba(0.6));this.starBg2.addColorStop(0.5,
this.enterBg1.rgba(0.1));this.starBg2.addColorStop(1,this.enterBg2.rgba(0));this.lineBG2=this.context.createLinearGradient(0.9*this.width+this.bdRadius,0,this.width+this.bdRadius+25*b,0);this.lineBG2.addColorStop(0,this.enterBg1.rgba(0.4));this.lineBG2.addColorStop(1,this.enterBg2.rgba(0.2));this.starOutBg2=this.context.createRadialGradient(0.85*this.width+this.bdRadius,this.height-2*this.lineWidth,0,0.85*this.width+this.bdRadius,this.height-2*this.lineWidth,0.5*this.height*b);this.starOutBg2.addColorStop(0,
this.enterBg1.rgba(0.1));this.starOutBg2.addColorStop(1,this.enterBg1.rgba(0))},drawStar:function(b){b||(b=1);this.context.beginPath();this.context.lineWidth=this.height/100;this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=this.height/50;this.context.moveTo(this.lineWidth-25*b,1.5*this.lineWidth);this.context.strokeStyle=this.lineBG1;this.context.lineTo(this.bdRadius+0.1*this.width,1.5*this.lineWidth);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.fillStyle=
this.starOutBg1;this.context.shadowColor=this.enterBg2.rgba(1);this.context.shadowBlur=20;this.context.arc(this.bdRadius+0.1*this.width,2*this.lineWidth,this.height/(2-1*b),0,2*Math.PI,!1);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starBg1;this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=20;this.context.arc(this.bdRadius+0.1*this.width,2*this.lineWidth,this.height/(10-5*b),0,2*Math.PI,!1);this.context.fill();this.context.closePath();
this.context.beginPath();this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=this.height/50;this.context.moveTo(0.9*this.width+this.bdRadius,this.height-2*this.lineWidth);this.context.strokeStyle=this.lineBG2;this.context.lineTo(this.width-this.lineWidth+25*b,this.height-2*this.lineWidth);this.context.stroke();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starOutBg2;this.context.shadowColor=this.enterBg2.rgba(1);this.context.shadowBlur=20;this.context.arc(0.85*
this.width+this.bdRadius,this.height-2*this.lineWidth,this.height/(2-1*b),0,2*Math.PI,!1);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=this.starBg2;this.context.shadowColor=this.enterBg1.rgba(1);this.context.shadowBlur=20;this.context.arc(0.85*this.width+this.bdRadius,this.height-2*this.lineWidth,this.height/(10-5*b),0,2*Math.PI,!1);this.context.fill();this.context.closePath()},enterEvent:function(){this.getGradient();this.change=function(b,c){this.draw();
this.hasChange?b==c?(this.hasChange=!1,this.focus&&(this.timer&&this.timer.stop(),this.timer=this.change.animation(this,400))):(this.insetColor(1-b/c),this.drawStar(1-b/c)):b==c?(this.hasChange=!0,this.focus&&(this.timer&&this.timer.stop(),this.timer=this.change.animation(this,400))):(this.insetColor(b/c),this.drawStar(b/c))};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.hasChange=!1;this.enterEvent()}.bind(this));
this.canvas.bind(_event._leave,function(){this.focus=!1;this.context.clearRect(-50,-50,this.width+50,this.height+50);this.drawButton()}.bind(this))}});
Class("GlitterButton",{create:function(b,c){c&&(this.lineWidth=b.height/40,this.width=b.width,this.height=b.height,this.id=b.id,this.bdRadius=this.height/20,this.parent=c,this.enter=!1,this.initConfig(),this.initHtml(),this.initCss(),this.getGradient(),this.setEllipseBg(),this.draw(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+this.width+"' height='"+(this.height+this.height/20)+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas)},
initCss:function(){this.canvas.css({position:"absolute",background:"#eee",left:"0",top:"0"})},onResize:function(b,c){this.lineWidth=c/40;this.width=b;this.height=c;this.bdRadius=this.height/20;this.canvas[0].width=b;this.canvas[0].height=c+this.height/20;this.getGradient();this.setEllipseBg();this.draw()},draw:function(){this.context.clearRect(0,0,this.width+10,3*this.height+10);this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/
2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.outerBg;this.context.fill();
this.context.closePath();this.drawCover();this.drawEllipse();this.drawBottomLine()},drawBottomLine:function(){this.context.beginPath();this.context.lineWidth=this.lineWidth/2;this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.lineTo(this.width-this.lineWidth/2,this.lineWidth/2);var b=this.context.createLinearGradient(this.lineWidth/2,0,this.width-this.lineWidth/2,0);b.addColorStop(0,Color(this.defaultBg[2]).rgba(0.05));b.addColorStop(0.5,Color(this.defaultBg[2]).rgba(0.3));b.addColorStop(1,
Color(this.defaultBg[2]).rgba(0.05));this.context.strokeStyle=b;this.context.stroke();this.context.closePath();this.context.save();this.context.beginPath();this.context.shadowColor=this.enterBg[2];this.context.shadowBlur=this.height/30;this.context.shadowOffsetX=0;this.context.shadowOffsetY=this.height/40;b=this.context.createLinearGradient(this.lineWidth/2,0,this.width-this.lineWidth/2,0);b.addColorStop(0.1,"rgba(255,255,255,0.3)");b.addColorStop(0.5,"rgba(255,255,255,1)");b.addColorStop(0.9,"rgba(255,255,255,0.3)");
this.context.strokeStyle=b;this.context.lineWidth=0;this.focus&&(this.context.lineWidth=2);this.context.moveTo(this.lineWidth/2,this.height-this.lineWidth/2);this.context.lineTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2);this.context.stroke();this.context.closePath();this.context.restore()},drawCover:function(){this.context.save();this.context.beginPath();this.context.moveTo(this.lineWidth,this.lineWidth);var b=this.context.createLinearGradient(0,this.lineWidth,0,this.height/2+this.lineWidth);
b.addColorStop(0,"rgba(255,255,255,0.8)");b.addColorStop(0.5,"rgba(255,255,255,0.35)");b.addColorStop(1,"rgba(255,255,255,0.2)");this.context.fillStyle=b;this.context.arcTo(this.width-this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.height/2.6+this.lineWidth,this.bdRadius);this.context.lineTo(this.width-this.lineWidth,this.height/2.6+this.lineWidth,this.lineWidth,this.height/2.6+this.lineWidth);this.context.lineTo(this.lineWidth,this.height/2.6+this.lineWidth,this.lineWidth,this.lineWidth);
this.context.arcTo(this.lineWidth,this.lineWidth,this.width-this.lineWidth,this.lineWidth,this.bdRadius);this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.lineWidth,this.height/2.6+this.lineWidth);this.context.bezierCurveTo(this.width/4+this.lineWidth/2,this.height/2.6+this.lineWidth+this.height/8,0.75*this.width-this.lineWidth/2,this.height/2.6+this.lineWidth+this.height/8,this.width-this.lineWidth/2,this.height/2.6+this.lineWidth);this.context.fill();
this.context.closePath();this.context.restore()},drawEllipse:function(){this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.shadowColor=Color(this.defaultBg[2]).rgba(0.9);this.context.shadowBlur=this.height/3;this.context.fillStyle=this.enterRoundBg;this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,3*(this.height-this.lineWidth/2));this.context.fill();this.context.closePath();this.context.restore()},initConfig:function(){this.glitters=
[{defaultBg:"#FFFFFF;#8BA8B1;#00AAFC",enterBg:"#03AaFF;#fff;#000"},{defaultBg:"#9195A4;#060606;#0336FF",enterBg:"#0022ff;#fff;#1534E3"},{defaultBg:"#EBE9E7;#ACACAB;#FA6703;",enterBg:"#E1CD57;#fff;#000"},{defaultBg:"#FFFFFF;#F98435;#F73BF7;",enterBg:"#FFCD05;#fff;#000"},{defaultBg:"#D0CED1;#0C0C0C;#DA09AE;",enterBg:"#A70080;#fff;#F000E8"},{defaultBg:"#E0DEDB;#080808;#FF9005",enterBg:"#EA7E00;#fff;#F0BC00"}]},getGradient:function(){this.defaultBg=this.glitters[this.id-1].defaultBg.split(";");this.enterBg=
this.glitters[this.id-1].enterBg.split(";");var b=Color(this.enterBg[0]);this.outerBg=this.context.createLinearGradient(0,5,0,this.height+5);this.outerBg.addColorStop(0,this.defaultBg[0]);this.outerBg.addColorStop(0.4,Color(this.defaultBg[1]).rgba(0.6));this.outerBg.addColorStop(1,this.defaultBg[1]);this.leaveShineBg=this.context.createRadialGradient(0.5*this.width,2.25*this.height,0,0.5*this.width,2.25*this.height,this.width/3*2);this.leaveShineBg.addColorStop(0,b.rgba(1));this.leaveShineBg.addColorStop(0.6,
b.rgba(0.6));this.leaveShineBg.addColorStop(1,b.rgba(0))},setShineColor:function(b){b=Color(this.enterBg[1]);var c=Color(this.enterBg[0]);this.enterShineBg=this.context.createRadialGradient(0.5*this.width+this.lineWidth/2,this.height/2*3,0,0.5*this.width+this.lineWidth/2,this.height/2*3,this.width/1.5);2==this.shineCase?this.enterShineBg.addColorStop(0,b.rgba(0.65)):this.enterShineBg.addColorStop(0,b.rgba(0.45));this.enterShineBg.addColorStop(0.9,c.rgba(0))},setEllipseBg:function(){var b=Color(this.enterBg[0]);
this.enterRoundBg=this.context.createRadialGradient(0.5*this.width,this.height/2*3,0,0.5*this.width,this.height/2*3,(this.width-this.lineWidth)/1.7);this.focus?(this.enterRoundBg.addColorStop(0,b.rgba(0.25)),this.enterRoundBg.addColorStop(0.4,b.rgba(0.1)),this.enterRoundBg.addColorStop(0.7,b.rgba(0.05)),this.enterRoundBg.addColorStop(1,b.rgba(0))):(this.enterRoundBg.addColorStop(0,Color(this.defaultBg[2]).rgba(0.2)),this.enterRoundBg.addColorStop(0.8,Color(this.defaultBg[2]).rgba(0)))},drawShine:function(b){b||
(b=1);this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.shadowColor=Color(this.enterBg[1]).rgba(1);this.context.shadowBlur=this.height;this.context.fillStyle=this.leaveShineBg;this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width,3*this.height);this.context.fill();this.context.closePath();this.context.beginPath();this.context.shadowColor=Color(this.enterBg[1]).rgba(1);this.context.shadowBlur=this.height/2;this.context.fillStyle=this.enterShineBg;this.context.fillRect(this.width/
2+this.lineWidth-(this.width/2+this.lineWidth/2)*b,this.lineWidth,1.1*this.width*b-0.1*this.width,3*this.height);this.context.fill();this.context.closePath();this.context.restore()},enterEvent:function(){this.getGradient();this.change=function(b,c){var d=this.focus?b/c:1-b/c;this.setShineColor(1);this.draw();this.drawShine(d);b==c&&(this.focus?(this.shineTimer&&this.shineTimer.stop(),this.shinePlayFun.animation(this,100),this.lineTimer&&this.shineTimer.stop(),this.lineRunFun.animation(this,1E3)):
(this.setShineColor(1),this.draw()))};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400);this.shinePlayFun=function(b,c){1==this.shineCase?b==c&&(this.shineCase=2,this.focus?(this.shineTimer&&this.shineTimer.stop(),this.shineTimer=this.shinePlayFun.animation(this,100)):this.draw()):b==c&&(this.shineCase=1,this.focus?(this.shineTimer&&this.shineTimer.stop(),this.shineTimer=this.shinePlayFun.animation(this,100)):this.draw());this.setShineColor(1);this.draw();this.drawShine(1)};
this.lineRunFun=function(b,c){var d=b/c;this.stop?(this.setEllipseBg(),this.draw()):(this.drawRunLine(d),b==c&&(this.focus?(this.timer0&&(clearTimeout(this.timer0),this.timer0=null),this.timer0=setTimeout(function(){this.lineTimer&&this.lineTimer.stop();this.lineTimer=this.lineRunFun.animation(this,1E3)}.bind(this),1E3)):(this.setEllipseBg(),this.draw())))}},drawRunLine:function(b){this.context.beginPath();this.context.lineWidth=this.lineWidth;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/
2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius+this.lineWidth/2);this.context.lineTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2);this.context.lineTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius+this.lineWidth/
2);1!=b?(this.runLine=this.context.createLinearGradient(this.lineWidth/2,this.lineWidth/2,this.width,this.height),this.runLine.addColorStop(0,"rgba(255,255,255,0)"),this.runLine.addColorStop(0.02+0.82*b,"rgba(255,255,255,0)"),this.runLine.addColorStop(0.1+0.82*b,"rgba(255,255,255,1)"),this.runLine.addColorStop(0.18+0.82*b,"rgba(255,255,255,0)")):(this.runLine=this.context.createLinearGradient(this.lineWidth/2,this.lineWidth/2,this.width,this.height),this.runLine.addColorStop(0,"rgba(255,255,255,0)"));
this.runLine.addColorStop(1,"rgba(255,255,255,0)");this.context.strokeStyle=this.runLine;this.context.stroke();this.context.closePath()},initEvent:function(){this.canvas.bind(_event._enter,function(){this.stop=!1;this.shineCase=1;this.focus=!0;this.context.clearRect(-10,-10,this.width+20,3*this.height+20);this.setEllipseBg();this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.stop=!0;this.setEllipseBg();this.enterEvent()}.bind(this))}});
Class("ShadowButton",{create:function(b,c){c&&(this.lineWidth=b.height/10,this.width=b.width-this.lineWidth,this.height=b.height-this.lineWidth,this.id=b.id,this.bdRadius=this.height/12,this.parent=c,this.enter=!1,this.initConfig(),this.getGradient(),this.initHtml(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.container=$("<div></div>");this.canvas=$("<canvas width='"+(this.width+this.lineWidth)+"' height='"+(this.height+this.lineWidth)+"'></canvas>");this.context=
this.canvas[0].getContext("2d");this.container.append(this.canvas);this.parent.append(this.container);this.drawShadowButton();this.leftToRight=!0;this.playCase=1;this.drawFlower()},initCss:function(){this.container.css({position:"absolute",left:"0",top:"0"})},draw:function(){this.context.save();this.context.scale(1,2/3);this.context.lineWidth=this.lineWidth;this.drawFirstBg();this.drawSecondBg();this.drawThirdBg();this.context.restore();this.drawEnterShadow();this.drawCover();this.drawCoverShadow()},
onResize:function(b,c){this.lineWidth=c/10;this.width=b-this.lineWidth;this.height=c-this.lineWidth;this.bdRadius=this.height/12;this.canvas[0].width=b;this.canvas[0].height=c;this.container.find("img").css({width:this.width/4*3+"px",height:this.height/4*3+"px",left:this.width/8+this.lineWidth/4+"px",top:this.height/9+"px"});this.getGradient();this.drawShadowButton()},stopAnimation:function(){},runAnimation:function(){},drawFirstBg:function(){this.context.save();this.context.shadowColor=this.shadowColor;
this.context.shadowBlur=10;this.context.beginPath();this.context.strokeStyle=this.borderColor1;this.context.moveTo(this.bdRadius+this.lineWidth,this.lineWidth);this.context.arcTo(this.width,this.lineWidth,this.width,1.5*this.height,this.bdRadius);this.context.arcTo(this.width,1.5*this.height,this.lineWidth,1.5*this.height,this.bdRadius);this.context.arcTo(this.lineWidth,1.5*this.height,this.lineWidth,this.lineWidth,this.bdRadius);this.context.arcTo(this.lineWidth,this.lineWidth,this.width,this.lineWidth,
this.bdRadius);this.context.stroke();this.context.closePath();this.context.restore()},drawSecondBg:function(){this.context.beginPath();this.context.lineWidth=0.5;this.context.moveTo(this.bdRadius+1.1*this.lineWidth,1.1*this.lineWidth);this.context.strokeStyle="#000";this.context.arcTo(this.width-this.lineWidth/8,1.1*this.lineWidth,this.width-this.lineWidth/8,1.5*this.height-0.1*this.lineWidth,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/8,1.5*this.height-0.1*this.lineWidth,1.5*this.lineWidth,
1.5*this.height-0.1*this.lineWidth,this.bdRadius);this.context.arcTo(1.1*this.lineWidth,1.5*this.height-0.1*this.lineWidth,1.5*this.lineWidth,1.1*this.lineWidth,this.bdRadius);this.context.arcTo(1.1*this.lineWidth,1.1*this.lineWidth,this.width-this.lineWidth/8,1.1*this.lineWidth,this.bdRadius);this.context.fillStyle=this.borderColor2;this.context.fill();this.context.stroke();this.context.closePath()},drawThirdBg:function(){this.context.beginPath();this.context.moveTo(this.bdRadius+2*this.lineWidth,
2*this.lineWidth);this.context.strokeStyle=this.borderColor2;this.context.arcTo(this.width-this.lineWidth,2*this.lineWidth,this.width-this.lineWidth/2,1.5*this.height-this.lineWidth,this.bdRadius);this.context.arcTo(this.width-this.lineWidth,1.5*this.height-this.lineWidth,1.5*this.lineWidth,1.5*this.height-this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,1.5*this.height-this.lineWidth,1.5*this.lineWidth,1.5*this.lineWidth,this.bdRadius);this.context.arcTo(2*this.lineWidth,2*this.lineWidth,
this.width-this.lineWidth/2,1.5*this.lineWidth,this.bdRadius);this.context.fillStyle=this.defaultBg[1];this.context.fill();this.context.closePath()},drawEnterShadow:function(){this.context.save();this.context.scale(1,0.5);this.context.beginPath();this.context.shadowColor="#fff";this.context.shadowBlur=this.height/8;var b=this.context.createRadialGradient(this.width/2+this.lineWidth,this.height+this.lineWidth,0,this.width/2+this.lineWidth,this.height+this.lineWidth,0.95*this.height);b.addColorStop(0,
"rgba(255,255,255,0.6)");b.addColorStop(0.5,"rgba(255,255,255,0.3)");b.addColorStop(1,Color(this.defaultBg[1]).rgba(0));this.context.fillStyle=b;this.context.fillRect(this.bdRadius+1.1*this.lineWidth,this.lineWidth,this.width,2*this.height);this.context.restore()},drawCoverShadow:function(){this.context.save();this.context.scale(1,0.5);this.context.beginPath();this.context.shadowColor="#fff";this.context.shadowBlur=this.height/8;var b=this.context.createRadialGradient(this.width/2+0.5*this.lineWidth,
this.height+this.lineWidth,0,this.width/2+0.5*this.lineWidth,this.height+this.lineWidth,0.95*this.height);b.addColorStop(0,"rgba(255,255,255,0.6)");b.addColorStop(0.6,"rgba(255,255,255,0.3)");b.addColorStop(1,"rgba(255,255,255,0)");this.context.fillStyle=b;this.context.fillRect(this.bdRadius+1.1*this.lineWidth,this.lineWidth,0.9*this.width,2*this.height);this.context.restore()},drawFlower:function(){var b=$("<img src='"+uiBaseURL+"buttonFlower.svg' />");b.css({position:"absolute","pointer-events":"none",
width:this.width/4*3+"px",height:this.height/4*3+"px",left:this.width/8+this.lineWidth/4+"px",top:this.height/9+"px"});this.container.append(b)},drawCover:function(){this.context.beginPath();this.context.fillStyle=this.defaultBg[2];this.context.moveTo(this.bdRadius+1.14*this.lineWidth,this.height/2);this.context.quadraticCurveTo(this.width/2,this.height/6,this.width-this.lineWidth,this.height/2.5);this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.bdRadius+
1.14*this.lineWidth,this.height/2);this.context.quadraticCurveTo(this.width/2,this.height/6,this.width-this.lineWidth,this.height/2.5);this.context.moveTo(this.bdRadius+1.14*this.lineWidth,this.height/2);this.context.fillStyle=this.defaultBg[2];this.context.arcTo(this.bdRadius+1.14*this.lineWidth,this.height-this.lineWidth/1.6,this.width-0.9*this.lineWidth,this.height-this.lineWidth/1.5,this.bdRadius/2);this.context.arcTo(this.width-0.95*this.lineWidth,this.height-this.lineWidth/1.6,this.width-0.95*
this.lineWidth,this.lineWidth,this.bdRadius/2);this.context.lineTo(this.width-0.95*this.lineWidth,this.height/2.5);this.context.fill();this.context.closePath()},initConfig:function(){this.shadows=[{defaultBg:"#666666;#9AC2FF;#287EFF",enterBg:"#FFFFFF"},{defaultBg:"#666666;#FF9090;#FF1515",enterBg:"#FFFFFF"},{defaultBg:"#666666;#FFFF85;#FFFF24",enterBg:"#FFFFFF"},{defaultBg:"#666666;#94EEB0;#1FDC59",enterBg:"#FFFFFF"},{defaultBg:"#666666;#E499FF;#C936FF",enterBg:"#FFFFFF"},{defaultBg:"#666666;#9B9B9B;#404040",
enterBg:"#FFFFFF"}]},getGradient:function(){this.defaultBg=this.shadows[this.id-1].defaultBg.split(";");this.enterBg=this.shadows[this.id-1].enterBg;this.shadowColor="transparent"},drawShadowButton:function(){this.context.clearRect(-20,-20,3*this.width,3*this.height);this.context.beginPath();this.context.lineWidth=5;this.bgColor1=this.defaultBg[1];this.borderColor1=this.context.createLinearGradient(this.lineWidth+5,0,this.width+this.lineWidth+5,0);this.borderColor1.addColorStop(0,this.defaultBg[0]);
this.borderColor1.addColorStop(1,this.defaultBg[0]);this.borderColor2=this.context.createLinearGradient(this.lineWidth+5,0,this.width-this.lineWidth/2,0);this.borderColor2.addColorStop(0,this.defaultBg[0]);this.borderColor2.addColorStop(0.5,"rgba(255,255,255,1)");this.borderColor2.addColorStop(1,this.defaultBg[0]);this.outerBg=this.context.createLinearGradient(0,this.lineWidth+5,0,this.height);this.outerBg.addColorStop(0,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[1]);this.draw()},
change:function(b,c){b!=c&&(this.context.clearRect(-20,-20,3*this.width,3*this.height),this.shadowColor=this.focus?Color(this.defaultBg[2]).rgba(b/c):this.shadowColor=Color(this.defaultBg[2]).rgba(1-b/c),this.draw())},enterEvent:function(){this.getGradient();this.change.animation(this,1200)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});
Class("BottomLightButton",{create:function(b,c){c&&(this.width=b.width,this.height=b.height,this.id=b.id,this.bdRadius=this.height/15,this.lineWidth=this.height/10,this.parent=c,this.initConfig(),this.initHtml(),this.getGradient(),this.drawButton(),this.initCss(),isPhone()||isPad()||this.initEvent())},initHtml:function(){this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.canvas)},initCss:function(){this.canvas.css({position:"absolute",
left:"0",top:"0"})},drawButton:function(){this.context.beginPath();this.context.lineWidth=5;this.outerBg=this.context.createLinearGradient(0,this.lineWidth+5,0,this.height);this.outerBg.addColorStop(0,this.defaultBg[1]);this.outerBg.addColorStop(1,this.defaultBg[1]);this.shadowColor(0);this.draw()},draw:function(){this.context.clearRect(0,0,this.width,this.height);this.context.lineWidth=this.lineWidth;this.drawFirstBg();this.drawCover();this.drawCoverShadow()},onResize:function(b,c){this.bdRadius=
c/15;this.lineWidth=c/10;this.width=b;this.height=c;this.canvas[0].width=b;this.canvas[0].height=c;this.getGradient();this.drawButton()},drawFirstBg:function(){this.context.save();this.context.beginPath();this.context.moveTo(this.bdRadius,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height/2,this.lineWidth/2,this.height/2,this.bdRadius);this.context.arcTo(this.lineWidth/
2,this.height/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor;this.context.fill();this.context.closePath();this.context.restore()},drawCoverShadow:function(){this.context.save();this.context.scale(1,0.5);this.context.beginPath();this.context.shadowColor=this.enterBg;this.context.shadowBlur=this.height/4;this.context.fillStyle=this.color;this.context.fillRect(this.lineWidth/
2,this.lineWidth/2,this.width,this.height-this.lineWidth/2);this.context.restore();this.context.clearRect(this.lineWidth/2,this.height/2,this.width,this.height)},drawCover:function(){this.context.save();this.context.beginPath();this.context.lineWidth=0;this.context.fillStyle=this.coverBg;this.context.moveTo(this.lineWidth/2,this.height/8*3);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/
2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/8*3-this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth/2,this.height/8*3);this.context.quadraticCurveTo(this.width/2,this.height/7,this.lineWidth/2,this.height/8*3);this.context.fill();this.context.closePath()},initConfig:function(){this.shadows=[{defaultBg:"#181818;#181818;#181818",enterBg:"#6CFCDE"},{defaultBg:"#181818;#181818;#181818",enterBg:"#FF0000"},{defaultBg:"#187B0D;#3DB330;#60E751",enterBg:"#FFFFFF"},
{defaultBg:"#07507E;#3586B0;#5DB5DB",enterBg:"#FFFFFF"},{defaultBg:"#EA8C44;#F38536;#EC5A1D",enterBg:"#FFFFFF"},{defaultBg:"#F7BFD9;#EE62AB;#E61685",enterBg:"#FFFFFF"},{defaultBg:"#8A0F0F;#BE2424;#F54444",enterBg:"#FFFFFF"},{defaultBg:"#58F762;#46C446;#17578E",enterBg:"#FFFFFF"},{defaultBg:"#6B6822;#D1B95D;#ECD067",enterBg:"#FFFFFF"}]},getGradient:function(){this.defaultBg=this.shadows[this.id-1].defaultBg.split(";");this.enterBg=this.shadows[this.id-1].enterBg;this.bgColor=this.context.createLinearGradient(0,
0,0,this.height/2);this.bgColor.addColorStop(0,this.defaultBg[0]);this.bgColor.addColorStop(0.5,this.defaultBg[1]);this.bgColor.addColorStop(1,this.defaultBg[2]);this.coverBg=this.context.createLinearGradient(0,0,0,this.height/4*3);this.coverBg.addColorStop(0,"rgba(255,255,255,0.15)");this.coverBg.addColorStop(1,"rgba(255,255,255,0.3)")},shadowColor:function(b){this.color=this.context.createRadialGradient(this.width/2,1.2*this.height,0,this.width/2,1.2*this.height,this.height/1);this.color.addColorStop(0.3,
Color(this.enterBg).rgba(1*b));this.color.addColorStop(0.6,Color(this.enterBg).rgba(0.4*b));this.color.addColorStop(0.8,Color(this.enterBg).rgba(0.1*b));this.color.addColorStop(0.9,Color(this.enterBg).rgba(0))},enterEvent:function(){this.getGradient();this.change=function(b,c){this.shadowColor(this.focus?b/c:1-b/c);this.draw()};this.timer&&this.timer.stop();this.timer=this.change.animation(this,1E3)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));
this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});
Class("OtherButton",{create:function(b,c){c&&(this.width=b.width,this.height=b.height,this.id=b.id,this.bdRadius=this.height/12,this.lineWidth=this.height/10,this.parent=c,this.initHtml(),this.draw(),this.initCss())},initHtml:function(){this.container=$("<div></div>");this.canvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.context=this.canvas[0].getContext("2d");this.parent.append(this.container);this.container.append(this.canvas)},initCss:function(){this.container.css({width:this.width+
"px",height:this.height+"px",left:"0",top:"0"})},draw:function(){var b={width:this.width,height:this.height,bdRadius:this.bdRadius,lineWidth:this.lineWidth,context:this.context,canvas:this.canvas};switch(this.id){case 1:this.button=new OtherButton1(b,this.container);break;case 2:this.button=new OtherButton2(b,this.container);break;case 3:this.button=new OtherButton3(b,this.container)}},onResize:function(b,c){this.bdRadius=c/12;this.lineWidth=c/10;this.width=b;this.height=c;var d={width:this.width,
height:this.height,bdRadius:this.bdRadius,lineWidth:this.lineWidth,context:this.context,canvas:this.canvas};this.container.css({width:this.width+"px",height:this.height+"px"});this.canvas[0].width=this.width;this.canvas[0].height=this.height;if(this.button)this.button.onResize(d)}});
Class("OtherButton1",{create:function(b,c){c&&(this.width=b.width,this.height=b.height,this.bdRadius=b.bdRadius,this.lineWidth=b.lineWidth,this.context=b.context,this.canvas=b.canvas,this.parent=c,this.enter=!1,this.createSecondCanvas(),this.drawButton(),isPhone()||isPad()||this.initEvent())},onResize:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=b.lineWidth;this.secCanvas[0].width=this.width;this.secCanvas[0].height=this.height;this.drawButton()},drawButton:function(){this.context.clearRect(0,
0,this.width,this.height);this.borderColor1=this.context.createLinearGradient(this.lineWidth+5,this.lineWidth+5,this.height/2+this.lineWidth+5,this.height/2+this.lineWidth+5);this.borderColor1.addColorStop(0,"#333");this.borderColor1.addColorStop(1,"#333");this.outerBg="#111";this.drawfirst();this.drawDash();this.drawSecond();this.drawUnder()},createSecondCanvas:function(){this.secCanvas=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.secCtx=this.secCanvas[0].getContext("2d");
this.parent.append(this.secCanvas);this.secCanvas.css({position:"absolute",left:"0",top:"0",background:"transparent"})},drawfirst:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.lineWidth/2);this.context.shadowColor="#333";this.context.shadowBlur=10;this.context.fillStyle="#105A8D";this.context.fillRect(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth,this.height/2-this.lineWidth);this.context.closePath()},drawSecond:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/
2,this.lineWidth/2);this.context.shadowColor="#fff";this.context.shadowBlur=10;var b=this.context.createLinearGradient(0,0,0,this.height/2);b.addColorStop(0,"rgba(255,255,255,0.2)");b.addColorStop(1,"rgba(255,255,255,0)");this.context.fillStyle=b;this.context.fillRect(this.lineWidth/4,this.lineWidth/2,this.width-this.lineWidth/4,this.height/2-this.lineWidth);this.context.closePath()},drawUnder:function(){this.context.beginPath();this.context.moveTo(this.lineWidth/2,this.height+this.lineWidth/2);this.context.shadowColor=
"#333";this.context.shadowBlur=10;var b=this.context.createLinearGradient(0,this.height/2,0,this.height);b.addColorStop(0,Color("#008EFF").rgba(0.2));b.addColorStop(0.05,Color("#008EFF").rgba(0.5));b.addColorStop(0.5,Color("#fff").rgba(0));this.context.fillStyle=b;this.context.fillRect(this.lineWidth/2,this.height/2,this.width-this.lineWidth,this.height/2-this.lineWidth);this.context.closePath();this.context.beginPath();b=this.context.createLinearGradient(0,this.height/2,0,this.height);b.addColorStop(0,
"rgba(255,255,255,0.05)");b.addColorStop(0.8,"rgba(255,255,255,0)");this.context.fillStyle=b;this.context.fillRect(this.lineWidth/2,this.height/2,this.width-this.lineWidth,this.height/2-this.lineWidth);this.context.closePath();this.context.save();b=this.context.createLinearGradient(0,this.height/2,0,this.height);b.addColorStop(0,"rgba(255,255,255,0.2)");b.addColorStop(0.5,"rgba(255,255,255,0)");this.context.fillStyle=b;for(b=-this.width/2;b<this.width+this.lineWidth;b+=this.width/50)for(var c=this.height;c>
this.height/2;c-=this.height/70)this.context.beginPath(),this.context.shadowColor="#fff",this.context.shadowBlur=10,this.context.arc(c+b,c,this.height/140,0,2*Math.PI,!1),this.context.fill(),this.context.closePath();this.context.restore();this.context.clearRect(0,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height);this.context.clearRect(this.width-this.lineWidth/2,this.height/2-this.lineWidth/2,this.lineWidth/2,this.height)},drawDash:function(){this.context.save();this.context.fillStyle=
"rgba(255,255,255,0.15)";for(var b=this.width+this.lineWidth/2+this.height/2;b>this.lineWidth;b-=this.width/50)for(var c=this.height/2;c>this.lineWidth;c-=this.height/70)this.context.beginPath(),this.context.shadowColor="#fff",this.context.shadowBlur=this.height/4,this.context.arc(b-c,c-this.lineWidth/2,this.height/140,0,2*Math.PI,!1),this.context.fill(),this.context.closePath();this.context.restore()},createBubble:function(b,c,d){this.secCtx.beginPath();var f=this.secCtx.createRadialGradient(c,d,
0,c,d,this.height/20+this.height/40*b);f.addColorStop(0,"rgba(255,255,255,0.4)");f.addColorStop(1,"rgba(255,255,255,0.05)");this.secCtx.shadowColor="#fff";this.secCtx.shadowBlur=10;this.secCtx.fillStyle=f;this.secCtx.arc(c,d,this.height/20+this.height/40*b,0,2*Math.PI,!1);this.secCtx.fill();this.secCtx.closePath()},popBubble:function(b){this.secCtx.clearRect(0,0,1.5*this.width,1.5*this.height);for(var c=this.width-2*this.lineWidth,d=this.height/2,f=1;10>f;f++)1==f?this.createBubble(b,c*f/9-b*this.lineWidth,
d-b*(this.height/2-this.height/30)):5==f?this.createBubble(b,c*f/9-b*this.lineWidth,d-b*(this.height/2-this.height/30)):8==f?this.createBubble(b,c*f/9-b*this.lineWidth,d-b*(this.height/2-this.height/30)):this.createBubble(b,c*f/9+b*this.lineWidth,d+-b*(this.height/2-this.height/30))},enterEvent:function(){this.change=function(b,c){b==c-1?this.popBubble(b/c*1.2):b==c?this.secCtx.clearRect(0,0,1.5*this.width,1.5*this.height):this.popBubble(b/c)};this.timer&&this.timer.stop();this.timer=this.change.animation(this,
600)},initEvent:function(){this.secCanvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.secCanvas.bind(_event._leave,function(){this.focus=!1;this.secCtx.clearRect(0,0,1.5*this.width,1.5*this.height)}.bind(this))}});
Class("OtherButton2",{create:function(b,c){c&&(this.width=b.width,this.height=b.height,this.bdRadius=b.bdRadius,this.lineWidth=2*b.lineWidth,this.context=b.context,this.canvas=b.canvas,this.parent=c,this.enter=!1,this.drawButton(),isPhone()||isPad()||this.initEvent())},onResize:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=2*b.lineWidth;this.drawButton()},draw:function(){this.context.beginPath();this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/
2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);
this.context.fillStyle=this.outerBg;this.context.fill();this.context.closePath();this.context.beginPath();this.context.moveTo(this.lineWidth/1.5,this.lineWidth/1.5);var b=this.context.createLinearGradient(0,this.lineWidth/1.5,0,this.height/2);b.addColorStop(0,"rgba(255,255,255,0.50)");b.addColorStop(1,"rgba(255,255,255,0.25)");this.context.fillStyle=b;this.context.arcTo(this.width-this.lineWidth/1.5,this.lineWidth/1.5,this.width-this.lineWidth/1.5,this.height/2,this.bdRadius);this.context.arcTo(this.width-
this.lineWidth/1.5,this.height/2,this.lineWidth/1.5,this.height/2,this.bdRadius);this.context.arcTo(this.lineWidth/1.5,this.height/2,this.lineWidth/1.5,this.lineWidth/1.5,this.bdRadius);this.context.arcTo(this.lineWidth/1.5,this.height/2,this.lineWidth/1.5,this.lineWidth/1.5,this.bdRadius);this.context.arcTo(this.lineWidth/1.5,this.lineWidth/1.5,this.width-this.lineWidth/1.5,this.lineWidth/1.5,this.bdRadius);this.context.fill()},drawfirst:function(b){this.context.save();this.context.clearRect(-20,
-20,2*this.width,2*this.height);this.context.lineWidth=this.lineWidth/4;this.context.beginPath();this.context.shadowColor="#FCF500";this.context.shadowBlur=40*b;this.context.moveTo(this.bdRadius+this.lineWidth/3,this.lineWidth/3);this.context.arcTo(this.width-this.lineWidth/3,this.lineWidth/3,this.width-this.lineWidth/3,this.height-this.lineWidth/3,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/3,this.height-this.lineWidth/3,this.lineWidth/3,this.height-this.lineWidth/3,this.bdRadius);
this.context.arcTo(this.lineWidth/3,this.height-this.lineWidth/3,this.lineWidth/3,this.lineWidth/3,this.bdRadius);this.context.arcTo(this.lineWidth/3,this.lineWidth/3,this.width-this.lineWidth/3,this.lineWidth/3,this.bdRadius);this.context.fillStyle="#393939";this.context.fill();this.context.restore()},drawButton:function(){this.context.beginPath();this.outerBg="#111";this.drawfirst(0);this.draw()},enterEvent:function(){this.change=function(b,c){this.drawfirst(this.focus?b/c:1-b/c);this.draw()};this.timer&&
this.timer.stop();this.timer=this.change.animation(this,600)},initEvent:function(){this.canvas.bind(_event._enter,function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});
Class("OtherButton3",{create:function(b,c){c&&(this.width=b.width,this.height=b.height,this.bdRadius=b.bdRadius,this.lineWidth=b.lineWidth,this.context=b.context,this.canvas=b.canvas,this.parent=c,this.initConfig(),this.getGradient(),this.draw(),isPhone()||isPad()||this.initEvent())},onResize:function(b){this.width=b.width;this.height=b.height;this.bdRadius=b.bdRadius;this.lineWidth=2*b.lineWidth;this.getGradient();this.draw()},draw:function(b){this.context.clearRect(0,0,this.width,this.height);this.context.lineWidth=
this.lineWidth;this.context.save();this.focus&&(this.context.shadowColor=this.enterBg,this.context.shadowBlur=this.height/30*b,this.context.shadowOffsetY=-this.height/40);this.drawFirstBg();this.context.restore();this.drawSecondBg();this.drawCover();this.drawCoverShadow()},drawFirstBg:function(){this.context.beginPath();this.context.lineWidth=this.height/100;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-
this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor1;this.context.fill();this.context.stroke();
this.context.closePath()},drawSecondBg:function(){this.context.beginPath();this.context.lineWidth=this.height/100;this.context.moveTo(this.bdRadius+this.lineWidth/2,this.lineWidth/2);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.height-this.lineWidth/2,this.lineWidth/2,this.height-this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.height-
this.lineWidth/2,this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.fillStyle=this.bgColor2;this.context.fill();this.context.stroke();this.context.closePath()},drawCoverShadow:function(){this.context.save();this.context.scale(1,1/3);this.context.beginPath();this.context.shadowColor=this.enterBg;this.context.shadowBlur=this.height/2;this.context.restore()},drawCover:function(){this.context.beginPath();
this.context.fillStyle=this.coverBg;this.context.moveTo(this.lineWidth/2,this.height/2.5);this.context.arcTo(this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.lineWidth/2,this.bdRadius);this.context.arcTo(this.width-this.lineWidth/2,this.lineWidth/2,this.width-this.lineWidth/2,this.height/4*3-this.lineWidth/2,this.bdRadius);this.context.lineTo(this.width-this.lineWidth/2,this.height/2.5);this.context.fill();this.context.closePath();this.context.beginPath();this.context.fillStyle=
this.coverBg;this.context.moveTo(this.lineWidth/2,this.height/2.5);this.context.quadraticCurveTo(this.width/2,this.height/5*4,this.width-this.lineWidth/2,this.height/2.5);this.context.fill();this.context.closePath()},initConfig:function(){this.otherColor={defaultBg:"#24363E;#E8E7E7;#E8E7E7",enterBg:"#f00"}},getGradient:function(){this.defaultBg=this.otherColor.defaultBg.split(";");this.enterBg=this.otherColor.enterBg;this.bgColor2=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height-
this.lineWidth/2);this.bgColor2.addColorStop(0,Color(this.defaultBg[0]).rgba(0.5));this.bgColor2.addColorStop(1,Color(this.defaultBg[0]).rgba(0.05));this.bgColor1="transparent";this.coverBg=this.context.createLinearGradient(0,0,0,this.height/4*3);this.coverBg.addColorStop(0,"rgba(255,255,255,0.1)");this.coverBg.addColorStop(1,"rgba(255,255,255,0.2)")},setBgColor:function(b){this.bgColor1=this.context.createLinearGradient(0,this.lineWidth/2,0,this.height-this.lineWidth/2);this.bgColor1.addColorStop(0,
Color(this.enterBg).rgba(1));this.bgColor1.addColorStop(0.25+0.6*b,Color(this.enterBg).rgba(0.85));this.bgColor1.addColorStop(0.45+0.55*b,Color(this.enterBg).rgba(0))},enterEvent:function(){this.getGradient();this.change=function(b,c){this.context.clearRect(0,0,this.width+this.lineWidth,this.height+this.lineWidth);var d=this.focus?b/c:1-b/c;b!=c||this.focus?this.setBgColor(d):this.bgColor1="transparent";this.draw(d)};this.timer&&this.timer.stop();this.timer=this.change.animation(this,400)},initEvent:function(){this.canvas.bind(_event._enter,
function(){this.focus=!0;this.enterEvent()}.bind(this));this.canvas.bind(_event._leave,function(){this.focus=!1;this.enterEvent()}.bind(this))}});
Class("DynamicButton",{Package:"PageItem",create:function(b,c,d,f){c&&(this._super(b,c,d,f),this.animateConfig(),this.fScale=d/this.config.pageWidth,this.config.src&&(this.initConfig(),this.initHtml(),this.initCss(),this.initEvt(),this.initLinkHint(this.button),parseBool(this.config.reflection)&&this.imageReflection(this.button)))},initHtml:function(){null==this.config.src||""==this.config.src?(this.button=$("<button type = 'button' class='flip-action'></button>"),this.img=$("<img/>"),this.config.alpha=
0):".png"==this.config.src.substr(this.config.src.length-4,4)&&(this.button=$("<div class='flip-action'></div>"),this.img=$("<img src='"+this.config.src+"'/>"),this.buttonEvt=$("<div></div>"),this.createCaption(),this.hasSpecial=this.config.src.indexOf("RotatePriceButton"),-1!=this.hasSpecial&&(this.sepcialImg(),this.rotationImg()),this.button.append(this.img),this.button.append(this.buttonEvt));this.setRotation(this.button,this.config.rotation);this.parent.append(this.button);-1!=this.hasSpecial&&
this.img.changeButtonColor(this.BGColor)},sepcialImg:function(){this.coverSrc=this.config.src.replace(".png","Cover.png");this.img.attr("src","data:image/png;base64,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");
this.coverImg=$("<img src='"+this.coverSrc+"'/>");this.coverImg.css("z-index","2");this.button.append(this.coverImg);this.img.changeButtonColor(this.BGColor);this.prices=this.price.split(".");this.textBox=$("<div style='position:absolute;font-size:12px;'></div>");this.unitBox=$("<div style='z-index:3;position:absolute;color:#fff'>"+this.unit+"</div>");this.priecInteger=$("<div style='z-index:3;position:relative;color:#fff'>"+this.prices[0]+"</div>");this.priecDecimal=$("<div style='z-index:3;position:absolute;color:#fff'>"+
this.prices[1]+"</div>");this.fontTitle=$("<div style='z-index:3;position:absolute;color:#fff'>"+this.fontTitle+"</div>");this.textBox.append(this.fontTitle).append(this.priecInteger).append(this.priecDecimal).append(this.unitBox);this.button.append(this.textBox);this.elems=[{elem:this.fontTitle,scale:this.height/25/12,x:0.25*this.width,y:0.303*this.height},{elem:this.priecInteger,scale:this.height/7/12,x:0.307*this.width,y:0.363*this.height},{elem:this.priecDecimal,scale:this.height/25/12,x:0.45*
this.width,y:0.384*this.height},{elem:this.unitBox,scale:this.height/7/12,x:0.505*this.width,y:0.363*this.height}];this.setSpecialImgCss();this.button.bind(isTouch?_event._down:_event._enter,function(){animateOnce(this.button,{transform:"scale(1.5)"},0.5)}.bind(this));this.button.bind(isTouch?_event._up:_event._leave,function(){animateOnce(this.button,{transform:"scale(1)"},0.5);this.buttonEvt.css({display:"none"})}.bind(this))},setSpecialImgCss:function(){for(var b=0;b<this.elems.length;b++){var c=
this.elems[b];c.elem.css({transform:"scale("+c.scale+")"})}this.textBox.css({"z-index":"2",width:this.width/2+"px",height:this.height/2+"px",left:this.width/4+"px",top:this.height/4+"px"});this.fontTitle.css({left:"20%",top:"15%","transform-origin":"0 0 0",width:this.width/2/(this.height/25/12)+"px"});this.priecInteger.css({display:"inline-block","transform-origin":"0 0 0",left:"15%",top:"35%"});this.priecDecimal.css({display:"inline-block","transform-origin":"0 0 0",left:this.width/4-this.height/
25/12*12+"px",top:"32%"});this.unitBox.css({display:"inline-block","transform-origin":"0 0 0",right:0.15*this.width+"px",top:"35%"})},rotationImg:function(){-1!=this.hasSpecial&&(this.animate=function(b,c){this.rotation3d(360*b/c)},this.animate.animation(this,1E4),this.timer=setInterval(function(){this.animate.animation(this,1E4)}.bind(this),1E4))},rotation3d:function(b){this.img.css({transform:"rotate3d(0,0,1,"+b+"deg)","-webkit-transform":"rotate3d(0,0,1,"+b+"deg)","-o-transform":"rotate3d(0,0,1,"+
b+"deg)","-ms-transform":"rotate3d(0,0,1,"+b+"deg)","-moz-transform":"rotate3d(0,0,1,"+b+"deg)"})},initConfig:function(){this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.button=null;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.src&&(this.config.src=this.config.src.replace(".swf",".png"),this.config.src=uiBaseURL+this.config.src.slice(this.config.src.lastIndexOf("/")+1));this.config.properties&&3==this.config.properties.length&&
(this.config.buttonCaption=this.config.properties[0].value,this.color=Color(this.config.properties[1].value).toString(),this.fontSize=this.config.properties[2].value);this.config.properties&&4==this.config.properties.length&&(this.color=Color("#ffffff").toString(),this.fontTitle=this.config.properties[0].value,this.unit=this.config.properties[1].value,this.price=this.config.properties[2].value,this.BGColor=Color(this.config.properties[3].value).toString());this.config.hint&&(this.config.hint.hintShapeColor=
Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=this.config.hint.hintShapeColor2?Color(this.config.hint.hintShapeColor2).toString():Color(this.config.hint.hintShapeColor).toString(),"null"==this.config.hint.text&&(this.config.hint.text=""))},initCss:function(){this.img.css({position:"absolute",width:this.width+"px",height:this.height+"px","z-index":"1",top:"0",bottom:"0",left:"0",right:"0"});-1!=this.config.src.indexOf("RotatePriceButton")&&this.coverImg.css({position:"absolute",
width:this.width+"px",height:this.height+"px",top:"0",bottom:"0",left:"0",right:"0"});this.buttonEvt.css({display:"none",width:this.width+"px",height:this.height+"px"});this.button.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",opacity:this.config.alpha})},createCaption:function(){this.config.buttonCaption&&(this.buttonCaption=new label(this.config.buttonCaption,this.button),this.captionCss())},captionCss:function(){var b=transformCSS({origin:{x:0,
y:0},scale:this.fScale});this.buttonCaption.labelBox.css(b);b=isTouchDevice()?0:5;this.config.properties&&(this.buttonCaption.setFont(this.fontSize+"px",this.color,this.fontSize),this.buttonCaption.labelBox.css({"z-index":"3","text-align":"center","pointer-events":"none",overflow:"hidden",height:"auto",width:(this.width-2*b)/this.fScale+"px"}),this.buttonCaption.setLabelPosition(b,this.fontSize*this.height/100))},parseConfig:function(b){return{width:b.location.width,height:b.location.height,pageWidth:b.location.pageWidth,
pageHeight:b.location.pageHeight,rotation:b.location.rotation,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.meta.item.swfURL,action:b.action,hint:b.hint,buttonCaption:"",properties:b.meta.item.properties,animation:b.animation}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.fScale=this.pageWidth/this.config.pageWidth;this.width=this.config.width*this.pageWidth;this.height=
this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.button.css({width:this.width+"px",height:this.height+"px"});this.button.find("img").css({width:this.width+"px",height:this.height+"px"});transformCSS({origin:{x:0,y:0},scale:this.fScale});this.buttonCaption&&this.captionCss();this.initCss();-1!=this.hasSpecial&&(this.textBox.css({transform:"scale("+this.fScale+")","transform-origin":"0 0"}),this.textBox.css({"z-index":"2",left:this.width/
4+"px",top:this.height/4+"px"}))},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.button.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.button.one(b,function(){this.button.css({animation:""})}.bind(this))}},hide:function(){isTouchDevice()},initEvt:function(){this.addActionEvent(this.button);this.button.bind(_event._down,function(){this.buttonEvt.css({display:"block"})}.bind(this));
this.button.bind(_event._end,function(){this.buttonEvt.css({display:"none"})}.bind(this));this.button.bind("mouseleave",function(){this.buttonEvt.css({display:"none"})}.bind(this))}}).extend(PageItem.Item);global.hddr.soo6=function(){return hddr.bbb5};
Class("Area",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.id="Area"+g;this.color=Color(this.config.color);this.initArea();this.initEvents();this.onResize(d,f)},initArea:function(){this.Area=$("<div id='"+this.id+"'></div>");this.Area.css({position:"absolute",overflow:"hidden","background-color":this.color.rgba(this.config.alpha)});!0===parseBool(this.config.rounds)&&this.Area.css({"border-radius":this.config.ellipseWidth+"px "+this.config.ellipseHeight+"px"});this.addShadow(this.Area);
this.parent.append(this.Area)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,color:b.color,rounds:b.round,ellipseWidth:b.ellipseWidth,ellipseHeight:b.ellipseHeight,hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,action:b.action}},initEvents:function(){this.addActionEvent(this.Area)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*
this.pageHeight;this.Area.css({width:this.width+"px",height:this.height+"px"});this.setPosition();if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height());if(null!=this.audios)this.audios.onResize(bookContainer.width(),bookContainer.height())},setPosition:function(){this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.Area.css({left:this.left+"px",top:this.top+
"px"})}}).extend(PageItem.Item);
Class("VideoForm",{Package:"PageItem",create:function(b,c,d,f,g){this.parent=b;this.type=g;this.playCount=0;this.config=$.extend({width:400,height:300,src:null,alpha:0.3,caption:""},c);null!=this.config.src&&(this.config.width=Math.min(windowWidth-10,Number(this.config.width)),this.config.height=Math.min(windowHeight-90,Number(this.config.height)),this.sw=d,this.sh=f,this.th=28,this.background=$("<div ></div>"),this.closeButton=$("<div></div>"),this.form=$("<div class='flip-action'></div>"),this.titleBar=
$("<div></div>"),"text"!=this.type&&(this.config.src=this.fixRelativePath(this.config.src)),""!=this.config.caption&&(this.captionLabel=new label(this.config.caption,this.titleBar),this.captionLabel.setLabelPosition(5,3,["left","top"]),this.captionLabel.setFont(13,"#dddddd","Tahoma"),this.captionLabel.labelBox.css({width:this.config.width-35+"px","padding-right":"25px"})),"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"},this.captionLabel.labelBox.css({"padding-left":"25px",
"padding-right":"0","text-align":"right",direction:"rtl"})),this.config.hideTitle&&this.titleBar.text(""),this.parent.append(this.background),this.parent.append(this.form),this.form.append(this.titleBar),this.titleBar.append(this.closeButton),this.setCss(),"text"==this.type&&(b=(new TextFormatAnalyzer(this.config.src)).getHTML(this.alignCss),b.css({position:"absolute"}),this.text=$("<div class='text'></div>"),this.text.html(b),b.css({width:this.config.width-20+"px"}),this.text.css({width:this.config.width-
10+"px",height:this.config.height-this.th-10+"px",top:this.th+2+"px",left:"0px",overflow:"hidden",position:"absolute",padding:"5px"}),this.form.css({"background-color":"#ffffff",border:"5px solid rgba(204,204,204,0.8)"}),this.form.append(this.text),this.initScroll(this.text,b),this.text.scroll({},Direction.top,"win10")),"video"==this.type&&(this.video=new Media($("<video src='"+this.config.src+"' webkit-playsinline='true' playsinline='true' controls='controls'></video>"),"video"),this.video.setCss({width:this.config.width+
"px",height:this.config.height-this.th+"px",top:this.th+"px","z-index":"200",position:"absolute"}),this.form.css({"background-color":"#000000",border:"5px solid rgba(204,204,204,0.8)"}),this.form.append(this.video.$media),0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.video.play()}.bind(this)),this.video.$media.bind("play",function(b){this.playCount>this.config.H5PlaybackNumber&&
(this.playCount=0)}.bind(this)),this.video.play()),"flash"==this.type&&(this.content=$("<div><div>"),this.content.flash({swf:this.config.src,width:this.config.width+"px",height:this.config.height-this.th+"px",wmode:"transparent"}),this.content.css({width:this.config.width+"px",height:this.config.height-this.th+"px",top:this.th+2+"px","line-height":"1.8",overflow:"auto",position:"absolute"}),this.form.css("background-color","#000000"),this.form.append(this.content)),this.form.css({left:(windowWidth-
this.config.width)/2+"px",top:(windowHeight-this.config.height)/2+"px"}),this.initEvent())},initScroll:function(b,c){b.addClass("stage");c.addClass("swiper");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);b.append(this.progress);this.progress.css({background:"#aaa",width:"8px",height:"100%",position:"absolute",padding:"5px 0 5px",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",
position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},setCss:function(){this.closeButton.css({position:"absolute",background:"url("+uiBaseURL+"singleClose.png) repeat 2px 3px",right:"5px",top:"3px",width:"15px",height:"18px",cursor:"pointer"});this.background.css({width:"100%",height:"100%",background:"rgba(0,0,0,0.5)","z-index":200,position:"absolute",left:"0px",top:"0px"});this.form.css({width:this.config.width+"px",height:this.config.height+"px",left:"0",top:"0",overflow:"hidden",
"-webkit-border-radius":"5px","-moz-border-radius":"5px","-ms-border-radius":"5px","border-radius":"5px",position:"absolute","z-index":"201",border:"5px solid rgba(251,251,251,0.8)"});this.titleBar.css({"line-height":"1.8",width:this.config.width+"px",height:this.th+"px","border-top-left-radius":"5px","border-top-right-radius":"5px",position:"absolute",cursor:"pointer","background-color":"#111111"});"right"==this.config.languageLayout&&this.closeButton.css({right:"auto",left:"3px"})},initEvent:function(){this.form.bind(_event._down,
function(b){b.stopPropagation()}.bind(this));this.background.bind(_event._click,function(b){this.closeForm();b.preventDefault();b.stopPropagation();return!1}.bind(this));this.closeButton.bind(_event._click,function(b){this.closeForm();b.preventDefault();b.stopPropagation();return!1}.bind(this));if(this.config.drag){var b,c,d,f,g=!1;this.background.on(_event._end,function(b){return g=!1}.bind(this));this.titleBar.bind("mousedown",function(h){h=h.originalEvent&&h.originalEvent.changedTouches?h.originalEvent.changedTouches:
h.changedTouches?h.changedTouches:[h];this.titleBar.css({cursor:"move"});b=parseInt(this.form.left());c=parseInt(this.form.top());d=parseInt(h[0].pageX);f=parseInt(h[0].pageY);g=!0}.bind(this));for(var h=[this.background,this.form],k=0;k<h.length;k++)h[k].bind(_event._move,function(h){h=h.originalEvent&&h.originalEvent.changedTouches?h.originalEvent.changedTouches:h.changedTouches?h.changedTouches:[h];g&&(this.titleBar.css({cursor:"move"}),b=b+h[0].pageX-d,c=c+h[0].pageY-f,this.form.css({left:b+"px",
top:c+"px"}),d=h[0].pageX,f=h[0].pageY)}.bind(this));this.titleBar.bind(_event._up,function(h){h=h.originalEvent&&h.originalEvent.changedTouches?h.originalEvent.changedTouches:h.changedTouches?h.changedTouches:[h];b=b+h[0].pageX-d;c=c+h[0].pageY-f;this.form.css({left:b+"px",top:c+"px"});this.titleBar.css({cursor:"pointer"});g=!1;d=b;f=c}.bind(this))}},closeForm:function(){this.form.hide(300,function(){this.video&&this.video.pause();this.background.remove();this.form.remove();for(var b=0,c=[this.background,
this.form];b<c.length;b++)c[b].unbind(_event._move)}.bind(this))},onResize:function(){}}).extend(PageItem.Item);
Class("MobileVideo",{create:function(b,c,d,f,g){this.config=c;this.parent=b;this.playCount=0;this.parentWidth=d;this.parentHeight=f;!0==bookConfig.isFlipPdf&&(this.config.src.startsWith("./")?this.config.src="."+this.config.src:this.config.src.isUrl()||(this.config.src="../"+this.config.src));this.closeButton=$("<div></div>");b=getLanguage("btnClose","Close");this.closeButtonHint=$("<div>"+b+"</div>");this.closeButtonHintArrow=$("<div></div>");this.content=$("<div></div>");this.video=new Media($("<video controls='controls' class='flip-action'><source src='"+
this.config.src+"'></video>"),"video");this.content.append(this.video.$media);this.parent.append(this.closeButton);this.parent.append(this.closeButtonHint);this.parent.append(this.closeButtonHintArrow);this.parent.append(this.content);this.video.$media[0].play&&this.video.play();this.initStyle();this.initEvents();this.onResize()},initStyle:function(){this.content.css({position:"absolute","z-index":200,left:"0px",top:"0px",background:"rgb(0,0,0)"});this.video.setCss({left:"2px","z-index":"200",position:"absolute",
width:"100%",margin:"auto",top:"0px",bottom:"0px"});this.closeButton.css({position:"absolute","background-image":"url("+uiBaseURL+"closecat.png)",right:"20px",top:"20px",width:"22px",height:"20px",display:"block","z-index":9999});this.closeButtonHint.css({position:"absolute","background-color":"white",border:"1px solid #EEEEEE","border-radius":"4px","font-family":'"Tahoma","sans-serif","Arial"',"font-size":"18px",right:"55px",top:"15px","padding-left":"5px","padding-right":"5px","padding-top":"2px",
"padding-bottom":"2px",display:"block","z-index":9999});this.closeButtonHintArrow.css({position:"absolute",width:"0px",height:"0px",right:"47px",top:"24px","border-top":"5px solid transparent","border-bottom":"5px solid transparent","border-left":"10px solid #EEEEEE","z-index":1E4})},initEvents:function(){function b(b){b.stopPropagation();return!1}this.initTimer();this.content.on(_event._down,b);this.content.on(_event._end,b);this.video.$media.on(_event._down,b);this.video.$media.on(_event._end,b);
this.closeButton.on(_event._down,b);0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.video.play()}.bind(this));this.video.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this));this.closeButton.on(_event._end,function(b){this.video.setCss("display","none");this.content.css("display","none");this.setCurrentTime(0);this.video.pause();
this.content.remove();this.closeButton.remove();this.closeButtonHint.remove();this.closeButtonHintArrow.remove();this.timer&&this.timer.stop();b.stopPropagation();return!1}.bind(this))},initTimer:function(){this.timer=function(){if(this.parentWidth!=windowWidth||this.parentHeight!=windowHeight)this.parentWidth=windowWidth,this.parentHeight=windowHeight,this.onResize()}.interval(this,300)},setCurrentTime:function(b){this.video.setCurrentTime(b)},onResize:function(){this.content.css({width:this.parentWidth+
"px",height:this.parentHeight+"px"});this.video.setCss({height:this.parentHeight-80+"px"})}});
Class("TextLightBox",{create:function(b,c,d,f,g){this.parent=b;this.config=c;this.background=$("<div class='flip-action'></div>");this.box=$("<div id=textling></div>");this.title=$("<div>"+this.config.caption+"</div>");"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"},this.title.css({"text-align":"right",direction:"rtl"}));b=(new TextFormatAnalyzer(this.config.src)).getHTML(this.alignCss);this.panel=$("<div></div>");this.panel.html(b);this.config.hideTitle&&
this.title.text("");b=getLanguage("btnClose","Close");this.closeButton=$("<div>"+b+"</div>");this.parent.append(this.background);this.parent.append(this.box);this.box.append(this.title).append(this.panel).append(this.closeButton);this.setCss();this.initEvent()},setCss:function(){this.panel.css({position:"absolute",width:windowWidth-40-16+"px","overflow-x":"hidden","font-size":"12px","line-height":"2",left:"9px"});this.background.css({top:0,"background-color":"black",opacity:"0.6",width:"100%",height:"100%",
position:"absolute","z-index":"100"});this.box.css({width:windowWidth-40+"px",height:windowHeight-60+"px",position:"absolute",margin:"auto",top:"0",left:"0",bottom:"0",right:"0","background-color":"white","border-radius":"4px","z-index":"200",overflow:"hidden"});this.closeButton.css({position:"absolute",bottom:"8px","border-radius":"4px",cursor:"pointer","text-align":"center",padding:"8px 12px","background-color":"red",width:windowWidth-80+"px",right:"0",left:"0",margin:"auto",color:"white"});this.title.css({position:"relative",
padding:"13px 18px","font-weight":"bold",background:"#EBEBEB","border-radius":"5px 5px 0 0"});this.panel.css({height:windowHeight-60-this.closeButton.height()-32-this.title.height()-26+"px"})},initEvent:function(){this.closeButton.bind("click",function(){this.background.fadeOut(function(){this.background.remove()}.bind(this));this.box.animate({opacity:0},500,function(){this.box.remove()}.bind(this))}.bind(this));$(window).resize(function(){this.setCss()}.bind(this))},onResize:function(){this.setCss()}});
global.hddr.soa7=bdor[3]+bdor[10];
Class("Callout",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.getDefault(d,f);this.getCanvasDefault();this.animateConfig();this.container=$("<div class='callout'></div>");this.callout=$("<canvas  width="+this.canvasWidth+" height="+this.canvasHeight+"></canvas>");this.textBox=$("<div></div>");this.config.textStr||(this.config.textStr=this.config.formats.defaultFormat.htmlText);b=new TextFormatAnalyzer(this.config.textStr);this.text=b.getHTML();this.context=this.callout[0].getContext("2d");
this.fillStyle=this.fillColor();this.initCss(d,f);this.config.action||b.htmlHasATag()||this.container.css({"pointer-events":"none"});switch(this.config.bubbleType){case "1":this.drawRoundRect();break;case "2":this.drawRoundBubble();break;case "3":this.drawCloudBubble()}this.textBox.append(this.text);this.container.append(this.callout,this.textBox);this.parent.append(this.container);this.setRotation(this.callout,this.config.location.rotation);this.setRotation(this.text,this.config.location.rotation);
this.setRotation(this.textBox,this.config.location.rotation);this.resizeCallout(d);this.initEvents();parseBool(this.config.location.reflection)&&this.imageReflection(this.cross)},getDefault:function(b,c){this.config.location.pageWidth||(this.config.location.pageWidth=1080);this.config.location.pageHeight||(this.config.location.pageHeight=1440);this.width=this.config.location.width*this.config.location.pageWidth;this.height=this.config.location.height*this.config.location.pageHeight;this.pageWidth=
this.config.location.pageWidth;this.pageHeight=this.config.location.pageHeight;this.canvasPosition=Point(this.config.location.x*b,this.config.location.y*c);this.left=this.config.hookContrPointRatioX*this.width;this.top=this.config.hookContrPointRatioY*this.height;this.dock1=Point(this.config.hookContr1RatioX*this.width,this.config.hookContr1RatioY*this.height);this.dock2=Point(this.config.hookContr2RatioX*this.width,this.config.hookContr2RatioY*this.height);this.vertex=Point(this.config.hookContrPointRatioX*
this.width,this.config.hookContrPointRatioY*this.height);this.cornerRadius=parseInt(this.config.cornerRadiut);this.fontSize=this.config.lineHeightRation*this.pageWidth;this.borderWidth=this.config.borderWidth;this.fScale=b/this.pageWidth;this.strokeStyle=Color(this.config.borderColor).rgba(this.config.bordreAlpha);this.canvasLeft=this.canvasTop=this.canvasHeight=this.canvasWidth=0},getCanvasDefault:function(){switch(this.config.hookDirect){case "Down":if(0>this.vertex.x){this.canvasWidth=this.width-
this.vertex.x+20;this.canvasHeight=this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-(this.canvasWidth-this.width-10);this.leftTop=Point(this.canvasWidth-this.width-10,10);this.rightTop=Point(this.canvasWidth-10,10);this.rightBottom=Point(this.canvasWidth-10,this.height+10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.height+10);this.center=Point(this.canvasWidth-10-this.width/2,10+this.height/2);this.dock1=Point(this.dock1.x-this.vertex.x+
10,this.height+10);this.dock2=Point(this.dock2.x-this.vertex.x+10,this.height+10);this.vertex=Point(10,this.vertex.y);break}this.canvasWidth=this.vertex.x>this.width?this.vertex.x+20:this.width+20;this.canvasHeight=this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,10);this.rightTop=Point(this.width+10,10);this.rightBottom=Point(this.width+10,this.height+10);this.leftBottom=Point(10,this.height+10);this.center=Point(10+this.width/
2,10+this.height/2);this.dock1=Point(this.dock1.x+10,this.height+10);this.dock2=Point(this.dock2.x+10,this.height+10);this.vertex=Point(this.vertex.x,this.vertex.y);break;case "left":if(0>this.vertex.y){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x+this.vertex.x+40;this.leftTop=Point(this.canvasWidth-this.width-10,this.canvasHeight-this.height-10);this.rightTop=Point(this.canvasWidth-
10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10);this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10);this.dock1=Point(this.canvasWidth-this.width-10,this.dock1.y-this.vertex.y+10);this.dock2=Point(this.canvasWidth-this.width-10,this.dock1.y-this.vertex.y+10);this.center=Point(this.canvasWidth-10-this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(10,10);break}this.vertex.y>this.height?(this.canvasWidth=this.width-
this.vertex.x+20,this.canvasHeight=this.vertex.y+20,this.canvasTop=this.canvasPosition.y-10,this.canvasLeft=this.canvasPosition.x+this.vertex.x+40,this.leftTop=Point(this.canvasWidth-this.width-10,10),this.rightTop=Point(this.canvasWidth-10,10),this.rightBottom=Point(this.canvasWidth-10,this.height+10),this.leftBottom=Point(this.canvasWidth-this.width-10,this.height+10)):(this.canvasWidth=this.width-this.vertex.x+20,this.canvasHeight=this.height+20,this.canvasTop=this.canvasPosition.y-10,this.canvasLeft=
this.canvasPosition.x+this.vertex.x+40,this.leftTop=Point(this.canvasWidth-this.width-10,10),this.rightTop=Point(this.canvasWidth-10,10),this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10),this.leftBottom=Point(this.canvasWidth-this.width-10,this.canvasHeight-10));this.dock1=Point(this.canvasWidth-this.width-10,this.dock1.y+10);this.dock2=Point(this.canvasWidth-this.width-10,this.dock2.y+10);this.center=Point(this.canvasWidth-10-this.width/2,10+this.height/2);this.vertex=Point(10,this.vertex.y);
break;case "Up":if(0>this.vertex.x){this.canvasWidth=this.width-this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-(this.canvasWidth-this.width-10);this.leftTop=Point(this.canvasWidth-this.width-10,this.canvasHeight-this.height-10);this.rightTop=Point(this.canvasWidth-10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.canvasWidth-10,this.canvasHeight-10);this.leftBottom=
Point(this.canvasWidth-this.width-10,this.canvasHeight-10);this.dock1=Point(10-this.vertex.x+this.dock1.x,this.canvasHeight-this.height-10);this.dock2=Point(10-this.vertex.x+this.dock2.x,this.canvasHeight-this.height-10);this.center=Point(this.canvasWidth-10-this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(10,10);break}this.canvasWidth=this.vertex.x>this.width?this.vertex.x+20:this.width+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-
this.height-10);this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,this.canvasHeight-this.height-10);this.rightTop=Point(this.width+10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.width+10,this.canvasHeight-10);this.leftBottom=Point(10,this.canvasHeight-10);this.dock1=Point(this.dock1.x+10,this.canvasHeight-this.height-10);this.dock2=Point(this.dock2.x+10,this.canvasHeight-this.height-10);this.center=Point(10+this.width/2,this.canvasHeight-10-this.height/2);this.vertex=
Point(this.vertex.x,10);break;case "Right":if(0>this.vertex.y){this.canvasWidth=this.vertex.x+20;this.canvasHeight=this.height-this.vertex.y+20;this.canvasTop=this.canvasPosition.y-(this.canvasHeight-this.height-10);this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,this.canvasHeight-this.height-10);this.rightTop=Point(this.width+10,this.canvasHeight-this.height-10);this.rightBottom=Point(this.width+10,this.canvasHeight-10);this.leftBottom=Point(10,this.canvasHeight-10);this.dock1=Point(this.width+
10,10+this.dock1.y-this.vertex.y);this.dock2=Point(this.width+10,10+this.dock2.y-this.vertex.y);this.center=Point(10+this.width/2,this.canvasHeight-10-this.height/2);this.vertex=Point(this.vertex.x,10);break}this.vertex.y>this.height?(this.canvasWidth=this.vertex.x+20,this.canvasHeight=this.vertex.y+20):(this.canvasWidth=this.vertex.x+20,this.canvasHeight=this.height+20);this.canvasTop=this.canvasPosition.y-10;this.canvasLeft=this.canvasPosition.x-10;this.leftTop=Point(10,10);this.rightTop=Point(this.width+
10,10);this.rightBottom=Point(this.width+10,this.height+10);this.leftBottom=Point(10,this.height+10);this.dock1=Point(this.width+10,10+this.dock1.y);this.dock2=Point(this.width+10,10+this.dock2.y);this.center=Point(10+this.width/2,10+this.height/2);this.vertex=Point(this.vertex.x,this.vertex.y)}},initCss:function(b,c){this.callout.css({position:"absolute"});1!=parseInt(this.config.alpha)&&(this.callout.css({opacity:this.config.alpha}),this.textBox.css({opacity:this.config.alpha}));this.setPosition(b,
c)},drawRoundRect:function(){switch(this.config.hookDirect){case "Down":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,
this.leftTop.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.arcTo(this.leftTop.x,
this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case "left":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=
this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+
10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case "Up":this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);
this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y);this.context.lineTo(this.dock2.x,this.dock2.y);this.context.lineTo(this.vertex.x+10,this.vertex.y+10);this.context.lineTo(this.dock1.x,this.dock1.y);this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius);this.context.arcTo(this.rightBottom.x,this.rightBottom.y,
this.leftBottom.x,this.leftBottom.y,this.cornerRadius);this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius);this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius);this.context.fill();this.context.stroke();this.context.closePath();break;case "Right":this.context.beginPath(),this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=
Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance),this.context.strokeStyle=this.strokeStyle,this.context.fillStyle=this.fillStyle,this.context.lineWidth=this.borderWidth,this.context.moveTo(this.leftTop.x+this.cornerRadius,this.leftTop.y),this.context.arcTo(this.rightTop.x,this.rightTop.y,this.rightBottom.x,this.rightBottom.y,this.cornerRadius),this.context.lineTo(this.dock2.x,this.dock2.y),this.context.lineTo(this.vertex.x+10,this.vertex.y+10),this.context.lineTo(this.dock1.x,
this.dock1.y),this.context.arcTo(this.rightBottom.x,this.rightBottom.y,this.leftBottom.x,this.leftBottom.y,this.cornerRadius),this.context.arcTo(this.leftBottom.x,this.leftBottom.y,this.leftTop.x,this.leftTop.y,this.cornerRadius),this.context.arcTo(this.leftTop.x,this.leftTop.y,this.rightTop.x,this.rightTop.y,this.cornerRadius),this.context.fill(),this.context.stroke(),this.context.closePath()}},drawRoundBubble:function(){function b(b,c){var d=c.x-b.x,f=c.y-b.y;return Math.pow(d*d+f*f,0.5)}var c=
this.config.borderWidth/2,d=(this.width-5.5)/2,f=(this.height-5.5)/2,g=Point(this.vertex.x-this.center.x,this.vertex.y-this.center.y),g=g.y/g.x,h=Math.tan((180*Math.atan(g)/Math.PI-15)/180*Math.PI),k=Math.tan((180*Math.atan(g)/Math.PI+15)/180*Math.PI),l=Math.tan(180*Math.atan(g)/Math.PI/180*Math.PI),m=Math.sqrt(d*d*f*f/(f*f+d*d*h*h)),n=Math.sqrt(h*h*d*d*f*f/(f*f+d*d*h*h)),p=Math.sqrt(d*d*f*f/(f*f+d*d*k*k)),q=Math.sqrt(k*k*d*d*f*f/(f*f+d*d*k*k)),t=Math.sqrt(d*d*f*f/(f*f+d*d*l*l)),d=Math.sqrt(l*l*d*
d*f*f/(f*f+d*d*l*l)),g=Point(this.vertex.x-c,this.vertex.y-c),s=null,r=null,f=c=null;0<=h?(s=Point(m+this.width/2,n+this.height/2),r=Point(-m+this.width/2,-n+this.height/2)):(s=Point(-m+this.width/2,n+this.height/2),r=Point(m+this.width/2,-n+this.height/2));0<=k?(c=Point(p+this.width/2,q+this.height/2),f=Point(-p+this.width/2,-q+this.height/2)):(c=Point(-p+this.width/2,q+this.height/2),f=Point(p+this.width/2,-q+this.height/2));0<=l?(Point(t+this.width/2,d+this.height/2),Point(-t+this.width/2,-d+this.height/
2)):(Point(-t+this.width/2,d+this.height/2),Point(t+this.width/2,-d+this.height/2));h=b(s,g)<=b(r,g)?s:r;k=b(c,g)<=b(f,g)?c:f;void 0==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(b,c,d,f,g,h,k,l){this.save();this.translate(b,c);this.rotate(g);this.scale(d,f);this.arc(0,0,1,h,k,l);this.restore()});this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=
Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;this.context.lineWidth=this.borderWidth;this.context.ellipse(this.center.x,this.center.y,this.width/2,this.height/2,0,2*Math.PI,0,!1);this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.moveTo(h.x+this.center.x-this.width/2,h.y+this.center.y-this.height/2);this.context.lineTo(g.x,
g.y);this.context.lineTo(k.x+this.center.x-this.width/2,k.y+this.center.y-this.height/2);this.context.fill();this.context.stroke();this.context.closePath()},drawCloudBubble:function(){var b=this.getPointList("0.006060606060606061,0.6018181818181818;0.02181818181818182,0.39636363636363636;0.16,0.38;0.15393939393939393,0.21636363636363637;0.3212121212121212,0.2381818181818182;0.39515151515151514,0.014545454545454545;0.5745454545454546,0.00909090909090909;0.7781818181818182,0.014545454545454545;0.8618181818181818,0.28909090909090907;0.9854545454545455,0.3236363636363636;1,0.5163636363636364;0.9903030303030304,0.6636363636363637;0.8666666666666667,0.7218181818181818;0.8278787878787879,0.88;0.6690909090909091,0.8818181818181818;0.6557575757575758,0.9836363636363636;0.5781818181818181,1;0.49575757575757573,0.9963636363636363;0.4812121212121212,0.8836363636363637;0.31636363636363635,0.9563636363636364;0.26181818181818184,0.8309090909090909;0.1890909090909091,0.8636363636363636;0.11393939393939394,0.8236363636363636;0.01090909090909091,0.7618181818181818"),
c=this.config.borderWidth/2;this.getSecondPoint();this.context.beginPath();this.config.shadow&&(this.context.shadowOffsetX=this.config.shadowBlurX,this.context.shadowOffsetY=this.config.shadowBlurY,this.context.shadowColor=Color(this.config.shadowColor).toString(),this.context.shadowBlur=this.config.shadowDistance);this.context.lineWidth=this.borderWidth;this.context.strokeStyle=this.strokeStyle;this.context.fillStyle=this.fillStyle;for(f=0;f<b.length;f++){var d=b[f];d.x>this.width/2?d.x-=c:d.x<this.width/
2?d.x+=c:d.y>this.height/2?d.y-=c:d.y<this.height/2&&(d.y+=c)}this.context.moveTo(b[0][0],b[0][1]);for(var f=1;f<b.length-1;f++)0!=f%2&&this.context.quadraticCurveTo(b[f][0],b[f][1],b[f+1][0],b[f+1][1]);this.context.quadraticCurveTo(b[b.length-1][0],b[b.length-1][1],b[0][0],b[0][1]);this.context.fill();this.context.stroke();this.context.closePath();b=this.width/2>=this.height/2?this.width/25:this.height/25;c=c>3*b/10?3*b/10:c;this.context.beginPath();this.context.arc(this.vertex.x,this.vertex.y,3*
b/5-c,0,2*Math.PI);this.context.fill();this.context.stroke();this.context.closePath();this.context.beginPath();this.context.arc(this.secondecondMovePoint.x,this.secondecondMovePoint.y,b-c,0,2*Math.PI);this.context.fill();this.context.stroke();this.context.closePath()},getPointList:function(b){var c=this.config.borderWidth/2;b=b.split(";");for(var d=[],f=0;f<b.length;f++){var g=String(b[f]).split(",");switch(this.config.hookDirect){case "Down":var h=0>this.left?[g[0]*(this.width-c)+10-this.left,g[1]*
(this.height-c)+10]:[g[0]*(this.width-c)+10,g[1]*(this.height-c)+10];break;case "left":h=0>this.top?[g[0]*(this.width-c)+10-this.left,g[1]*(this.height-c)-this.top+10]:[g[0]*(this.width-c)+10-this.left,g[1]*(this.height-c)+10];break;case "Up":h=0>this.left?[g[0]*(this.width-c)+10-this.left,g[1]*(this.height-c)-this.top]:[g[0]*(this.width-c)+10,g[1]*(this.height-c)-this.top+10];break;case "Right":h=0>this.top?[g[0]*(this.width-c)+10,g[1]*(this.height-c)-this.top]:[g[0]*(this.width-c)+10,g[1]*(this.height-
c)+10]}d.push(h)}return d},getSecondPoint:function(){function b(b,c){var d=c.x-b.x,f=c.y-b.y;return Math.pow(d*d+f*f,0.5)}var c=this.config.borderWidth/2,d=(this.width-5.5)/2,f=(this.height-5.5)/2,g=Point(this.vertex.x-this.center.x,this.vertex.y-this.center.y),h=Math.tan(180*Math.atan(g.y/g.x)/Math.PI/180*Math.PI),k=Math.sqrt(d*d*f*f/(f*f+d*d*h*h)),d=Math.sqrt(h*h*d*d*f*f/(f*f+d*d*h*h)),g=Point(this.vertex.x-c,this.vertex.y-c),f=c=null;0<=h?(c=Point(k+this.center.x,d+this.center.y),f=Point(-k+this.center.x,
-d+this.center.y)):(c=Point(-k+this.center.x,d+this.center.y),f=Point(k+this.center.x,-d+this.center.y));g=b(c,g)<=b(f,g)?c:f;this.secondecondMovePoint=0<this.left&&0<this.top?Point((this.left+g.x)/2,(this.top+g.y)/2):0<this.left&&0>this.top?Point((this.left+g.x)/2,(10+g.y)/2):0>this.left&&0<this.top?Point((g.x+10)/2,(this.top+g.y)/2):Point((g.x+10)/2,(g.y+10)/2)},fillColor:function(){var b=this.context.createLinearGradient(parseInt(this.canvasWidth),0,parseInt(this.canvasWidth),parseInt(this.canvasHeight));
this.config.background.color?b.addColorStop(0,Color(this.config.background.color).rgba(this.config.background.alpha)):b.addColorStop(0,"rgba(255,255,255,1)");this.config.background.color2?b.addColorStop(1,Color(this.config.background.color2).rgba(this.config.background.alpha)):b.addColorStop(1,"rgba(255,255,255,1)");return parseBool(this.config.background.fillBg)?b:"transparent"},resizeCallout:function(b){b=transformCSS({origin:{x:0,y:0},scale:b/this.pageWidth});this.callout.css(b);this.textBox.css(b)},
initEvents:function(){this.addActionEvent(this.container)},onResize:function(b,c){this.textBox.css({width:this.width,height:this.height});this.setPosition(b,c);this.resizeCallout(b,c)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},
setPosition:function(b,c){var d=b/this.pageWidth;this.vertex1=Point(this.config.hookContrPointRatioX*this.width,this.config.hookContrPointRatioY*this.height);this.leftTopX=this.config.location.x*b-(2*this.borderWidth+10)*d;this.leftTopY=this.config.location.y*c-(2*this.borderWidth+10)*d;0>this.vertex1.x&&(this.leftTopX=this.config.location.x*b+this.vertex1.x*d-(2*this.borderWidth+10)*d);0>this.vertex1.y&&(this.leftTopY=this.config.location.y*c+this.vertex1.y*d-(2*this.borderWidth+10)*d);this.textPosition=
0>this.left&&0<this.top?Point(this.leftTopX+(10-this.left)*d,this.leftTopY+10*d):0>this.left&&0>this.top?Point(this.leftTopX+(10-this.left)*d,this.leftTopY+(10-this.top)*d):0<this.left&&0>this.top?Point(this.leftTopX+10*d,this.leftTopY+(10-this.top)*d):Point(this.leftTopX+10*d,this.leftTopY+10*d);this.textBox.css({width:this.width+"px",height:this.height+"px",position:"absolute",top:(this.canvasWidth-this.width)*d/2+"px",left:(this.canvasWidth-this.width)*d/2+"px","box-sizing":"border-box",display:"table-cell",
padding:"0 10px",overflow:"hidden"});this.text.css({width:this.width+"px",height:this.height+"px",position:"relative",top:"0",left:"0","box-sizing":"border-box",display:"table-cell"});this.container.css({width:this.canvasWidth*d+"px",height:this.canvasHeight*d+"px",position:"absolute",left:this.leftTopX+"px",top:this.leftTopY+"px"});switch(this.config.bubbleType){case "2":this.text.css({"vertical-align":"middle"});break;case "3":this.text.css({"vertical-align":"middle"})}}}).extend(PageItem.Item);
Class("AText",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW||this.config.pageH;this.originHeight=this.config.pageH;this.pageWidth=d;this.speed=34E3/this.config.moveSpeed;this.id="text"+g;this.initOldText();1!=parseInt(this.config.alpha)&&this.atext.css({opacity:this.config.alpha});this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.atext);
this.onResize(this.pageWidth,this.pageHeight)},initOldText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.scrollid="scroll"+this.id;var b=new TextFormatAnalyzer(this.config.textStr);this.text=b.getHTML(this.alignCss);this.fontSize=b.getMinFontSize();this.fontColor=b.getFontColor();this.container=$("<div id="+this.id+" style='position:absolute;'></div>");this.atext=$("<div style='overflow: hidden;opacity:"+this.config.alpha+
"'></div>");this.atext2=$("<div style='font-color:"+this.fontColor+";font-size:12px;font-family:"+this.config.fontName+";'></div>");this.atext2.html(this.text);this.config.action||this.config.hint||b.htmlHasATag()||this.container.css({"pointer-events":"none"});!0===parseBool(this.config.tbold)&&this.atext2.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.atext2.css({"font-style":"italic"});this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*
this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.atext.css({position:"relative",width:this.width+"px",height:this.height+"px"});this.atext2.css({"width:":"100%"});this.atext.append(this.atext2);this.container.append(this.atext);this.parent.append(this.container);this.setPosition()},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,rotation:b.location.rotation,alpha:b.alpha,textStr:b.strText?
b.strText:b.format.htmlText,fontName:b.format.font,fontSize:b.format.size,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,pageH:b.format.pageH,pageW:b.format.pageW,hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,HRate:b.HRate,languageLayout:b.languageLayout,animation:b.animation}},
play:function(){this.timer&&this.timer.stop();this.timer=null;this.initScroll()},pause:function(){this.timer&&this.timer.stop();this.timer=null},initScroll:function(){this.rHeight=this.atext2.height()+this.height+20;this.rTop=this.height;this.stop=!1;this.timer=this.textRun.animation(this,this.speed)},textRun:function(b,c){b==c&&(this.rTop=this.height,this.textRun.animation(this,this.speed));this.rTop=this.height-this.rHeight*b/c;this.atext2.css({transform:"translateY("+this.rTop+"px)"})},initEvents:function(){this.atext.bind(_event._down,
function(b){b.stopPropagation&&b.stopPropagation();return!1});this.atext.bind(_event._move,function(b){b.stopPropagation&&b.stopPropagation();return!1});this.atext.bind(_event._up,function(b){b.stopPropagation&&b.stopPropagation();return!1});this.addActionEvent(this.container)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.setPosition();this.resizeText(this.pageWidth);var d=this.atext.find("p").height()/this.height;this.speed=1<d?this.speed*d:this.speed},resizeText:function(b){b=
this.pageWidth/this.originWidth/this.adjustFontSize;this.atext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",transform:"scale("+b+")  rotate("+this.config.rotation+"deg)","-webkit-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+
b+") rotate("+this.config.rotation+"deg)"});this.container.css({width:this.width*b,height:this.height*b})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*
this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("FlashShow",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.config=this.parseConfig(c);if(null!=this.config.photo){this.showingA=!0;this.showingIndex=1;this.background=$("<div></div>");this.totalImage=this.config.photo.Image.length;for(b=0;b<this.config.photo.Image.length;b++)this.config.photo.Image[b]=this.fixRelativePath(this.config.photo.Image[b]);this.moveTo=1;this.background.css({width:this.width+
"px",height:this.height+"px",left:this.config.x*this.pageWidth+"px",top:this.config.y*this.pageHeight+"px",position:"absolute",overflow:"hidden"});this.setRotation(this.background,this.config.rotation);this.photoA=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width);this.photoB=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,
this.config.photo.width,this.config.photo.width);this.parent.append(this.background);this.photoB.fillImage(2);this.photoA.fillImage(1);this.initChangeImageEvent(!0)}},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,photo:Instance.copy(b.Images),repeatPlay:b.isRepeat}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*
this.config.height;this.background.css({width:this.width+"px",height:this.height+"px"});this.photoA.onResize(b,c);this.photoB.onResize(b,c);this.setPosition()},setPosition:function(){this.background.css({left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"})},initChangeImageEvent:function(b){var c=this,d=this.photoA.getImage(),f=this.photoB.getImage(),g,h;b||(d=this.photoB.getImage(),f=this.photoA.getImage());switch(this.moveTo){case 1:g=h=1;break;case 2:g=h=-1;break;case 3:h=
1;g=-1;break;case 4:h=-1,g=1}this.moveTo=4==this.moveTo?1:this.moveTo+1;var k=d.position().left+66*h,l=d.position().top+66*g,m=d.position().left+77*h,n=d.position().top+77*g;d.animate({left:k,top:l},{queue:!1,duration:3E3,complete:function(){c.showingIndex++;c.showingInde>c.totalImage&&!c.config.repeatPlay||(c.showingIndex>c.totalImage&&(c.showingIndex=0),d.animate({opacity:0,left:m,top:n},500,function(){b?c.photoA.fillImage(c.showingIndex+1):c.photoB.fillImage(c.showingIndex+1);d.css({"z-index":0});
f.css({"z-index":1})}),c.initChangeImageEvent(!b))}}).animate({opacity:1},500)}}).extend("Item");
var animateImage=Class({create:function(b,c,d,f,g,h,k,l){this.img=$("<img />");this.imgIndex=-1;this.imageArr=c;this.bw=d;this.bh=f;this.repeat=g;this.parent.append(this.img);this.img.css({position:"absolute"});h&&void 0!=k&&void 0!=l&&this.img.css({width:k+"px",height:l+"px"})},fillImage:function(b){if(this.imgIndex==b)this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"});else if(!(b>this.imageArr.Image.length)||this.repeat){b>this.imageArr.Image.length&&
(b=1);this.imgIndex=b;var c=this;this.img.attr("src",c.getImageDiv(b));this.img.on("load",function(){c.img.css({left:(c.bw-this.width)/2+"px",top:(c.bh-this.height)/2+"px"})})}},getImageDiv:function(b){return this.imageArr.Image[b-1].photo},setZIndex:function(b){this.img.css("z-index",b)},onResize:function(b,c){this.bw=b;this.bh=c;this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"})},setPosition:function(b,c){this.img.css({left:b+"px",top:c+"px"})},animate:function(){},
getImage:function(){return this.img}});
Class("Sound",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.sound=null;null!=this.config.src&&(this.config.src=this.config.src,this.arr=null,this.arr="undefined"!=typeof this.config.src.path?this.config.src.path:this.config.src[0].path,this.arr=this.fixRelativePath(this.arr),this.pageWidth=d,this.pageHeight=f,this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,
this.h1=this.height/6,this.h2=this.height/3,this.c=this.nflay=this.flay=0,this.st=null,this.id="AdvancedSound"+g,this.sounddiv=$("<div class='flip-action' style='position:absolute; width:"+this.width+"px;height:"+this.height+"px;top:"+this.y+"px;left:"+this.x+"px;background:url("+uiBaseURL+"audio.png);background-size:"+this.width+"px "+this.height+"px;background-repeat:no-repeat;'></div>"),this.sound=new Media($("<audio id='"+this.id+"' src='"+this.arr+"'></audio>"),"media"),this.preimg=$("<img src='"+
uiBaseURL+"Pre_down.png' style='position:absolute; left:10px;bottom:5px;cursor:pointer;' />"),this.playimg=$("<img src='"+uiBaseURL+"Play_down.png' style='position:absolute; left:50px;bottom:5px;cursor:pointer;'/>"),this.nextimg=$("<img src='"+uiBaseURL+"Nextpage_down.png' style='position:absolute; left:90px;bottom:5px;cursor:pointer;' />"),this.soundname=$("<div style='position:absolute; right:10px;top:"+this.h2+"px;color:#389ac2;font-size:10px;'></div>"),this.soundtime=$("<div style='position:absolute; right:10px;top:"+
this.h1+"px;color:#389ac2;font-size:10px;'></div>"),this.parent.append(this.sounddiv),this.sounddiv.append(this.sound.$media),this.sounddiv.append(this.preimg),this.sounddiv.append(this.playimg),this.sounddiv.append(this.nextimg),this.sounddiv.append(this.soundname),this.sounddiv.append(this.soundtime),null!=this.config.src&&this.initEvent(),this.setRotation(this.sounddiv,this.config.rotation))},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,
x:b.location.x,y:b.location.y,alpageHeighta:b.alpageHeighta,src:b.soundList.sound,skinType:b.skinType,soundPlay:b.soundPlayTriggerEvt||b.componentData.playEvt}},initEvent:function(){var b=this;b.nflay=0;var c=b.playimg[0],d=b.sound[0],f=b.config.src[0].path,g=typeof b.config.src.path;"undefined"!=g?b.soundname.html(this.getname(b.config.src.path)):b.soundname.html(this.getname(f));b.soundtime.html("00:00 / 00:00");this.playimg.bind(_event._down,function(f){0==b.flay?(c.src=uiBaseURL+"Pause_down.png",
d.play(),b.flay=1,b.gettime(d.duration)):(c.src=uiBaseURL+"Play_down.png",d.pause(),b.flay=0,clearTimeout(b.st))});this.preimg.bind(_event._down,function(h){d.pause();clearTimeout(b.st);"undefined"!=g?d.src=b.config.src.path:0<b.nflay&&b.nflay<b.config.src.length?(d.src=b.config.src[b.nflay-1].path,b.soundname.html(b.getname(b.config.src[b.nflay].path)),b.nflay-=1):(d.src=f,b.soundname.html(b.getname(f)));d.play();c.src=uiBaseURL+"Pause_down.png";b.flay=1;setTimeout(function(){b.c=0;b.gettime(d.duration)},
1E3)});this.nextimg.bind(_event._down,function(h){d.pause();clearTimeout(b.st);"undefined"!=g?d.src=b.config.src.path:b.nflay<b.config.src.length?(b.nflay+=1,d.src=b.config.src[b.nflay].path,b.soundname.html(b.getname(b.config.src[b.nflay].path)),b.nflay+=1):(d.src=f,b.soundname.html(b.getname(f)),b.nflay=0);d.play();c.src=uiBaseURL+"Pause_down.png";b.flay=1;setTimeout(function(){b.c=0;b.gettime(d.duration)},1E3)})},gettime:function(b){var c=this,d=null,f=0,g=null,d=c.c%60,g=parseInt(b%60),g=10>g?
"0"+g:g,h=parseInt(b/60);c.c<b&&(c.c+=1,60>c.c?d=10>c.c?"00:0"+c.c:"00:"+c.c:(f=parseInt(c.c/60),d=10>f?10>d?"0"+f+":0"+d:"0"+f+":"+d:10>d?f+":0"+d:f+":"+d),10>h?c.soundtime.html(d+" / 0"+h+":"+g):c.soundtime.html(d+" / "+h+":"+g),c.st=setTimeout(function(){c.gettime(b)},1E3))},getname:function(b){var c=[],c=b.split("/");return c[c.length-1].split(".")[0]},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;
this.sounddiv.css({width:this.width+"px",height:this.height+"px"});this.sounddiv.css("background-size",this.width+"px "+this.height+"px");this.soundname.css("top",this.height/3+"px");this.soundtime.css("top",this.height/6+"px");this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.sounddiv.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");global.hddr.soo3=bdor[51];global.hddr.soc8=hddr.sob8+"ph";
Class("EffectText",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.originWidth=c.location.pageWidth;this.originHeight=c.location.pageHeight;this.color=Color(this.config.color).toString();this.speed=this.pos=0;this.speed="ChangeSpeed"==this.config.moveSpeed?250:150;this.width=this.config.width*this.originWidth;this.height=this.config.height*this.originHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="efftext"+g;this.scrollid=
"efftext"+this.id;this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});b=new TextFormatAnalyzer(this.config.textStr);this.config.textStr=b.getLines();this.fontFamily=b.getFontFamily();this.fontSize=b.getFontSize();this.config.color=b.getFontColor();this.color=Color(this.config.color).toString();this.container=$("<div id="+this.id+" style='position:absolute;text-align:"+b.getAlign()+"'></div>");!0===parseBool(this.config.sh)?this.efftext=$("<div style='position:absolute;height:"+
this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+"px "+Color(this.config.sr).toString()+";opacity:"+this.config.alpha+"'></div>"):this.efftext=$("<div style='position:absolute;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.efftext2=$("<div id="+this.scrollid+" style='word-wrap: break-word;line-height:"+b.getLineHeight()+"px;font-family:"+this.fontFamily+";width:"+this.width+"px;font-size:"+this.fontSize+
"px;color:"+this.color+";'></div>");!0===parseBool(this.config.tbold)&&this.efftext.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.efftext.css({"font-style":"italic"});this.container.css({height:this.height+"px",width:this.width+"px"});1!=parseInt(this.config.alpha)&&this.efftext.css({opacity:this.config.alpha});this.initEvent();this.efftext.append(this.efftext2);this.container.append(this.efftext);this.parent.append(this.container);this.initeffAmin();this.onResize(d,f);parseBool(this.config.reflection)&&
this.imageReflection(this.efftext);this.setRotation(this.efftext,this.config.rotation)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,alpha:b.alpha,textStr:b.htmlText||b.textStr,moveSpeed:b.effectStyle,lineH:b.lineHeightRation,sh:parseBool(b.shadow.hasDropShadow),sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,
se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,languageLayout:b.languageLayout,animation:b.animation}},initeffAmin:function(){this.cel=this.row=0;this.currentText=""},runText:function(){this.timer=setInterval(function(){var b=this.config.textStr,c=this.config.textStr[this.row],d=this.config.textStr[this.row][this.cel];d&&(this.currentText+=d);this.cel+=1;if(this.cel>=this.config.textStr[this.row].length||!c.length)if(this.currentText+="<br/>",this.row+=1,this.cel=0,this.row>=b.length){this.efftext2.html(this.currentText);
this.row=0;this.currentText="";clearInterval(this.timer);this.timer=null;return}this.currentText=this.currentText.replaceAll("  ","&ensp;");this.efftext2.html(this.currentText)}.bind(this),this.speed)},initEvent:function(){this.addActionEvent(this.container)},play:function(){this.runText()},pause:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.setPosition();this.fontSize=this.config.lineH*this.originHeight*0.75;this.resizeText(this.pageWidth)},
resizeText:function(b){b/=this.originWidth;this.efftext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-o-transform":"scale("+b+")",transform:"scale("+b+")"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+
" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);bdor[7]="m";
Class("PngImage",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.img=$("<img>");null!=this.config.src&&(this.config.src=this.fixRelativePath(this.config.src),this.width=this.config.width*this.pageWidth,this.height=this.config.height*this.pageHeight,this.left=this.pageWidth*this.config.x,this.top=this.pageHeight*this.config.y,this.img.on("load",function(){this.onImageLoad()}.bind(this)),this.img.css({position:"absolute",width:"0px",height:"0px",left:this.left+"px",top:this.top+
"px",opacity:this.config.alpha}),this.img.attr({src:this.config.src}),this.parent.append(this.img),this.initEvt())},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action}},onImageLoad:function(){var b=this.img[0];this.imageWidth=b.naturalWidth;this.imageHeight=b.naturalHeight;this.fitImage()},fitImage:function(){var b=this.imageWidth/this.imageHeight,c,d,f;b>this.width/this.height?(d=this.width,f=d/b,b=
this.left,c=(this.height-f)/2+this.top):(f=this.height,d=f*b,b=(this.width-d)/2+this.left,c=this.top);this.img.css({left:b+"px",top:c+"px",width:d+"px",height:f+"px"})},initEvt:function(){if(void 0!=this.config.action){this.linkURL="";try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);this.addActionEvent(this.img)}},onResize:function(b,
c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.pageHeight*this.config.x;this.top=this.pageHeight*this.config.y;this.fitImage();this.width>this.height?this.img.css({height:this.height+"px",left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"}):this.img.css({width:this.width+"px",left:this.pageWidth*this.config.x+"px",top:this.pageHeight*this.config.y+"px"});this.setPosition(this.config.x*
b,this.config.y*c)},setPosition:function(b,c){this.img.css({left:b+"px",top:c+"px"})}}).extend(PageItem.Item);
Class("TextAmin",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.color=this.config.color?Color(this.config.color):Color("#000000");this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.pos=0;this.id="amintext"+g;this.scrollid="animscroll"+this.id;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.amintext);1!=parseInt(this.config.alpha)&&this.amintext.css({opacity:this.config.alpha});this.onResize(this.pageWidth,
this.pageHeight)},initText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var b=new TextFormatAnalyzer(this.config.textStr);this.fontSize=b.getMinFontSize();this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.container=$("<div class='textAmin' style='overflow:hidden;position:absolute; pointer-events:none;'></div>");
this.amintext=$("<div style='position:absolute; height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpageHeighta+"'></div>");this.addShadow(this.amintext);this.amintext2=b.getHTML(this.alignCss);this.amintext.append(this.amintext2);this.container.append(this.amintext);this.parent.append(this.container);this.config.action||b.htmlHasATag()||this.container.css({"pointer-events":"none"});this.trimingFontSize(this.height);this.textContents=this.getTextContents();this.hideContents()},
getTextContents:function(){var b=this.amintext2.find("span"),c=[];if(0==b.length){var d={element:this.amintext2,text:this.amintext2.text().replaceAll("&nbsp;"," ")};0<this.amintext2.find("b").length&&(d.bold=!0);0<this.amintext2.find("i").length&&(d.italic=!0);0<this.amintext2.find("u").length&&(d.underline=!0);c.push(d)}else for(var f=0;f<b.length;f++){var g=$(b[f]),d={element:g,text:g.text().replaceAll("&nbsp;"," ")};0<g.find("b").length&&(d.bold=!0);0<g.find("i").length&&(d.italic=!0);0<g.find("u").length&&
(d.underline=!0);c.push(d)}return c},hideContents:function(){for(var b=0;b<this.textContents.length;b++)this.textContents[b].element.css("display","none")},trimingFontSize:function(b){function c(b,c){if(b.css){var d=b.css(c);d&&(d=parseInt(d.replace("px","")),d--,"line-height"==c&&(d*=0.85),b.css(c,d+"px"))}}function d(b){if((b=b.children())&&0!=b.length)for(var g=0;g<b.length;g++){var h=$(b[g]);h.is("span")&&(c(h,"font-size"),c(h,"line-height"));d(h)}}for(;this.amintext2.height()>b&&$.system.name!=
$.system.IOS&&!($.browser.chrome&&12>=this.fontSize)&&!(d(this.amintext2),this.fontSize--,0>=this.fontSize););},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpageHeighta:b.alpageHeighta,alpha:b.alpha,effectType:b.effectType,textStr:b.textStr?b.textStr:b.formats.defaultFormat.htmlText,rotation:b.location.rotation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,
italic:b.formats.defaultFormat.italic,action:b.action,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,lineH:b.HRate,pageW:b.formats.defaultFormat.pageW,pageH:b.formats.defaultFormat.pageH,hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,lineHeightRation:b.lineHeightRation,languageLayout:b.languageLayout,animation:b.animation}},play:function(){this.TextAnimate()},pause:function(){this.timer&&(this.timer.stop(),this.timer=
null)},TextAnimate:function(){this.hideContents();switch(this.config.effectType){case "Default":this.initAmin();break;case "Letter Spacing":this.litterText();break;case "Scale Word":this.scaleText();break;case "Right To Left":this.RightText();break;case "Center To Edges":this.initAmin();break;default:this.initAmin()}},changeAnimateContent:function(b){var c=this.textContents[b];b=c.element;var d=c.text;b.text("");b.css("display","block");if(c.bold){var f=$("<b></b>");b.append(f);b=f}c.italic&&(f=$("<i></i>"),
b.append(f),b=f);c.underline&&(c=$("<u></u>"),b.append(c),b=c);return{content:b,text:d}},initAmin:function(){this.timer&&this.timer.stop();var b=(new TextFormatAnalyzer).getText(),c=0,d=0,f,g=function(c){c=this.changeAnimateContent(c);f=c.content;b=c.text}.bind(this);g(0);this.timer=function(){c++;if(c<=b.length){var h=b.substring(0,c);f.text(h)}else d++,d>=this.textContents.length?(this.timer.stop(),this.timer=null):(g(d),c=0)}.interval(this,200)},scaleText:function(){this.timer2&&(clearTimeout(this.timer2),
this.timer2=null);this.container.css({perspective:"200","-webkit-perspective":"200",overflow:""});var b=this.textContents.slice();b.reverse();for(var c=0;c<b.length;c++){var d=b[c];d.element.css({"-webkit-transform":"scale(2.5)","-ms-transform":"scale(2.5)",transform:"scale(2.5)",display:"inline-block",opacity:"0"});(function(b){this.timer2=setTimeout(function(){b.element.css({opacity:"1","-webkit-transform":"scale(1)","-ms-transform":"scale(1)",transform:"scale(1)","-webkit-transition":"all 0.30s",
"-ms-transition":"all 0.30s",transition:"all 0.30s"});b.element.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){b.element.css({"-webkit-transition":"","-ms-transition":"",transition:""})}.bind(this))}.bind(this),200+300*c)}).call(this,d)}},RightText:function(){this.amintext2.css({position:"absolute",opacity:0.1,left:"50px"});for(var b=0;b<this.textContents.length;b++)this.textContents[b].element.css("display","inline-block");(function(){this.amintext2.animate({opacity:1,
left:"0px"})}).delay(this,100)},litterText:function(b,c){this.timer&&this.timer.stop();var d=0,f=0,g=-this.fontSize,h,k,l=function(b){b=this.changeAnimateContent(b);h=b.content;k=b.text}.bind(this);l(0);this.timer=function(){if(d<k.length){var b=$("<div></div>");b.css({position:"relative",display:"inline-block",top:g+"px"});var c=k.substr(d,1);b.text(c);" "==c&&b.css({width:this.fontSize/2+"px",height:this.fontSize+"px"});h.append(b);b.animate({top:"0px"},400,"swing");d++}else f++,f>=this.textContents.length?
(this.timer.stop(),this.timer=null):(l(f),d=0)}.interval(this,200)},initEvents:function(){this.addActionEvent(this.container)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.setPosition();this.amintext.css("font-size",this.fontSize+"px");this.amintext2.css("font-size",this.fontSize+"px");this.resizeText(this.pageWidth)},resizeText:function(b){b=b/this.originWidth/this.adjustFontSize;this.amintext.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%",
"-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-moz-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-ms-transform":"scale("+b+") rotate("+this.config.rotation+"deg)","-o-transform":"scale("+b+") rotate("+this.config.rotation+"deg)",transform:"scale("+b+") rotate("+this.config.rotation+"deg)"});this.container.css({width:this.width*b+"px",height:this.height*b+"px"})},showAnimate:function(){if(this.config.animation&&
this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("StarText",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.originWidth=this.config.pageW||this.config.pageH;this.originHeight=this.config.pageH;this.speed=1/this.config.moveSpeed*24E3;this.tid=g;this.id="startext"+g;this.scrollid="starwars"+this.id;this.textli="";this.offset=0;this.stepping=0.2;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.startext);1!=parseInt(this.config.alpha)&&this.startext.css({opacity:this.config.alpha});
this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var b=new TextFormatAnalyzer(this.config.textStr);this.fontSize=b.getMinFontSize();this.text=b.getHTML(this.alignCss);this.text.css({"width:":"100%",height:"100%"});this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*
this.originHeight*this.adjustFontSize;this.container=$("<div id='"+this.id+"'style='position:absolute; height:"+this.height+"px;width:"+this.width+"px;'></div>");this.startext=$("<div style='position:absolute; overflow:hidden;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.sFontSize=this.config.fontSize?this.config.fontSize.replaceAll('"',""):"9";this.startext2=$("<div id='"+this.scrollid+"' style='word-wrap: break-word;'></div>");this.x=this.config.x*
this.pageWidth;this.y=this.config.y*this.pageHeight;this.config.pageW?this.startext2.css({position:"absolute",width:"80%",left:"10%",top:"-40%","-webkit-transform-origin":this.width/2+"px "+this.height+"px","-moz-transform-origin":this.width/2+"px "+this.height+"px","-ms-transform-origin":this.width/2+"px "+this.height+"px","-o-transform-origin":this.width/2+"px "+this.height+"px","transform-origin":this.width/2+"px "+this.height+"px"}):this.startext2.css({position:"absolute"});this.config.action||
b.htmlHasATag()||this.container.css({"pointer-events":"none"});!0===parseBool(this.config.tbold)&&this.startext2.css({"font-weight":"bold"});!0===parseBool(this.config.italic)&&this.startext2.css({"font-style":"italic"});this.addShadow(this.startext);this.container.append(this.startext);this.parent.append(this.container);this.startext.append(this.startext2);this.startext2.append(this.text)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,
reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,alpha:b.alpha,textStr:b.strText?b.strText:b.format.htmlText,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,pageW:b.format.pageW,pageH:b.format.pageH,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,lineH:b.HRate,hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,languageLayout:b.languageLayout,
animation:b.animation}},play:function(){this.config.pageW?(this.playText=!0,this.textHeight=this.startext2.height(),this.initScroll()):this.initScrollOld()},pause:function(){this.config.pageW?(this.playText=!1,this.setRunCss(["",1.5*this.height])):this.startext2.stop()},setRunCss:function(b){this.startext2.css({"-webkit-transition":b[0],"-o-transition":b[0],"-moz-transition":b[0],transition:b[0],"-webkit-transform":"rotateX(70deg)  translateY("+b[1]+"px)","-moz-transform":"rotateX(70deg)   translateY("+
b[1]+"px)","-o-transform":"rotateX(70deg)   translateY("+b[1]+"px)","-mos-transform":"rotateX(70deg) t translateY("+b[1]+"px)",transform:"rotateX(70deg)   translateY("+b[1]+"px)"})},initScrollOld:function(){this._wrap=this.startext2;var b=this.text.length;this._wrap.height();for(var c=b;0<=c;c--)$(b[c]).css("fontSize",this.sFontSize-this.offset+"px"),this.offset+=this.stepping;this._wrap.css("marginTop",this.height);this.initScrollTextOld()},initScrollTextOld:function(){var b=this,c=b._wrap,d=b.tid,
f=c.height();c.animate({marginTop:-f+"px"},b.speed,"linear",function(){if("true"==b.config.repeat){for(var f=d;0<=f;f--)$(d[f]).css("fontSize",b.sFontSize-b.offset+"pt"),b.offset+=b.stepping;c.css("marginTop",b.height);b.offset=0;b.stepping=0.2;b.initScrollTextOld()}else c.css("marginTop",0)})},initScroll:function(){this.setRunCss(["",1.5*this.height]);(function(){this.playText&&this.initScrollText()}).delay(this,30)},initScrollText:function(){if(this.transitionEnd=this.whichTransitionEvent())this.startext2.one(this.transitionEnd,
function(b){b.stopPropagation();"true"==this.config.repeat&&this.initScroll()}.bind(this));this.setRunCss(["all "+this.speed+"ms linear",-this.textHeight])},whichTransitionEvent:function(){var b,c=this.startext2[0],d={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",MsTransition:"msTransitionEnd"};for(b in d)if(void 0!==c.style[b])return d[b]},initEvents:function(){this.addActionEvent(this.container)},onResize:function(b,
c){this.pageWidth=b;this.pageHeight=c;this.setPosition();this.resizeText(this.pageWidth)},resizeText:function(b){b=b/this.originWidth/this.adjustFontSize;this.startext.css({perspective:this.height/2+"px","-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-o-transform":"scale("+b+")",transform:"scale("+
b+")"});this.container.css({width:this.width*b+"px",height:this.height*b+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+
"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Banner",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.banners=this.config.banners;this.id="banner"+g;this.time=this.banners.length?1E3*this.banners[0].displayTime:this.banners?1E3*this.banners.displayTime:2E3;this.btnWidth=30;this.shadowColor=260<this.width?"#000":"#111";this.initHtml();
this.initCss();this.getPosition();this.initEvent();this.drawNextImage(this.images[0]);this.setRotation(this.banner,this.config.rotation)},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,action:b.action,selectBtn:b.selectBtn,autoBool:parseBool(b.autoBool),banners:b.banners,animation:b.animation}},initHtml:function(){this.banner=$("<div ></div>");this.canvas=$("<canvas class='box' style='background:#ffffff' width='"+
this.width+"' height='"+this.height+"'></canvas>");this.leftBtn=$("<img src='"+uiBaseURL+"pre_image.png' />");this.rightBtn=$("<img src='"+uiBaseURL+"next_image.png' />");this.leftBtn.css({position:"absolute",width:"20px",height:"20px",left:"0",top:(this.height-20)/2+"px"});this.rightBtn.css({position:"absolute",width:"20px",height:"20px",right:"0",top:(this.height-20)/2+"px"});this.images=[];if(!this.banners.length){if(!this.banners.banner)return;var b=new Image,c=this.fixRelativePath(this.banners.banner.imageUrl);
bookConfig.useTheAliCloudChart&&(c=this.getOssUrl(c,this.width,this.height,"lfit"));b.src=c;this.images.push(b)}for(var d=0;this.banners.length&&d<this.banners.length;d++)b=new Image,c=this.fixRelativePath(this.banners[d].imageUrl),bookConfig.useTheAliCloudChart&&(c=this.getOssUrl(c,this.width,this.height,"lfit")),b.src=c,this.images.push(b);this.ctx=this.canvas[0].getContext("2d");this.banner.append(this.canvas);parseBool(this.config.selectBtn)&&this.banner.append(this.leftBtn).append(this.rightBtn);
this.parent.append(this.banner)},initCss:function(){this.banner.css({opacity:this.config.alpha,position:"absolute",width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px"});this.leftBtn.css({cursor:"pointer"});this.rightBtn.css({cursor:"pointer"})},initEvent:function(){this.leftBtn.bind(_event._down,function(b){b.stopPropagation();b.preventDefault();b=this.images.pop();this.images.unshift(b);this.drawNextImage(this.images[0])}.bind(this));this.rightBtn.bind(_event._down,function(b){b.stopPropagation();
this.drawNextImage(this.images[1]);b=this.images.shift();this.images.push(b)}.bind(this))},getPosition:function(){x1=this.width;y1=this.height/2;x2=0.85*this.width;y2=this.height;x3=0.76*this.width;y3=0.88*this.height;x4=this.width;y4=this.height/2;this.positions=[{x:x1,y:y1},{x:x2,y:y2},{x:x3,y:y3},{x:x4,y:y4}]},getImageConfig:function(b){if(b.naturalWidth/b.naturalHeight>this.width/this.height)if(b.naturalWidth<this.width){var c=b.naturalWidth,d=b.naturalHeight;b=(this.width-c)/2;var f=(this.height-
d)/2}else c=this.width,f=this.width/b.naturalWidth,d=b.naturalHeight*f,b=0,f=(this.height-d)/2;else b.naturalHeight<this.height?(c=b.naturalWidth,d=b.naturalHeight,b=(this.width-c)/2,f=(this.height-d)/2):(f=this.height/b.naturalHeight,d=this.height,c=b.naturalWidth*f,b=(this.width-c)/2,f=0);return{width:c,height:d,left:b,top:f}},drawWhiteBg:function(){this.ctx.save();this.ctx.fillStyle="#fff";this.ctx.fillRect(0,0,this.width,this.height);this.ctx.restore()},drawNextImage:function(b){if(b){this.ctx.beginPath();
if(b.complete){if(!b.naturalWidth){this.canvas.css({background:"transparent"});this.imgError=!0;return}var c=this.getImageConfig(b);this.drawWhiteBg();this.ctx.drawImage(b,c.left,c.top,c.width,c.height)}else b.onload=function(){if(b.naturalWidth){var c=this.getImageConfig(b);this.drawWhiteBg();this.ctx.drawImage(b,c.left,c.top,c.width,c.height)}else this.canvas.css({background:"transparent"}),this.imgError=!0}.bind(this);this.ctx.closePath()}},cutImg:function(b){this.ctx.beginPath();var c=this.images[0];
if(c.complete)if(c.naturalWidth){var d=this.getImageConfig(c);this.ctx.beginPath();this.ctx.save();this.ctx.moveTo(0,0);0<b[0].y&&this.ctx.lineTo(b[0].x,0);this.ctx.lineTo(b[0].x,b[0].y);this.ctx.lineTo(b[1].x,b[1].y);this.ctx.lineTo(0,this.height);this.ctx.lineTo(0,0);this.ctx.clip();this.drawWhiteBg();this.ctx.drawImage(c,d.left,d.top,d.width,d.height);this.ctx.restore();this.ctx.closePath()}else this.canvas.css({background:"transparent"}),this.imgError=!0;else c.onload=function(){if(c.naturalWidth){var d=
this.getImageConfig(c);this.ctx.beginPath();this.ctx.save();this.ctx.moveTo(0,0);0<b[0].y&&this.ctx.lineTo(b[0].x,0);this.ctx.lineTo(b[0].x,b[0].y);this.ctx.lineTo(b[1].x,b[1].y);this.ctx.lineTo(0,this.height);this.ctx.lineTo(0,0);this.ctx.clip();this.drawWhiteBg();this.ctx.drawImage(c,d.left,d.top,d.width,d.height);this.ctx.restore();this.ctx.closePath()}else this.canvas.css({background:"transparent"}),this.imgError=!0}.bind(this)},drawCover:function(b){this.ctx.beginPath();var c=this.ctx.createLinearGradient(0,
0,1.2*b[0].x,0.8*b[1].x);c.addColorStop(0,"#fff");c.addColorStop(0.6,"#ddd");c.addColorStop(1,"#eee");this.ctx.fillStyle=c;this.ctx.moveTo(b[0].x,b[0].y);this.ctx.lineTo(b[1].x,b[1].y);this.ctx.lineTo(b[2].x,b[2].y);this.ctx.lineTo(b[3].x,b[3].y);this.ctx.lineTo(b[0].x,b[0].y);this.ctx.fill();this.ctx.closePath();this.drawShadow(b)},drawShadow:function(b){this.ctx.beginPath();this.ctx.save();1<=b[0].x?(this.ctx.shadowColor=this.shadowColor,this.ctx.strokeStyle="#dedede",this.ctx.shadowBlur=0.075*
(this.width-b[2].x/2),this.ctx.shadowOffsetX=0.09*-(this.width-b[1].x),this.ctx.lineWidth=2):this.ctx.restore();this.ctx.moveTo(b[0].x+2,0.9*b[0].y);this.ctx.lineTo(b[1].x+2,0.95*b[1].y);1<=b[0].x&&(this.ctx.stroke(),this.ctx.restore());this.ctx.closePath();this.ctx.beginPath();this.ctx.save();1<=b[0].x?(this.ctx.shadowColor=this.shadowColor,this.ctx.strokeStyle="#dedede",this.ctx.shadowBlur=0.075*(this.width-b[2].x/2),this.ctx.shadowOffsetX=0.13*-(this.width-b[1].x),this.ctx.lineWidth=2):this.ctx.restore();
this.ctx.moveTo(b[0].x+2,0.9*b[0].y);this.ctx.lineTo(b[1].x+2,0.95*b[1].y);1<=b[0].x&&(this.ctx.stroke(),this.ctx.restore());this.ctx.closePath();this.ctx.beginPath();this.ctx.save();1<=b[0].x?(this.ctx.shadowColor=this.shadowColor,this.ctx.strokeStyle="#dedede",this.ctx.lineWidth=2,this.ctx.shadowBlur=0.075*(this.width-b[2].x/2),this.ctx.shadowOffsetX=0.04*(this.width-b[2].x)):this.ctx.restore();this.ctx.moveTo(b[0].x,b[0].y);this.ctx.lineTo(b[1].x,b[1].y);1<=b[0].x&&(this.ctx.stroke(),this.ctx.restore());
this.ctx.closePath()},play:function(){this.imgError||1>=this.images.length||!this.config.autoBool||this.timer||this.timeOut||(this.timeOut=setTimeout(this.animate.bind(this),this.time))},pause:function(){this.imgError||1>=this.images.length||!this.config.autoBool||(clearTimeout(this.timeOut),this.timeOut=null,cancelAnimationFrame(this.timer),this.timer=null)},getRunPosition:function(){0>=this.positions[0].y&&(this.positions[0].x-=0.0175*this.width);this.positions[0].x<this.width/2&&(this.positions[0].x-=
0.0035*this.width);0<this.positions[0].y&&(this.positions[0].y-=0.05*this.height*3.5);0<this.positions[1].x&&(this.positions[1].x-=0.0175*this.width);this.positions[2].x-=0.0085*this.width*3.5;this.positions[2].y-=0.01925*this.height;this.positions[2].x<=0.4*this.width&&(this.positions[2].y+=0.01925*this.height);0>=this.positions[0].y&&(this.positions[3].x-=0.03325*this.width);0<this.positions[3].y&&(this.positions[3].y-=0.05*this.height*3.5)},animate:function(){this.ctx.clearRect(0,0,this.width,
this.height);if(!this.imgError&&(this.drawNextImage(this.images[1]),this.cutImg(this.positions),this.drawCover(this.positions),this.getRunPosition(),0<=this.positions[0].x&&(this.timer=requestAnimationFrame(this.animate.bind(this))),0>this.positions[0].x)){this.pause();this.drawNextImage(this.images[1]);var b=this.images.shift();this.images.push(b);this.getPosition();this.timeOut=setTimeout(this.animate.bind(this),this.time)}},onResize:function(b,c){var d=this.config.width*b/this.width;this.fScale=
b/this.pageWidth;this.pageWidth=b;this.pageHeight=c;this.btnWidth*=this.fScale;this.banner.css({"-webkit-transform-origin":"0 0","-o-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+d+")","-o-transform":"scale("+d+")","-ms-transform":"scale("+d+")","-moz-transform":"scale("+d+")",transform:"scale("+d+")"});this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),
c=this.config.animation;this.banner.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.banner.one(b,function(){this.banner.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.banner.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");
Class("Print",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.pageIndex=g;this.initArea();this.initEvents();this.onResize()},initArea:function(){this.area=$("<div class='flip-action'></div>");this.button=$("<img src = '"+uiBaseURL+"print_icon.png'></img>");this.parent.append(this.area);this.area.append(this.button);this.initStyle();this.initImageForPrint()},initStyle:function(){this.area.css({position:"absolute",border:this.config.borderWidth+"px solid "+Color(this.config.borderColor).toString(),
opacity:this.config.alpha,"-webkit-transform-origin":"50% 50%","-moz-transform-origin":"50% 50%","-ms-transform-origin":"50% 50%","-o-transform-origin":"50% 50%","transform-origin":"50% 50%"});this.button.css({position:"absolute",width:"16px",height:"16px",top:"5px",right:"5px",cursor:"pointer"})},getImageSizeForMM:function(b,c){var d=690,f=1021,g=b/c;g>690/1021?690<b?(d=690,f=d/g):(d=b,f=c):1021<c?(f=1021,d=f*g):(d=b,f=c);return{width:d,height:f}},getScaleConfig:function(b,c){var d=bookConfig.largePageWidth,
f=bookConfig.largePageHeight,g={},g=b/c,h=d/f,k=d*this.config.x,l=f*this.config.y;return g=g>h&&b>=d?{y:(l-(f-d/g)/2)/c,x:this.config.x,pWidth:d,pHeight:f}:g<h&&c>=f?{x:(k-(d-f*g)/2)/b,y:this.config.y,pWidth:d,pHeight:f}:{x:this.config.x,y:this.config.y,pWidth:b,pHeight:c}},initImageForPrint:function(){this.ready=!1;var b=getPageDir(this.pageIndex,"normal",originTotalPageCount),c=this.getImageSizeForMM(bookConfig.largePageWidth*this.config.width,bookConfig.largePageHeight*this.config.height),d=c.width,
f=c.height;this.printedImage=$("<div></div>");var g=$("<img width='"+d+"px' height = '"+f+"px'></img>");this.printedImage.append(g);var h=$("<img></img>"),k=$("<canvas width='"+d+"px' height = '"+f+"px'></canvas>");h.on("load",function(b){try{var c=k[0].getContext("2d");if(c){var n=h[0].naturalWidth,p=h[0].naturalHeight,q=n*this.config.x,t=p*this.config.y,s=n*this.config.width,r=p*this.config.height;if(!bookConfig.bookPageStretch)var u=this.getScaleConfig(n,p),q=n*u.x,t=p*u.y,s=u.pWidth*this.config.width,
r=u.pHeight*this.config.height;c.drawImage(h[0],q,t,s,r,0,0,d,f);g[0].src=k[0].toDataURL("image/png");h.attr("src","")}}catch(v){console.error&&console.error("Load printed image failed."),this.ready=!0}}.bind(this));g.on("load",function(b){this.ready=!0}.bind(this));h.attr("src",b)},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,overAlpha:b.overAlpha,borderColor:b.borderColor,overColor:b.overColor,
borderWidth:b.barderWidth,printTitle:b.printTitle,printDesc:b.printDesc}},initEvents:function(){parseInt(this.config.rotation);var b=Color(this.config.overColor),c=parseFloat(this.config.overAlpha),d=b.rgba(c);this.area.bind(_event._enter,function(b){this.area.css({"background-color":d})}.bind(this));this.area.bind(_event._leave,function(b){this.area.css({"background-color":""})}.bind(this));this.button.asButton();this.button.bind(_event._start,function(b){return!1});this.button.bind(_event._end,
function(b){this.print();return!1}.bind(this))},print:function(){if(this.ready)try{this.printedImage.printArea()}catch(b){console.error&&console.error("Print image area failed.")}else this.print.delay(this,300)},onResize:function(b,c){b&&(this.pageWidth=b);c&&(this.pageHeight=c);this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.area.css({left:this.left+"px",top:this.top+"px",
width:this.width+"px",height:this.height+"px"})}}).extend(PageItem.Item);
Class("Prismatic",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.prismatic=$("<canvas width='"+this.width+"' height='"+this.height+"' id='prismatic'></canvas>");
this.prismatic.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.prismatic,this.config.rotation);this.parent.append(this.prismatic);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.prismatic)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,rotation:b.location.rotation,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,
colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(){var b=this.prismatic[0],c=b.getContext("2d");
c.clearRect(0,0,b.width,b.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;c.beginPath();c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;c.moveTo(this.config.borderWidth,this.height/2);c.lineTo(this.width/2,this.height);c.lineTo(this.width-2,this.height/2);c.lineTo(this.width/2,this.config.borderWidth);this.config.sh&&this.setShapeShadow(c);if("gradient"==
this.config.fillStyle){var d=this.config.angle*Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),b=c.createLinearGradient(g,f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();0!=this.config.borderWidth&&c.stroke()},
initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.prismatic)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.prismatic[0].width=this.width;
this.prismatic[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.prismatic.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.prismatic.one(b,function(){this.prismatic.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.prismatic.css({left:this.x+
"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Triangle",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.config.borderWidth=Number(this.config.borderWidth);this.colorA=Color(this.config.ColorA).toString();this.colorB=Color(this.config.ColorB).toString();this.config.triangleRight=
parseBool(this.config.triangleRight);this.config.triangleLeft=parseBool(this.config.triangleLeft);this.borderColor=Color(this.config.borderColor).toString();this.triangle=$("<canvas width='"+this.width+"' height='"+this.height+"' id='myCanvas'></canvas>");this.triangle.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.triangle,this.config.rotation);this.parent.append(this.triangle);this.draw();this.initEvent();parseBool(this.config.reflection)&&
this.imageReflection(this.triangle)},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,rotation:b.location.rotation,alpha:b.alpha,color:b.color,fillStyle:b.fillStyle,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,triangleRight:b.triangleRight,triangleLeft:b.triangleLeft,borderWidth:b.borderWidth,
borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,arrowType:b.arrowType,action:b.action,animation:b.animation}},draw:function(){var b=this.triangle[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height);c.beginPath();c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;
c.lineCap="round";c.lineJoin="round";this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;!1==this.config.triangleRight&&!1==this.config.triangleLeft&&(c.moveTo(this.config.borderWidth,this.height),c.lineTo(this.width,this.height),c.lineTo(this.width/2,this.config.borderWidth));!0==this.config.triangleRight&&!1==this.config.triangleLeft&&(c.moveTo(this.config.borderWidth,this.config.borderWidth),c.lineTo(this.config.borderWidth,this.height),c.lineTo(this.width,this.height));!1==
this.config.triangleRight&&!0==this.config.triangleLeft&&(c.moveTo(this.width,this.config.borderWidth),c.lineTo(this.width,this.height),c.lineTo(this.config.borderWidth,this.height));!0==parseBool(this.config.sh)&&this.setShapeShadow(c);if("gradient"==this.config.fillStyle){var d=this.config.angle*Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/
2*Math.sin(f),b=c.createLinearGradient(g,f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();0!=this.config.borderWidth&&c.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL=
"http://"+this.linkURL));this.addActionEvent(this.triangle)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.triangle[0].width=this.width;this.triangle[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+
" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.triangle.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);global.hddr.soo1="tm";
Class("AlphaTransitionBanner",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);1>this.config.images.length||(this.animateConfig(),this.initConfig(d,f),this.initHtml(),this.initCss(),this.addItem(),this.leftButton.onMouseDown(this,this.prePage),this.rightButton.onMouseDown(this,this.nextPage),this.setTitle(0),this.toolBar.hide(),this.currentImageHolder=this.image0Holder,this.currentImage=2%this.images.length,this.image0Holder.append(this.images[0]),this.image1Holder.append(this.images[1]),
this.leftButton.remove(),this.rightButton.remove())},initConfig:function(b,c){if("string"==typeof this.config.images){if(""==this.config.images.trim()){this.photos=[];return}this.photos=[{url:this.config.images}]}else this.photos=Instance.copy(this.config.images);this.photos.node instanceof Array&&(this.photos=this.photos.node);this.photos instanceof Array||(this.photos=[this.photos.node]);1>this.photos.length||(this.photos instanceof Array||void 0==this.photos.node||(this.photos=void 0==this.photos.node[1]?
[this.photos.node]:this.photos.node),this.imgIndex=-1,this.imgWidth=this.config.width*b,this.imgHeight=this.config.height*c,this.boxWidth=this.imgWidth-8,this.boxHeight=this.imgHeight-8,this.x=this.config.x*this.pageWidth,this.y=this.config.y*this.pageHeight,this.interval=3E3,this.duration=1E3*this.config.duration,this.oneTime=1E3*this.config.duration-250,500<this.duration-500&&(this.oneTime=this.duration-500),this.fadeTime=10,this.alpha=100,this.images=[])},initHtml:function(){this.background=$("<div class='banner_background'></div>");
this.slideShowBG=new grayBackground(this.background,"#ffffff",1,this.imgWidth,this.imgHeight);this.toolBar=$("<div></div>");this.imgTitle=$("<div></div>");this.image0Holder=$("<div></div>");this.image1Holder=$("<div></div>");this.img=$("<img style='position : absolute;' />");this.leftButton=new button(this.toolBar,{buttonType:1,iconURL:uiBaseURL+"previous_down.png"});this.rightButton=new button(this.toolBar,{buttonType:1,iconURL:uiBaseURL+"next_down.png"});this.parent.append(this.background);this.background.append(this.image1Holder);
this.background.append(this.image0Holder);this.background.append(this.toolBar)},initCss:function(){this.toolBar.css({width:this.boxWidth,height:"35px",position:"relative"});this.toolBar.css({"z-index":"209"});this.toolBG=new grayBackground(this.toolBar,"#000000",0.4,this.boxWidth,35);this.toolBG.setZindex("210");this.toolBG.setPosition(0,0);this.imgTitle.css({overflow:"hidden",width:this.boxWidth-20+"px",height:"20px",position:"absolute","z-index":"211",background:"",left:"10px",top:"7px",color:"#ffffff"});
this.toolBar.css({left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px"});this.toolBar.append(this.imgTitle);this.rightButton.setCSS({"z-index":212,right:"0px",top:"13px"});this.leftButton.setCSS({"z-index":212,right:"20px",top:"13px"});this.background.css({opacity:this.config.alpha,"z-index":"199",border:"1px solid #333333",width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px",position:"absolute","-webkit-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)",
"-moz-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-ms-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","-o-box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)","box-shadow":"0 0 10px rgba(40, 40, 40, 0.7)"});this.setRotation(this.background,this.config.rotation);this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute","z-index":202,opacity:"1"});this.image1Holder.css({width:this.boxWidth+
"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute","z-index":202,opacity:"1"})},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action,images:b.Images,autoBool:parseBool(b.autoBool),duration:b.duration,animation:b.animation}},play:function(){this.config.autoBool&&(clearInterval(this.timer1),
this.timer1=null,this.timer1=setInterval(this.transition.bind(this),this.duration))},pause:function(){this.config.autoBool&&(clearInterval(this.timer1),this.timer1=null)},transition:function(){var b=this;animateOnce(b.currentImageHolder,{opacity:"0"},this.oneTime,function(){b.currentImageHolder.empty().append(b.images[b.currentImage]);b.currentImageHolder==b.image0Holder?(b.image1Holder.css({"z-index":"208",opacity:"1"}),b.image0Holder.css({"z-index":"207",opacity:"1"}),b.currentImageHolder=b.image1Holder):
(b.image0Holder.css({"z-index":"208",opacity:"1"}),b.image1Holder.css({"z-index":"207",opacity:"1"}),b.currentImageHolder=b.image0Holder);b.currentImage=(b.currentImage+1)%b.images.length})},setTransition:function(b,c,d){b.css({"-webkit-transition":c+" "+d+"s","-o-transition":c+" "+d+"s","-ms-transition":c+" "+d+"s","-moz-transition":c+" "+d+"s",transition:c+" "+d+"s"})},setTitle:function(b){b=this.photos[b].url;var c=b.lastIndexOf("/");b=b.substring(c+1);this.imgTitle.html(b)},nextPage:function(){clearInterval(this.timer0);
this.timer0=null;var b=0,b=0<this.currentImage?(this.currentImage-1)%this.images.length:this.images.length-1;this.setTitle(b);this.currentImageHolder==this.image0Holder?($(this.image0Holder).css({"z-index":"207"}),$(this.image1Holder).css({"z-index":"208"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image1Holder,this.image0Holder.empty().append(this.images[this.currentImage])):($(this.image0Holder).css({"z-index":"208"}),$(this.image1Holder).css({"z-index":"207"}),
this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image0Holder,this.image1Holder.empty().append(this.images[this.currentImage]));this.currentImage=(this.currentImage+1)%this.images.length},prePage:function(){clearInterval(this.timer0);this.timer0=null;var b=0,b=2<this.currentImage?(this.currentImage-3)%this.images.length:1==this.currentImage?this.images.length-2:this.images.length-3;this.setTitle(b);this.currentImageHolder==this.image0Holder?($(this.image0Holder).css({"z-index":"207"}),
$(this.image1Holder).css({"z-index":"208"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image1Holder,this.image1Holder.empty().append(this.images[b])):($(this.image0Holder).css({"z-index":"208"}),$(this.image1Holder).css({"z-index":"207"}),this.alpha=100,$(this.currentImageHolder).css({opacity:this.alpha/100}),this.currentImageHolder=this.image0Holder,this.image0Holder.empty().append(this.images[this.index]));this.currentImage=(this.currentImage-
1)%this.images.length},addItem:function(){for(var b=0;b<this.photos.length;b++){var c=$("<div></div>");c.css({width:this.boxWidth+"px",height:this.boxHeight+"px"});image=$("<img style='position : absolute;' />");image.remove();var d=this.photos[b].url,d=this.fixRelativePath(d);bookConfig.useTheAliCloudChart&&(d=this.getOssUrl(d,this.boxWidth,this.boxHeight,"lfit"));image.attr("src",d);image.css({width:this.boxWidth+"px",height:this.boxHeight+"px"});c.append(image);this.images[b]=c}},onResize:function(b,
c){this.pageWidth=b;this.pageHeight=c;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.background.css({width:this.imgWidth,height:this.imgHeight});this.toolBar.css({width:this.boxWidth,height:"35px"});this.toolBG.onResize(this.boxWidth,35);this.toolBG.setPosition(0,0);this.imgTitle.css({width:this.boxWidth-20+"px",height:"20px",left:"10px",top:"7px"});this.slideShowBG.onResize(this.imgWidth,
this.imgHeight);for(var d=0;d<this.images.length;d++)this.images[d].children().css({width:this.boxWidth+"px",height:this.boxHeight+"px"});this.setPosition()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px",position:"absolute"});this.image0Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute"});
this.image1Holder.css({width:this.boxWidth+"px",height:this.boxHeight+"px",left:(this.imgWidth-this.boxWidth)/2+"px",top:(this.imgHeight-this.boxHeight)/2+"px",position:"absolute"})},changeImage:function(b){this.imgIndex=b;this.img.remove();b=this.photos[b].url;b=this.fixRelativePath(b);var c=this;this.img.attr("src",b);this.img.on("load",function(){var b=c.boxWidth,f=c.boxHeight;c.img.css({width:b+"px",height:f+"px"});c.boxWidth!=b||c.boxHeight!=f?c.image0Holder.animate({width:b+8,height:f+8,left:(c.pw-
b)/2,top:(c.ph-f)/2},300,function(){c.image0Holder.append(c.img)}):(c.image0Holder.append(c.img),c.image1Holder.append(c.img))})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.background.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.background.one(b,function(){this.background.css({animation:""})}.bind(this))}},setImagePosition:function(){},show:function(){},hide:function(){}}).extend("Item");
global.hddr.soa8=hddr.soa7+"i";global.hddr.sov9=function(b,c){return b+"ph"+c+"l"};
Class("Carousel",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.width=Number(this.config.width)*this.pageWidth;this.height=Number(this.config.height)*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.config.duration||(this.config.duration=3);this.id="carousel"+g;this.imageItem=[];if(this.images=Instance.copy(this.config.images))this.images.node instanceof Array&&(this.images=this.images.node),this.images[0]||
(this.images=[this.images.node]);if(!(1>this.config.images)){if(this.images&&this.images.length)for(b=0;b<this.images.length;b++)this.imageItem.push(this.images[b]),this.imageItem[b].url=this.fixRelativePath(this.imageItem[b].url);this.content=$("<div class='initCarousel'></div>");this.content.css({opacity:this.config.alpha,position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:"0px solid red"});this.setRotation(this.content,this.config.rotation);
this.currentIndex=0;this.parent.append(this.content);this.initImages();this.config.showButton&&this.initButtons()}},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,images:b.Images,duration:parseInt(b.duration),autoPlay:parseBool(b.autoBool),showButton:parseBool(b.selectBtn),hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,animation:b.animation}},initImages:function(){if(void 0!=this.images&&
null!=this.images&&0!=this.images.length){this.refreshImageAndPosition();this.carouselList=new CarouselImageList(this.imageItem.length);this.carouselList.setResources(this.aImages);this.carouselList.setImagesIndex(this.aImagesIndex);this.carouselList.setPositions(this.aPositions);for(var b=0;b<this.aPositions.length;b++){var c=new CarouselImage(this,this.aPositions[b]);c.setBoxIndex(b);this.carouselList.addInstance(c)}this.carouselList.loadResources();this.carouselList.blurAll()}},initButtons:function(){this.leftButton=
$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="position:absolute;z-index:1000;cursor:pointer;"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="position:absolute;z-index:1000;cursor:pointer;"></img>');this.setButtonPosition();this.content.append(this.leftButton);this.content.append(this.rightButton);this.leftButton.bind(_event._down,function(){return!1});this.leftButton.bind(_event._end,function(b){this.move(1);b.stopPropagation&&
b.stopPropagation();return!1}.bind(this));this.rightButton.bind(_event._down,function(){return!1});this.rightButton.bind(_event._end,function(b){this.move(-1);b.stopPropagation&&b.stopPropagation();return!1}.bind(this))},refreshImageAndPosition:function(){void 0!=this.imageItem&&null!=this.imageItem&&0!=this.imageItem.length&&(this.instanceCount=5,5>this.imageItem.length&&(this.instanceCount=Math.min(this.imageItem.length)),this.refreshImages(),this.refreshPositions())},refreshImages:function(){this.refreshImagesIndex();
this.aImages=[];for(var b=0;b<this.aImagesIndex.length;b++){var c=this.imageItem[this.aImagesIndex[b]].url;bookConfig.useTheAliCloudChart&&(c=this.getOssUrl(c,this.width,this.height,"lfit"));this.aImages.push(c)}},refreshImagesIndex:function(){this.aImagesIndex=[];switch(this.instanceCount){case 1:this.aImagesIndex.push(0);break;case 2:this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;case 3:this.aImagesIndex.push((this.currentIndex-
1+this.imageItem.length)%this.imageItem.length);this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;case 4:this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length);this.aImagesIndex.push(this.currentIndex%this.imageItem.length);this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length);break;default:this.aImagesIndex.push((this.currentIndex-2+this.imageItem.length)%this.imageItem.length),
this.aImagesIndex.push((this.currentIndex-1+this.imageItem.length)%this.imageItem.length),this.aImagesIndex.push(this.currentIndex%this.imageItem.length),this.aImagesIndex.push((this.currentIndex+1)%this.imageItem.length),this.aImagesIndex.push((this.currentIndex+2)%this.imageItem.length)}},refreshPositions:function(){this.aPositions=[];var b=this.width/5;switch(this.instanceCount){case 1:Math.ceil(this.width/2);this.aPositions.push(new CarouselPosition(0,0,this.width,this.height,1,1));break;case 2:var b=
Math.ceil(this.width/2),c=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(c,0,b,this.height,2,1));c=Math.ceil(b+0.1*b)/0.8;this.aPositions.push(new CarouselPosition(c,0.1*this.height/0.8,b,this.height,1,0.8));break;case 3:b=Math.ceil(this.width/2);c=Math.ceil(0.05*b)/0.8;this.aPositions.push(new CarouselPosition(c,0.1*this.height/0.8,b,this.height,1,0.8));c=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(c,0,b,this.height,2,1));c=Math.ceil(b)/0.8;this.aPositions.push(new CarouselPosition(c,
0.1*this.height/0.8,b,this.height,1,0.8));break;case 4:b=Math.ceil(this.width/2);c=Math.ceil(0.05*b)/0.8;this.aPositions.push(new CarouselPosition(c,0.1*this.height/0.8,b,this.height,1,0.8));c=Math.ceil(this.width/4);this.aPositions.push(new CarouselPosition(c,0,b,this.height,2,1));c=Math.ceil(b)/0.8;this.aPositions.push(new CarouselPosition(c,0.1*this.height/0.8,b,this.height,1,0.8));break;default:b=this.width/3,c=Math.ceil(0.2*b)/0.6,this.aPositions.push(new CarouselPosition(c,0.2*this.height/0.6,
b,this.height,1,0.6)),c=Math.ceil(this.width/6+0.1*b)/0.8,this.aPositions.push(new CarouselPosition(c,0.1*this.height/0.8,b,this.height,2,0.8)),this.aPositions.push(new CarouselPosition(b,0,b,this.height,3,1)),c=Math.ceil(this.width/2)/0.8,this.aPositions.push(new CarouselPosition(c,0.1*this.height/0.8,b,this.height,2,0.8)),c=Math.ceil(0.66*this.width)/0.6,this.aPositions.push(new CarouselPosition(c,0.2*this.height/0.6,b,this.height,1,0.6))}},play:function(){this.config.autoPlay&&(window.clearInterval(this.timer),
this.timer=null,this.timer=window.setInterval(function(){this.move(1)}.bind(this),1E3*this.config.duration))},pause:function(){this.config.autoPlay&&(window.clearInterval(this.timer),this.timer=null)},move:function(b){this.isMoving||(this.isMoving=!0,this.currentIndex+=b,this.currentIndex>=this.imageItem.length&&(this.currentIndex%=this.imageItem.length),0>this.currentIndex&&(this.currentIndex+=this.imageItem.length),this.instanceCount=this.carouselList.instanceCount(),this.refreshImages(),this.carouselList.setResources(this.aImages),
this.carouselList.setImagesIndex(this.aImagesIndex),this.carouselList.move(b),function(){this.isMoving=!1}.delay(this,1E3))},moveTo:function(b){5<=this.imageItem.length?this.move(b-2):4==this.imageItem.length?this.move(b-1):this.move(b-this.currentIndex)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.config.showButton&&
this.setButtonPosition();this.refreshImageAndPosition();this.carouselList.setResources(this.aImages);this.carouselList.setImagesIndex(this.aImagesIndex);this.carouselList.setPositions(this.aPositions);this.carouselList.resizeAll()},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;
this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},setButtonPosition:function(){var b=(this.height-32)/2;this.leftButton.css({left:"0px",top:b+"px"});this.rightButton.css({right:"0px",top:b+"px"})}}).extend("Item");
var CarouselImage=Class({create:function(b,c){this.parent=b;this.position=Instance.copy(c);this.instance=$('<img style="position:absolute"/>');this.parent.content.append(this.instance);this.parent.addShadow(this.instance);this.imageHeight=this.imageWidth=0;this.instance.on("load",this.onImageLoad.bind(this));this.instance.bind(_event._down,function(){return!1});this.instance.bind(_event._end,this.onClick.bind(this));this.setArea();this.setZindex(this.position.zindex)},blur:function(b){!0==b?this.instance.css({"-webkit-filter":"blur(2px)",
"-moz-filter":"blur(2px)","-o-filter":"blur(2px)","-ms-filter":"blur(2px)",filter:"blur(2px)"}):this.instance.css({"-webkit-filter":"blur(0px)","-moz-filter":"blur(0px)","-o-filter":"blur(0px)","-ms-filter":"blur(0px)",filter:"blur(0px)"})},setSrc:function(b){this.instance[0].src=b},getSrc:function(){return this.instance[0].src},setIndex:function(b){this.imageIndex=b},setBoxIndex:function(b){this.boxIndex=b},onImageLoad:function(){var b=this.instance[0];this.imageWidth=b.naturalWidth;this.imageHeight=
b.naturalHeight;this.resetPosition();this.setArea(this.position)},onClick:function(){4>this.parent.imageItem.length?this.parent.moveTo(this.imageIndex):this.parent.moveTo(this.boxIndex);return!1},resetPosition:function(){if(0!=this.imageWidth&&0!=this.imageHeight){var b=Math.ceil(this.imageHeight*this.position.width/this.imageWidth);b>this.position.height?(b=Math.ceil(this.position.height*this.imageWidth/this.imageHeight),this.position.width=b):(this.position.height=b,this.position.top=(this.parent.height-
b)/2/this.position.scale)}},setArea:function(){this.instance.css({width:this.position.width+"px",height:this.position.height+"px"}).css(this.transformCSS({scale:this.position.scale,tran:{x:this.position.left,y:this.position.top}}))},setZindex:function(b){this.instance.css({"z-index":b})},gotoPosition:function(b){this.position=Instance.copy(b);this.setZindex(this.position.zindex);animateOnce(this.instance,this.transformCSS({tran:{x:this.position.left,y:this.position.top}}),0.5)},resizeCss:function(b){this.position=
Instance.copy(b);this.setZindex(this.position.zindex);this.instance.css(this.transformCSS({tran:{x:this.position.left,y:this.position.top}}))},transformCSS:function(b){var c="",d={};void 0!=b.scale&&($.browser.msie||(c=c+"scale3d("+b.scale+","+b.scale+",1) "),$.browser.msie&&(c=c+"scale("+b.scale+") "));void 0!=b.rotate&&(c=c+"rotate("+b.rotate+"deg) ");void 0!=b.rotateY&&(c=c+"rotateY("+b.rotateY+"deg) ");b.tran&&($.browser.msie&&(c=c+"translate("+b.tran.x+"px,"+b.tran.y+"px) "),$.browser.msie||
(c=c+"translate3d("+b.tran.x+"px,"+b.tran.y+"px,0px) "));void 0!=b.perspective&&(c=c+"perspective("+b.perspective+"px) ");void 0!=b.scaleX&&(c=c+"scaleX("+b.scaleX+") ");void 0!=b.scaleY&&(c=c+"scaleY("+b.scaleY+") ");if(b.origin){var f=b.origin.x+"% "+b.origin.y+"%";d["-webkit-transform-origin"]=f;d["-moz-transform-origin"]=f;d["-ms-transform-origin"]=f;d["-o-transform-origin"]=f;d["transform-origin"]=f}c&&(d["-webkit-transform"]=c,d["-moz-transform"]=c,d["-ms-transform"]=c,d["-o-transform"]=c,d.transform=
c);b.obj&&b.obj.css(d);return d}}),CarouselPosition=Class({create:function(b,c,d,f,g,h){this.left=Math.ceil(b);this.top=Math.ceil(c);this.width=Math.ceil(d);this.height=Math.ceil(f);this.scale=parseFloat(h);this.zindex=g},asString:function(){return"transform:scale("+this.scale+") translate("+this.left+"px,"+this.top+"px),width:"+this.width+",height:"+this.height+",z-index:"+this.zindex}}),CarouselImageList=Class({create:function(b){this.imgLength=b;this.imageInstances=[]},setResources:function(b){this.imageResources=
[];for(var c=0;c<b.length;c++)this.imageResources.push(b[c])},setImagesIndex:function(b){this.imagesIndex=[];for(var c=0;c<b.length;c++)this.imagesIndex.push(b[c])},setPositions:function(b){this.imagePositions=[];for(var c=0;c<b.length;c++)this.imagePositions.push(b[c])},addInstance:function(b){this.imageInstances.push(b)},instanceCount:function(){return this.imageInstances.length},loadResources:function(){for(var b=this.imageInstances.length,c=0;c<b;c++){var d=this.imageInstances[c];d.getSrc()!=
this.imageResources[c]&&(d.setSrc(this.imageResources[c]),d.setIndex(this.imagesIndex[c]))}},move:function(b){var c=this.imageInstances.length;if(0!=c){for(var d=[],f=0;f<c;f++)d[f]=this.imageInstances[f];for(f=0;f<c;f++){var g=f+b;0>g&&(g+=c);g>=c&&(g%=c);this.imageInstances[f]=d[g]}for(f=0;f<c;f++)b=this.imageInstances[f],b.setBoxIndex(f),b.gotoPosition(this.imagePositions[f]);this.loadResources();this.blurAll()}},resizeAll:function(){var b=this.imageInstances.length;if(0!=b)for(var c=0;c<b;c++){var d=
this.imageInstances[c];d.resizeCss(this.imagePositions[c]);d.resetPosition();d.setArea()}},blurAll:function(){for(var b=this.imageInstances.length,c=Math.floor((b+1)/2)-1,d=0;d<b;d++){var f=this.imageInstances[d];d!=c?f.blur(!0):f.blur(!1)}}});global.hddr.sob8=hddr.soa8;global.hddr.soq2=hddr.sov9(hddr.soa8,hddr.soq3)+"5";
Class("DynamicShow",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.childWidth=Math.ceil(this.width/4);this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.borderWidth=this.config.borderWidth;this.id="dynshow"+g;this.images=Instance.copy(this.config.images);this.imageItem=[];this.images||(this.images=[]);this.images[0]||(this.images=[this.images.Image]);
if(this.images&&this.images.length)for(b=0;b<this.images.length;b++)"[object Object]"===Object.prototype.toString.call(this.images[b])?this.imageItem.push(this.images[b].value):this.imageItem.push(this.images[b]),this.imageItem[b]=this.fixRelativePath(this.imageItem[b]),bookConfig.useTheAliCloudChart&&(this.imageItem[b]=this.getOssUrl(this.imageItem[b],this.width,this.height,"lfit"));this.maxZindex=this.images.length+1;this.content=$("<div id='DynamicShow'></div>");this.content.css({opacity:this.config.alpha,
position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",border:"0px solid red"});this.setRotation(this.content,this.config.rotation);this.currentIndex=0;this.parent.append(this.content);this.init()},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,images:b.Images,borderWidth:b.borderWidth,animation:b.animation}},init:function(){this.imageInstances=[];if(0!=
this.imageItem.length){for(var b=0;b<this.imageItem.length;b++){var c=new ImageInstance(this,b);c.setImage(this.imageItem[b]);this.content.append(c);this.imageInstances.push(c)}this.currentIndex=-1;this.initButtons()}},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');
this.setButtonPosition();this.leftButton.bind(_event._click,function(){this.preImage()}.bind(this));this.rightButton.bind(_event._click,function(){this.nextImage()}.bind(this));this.leftButton.css({display:"none"});this.rightButton.css({display:"none"});this.content.append(this.leftButton);this.content.append(this.rightButton);isPhone()||isPad()||(this.content.bind(_event._enter,function(){this.leftButton.css({display:"block"});this.rightButton.css({display:"block"})}.bind(this)),this.content.bind(_event._leave,
function(){this.leftButton.css({display:"none"});this.rightButton.css({display:"none"})}.bind(this)))},preImage:function(){-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide();this.currentIndex=(this.currentIndex-1+this.images.length)%this.images.length;this.imageInstances[this.currentIndex].show()},nextImage:function(){-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide();this.currentIndex=(this.currentIndex+1)%this.images.length;this.imageInstances[this.currentIndex].show()},
showImage:function(b){-1!=b&&(-1!=this.currentIndex&&this.imageInstances[this.currentIndex].hide(),this.currentIndex=b,this.imageInstances[this.currentIndex].show())},refreshZindex:function(){for(var b=this.imageInstances[this.currentIndex].zIndex,c=0;c<this.images.length;c++)if(c!=this.currentIndex){var d=this.imageInstances[c].zIndex;d>b&&(d--,this.imageInstances[c].setZindex(d))}this.imageInstances[this.currentIndex].setZindex(this.images.length-1)},setButtonPosition:function(){var b=(this.height-
32)/2;this.leftButton.css({left:"0px",top:b+"px"});this.rightButton.css({right:"0px",top:b+"px"})},onResize:function(b,c){var d=b/this.pageWidth;this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();this.childWidth=Math.ceil(this.width/4);for(var f=0;f<this.imageInstances.length;f++)this.imageInstances[f].onResize(d)},
showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");
var ImageInstance=Class({create:function(b,c){this.parent=b;this.zIndex=this.index=c;this.imageHeight=this.imageWidth=0;this.borderWidth=Math.ceil(this.parent.borderWidth/2);this.height=this.width=this.parent.width-2*this.borderWidth;this.maxLeft=this.parent.width-this.width;this.maxTop=this.parent.height-this.height;this.randomPos=randomPosition(this.parent.width/2,this.parent.height/2);this.rotation=this.randomPos.rotation;this.animate=[];this.instance=$("<img></img>");this.instance.css({position:"absolute",
display:"none"});this.setTransform(this.instance,this.randomPos);this.setBorderWidth(this.borderWidth);this.initShadow();this.initEvents();b.content.append(this.instance)},initShadow:function(){this.instance.css({"-moz-box-shadow":"2px 2px 4px #252525","box-shadow":"2px 2px 4px #252525","-webkit-box-shadow":"2px 2px 4px #252525","-ms-box-shadow":"2px 2px 4px #252525","-o-box-shadow":"2px 2px 4px #252525"})},initEvents:function(){this.instance.on("load",function(){this.onImageLoad()}.bind(this));this.instance.bind(_event._click,
function(){this.parent.currentIndex==this.index?(this.hide(),this.parent.currentIndex=-1):this.parent.showImage(this.index)}.bind(this))},onImageLoad:function(){var b=this.instance[0];this.imageWidth=b.naturalWidth;this.imageHeight=b.naturalHeight;this.getImgConfig();this.height=Math.ceil(this.imageHeight*this.width/this.imageWidth);this.maxTop=this.parent.height-this.height;this.instance.css({width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px",display:"block"})},setImage:function(b){this.instance.attr("src",
b)},onResize:function(b){this.instance.css("z-Index")!=this.parent.maxZindex&&(this.randomPos.left*=b,this.randomPos.top*=b,this.setTransform(this.instance,this.randomPos));this.getImgConfig();this.resize()},resize:function(){this.instance.css({width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px"})},setTransform:function(b,c){b.css({"-webkit-transform":"rotate("+c.rotation+"deg) scale("+c.scale+") translate("+c.left+"px,"+c.top+"px)","-ms-transform":"rotate("+c.rotation+
"deg) scale("+c.scale+") translate("+c.left+"px,"+c.top+"px)","-moz-transform":"rotate("+c.rotation+"deg) scale("+c.scale+") translate("+c.left+"px,"+c.top+"px)","-o-transform":"rotate("+c.rotation+"deg) scale("+c.scale+") translate("+c.left+"px,"+c.top+"px)",transform:"rotate("+c.rotation+"deg) scale("+c.scale+") translate("+c.left+"px,"+c.top+"px)"})},getTransform:function(b){return{"-webkit-transform":"rotate("+b.rotation+"deg) scale("+b.scale+") translate("+b.left+"px,"+b.top+"px)","-ms-transform":"rotate("+
b.rotation+"deg) scale("+b.scale+") translate("+b.left+"px,"+b.top+"px)","-moz-transform":"rotate("+b.rotation+"deg) scale("+b.scale+") translate("+b.left+"px,"+b.top+"px)","-o-transform":"rotate("+b.rotation+"deg) scale("+b.scale+") translate("+b.left+"px,"+b.top+"px)",transform:"rotate("+b.rotation+"deg) scale("+b.scale+") translate("+b.left+"px,"+b.top+"px)"}},move:function(){this.instance.css({left:this.left+"px",top:this.top+"px"})},setZindex:function(b){this.zIndex=b;this.instance.css({"z-index":b})},
setBorderWidth:function(b){this.instance.css({border:b+"px solid white"})},getImgConfig:function(){this.imageWidth/this.imageHeight>this.parent.width/this.parent.height?(this.width=this.parent.width-2*this.borderWidth,this.height=this.width*this.imageHeight/this.imageWidth,this.left=0,this.top=(this.parent.height-this.height-2*this.borderWidth)/2):(this.height=this.parent.height-2*this.borderWidth,this.width=this.height*this.imageWidth/this.imageHeight,this.left=(this.parent.width-this.width-2*this.borderWidth)/
2,this.top=0)},show:function(){0!=this.imageWidth&&0!=this.imageHeight&&(this.instance.css({"z-index":this.parent.maxZindex}),animateOnce(this.instance,this.getTransform({left:"0",top:"0",rotation:"0",scale:"1"}),500))},hide:function(){0!=this.imageWidth&&0!=this.imageHeight&&(this.randomPos=randomPosition(this.parent.width/2,this.parent.height/2),this.parent.refreshZindex(),animateOnce(this.instance,this.getTransform(this.randomPos),500))}});
function randomPosition(b,c){var d=Math.floor(Math.random()*b);0.5>=Math.random()&&(d=-d);var f=Math.floor(Math.random()*c);0.5>=Math.random()&&(f=-f);var g=75-Math.floor(150*Math.random());return{left:d,top:f,scale:0.25,rotation:g}}
Class("FocusJump",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.id="flip_jump_"+g;this.translate=0;this.animateConfig();this.width=this.config.width*d;this.height=this.config.height*f;this.margin=Math.floor(5*this.width/100);this.initContent();this.initImages();this.initButtons();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.content);this.onResize(d,f)},initContent:function(){this.content=$("<div id='"+this.id+"'></div>");this.content.css({opacity:this.config.alpha,
overflow:"hidden",position:"absolute","z-index":"1"});this.setRotation(this.content,this.config.rotation);this.imagesContent=$("<div></div>");this.imagesContent.css({position:"absolute",left:"0px",top:"0px",height:"100%"}).css(transformCSS({tran:{x:0,y:0}}));this.parent.append(this.content);this.content.append(this.imagesContent);this.initBackground()},initBackground:function(){if(this.config.addBackground){var b=Color(this.config.backgroundColor);this.content.css({"background-color":b.rgba(this.config.backgroundAlpha)})}this.config.addBorder&&
(b=Color(this.config.borderColor),this.content.css({border:this.config.borderWidth+"px solid "+b.rgba(this.config.borderAlpha)}))},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000;left:0px;top:0px;bottom:0px;margin:auto"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000;right:0px;top:0px;bottom:0px;margin:auto"></img>');
isPhone()||isPad()||(this.leftButton.css({display:"none"}),this.rightButton.css({display:"none"}));this.content.append(this.leftButton);this.content.append(this.rightButton)},initImages:function(){this.$images=[];this.images=this.config.images;if(""!=this.images){if(!(this.images instanceof Array)){if(""==this.images)return;this.images.node&&(this.images=[this.images.node])}for(var b=this,c=0;c<this.images.length;c++){var d=this.images[c].url,f=this.images[c].title,g=this.images[c].link,d=this.fixRelativePath(d);
bookConfig.useTheAliCloudChart&&(d=this.getOssUrl(d,this.getImageWidth(),this.height/2,"lfit"));var h=$("<div style='position:absolute;'></div>"),f=$("<span class='text' style='font-weight:bold;color:rgba(255,0,0,0.5);position:absolute;overflow:auto;'>"+f+"</span>"),k=$("<img style='position:absolute;display:none;top:0px'></img>");h.append(k).append(f);g&&function(b,c){h.bind(_event._click,function(){window.open(c)})}(this,g);k.on("load",function(){var c=$(this);b.resizeImage(c,c.parent(),c.next());
c.css({display:"block"}).css(transformCSS({tran:{x:0,y:0}}))});k.attr("src",d);this.imagesContent.append(h);this.$images.push(h)}}},resizeImage:function(b,c,d){if(b[0].naturalWidth&&b[0].naturalHeight){var f=this.getImageWidth(),g=Math.floor(f/b[0].naturalWidth*b[0].naturalHeight);b.css({width:f+"px",height:g+"px"});c.css({width:f+"px",height:g+"px"});d.css({top:g+"px"});this.imagesContent.css({height:g+"px",top:(this.height-g)/2+"px"})}},getImageWidth:function(){return Math.floor((this.width-3*this.margin)/
3)},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,rotation:b.location.rotation,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,images:b.componentData.Images,addBackground:parseBool(b.componentData.addBack),addBorder:parseBool(b.componentData.addBorder),backgroundColor:b.componentData.backColor,backgroundAlpha:b.componentData.backAlpha,borderColor:b.componentData.borderColor,
borderAlpha:b.componentData.borderAlpha,borderWidth:b.componentData.borderWidth,animation:b.animation}},initEvents:function(){this.content.bind(_event._enter,function(){3>=this.images.length||(this.leftButton.css({display:"block"}),this.rightButton.css({display:"block"}))}.bind(this));this.content.bind(_event._leave,function(){this.leftButton.css({display:"none"});this.rightButton.css({display:"none"})}.bind(this));this.leftButton.bind(_event._click,function(b){this.moveLeft();b.stopPropagation&&
b.stopPropagation();return!1}.bind(this));this.rightButton.bind(_event._click,function(b){this.moveRight();b.stopPropagation&&b.stopPropagation();return!1}.bind(this));for(var b=this,c=0;c<this.$images.length;c++){var d=this.$images[c];isPhone()||isPad()?(d.bind(_event._down,function(){b.moveImageUp($(this))}),d.bind(_event._end,function(){b.moveImageDown($(this))})):(d.bind(_event._enter,function(){b.moveImageUp($(this))}),d.bind(_event._leave,function(){b.moveImageDown($(this))}))}},moveLeft:function(){this.translate+=
this.getImageWidth();0<this.translate&&(this.translate=0);animateOnce(this.imagesContent,transformCSS({tran:{x:this.translate,y:0}}),1E3)},moveRight:function(){this.translate-=this.getImageWidth();var b=this.width-this.imagesContent.width();this.translate<b&&(this.translate=b);animateOnce(this.imagesContent,transformCSS({tran:{x:this.translate,y:0}}),1E3)},moveImageUp:function(b){animateOnce(b,transformCSS({tran:{x:0,y:-Math.floor(this.height/4)}}),800)},moveImageDown:function(b){animateOnce(b,transformCSS({tran:{x:0,
y:0}}),800)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.margin=Math.floor(5*this.width/100);this.content.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"});this.resizeImages()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),
c=this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},resizeImages:function(){var b=this.getImageWidth();this.imagesContent.css({width:this.margin+(this.margin+b)*this.$images.length+"px"});if(1==this.$images.length){var c=this.$images[0],d=this.margin+b;c.css({left:d+"px"});this.resizeImage(c.find("img"),c,c.find("text"))}else for(var f=0;f<this.$images.length;f++)c=
this.$images[f],d=this.margin+(this.margin+b)*f,c.css({left:d+"px"}),this.resizeImage(c.find("img"),c,c.find("span"))}}).extend("Item");
Class("FlipJump",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="jump"+g;this.itemHeight=Math.floor(0.5*this.height);this.itemWidth=Math.floor(0.5*this.width);this.images=this.config.images;this.images[0]||(this.images=[this.images.Image]);this.Items=[];this.imageCount=this.images.length;
if(this.images&&this.images instanceof Array)for(b=0;b<this.images.length;b++)"[object Object]"===Object.prototype.toString.call(this.images[b])?this.Items.push(this.images[b].value):this.Items.push(this.images[b]),this.Items[b]=this.fixRelativePath(this.Items[b]),bookConfig.useTheAliCloudChart&&(this.Items[b]=this.getOssUrl(this.Items[b],this.itemWidth,this.itemHeight,"lfit"));this.minZindex=0;this.maxZindex=this.images.length+1;this.content=$("<div></div>");this.content.css({opacity:this.config.alpha,
position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px","z-index":"1"});this.setRotation(this.content,this.config.rotation);this.initBackground();this.parent.append(this.content);this.init()},initBackground:function(){if(this.config.addBackground){var b=Color(this.config.backgroundColor);this.content.css({"background-color":b.rgba(this.config.backgroundAlpha)})}this.config.addBorder&&(b=Color(this.config.borderColor),this.content.css({border:"1px solid "+
b.rgba(this.config.borderAlpha)}))},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,images:b.Images,addBackground:parseBool(b.addBack),addBorder:parseBool(b.addBorder),backgroundColor:b.backgroundColor,backgroundAlpha:b.backgroundColorAlpha,borderColor:b.backgroundBorderColor,animation:b.animation}},init:function(){this.busy=!1;this.imageItems=[];for(var b=0;b<this.Items.length;b++){var c=new FlipJumpItem(this,
0==b?!1:!0);c.setImage(this.Items[b]);this.imageItems.push(c)}this.resetZindex();this.resetJumpEvent();1<=this.imageCount&&this.initButtons()},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.setButtonPosition();var b=this;this.leftButton.bind(_event._click,
function(b){this.preImage();b.stopPropagation&&b.stopPropagation();return!1}.bind(this));this.rightButton.bind(_event._click,function(b){this.nextImage();b.stopPropagation&&b.stopPropagation();return!1}.bind(this));this.leftButton.css({display:"none"});this.rightButton.css({display:"none"});this.content.append(this.leftButton);this.content.append(this.rightButton);isPhone()||isPad()||(this.content.bind(_event._enter,function(){b.leftButton.css({display:"block"});b.rightButton.css({display:"block"})}),
this.content.bind(_event._leave,function(){b.leftButton.css({display:"none"});b.rightButton.css({display:"none"})}))},preImage:function(){if(!0!=this.busy){this.busy=!0;var b=this.imageItems[0],c=this.imageItems[this.imageCount-1],d=this;c.jumpUp(function(){b.jumpDown();c.setZindex(d.maxZindex);c.toNormal(function(){d.imageItems.pop();d.imageItems.unshift(c);d.resetZindex();d.busy=!1})})}},nextImage:function(){if(!0!=this.busy){this.busy=!0;var b=this.imageItems[0],c=this.imageItems[1],d=this;1==
this.imageItems.length&&(c=b);b.jumpUp(function(){b.setZindex(d.minZindex);c.toNormal();b.jumpDown(function(){d.imageItems.shift();d.imageItems.push(b);d.resetZindex();d.busy=!1})})}},resetZindex:function(){for(var b=0;b<this.imageItems.length;b++)this.imageItems[b].setZindex(this.imageItems.length-b)},resetJumpEvent:function(){for(var b=0;b<this.imageItems.length;b++)this.imageItems[b].instance.bind(_event._click,function(){this.nextImage()}.bind(this))},setButtonPosition:function(){var b=(this.height-
32)/2;this.leftButton.css({left:"0px",top:b+"px"});this.rightButton.css({right:"0px",top:b+"px"})},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();this.itemHeight=Math.floor(0.5*this.height);this.itemWidth=Math.floor(0.5*this.width);for(var d=0;d<this.imageItems.length;d++)this.imageItems[d].resize(this.itemWidth,
this.itemHeight)},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})}}).extend("Item");
var FlipJumpItem=Class({create:function(b,c){this.parent=b;this.initRotate=c;this.rotation=0;this.width=b.itemWidth;this.height=b.itemHeight;this.imageHeight=this.imageWidth=0;this.instance=$("<img></img>");this.instance.css({position:"absolute",left:"0px",top:"0px",width:this.width+"px",height:this.height+"px",border:"2px solid white",display:"none"});this.instance.on("load",function(){this.onImageLoad()}.bind(this));this.initShadow();b.content.append(this.instance)},initShadow:function(){this.instance.css({"-moz-box-shadow":"2px 2px 4px #252525",
"box-shadow":"2px 2px 4px #252525","-webkit-box-shadow":"2px 2px 4px #252525","-ms-box-shadow":"2px 2px 4px #252525","-o-box-shadow":"2px 2px 4px #252525"})},getRandomRotation:function(){return 80-Math.ceil(160*Math.random())},onImageLoad:function(){var b=this.instance[0];this.naturalWidth=b.naturalWidth;this.naturalHeight=b.naturalHeight;this.width=this.parent.itemWidth;this.height=this.parent.itemHeight;this.setImageSize();this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+
"px",height:this.height+"px",display:"block"});!0==this.initRotate&&(b=this.getRandomRotation(),this.instance.css(transformCSS({rotate:b,tran:{x:0,y:0}})),this.rotation=b)},setImageSize:function(){var b=this.naturalWidth/this.naturalHeight,c=this.width/this.height;b>c?this.naturalWidth>=this.width&&(this.width=this.width,this.height=this.width/b):b<c?this.naturalHeight>=this.height&&(this.height=this.height,this.width=b*this.height):(this.height=this.naturalHeight,this.width=this.naturalWidth);this.left=
Math.ceil((this.parent.width-this.width)/2);this.top=Math.ceil((this.parent.height-this.height)/2)},setImage:function(b){this.instance.attr("src",b)},setZindex:function(b){this.instance.css({"z-index":b})},randomRotate:function(b){var c=this.getRandomRotation();this.rotateTo(c,b)},rotateTo:function(b,c){var d=this.rotation,f=20;void 0!=c&&(f=c);var g=this,h=0,k=window.setInterval(function(){var c=$.easing.swing(null,h,d,b-d,f);g.instance.rotate(c);g.rotation=c;h++>=f&&window.clearInterval(k)},20)},
jumpUp:function(b){animateOnce(this.instance,transformCSS({rotate:this.getRandomRotation(),tran:{x:0,y:Math.floor(-this.parent.height)}}),500,b)},jumpDown:function(b){animateOnce(this.instance,transformCSS({rotate:this.getRandomRotation(),tran:{x:0,y:0}}),400,b)},toNormal:function(b){animateOnce(this.instance,transformCSS({rotate:"0",tran:{x:0,y:0}}),400,b)},resize:function(b,c){if(0!=this.imageWith||0!=this.imageHeight)this.width=b,this.height=c,this.setImageSize(),this.instance.css({left:this.left+
"px",top:this.top+"px",width:this.width+"px",height:this.height+"px"})}});
Class("Rotate3D",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.id="3d"+g;if(""!=this.config.images&&(b=this.config.images,b||(this.images=[]),this.Item=[],b instanceof Array||(b.node&&(b=[this.config.images.node]),b.Image&&(b=[this.config.images.Image])),this.imageCount=b.length,0!=this.imageCount)){this.topZindex=
this.imageCount;if(b&&b.length)for(c=0;c<b.length;c++)"[object Object]"===Object.prototype.toString.call(b[c])?this.Item.push(b[c].value):this.Item.push(b[c]),this.Item[c]=this.fixRelativePath(this.Item[c]),bookConfig.useTheAliCloudChart&&(this.Item[c]=this.getOssUrl(this.Item[c],parseInt(0.8*this.width),this.height,"fixed"));b=!0==this.config.addBorder?1:0;this.content=$("<div></div>");this.content.css({opacity:this.config.alpha,position:"absolute",overflow:"hidden",left:this.x+"px",top:this.y+"px",
width:this.width+"px",height:this.height+"px",border:b+"px solid "+Color(this.config.borderColor).toString()});this.setRotation(this.content,this.config.rotation);!0==this.config.addBackground&&this.content.css({background:Color(this.config.backgroundColor).rgba(this.config.backgroundAlpha)});this.parent.append(this.content);this.init();this.rotateTimer=-1;this.step=0}},parseConfig:function(b){return{width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,rotation:b.location.rotation,
alpha:b.alpha,images:b.componentData.Images,addBackground:parseBool(b.componentData.addBack),addBorder:parseBool(b.componentData.addBorder),backgroundColor:b.componentData.backColor,backgroundAlpha:b.componentData.backAlpha,borderColor:b.componentData.borderColor,sh:parseBool(b.shadow.hasDropShadow),sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,animation:b.animation}},init:function(){this.imageItems=[];for(var b=0;b<this.Item.length;b++){var c=
new Rotate3DItem(this,b);c.setImage(this.Item[b]);this.imageItems.push(c)}this.imageItems[0].show();this.currentIndex=0;1<this.Item.length&&this.initButtons()},getOssUrl:function(b,c,d,f){return b=0<b.lastIndexOf("?")?b+("&x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},initButtons:function(){this.leftButton=$('<img class="flip-action" src="'+uiBaseURL+'pre_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');
this.rightButton=$('<img class="flip-action" src="'+uiBaseURL+'next_image.png" style="cursor:pointer;position:absolute;z-index:1000"></img>');this.setButtonPosition();var b=this;this.leftButton.bind(_event._down,this.preImage.bind(this));this.rightButton.bind(_event._down,this.nextImage.bind(this));this.leftButton.bind(_event._end,this.stopRotate.bind(this));this.rightButton.bind(_event._end,this.stopRotate.bind(this));this.leftButton.bind(_event._leave,this.stopRotate.bind(this));this.rightButton.bind(_event._leave,
this.stopRotate.bind(this));isTouchDevice()||(this.leftButton.css({display:"none"}),this.rightButton.css({display:"none"}));this.content.append(this.leftButton);this.content.append(this.rightButton);this.content.bind(_event._enter,function(){b.leftButton.css({display:"block"});b.rightButton.css({display:"block"})});this.content.bind(_event._leave,function(){b.leftButton.css({display:"none"});b.rightButton.css({display:"none"})})},setButtonPosition:function(){if(!(1>=this.Item.length)){var b=(this.height-
32)/2;this.leftButton.css({left:"0px",top:b+"px"});this.rightButton.css({right:"0px",top:b+"px"})}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.setButtonPosition();for(var d=0;d<this.imageItems.length;d++)bookConfig.useTheAliCloudChart?this.imageItems[d].resizeOss():this.imageItems[d].resize()},setPosition:function(){this.x=
this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.content.css({left:this.x+"px",top:this.y+"px"})},preImage:function(){this.step=-1;this.startRotate()},nextImage:function(){this.step=1;this.startRotate()},startRotate:function(){var b=this;this.doRotate();window.clearInterval(this.rotateTimer);this.rotateTimer=window.setInterval(function(){b.doRotate()},120)},doRotate:function(){var b=this.currentIndex;this.currentIndex+=this.step;0>this.currentIndex&&(this.currentIndex+=this.imageCount);
this.currentIndex>=this.imageCount&&(this.currentIndex%=this.imageCount);this.imageItems[b].hide();this.imageItems[this.currentIndex].show()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},stopRotate:function(){window.clearInterval(this.rotateTimer);
this.step=0;this.rotateTimer=-1}}).extend("Item");
var Rotate3DItem=Class({create:function(b,c){var d=this;this.parent=b;this.zIndex=c;this.height=this.parent.height;this.width=this.parent.width;this.imageHeight=this.imageWidth=0;this.instance=$("<img></img>");this.instance.css({position:"absolute",left:"0px",top:"0px",display:"none"});this.setZindex(c);this.initShadow();if(!bookConfig.useTheAliCloudChart)this.instance.on("load",function(){Rotate3DItem.prototype.onImageLoad.apply(d,arguments)});b.content.append(this.instance)},initShadow:function(){var b=
this.parent.config;this.shadowColor=Color(b.sr).toString();!0==b.sh&&this.instance.css({"box-shadow":b.sx+"px "+b.sy+"px "+b.se+"px "+this.shadowColor,"-moz-box-shadow":b.sx+"px "+b.sy+"px "+b.se+"px "+this.shadowColor,"-webkit-box-shadow":b.sx+"px "+b.sy+"px "+b.se+"px "+this.shadowColor,"-ms-box-shadow":b.sx+"px "+b.sy+"px "+b.se+"px "+this.shadowColor,"-o-box-shadow":b.sx+"px "+b.sy+"px "+b.se+"px "+this.shadowColor})},onImageLoad:function(){var b=this.instance[0];this.imageWidth=b.naturalWidth;
this.imageHeight=b.naturalHeight;this.height=Math.floor(this.parent.height);this.width=Math.ceil(0.8*this.parent.width);this.left=Math.ceil(0.1*this.parent.width);this.top=0;this.instance.css({left:this.left+"px",top:this.top+"px",width:this.width+"px",height:this.height+"px",display:"block"})},setImage:function(b){this.instance.attr("src",b)},setZindex:function(b){this.instance.css({"z-index":b})},show:function(){this.setZindex(this.parent.topZindex)},hide:function(){this.setZindex(this.zIndex)},
resizeOss:function(){this.left=Math.ceil(0.1*this.parent.width);this.top=0;this.height=Math.floor(this.parent.height);this.width=Math.ceil(0.8*this.parent.width);this.instance.css({display:"block",width:this.width+"px",height:this.height+"px",left:this.left+"px",top:this.top+"px"})},resize:function(){if(0!=this.imageWidth||0!=this.imageHeight)this.height=Math.floor(this.parent.height),this.width=Math.ceil(0.8*this.parent.width),this.left=Math.ceil(0.1*this.parent.width),this.top=0,this.instance.css({left:this.left,
top:this.top,width:this.width,height:this.height})}});
Class("EmbeddedSlideshow",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();c=Instance.copy(this.config.images);this.photoItem=[];if(c.Image){"string"==typeof c.Image&&this.photoItem.push(c.Image);if(c.Image instanceof Array)for(b=0;b<c.Image.length;b++)this.photoItem.push(c.Image[b].Image);c.Image instanceof Object&&this.photoItem.push(c.Image.value)}else for(b=0;b<c.length;b++)c[b].value?this.photoItem.push(c[b].value):this.photoItem.push(c[b]);c=this.photoItem.length;
for(b=0;b<c;b++)this.photoItem[b]=this.fixRelativePath(this.photoItem[b]);if(4>c)for(b=c;4>b;b++)this.photoItem[b]=this.photoItem[0];2==c&&(this.photoItem[2]=this.photoItem[0],this.photoItem[3]=this.photoItem[1]);this.showIndex=this.index=0;this.nextIndex=1;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.btnSize=18>=0.2*this.boxHeight?18:0.2*this.boxHeight;this.x=this.config.x*this.pageWidth;
this.y=this.config.y*this.pageHeight;this.alpha=0;this.nextAlpha=100;this.images=[];this.runArr=[];this.background=$("<div></div>");this.background.css({opacity:this.config.alpha,"z-index":"199",width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px",position:"absolute",overflow:"hidden"});this.setRotation(this.background,this.config.rotation);this.runBox1=$("<div class='type3'></div>");this.runBox2=$("<div class='type3'></div>");this.leftBtn=$("<img src='"+uiBaseURL+"pre_image.png' />");
this.rightBtn=$("<img src='"+uiBaseURL+"next_image.png' />");this.leftBtn.css({display:"none","z-index":"1000",cursor:"pointer",position:"absolute",width:this.btnSize+"px",height:this.btnSize+"px",left:"0",top:(this.imgHeight-this.btnSize)/2+"px"});this.rightBtn.css({display:"none","z-index":"1000",cursor:"pointer",position:"absolute",width:this.btnSize+"px",height:this.btnSize+"px",right:"0",top:(this.imgHeight-this.btnSize)/2+"px"});this.config.selectBtn&&(this.leftBtn.css({display:"block"}),this.rightBtn.css({display:"block"}));
this.addItem();this.background.append(this.leftBtn).append(this.rightBtn).append(this.runBox1).append(this.runBox2);this.parent.append(this.background);this.runBox1.append(this.images[this.showIndex]);this.runBox2.append(this.images[this.nextIndex].css({opacity:"0"}));this.runArr.push(this.runBox2);this.runArr.push(this.runBox1);this.initRunConfig();this.images[this.showIndex].css(this.tranCss(this.pos1.x,this.pos1.y));this.initCss();this.initBtnEvent()},initCss:function(){this.runBox1.css({"mask-size":this.boxWidth+
"px "+this.boxHeight+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px"});this.runBox2.css({"mask-size":this.boxWidth+"px "+this.boxHeight+"px","-webkit-mask-size":this.boxWidth+"px "+this.boxHeight+"px",position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px"})},initRunConfig:function(){switch(this.index){case 0:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:0,endY:0};this.pos2={x:0,y:this.imgHeight/
2,endX:this.imgWidth/4,endY:this.imgHeight/4};break;case 1:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:this.imgWidth/2,endY:0};this.pos2={x:this.imgWidth/2,y:0,endX:this.imgWidth/4,endY:this.imgHeight/4};break;case 2:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:0,endY:this.imgHeight/2};this.pos2={x:0,y:0,endX:this.imgWidth/4,endY:this.imgHeight/4};break;case 3:this.pos1={x:this.imgWidth/4,y:this.imgHeight/4,endX:this.imgWidth/2,endY:this.imgHeight/2},this.pos2={x:this.imgWidth/2,
y:this.imgHeight/2,endX:this.imgWidth/4,endY:this.imgHeight/4}}},initBtnEvent:function(){this.leftBtn.bind("click",function(b){b.stopPropagation();this.prevEvent()}.bind(this));this.rightBtn.bind("click",function(b){b.stopPropagation();this.nextEvent()}.bind(this))},changeConfig:function(){this.tranX1&&this.tranY1||(this.tranX1=this.pos1.x,this.tranY1=this.pos1.y);this.tranX2&&this.tranY2||(this.tranX2=this.pos2.x,this.tranY2=this.pos2.y);this.currentAlpha1||(this.currentAlpha1=1);this.currentAlpha2||
(this.currentAlpha2=0)},prevEvent:function(){if(!this.running){this.pause();this.index=0>this.index-1?3:this.index-1;this.nextIndex-=2;-1>this.nextIndex&&(this.nextIndex=this.images.length-2);0>this.nextIndex&&(this.nextIndex=this.images.length-1);this.changeConfig();var b=function(c,f){this.running=!0;var g=this.currentAlpha1*(1-c/f),h=this.tranX1+(this.pos1.endX-this.tranX1)*c/f,k=this.tranY1+(this.pos1.endY-this.tranY1)*c/f;this.runBox1.children().css({transform:"translate("+h+"px,"+k+"px)",opacity:g});
c==f&&(b.stop(),this.nextIndex=this.nextIndex+1>=this.images.length?0:this.nextIndex+1,this.runBox1.empty().append(this.images[this.nextIndex]).children().css({opacity:"1"}))}.bind(this).animation(this,800),c=function(b,f){var g=this.currentAlpha2+(1-this.currentAlpha2)*b/f,h=this.tranX2+(this.pos2.endX-this.tranX2)*b/f,k=this.tranY2+(this.pos2.endY-this.tranY2)*b/f;this.runBox2.children().css({transform:"translate("+h+"px,"+k+"px)",opacity:g});b==f&&(c.stop(),this.afterAnimate())}.bind(this).animation(this,
800)}},nextEvent:function(){if(!this.running){this.pause();this.changeConfig();var b=function(c,f){this.running=!0;var g=this.currentAlpha1*(1-c/f),h=this.tranX1+(this.pos1.endX-this.tranX1)*c/f,k=this.tranY1+(this.pos1.endY-this.tranY1)*c/f;this.runBox1.children().css({transform:"translate("+h+"px,"+k+"px)",opacity:g});c==f&&(b.stop(),this.nextIndex=this.nextIndex+1>=this.images.length?0:this.nextIndex+1,this.runBox1.empty().append(this.images[this.nextIndex]).children().css({opacity:"1"}))}.bind(this).animation(this,
800),c=function(b,f){var g=this.currentAlpha2+(1-this.currentAlpha2)*b/f,h=this.tranX2+(this.pos2.endX-this.tranX2)*b/f,k=this.tranY2+(this.pos2.endY-this.tranY2)*b/f;this.runBox2.children().css({transform:"translate("+h+"px,"+k+"px)",opacity:g});b==f&&(c.stop(),this.afterAnimate())}.bind(this).animation(this,800)}},afterAnimate:function(){this.index=3<this.index+1?0:this.index+1;this.initRunConfig();this.runBox1.children().css({opacity:"0"});this.runBox1.children().css({transform:"translate("+this.pos2.x+
"px,"+this.pos2.y+"px)"});var b=this.runBox1;this.runBox1=this.runBox2;this.runBox2=b;this.config.autoBool&&(this.runTime1=this.runfun1.animation(this,this.config.delayTime),this.runTime2=this.runfun2.animation(this,this.config.delayTime));this.running=!1},tranCss:function(b,c){return{transform:"translate("+b+"px,"+c+"px)","-webkit-transform":"translate("+b+"px,"+c+"px)","-o-transform":"translate("+b+"px,"+c+"px)","-moz-transform":"translate("+b+"px,"+c+"px)","-ms-transform":"translate("+b+"px,"+
c+"px)"}},tranAnimate:function(){this.initRunConfig();this.runBox1.children().css(this.tranCss(this.pos1.x,this.pos1.y));this.runBox2.children().css(this.tranCss(this.pos2.x,this.pos2.y));this.runTime1=this.runfun1.animation(this,this.config.delayTime);this.runTime2=this.runfun2.animation(this,this.config.delayTime)},runfun1:function(b,c){this.currentAlpha1=b<=c/2?1-2*b/c:0;this.tranX1=this.pos1.x+(this.pos1.endX-this.pos1.x)/c*b;this.tranY1=this.pos1.y+(this.pos1.endY-this.pos1.y)/c*b;this.runBox1.children().css({transform:"translate("+
this.tranX1+"px,"+this.tranY1+"px)",opacity:this.currentAlpha1});b==c&&(this.nextIndex=this.nextIndex+1>=this.images.length?0:this.nextIndex+1,this.runBox1.empty().append(this.images[this.nextIndex]).children().css({opacity:"1"}))},runfun2:function(b,c){this.currentAlpha2=b<=c/2?2*b/c:1;this.tranX2=this.pos2.x+(this.pos2.endX-this.pos2.x)/c*b;this.tranY2=this.pos2.y+(this.pos2.endY-this.pos2.y)/c*b;this.runBox2.children().css({transform:"translate("+this.tranX2+"px,"+this.tranY2+"px)",opacity:this.currentAlpha2});
b==c&&this.afterAnimate()},play:function(){this.config.autoBool&&(this.timer1&&clearTimeout(this.timer1),this.timer1=null,this.runTime1&&this.runTime1.stop(),this.runTime2&&this.runTime2.stop(),this.timer1=setTimeout(this.tranAnimate.bind(this),this.config.delayTime))},pause:function(){this.config.autoBool&&(this.timer1&&clearTimeout(this.timer1),this.timer1=null,this.runTime1&&this.runTime1.stop(),this.runTime2&&this.runTime2.stop())},parseConfig:function(b){return{width:b.location.width,height:b.location.height,
rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,autoBool:parseBool(b.autoBool),images:b.Images,delayTime:100>b.duration?1E3*b.duration:b.duration,selectBtn:parseBool(b.selectBtn)}},addItem:function(){for(var b=this,c=0;c<b.photoItem.length;c++){var d=$("<div></div>");d.css({width:b.boxWidth+"px",height:b.boxHeight+"px",position:"absolute"});var f=$("<img />");f.css("position","absolute");var g=b.photoItem[c];d.append(f);$(f).on("load",function(){var c=$(this)[0];$(this).css({left:(b.boxWidth-
c.naturalWidth)/2+"px",top:(b.boxHeight-c.naturalHeight)/2+"px",position:"absolute"})}).attr("src",g);b.images[c]=d}},resizeItem:function(){for(var b=0;b<this.photoItem.length;b++){var c=this.images[b],d=c.children(),f=d[0];void 0!=d&&null!=d&&($(d).css({left:(this.boxWidth-f.naturalWidth)/2+"px",top:(this.boxHeight-f.naturalHeight)/2+"px",position:"absolute"}),c.css({width:this.boxWidth+"px",height:this.boxHeight+"px"}));this.images[b]=c}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=
c;this.imgWidth=this.config.width*this.pageWidth;this.imgHeight=this.config.height*this.pageHeight;this.boxWidth=this.imgWidth-8;this.boxHeight=this.imgHeight-8;this.btnSize=0.2*this.imgHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.initRunConfig();this.background.css({width:this.imgWidth,height:this.imgHeight,left:this.x+"px",top:this.y+"px"});this.leftBtn.css({width:this.btnSize+"px",height:this.btnSize+"px",top:(this.imgHeight-this.btnSize)/2+"px"});this.rightBtn.css({width:this.btnSize+
"px",height:this.btnSize+"px",top:(this.imgHeight-this.btnSize)/2+"px"});this.initCss();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.background.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.background.one(b,function(){this.background.css({animation:""})}.bind(this))}},setPosition:function(){this.resizeItem()}}).extend("Item");
Class("FlashSwf",{Package:"PageItem",create:function(b,c,d,f){this.config=this.parseConfig(c);this.parent=b;this.pageWidth=d;this.pageHeight=f;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.pageWidth*this.config.x;this.top=this.pageHeight*this.config.y;this.config.src=this.config.src;this.config.hint&&(this.config.hint.hintShapeColor=Color(this.config.hint.hintShapeColor).toString(),this.config.hint.hintShapeColor2=Color(this.config.hint.hintShapeColor2).toString());
this.content=$("<div></div>");this.content.css({position:"absolute",left:this.left,top:this.top,width:this.width,height:this.height});this.setRotation(this.content,this.config.rotation);this.parent.append(this.content);isTouchDevice()||(this.config.src=this.fixRelativePath(this.config.src),this.initLinkHint(this.content),this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"}),parseBool(this.config.reflection)&&this.imageReflection(this.content))},
parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.swfURL,hint:b.hint,shadow:b.shadow}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.content.css({width:this.width+"px",
height:this.height+"px"});this.content.flash().remove();this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"});this.setPosition(this.config.x*this.pageWidth,this.config.y*this.pageHeight)},setPosition:function(b,c){this.content.css({left:b+"px",top:c+"px"})},hide:function(){this.content.html("")},show:function(){this.content.flash({swf:this.config.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"})}}).extend(PageItem.Item);
(function(b){var c=0,d={mode:"iframe",standard:"html5",popHt:500,popWd:400,popX:200,popY:200,popTitle:"",popClose:!1,extraCss:"",extraHead:"",retainAttr:["id","class","style"]},f={};b.fn.printArea=function(h){b.extend(f,d,h);c++;b("[id^=printArea_]").remove();f.id="printArea_"+c;h=b(this);var k=g.getPrintWindow();g.write(k.doc,h);setTimeout(function(){g.print(k)},1E3)};var g={print:function(c){var d=c.win;b(c.doc).ready(function(){d.focus();d.print();"popup"==f.mode&&f.popClose&&setTimeout(function(){d.close()},
2E3)})},write:function(b,c){b.open();b.write(g.docType()+"<html>"+g.getHead()+g.getBody(c)+"</html>");b.close()},docType:function(){return"iframe"==f.mode?"":"html5"==f.standard?"<!DOCTYPE html>":'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01'+("loose"==f.standard?" Transitional":"")+'//EN" "http://www.w3.org/TR/html4/'+("loose"==f.standard?"loose":"strict")+'.dtd">'},getHead:function(){var b="";f.extraHead&&f.extraHead.replace(/([^,]+)/g,function(c){b+=c});return"<head><title>"+f.popTitle+"</title>"+
b+"</head>"},getBody:function(c){var d="",l=f.retainAttr;c.each(function(){for(var c=g.getFormData(b(this)),f="",h=0;h<l.length;h++){var q=b(c).attr(l[h]);q&&(f+=(0<f.length?" ":"")+l[h]+"='"+q+"'")}d+="<div "+f+">"+b(c).html()+"</div>"});return"<body>"+d+"</body>"},getFormData:function(c){var d=c.clone(),f=b("input,select,textarea",d);b("input,select,textarea",c).each(function(c){var d=b(this).attr("type");"undefined"===b.type(d)&&(d=b(this).is("select")?"select":b(this).is("textarea")?"textarea":
"");var g=f.eq(c);"radio"==d||"checkbox"==d?g.attr("checked",b(this).is(":checked")):"text"==d?g.attr("value",b(this).val()):"select"==d?b(this).find("option").each(function(c){b(this).is(":selected")&&b("option",g).eq(c).attr("selected",!0)}):"textarea"==d&&g.text(b(this).val())});return d},getPrintWindow:function(){switch(f.mode){case "iframe":var b=new g.Iframe;return{win:b.contentWindow||b,doc:b.doc};case "popup":return b=new g.Popup,{win:b,doc:b.doc}}},Iframe:function(){var c=f.id,d;try{d=document.createElement("iframe"),
document.body.appendChild(d),b(d).attr({style:"border:0;position:absolute;width:0px;height:0px;right:0px;top:0px;",id:c,src:"#"+(new Date).getTime()}),d.doc=null,d.doc=d.contentDocument?d.contentDocument:d.contentWindow?d.contentWindow.document:d.document}catch(g){throw g+". iframes may not be supported in this browser.";}if(null==d.doc)throw"Cannot find document.";return d},Popup:function(){var b;b="location=yes,statusbar=no,directories=no,menubar=no,titlebar=no,toolbar=no,dependent=no"+(",width="+
f.popWd+",height="+f.popHt);b+=",resizable=yes,screenX="+f.popX+",screenY="+f.popY+",personalbar=no,scrollbars=yes";b=window.open("","_blank",b);b.doc=b.document;return b}}})(jQuery);
Class("PageItemPopup",{Package:"PageItem.Popup",dialog:null,left:0,top:0,width:0,height:0,containerWidth:0,containerHeight:0,create:function(b,c){this.container=b||tmpContainer;this.containerWidth=b.width();this.containerHeight=b.height();this.zIndex=c||1E3},onResize:function(b,c){this.containerWidth=b;this.containerHeight=c;this.dialog.css({left:Math.floor((b-this.width)/2)+"px",top:Math.floor((c-this.height)/2)+"px","z-index":this.zIndex})},getOssUrl:function(b,c,d,f){return b=0<b.lastIndexOf("?")?
b+("&x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},fixRelativePath:function(b){return b?"string"!==typeof b?fixURLValue(b):!0==bookConfig.isFlipPdf?b.startsWith("../")?fixURLValue(b):b.startsWith("./")?fixURLValue("."+b):b.startsWith("files")?fixURLValue("../"+b):b.isUrl()?fixURLValue(b):fixURLValue("../"+b):fixURLValue(b):b},destroy:virtual_function,show:virtual_function,hide:virtual_function});
Class("PageItemNormalPopup",{Package:"PageItem.Popup",create:function(b,c){this._super(b,c)},destroy:function(){this._super();this.dialog.remove();this.dialog=null},show:function(){this.container.append(this.dialog)},hide:function(){animateOnce(this.dialog,{"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"},400,function(){this.destroy()}.bind(this))}}).extend("PageItemPopup");
Class("PageItemModalPopup",{Package:"PageItem.Popup",modalBackground:null,create:function(b,c){this._super(b,c);this.createModalBackground()},createModalBackground:function(){this.modalBackground=$("<div name='modal_dialog_background'></div>");this.modalBackground.css({left:"0%",top:"0%",width:"100%",height:"100%",position:"absolute","background-color":"rgba(0, 0, 0, 0.5)","z-index":this.zIndex,cursor:"default"});this.initModalBackgroundEvents()},initModalBackgroundEvents:function(b){this.modalBackground.bind(_event._click,
function(){this.hide();return!1}.bind(this));this.modalBackground.bind(_event._down,function(b){b.stopPropagation();return!1}.bind(this));this.modalBackground.bind(_event._up,function(b){b.stopPropagation();return!1}.bind(this))},destroy:function(){this._super();this.dialog.remove();this.modalBackground.remove();this.modalBackground=this.dialog=null},show:function(){if(!this.timer){this.timer=!0;this.dialog.css({"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",
transform:"scale(0)"});this.container.append(this.dialog);this.container.append(this.modalBackground);var b={"-webkit-transform":"scale(1)","-o-transform":"scale(1)","-ms-transform":"scale(1)","-moz-transform":"scale(1)",transform:"scale(1)"};setTimeout(function(){animateOnce(this.dialog,b,300,function(){this.timer=!1}.bind(this))}.bind(this),100)}},hide:function(){this.timer||(this.timer=!0,animateOnce(this.dialog,{"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)",
"-moz-transform":"scale(0)",transform:"scale(0)"},300,function(){this.modalBackground.css({opacity:"0"});this.destroy();this.timer=!1}.bind(this)))}}).extend("PageItemPopup");var QAF_UNKNOWN=-1,QAF_RIGHT=0,QAF_MISTAKE=1;
Class("QuizPanelPC",{Package:"PageItem.Popup",create:function(b,c){this._super(b);this.config=c;this.parent=b;this.quiz=this.config.action.quiz;this.quiz[0]||(this.quiz=[this.quiz.topic]);this.dialog=$("<div></div>");this.closeButton=$("<div></div>");this.content=$("<div></div>");this.title=$("<div class='titleDiv'></div>");this.button=$("<div></div>");this.rightSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -14px;position:absolute;left:25px;top:85px;width:38px;height:50px'></div>");
this.mistakeSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -74px;position:absolute;right:25px;top:85px;width:38px;height:50px'></div>");this.rightNumber=$("<div style='position:absolute;left:37px;top:145px;color:#03B503;font-size:25px;font-weight:bold'>0</div>");this.mistakeNumber=$("<div style='position:absolute;right:37px;top:145px;color:red;font-size:25px;font-weight:bold'>0</div>");this.nextPage=$("<div/></div>");this.prePage=$("<div><div>");this.advanceImg=$("<div></div>");
this.progressBar=new TopicProgressBar(this.quiz.length);this.dialog.append(this.content);this.dialog.append(this.closeButton);this.parent.append(this.dialog);this.initQuiz();this.content.append(this.title).append(this.changBox).append(this.rightSmile).append(this.mistakeSmile).append(this.rightNumber).append(this.mistakeNumber).append(this.nextPage).append(this.prePage).append(this.progressBar.progressContainer);this.title.html(this.config.action.guizTxt);""==this.config.action.guizURL?this.setQuestionURL(this.topicItem[0].QuizTopicPanel.content):
(this.advance=new SetAdvance(this.config.action,this),this.content.append(this.advance.QuizTopicPanel.content),this.hideButton(),this.progressBar.progressContainer.hide(),this.advance.start.on("click",function(){this.setQuestionURL(this.topicItem[0].QuizTopicPanel.content);this.showButton();this.topicItem[this.currentIndex].QuizTopicPanel.Animate();this.prePage.hide();this.progressBar.progressContainer.show();this.advance.QuizTopicPanel.content.remove()}.bind(this)));this.setCss();this.initEvent();
this.prePage.hide()},setQuestionURL:function(b){this.content.append(b)},initEvent:function(){this.currentIndex=0;var b=this.topicItem.length;this.OnNextPageClick=function(){if(!(this.currentIndex>b))if(this.currentIndex+=1,this.progressBar.setProgress(this.currentIndex+1),this.currentIndex<b)this.setQuestionURL(this.topicItem[this.currentIndex].QuizTopicPanel.content),this.topicItem[this.currentIndex].QuizTopicPanel.Animate(),this.topicItem[this.currentIndex].resetScroll(),this.prePage.show();else{var c=
new Onclusion(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(c.QuizTopicPanel.content);this.nextPage.hide()}}.bind(this);this.nextPage.on("click",this.OnNextPageClick);this.prePage.on("click",function(){0!=this.currentIndex&&(0==this.currentIndex&&(this.currentIndex+=b),this.currentIndex=(this.currentIndex-1)%b,this.setQuestionURL(this.topicItem[this.currentIndex].QuizTopicPanel.content),this.topicItem[this.currentIndex].QuizTopicPanel.Animate(),
this.progressBar.setProgress(this.currentIndex+1),this.nextPage.show(),0==this.currentIndex&&this.prePage.hide())}.bind(this));this.closeButton.bind("click",function(b){b.stopPropagation();this.hide()}.bind(this));this.nextPage.on("mouseover",function(){this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -61px",cursor:"pointer"})}.bind(this));this.nextPage.on("mouseout",function(){this.nextPage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -257px -16px")}.bind(this));
this.prePage.on("mouseover",function(){this.prePage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -310px -62px",cursor:"pointer"})}.bind(this));this.prePage.on("mouseout",function(){this.prePage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -310px -17px")}.bind(this));$(window).resize(this.onResize.bind(this))},initQuiz:function(){this.topicItem=[];this.topicAnswer=[];for(var b=0;b<this.quiz.length;b++)"right"==this.config.action.languageLayout&&(this.quiz[b].alignCss={"text-align":"right",
direction:"rtl"}),this.topic=new SetQuestionPanel(this,this.quiz[b],b),this.topicItem.push(this.topic),this.topicAnswer[b]=null},getAnswerFlags:function(){for(var b=[],c=0;c<this.quiz.length;c++)null===this.topicAnswer[c]?b[c]=QAF_UNKNOWN:this.topicAnswer[c]==this.topicItem[c].getRightAnswer()?b[c]=QAF_RIGHT:b[c]=QAF_MISTAKE;return b},statistics:function(){for(var b=this.getAnswerFlags(),c=0,d=0,f=0;f<b.length;f++)b[f]==QAF_RIGHT&&c++,b[f]==QAF_MISTAKE&&d++;this.rightNumber[0].innerText=Number(c).toString();
this.mistakeNumber[0].innerText=Number(d).toString()},showButton:function(){this.rightSmile.show();this.mistakeSmile.show();this.rightNumber.show();this.mistakeNumber.show();this.nextPage.show();this.prePage.show()},hideButton:function(){this.rightSmile.hide();this.mistakeSmile.hide();this.rightNumber.hide();this.mistakeNumber.hide();this.nextPage.hide();this.prePage.hide()},setCss:function(){this.title.css({position:"relative",margin:"auto",width:"570px",height:"25px","margin-top":"20px","text-align":"center",
"font-size":"20px","font-family":"-webkit-pictograph"});this.closeButton.asButton();this.closeButton.css({position:"absolute","background-image":"url("+uiBaseURL+"close_form.png)",width:"32px",height:"32px","z-index":"500",cursor:"pointer",right:"30px","margin-top":"24px"});this.dialog.css({position:"absolute",width:"760px",height:"550px",margin:"auto",left:"0",top:"0",right:"0",bottom:"0","z-index":"1001"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",
margin:"auto",right:"22px",top:"210px",width:"36px",height:"36px"});this.prePage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -310px -17px",position:"absolute",margin:"auto",left:"27px",top:"210px",width:"36px",height:"36px"});this.content.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -6px -148px","max-width":"722px","max-height":"502px",width:"100%",height:"100%",margin:"auto",left:"0",top:"0",right:"0",bottom:"0"})},onResize:function(){},show:function(){this._super();
this.topicItem[this.currentIndex].resetScroll();this.modalBackground.css("display","block")},hide:function(){this.modalBackground.css("display","none");this.dialog.css({transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-ms-transform":"scale(0)","-o-transform":"scale(0)"});animateOnce(this.dialog,{},0.6);this._super.delay(this,600)}}).extend("PageItemModalPopup");
Class("QuizTopicPanel",{create:function(b){this.config=b;this.content=$("<div></div>");this.deg=10;this.setCss();this.Animate()},getQuizTopicPanel:function(){return this.content},setCss:function(){this.content.css({transform:"rotateZ(10deg) rotateX(10deg)","-weblkit-transform":"rotateZ(10deg) rotateX(10deg)","-moz-transform":"rotateZ(10deg) rotateX(10deg)","-ms-transform":"rotateZ(10deg) rotateX(10deg)","-o-transform":"rotateZ(10deg) rotateX(10deg)","transform-origin":"50% 80%","-webkit-transform-origin":"50% 80%",
"-ms-transform-origin":"50% 80%","-moz-transform-origin":"50% 80%","-o-transform-origin":"50% 80%",position:"absolute",background:"white",margin:"auto","margin-top":"40px",left:0,right:0,width:"560px",height:"360px",border:"3px solid #b8d0da","border-radius":"14px"})},Animate:function(){this.show.animation(this,300)},show:function(b,c){var d=$.easing.easeOutCubic(null,b,10,-10,c),f=$.easing.easeOutCubic(null,b,45,-45,c);this.content.css("transform","rotateX("+f+"deg) rotateY("+f+"deg) rotateZ("+d+
"deg) ")}});
Class("SetQuestionPanel",{create:function(b,c,d){this.config=c;this.index=d;this.quizPanel=b;this.questionPanel=$("<div></div>");this.question=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:0;left:15px'>Q:</span>");this.initAnswer();this.questionTitle=$("<span class='stage' style='color:#0066CC;width:475px;height:70px;overflow:hidden;font-size:16px;position:absolute;top:0;left:70px'><div class='swiper' style='width:465px;position:absolute;top:0;left:0;'>"+this.config.title.replaceAll("  ",
"&ensp;")+"</div></span>");this.initScroll();b=this.fixRelativePath(this.config.media);bookConfig.useTheAliCloudChart&&(b=this.getOssUrl(b,280,220,"lfit"));this.mediaImg=$("<img src='"+b+"' style='max-width:270px;max-height:180px;position:absolute;bottom: 0px;top:0px;margin:auto;left:50px;'/>");this.noImgAnswerPanel=$("<div></div>");this.imgAnswerPanel=$("<div></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.getQuizTopicPanel().append(this.questionPanel.append(this.question).append(this.questionTitle).append(this.mediaImg));
""==this.config.media?(this.mediaImg.remove(),this.questionPanel.append(this.noImgAnswerPanel)):this.questionPanel.append(this.imgAnswerPanel);this.setCss();this.getRightAnswer();this.addTopicAnswer()},initAnswer:function(){this.Items=[];for(var b in this.config)b.startsWith("answer")&&this.Items.push(this.config[b])},getRightAnswer:function(){for(var b=0;b<this.Items.length;b++)"true"==this.Items[b].dataRight&&(this.dataRight=this.Items[b].value);return this.dataRight},addTopicAnswer:function(){for(var b=
0;b<this.Items.length;b++){var c=new TopicAnswer(this.quizPanel,this.Items[b],this.config,this.dataRight,this.index);""==this.config.media?(0==(b+1)%2&&c.answerPanel.css("margin-left","20px"),this.noImgAnswerPanel.append(c.answerPanel)):this.imgAnswerPanel.append(c.answerPanel)}},setCss:function(){this.imgAnswerPanel.css({width:"210PX",position:"absolute",right:"0px",top:"82px","overflow-x":"hidden",height:"250px"});this.noImgAnswerPanel.css({top:"125px",position:"absolute",width:"455px",left:"95px",
"overflow-x":"hidden",height:"230px"});this.questionPanel.css({position:"absolute",width:"560px",height:"350px",margin:"auto",right:0,left:0,top:0,bottom:0});this.config.alignCss&&(this.question.html(":Q"),this.question.css({right:"15px",left:"auto"}),this.questionTitle.css({left:"auto",right:"65px",direction:"rtl","text-align":"right"}))},initScroll:function(){this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);
this.questionTitle.append(this.progress);this.initScrollCss()},resetScroll:function(){this.questionTitle.scroll({},Direction.top,"win10")},initScrollCss:function(){this.progress.css({display:"none",background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},getOssUrl:function(b,c,d,f){return b=0<b.lastIndexOf("?")?b+("&x-oss-process=image/resize,m_"+
f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},fixRelativePath:function(b){return b&&"string"===typeof b?!0==bookConfig.isFlipPdf?b.startsWith("../")?b:b.startsWith("./")?"."+b:b.isUrl()?b:"../"+b:b:b}});
Class("TopicAnswer",{create:function(b,c,d,f,g){this.index=g;this.quizPanel=b;this.config=d;this.answer=c;this.dataRight=f;this.answerPanel=$("<div></div>");this.checkBox=$("<div class='check-box'><div>");this.answerValue=$("<div>"+this.answer.value+"</div>");this.answerPanel.append(this.checkBox);this.answerPanel.append(this.answerValue);this.initEvent();this.setCss()},initEvent:function(){this.checkBox.on("click",function(){this.quizPanel.topicAnswer[this.index]=this.answer.value;this.quizPanel.statistics();
this.answerResult=new TopicAnswerResult(this.quizPanel,this.config,this.answer,this.dataRight);this.quizPanel.content.append(this.answerResult.content)}.bind(this));this.checkBox.on("mouseover",function(){this.checkBox.css({width:"26px",height:"26px",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -630px -63px"})}.bind(this));this.checkBox.on("mouseleave",function(){this.checkBox.css({width:"20px",height:"20px",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px"})}.bind(this))},
setCss:function(){this.answerValue.css({color:"#0f5177",position:"relative","margin-left":"30px","font-size":"15px",color:"#0f5177",width:"165px","font-family":"Verdana"});this.answerPanel.css({width:"200px","margin-top":"20px",position:"relative",display:"inline-block"});this.checkBox.css({position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px",top:"4px",width:"20px",height:"20px"});this.config.alignCss&&(this.answerPanel.css(this.config.alignCss),this.answerValue.css({"margin-left":"0",
"margin-right":"30px"}))}});
Class("SetAdvance",{create:function(b){this.config=b;b=this.fixRelativePath(this.config.guizURL);bookConfig.useTheAliCloudChart&&(b=this.getOssUrl(b,360,250,"lfit"));this.advanceImg=$("<img src='"+b+"'/>");this.start=$("<div></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.getQuizTopicPanel().append(this.advanceImg).append(this.start);this.QuizTopicPanel.Animate();this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -20px",position:"absolute",width:"81px",height:"30px",
right:0,left:0,bottom:"35px",margin:"auto"});this.advanceImg.css({"max-width":"360px","max-height":"250px",position:"absolute",top:"20px",right:0,left:0,margin:"auto"});this.start.on("mouseover",function(){this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -59px",cursor:"pointer"})}.bind(this));this.start.on("mouseout",function(){this.start.css("background","url("+uiBaseURL+"quiz.png) no-repeat -366px -20px")}.bind(this))},getOssUrl:function(b,c,d,f){return b=0<b.lastIndexOf("?")?
b+("&x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},fixRelativePath:function(b){return b&&"string"===typeof b?!0==bookConfig.isFlipPdf?b.startsWith("../")?b:b.startsWith("./")?"."+b:b.isUrl()?b:"../"+b:b:b}});
Class("TopicProgressBar",{create:function(b){this.quizLength=b;this.progressContainer=$("<div></div>");this.progressBar=$("<div></div>");this.progressContainer.append(this.progressBar);this.setCss();this.setProgress(1)},setCss:function(){this.progressContainer.css({position:"absolute",margin:"auto",right:"0",left:"0",bottom:"10px",width:"550px",border:"3px solid white",height:"18px","background-color":"rgb(229,233,236)","border-radius":"10px"});this.progressBar.css({background:"rgba(107,216,254,90)",
"float":"left",height:"18px","text-align":"center","line-height":"2","border-radius":"10px"})},setProgress:function(b){this.progressBar.css("width",100/(this.quizLength+1)*b+"%");this.progressBar.css("width").replace("px","")}});
Class("TopicAnswerResult",{create:function(b,c,d,f){this.quizPanel=b;this.dataRight=f;this.config=c;this.answer=d;this.content=$("<div></div>");this.nextQuestion=$("<div></div>");this.nextPage=$("<div></div>");this.nextText=$("<div>NEXT QUESTION</div>");this.answerOption=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:35px;left:35px'>A:</span>");this.answerResult=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:35px;left:82px'></span>");
this.JudgeResult=$("<span></span>");this.content.append(this.nextQuestion.append(this.nextPage).append(this.nextText)).append(this.answerOption).append(this.answerResult).append(this.JudgeResult);this.setCss();this.initEvent();this.answerResult.text(this.dataRight);"true"==this.answer.dataRight?this.JudgeResult.text(this.config.rightTxt):this.JudgeResult.text(this.config.wrongTxt)},initEvent:function(){this.nextPage.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("click",this.quizPanel.OnNextPageClick);
this.nextText.on("mouseover",function(){this.nextText.css({cursor:"pointer"})}.bind(this));this.nextPage.on("mouseover",function(){this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -61px",cursor:"pointer"})}.bind(this));this.nextPage.on("mouseout",function(){this.nextPage.css("background","url("+uiBaseURL+"quiz.png) no-repeat -257px -16px")}.bind(this))},setCss:function(){this.content.css({position:"absolute",margin:"auto","margin-top":"43px",left:0,right:0,width:"460px",
height:"280px",border:"3px solid rgb(184, 208, 218)",bottom:"50px",background:"white","border-radius":"14px"});this.nextText.css({color:"rgb(0,153,255)","font-size":"14px","font-weight":"bold",width:"85px",position:"absolute",right:"80px",bottom:"30px","font-family":"Verdana"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",bottom:"30px",right:"30px",width:"36px",height:"36px"});this.JudgeResult.css({position:"absolute",width:"460px","text-align":"center",
bottom:"140px",color:"black","font-family":"Verdana","font-size":"18px"});this.config.alignCss&&(this.content.css(this.config.alignCss),this.answerOption.css({right:"35px",left:"auto"}),this.answerResult.css({right:"82px"}))}});
Class("Onclusion",{create:function(b,c,d,f){this.quizPanel=b;this.mistakeNumber=f;this.config=c;this.rightNumber=d;this.percentageNumber=Math.floor(this.rightNumber/this.quizPanel.quiz.length*100);this.onclusionPanel=$("<div></div>");this.hint=$("<div>You haven't selected an answer,please select one</div>");this.clusion=$("<div>"+this.config.guizEndTxt+"</div>");this.Percentage=$("<div>"+getLanguage("TTActionQuiz_Ration","Your ration is")+" "+this.percentageNumber+"%</div>");this.scorePanel=$("<div></div>");
this.score=$("<div style='color: rgb(0, 152, 255);width: 315px;height: 45px;overflow-x: hidden'></div>");this.isAgain=$("<span>"+getLanguage("TTActionQuiz_PlayAgain","Do you wanna play it again?")+"</span>");this.button=$("<div></div>");this.yesButton=$("<div></div>");this.noButton=$("<div></div>");this.rightSmile=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -5px -14px;position:absolute;width:38px;height:50px'></div>");this.mistakeSmile=$("<div style='background:url("+uiBaseURL+
"quiz.png) no-repeat -5px -74px;position:absolute;width:38px;height:50px'></div>");this.byeBye=$("<div style='background:url("+uiBaseURL+"quiz.png) no-repeat -506px -66px;position:absolute;width:105px;height:20px;left:300px;top:230px'></div>");this.QuizTopicPanel=new QuizTopicPanel;this.QuizTopicPanel.content.append(this.onclusionPanel);0==this.mistakeNumber&&0==this.rightNumber?this.onclusionPanel.append(this.hint):this.onclusionPanel.append(this.clusion);this.onclusionPanel.append(this.Percentage).append(this.isAgain).append(this.scorePanel.append(this.score)).append(this.button.append(this.yesButton).append(this.noButton));
this.setCss();this.initEvent();0<=this.percentageNumber&&25>=this.percentageNumber&&this.score.text(this.config.score[3]);25<this.percentageNumber&&50>=this.percentageNumber&&this.score.text(this.config.score[2]);50<this.percentageNumber&&75>=this.percentageNumber&&this.score.text(this.config.score[1]);75<this.percentageNumber&&100>=this.percentageNumber&&(this.score.text(this.config.score[0]),100==this.percentageNumber&&this.score.css("color","#0098ff"))},initEvent:function(){this.yesButton.on("click",
function(){this.quizPanel.currentIndex=0;this.quizPanel.progressBar.setProgress(1);this.clearAllCount();this.quizPanel.statistics();this.quizPanel.setQuestionURL(this.quizPanel.topicItem[0].QuizTopicPanel.content);this.quizPanel.prePage.hide();this.quizPanel.nextPage.show()}.bind(this));this.noButton.on("click",function(){this.removeAllChild(this.quizPanel.content[0]);this.quizPanel.content.append(this.QuizTopicPanel.content);this.removeAllChild(this.QuizTopicPanel.content[0]);this.quizPanel.content.append(this.rightSmile).append(this.mistakeSmile).append(this.byeBye);
this.byeBye.animate("easeInElastic");this.rightSmile.animate({left:"210px"},400,"easeOutElastic");this.mistakeSmile.animate({right:"220px"},400,"easeOutElastic");this.quizPanel.hide()}.bind(this));this.yesButton.on("mouseover",function(){this.yesButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -59px",cursor:"pointer"})}.bind(this));this.yesButton.on("mouseout",function(){this.yesButton.css("background","url("+uiBaseURL+"quiz.png) no-repeat -71px -20px")}.bind(this));this.noButton.on("mouseover",
function(){this.noButton.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -59px",cursor:"pointer"})}.bind(this));this.noButton.on("mouseout",function(){this.noButton.css("background","url("+uiBaseURL+"quiz.png) no-repeat -161px -20px")}.bind(this))},clearAllCount:function(){for(var b=this.quizPanel.quiz.length,c=0;c<b;c++)this.quizPanel.topicAnswer[c]=null},removeAllChild:function(b){for(;b.hasChildNodes();)b.removeChild(b.firstChild)},setCss:function(){this.rightSmile.css({margin:"auto",
bottom:"0px",top:"0px",left:"45px",transform:"scale(3.5)","-webkit-transform":"scale(3.5)","-moz-transform":"scale(3.5)","-ms-transform":"scale(3.5)","-o-transform":"scale(3.5)"});this.mistakeSmile.css({margin:"auto",bottom:"0px",top:"0px",right:"50px",transform:"scale(3.5)","-webkit-transform":"scale(3.5)","-moz-transform":"scale(3.5)","-ms-transform":"scale(3.5)","-o-transform":"scale(3.5)"});this.scorePanel.css({position:"absolute",margin:"auto",right:"0px",left:"0px",top:"160px",color:"gray",
width:"300px","text-align":"center",height:"45px",overflow:"hidden","font-size":"20px"});this.Percentage.css({"font-weight":"bold","font-size":"20px",position:"absolute",margin:"auto",top:"120px",left:"0px",right:"0px",width:"200px",height:"20px"});this.clusion.css({width:"560px","font-size":"24px",color:"#045DD0","text-align":"center","margin-top":"40px"});this.isAgain.css({color:"#00a5ff","font-size":"20px","font-weight":"bold",width:"250px",position:"absolute","text-align":"center",bottom:"90px",
right:"0px",left:"0px",margin:"auto"});this.hint.css({width:"385px","font-size":"20px","font-weight":"bold",color:"#045DD0","text-align":"center","margin-left":"75px","margin-top":"35px"});this.onclusionPanel.css({position:"absolute","border-radius":"10px",background:$.browser.prefix+"linear-gradient(90deg,#f4f4f5,#FFFFFF)",margin:"auto",bottom:"0px",right:"0px",left:"0px",top:"0px"});this.yesButton.css({width:"81px",height:"30px",cursor:"pointer",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -20px"});
this.noButton.css({width:"81px",height:"30px",right:"0px",position:"absolute",cursor:"pointer",background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -20px"});this.button.css({margin:"auto",bottom:"25px",right:"0px",left:"0px",width:"204px",height:"30px",position:"absolute"});"right"==this.config.languageLayout&&(this.isAgain.css({direction:"rtl"}),this.Percentage.css({direction:"rtl"}))}});
Class("QuizPanelMobile",{Package:"PageItem.Popup",create:function(b,c){this._super(b);this.config=c;this.quiz=this.config.action.quiz;this.quiz[0]||(this.quiz=[this.quiz.topic]);this.dialog=$("<div></div>");this.content=$("<div class='container-box'></div>");this.contentMiddle=$("<div></div>");this.contentBottom=$("<div></div>");this.closeButton=$("<div></div>");this.title=$("<div>"+this.config.action.guizTxt+"</div>");this.rightNumber=$("<div>0</div>");this.mistakeNumber=$("<div>0</div>");this.questionContent=
$("<div></div>");this.initQuiz();this.setCss();this.initTransform();this.initEvent();this.setSwipe();this.progressBar=new TopicProgressBarMobile(this.quiz.length,this.currentIndex);this.dialog.append(this.contentMiddle).append(this.contentBottom).append(this.closeButton).append(this.content.append(this.title).append(this.questionContent)).append(this.progressBar.progressContainer);""==this.config.action.guizURL?this.setQuestionURL(this.topicItem[0].questionPanel):(this.advance=new SetAdvanceMobile(this.config.action,
this),this.content.append(this.advance.advanceImg).append(this.advance.start),this.progressBar.progressContainer.hide(),this.advance.start.on("click",function(){this.setQuestionURL(this.topicItem[0].questionPanel);this.progressBar.progressContainer.show();this.advance.advanceImg.remove();this.advance.start.remove()}.bind(this)))},initEvent:function(){this.currentIndex=0;var b=this.topicItem.length;this.OnNextPageClick=function(){if(!(this.currentIndex>b))if(this.currentIndex+=1,this.progressBar.setProgress(this.currentIndex+
1,b+1),this.currentIndex<b)this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel),this.topicItem[this.currentIndex].resetScroll();else{var c=new OnclusionMobile(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(c.onclusionPanel)}}.bind(this);this.closeButton.on("click",function(){this.hide()}.bind(this));$(window).resize(this.hide.bind(this))},setQuestionURL:function(b){this.questionContent.append(b)},initQuiz:function(){this.topicItem=
[];this.topicAnswer=[];for(var b=0;b<this.quiz.length;b++)"right"==this.config.action.languageLayout&&(this.quiz[b].alignCss={"text-align":"right",direction:"rtl"}),this.topic=new QuestionPanelMobile(this,this.quiz[b],b),this.topicItem.push(this.topic),this.topicAnswer[b]=null},getAnswerFlag:function(){for(var b=[],c=0;c<this.quiz.length;c++)null===this.topicAnswer?b[c]=QAF_UNKNOWN:this.topicAnswer[c]==this.topicItem[c].getRightAnswer()?b[c]=QAF_RIGHT:b[c]=QAF_MISTAKE;return b},flushCount:function(){for(var b=
this.getAnswerFlag(),c=0,d=0,f=0;f<b.length;f++)b[f]==QAF_RIGHT&&c++,b[f]==QAF_MISTAKE&&d++;this.rightNumber[0].innerText=Number(c);this.mistakeNumber[0].innerText=Number(d)},setSwipe:function(){this.currentIndex=0;var b=function(b,d){var f;f=30*windowWidth/1600;if(!(Math.abs(b)<=f)){var g=this.topicItem.length;if(b<-f){if(this.currentIndex>g)return;this.progressBar.setProgress(this.currentIndex+1,g+1);this.currentIndex+=1;this.progressBar.setProgress(this.currentIndex+1,g+1);if(this.currentIndex<
g)this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel);else{var h=new OnclusionMobile(this,this.config.action,this.rightNumber[0].innerText,this.mistakeNumber[0].innerText);this.setQuestionURL(h.onclusionPanel)}}if(b>f){if(0>this.currentIndex)return;this.currentIndex-=1;this.setQuestionURL(this.topicItem[this.currentIndex].questionPanel);this.progressBar.setProgress(this.currentIndex+1,g+1)}$.browser.mise?event.cancelBubble=!0:event.stopPropagation()}}.bind(this);this.questionContent.speed(b)},
show:function(){this._super();this.topicItem[this.currentIndex].resetScroll();animateOnce(this.dialog,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.3,function(){}.bind(this),"","ease")},hide:function(){this._super();animateOnce(this.dialog,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)",
"-ms-transform":"translate(100%,0)"},0.3,null,"","ease")},setCss:function(){this.questionContent.css({position:"absolute","margin-top":"30px",background:"white",width:windowWidth-70+"px",left:"0px",right:"0px",margin:"auto","overflow-x":"hidden",height:windowHeight-150+"px"});this.title.css({position:"relative",margin:"auto",width:windowWidth-50+"px",height:"22px","margin-top":"20px","text-align":"center","font-size":"20px","font-family":"-webkit-pictograph"});this.closeButton.css({background:"url("+
uiBaseURL+"quiz.png) no-repeat -69px -100px",width:"42px",height:"47px","z-index":"100",position:"absolute",right:"0px"});this.contentBottom.css({position:"absolute",border:"1px solid rgba(221,221,221,0.6)",top:"34px",left:"0px",right:"0px","background-color":"rgba(255,255,255,0.6)",width:windowWidth-90+"px",height:"50px",margin:"auto","border-radius":"5px"});this.contentMiddle.css({position:"absolute",border:"1px solid rgba(221,221,221,0.8)",top:"41px",left:"0px",right:"0px","background-color":"rgba(255,255,255,0.8)",
width:windowWidth-70+"px",height:"50px",margin:"auto","border-radius":"5px","z-index":"100"});this.dialog.css({position:"absolute","background-color":"#eeeeee",width:windowWidth+"px",height:windowHeight+"px","z-index":"100"});this.content.css({position:"absolute",border:"1px solid #dddddd",bottom:"50px",left:"0px",right:"0px",margin:"auto","background-color":"#FFFFFF",width:windowWidth-50+"px",height:windowHeight-100+"px","border-radius":"5px","z-index":"100"})},initTransform:function(){this.dialog.css({transform:"translate(100%,0)",
"-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"})},onResize:function(){this.setCss();this.dialog.css({position:"absolute","background-color":"#eeeeee",width:windowWidth+"px",height:windowHeight+"px","z-index":"100"})}}).extend("PageItemNormalPopup");
Class("QuestionPanelMobile",{create:function(b,c,d){this.config=c;this.index=d;this.quizPanel=b;this.questionPanel=$("<div></div>");this.questionBox=$("<div style='position:relative;height:80px;'></div>");this.question=$("<span style='color:rgb(0,153,255);font-size:18px;font-weight:bold;font-family:Verdana;'>Q:</span>");this.initAnswer();this.questionTitle=$("<span style='color:rgb(0,153,255);font-size:15px;'>"+this.config.title+"</span>");this.questionTitle=$("<span class='stage' style='color:#0066CC;width:"+
(windowWidth-99)+"px;height:70px;overflow:hidden;font-size:16px;position:absolute;top:0;left:25px'><div class='swiper' style='width:"+(windowWidth-109)+"px;position:absolute;top:0;left:0;'>"+this.config.title+"</div></span>");this.initScroll();b=this.fixRelativePath(this.config.media);bookConfig.useTheAliCloudChart&&(b=this.getOssUrl(b,windowWidth-70,220,"lfit"));this.mediaImg=$("<img src='"+b+"' style='max-width:"+(windowWidth-74)+"px;max-height:220px;margin-top:20px'/>");this.questionBox.append(this.question).append(this.questionTitle);
this.questionPanel.append(this.questionBox).append(this.mediaImg);this.getRightAnswer();this.addTopicAnswer();this.questionPanel.css({width:windowWidth-69+"px","overflow-x":"hidden",position:"absolute","background-color":"white",height:windowHeight-170+"px"});this.config.alignCss&&(this.question.html(":Q"),this.question.css({position:"absolute",right:"10px"}),this.questionTitle.css({position:"absolute",right:"35px",top:0,direction:"rtl","text-align":"right"}))},initScroll:function(){this.progress=
$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);this.questionTitle.append(this.progress);this.initScrollCss()},resetScroll:function(){this.questionTitle.scroll({},Direction.top,"win10")},initScrollCss:function(){this.progress.css({background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer",
"border-radius":"4px"})},initAnswer:function(){this.Items=[];for(var b in this.config)b.startsWith("answer")&&this.Items.push(this.config[b])},getRightAnswer:function(){for(var b=0;b<this.Items.length;b++)if("true"==this.Items[b].dataRight)var c=this.Items[b].value;return c},addTopicAnswer:function(){for(var b=0;b<this.Items.length;b++){var c=new TopicAnswerMoblie(this.quizPanel,this.Items[b],this.config,this.getRightAnswer(),this.index);this.questionPanel.append(c.answerPanel)}},getOssUrl:function(b,
c,d,f){return b=0<b.lastIndexOf("?")?b+("&x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},fixRelativePath:function(b){return b&&"string"===typeof b?!0==bookConfig.isFlipPdf?b.startsWith("../")?b:b.startsWith("./")?"."+b:b.isUrl()?b:"../"+b:b:b}});
Class("TopicAnswerResultMobile",{create:function(b,c,d,f){this.quizPanel=b;this.dataRight=f;this.config=c;this.answer=d;this.container=$("<div></div>");this.content=$("<div></div>");this.nextQuestion=$("<div></div>");this.nextPage=$("<div></div>");this.nextText=$("<div>NEXT QUESTION</div>");this.answerOption=$("<span style='color:rgb(0,153,255);font-size:30px;font-weight:bold;font-family:Verdana;position:absolute;top:35px;left:35px'>A:</span>");this.answerResult=$("<span style='color:rgb(0,153,255);font-size:20px;position:absolute;top:35px;left:82px'></span>");
this.JudgeResult=$("<span></span>");this.content.append(this.nextQuestion.append(this.nextPage).append(this.nextText)).append(this.answerOption).append(this.answerResult).append(this.JudgeResult);this.container.append(this.content);this.setCss();this.initEvent();this.answerResult.text(this.dataRight);"true"==this.answer.dataRight?this.JudgeResult.text(this.config.rightTxt):(this.JudgeResult.text(this.config.wrongTxt),this.JudgeResult.css("color","red"))},initEvent:function(){this.nextPage.on("click",
this.quizPanel.OnNextPageClick);this.nextPage.on("click",function(){this.container.remove()}.bind(this));this.nextText.on("click",this.quizPanel.OnNextPageClick);this.nextText.on("click",function(){this.container.remove()}.bind(this))},setCss:function(){this.container.css({position:"absolute",margin:"auto",top:"0",left:0,right:0,bottom:"0",width:"100%",height:"100%",background:"transparent","z-index":1});this.content.css({position:"absolute",margin:"auto","margin-top":"43px",left:0,right:0,width:windowWidth-
70+"px",height:windowHeight-200+"px",border:"1px solid #dddddd",bottom:"50px",background:"white","border-radius":"4px","z-index":100});this.nextText.css({color:"rgb(0,153,255)","font-size":"14px","font-weight":"bold",width:"85px",position:"absolute",right:"72px",bottom:"30px","font-family":"Verdana"});this.nextPage.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -257px -16px",position:"absolute",bottom:"30px",right:"30px",width:"36px",height:"36px"});this.JudgeResult.css({position:"absolute",
width:windowWidth-70+"px","text-align":"center",bottom:"140px",color:"green","font-family":"Verdana","font-size":"18px"});this.config.alignCss&&(this.content.css(this.config.alignCss),this.answerOption.css({right:"35px",left:"auto"}),this.answerResult.css({right:"82px",left:"auto"}))}});
Class("TopicAnswerMoblie",{create:function(b,c,d,f,g){this.quizPanel=b;this.config=d;this.answer=c;this.index=g;this.dataRight=f;this.answerPanel=$("<div></div>");this.checkBox=$("<div><div>");this.answerValue=$("<div>"+this.answer.value+"</div>");this.answerPanel.append(this.checkBox);this.answerPanel.append(this.answerValue);this.initEvent();this.setCss()},initEvent:function(){this.checkBox.on("click",function(){this.quizPanel.topicAnswer[this.index]=this.answer.value;this.quizPanel.flushCount();
this.answerResult=new TopicAnswerResultMobile(this.quizPanel,this.config,this.answer,this.dataRight);this.quizPanel.content.append(this.answerResult.container)}.bind(this))},setCss:function(){this.answerValue.css({color:"#0f5177",position:"relative","margin-left":"30px","font-size":"15px",color:"#0f5177",width:"165px","font-family":"Verdana"});this.answerPanel.css({"margin-top":"20px",position:"relative"});this.checkBox.css({top:"3px",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -465px -67px",
width:"20px",height:"20px"});this.config.alignCss&&(this.answerPanel.css(this.config.alignCss),this.answerValue.css({"margin-left":"0","margin-right":"30px"}))}});
Class("OnclusionMobile",{create:function(b,c,d,f){this.quizPanel=b;this.config=c;this.rightNumber=d;this.mistakeNumber=f;this.percentageNumber=Math.floor(this.rightNumber/this.quizPanel.quiz.length*100);this.onclusionPanel=$("<div></div>");this.hint=$("<div>You haven't selected an answer,please select one</div>");this.clusion=$("<div>"+this.config.guizEndTxt+"</div>");this.Percentage=$("<div>"+getLanguage("TTActionQuiz_Ration","Your ration is")+" "+this.percentageNumber+"%</div>");this.scorePanel=
$("<div></div>");this.score=$("<div style='color:#DCAB1B;width: "+(windowWidth-70)+"px;height: 45px;overflow-x: hidden'></div>");this.isAgain=$("<span>"+getLanguage("TTActionQuiz_PlayAgain","Do you wanna play it again?")+"</span>");this.button=$("<div></div>");this.yesButton=$("<div></div>");this.noButton=$("<div></div>");0==this.mistakeNumber&&0==this.rightNumber?this.onclusionPanel.append(this.hint):this.onclusionPanel.append(this.clusion);this.onclusionPanel.append(this.Percentage).append(this.isAgain).append(this.scorePanel.append(this.score)).append(this.button.append(this.yesButton).append(this.noButton));
this.setCss();this.initEvent();0<=this.percentageNumber&&25>=this.percentageNumber&&this.score.text(this.config.score[3]);25<this.percentageNumber&&50>=this.percentageNumber&&this.score.text(this.config.score[2]);50<this.percentageNumber&&75>=this.percentageNumber&&this.score.text(this.config.score[1]);75<this.percentageNumber&&100>=this.percentageNumber&&(this.score.text(this.config.score[0]),100==this.percentageNumber&&this.score.css("color","#0098ff"))},initEvent:function(){this.yesButton.on("click",
function(){this.quizPanel.currentIndex=0;this.clearFlushCount();this.quizPanel.flushCount();this.quizPanel.progressBar.setProgress(1,this.quizPanel.quiz.length+1);this.quizPanel.setQuestionURL(this.quizPanel.topicItem[0].questionPanel)}.bind(this));this.noButton.on("click",function(){this.quizPanel.hide()}.bind(this))},clearFlushCount:function(){for(var b=this.quizPanel.quiz.length,c=0;c<b;c++)this.quizPanel.topicAnswer[c]=null},setCss:function(){this.scorePanel.css({position:"absolute",margin:"auto",
right:"0px",left:"0px",top:"160px",color:"gray",width:windowWidth-70+"px","text-align":"center",height:"45px",overflow:"hidden","font-size":"15px"});this.Percentage.css({"font-weight":"bold","font-size":"15px",position:"absolute",margin:"auto",top:"120px",left:"0px",right:"0px",width:windowWidth-70+"px","text-align":"center",height:"20px"});this.clusion.css({width:windowWidth-70+"px","font-size":"17px",color:"#045DD0","text-align":"center","margin-top":"40px"});this.isAgain.css({color:"#00a5ff","font-size":"15px",
"font-weight":"bold",width:"250px",position:"absolute","text-align":"center",bottom:"90px",right:"0px",left:"0px",margin:"auto"});this.hint.css({width:"250px","font-size":"15px","font-weight":"bold",color:"#045DD0","text-align":"center","margin-top":"35px"});this.onclusionPanel.css({position:"absolute",width:windowWidth-70+"px","border-radius":"10px",background:"white",margin:"auto",bottom:"0px",right:"0px",left:"0px",top:"0px"});this.yesButton.css({width:"81px",height:"30px",position:"absolute",
background:"url("+uiBaseURL+"quiz.png) no-repeat -71px -20px"});this.noButton.css({width:"81px",height:"30px",right:"0px",position:"absolute",background:"url("+uiBaseURL+"quiz.png) no-repeat -161px -20px"});this.button.css({margin:"auto",bottom:"25px",right:"0px",left:"0px",width:"204px",height:"30px",position:"absolute"});"right"==this.config.languageLayout&&(this.isAgain.css({direction:"rtl"}),this.Percentage.css({direction:"rtl"}))}});
Class("SetAdvanceMobile",{create:function(b){this.config=b;b=this.fixRelativePath(this.config.guizURL);bookConfig.useTheAliCloudChart&&(b=this.getOssUrl(b,windowWidth-80,200,"lfit"));this.advanceImg=$("<img src='"+b+"'/>");this.start=$("<div></div>");this.start.css({background:"url("+uiBaseURL+"quiz.png) no-repeat -366px -20px",position:"absolute",width:"81px",height:"30px",right:0,left:0,bottom:"35px",margin:"auto"});this.advanceImg.css({"max-width":windowWidth-80+"px","max-height":"200px",position:"absolute",
top:0,right:0,left:0,bottom:0,margin:"auto"})},getOssUrl:function(b,c,d,f){return b=0<b.lastIndexOf("?")?b+("&x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d)):b+("?x-oss-process=image/resize,m_"+f+",w_"+parseInt(c)+",h_"+parseInt(d))},fixRelativePath:function(b){return b&&"string"===typeof b?!0==bookConfig.isFlipPdf?b.startsWith("../")?b:b.startsWith("./")?"."+b:b.isUrl()?b:"../"+b:b:b}});
Class("TopicProgressBarMobile",{create:function(b,c){this.quizLength=b;this.currentIndex=c;this.progressContainer=$("<div></div>");this.progressBar=$("<div></div>");this.progressContainer.append(this.progressBar);this.setCss();this.setProgress(1,this.quizLength+1)},setCss:function(){this.progressContainer.css({position:"absolute",margin:"auto",right:"0",left:"0",bottom:"10px",width:windowWidth-50+"px",height:"30px","background-color":"white","border-radius":"3px"});this.progressBar.css({height:"30px",
"padding-top":"4px","text-align":"center","border-radius":"10px","font-size":"20px"})},setProgress:function(b,c){if(b>c)return b-1;this.progressBar.text(b+"/"+c)}});
Class("ShowInformation",{Package:"PageItem.Popup",create:function(b,c){this._super(b);this.config=c;this.initConfig();this.initHtml();this.alignCss&&this.textTitle.css(this.alignCss);var d=(new TextFormatAnalyzer(this.config.action.bodyText)).getHTML(this.alignCss);d.addClass("swiper");d.css({position:"absolute"});this.text.html(d);this.initCss();this.initScroll()},initScroll:function(){this.text.addClass("stage");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");
this.progress.append(this.progressBar);this.text.append(this.progress);this.initScrollCss()},initScrollCss:function(){this.progress.css({background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},initConfig:function(){this.width=parseInt(this.config.action.width);this.height=parseInt(this.config.action.height);this.bgColor1=Color(this.config.action.bgColor1).toString();
this.bgColor2=Color(this.config.action.bgColor2).toString();this.buttonColor=Color(this.config.action.buttonColor).toString();this.buttonBgColor=Color(this.config.action.buttonBgColor).toString();this.fontColor=Color(this.config.action.titleColor).toString();this.bodyColor=Color(this.config.action.bodyColor).toString();this.link=this.config.action.link;this.linkLength=this.config.action.link.length;this.titleSize=this.config.action.titleSize;this.titleFont=this.config.action.titleFont;"right"==this.config.action.languageLayout&&
(this.alignCss={"text-align":"right",direction:"rtl"});var b=new TextFormatAnalyzer(this.config.action.bodyText);if(null==this.config.action.bodyFont){var c=b.getFontFamily().split(",");this.config.action.bodyFont=c[0];this.config.action.bodySize=b.getFontSize();this.config.action.bodyColor=b.getFontColor()}this.image=[this.fixRelativePath(this.config.action.imgURL)];bookConfig.useTheAliCloudChart&&(this.image[0]=this.getOssUrl(this.image[0],160,290,"lfit"))},initHtml:function(){this.contentBox=$('<div id="cbox"></div>');
this.enterContain=$("<div id=\"enterContain\" style='overflow:hidden;'></div>");this.closeButton=$('<div id="closebutton"></div>');this.textTitle=$("<div></div>");this.text=$("<div class='text'></div>");this.content=$("<div></div>");this.dialog=$('<div id="conb"></div>');this.imgBox=$("<div></div>");this.img=$("<img>");"http://"==this.link.substring(this.linkLength-7,this.linkLength)?this.button=$("<a href='javascript:void(0);' style='display:block' target='_Blank'>helfjawfjf</a>"):this.button=$("<a href = '"+
this.link+"' target='_Blank' font-family='"+this.config.action.bodyFont+"'></a>");this.contentBox.append(this.textTitle);this.content.append(this.enterContain);this.enterContain.append(this.contentBox);this.dialog.append(this.content);this.dialog.append(this.closeButton);this.textTitle.html(this.config.action.titleText.overflow(32));this.button.html(this.config.action.buttonName);this.contentBox.append(this.text);this.contentBox.append(this.button)},hasUrl:function(){var b=this.config.action.imgURL;
return"null"!=b&&"./null"!=b&&"../null"!=b},initCss:function(){this.textTitle.css({"font-family":this.titleFont,"font-size":this.titleSize+"px"});this.hasOverflow(this.config.action.titleText,32)&&this.textTitle.attr("title",this.config.action.titleText);this.hasUrl()&&this.img.attr({src:this.image[0],align:"center"});this.setPcCss();this.hasUrl()&&(this.contentBox.css({position:"absolute",right:"25px","overflow-x":"hidden",width:this.width-50+"px",height:this.height+"px"}),this.textTitle.css({"font-size":this.config.action.titleSize,
color:this.fontColor,"font-family":this.config.action.titleFont,"z-index":"2500",width:this.width-50+"px","margin-top":"10px"}),this.enterContain.css({width:this.width+"px",height:this.height+"px"}),this.text.css({width:this.width-50+"px","max-height":this.height-160+"px","z-index":"2500","margin-top":"10px",overflow:"hidden"}),this.text.find(".swiper").css({width:this.width-62+"px"}));!0==parseBool(this.config.action.imgBool)&&this.hasUrl()?(this.content.append(this.imgBox),this.imgBox.append(this.img),
this.imgBox.css({width:"100%",height:"100%",position:"absolute","z-index":"3000","max-width":"160px","max-height":"290px",margin:"auto",top:"15px",right:"30px"}),this.enterContain.css({width:this.width+"px",height:this.height+"px"}),this.contentBox.css({position:"absolute",left:"40px",top:"25px","overflow-x":"hidden",width:this.width+"px",height:this.height+"px"}),this.setText(),this.button.css({bottom:"0",left:"0"}),this.alignCss&&this.button.css({right:"0",left:"auto"})):!1==parseBool(this.config.action.imgBool)&&
this.hasUrl()&&(this.content.append(this.imgBox),this.imgBox.append(this.img),this.imgBox.css({width:"100%",height:"100%",position:"absolute","z-index":"3000","max-width":"160px","max-height":"290px",top:"15px",margin:"auto",left:"30px"}),this.enterContain.css({width:this.width+"px",height:this.height+"px"}),this.contentBox.css({position:"absolute",right:"40px",top:"25px",width:this.width-240+"px","overflow-x":"hidden",height:this.height-10+"px"}),this.button.css({bottom:"0",left:"0"}),this.alignCss&&
this.button.css({right:"0",left:"auto"}),this.setText());this.closeButton.asButton();this.closeButton.bind(_event._click,function(){this.hide()}.bind(this))},hasOverflow:function(b,c){var d=2;/[^\x00-\xff]/.test(b)&&(c=Math.floor(c/2),d=Math.floor(d/2));return b.length-c>d?!0:!1},setPcCss:function(){this.closeButton.css({width:"100%",height:"100%",position:"absolute","background-image":"url("+uiBaseURL+"close_form.png)","background-repeat":"no-repeat",cursor:"pointer","max-width":"32px","max-height":"32px",
"z-index":"3000",top:0,right:0});this.button.css({position:"absolute",color:this.buttonColor,border:"1px solid #111",padding:"1px 2px","background-color":this.buttonBgColor,"text-decoration":"none","z-index":"2500",bottom:"15px",left:"15px"});this.img.css({"max-width":"160px","max-height":"290px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.dialog.css({width:this.width+30+"px",height:this.height+30+"px",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",
right:"0","z-index":"3000"});this.enterContain.css({width:this.width+"px",height:this.height+"px"});this.content.css({width:"100%",height:"100%",position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",padding:"15px","max-width":this.width,"max-height":this.height,"z-index":"1900","background-image":$.browser.prefix+"repeating-linear-gradient("+this.config.action.bgAngle+"deg, "+this.bgColor2+", "+this.bgColor1+")"});this.text.css({position:"relative","font-size":this.config.action.bodySize+
"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,width:this.width+"px",height:this.height-140+"px",padding:"0px",outline:"medium",border:"0px","padding-right":"0","line-height":"2.0",background:"rgba(255,255,255,0)","z-index":"2500",overflow:"hidden"});this.text.find(".swiper").css({width:this.width-15+"px"});this.textTitle.css({margin:"10px 0"})},setText:function(){this.textTitle.css({"font-weight":"bold","font-size":this.config.action.titleSize,color:this.fontColor,"font-family":this.config.action.titleFont,
"z-index":"2500",width:this.width-240+"px",overflow:"hidden","text-overflow":"ellipsis"});this.text.css({"font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,width:this.width-240+"px",height:this.height-165+"px",padding:"0px",outline:"medium",border:"0px","padding-right":"0","margin-top":"20px","line-height":"2.0",background:"rgba(255,255,255,0)","z-index":"2500",overflow:"hidden"});this.text.find(".swiper").css({width:this.width-250+"px"})},
show:function(){this._super();this.hasUrl()?this.text.css({height:this.height-this.textTitle.height()-75+"px"}):this.text.css({height:this.height-this.textTitle.height()-50+"px"});this.text.scroll({},Direction.top,"win10");this.modalBackground.css({display:"block"})},hide:function(){this._super.delay(this,500);animateOnce(this.dialog,{transform:"scale(0)","-webkit-transform":"scale(0)","-moz-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)"},0.5,function(){this.modalBackground.empty();
this.modalBackground.remove()}.bind(this),"","ease")}}).extend("PageItemModalPopup");
Class("ShowInformationMobile",{Package:"PageItem.Popup",create:function(b,c){this._super(b);this.windowWidth=windowWidth;this.windowHeight=windowHeight;this.config=c;this.initConfig();this.initHtml();this.imgUrl=this.fixRelativePath(this.config.action.imgURL);this.setPhoneCss();this.closeButton.bind("click",function(){this.hide()}.bind(this));var d=this.config.action.imgURL?this.config.action.imgURL.toLowerCase().trim():"";"null"!=d&&""!=d&&"./null"!=d||this.img.remove();this.dialog.css({transform:"translate(100%,0)",
"-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"});$(window).resize(function(){this.onResize($(window).width(),$(window).height())}.bind(this))},initConfig:function(){this.bgColor1=Color(this.config.action.bgColor1).toString();this.bgColor2=Color(this.config.action.bgColor2).toString();this.buttonColor=Color(this.config.action.buttonColor).toString();this.buttonBgColor=Color(this.config.action.buttonBgColor).toString();
this.fontColor=Color(this.config.action.titleColor).toString();this.bodyColor=Color(this.config.action.bodyColor).toString();this.titleSize=this.config.action.titleSize;this.titleFont=this.config.action.titleFont;"right"==this.config.action.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});var b=new TextFormatAnalyzer(this.config.action.bodyText);if(null==this.config.action.bodyFont){var c=b.getFontFamily().split(",");this.config.action.bodyFont=c[0];this.config.action.bodySize=
b.getFontSize();this.config.action.bodyColor=b.getFontColor()}},initHtml:function(){this.link=this.config.action.link;this.linkLength=this.config.action.link.length;this.closeButton=$('<div id="closebutton"></div>');this.textTitle=$("<div></div>");this.text=$("<div></div>");this.content=$("<div></div>");this.dialog=$('<div id="conb"></div>');this.title=$("<div></div>");this.img=$("<img>");this.foot=$('<div style="width:100%;height:70px;position:relative;"></div>');"http://"==this.link.substring(this.linkLength-
7,this.linkLength)?this.button=$("<a href='javascript:void(0);' target='_Blank'></a>"):this.button=$("<a href = '"+this.link+"' target='_Blank' font-family='"+this.config.action.bodyFont+"'></a>");this.foot.append(this.button);this.textTitle.html(this.config.action.titleText);this.textTitle.text(this.textTitle.text());this.button.html(this.config.action.buttonName);this.dialog.append(this.title);this.title.append(this.closeButton);this.title.append(this.textTitle);this.dialog.append(this.content);
this.content.append(this.img);this.content.append(this.text);var b=(new TextFormatAnalyzer(this.config.action.bodyText)).getHTML(this.alignCss);this.text.html(b);this.content.append(this.foot)},setPhoneCss:function(){this.title.css({"font-family":this.titleFont,"font-size":this.titleSize+"px",position:"relative",width:"100%","background-color":"mintcream",border:"#CCCCCC 0.5px solid"});"null"!=this.config.action.imgURL&&"../null"!=this.config.action.imgURL&&(bookConfig.useTheAliCloudChart&&(this.imgUrl=
this.getOssUrl(this.imgUrl,windowWidth,200,"lfit")),this.img.attr({src:this.imgUrl,align:"center"}));this.button.css({position:"absolute",color:this.buttonColor,"padding-left":"8px","padding-right":"8px","background-color":this.buttonBgColor,"text-decoration":"none","z-index":"2500",right:"30px","border-radius":"6px",bottom:"30px"});this.img.css({position:"relative","max-width":"100%","max-height":"200px",margin:"15px auto",display:"block"});this.dialog.css({position:"absolute",width:"100%",height:"100%",
"z-index":"3000","background-image":$.browser.prefix+"repeating-linear-gradient("+this.config.action.bgAngle+"deg, "+this.bgColor2+","+this.bgColor1+")"});this.content.css({width:this.windowWidth+"px","overflow-x":"hidden",height:this.windowHeight-(this.textTitle.height()||55)+"px"});this.textTitle.css({position:"relative",padding:"0 30px",margin:"auto",color:this.fontColor,"font-family":this.config.action.titleFont,"vertical-align":"middle","line-height":"1.8",left:"0",top:"0",bottom:"0",right:"0",
"text-align":"center"});"right"==this.config.action.languageLayout&&this.textTitle.css({direction:"rtl"});this.text.css({width:this.windowWidth-30+"px","font-size":this.config.action.bodySize+"px",color:this.bodyColor,"font-family":this.config.action.bodyFont,"overflow-y":"hidden","margin-top":"15px","padding-left":"15px","line-height":"2.0","text-indent":"0"});this.closeButton.css({position:"absolute","z-index":"1",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat",
cursor:"pointer",width:"20px",height:"20px",left:"8px",bottom:"0",top:"0"})},onResize:function(b,c){this.windowWidth=b;this.windowHeight=c;this.setPhoneCss()},show:function(){this._super();this.content.css({height:this.windowHeight-this.textTitle.height()+"px"});this.content.css({height:this.windowHeight-(this.textTitle.height()||55)+"px"});(function(){animateOnce(this.dialog,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)",
"-ms-transform":"translate(0,0)"},0.3,function(){},"","ease")}).delay(this,100)},hide:function(){this._super.delay(this,300);animateOnce(this.dialog,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},0.3,function(){this.dialog.empty();this.dialog.remove()}.bind(this),"","ease")}}).extend("PageItemNormalPopup");
Class("WindowHtml",{Package:"PageItem.Popup",create:function(b,c){this._super(b);this.parent=b;this.config=c;this.frameWidth=parseInt(this.config.windowWidth);this.frameHeight=parseInt(this.config.windowHeight);var d=this.config.windowURL;if(d.endsWith(".doc")||d.endsWith(".ppt"))d=this.fixRelativePath(d);this.dialog=$("<div name='frame_border'></div>");this.title=$("<div></div>");this.config.caption&&this.title.html(this.config.caption);this.htmlFrame=$("<iframe class='flip-action' frameborder=0 src='"+
this.getUrl(d)+"' width='"+this.frameWidth+" ' height='100% frameborder='0' ></iframe>");this.closeButton=$("<img src='"+uiBaseURL+"close_form.png'/>");this.dialog.append(this.closeButton).append(this.title);this.dialog.append(this.htmlFrame);this.setCss();this.initEvent();this.onResize();this.resizeTimer=this.onResize.interval(this,500);this.visible=!0;this.show()},getUrl:function(b){if(b)return b=getRealURL(b)},destroy:function(){this._super();this.visible&&(this.visible=!1,this.htmlFrame.attr("src",
""),this.resizeTimer&&this.resizeTimer.stop())},initEvent:function(){this.modalBackground.bind(_event._down,function(b){this.hide();b.stopPropagation()}.bind(this));this.closeButton.asButton();this.closeButton.bind(_event._end,function(b){this.hide();b.stopPropagation()}.bind(this));this.dialog.bind(_event._down,function(b){b.stopPropagation();return!1}.bind(this))},setCss:function(){this.dialog.css({position:"absolute","z-index":"1001",scrolling:"no","background-color":"#F0F0F0","border-radius":"3px",
margin:"auto",width:this.frameWidth+"px",height:this.frameHeight+"px","-webkit-overflow-scrolling":"touch",overflow:"auto",left:"0",top:"0",bottom:"0",right:"0"});this.htmlFrame.css({"background-color":"#F0F0F0",position:"relative","margin-left":"5px","margin-top":"32px"});this.closeButton.css({position:"absolute","z-index":"1",width:"32px",height:"32px",cursor:"pointer",right:"5px",top:"0px"});this.title.css({position:"absolute",left:"5px",top:"5px","font-size":"16px"});"right"==this.config.languageLayout&&
(this.title.css({left:"auto",right:"5px","text-align":"right",direction:"rtl"}),this.closeButton.css({left:"5px",right:"auto"}))},onResize:function(){if(this.windowWidth!=windowWidth||this.windowHeight!=windowHeight){this.windowWidth=windowWidth;this.windowHeight=windowHeight;var b=windowWidth-10,c=windowHeight-10;isPhone()||(b=Math.min(this.frameWidth+10,b),c=Math.min(this.frameHeight+37,c));this.dialog.css({width:b+"px",height:c+"px"});c-=37;this.htmlFrame.attr("width",b-10+"px");this.htmlFrame.attr("height",
c+"px")}}}).extend("PageItemModalPopup");
Class("SwfSlide",{Package:"PageItem.Popup",create:function(b,c,d,f){this._super(b);c&&c.action&&(this.focus=!0,this.config=c,this.action=c.action,"string"==typeof this.action.swfURL&&""!=this.action.swfURL&&null!=this.action.swfURL&&void 0!=this.action.swfURL&&(this.action.swfURL=this.fixRelativePath(this.action.swfURL)),this.parent=b,this.elemConfig=c.elemConfig,this.element=this.elemConfig.element,"IMG"==this.element[0].tagName.toUpperCase()&&(this.element=this.element.panent()),this.windowWidth=
d,this.windowHeight=f,this.pageWidth=this.elemConfig.parentWidth,this.pageHeight=this.elemConfig.parentHeight,this.imgWidth=this.action.targetWidth,this.imgHeight=this.action.targetHeight,this.height=this.width=0,this.type=this.action.startType,this.initHtml(),this.imgLoad(),$(window).resize(this.onResize.bind(this)),this.initEvent())},initHtml:function(){this.dialog=$("<div style='display:none'></div>");this.box=$("<div id='box'></div>");this.close=$("<img class='closeImg'/>");this.background=$("<div class='BG'></div>");
"SWF"==this.action.targetType&&(this.img=$("<img src='"+this.action.swfURL+"' />"),this.box.append(this.img));if("Text"==this.action.targetType){var b=new TextFormatAnalyzer(this.action.targetText);this.fontSize=b.getMinFontSize();this.action.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.text=b.getHTML(this.alignCss);this.box.append(this.text)}this.dialog.append(this.box);this.dialog.append(this.close);this.parent.append(this.dialog)},onResize:function(){var b=this.elemConfig.elementParent.offset();
this.elemConfig.offsetX=b.left;this.elemConfig.offsetY=b.top;this.pageWidth=BookInfo.getBook().getPageWidth();this.pageHeight=BookInfo.getBook().getPageHeight();this.getAttribute();this.getPosition();this.initCss()},imgLoad:function(){if("SWF"==this.action.targetType)this.img.on("load",function(){this.onResize()}.bind(this));else this.onResize()},getAttribute:function(){if("Text"==this.action.targetType)this.width=120,this.height=200;else{this.width=this.elemConfig.parentWidth;this.height=this.elemConfig.parentHeight;
var b=this.img[0].naturalWidth,c=this.img[0].naturalHeight;this.imgWidth=b;this.imgHeight=c;3==this.action.windowScale?(this.width=parseInt(this.action.windowWidth),this.height=parseInt(this.action.windowHeight),this.imgWidth=parseInt(this.action.targetWidth),this.imgHeight=parseInt(this.action.targetHeight)):1==this.action.windowScale?(this.width=b>this.pageWidth?this.pageWidth/3*2:b,this.height=c>this.pageHeight?this.pageHeight/4*3:c):2==this.action.windowScale&&(3!=this.action.targetScale?(this.width=
b,this.height=c,this.imgWidth=b,this.imgHeight=c):(this.width=parseInt(this.action.targetWidth),this.height=parseInt(this.action.targetHeight),this.imgWidth=parseInt(this.action.targetWidth),this.imgHeight=parseInt(this.action.targetHeight)));1==this.action.targetScale?(b>c?(this.imgWidth=this.width,this.imgHeight=this.imgWidth/b*c):(this.imgHeight=this.height,this.imgWidth=this.imgHeight/c*b),1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=
this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight)):4==this.action.targetScale?(this.imgWidth=this.width,this.imgHeight=this.height,1==this.action.windowScale&&(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight)):5==this.action.targetScale&&(b>c?(this.imgHeight=this.height,this.imgWidth=this.imgHeight/c*b):(this.imgHeight=this.width,this.imgHeight=this.imgWidth/b*c),1==this.action.windowScale&&
(this.width=this.imgWidth>this.pageWidth?this.pageWidth/3*2:this.imgWidth,this.height=this.imgHeight>this.pageHeight?this.pageHeight/4*3:this.imgHeight))}},initCss:function(){"SWF"==this.action.targetType&&(0==this.imgWidth||0==this.imgHeight?this.dialog.css({display:"none"}):this.dialog.css({display:"block"}));"Text"==this.action.targetType&&(this.text?this.dialog.css({display:"block"}):this.dialog.css({display:"none"}));this.close.css({position:"absolute",top:"-20px",right:"-20px",width:"20px",
height:"20px","border-radius":"50%",background:"#111",cursor:"pointer",display:"none"});form_icons&&form_icons.close?this.close.attr("src","data:image/png;base64,"+form_icons.close):this.close.attr("src",uiBaseURL+"close.png");"Text"==this.action.targetType&&this.textCss();"SWF"==this.action.targetType&&this.imgCss();this.dialog.css(this.type,this.startPosition+"px").css("opacity","0");"left"==this.type||"right"==this.type?this.dialog.css({top:this.top+"px"}):this.dialog.css("left",this.left+"px");
"true"==this.action.winIsAlphaBoolean&&this.dialog.css({background:"rgba(255,255,255,0.8)",border:"none"});"BtnClick"==this.action.outType&&this.close.css({display:"block"})},textCss:function(){this.box.css({position:"relative",width:this.width+"px",height:this.height+"px",overflow:"hidden","overflow-y":"auto"});this.dialog.css({position:"absolute",width:this.width+"px",height:this.height+"px",background:"rgba(255,255,255,0.8)","z-index":"1001",border:"10px solid rgba(255,255,255,0)"});if("1"==this.action.windowScale){var b=
this.pageHeight-this.pageHeight*this.config.y-20;this.dialog.css({height:"auto","max-height":b+"px"});this.box.css({height:"auto","max-height":b+"px"})}else"2"==this.action.windowScale?(this.box.css({width:"120px",height:"auto"}),this.dialog.css({position:"absolute",height:"auto"})):"3"==this.action.windowScale&&("0"!=this.action.windowWidth&&"0"!=this.action.windowHeight||this.dialog.css({display:"none"}),this.dialog.css({width:this.action.windowWidth+"px",height:this.action.windowHeight+"px"}),
this.box.css({width:this.action.windowWidth+"px",height:this.action.windowHeight+"px"}))},imgCss:function(){this.img.css({position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px"});this.box.css({position:"absolute",width:this.width+"px",height:this.height+"px",overflow:"hidden"});this.dialog.css({position:"absolute",width:this.width+"px",height:this.height+"px",background:"rgba(255,255,255,0.8)","z-index":"1001",border:"10px solid rgba(255,255,255,0)"})},getPosition:function(){"left"==
this.type?(this.startPosition=this.elemConfig.offsetX-this.width,this.endPosition=this.elemConfig.offsetX):"right"==this.type?(this.startPosition=this.elemConfig.parentWidth-this.width+this.elemConfig.offsetX,this.endPosition=this.elemConfig.parentWidth+this.elemConfig.offsetX,this.width>this.pageWidth&&(this.startPosition=this.windowWidth-this.width-this.elemConfig.offsetX-this.pageWidth,this.endPosition=this.windowWidth-this.elemConfig.offsetX-this.pageWidth)):"bottom"==this.type?(this.startPosition=
this.windowHeight-this.elemConfig.offsetY-this.elemConfig.parentHeight-this.height,this.endPosition=this.windowHeight-this.elemConfig.offsetY-this.elemConfig.parentHeight,this.height>this.windowHeight&&(this.startPosition=-this.height+this.elemConfig.offsetY,this.endPosition=this.elemConfig.offsetY)):(this.startPosition=this.elemConfig.offsetY-this.height,this.endPosition=this.elemConfig.offsetY);this.width>this.pageWidth?this.left=(this.windowWidth-this.width)/2:(this.left=this.config.x*this.elemConfig.parentWidth+
this.elemConfig.offsetX,this.config.x*this.elemConfig.parentWidth+this.width>this.pageWidth&&(this.left=this.pageWidth-this.width-20+this.elemConfig.offsetX));this.height>this.pageHeight?this.top=(this.windowHeight-this.height)/2:(this.top=this.config.y*this.elemConfig.parentHeight+this.elemConfig.offsetY,this.config.y*this.elemConfig.parentHeight+this.height>this.pageHeight&&(this.top=this.pageHeight-this.height-20+this.elemConfig.offsetY))},initEvent:function(){isPhone()||isPad()||("Mouse Out"==
this.action.outType?this.mouseOutEvent():"BtnClick"==this.action.outType&&this.clickEvent())},clickEvent:function(){this.close.bind("click",function(){this.hide()}.bind(this))},mouseOutEvent:function(){this.dialog.bind("mouseleave mouseout",function(){this.focus=!1;(function(){this.focus||(this.hide(),function(){this.moving=!1}.delay(this,450))}).delay(this,50)}.bind(this));this.dialog.bind("mouseenter mouseover ",function(){this.focus=!0}.bind(this));this.element.bind("mouseenter mouseover ",function(){this.focus=
!0}.bind(this));this.element.bind("mouseleave mouseout",function(){this.focus=!1;(function(){this.focus||(this.hide(),function(){this.moving=!1}.delay(this,450))}).delay(this,50)}.bind(this))},animateCase:function(b,c){b&&(this.position=b,this.oldOpacity=parseFloat(this.dialog.css("opacity")),this.newOpacity=c,this.getOldPosition(),this.animate&&this.animate.stop(),this.animate=function(b,c){if(b==c)this.dialog.css({opacity:this.newOpacity}),this.setPosition(this.position);else{var g=this.start+(this.position-
this.start)/c*b;this.dialog.css({opacity:this.oldOpacity+(this.newOpacity-this.oldOpacity)/c*b});this.setPosition(g)}}.animation(this,500))},getOldPosition:function(){switch(this.type){case "left":this.start=parseFloat(this.dialog.left());break;case "right":this.start=parseFloat(this.dialog.right());break;case "top":this.start=parseFloat(this.dialog.top());break;case "bottom":this.start=parseFloat(this.dialog.bottom())}},setPosition:function(b){this.currentPosition=b;switch(this.type){case "left":this.dialog.css({left:this.currentPosition+
"px"});break;case "right":this.dialog.css({right:this.currentPosition+"px"});break;case "top":this.dialog.css({top:this.currentPosition+"px"});break;case "bottom":this.dialog.css({bottom:this.currentPosition+"px"})}},show:function(){this.dialog.css({"pointer-events":"auto"});this.animateCase(this.endPosition,1)},hide:function(){this.animateCase(this.startPosition,0);this.dialog.css({"pointer-events":"none"})}}).extend("PageItemNormalPopup");
Class("SlideShow",{Package:"PageItem.Popup",create:function(b,c,d,f){this._super(b);var g=c.photos;this.popUpImage=c.popUpImage;this.photos=$.extend([],g);this.dScale=1;this.photos.photo&&(this.photos=void 0==this.photos.photo[1]?[this.photos.photo]:this.photos.photo);if(!(this.photos instanceof Array)){if(void 0==this.photos.url&&void 0==this.photos.photo)return;this.photos.url&&(this.photos=[{url:this.photos.url,desc:""}]);this.photos.photo&&(this.photos=[this.photos.photo])}!this.popUpImage||this.photos.length||
this.photos.photo||this.photos.push({title:"",desc:"",url:c.url});this.parent=b;this.windowWidth=d;this.windowHeight=f;this.initHtml();this.initButton();this.initCss();this.initEvents();this.resizeTimer=this.onResize.interval(this,500);this.changeImage(0);this.show();this.descBox.scroll({},Direction.top,"win10")},initHtml:function(){this.imgIndex=-1;this.imgWidth=200;this.imgHeight=300;this.boxWidth=200;this.boxHeight=300;this.loadingImageHeight=this.loadingImageWidth=32;this.dialog=$("<div id='dialog'></div>");
this.insetBox=$("<div></div>");this.leftBar=$("<div></div>");this.rightBar=$("<div></div>");this.img=$("<img style='position : absolute;' />");this.textBox=$("<div></div>");this.upIcon=$("<div><div></div></div>");this.titleBox=$("<div></div>");this.descBox=$("<div class='stage'></div>");this.descSwiper=$("<div class='swiper'></div>");this.descBox.append(this.descSwiper);this.textBox.append(this.titleBox).append(this.descBox).append(this.upIcon);this.initScroll();this.closeButton=new button(this.parent,
{buttonType:1,iconURL:uiBaseURL+"closecat.png"},!0);this.loadingImage=$("<div><img src='"+uiBaseURL+"progress.gif' style='position:absolute;'/></div>");this.insetBox.append(this.loadingImage);this.dialog.append(this.insetBox);this.dialog.append(this.textBox);this.parent.append(this.leftBar);this.parent.append(this.rightBar)},initScroll:function(){this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.progress.append(this.progressBar);this.descBox.append(this.progress);
this.progress.css({background:"#eee",width:"8px",height:"100%",position:"absolute",right:"0",cursor:"pointer"});this.progressBar.css({width:"8px",background:"rgba(11,11,11,0.55)",position:"absolute",top:"0",cursor:"pointer","border-radius":"4px"})},initCss:function(){this.dialog.css({width:"100%",height:"100%",position:"absolute","z-index":"1001"});this.insetBox.css({position:"absolute",width:this.boxWidth+"px",height:this.boxHeight+"px",left:"0px",top:"0px","z-index":1,"-webkit-transform":"scale(0)",
"-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"});this.loadingImage.css({position:"absolute","z-index":-1,left:(this.boxWidth-this.loadingImageWidth)/2+"px",top:(this.boxHeight-this.loadingImageHeight)/2+"px",width:this.loadingImageWidth+"px",height:this.loadingImageHeight+"px"});this.rightBar.css({"z-index":1002,width:"100px",height:"100px",right:"0px",top:(windowHeight-100)/2+"px",opacity:"0.6",position:"absolute"});this.leftBar.css({"z-index":1003,
width:"100px",height:"100px",left:"0px",top:(windowHeight-100)/2+"px",opacity:"0.6",position:"absolute"});this.closeButton.setCSS({"z-index":1002,display:"none"});this.closeButton.iconBox.css({opacity:"0.6"});this.textBox.css({transition:"bottom 0.3s","font-size":"14px","font-family":"Calibri",padding:"15px","z-index":"2",display:"block",background:"rgba(11,11,11,0.25)",color:"#fff",position:"absolute",bottom:"0",width:windowWidth-30+"px",height:"90px"});this.titleBox.css({overflow:"hidden","font-size":"16px",
height:"20px",top:"26px",position:"absolute"});this.descBox.css({overflow:"hidden",width:windowWidth-30+"px",height:"60px",position:"absolute",top:"56px"});this.descSwiper.css({position:"absolute",width:windowWidth-40+"px"});this.upIcon.css({position:"absolute",right:"5px",top:"5px",width:"30px",height:"30px",cursor:"pointer"});this.upIcon.find("div").css({cursor:"pointer",width:"0",height:"0",position:"absolute",right:"10px",top:"10px","border-width":"8px 5px 0px","border-style":"solid","border-color":"rgb(255, 255, 255) transparent transparent"})},
initButton:function(){1>=this.photos.length||(this.leftButton=new button(this.leftBar,{buttonType:1,iconURL:uiBaseURL+"previous_down.png"}),this.rightButton=new button(this.rightBar,{buttonType:1,iconURL:uiBaseURL+"next_down.png"}),this.leftButton.setButtonPosition(0,29,["left","top"]),this.leftButton.background.css({display:"none"}),this.rightButton.setButtonPosition(0,29,["right","top"]),this.hideButtons())},afterZoomOut:function(){this.closeButton.iconBox.css({display:"block"});this.isZoom=!1},
beforeZoomIn:function(){this.closeButton.iconBox.css({display:"none"});this.isZoom=!0},initEvents:function(){this.closeButton.onMouseDown(this,this.hide);this.modalBackground.unbind();this.insetBox.bind(_event._click,function(b){b.stopPropagation()}.bind(this));this.textBox.bind(_event._click,function(b){b.stopPropagation()}.bind(this));setTimeout(function(){this.dialog.bind(_event._click,this.hide.bind(this));if(this.leftButton)this.leftButton.onMouseDown(this,this.prePage);if(this.rightButton)this.rightButton.onMouseDown(this,
this.nextPage)}.bind(this),500);this.leftButton&&this.leftButton.mouseEnterJump();this.rightButton&&this.rightButton.mouseEnterJump();this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.img,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),afterZoomOut:this.afterZoomOut.bind(this)});this.upIcon.bind(_event._click,function(){0<=this.textBox.bottom()?(this.textBox.css({bottom:"-90px"}),this.upIcon.find("div").css({top:"7px","border-width":"0px 5px 8px",
"border-color":"transparent transparent rgb(255, 255, 255)"})):(this.textBox.css({bottom:"0"}),this.upIcon.find("div").css({top:"12px","border-width":"8px 5px 0px","border-color":"rgb(255, 255, 255) transparent transparent"}))}.bind(this));this.mouseWheelEvent()},mouseWheelEvent:function(){var b;this.img.bind(_event._mousewheel,function(c){if(this.isZoom){var d;void 0!=b&&200>new Date-b?d=!1:(b=new Date,d=!0);if(!d)return!1;d=c.originalEvent;d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));c={pointers:[{pageX:c.pageX,
pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]};0>d?this.zoomDown(c):this.zoomUp(c);stopEvent(c);return!1}}.bind(this))},setCSS:function(b){if(b){void 0!=b.width&&this.img.css("width",b.width+"px");void 0!=b.height&&this.img.css("height",b.height+"px");void 0!=b.left&&this.img.css("left",b.left+"px");void 0!=b.top&&this.img.css("top",b.top+"px");void 0!=b.display&&this.img.css("display",b.display);if(b.tran||void 0!=b.scale||b.origin){var c=transformCSS(b);this.img.css(c)}this.img.registerPatamers&&
this.img.registerParamers(b)}},changeZoomImg:function(){if(this.isZoom){var b=this.img,c=this.img.offset(),d=getTransform(this.img[0]),f=b.parameters.width/b.parameters.naturalWidth,g=this.getSizeConfig(),h=g.width,g=g.height;b.parameters.naturalWidth=h;b.parameters.naturalHeight=g;b.parameters.width=h;b.parameters.height=g;this.img.parameters.scale=f;b.parameters.tran={x:d.x,y:d.y};b.parameters.left=c.left-d.x;b.parameters.top=c.top-d.y;this.afterZoomIn()}},afterZoomIn:function(){var b=this.img.offset().left,
c=this.img.offset().top,d=this.img.parameters.scale,f={tran:{x:b-this.img.parameters.left,y:c-this.img.parameters.top},scale:1,origin:{x:0,y:0}};1!=d&&this.img.css({width:Math.round(this.img.parameters.width*d)+"px",height:Math.round(this.img.parameters.height*d)+"px"});this.img.status_zoom||(f.tran={x:0,y:0},f.left=b-0,f.top=c-0);this.setCSS(f);this.img.parameters.tran=f.tran;this.img.parameters.scale=1;this.img.parameters.toScale=1;this.img.parameters.width=$(this.img).width();this.img.parameters.height=
$(this.img).height();this.img.parameters.origin={x:0,y:0};this.img.parameters.resize=!1},beforeStart:function(b){var c=this.img,d=c.parameters;this.img.offset();this.img.offset();d.origin=c.mathOrigin(c,b);d.tran=c.mathTran(c,b,d.origin);c.originObj(c,c.parameters.origin)},zoomUp:function(b){var c=this.img;c.scale=c.parameters.toScale;var d=Math.min(c.parameters.naturalWidth*c.maxScale/c.parameters.width,1.1*parseFloat(c.scale));d!=c.scale&&(b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/
2},{pageX:windowWidth/2,pageY:windowHeight/2}]}),c.parameters.origin=c.mathOrigin(c,b),c.originObj(c,c.parameters.origin),c.animateToScale(c,d,b))},zoomDown:function(b){var c=this.img;b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]});c.scale=c.parameters.toScale;c.parameters.origin=c.mathOrigin(c,b);c.originObj(c,c.parameters.origin);var d=c.parameters.naturalWidth/c.parameters.width,f=0.9*parseFloat(c.scale);f<=d&&(c.parameters.zoomOut=!0);
c.animateToScale(c,Math.max(d,f),b)},hideButtons:function(){this.photos&&1>=this.photos.length&&(this.leftBar.css("display","none"),this.rightBar.css("display","none"))},nextPage:function(){if(!(1>=this.photos.length)){var b=this.imgIndex+1;this.leftButton.background.css({display:"block"});b>=this.photos.length-1&&(b=this.photos.length-1,this.rightButton.background.css({display:"none"}));this.changeImage(b)}},prePage:function(){if(!(1>=this.photos.length)){var b=this.imgIndex-1;this.rightButton.background.css({display:"block"});
0>=b&&(b=0,this.leftButton.background.css({display:"none"}));this.changeImage(b)}},changeImage:function(b){if(void 0!=b&&(this.dScale=1,this.setTrans(this.dScale),this.imgIndex!=b)){this.imgIndex=b;var c=this.photos[b].url,c=this.fixRelativePath(c),d=this.photos[b].desc;b=this.photos[b].title;d&&"undefined"!=d||b&&"undefined"!=b?(this.textBox.css({display:"block",bottom:"0"}),this.upIcon.find("div").css({top:"12px","border-width":"8px 5px 0px","border-color":"rgb(255, 255, 255) transparent transparent"}),
b&&"undefined"!=b&&this.titleBox.html(b),d&&"undefined"!=d&&this.descSwiper.html(d)):this.textBox.css({display:"none"});this.img.on("load",function(){this.imgWidth=this.img[0].naturalWidth;this.imgHeight=this.img[0].naturalHeight;this.changeZoomImg(this.img);this.resizeImage();this.loadingImage.css("display","none");d&&this.descBox.refreshData&&this.descBox.refreshData()}.bind(this));this.img.attr("src",c)}},getSizeConfig:function(){var b=this.windowWidth-20,c=this.windowHeight-20,d=this.imgWidth,
f=this.imgHeight;d>b&&(f*=b/d,d=b);f>c&&(d*=c/f,f=c);return{width:d,height:f}},resizeImage:function(){var b=this.getSizeConfig(),c=b.width,b=b.height;this.img.css({width:c+"px",height:b+"px"});this.isZoom&&this.img.css({width:this.img.parameters.width*this.img.parameters.scale+"px",height:this.img.parameters.height*this.img.parameters.scale+"px"});this.boxWidth!=c||this.boxHeight!=b?(this.insetBox.css({width:c+8+"px",height:b+8+"px"}),this.insetBox.css({left:(windowWidth-(c+8))/2+"px",top:(windowHeight-
(b+8))/2+"px"}),this.insetBox.append(this.img),this.loadingImage.css({left:(c+8-this.loadingImageWidth)/2,top:(b+8-this.loadingImageHeight)/2})):this.insetBox.append(this.img);this.boxWidth=c;this.boxHeight=b;this.img.css({left:"4px",top:"4px"});this.closeButton.setButtonPosition((this.windowWidth-c)/2+c-25,(this.windowHeight-b)/2+5);this.closeButton.setCSS({display:"block"})},setTrans:function(b){b||(b=1);var c=(this.windowWidth-this.boxWidth*b)/2+this.boxWidth*b-25,d=(this.windowHeight-this.boxHeight*
b)/2+5;c>this.windowWidth-40&&(c=this.windowWidth-40);15>d&&(d=15);this.closeButton.setButtonPosition(c,d);this.insetBox.css({"-webkit-transform":"scale("+b+")","-o-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-moz-transform":"scale("+b+")",transform:"scale("+b+")"})},hide:function(){animateOnce(this.insetBox,{"-webkit-transform":"scale(0)","-o-transform":"scale(0)","-ms-transform":"scale(0)","-moz-transform":"scale(0)",transform:"scale(0)"},300,function(){this.closeButton.remove();this.leftBar.remove();
this.rightBar.remove();this.destroy()}.bind(this));this.dScale=1;this.resizeTimer&&this.resizeTimer.stop()},onResize:function(){!this.imgWidth||this.windowWidth==windowWidth&&this.windowHeight==windowHeight||(this.windowWidth=windowWidth,this.windowHeight=windowHeight,this.textBox.css({width:windowWidth-30+"px"}),this.resizeImage(),this.rightBar.css({top:(this.windowHeight-100)/2+"px"}),this.leftBar.css({top:(this.windowHeight-100)/2+"px"}),this.dScale=1)}}).extend("PageItemModalPopup");
Class("WindowZoomBox",{Package:"PageItem",create:function(b){this.parent=b;this.visible=!0;this.pageScale=1;this.initHtml();this.initCss();this.initEvent()},initHtml:function(){this.popZoom=$("<div class='popZoom'></div>");this.canvas=$("<canvas width='400' height='300'></canvas>");this.close=$("<img src='"+uiBaseURL+"photoGallery_close.png' />");this.popZoom.append(this.canvas).append(this.close);tmpContainer.append(this.popZoom)},initCss:function(){(isPhone()||isPad())&&this.close.css({display:"none"});
this.close.css({cursor:"pointer",position:"absolute",right:"0",top:"0","z-index":1002});this.popZoom.css({background:"rgba(0,0,0,0.5)",position:"absolute",display:"none","z-index":"1000",top:0,bottom:0,left:0,right:0});this.canvas.css({"transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","-moz-transform-origin":"0 0","-webkit-transform-origin":"0 0",border:"1px solid #bbb","box-shadow":"0 0 3px #bbb","-ms-box-shadow":"0 0 3px #bbb","-moz-box-shadow":"0 0 3px #bbb","-webkit-box-shadow":"0 0 3px #bbb",
position:"absolute","z-index":"1001","background-color":"#fff",width:"400px",height:"300px",cursor:"url("+uiBaseURL+"catalog_zoomout.png),auto"})},onResize:function(){},drawBg:function(b,c,d,f){this.config=c;this.elemHeight=d.elemHeight;this.elemWidth=d.elemWidth;this.pageW=d.pageWidth;this.pageH=d.pageHeight;this.point=f;this.ctx=this.canvas[0].getContext("2d");fillImageAfterLoaded(b,"normal",this.setImage.bind(this))},setImage:function(b,c,d,f){d=$("<img style='position:absolute;left:0;top:0;' src = '"+
b+"' />");d.on("load",function(){this.afterLoadEvent(d[0],d[0].naturalWidth,d[0].naturalHeight,f)}.bind(this))},setPageScale:function(b){this.pageScale=b||1},initEvent:function(){this.close.bind(_event._click,function(b){b.stopPropagation();this.hide()}.bind(this));this.popZoom.bind(_event._click,function(b){b.stopPropagation();this.hide()}.bind(this))},getBgSize:function(b,c){var d=this.pageW/this.pageH,f=b/c,g=0,h=0;d<f?(g=this.pageW,h=c*this.pageW/b):d>f&&(g=b*this.pageH/c,h=this.pageH);return{width:g,
height:h,wRadio:g/this.pageW,hRadio:h/this.pageH}},getShowSize:function(b,c){var d=this.getBgSize(b,c),f=parseFloat(this.config.x),g=parseFloat(this.config.y),h=parseFloat(this.config.height),k=parseFloat(this.config.width),l=h,m=k;if(1==d.wRadio){var n=0,d=0.5-d.hRadio/2;g<d&&(l-=d-g);g+h>1-d&&(l-=d-1+g+h);g=g>d&&g+h>1-d?1-l/(1-2*d):(g-d)/(1-2*d)}else n=0.5-d.wRadio/2,f+k>1-n&&(m-=n-1+k+f),f<n&&(m-=n-f),f=f>n&&f+k>1-n?1-m/(1-2*n):(f-n)/(1-2*n);return{x:f,y:g}},afterLoadEvent:function(b,c,d,f){var g=
this.getBgSize(c,d),h=this.getShowSize(c,d);this.width=Math.ceil(c*this.config.width);this.height=Math.ceil(d*this.config.height);this.drawWidth=Math.ceil(c*this.config.width);this.drawHeight=Math.ceil(d*this.config.height);var k=c*this.config.x,l=d*this.config.y,m=c/d,n=this.pageW/this.pageH,p=this.elemWidth/this.elemHeight;this.ctx.beginPath();this.getScale();var q=this.elemWidth/this.width;this.pageScale&&(q*=this.pageScale);PageInfo.pageIsStrech(f)||(k=c*h.x,l=d*h.y,1==g.wRadio?this.drawHeight=
this.width/p:this.drawWidth=this.height*p);0.01<=n-m?this.width=this.height*p:-0.01>=n-m&&(this.height=this.width/p);this.canvas.css({width:this.width+"px",height:this.height+"px"});this.canvas[0].width=this.width;this.canvas[0].height=this.height;this.canvas.css(this.getAnimatCss(this.point.left,this.point.top,q));this.ctx.drawImage(b,k,l,this.drawWidth,this.drawHeight,0,0,this.width,this.height);this.ctx.closePath();this.show()},getPos:function(){var b=0,c=0,d=this.getScale();windowWidth>this.width*
d&&(b=(windowWidth-this.width*d)/2);windowHeight>this.height*d&&(c=(windowHeight-this.height*d)/2);return{x:b,y:c}},getScale:function(){var b=(this.width+2)/(this.height+2),c=windowWidth/windowHeight,d=1;b>c&&this.width+2>windowWidth&&(d=windowWidth/(this.width+2));b<c&&this.height+2>windowHeight&&(d=windowHeight/(this.height+2));return d},getAnimatCss:function(b,c,d){return{transform:"translate("+b+"px,"+c+"px) scale("+d+")","-webkit-transform":"translate("+b+"px,"+c+"px) scale("+d+")","-o-transform":"translate("+
b+"px,"+c+"px) scale("+d+")","-moz-transform":"translate("+b+"px,"+c+"px) scale("+d+")","-ms-transform":"translate("+b+"px,"+c+"px) scale("+d+")"}},show:function(){if(!this.timer){this.visible=!1;this.popZoom.css({display:"block"});var b=this.getPos(),c=this.getAnimatCss(b.x,b.y,this.getScale());setTimeout(function(){this.timer=!0;animateOnce(this.canvas,c,0.2,function(){this.timer=!1}.bind(this))}.bind(this),100)}},hide:function(){if(!this.timer){this.visible=this.timer=!0;var b=this.getAnimatCss(this.point.left,
this.point.top,this.pageScale*this.elemWidth/this.width);animateOnce(this.canvas,b,0.2,function(){this.timer=!1;this.popZoom.css({display:"none"})}.bind(this))}}});
Class("WindowZoom",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f,g);this.parent=b;this.pageWidth=d;this.pageHeight=f;this.id=g;this.initConfig();this.initHtml();this.initCss();this.initEvent()},initHtml:function(){this.zoomDiv=$("<div class='zoomDiv flip-action'></div>");this.parent.append(this.zoomDiv)},initConfig:function(){this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight},
parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha||1,overAlpha:b.overAlpha||1,borderColor:b.borderColor,overColor:b.overColor,borderWidth:b.barderWidth}},initEvent:function(){this.zoomDiv.bind("click",function(){global.popZoomBox.visible?(global.popZoomBox.drawBg(this.id,this.config,{elemWidth:this.width,elemHeight:this.height,pageWidth:this.pageWidth,pageHeight:this.pageHeight},this.zoomDiv.offset()),
global.popZoomBox.setPageScale(getTransformScale(this.parent[0])*BookInfo.scale())):global.popZoomBox.hide()}.bind(this));this.zoomDiv.bind("mouseenter",function(){this.zoomDiv.css({"background-color":Color(this.config.overColor).rgba(this.config.overAlpha)})}.bind(this));this.zoomDiv.bind("mouseleave",function(){this.zoomDiv.css({"background-color":"transparent"})}.bind(this))},setPageBgImage:function(b,c,d){this.bgImageWidth=b;this.bgImageHeight=c;this.pageIsStrech=d},initCss:function(){this.zoomDiv.css({"z-index":"100",
"background-color":"transparent",opacity:this.config.alpha,position:"absolute",width:this.width+"px",height:this.height+"px",left:this.x+"px",top:this.y+"px",cursor:"url("+uiBaseURL+"catalog_zoomin.png),auto"})},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.initConfig();this.setPosition(this.x,this.y);this.zoomDiv.css({width:this.width+"px",height:this.height+"px"})},setPosition:function(b,c){this.zoomDiv.css({left:b+"px",top:c+"px"})}}).extend("Item");
Class("PhoneVideoBox",{create:function(b){this.visible=!1;this.background=$("<div class='phoneVideoBox' style='width:100%;height:100%;z-index:101;position:absolute;top:0;'></div>");this.videoBac=$("<div style='width:100%;height:100%;background-color:rgba(0,0,0,0.8);'></div>");this.closeButton=$("<img style='width:18px;height:18px;position:absolute;cursor:pointer;right:10px;top:10px;' src='"+uiBaseURL+"close.png'/>");this.background.append(this.closeButton);this.background.append(this.videoBac);b.append(this.background);
this.background.css({display:"none"});this.initEvent()},initEvent:function(){this.background.bind(_event._click,function(b){b.stopPropagation();this.hide()}.bind(this));this.closeButton.bind("mouseenter",function(){this.closeButton.css({opacity:"0.7"})}.bind(this));this.closeButton.bind("mouseleave",function(){this.closeButton.css({opacity:"1"})}.bind(this))},setCurrentVideo:function(b){b&&(this.video=b,this.background.append(b))},onResize:function(b,c){this.videoFrame&&this.visible&&this.videoFrame.pauseBackgroundSound()},
hide:function(){this.visible=!1;this.timer||(this.videoFrame.pause(),this.timer=setTimeout(function(){this.background.css({display:"none"});this.background.find("video").remove();clearTimeout(this.timer);this.timer=null}.bind(this),200))},popup:function(b,c){!this.timer&&c&&(this.timer=!0,this.videoFrame=b,this.visible=!0,this.setCurrentVideo(c),setTimeout(function(){this.timer=!1;this.background.css({display:"block"})}.bind(this),200))}});
Class("PhoneVideo",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.playCount=0;this.videoWidth=Math.min(574,windowWidth-4);this.videoHeight=Math.min(460,windowHeight-4);this.videoLeft=(windowWidth-this.videoWidth-4)/2;this.videoTop=(windowHeight-this.videoHeight-4)/2;this.config.imgURL=this.fixRelativePath(this.config.imgURL);
bookConfig.useTheAliCloudChart&&this.config.imgURL&&(this.config.imgURL=this.getOssUrl(this.config.imgURL,this.width,this.height,"fixed"));this.config.videoURL=this.fixRelativePath(this.config.videoURL);this.videoImage=$("<div class='flip-action' style='position: absolute;cursor:pointer;opacity:"+this.config.alpha+"; left:"+this.left+"px; top:"+this.top+"px; width:"+this.width+"px;height:"+this.height+"px;'></div>");this.videoFrame=new Media($("<video src='"+this.config.videoURL+"' webkit-playsinline='true' playsinline='true' controls></video>"),
"video");this.videoFrame.setCss({position:"absolute",background:"#000",width:this.videoWidth+"px",height:this.videoHeight+"px",left:this.videoLeft+"px",top:this.videoTop+"px","object-fit":"contain","z-index":1E3});this.config.imgURL?(this.imageDiv=$("<img src='"+this.config.imgURL+"' style='position: absolute;width:100%;height:100%;border:1px solid #bbb;'/>"),this.videoImage.append(this.imageDiv)):this.videoImage.css({"background-color":"rgba(255,255,255,1)",border:"2px solid #bbb"});this.playImg=
$("<img src='"+uiBaseURL+"play.png' style='position:absolute;margin:auto;left:0px;top:0px;bottom:0px;right:0px;width:56px;height:56px'/>");this.videoImage.append(this.playImg);this.setRotation(this.videoImage,this.config.rotation);b.append(this.videoImage);this.initEvent()},parseConfig:function(b){var c={width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,
reflectionAlpha:b.location.reflectionAlpha,previewSrc:b.previewURL,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt,replayWhenPlayEventTrigger:b.replayWhenPlayEventTrigger,animation:b.animation};b.H5PlaybackNumber&&(c.H5PlaybackNumber=parseInt(b.H5PlaybackNumber));b.H5Replay&&(c.H5Replay=parseBool(b.H5Replay));b.componentData?(c.videoURL=b.componentData.videoURL,c.imgURL=b.componentData.imgURL||b.componentData.previewURL,c.pageViewed=parseBool(b.componentData.pageViewed)):
(c.videoURL=b.url||b.videoURL||"",c.imgURL=b.previewURL||b.previewUrl||"",c.pageViewed="EVT_PageViewed"==b.moviePlayTriggerEvt?!0:!1);return c},initEvent:function(){this.videoFrame.$media.bind("touchstart touchend",function(b){b.stopPropagation()}.bind(this));this.videoImage.bind(_event._down,function(b){b.stopPropagation()}.bind(this));this.videoImage.bind(_event._end,function(b){b.stopPropagation();this.showOrHide()}.bind(this));0>this.config.H5PlaybackNumber&&this.videoFrame.$media.attr("loop",
"loop");0<this.config.H5PlaybackNumber&&this.videoFrame.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.play()}.bind(this));this.videoFrame.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*
this.pageWidth;this.top=this.config.y*this.pageHeight;this.videoWidth=Math.min(480,windowWidth)-4;this.videoHeight=9*this.videoWidth/16;this.videoHeight=Math.min(this.videoHeight,windowHeight);this.videoLeft=(windowWidth-this.videoWidth)/2-2;this.videoTop=(windowHeight-this.videoHeight)/2-2;this.videoFrame.setCss({width:this.videoWidth+"px",height:this.videoHeight+"px",top:this.videoTop+"px",left:this.videoLeft+"px"});this.videoImage.css({width:this.pageWidth*this.config.width+"px",height:this.pageHeight*
this.config.height+"px"});this.setPosition(this.left,this.top)},setPosition:function(b,c){this.videoImage.css({top:c+"px",left:b+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd();this.videoImage.css({animation:"flip 1s ease 0s 1 normal"});this.videoImage.one(b,function(){this.videoImage.css({animation:""})}.bind(this))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},
showOrHide:function(){!1==global.phoneVideoBox.visible?this.popup():this.hideVideo()},setCurrentTime:function(b){this.videoFrame.setCurrentTime(b)},hideVideo:function(){this.videoFrame.$media.unbind(_event._click);global.phoneVideoBox.hide()},popup:function(){global.phoneVideoBox.popup(this.videoFrame,this.videoFrame.$media);this.videoFrame.$media.bind(_event._click,function(b){b.stopPropagation()}.bind(this));this.playVideo()},playVideo:function(){this.videoFrame.play()},pauseVideo:function(){this.videoFrame.pause()},
stopVideo:function(){this.pauseVideo()}}).extend("Item");
Class("HotSpots",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.opacity=this.config.alpha;this.config.hotSpotsURL=this.fixRelativePath(this.config.hotSpotsURL);this.container=$("<div></div>");this.parent.append(this.container);this.setCss();this.initEvent();this.initLinkHint(this.container);
this.createHotspot();this.onResize(d,f)},setCss:function(){this.container.css({position:"absolute",opacity:this.opacity,"z-index":101,cursor:"hand"});this.setRotation(this.container,this.config.rotation)},createHotspot:function(){this.isSuportCanvas()?this.hotspot=new this.CanvasHotspotsContent(this.container,this.config.hotSpotsURL):this.hotspot=$.browser.device==$.browser.DEVICE_PC?new this.FlashHotspotsContent(this.container,this.config.hotSpotsURL):new this.HTMLHotspotsContent(this.container,
this.config.hotSpotsURL)},isSuportCanvas:function(){var b=this.getClass();if(void 0==b.suportCanvasFlag){var c=$("<canvas></canvas>");b.suportCanvasFlag=c[0]&&c[0].getContext?!0:!1}return b.suportCanvasFlag},parseConfig:function(b){return{width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,hint:b.hint,alpha:b.alpha,hotSpotsURL:b.hotSpotsURL,hintColor:b.hint.hintShapeColor2,hintShapeAlpha:b.hint.hintShapeAlpha,hintShapeType:b.hint.hintShapeType,
text:b.hint.text,action:b.action,animation:b.animation}},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.container.css({width:this.width+"px",height:this.height+"px"});this.setPosition();this.hotspot.onResize();this.resizeHint()},setPosition:function(){this.container.css({left:this.left+"px",top:this.top+"px"})},initEvent:function(){this.addActionEvent(this.container);
this.container.bind(_event._down,function(b){b.stopPropagation();bookConfig.googleAnalyticsID&&ga("send","event","hotspot","click","Page"+BookInfo.getCurrentPages()[0])}.bind(this))},play:function(){this.hotspot&&this.hotspot.start()},pause:function(){this.hotspot&&this.hotspot.stop()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+
" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},destroy:function(){this.hotspot.destroy()}}).extend(PageItem.Item);Class("HotspotsContent",{Package:"PageItem",create:function(b,c){this.container=b;this.src=c;this.init()},init:virtual_function,onResize:virtual_function,start:virtual_function,stop:virtual_function,destroy:virtual_function});
Class("HTMLHotspotsContent",{Package:"PageItem",init:function(){this.frameIndex=1;this.frameCount=60;this.center=$("<div></div>");this.ring=$("<div></div>");this.container.append(this.center);this.container.append(this.ring);this.initStyle(this.center);this.initStyle(this.ring);this.onResize()},initStyle:function(b){b.css({position:"absolute",cursor:"hand","pointer-events":"none",left:"0",top:"0",bottom:"0",right:"0",margin:"auto"})},onResize:function(){this.width=this.container.width();this.height=
this.container.height();this.spotWidth=Math.min(this.width,this.height);this.center.css({"background-color":"red",width:this.spotWidth/3+"px",height:this.spotWidth/3+"px","border-radius":this.spotWidth/6+"px"});this.borderWidth=this.spotWidth/20;this.ring.css({border:this.borderWidth+"px solid red",opacity:1});this.draw()},draw:function(){var b=this.spotWidth/3,b=b+this.frameIndex/this.frameCount*(this.spotWidth-b-this.borderWidth);this.ring.css({width:b+"px",height:b+"px","border-radius":(b+this.borderWidth)/
2+"px",opacity:(this.frameCount-this.frameIndex)/this.frameCount})},start:function(){this.stop();this.timer=this.animate()},stop:function(){this.timer&&this.timer.stop()},animate:function(){return function(b,c){this.frameIndex=b;this.frameCount=c;this.draw();this.frameIndex==this.frameCount&&(this.timer=this.animate())}.animation(this,1E3)},destroy:function(){this.stop();this.center.remove();this.ring.remove()}}).extend("HotspotsContent");
Class("FlashHotspotsContent",{Package:"PageItem",init:function(){},onResize:function(){this.width=this.container.width();this.height=this.container.height();this.container.flash().remove();this.container.flash({swf:this.src,width:this.width+"px",height:this.height+"px",wmode:"transparent"})},draw:function(){},start:function(){},stop:function(){},animate:function(){},destroy:function(){this.container.flash().remove()}}).extend("HotspotsContent");
Class("CanvasHotspotsContent",{Package:"PageItem",init:function(){this.frameIndex=1;this.frameCount=60;this.canvas=$("<canvas></canvas>");this.container.append(this.canvas);this.initStyle(this.canvas);this.createDrawer();this.onResize()},initStyle:function(b){b.css({position:"absolute",cursor:"hand","pointer-events":"none",left:"0",top:"0",bottom:"0",right:"0",margin:"auto"})},isSWF:function(b){b=b.toLowerCase();var c=this.src.lastIndexOf("/");-1==c&&(c=this.src.lastIndexOf("\\"));var d=this.src.lastIndexOf(".");
return(c=this.src.substring(c+1,d))?(c=c.toLowerCase(),c==b):!1},createDrawer:function(){var b=this.canvas[0].getContext("2d");this.drawer=null;this.isSWF("Black Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(b,"black"));this.isSWF("Black Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(b,"black"));this.isSWF("Black Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(b,"black","#00F1FF"));this.isSWF("Black Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(b,
"black"));this.isSWF("Black Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(b,"black"));this.isSWF("Black Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(b,"black"));this.isSWF("Black Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(b,"black"));this.isSWF("Black Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(b,"black"));this.isSWF("BlackTwo Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(b,"black"));this.isSWF("Blue Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(b,
"#0033FF"));this.isSWF("Blue Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(b,"#0033FF"));this.isSWF("Blue Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(b,"#0033FF","#00F1FF"));this.isSWF("Blue Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(b,"#05338E","#0561BC"));this.isSWF("Blue Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(b,"#0033FF"));this.isSWF("Blue Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(b,"#0033FF"));this.isSWF("Blue Ripple")&&
(this.drawer=new this.RingHotSpotsDrawer(b,"#0033FF"));this.isSWF("Blue Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(b,"#0044EE"));this.isSWF("Blue Star")&&(this.drawer=new this.RectsHotSpotsDrawer(b,"#3364C5"));this.isSWF("Blue Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(b,"#0033FF"));this.isSWF("Blue_doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(b,"#3B89FF"));this.isSWF("Default Animation")&&(this.drawer=new this.RectsHotSpotsDrawer(b,"#3364C5"));this.isSWF("Green Arrow Circle Hand")&&
(this.drawer=new this.RotateHandHotSpotsDrawer(b,"#009900"));this.isSWF("Green Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(b,"#009900"));this.isSWF("Green Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(b,"#039303","#03F503"));this.isSWF("Green Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(b,"#009900"));this.isSWF("Green Glow")&&(this.drawer=new this.RoundHotSpotsDrawer(b,"green"));this.isSWF("Green Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(b,
"#009900"));this.isSWF("Green Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(b,"#009900"));this.isSWF("Green Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(b,"#009900"));this.isSWF("Green Star")&&(this.drawer=new this.RectsHotSpotsDrawer(b,"#669900"));this.isSWF("Green Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(b,"#009900"));this.isSWF("Green Doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(b,"#00DAB7"));this.isSWF("Orange Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(b,
"#CA7000","#F98C00"));this.isSWF("Red Arrow Circle Hand")&&(this.drawer=new this.RotateHandHotSpotsDrawer(b,"red"));this.isSWF("Red Arrow Circle")&&(this.drawer=new this.RotateRingHotSpotsDrawer(b,"red"));this.isSWF("Red Circle Blinker")&&(this.drawer=new this.BlinkerHotSpotsDrawer(b,"red","yellow","#CA7000"));this.isSWF("Red Circle")&&(this.drawer=new this.ShrinkHotSpotsDrawer(b,"red"));this.isSWF("Red Doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(b,"#E58585"));this.isSWF("Red Glow")&&
(this.drawer=new this.RoundHotSpotsDrawer(b,"red","#FBBC00"));this.isSWF("Red Ripple with Pointer")&&(this.drawer=new this.MouseHotSpotsDrawer(b,"red"));this.isSWF("Red Ripple")&&(this.drawer=new this.RingHotSpotsDrawer(b,"red"));this.isSWF("Red Star in Circle")&&(this.drawer=new this.StarHotSpotsDrawer(b,"red"));this.isSWF("Red Star")&&(this.drawer=new this.RectsHotSpotsDrawer(b,"red"));this.isSWF("Red Two Ripples")&&(this.drawer=new this.RipplesHotSpotsDrawer(b,"red"));this.isSWF("Yellow Squre")&&
(this.drawer=new this.SquareHotSpotsDrawer(b,"red","#FBBC00"));this.isSWF("Yellow Start Blink")&&(this.drawer=new this.SquareStarHotSpotsDrawer(b,"#FBBC00","#FF9900","#DAE405"));this.isSWF("yellow_doughnut")&&(this.drawer=new this.DoughnutHotSpotsDrawer(b,"#FFD56B"));this.drawer||(this.drawer=new this.RingHotSpotsDrawer(b,"red"))},onResize:function(){this.width=0.85*this.container.width();this.height=0.85*this.container.height();this.canvas.attr("width",this.width);this.canvas.attr("height",this.height);
this.drawer&&(this.drawer.resize(this.width,this.height),this.draw())},draw:function(){this.drawer&&this.drawer.draw(this.frameIndex,this.frameCount)},start:function(){this.stop();this.timer=this.animate()},animate:function(){return function(b,c){this.frameIndex=b;this.frameCount=c;this.draw();this.frameIndex==this.frameCount&&(this.timer=this.animate())}.animation(this,1E3)},stop:function(){this.timer&&this.timer.stop()},destroy:function(){this.stop();this.canvas.remove()}}).extend("HotspotsContent");
Class("HotSpotsDrawer",{Package:"PageItem",create:function(b,c){this.context=b;this.color=Color(c)},resize:function(b,c){this.width=b;this.height=c},rectInCenter:function(b,c){void 0==c&&(c=b);return{left:(this.width-b)/2,top:(this.height-c)/2,width:b,height:c}},draw:virtual_function,clear:function(){this.context.clearRect(0,0,this.width,this.height)},drawStar:function(b,c,d,f){var g=this.context;if(b){c||(c="#FFFF00");d||(d={width:0,color:"#FFFFFF"});void 0==f&&(f=0);var h=Math.min(b.width,b.height)/
2,k=0.4*h,l=b.left;b=b.top;g.save();g.translate(l+h,b+h);g.rotate(f*Math.PI/180);g.beginPath();g.moveTo(Math.cos(0.1*Math.PI)*h,-Math.sin(0.1*Math.PI)*h);for(f=0;5>f;f++)g.lineTo(Math.cos((18+72*f)/180*Math.PI)*h,-Math.sin((18+72*f)/180*Math.PI)*h),g.lineTo(Math.cos((54+72*f)/180*Math.PI)*k,-Math.sin((54+72*f)/180*Math.PI)*k);g.closePath();g.fillStyle=c;g.fill();g.lineWidth=d.width;g.strokeStyle=d.color;0<d.width&&g.stroke();g.restore()}},drawTriangle:function(b,c,d){var f=this.context;b&&(c||(c=
"#000000"),d||(d={width:0,color:"#FFFFFF"}),f.save(),f.translate(b.left,b.top),f.beginPath(),f.moveTo(b.width/2,0),f.lineTo(0,b.height),f.lineTo(b.width,b.height),f.closePath(),f.fillStyle=c,f.fill(),f.lineWidth=d.width,f.strokeStyle=d.color,0<d.width&&f.stroke(),f.restore())},drawArrow:function(b,c,d,f){var g=this.context;b&&(c||(c="#000000"),d||(d={width:0,color:"#FFFFFF"}),f=f?parseFloat(f):0.2,g.save(),g.translate(b.left,b.top),g.beginPath(),g.moveTo(b.width/2,0),g.lineTo(0,b.height),g.lineTo(b.width/
2,b.height*(1-f)),g.lineTo(b.width,b.height),g.closePath(),g.fillStyle=c,g.fill(),g.lineWidth=d.width,g.strokeStyle=d.color,0<d.width&&g.stroke(),g.restore())},drawMouse:function(b,c,d){var f=this.context;if(b){c||(c="#FFFFBB");d||(d={width:1,color:"#000000"});var g=0.6*b.height,h=b.width/2;f.save();f.translate(b.left+h,b.top);f.rotate(-15*Math.PI/180);f.shadowBlur=Math.ceil(0.2*b.width);f.shadowColor="rgba(0, 0, 0, 0.3)";f.shadowOffsetX=Math.ceil(0.1*b.width);f.shadowOffsetY=Math.ceil(0.1*b.width);
f.beginPath();f.moveTo(b.width/2-h,0);f.lineTo(-h,g);f.lineTo(0.38*b.width-h,0.9*g);f.lineTo(0.38*b.width-h,b.height);f.lineTo(0.62*b.width-h,b.height);f.lineTo(0.62*b.width-h,0.9*g);f.lineTo(b.width-h,g);f.closePath();f.fillStyle=c;f.fill();f.lineWidth=d.width;f.strokeStyle=d.color;0<d.width&&f.stroke();f.restore()}},drawRound:function(b,c,d){var f=this.context;if(b){c||(c="#000000");d||(d={width:0,color:"#FFFFFF"});var g=Math.min(b.width,b.height)/2,h=b.left;b=b.top;f.save();f.beginPath();0>=g&&
(g=1);f.arc(h+g,b+g,g,0,2*Math.PI,!0);f.closePath();f.fillStyle=c.toString();f.fill();f.lineWidth=d.width;f.strokeStyle=d.color;0<d.width&&f.stroke();f.restore()}},drawRing:function(b,c){var d=c.width/2;this.drawRound({left:b.left+d,top:b.top+d,width:b.width-c.width,height:b.height-c.width},"transparent",c)},drawRect:function(b,c,d,f){var g=this.context;if(b){c||(c="#000000");d||(d={width:0,color:"#FFFFFF"});f||(f=0);var h=b.width/2,k=b.height/2,l=b.left+h,m=b.top+k;g.save();g.translate(l,m);g.rotate(f*
Math.PI/180);g.beginPath();g.rect(-h,-k,b.width,b.height);g.closePath();g.fillStyle=c;g.fill();g.lineWidth=d.width;g.strokeStyle=d.color;0<d.width&&g.stroke();g.restore()}},drawRoundRect:function(b,c,d,f,g){var h=this.context;if(b){d||(d="#000000");f||(f={width:0,color:"#FFFFFF"});g||(g=0);var k=b.width/2,l=b.height/2,m=b.left+k,n=b.top+l;h.save();h.translate(m,n);h.rotate(g*Math.PI/180);b=Math.min(b.width,b.height)/2;c=Math.min(c,b);h.beginPath();h.moveTo(-k+c,-l);h.arcTo(k,-l,k,l,c);h.arcTo(k,l,
-k,l,c);h.arcTo(-k,l,-k,-l,c);h.arcTo(-k,-l,k,-l,c);h.closePath();h.fillStyle=d;h.fill();h.lineWidth=f.width;h.strokeStyle=f.color;0<f.width&&h.stroke();h.restore()}},drawSquareStar:function(b,c,d){var f=this.context;if(b){c||(c="#000000");d||(d=0);var g=b.left+b.width/2,h=b.top+b.height/2,k=b.width,l=b.height,m=Math.PI/180,n=b.width*Math.cos(30*m),p=b.height*Math.cos(30*m);f.save();f.translate(g,h);f.rotate(d*Math.PI/180);f.beginPath();f.arc(0,-b.height/2-n,k,60*m,120*m,!1);f.arc(b.width/2+p,0,l,
150*m,210*m,!1);f.arc(0,b.height/2+n,k,240*m,300*m,!1);f.arc(-b.width/2-p,0,l,-30*m,30*m,!1);f.closePath();f.fillStyle=c;f.fill();f.restore()}}});
Class("HotSpotsHandImageData",{Package:"PageItem",create:function(b,c){this.dock=b;this.src=c;this.init()},init:function(){this.dock.hand||(this.dock.hand=$("<img></img>"),this.dock.hand.attr("src",this.src));this.data=this.dock.hand},getImage:function(){if(!this.data)return null;var b=this.data[0];return 0==b.naturalWidth?null:b},draw:function(b,c,d){if(b&&c){void 0==d&&(d=1);var f=this.getImage();if(f){var g=f.naturalWidth,h=f.naturalHeight;b.globalAlpha=d;b.drawImage(f,0,0,g,h,c.left,c.top,c.width,
c.height);b.globalAlpha=1}}}});Class("RingHotSpotsDrawer",{Package:"PageItem",draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=d/3,g=d/16,h=this.rectInCenter(f);this.drawRound(h,this.color);g={width:g,color:this.color.rgba((c-b)/c)};d=this.rectInCenter(f+(d-f)*b/c);this.drawRing(d,g)}}}).extend("HotSpotsDrawer");
Class("StarHotSpotsDrawer",{Package:"PageItem",draw:function(b,c){if(this.width&&this.height){this.clear();this._super(b,c);var d=Math.min(this.width,this.height)/3,d=this.rectInCenter(d),f=Math.ceil(b/c*360);this.drawStar(d,"#FFFF00",null,f)}}}).extend("RingHotSpotsDrawer");
Class("MouseHotSpotsDrawer",{Package:"PageItem",draw:function(b,c){if(this.width&&this.height){this.clear();this._super(b,c);var d=Math.min(this.width,this.height),f=d/4;this.drawMouse({left:(this.width-f)/2,top:this.height/2,width:f,height:2*d/5})}}}).extend("RingHotSpotsDrawer");
Class("RoundHotSpotsDrawer",{Package:"PageItem",create:function(b,c,d){this.context=b;this.color=Color(c);this.centerColor=d?Color(d):this.color.add(70)},draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=d/3,g=this.rectInCenter(f+(d-f)*b/c),d=this.color.rgba((c-b)/c);this.drawRound(g,d);var g=this.rectInCenter(f);this.drawRound(g,this.centerColor.toString())}}}).extend("HotSpotsDrawer");
Class("RotateHotSpotsDrawer",{Package:"PageItem",draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f={width:d/8,color:this.color.toString()},g=this.rectInCenter(7*d/8);this.drawRing(g,f);var f=d/4,g=d/4,h=(this.height-g)/2,d={left:0,top:h,width:f,height:g},k=Math.floor(1.1*g),f={left:0,top:h-Math.ceil(0.1*g),width:f,height:k},g=Math.ceil(360*b/c);this.context.save();this.context.translate(this.width/2,this.height/2);this.context.rotate(g*Math.PI/180);
d.left-=this.width/2;d.top-=this.height/2;f.left-=this.width/2;f.top-=this.height/2;this.drawTriangle(f,"#FFFFFF");this.drawTriangle(d,this.color.toString());this.drawTriangle();this.context.restore()}}}).extend("HotSpotsDrawer");Class("RotateRingHotSpotsDrawer",{Package:"PageItem",draw:function(b,c){if(this.width&&this.height){this.clear();this._super(b,c);var d=Math.min(this.width,this.height)/3,d=this.rectInCenter(d);this.drawRound(d,this.color.toString())}}}).extend("RotateHotSpotsDrawer");
Class("RotateHandHotSpotsDrawer",{Package:"PageItem",create:function(b,c){this._super(b,c);this.initHand()},initHand:function(){this.imageData=new this.HotSpotsHandImageData(this.getClass(),uiBaseURL+"hotspot_hand.png")},draw:function(b,c){if(this.width&&this.height){this.clear();this._super(b,c);var d=Math.min(this.width,this.height),d=this.rectInCenter(d/3,d/2);this.imageData.draw(this.context,d)}}}).extend("RotateHotSpotsDrawer");
Class("BlinkerHotSpotsDrawer",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c);this.lightColor=d?Color(d):Color(this.color.add(70));this.ringColor=f?Color(f):this.color;this.colorDiff=this.color.difference(this.lightColor);this.frameColorDiff={}},draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=b,g=Math.ceil(c/2);f<g?(f/=g,this.frameColorDiff.r=Math.ceil(this.colorDiff.r*f),this.frameColorDiff.g=Math.ceil(this.colorDiff.g*f),this.frameColorDiff.b=
Math.ceil(this.colorDiff.b*f)):(f=(f-g)/g,this.frameColorDiff.r=this.colorDiff.r-Math.ceil(this.colorDiff.r*f),this.frameColorDiff.g=this.colorDiff.g-Math.ceil(this.colorDiff.g*f),this.frameColorDiff.b=this.colorDiff.b-Math.ceil(this.colorDiff.b*f));f=this.color.add(this.frameColorDiff);g=this.rectInCenter(d/2);this.drawRound(g,f);f=this.rectInCenter(d);this.drawRing(f,{width:d/8,color:this.ringColor.toString()})}}}).extend("HotSpotsDrawer");
Class("ShrinkHotSpotsDrawer",{Package:"PageItem",create:function(b,c,d){this._super(b,c);this.innerColor=d?Color(d):Color(this.color.add(70))},draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=7*d/8,g=d/4;if(b<c/2){var h=b,k=c/2,g=g+(d-g)*h/k,f=this.rectInCenter(0+(f-0)*h/k),g=this.rectInCenter(g);this.drawRound(f,this.innerColor.toString());this.drawRing(g,{width:d/8,color:this.color.toString()})}else k=c/4,h=b%k,b<3*c/4?(h=1-h/k,f=this.rectInCenter(0+
(f-0)*h),g=this.rectInCenter(d),this.drawRound(f,this.innerColor.rgba(h)),this.drawRing(g,{width:d/8,color:this.color.toString()})):(h=1-h/k,g=this.rectInCenter(g+(d-g)*h),this.drawRing(g,{width:d/8,color:this.color.rgba(h)}))}}}).extend("HotSpotsDrawer");
Class("RipplesHotSpotsDrawer",{Package:"PageItem",create:function(b,c){this._super(b,c)},draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=c/2,g=b%f,h=g/f;if(b<c/2){var k=d/5,l=d,m=(l-k)*g/f,n=Math.ceil(d/50),d=Math.ceil(d/16),n=n+(d-n)*g/f,k=this.rectInCenter(k+m),l=this.rectInCenter(l);this.drawRing(k,{width:n,color:this.color.toString()});this.drawRing(l,{width:d,color:this.color.rgba(h)})}else k=d/5,l=d,m=(l-k)*g/f,n=Math.ceil(d/50),d=Math.ceil(d/
16),f=(d-n)*g/f,k=this.rectInCenter(k+m),l=this.rectInCenter(l-m),this.drawRing(k,{width:n+f,color:this.color.rgba(1-h)}),this.drawRing(l,{width:d-f,color:this.color.toString()})}}}).extend("HotSpotsDrawer");
Class("RectsHotSpotsDrawer",{Package:"PageItem",draw:function(b,c){if(this.width&&this.height){this.clear();for(var d=Math.min(this.width,this.height),f=Math.ceil(360*b/c),g=0;3>g;g++){var h=120*g+f,k=this.rectInCenter(d/6,5*d/6);this.drawRect(k,this.color.rgba(0.4),null,h)}for(g=0;3>g;g++)h=120*g-f,k=this.rectInCenter(d/7,2*d/3),this.drawRect(k,this.color.toString(),null,h)}}}).extend("HotSpotsDrawer");
Class("SquareHotSpotsDrawer",{Package:"PageItem",create:function(b,c,d){this._super(b,c);this.centerColor=d?Color(d):Color(this.color.add(70))},draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=d/2,g=d/25,h=this.rectInCenter(f);this.drawRoundRect(h,g,this.centerColor.toString(),{width:g,color:this.color.toString()});h=1-b/c;d=this.rectInCenter(f+(d-g-f)*b/c);this.drawRoundRect(d,g,"transparent",{width:g,color:this.color.rgba(h)})}}}).extend("HotSpotsDrawer");
Class("SquareStarHotSpotsDrawer",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c);this.borderColor=d?Color(d):Color(this.color.reduce(70));this.backgroundColor=f?Color(f):this.color},draw:function(b,c){if(this.width&&this.height){this.clear();var d=c/2,f=b%d,g=Math.min(this.width,this.height),h=g/12,k=g/4,l=Math.sqrt(this.width*this.width/4+this.height*this.height/4),m=(g-k)*f/d,d=(l-k)*f/d;b<c/2?(g=this.rectInCenter(k+m),m=this.rectInCenter(l-d),h=this.rectInCenter(l-d-2*h)):(g=this.rectInCenter(g-
m),m=this.rectInCenter(k+d),h=this.rectInCenter(k+d-2*h));this.drawSquareStar(g,this.backgroundColor.toString());this.drawSquareStar(m,this.borderColor.toString(),45);this.drawSquareStar(h,this.color.toString(),45)}}}).extend("HotSpotsDrawer");
Class("DoughnutHotSpotsDrawer",{Package:"PageItem",create:function(b,c){this._super(b,c);this.initHand()},initHand:function(){this.imageData=new this.HotSpotsHandImageData(this.getClass(),uiBaseURL+"hotspot_hand2.png")},draw:function(b,c){if(this.width&&this.height){this.clear();var d=Math.min(this.width,this.height),f=this.rectInCenter(d/3),g=c/2,g=b%g/g;b>=c/2&&(g=1-g);this.imageData.draw(this.context,f,g);var f=d/6,g=d/12,h=d/48,k=this.rectInCenter(d),l=this.rectInCenter(11*d/12),d=this.rectInCenter(41*
d/48),m=Color("white");this.drawRing(k,{width:f,color:this.color.toString()});this.drawRing(l,{width:g,color:m.rgba(0.1)});this.drawRing(d,{width:h,color:m.rgba(0.2)})}}}).extend("HotSpotsDrawer");function forceFloat(b){b=Number(b).toString();-1==b.indexOf(".")&&(b+=".00");return b}
Class("ShoppingCart",{Package:"PageItem",create:function(b,c,d,f){this.config=this.parseConfig(c);this.animateConfig();this.pageWidth=d;this.pageHeight=f;this.bgColor=Color(this.config.bgColor).toString();this.width=Number(this.pageWidth*this.config.width);this.height=Number(this.pageHeight*this.config.height);this.config.imgUrl=this.config.imgUrl;this.config.url=this.config.url;bookConfig.isFlipPdf&&(this.config.imgUrl.startsWith("./")?this.config.imgUrl="."+this.config.imgUrl:this.config.imgUrl.isUrl()||
(this.config.imgUrl="../"+this.config.imgUrl));this.background=$("<div></div>");this.img=$("<div></div/>");b.append(this.background);this.background.append(this.img);this.linkOrCart(c,b);this.setLinkCss();this.setPosition();this.initEvent()},parseConfig:function(b){return{annotype:b.annotype,x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,bgColor:b.bgColor,bgAlpha:b.bgAlpha,alpha:b.alpha,cartType:b.cartType,imgUrl:b.imgUrl,titleStr:b.titleStr,
url:b.url,Detailed:b.Detailed,animation:b.animation}},destroy:function(){this.background.empty();this.background.remove();this.shop&&this.shop.destroy()},linkOrCart:function(b,c){var d="";this.config.url&&(d=this.config.url);!d||d.startsWith("http://")||d.startsWith("https://")||(d="http://"+d);"link"==this.config.cartType?(isTouchDevice()?(this.background=$("<div></div>"),d&&this.background.bind(_event._end,function(){window.location.href=d}.bind(this))):(this.background=$("<a ><div></div></a>"),
d&&(this.background.attr("href",d),this.background.attr("target","_blank"))),c.append(this.background),this.background.append(this.img)):isPhone()||isPad()?this.shop=new PageItem.MobileProductDetailsPanel(b,pageEditor.setting,c):this.shop=new PageItem.PCProductDetailsPanel(b,pageEditor.setting,c)},setLinkCss:function(){this.background.css({position:"absolute","background-position":"center",width:this.width+"px",height:this.height+"px","background-color":Color(this.bgColor).rgba(this.config.bgAlpha),
opacity:this.config.alpha,"text-decoration":"none",cursor:"default",transform:"rotate("+this.config.rotation+"deg)","-webkit-transform":"rotate("+this.config.rotation+"deg)","-ms-transform":"rotate("+this.config.rotation+"deg)","-o-transform":"rotate("+this.config.rotation+"deg)","-moz-transform":"rotate("+this.config.rotation+"deg)","transform-origin":"50% 50%","-webkit-transform-origin":"50% 50%","-ms-transform-origin":"50% 50%","-o-transform-origin":"50% 50%","-moz-transform-origin":"50% 50%"});
bookConfig.useTheAliCloudChart&&(this.config.imgUrl=this.getOssUrl(this.config.imgUrl,2*this.width/3,2*this.height/3,"lfit"));this.img.css({background:"url("+this.config.imgUrl+") center center no-repeat","background-size":"contain",position:"absolute",cursor:"pointer",width:2*this.width/3+"px",height:2*this.height/3+"px",margin:"auto",left:"0",right:"0",top:"0",bottom:"0"})},initEvent:function(){if(!isTouchDevice()){var b=new divHint;this.background.bind(_event._move,function(c){var d;isTouchDevice()?
(d=c.originalEvent.touches[0],void 0==d&&(d=c.touches[0])):d=c;$(d.target);c=d.pageX+10;d=d.pageY+10;b.setStyle("hintBackground");b.instance.css({"font-size":"12px",overflow:"hidden"});"link"==this.config.cartType?""!=this.config.titleStr?(this.showtitle=!0,b.setText(this.config.titleStr.overflow(16))):this.config.url&&(this.showtitle=!0,b.setText(this.config.url.overflow(16))):""!=this.config.titleStr?(this.showtitle=!0,b.setText(this.config.titleStr.overflow(16))):this.config.Detailed.title&&(this.showtitle=
!0,b.setText(this.config.Detailed.title.overflow(16)));this.showtitle&&(b.moveto(c,d),b.show())}.bind(this));this.background.bind(_event._leave,function(){b.hide();this.showtitle=!1}.bind(this))}this.background.bind(_event._down,function(b){b.stopPropagation();bookConfig.googleAnalyticsID&&ga("send","event","Shopping","click","Page"+BookInfo.getCurrentPages()[0]+" showProductDetail");return!1});this.background.bind(_event._end,function(){this.shop&&this.shop.show();return!1}.bind(this))},show:function(){this.background.css("display",
"block")},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*b;this.height=this.config.height*c;this.background.css({width:this.width+"px",height:this.height+"px"});this.setLinkCss();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.background.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.background.one(b,function(){this.background.css({animation:""})}.bind(this))}},
setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.background.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
var ShoppingCartUtil={setProductsToStorage:function(b){try{if(window.localStorage){var c=Instance.JSON(b);window.localStorage.setItem("shopping_cart_products",c)}}catch(d){}},getProductsFromStorage:function(){try{if(!window.localStorage)return[];var b=window.localStorage.getItem("shopping_cart_products");return Instance.parse(b,[])}catch(c){return[]}},removeProduct:function(b){for(var c=this.getProductsFromStorage(),d=0;d<c.length;d++)if(c[d].title==b.title){c.remove(d);break}this.setProductsToStorage(c)},
addProduct:function(b){for(var c=this.getProductsFromStorage(),d=!0,f=0;f<c.length;f++){var g=c[f];if(g.title==b.title){g.number=b.number+g.number;d=!1;break}}d&&c.push(b);this.setProductsToStorage(c);return c},saveProducts:function(b,c){b||(b=[]);for(var d=[],f=0;f<b.length;f++)d.push(b[f].product);this.setProductsToStorage(d)}};
Class("ProductDetailsPanel",{Package:"PageItem",create:function(b,c,d){this.config=this.parseConfig(b);this.setting=c;this.parent=d;this.initUI();this.initEvent()},parseConfig:function(b){return b},destroy:virtual_function,getMailtoInformation:function(b,c,d){var f=d.shoppingCartOptinon.body;b=parseInt(b);var g=forceFloat(c.Detailed.proce),h="",h=!0==parseBool(pageEditor.setting.shoppingCartOptinon.showPrice)?String.format("%0D%0A%0D%0A%0D%0A%s(N1, %d * %s%s = %s%s);%0D%0A%s%s%0D%0A-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A",
c.Detailed.title,b,g,c.Detailed.sing,forceFloat(g*b),c.Detailed.sing,forceFloat(g*b),c.Detailed.sing):String.format("%0D%0A%0D%0A%0D%0A%s(N1, %d);%0D%0A%0D%0A-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A",c.Detailed.title,b);-1<f.indexOf("${shopping}")&&(f=f.replaceAll("${shopping}",h,!0));return String.format("mailto:%s?subject=%s&body=%s",d.shoppingCartOptinon.address,d.shoppingCartOptinon.theme,f)},getPaypalInformation:function(b,c,d){var f="";if("$"==c.Detailed.sing||"U.S.$"==c.Detailed.sing)f=
"USD";"\uffe5"==c.Detailed.sing&&(f="CNY");"\u20ac"==c.Detailed.sing&&(f="EUR");"\uffe1"==c.Detailed.sing&&(f="GBP");"J.\uffe5"==c.Detailed.sing&&(f="JPY");"$A."==c.Detailed.sing&&(f="AUD");"$NZ."==c.Detailed.sing&&(f="NZD");"SFR."==c.Detailed.sing&&(f="CHF");"HK$"==c.Detailed.sing&&(f="HKD");"S.$"==c.Detailed.sing&&(f="SGD");"S.Kr."==c.Detailed.sing&&(f="SEK");"D.Kr."==c.Detailed.sing&&(f="DKK");"z\u0142"==c.Detailed.sing&&(f="PLZ");"N.Kr."==c.Detailed.sing&&(f="NOK");"FT."==c.Detailed.sing&&(f=
"HUF");"Cz.Kr."==c.Detailed.sing&&(f="CSK");"Mex.$"==c.Detailed.sing&&(f="MXP");"\u20aa"==c.Detailed.sing&&(f="ILS");"Gr.$"==c.Detailed.sing&&(f="BRC");"Mal.$"==c.Detailed.sing&&(f="MYR");"NT"==c.Detailed.sing&&(f="NTD");"\u0e3f"==c.Detailed.sing&&(f="THP");"Ykr"==c.Detailed.sing&&(f="TRL");return"http://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business="+d.shoppingCartOptinon.paypal+"&item_name="+c.Detailed.title+"&amount="+c.Detailed.proce+"&currency_code="+f+"&quantity="+b},doCheckout:function(){if(!1!=
this.canCheckout){var b="",b=this.input.val(),b="Email"==this.setting.shoppingCartOptinon.type?this.getMailtoInformation(b,this.config,this.setting):this.getPaypalInformation(b,this.config,this.setting);window.open(b)}}});
Class("ShoppingCartPanel",{Package:"PageItem",getMailtoInformation:function(b,c){if(!this.shoppingItems)return"";for(var d="%0D%0A",f=pageEditor.setting.shoppingCartOptinon.body,g=0,h=parseBool(pageEditor.setting.shoppingCartOptinon.showPrice),k=0;k<this.shoppingItems.length;k++){var l=this.shoppingItems[k];if(void 0==l.isSelected||l.isSelected())var m=forceFloat(l.product.price),d=!0==h?d+String.format("%0D%0A%s(N"+(k+1)+", %d * %s%s = %s%s);%0D%0A",l.product.title,parseInt(l.product.number),m,l.product.sing,
forceFloat(m*parseInt(l.product.number)),l.product.sing):d+String.format("%0D%0A%s(N"+(k+1)+", %d);%0D%0A",l.product.title,parseInt(l.product.number)),l=parseFloat(l.product.price*l.cartInput.val()),g=g+l}!0==h&&(d+=String.format("%0D%0A(Total price : %f%s);%0D%0A%0D%0A",g,this.config.Detailed.sing));d+="-type in your contacts here-%0D%0A%0D%0A%0D%0A%0D%0A";-1<f.indexOf("${shopping}")&&(f=f.replaceAll("${shopping}",d,!0));return String.format("mailto:%s?subject=%s&body=%s",pageEditor.setting.shoppingCartOptinon.address,
pageEditor.setting.shoppingCartOptinon.theme,f)},getPaypalInformation:function(b,c){if(!this.shoppingItems)return"";for(var d="",f="",g=0,h=0;h<this.shoppingItems.length;h++){var k=this.shoppingItems[h];if(void 0==k.isSelected||k.isSelected()){if("$"==b.Detailed.sing||"U.S.$"==b.Detailed.sing)d="USD";"\uffe5"==b.Detailed.sing&&(d="CNY");"\u20ac"==b.Detailed.sing&&(d="EUR");"\uffe1"==b.Detailed.sing&&(d="GBP");"J.\uffe5"==b.Detailed.sing&&(d="JPY");"$A."==b.Detailed.sing&&(d="AUD");"$NZ."==b.Detailed.sing&&
(d="NZD");"SFR."==b.Detailed.sing&&(d="CHF");"HK$"==b.Detailed.sing&&(d="HKD");"S.$"==b.Detailed.sing&&(d="SGD");"S.Kr."==b.Detailed.sing&&(d="SEK");"D.Kr."==b.Detailed.sing&&(d="DKK");"z\u0142"==b.Detailed.sing&&(d="PLZ");"N.Kr."==b.Detailed.sing&&(d="NOK");"FT."==b.Detailed.sing&&(d="HUF");"Cz.Kr."==b.Detailed.sing&&(d="CSK");"Mex.$"==b.Detailed.sing&&(d="MXP");"\u20aa"==b.Detailed.sing&&(d="ILS");"Gr.$"==b.Detailed.sing&&(d="BRC");"Mal.$"==b.Detailed.sing&&(d="MYR");"NT"==b.Detailed.sing&&(d="NTD");
"\u0e3f"==b.Detailed.sing&&(d="THP");"Ykr"==b.Detailed.sing&&(d="TRL");g++;f+=String.format("&item_name_"+g+"=%s&amount_"+g+"=%f&quantity_"+g+"=%d",k.product.title,parseFloat(k.product.price),parseInt(k.product.number))}}f+=String.format("&business=%s&currency_code=%s",c.shoppingCartOptinon.paypal,d);return"http://www.paypal.com/cgi-bin/webscr?cmd=_cart&upload=1"+f},doCheckout:function(){if(!1!=this.canCheckout){var b="",b="Email"==this.setting.shoppingCartOptinon.type?this.getMailtoInformation(this.config,
this.setting):this.getPaypalInformation(this.config,this.setting);window.open(b)}},refreshTotalValue:function(){this.shoppingItems||(this.shoppingItems=[]);this.canCheckout=!0;var b=0,c=0;if(0<this.shoppingItems.length){for(var d=0;d<this.shoppingItems.length;d++){var c=this.shoppingItems[d],f=c.product;if(void 0==c.isSelected||c.isSelected())c=parseFloat(f.price*f.number),b+=c,f.number>f.quantity&&(this.canCheckout=!1)}this.total.text("Total: "+f.sing+b.toFixed(2))}else this.total.text("Total: 0.00");
this.item.text("Item: "+this.shoppingItems.length)},refreshInputValue:function(){for(var b=ShoppingCartUtil.getProductsFromStorage(),c=0,d=0;d<b.length;d++)c+=b[d].number;return c},removeItem:function(b){ShoppingCartUtil.removeProduct(b.product);b.singleShop.remove();for(var c=0;c<this.shoppingItems.length;c++)if(this.shoppingItems[c]==b){this.shoppingItems.remove(c);break}}});Class("ShoppingCartItem",{});
Class("ShoppingAdvancedProperty",{Package:"PageItem",create:function(b){this.config=b;(this.advanced=this.config.Detailed.advanced)&&!this.advanced[0]&&(this.advanced=[this.advanced.list]);this.advanceLength=this.advanced.length;this.shopAdvanced1=$("<div style='width:300px; position:relative; height:25px;margin-top:5px'></div>");this.shopAdvanced2=$("<div style='width:300px; position:relative; height:30px;margin-top:5px'></div>");this.shopAdvanced3=$("<div style='width:300px; position:relative; height:30px;margin-top:5px'></div>");
for(b=0;b<this.advanceLength;b++)"list"==this.advanced[b].type&&(this.advanceListValue=this.advanced[b].defaultValue);this.initAdvanced();this.setAdvanceEvent()},initAdvanced:function(){var b=0,c=0,d=0;this.shopSelect=[];for(var f=0;f<this.advanceLength;f++)if(this.shopSelect[f]=[],"boolean"==this.advanced[f].type&&(b+=1,this.shopTypeName=$("<div style='position:absolute;overflow:auto;margin-left:20px;width:auto; top:"+20*(b-1)+"px; height:20px;font-family:Arial; font-size:12px;line-height:20px'>"+
this.advanced[f].name+"</div>"),this.checkBox=$("<input type=checkbox  style='position:absolute;margin:0;top:"+(4+20*(b-1))+"px;'/>"),"true"==this.advanced[f].defaultValue&&this.checkBox.attr("checked","checked"),this.shopAdvanced1.append(this.checkBox).append(this.shopTypeName),this.shopAdvanced1.css({height:20*b+"px"})),"text"==this.advanced[f].type&&(c+=1,this.shopTypeName=$("<div style='width:55px;overflow:auto; top:"+(5+30*(c-1))+"px; height:20px;line-height:20px;font-family:Arial;font-size:12px;position:absolute'>"+
this.advanced[f].name+":</div>"),this.shopValue=$("<input style='width:200px;position:absolute; top:"+(4+30*(c-1))+"px; left:50px; height:18px;font-family:Arial; font-size:12px;outline:medium' value='"+this.advanced[f].value+"'/>"),this.shopAdvanced2.append(this.shopTypeName).append(this.shopValue),this.shopAdvanced2.css({height:30*c+"px"})),"list"==this.advanced[f].type){var g=[],g=this.advanced[f].value.split(";"),h=0,d=d+1;this.shopTypeName=$("<div style='position:absolute;overflow:auto;width:55px; top:5px; height:20px;line-height:20px;font-family:Arial; font-size:12px'>"+
this.advanced[f].name+" :</div>");this.shopAdvanced3.append(this.shopTypeName);for(var k=0;k<g.length;k++)0<k&&0==k%5&&(this.shopAdvanced3.append("<br/><br/>"),top+=30,d+=1,h=0),this.shopTypeName.css({top:3+30*(d-1)+"px"}),h+=40,this.shopSelect[f][k]=$("<div class=borderStyle name="+this.advanced[f].name+" style='overflow:auto;height:20px;min-width:25px;cursor:pointer;font-family:Arial; font-size:12px;border:1px solid black;left:"+h+"px; top:"+(3+30*(d-1))+"px; position:absolute;text-align:center;line-height:20px;padding-left:4px;padding-right:4px'>"+
g[k]+"</div>"),this.advanced[f].defaultValue==g[k]&&this.shopSelect[f][k].css("border","2px solid rgb(255,0,0)"),this.shopAdvanced3.append(this.shopSelect[f][k]);this.shopAdvanced3.css({height:30*d+"px"})}},setAdvanceEvent:function(){for(var b=0;b<this.shopSelect.length;b++)for(var c=this.shopSelect[b],d=c.length,f=this,g=0;g<d;g++)c[g].bind(_event._click,function(){for(var b=0;b<f.shopSelect.length;b++)for(j=0;j<f.shopSelect[b].length;j++)f.shopSelect[b][j].attr("name")==$(this).attr("name")&&f.shopSelect[b][j].css("border",
"1px solid rgb(0,0,0)"),f.shopSelect[b][j][0]==this&&(f.advanced[b].defaultValue=f.shopSelect[b][j][0].innerText,f.shopSelect[b][j].css("border","2px solid rgb(255,0,0)"))})},isCheckBoxSelected:function(){return this.checkBox[0].checked},setShoppingCartAdvanced:function(){var b="";if(0!=this.advanceLength)for(var c=0;c<this.advanceLength;c++)"text"==this.advanced[c].type&&(this.advanced[c].defaultValue=this.shopValue.val()),"list"==this.advanced[c].type&&(this.advanced[c].defaultValue=this.advanced[c].defaultValue),
"boolean"==this.advanced[c].type&&this.isCheckBoxSelected()&&(this.advanced[c].defaultValue=this.isCheckBoxSelected().toString()),b+=" "+this.advanced[c].name+":"+this.advanced[c].defaultValue+" ";return b}});
Class("MobileProductDetailsPanel",{Package:"PageItem",create:function(b,c,d){this.advancedObj=new PageItem.ShoppingAdvancedProperty(b);this._super(b,c,d);this.shoppingCart||(this.shoppingCart=new PageItem.MobileShoppingCartPanel(b,c),window.shoppingCart=this.shoppingCart);toolBar.getButton("ShoppingCart").setNumber(this.shoppingCart.refreshInputValue());this.canCheckout=!0},parseConfig:function(b){return{annotype:b.annotype,x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,
bgColor:b.bgColor,bgAlpha:b.bgAlpha,cartType:b.cartType,imgUrl:b.imgUrl,titleStr:b.titleStr,url:b.url,languageLayout:b.languageLayout,Detailed:b.Detailed}},destroy:function(){this.phoneContainer.empty();this.phoneContainer.remove()},initUI:function(){"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.phoneContainer=$("<div class=phoneContainer></div>");this.toolBar=$("<div></div>");this.closeButton=$("<div></div>");this.textTitle=$("<div>Product Details</div>");
this.phoneImg=$("<img/>");this.title=$("<div>"+this.config.Detailed.title+"</div>");this.title.text(this.title.text().overflow(30));this.phoneImgBox=$("<div></div>");this.contentText=$("<div></div>");this.shopDescribe=$("<div>"+this.config.Detailed.about+"</div>");this.price=$("<div>Price : "+this.config.Detailed.sing+this.config.Detailed.proce+"</div>");this.mNumber=$("<div><span style='position:absolute;'>Quantity : </span></div>");this.input=$("<input type='text' value='1' style='float:left;width:40px;text-align:center;height:20px;outline:medium;border:1px solid rgb(255,255,255)'/>");
this.input.allowNumberOnly();this.mAdd=$("<img src='"+uiBaseURL+"cartAdd.png' style='float:left;cursor:pointer;width:25px ;height:25px;background-color:#DDDDDA' />");this.mLow=$("<img src='"+uiBaseURL+"cartLow.png' style='float:left;cursor:pointer;width:25px ;height:25px;position:absolute;background-color:#DDDDDA'/>");this.alignCss?(this.transitTime=$("<div>"+this.config.Detailed.time+"day(s) : Delivery time</div>"),bookConfig.isFlipPdf&&this.transitTime.html(this.config.Detailed.time+"\u5929(s) : \u4ea4\u8d27\u65f6\u95f4 ")):
(this.transitTime=$("<div>Delivery time : "+this.config.Detailed.time+"day(s)</div>"),bookConfig.isFlipPdf&&this.transitTime.html("\u4ea4\u8d27\u65f6\u95f4 : "+this.config.Detailed.time+"\u5929(s)"));this.allQuantity=$("<div> "+this.config.Detailed.quantity+" In Stock</div>");this.mAddToCart=$("<span>Add to cart</span>");this.mCheckOut=$("<span>Checkout</span>");this.mailto=$("<a style='text-decoration: none'></a>");this.inputChangRed=$("<span style='position:absolute;top:35px;margin-left:30px;color:red;font-size:10px;width:115px;height:15px;right:30px'>Not enough in stock</span>");
this.content=$("<div></div>");this.addlow=$("<div></div>");bookConfig.isFlipPdf&&this.initFlipPdfCase();tmpContainer.append(this.phoneContainer);this.phoneContainer.append(this.toolBar);this.phoneContainer.append(this.content);this.phoneContainer.append(this.contentText);this.toolBar.append(this.closeButton);this.toolBar.append(this.textTitle);this.phoneImgBox.append(this.phoneImg);this.contentText.append(this.title);this.contentText.append(this.shopDescribe);this.contentText.append(this.price);if(""!=
this.advancedObj.advanced)for(var b=0;b<this.advancedObj.advanceLength;b++)"boolean"==this.advancedObj.advanced[b].type&&(this.contentText.append(this.advancedObj.shopAdvanced1),this.advancedObj.shopAdvanced1.css({"margin-left":"15px","margin-top":"10px"})),"text"==this.advancedObj.advanced[b].type&&(this.contentText.append(this.advancedObj.shopAdvanced2),this.advancedObj.shopAdvanced2.css({"margin-left":"15px","margin-top":"10px"})),"list"==this.advancedObj.advanced[b].type&&(this.contentText.append(this.advancedObj.shopAdvanced3),
this.advancedObj.shopAdvanced3.css({"margin-left":"15px","margin-top":"10px"}));this.contentText.append(this.mNumber).append(this.allQuantity).append(this.transitTime);this.content.append(this.phoneImgBox).append(this.contentText);this.mailto.append(this.mCheckOut);this.phoneContainer.append(this.mAddToCart);this.phoneContainer.append(this.mailto);this.mNumber.append(this.addlow);this.addlow.append(this.mAdd).append(this.input).append(this.mLow);this.imgs=this.config.Detailed.imgs;this.imgs[0]||(this.imgs=
[this.imgs.img]);this.imgsCount=this.imgs.length;!1===this.setting.shoppingCartOptinon.showPrice&&this.price.css({display:"none"});!1===this.setting.shoppingCartOptinon.showTime&&this.transitTime.css({display:"none"});this.initCss();this.initImgs()},initFlipPdfCase:function(){this.textTitle=$("<div>\u5546\u54c1\u8be6\u60c5</div>");this.allQuantity=$("<div> "+this.config.Detailed.quantity+" \u5e93\u5b58</div>");this.mAddToCart=$("<span>\u6dfb\u52a0\u5230\u8d2d\u7269\u8f66</span>");this.mCheckOut=$("<span>\u4ed8\u6b3e</span>");
this.price=$("<div>\u4ef7\u683c : "+this.config.Detailed.sing+this.config.Detailed.proce+"</div>");this.mNumber=$("<div><span style='position:absolute;'>\u6570\u91cf : </span></div>")},initImgs:function(){this.imageItems=[];for(var b=0;b<this.imgs.length;b++)this.imageItems[b]=this.imgs[b],bookConfig.isFlipPdf&&(this.imageItems[b].startsWith("./")?this.imageItems[b]="."+this.imageItems[b]:this.imageItems[b].isUrl()||(this.imageItems[b]="../"+this.imageItems[b]));1<this.imgsCount&&(this.setSwipe(),
this.imageURL=this.imageItems[0]);this.setImgs(this.imageItems[0])},setImgs:function(b){this.phoneImg.attr({src:b})},setSwipe:function(){this.currentIndex=0;var b=function(b,d){var f;f=30*windowWidth/1600;if(!(Math.abs(b)<=f)){var g=this.imageItems.length;b<-f?this.currentIndex=(this.currentIndex+1)%g:b>f&&(0==this.currentIndex&&(this.currentIndex+=g),this.currentIndex=(this.currentIndex-1)%g);this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL);$.browser.mise?event.cancelBubble=
!0:event.stopPropagation()}}.bind(this);this.phoneImgBox.speed(b)},initCss:function(){this.phoneContainer.css({width:windowWidth+"px",height:"100%",position:"absolute",transform:"translate("+windowWidth+"px,0)","-webkit-transform":"translate("+windowWidth+"px,0)","-moz-transform":"translate("+windowWidth+"px,0)","-o-transform":"translate("+windowWidth+"px,0)","-ms-transform":"translate("+windowWidth+"px,0)","background-color":"#f7f7f7","z-index":"3000"});this.setMobileShopCss()},setMobileShopCss:function(){this.addlow.css({position:"absolute",
width:"100px",height:"25px",left:"65px"});this.content.css({position:"relative",width:windowWidth+15+"px",height:windowHeight-90+"px","overflow-x":"hidden"});this.mCheckOut.css({position:"absolute","background-color":"#ff4400",width:windowWidth/2+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial",right:"0",bottom:"0",cursor:"pointer",color:"white"});this.mAddToCart.css({position:"absolute","background-color":"#ffa800",width:windowWidth/2+"px",height:"40px","text-align":"center",
"line-height":"2.5","font-family":"Arial","margin-left":"0",bottom:"0",cursor:"pointer",color:"white"});this.allQuantity.css({height:"14px","margin-top":"10px","font-size":"10px",color:Color(44849).toString(),"font-family":"Tahoma"});this.transitTime.css({height:"14px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Tahoma"});this.contentText.css({position:"relative",padding:"0 15px",width:windowWidth-30+"px"});this.mNumber.css({position:"relative",height:"25px","line-height":"25px",
"margin-top":"10px",color:"black","font-size":"10px","font-family":"Tahoma"});this.price.css({position:"relative",height:"20px","margin-top":"10px","font-size":"18px",color:Color(12845056).toString(),"font-family":"Tahoma"});this.title.css({height:"32px","line-height":"26px","font-size":"26px",color:"black","font-family":"Tahoma","margin-top":"7px"});this.shopDescribe.css({"line-height":"1.6","font-size":"13px",color:"black","margin-top":"10px","font-family":"Tahoma"});this.textTitle.css({position:"absolute",
width:windowWidth/2+5,margin:"auto","font-size":"18px","font-family":"Tahoma",color:"rgb(140,140,140)","vertical-align":"middle","line-height":"2.2",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.toolBar.css({position:"relative",width:windowWidth+"px","background-color":"white",border:"rgb(239,232,232) 1px solid",height:"40px"});this.closeButton.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat","background-position":"4px 4px",
cursor:"pointer",width:"28px",height:"28px",left:"10px",bottom:"0",top:"0"});this.phoneImg.css({position:"absolute","max-width":windowWidth-30+"px","max-height":0.3*windowHeight+"px",margin:"auto",left:"0",bottom:"0",top:"0",right:"0"});this.phoneImgBox.css({position:"relative",width:windowWidth+"px",height:0.35*windowHeight+"px","z-index":"3000"});this.alignCss&&(this.contentText.css(this.alignCss),this.addlow.css({left:"auto",right:"75px"}),this.input.css({"float":"right"}),this.mAdd.css({"float":"right"}),
this.mLow.css({"float":"right"}))},initEvent:function(){var b=function(b,d){var f;f=30*windowWidth/1600;Math.abs(b)<=f||b>f&&this.hide()}.bind(this);this.phoneContainer.speed(b);this.mailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","CheckOut","click","doCheckout");this.doCheckout}.bind(this));this.input.bind("blur",function(){parseInt(this.input.val())>this.config.Detailed.quantity?(this.mNumber.append(this.inputChangRed),this.input.css({"border-color":"red"}),
this.canCheckout=!1):(this.inputChangRed.remove(),this.input.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0)}.bind(this));this.closeButton.bind(_event._up,function(){this.hide()}.bind(this));this.mAdd.bind(_event._up,function(){var b=parseInt(this.input.val())+1;this.input.val(b);b>this.config.Detailed.quantity?(this.mNumber.append(this.inputChangRed),this.input.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0}.bind(this));this.mLow.bind(_event._up,function(){var b=
parseInt(this.input.val());1!=b&&(b-=1,this.input.val(b),b<=this.config.Detailed.quantity&&(this.inputChangRed.remove(),this.input.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0),this.input.val(b))}.bind(this));this.mAddToCart.bind(_event._down,function(){tmpContainer.append(this.shoppingCart.mCart);this.shoppingCart.showCart();var b={};b.image=1>=this.imgsCount?this.imageItems[0]:this.imageURL;b.advancedName=this.advancedObj.setShoppingCartAdvanced().toString();b.title=this.config.Detailed.title;
b.sing=this.config.Detailed.sing;b.price=this.config.Detailed.proce;b.number=parseInt(this.input.val());b.quantity=this.config.Detailed.quantity;this.shoppingCart.addProduct(b);toolBar.getButton("ShoppingCart").setNumber(this.shoppingCart.refreshInputValue())}.bind(this));$(window).resize(function(){this.onResize();this.shoppingCart.onResize()}.bind(this))},show:function(){this.textTitle.css({display:"block"});this.contentText.css({display:"block"});this.mAddToCart.css({display:"block"});this.mCheckOut.css({display:"block"});
this.phoneContainer.css({display:"block"});animateOnce.delay(this,10,[this.phoneContainer,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.5,null,"","ease"])},hide:function(){animateOnce(this.phoneContainer,{transform:"translate("+windowWidth+"px,0)","-webkit-transform":"translate("+windowWidth+"px,0)","-moz-transform":"translate("+windowWidth+"px,0)","-o-transform":"translate("+windowWidth+
"px,0)","-ms-transform":"translate("+windowWidth+"px,0)"},0.3,null,"","ease")},informationHide:function(){this.mAddToCart.css({display:"none"});this.mCheckOut.css({display:"none"});this.textTitle.css({display:"none"});this.contentText.css({display:"none"})},onResize:function(b,c){this.phoneContainer.css({width:windowWidth+"px",height:"100%"});this.setMobileShopCss()}}).extend(PageItem.ProductDetailsPanel);
Class("MobileShoppingCartPanel",{Package:"PageItem",create:function(b,c){this.config=b;this.setting=c;this.mCart=$("<div></div>");this.cToolBar=$("<div></div>");this.cClose=$("<div></div>");this.cTitle=$("<div>Shopping Cart</div>");this.deletes=$("<span>Delete</span>");this.total=$("<span style='font-size:10px'>(Total:$0.00)</span>");this.mCartCheck=$("<div>CheckOut </div>");this.cartMailto=$("<a style='text-decoration: none'></a>");this.item=$("<span style='position: absolute;bottom: 40px;left: 20px;font-size:12px;font-family:Tahoma;font-weight:bold'></span>");
bookConfig.isFlipPdf&&this.initFlipPdfCase();this.mCart.append(this.cartMailto);this.cartMailto.append(this.mCartCheck);this.mCartCheck.append(this.total);this.shop=$("<div></div>");this.mCart.append(this.cToolBar).append(this.deletes).append(this.shop);this.cToolBar.append(this.cClose).append(this.cTitle);this.initCss();this.initEvent();this.canCheckout=!1},initFlipPdfCase:function(){this.cTitle=$("<div>\u8d2d\u7269\u8f66</div>");this.deletes=$("<span>\u5220\u9664</span>");this.total=$("<span style='font-size:10px'>(\u603b\u4ef7:$0.00)</span>");
this.mCartCheck=$("<div>\u4ed8\u6b3e </div>")},addProduct:function(b){b=ShoppingCartUtil.addProduct(b);this.shop.empty();this.shoppingItems=[];for(var c=0;c<b.length;c++){var d=new PageItem.MobileShoppingCartItem(this,b[c]);this.shop.append(d.singleShop);this.shoppingItems.push(d)}this.refreshTotalValue()},initEvent:function(){this.cartMailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","ShoppingCart","click","CheckOutAll");this.doCheckout()}.bind(this));this.cClose.bind(_event._up,
function(){this.hideCart()}.bind(this));var b=function(b,d){var f;f=30*windowWidth/1600;Math.abs(b)<=f||b>f&&this.hideCart()}.bind(this);this.mCart.speed(b);this.deletes.bind(_event._click,function(){for(var b=0;b<this.shoppingItems.length;){var d=this.shoppingItems[b];d.isSelected()?(this.removeItem(d),this.refreshTotalValue(),toolBar.getButton("ShoppingCart").setNumber(this.refreshInputValue())):b++}}.bind(this))},initCss:function(){this.mCart.css({width:windowWidth+"px",height:windowHeight+"px",
position:"absolute",transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)","background-color":"#f7f7f7","z-index":"3000"});this.setCartCss()},setCartCss:function(){this.shop.css({width:windowWidth-20+"px",height:0.78*windowHeight+"px",position:"absolute",margin:"auto",top:"0px",left:"0px",bottom:"0px",right:"0px","overflow-x":"hidden"});this.mCartCheck.css({position:"absolute",
"background-color":"#ff4400",width:2/3*windowWidth+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial",right:"0",bottom:"0",cursor:"pointer",color:"white"});this.deletes.css({position:"absolute","background-color":"#666666",width:windowWidth/3+"px",height:"40px","text-align":"center","line-height":"2.5","font-family":"Arial","margin-left":"0",bottom:"0",cursor:"pointer",color:"white"});this.cTitle.css({position:"absolute",width:windowWidth/2,margin:"auto","font-size":"18px",
"font-family":"Tahoma",color:"rgb(140,140,140)","vertical-align":"middle","line-height":"2.5",left:"0",top:"0",bottom:"0",right:"0","text-align":"center"});this.cToolBar.css({position:"relative",width:windowWidth+"px","background-color":"white",border:"rgb(239,232,232) 1px solid",height:"40px"});this.cClose.css({position:"absolute",margin:"auto","background-image":"url("+uiBaseURL+"background_prev.png)","background-repeat":"no-repeat","background-position":"4px 4px",cursor:"pointer",width:"28px",
height:"28px",left:"10px",bottom:"0",top:"0"})},getCartProducts:function(){var b=ShoppingCartUtil.getProductsFromStorage();this.shop.empty();this.shoppingItems=[];for(var c=0;c<b.length;c++){var d=new PageItem.MobileShoppingCartItem(this,b[c]);this.shop.append(d.singleShop);this.shoppingItems.push(d)}this.refreshTotalValue()},onResize:function(b,c){this.mCart.css({width:windowWidth+"px",height:windowHeight+"px"});this.setCartCss()},showCart:function(){this.getCartProducts();tmpContainer.append(this.mCart);
this.mCart.css({display:"block"});animateOnce.delay(this,10,[this.mCart,{transform:"translate(0,0)","-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)","-o-transform":"translate(0,0)","-ms-transform":"translate(0,0)"},0.5,null,"","ease"])},hideCart:function(){animateOnce(this.mCart,{transform:"translate(100%,0)","-webkit-transform":"translate(100%,0)","-moz-transform":"translate(100%,0)","-o-transform":"translate(100%,0)","-ms-transform":"translate(100%,0)"},0.3,null,"","ease")}}).extend(PageItem.ShoppingCartPanel);
Class("MobileShoppingCartItem",{Package:"PageItem",create:function(b,c){this.initHtml(b,c);null==this.product.advancedName||""==this.product.advancedName?(this.carttitle.text(this.carttitle.text().overflow(18)),this.carttitle.text(this.product.title)):this.carttitle.text(this.product.title+"("+this.product.advancedName+")");this.cartPrice.text(this.product.sing+forceFloat(this.product.price));this.shoppingImage.attr("src",this.product.image);this.singleShop.append(this.checkBox).append(this.shoppingImage).append(this.carttitle).append(this.cartPrice).append(this.addlow).append(this.cartadd).append(this.cartInput).append(this.cartlow).append($("<hr style='position:absolute;margin:auto;margin-top:85px;width:100%'/>"));
parseInt(this.cartInput.val())>parseInt(c.quantity)&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1);this.setOneShop();this.initEvent()},initHtml:function(b,c){this.mobileShop=b;this.product=c;this.addlow=$("<div></div>");this.singleShop=$("<div></div>");this.checkBox=$("<input type='checkbox' name='checkbox1' style='position:relative;top:46px;' />");this.checkBox[0].product=c;this.shoppingImage=$("<img/>");this.cartNot=$("<span style='position:absolute;color:red;font-size:10px;width:120px;right:0;height:10px'>Not enough in stock</span>");
$.browser.safari&&$.system.name==$.system.IOS?(this.cartInput=$("<input type='text' value='"+this.product.number+"' style='width:36px;margin-top:70px;text-align:center;height:21px;outline:medium;right:26px;position:absolute;border:1px solid rgb(255,255,255)'/>"),this.cartInput.allowNumberOnly(),this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:70px;position:absolute;background-color:#DDDDDA' />"),this.cartlow=$("<img src='"+uiBaseURL+
"cartLow.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:1px;position:absolute;background-color:#DDDDDA'/>")):(this.cartInput=$("<input type='text' value='"+this.product.number+"' style='width:36px;margin-top:70px;text-align:center;height:21px;outline:medium;right:31px;position:absolute;border:1px solid rgb(255,255,255)'/>"),this.cartInput.allowNumberOnly(),this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:70px;position:absolute;background-color:#DDDDDA' />"),
this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;margin-top:70px;width:25px ;height:25px;right:5px;position:absolute;background-color:#DDDDDA'/>"));this.carttitle=$("<span style='width:220px;height:45px;position:absolute;overflow:auto;margin-top: 20px;left:115px;font-family:Tahoma;font-size:12px'></span>");this.cartPrice=$("<span></span>")},initEvent:function(){this.checkBox.bind("change",function(){(function(){this.mobileShop.refreshTotalValue();toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}).delay(this,
20)}.bind(this));this.cartInput.bind("blur",function(){var b=parseInt(this.cartInput.val());b>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0);this.product.number=b;this.mobileShop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting);toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}.bind(this));
this.cartadd.bind(_event._up,function(){var b=parseInt(this.cartInput.val()),b=b+1;this.cartInput.val(b);this.product.number=b;this.mobileShop.refreshTotalValue();b>this.product.quantity?(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0;ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting);toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue())}.bind(this));this.cartlow.bind(_event._up,
function(){var b=parseInt(this.cartInput.val()),b=1>b-1?1:b-1;0>b||(this.cartInput.val(b),this.product.number=b,this.mobileShop.refreshTotalValue(),this.mobileShop.refreshInputValue(),b<=this.product.quantity?(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(255,255,255)"}),this.canCheckout=!0):this.canCheckout=!1,ShoppingCartUtil.saveProducts(this.mobileShop.shoppingItems,this.mobileShop.setting),toolBar.getButton("ShoppingCart").setNumber(this.mobileShop.refreshInputValue()))}.bind(this))},
isSelected:function(){return this.checkBox[0].checked},setOneShop:function(){this.cartPrice.css({position:"absolute",width:"170px",height:"20px",lineHeight:"20px","font-size":"15px",color:"rgb(250,11,11)","margin-top":"75px","font-family":"Tahoma",left:"115px"});this.addlow.css({width:"115px",height:"20px",position:"absolute",right:"0px","margin-top":"28px"});this.shoppingImage.css({position:"absolute",width:"70px",height:"70px","margin-top":"20px","margin-left":"10px"});this.singleShop.css({width:windowWidth+
"px",height:"120px"})}}).extend(ShoppingCartItem);global.shoppingCountHTML=$("<span class='shoppingCount'>0</span>");
Class("PCProductDetailsPanel",{Package:"PageItem",create:function(b,c,d){this.advancedObj=new PageItem.ShoppingAdvancedProperty(b);this._super(b,c,d);this.shoppingCart||(this.shoppingCart=new PageItem.PCShoppingCartPanel(b,c),window.shoppingCart=this.shoppingCart);this.shoppingCart.onClose=this.shoppingCartClose.bind(this);shoppingCountHTML.html(this.shoppingCart.refreshInputValue());this.canCheckout=!0},parseConfig:function(b){return{annotype:b.annotype,x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,bgColor:b.bgColor,bgAlpha:b.bgAlpha,cartType:b.cartType,imgUrl:b.imgUrl,titleStr:b.titleStr,url:b.url,languageLayout:b.languageLayout,Detailed:b.Detailed}},destroy:function(){this.container.empty();this.container.remove()},initUI:function(){this.initHtml();this.setShopCss();tmpContainer.append(this.bgImage);tmpContainer.append(this.container);this.container.append(this.content);this.container.append(this.closeButton);this.content.append(this.imgBox);this.imgBox.append(this.shopImg);
this.contentText.append(this.shopTitle);this.contentText.append(this.shopPrice);this.initAdvanced();this.contentText.append(this.number);this.inputBox.append(this.add);this.inputBox.append(this.input);this.inputBox.append(this.low);this.number.append(this.inputBox);this.contentText.append(this.allQuantity);this.contentText.append(this.time);this.contentText.append(this.about);this.contentText.append(this.addToCart);this.content.append(this.contentText);this.shopTitle.html(this.config.Detailed.title);
this.shopTitle.text(this.shopTitle.text().overflow(14));this.shopTitle.attr("title",this.config.Detailed.title);this.mailto=$("<a></a>");this.mailto.append(this.checkout);this.contentText.append(this.mailto);this.contentText.append(this.close);!1===this.setting.shoppingCartOptinon.showPrice&&this.shopPrice.css({display:"none"});!1===this.setting.shoppingCartOptinon.showTime&&this.time.css({display:"none"});this.initImgs();$(window).resize(this.onResize.bind(this));this.hide()},initHtml:function(){"right"==
this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});(this.imgs=this.config.Detailed.imgs)&&!this.imgs[0]&&(this.imgs=[this.imgs.img]);this.imgBox=$("<div></div>");this.shopImg=$("<img/>");this.background=$("<div></div>");this.container=$("<div id='ShoppingCart' ></div>");this.closeButton=$("<div></div>");this.content=$("<div></div>");this.contentText=$("<div></div>");this.innerContent=$("<div></div>");this.shopTitle=$("<div></div>");this.allQuantity=$("<div> "+this.config.Detailed.quantity+
" In Stock</div>");this.bgImage=$("<div style='display:none'></div>");this.alignCss?(this.shopPrice=$("<div>"+this.config.Detailed.sing+this.config.Detailed.proce+" : Price</div>"),this.time=$("<div>"+this.config.Detailed.time+" day(s) : Delivery time</div>"),bookConfig.isFlipPdf&&(this.shopPrice.html(this.config.Detailed.sing+this.config.Detailed.proce+" : \u4ef7\u683c"),this.time.html(this.config.Detailed.time+" \u5929\u6570(s) : \u4ea4\u8d27\u65f6\u95f4"))):(this.shopPrice=$("<div>Price :  "+this.config.Detailed.sing+
this.config.Detailed.proce+"</div>"),this.time=$("<div>Delivery time : "+this.config.Detailed.time+" day(s)</div>"),bookConfig.isFlipPdf&&(this.shopPrice.html("\u4ef7\u683c :  "+this.config.Detailed.sing+this.config.Detailed.proce),this.time.html("\u4ea4\u8d27\u65f6\u95f4 : "+this.config.Detailed.time+" \u5929\u6570(s)")));this.about=$("<div>"+this.config.Detailed.about+"</div>");this.number=$("<div style='position:relative;'>Quantity : </div>");this.addToCart=$("<span>Add to cart</span>");this.checkout=
$("<div>"+this.config.Detailed.checkOutBtnName+"</div>");this.close=$("<span>"+this.config.Detailed.closeBtnName+"</span>");this.inputBox=$("<div class='inputBox' style='position:absolute;top:0;left:60px;'></div>");this.input=$("<input type='text' value='1' style='float:left;width : 70px;height:14px;line-height:14px;outline:medium;background:transparent;border:1px solid rgb(150,150,150);text-align:center'/>");this.input.allowNumberOnly();this.add=$("<img src='"+uiBaseURL+"cartAdd.png' style='float:left;cursor:pointer;width:18px ;height:18px;background:#ddd;' />");
this.low=$("<img src='"+uiBaseURL+"cartLow.png' style='float:left;cursor:pointer;width:18px ;height:18px;background:#ddd;'/>");this.not=$("<span style='position:absolute;color:red;font-size:10px;width:115px;height:16px;right:0'>Not enough in stock</span>");bookConfig.isFlipPdf&&this.initFlipPdfCase()},initFlipPdfCase:function(){this.allQuantity.html(this.config.Detailed.quantity+" \u6709\u8d27");this.number.html("\u6570\u91cf: ");this.addToCart.html("\u6dfb\u52a0\u5230\u8d2d\u7269\u8f66")},initAdvanced:function(){if(""!=
this.advancedObj.advanced)for(var b=0,c=0;c<this.advancedObj.advanceLength;c++)b+=30,"boolean"==this.advancedObj.advanced[c].type&&this.contentText.append(this.advancedObj.shopAdvanced1),"text"==this.advancedObj.advanced[c].type&&this.contentText.append(this.advancedObj.shopAdvanced2),"list"==this.advancedObj.advanced[c].type&&(b+=20*parseInt(this.advancedObj.advanced[c].value.split(";").length/5),this.contentText.append(this.advancedObj.shopAdvanced3)),this.about.css({width:"300px",height:150-b+
"px","margin-top":"10px","font-size":"10px","font-family":"Arial","overflow-x":"hidden"})},initImgs:function(){if(this.imgs&&this.imgs.length){this.imageItems=[];for(var b=0;b<this.imgs.length;b++)this.imageItems.push(this.imgs[b]),bookConfig.isFlipPdf&&this.imageItems[b]&&(this.imageItems[b].startsWith("./")?this.imageItems[b]="."+this.imageItems[b]:this.imageItems[b].isUrl()||(this.imageItems[b]="../"+this.imageItems[b]));1<this.imgs.length&&(this.imageURL=this.imageItems[0],this.initButton());
this.setImgs(this.imageItems[0])}},setImgs:function(b){this.shopImg.attr("src",b)},initButton:function(){this.leftButton=$('<img src="'+uiBaseURL+'photo_prev.png" style="position:absolute;z-index:1000;cursor:pointer;opacity:0.8;"></img>');this.rightButton=$('<img src="'+uiBaseURL+'photo_next.png" style="position:absolute;z-index:1000;cursor:pointer;opacity:0.8;"></img>');this.setButtonPosition();this.currentIndex=0;var b=this.imageItems.length;this.leftButton.bind(_event._click,function(){this.busy=
!0;0==this.currentIndex&&(this.currentIndex+=b);this.currentIndex=(this.currentIndex-1)%b;this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL)}.bind(this));this.rightButton.bind(_event._click,function(){this.busy=!0;this.currentIndex=(this.currentIndex+1)%b;this.imageURL=this.imageItems[this.currentIndex];this.setImgs(this.imageURL)}.bind(this));this.imgBox.append(this.leftButton).append(this.rightButton)},setButtonPosition:function(){this.leftButton.css({left:"17px",top:"143.5px"});
this.rightButton.css({right:"17px",top:"143.5px"})},setShopCss:function(){this.bgImage.css({position:"absolute",width:windowWidth+"px",height:windowHeight+"px",opacity:"0.5",top:0,"background-color":"black","z-index":"100"});var b="translate(0, "+-((windowHeight-430)/2+430)+"px)";this.container.css({position:"absolute",width:"730px",height:"430px",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",transform:b,"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b,"z-index":"2000"});
this.content.css({position:"absolute",width:"700",height:"400",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","background-color":"white","z-index":"2000"});this.closeButton.css({position:"absolute",width:"20px",height:"20px",right:"0","background-image":"url("+uiBaseURL+"closecat.png)","background-repeat":"no-repeat",cursor:"pointer"});this.imgBox.css({position:"absolute",width:"330px",height:"330px",margin:"auto",left:"20px",top:"0",bottom:"20px"});this.shopImg.css({"max-width":"300px","max-height":"300px",
position:"absolute",margin:"auto",left:"0",top:"0",bottom:"0",right:"0","-moz-box-shadow":"0 0 5px #bbb","-o-box-shadow":"0 0 5px #bbb","-webkit-box-shadow":"0 0 5px #bbb","box-shadow":"0 0 5px #bbb"});this.contentText.css({position:"absolute",width:"304px",height:"355px",margin:"auto","margin-top":"30px",right:"20px","overflow-x":"hidden","-webkit-user-select":"initial","-moz-user-select":"initial","-ms-user-select":"initial","user-select":"initial"});this.shopTitle.css({height:"30px","font-size":"30px",
color:"black","font-family":"Arial"});this.about.css({height:"148px","margin-top":"10px","font-size":"10px","font-family":"Arial","overflow-x":"hidden"});this.number.css({height:"20px","line-height":"17px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Arial"});this.time.css({height:"14px","margin-top":"10px",color:"black","font-size":"10px","font-family":"Arial"});this.allQuantity.css({height:"14px","margin-top":"8px","font-size":"10px",color:Color(44849).toString(),"font-family":"Arial"});
this.shopPrice.css({height:"18px","margin-top":"10px","font-size":"16px",color:Color(12845056).toString(),"font-family":"Arial"});this.addToCart.css({background:"rgb(80, 80, 80)","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial","float":"left",padding:"0 5px","margin-top":"25px","margin-left":"0",cursor:"pointer",color:"white"});this.checkout.css({background:"rgb(80, 80, 80)","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial","float":"left",
padding:"0 5px",margin:"25px 10px 0",cursor:"pointer",color:"white","text-decoration":"none"});this.close.css({background:"rgb(80, 80, 80)","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial","float":"left",padding:"0 5px","margin-top":"25px",cursor:"pointer",color:"white"});this.alignCss&&(this.contentText.css(this.alignCss),this.inputBox.css({left:"auto",right:"60px"}),this.input.css({"float":"right"}),this.add.css({"float":"right"}),this.low.css({"float":"right"}),
this.checkout.css({left:"158px",right:"auto"}),this.close.css({left:"100px",right:"auto"}))},initEvent:function(){this.input.bind("blur",function(){parseInt(this.input.val())>this.config.Detailed.quantity?(this.number.append(this.not),this.input.css({"border-color":"red"}),this.canCheckout=!1):(this.not.remove(),this.input.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0)}.bind(this));this.add.bind(_event._click,function(){var b=this.input.val(),b=parseInt(b)+1;this.input.val(b);b>this.config.Detailed.quantity?
(this.number.append(this.not),this.input.css({"border-color":"red"}),this.canCheckout=!1):this.canCheckout=!0;ShoppingCartUtil.saveProducts(this.shoppingItems,this.setting)}.bind(this));this.low.bind(_event._click,function(){var b=parseInt(this.input.val());0!=b&&(b=1>b-1?1:b-1,b<=this.config.Detailed.quantity&&(this.not.remove(),this.input.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0),this.input.val(b))}.bind(this));this.mailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&
ga("send","event","CheckOut","click","doCheckOut");this.doCheckout()}.bind(this));this.bgImage.bind(_event._click,function(){this.hide();this.shoppingCart.cart.css({display:"none"})}.bind(this));this.closeButton.bind(_event._click,this.hide.bind(this));this.close.bind(_event._click,this.hide.bind(this));this.addToCart.bind(_event._click,function(){bookContainer.append(this.cart);this.skipHeid();this.shoppingCart.showCart();var b={};b.image=this.imageItems&&1>=this.imageItems.length?this.imageItems[0]:
this.imageURL;b.advancedName=this.advancedObj.setShoppingCartAdvanced().toString();b.title=this.config.Detailed.title;b.sing=this.config.Detailed.sing;b.price=parseInt(this.config.Detailed.proce);b.number=parseInt(this.input.val());b.quantity=parseInt(this.config.Detailed.quantity);this.shoppingCart.addProduct(b);shoppingCountHTML.html(this.shoppingCart.refreshInputValue())}.bind(this))},shoppingCartClose:function(){this.bgImage.css({display:"none"})},onResize:function(){var b=this.container.css("width"),
c=this.container.css("height");this.height=parseInt(c.replace("px",""));this.width=parseInt(b.replace("px",""));this.container.css({"margin-left":(windowWidth-this.width)/2+"px","margin-top":(windowHeight-this.height)/2+"px"});this.bgImage.css({width:windowWidth+"px",height:windowHeight+"px"})},skipHeid:function(){var b=this.container.css("height");this.height=parseInt(b.replace("px",""));b="translate(0, "+-((windowHeight-this.height)/2+this.height)+"px)";b={transform:b,"-webkit-transform":b,"-moz-transform":b,
"-o-transform":b,"-ms-transform":b};this.bgImage.css({display:"none"});animateOnce(this.container,b,0.5,null,"","ease-in-out")},hide:function(){if(!this.running){this.running=!0;var b=this.container.css("height");this.height=parseInt(b.replace("px",""));b="translate(0, "+-((windowHeight-this.height)/2+this.height)+"px)";b={transform:b,"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b};(function(){this.container.css({display:"none"});this.content.css("display","none");this.bgImage.css({display:"none"});
this.running=!1}).delay(this,500);animateOnce(this.container,b,0.5,null,"","ease-in-out")}},show:function(){this.running||(this.running=!0,this.bgImage.css({display:"block"}),this.content.css("display","block"),this.container.css({display:"block"}),animateOnce.delay(this,10,[this.container,{transform:"translate(0px,0px)","-webkit-transform":"translate(0px,0px)","-moz-transform":"translate(0px,0px)","-o-transform":"translate(0px,0px)","-ms-transform":"translate(0px,0px)"},0.5,function(){this.running=
!1}.bind(this),"","ease-in-out"]))}}).extend(PageItem.ProductDetailsPanel);
Class("PCShoppingCartPanel",{Package:"PageItem",create:function(b,c){this.config=b;this.setting=c;this.cart=$("<div></div>");this.cartTitles=$("<span>Shopping Cart</span>");this.cartprices=$("<span style='position:absolute;font-size:12px;font-weight:bold;margin-top:50px;right:80px;font-family:Tahoma;color:black'>Price</span>");this.cartqu=$("<span style='position:absolute;font-size:12px;font-weight:bold;margin-top:50px;right:180px;font-family:Tahoma;color:black'>Quantity</span>");this.shopping=$("<div id='shopPrice'></div>");
this.item=$("<span class=itemss style='position: absolute;bottom: 40px;left: 10px;font-size:12px;font-family:Tahoma;font-weight:bold'></span>");this.total=$("<span></span>");this.cartCheckout=$("<span>Checkout</span>");this.cartClose=$("<span>Close</span>");this.cartAllDelete=$("<span>DeleteAll</span>");this.deleteBox=$('<div>Delete All Goods? <br/><span class="yes">Yes</span><span class="no">No</span></div>');bookConfig.isFlipPdf&&this.initFlipPdfCase();this.cartMailto=$("<a></a>");this.cart.append(this.cartTitles);
this.cart.append(this.cartqu);this.cart.append(this.cartprices);this.cart.append(this.shopping);this.cart.append(this.item);this.cart.append(this.total);this.bgImage=$("<div></div>");this.cartMailto.append(this.cartCheckout);this.cart.append(this.cartAllDelete);this.cart.append(this.cartMailto);this.cart.append(this.cartClose);this.cart.append(this.deleteBox);tmpContainer.append(this.bgImage);tmpContainer.append(this.cart);this.promptBox=$("<div></div>");this.setCartCss();this.hideCart();this.initEvent();
this.canCheckout=!1},initFlipPdfCase:function(){this.cartTitles=$("<span>\u8d2d\u7269\u8f66</span>");this.cartprices.html("\u4ef7\u683c");this.cartqu.html("\u6570\u91cf");this.cartCheckout=$("<span>\u4ed8\u6b3e</span>");this.cartClose=$("<span>\u5173\u95ed</span>");this.cartAllDelete=$("<span>\u5220\u9664\u6240\u6709</span>");this.deleteBox=$('<div>\u786e\u5b9a\u5220\u9664\u6240\u6709\u5546\u54c1\u5417? <br/><span class="yes">\u662f</span><span class="no">\u5426</span></div>')},initEvent:function(){this.bgImage.bind(_event._end,
function(){this.cart.css({display:"none"});this.bgImage.css({display:"none"})}.bind(this));this.deleteBox.find(".yes").bind(_event._click,function(){this.deleteAll();this.deleteBox.hide(300)}.bind(this));this.deleteBox.find(".no").bind(_event._click,function(){this.deleteBox.hide(300)}.bind(this));this.cartAllDelete.bind(_event._click,function(){this.deleteBox.show(300)}.bind(this));this.cartMailto.bind(_event._click,function(){bookConfig.googleAnalyticsID&&ga("send","event","ShoppingCart","click",
"CheckOutAll");this.doCheckout()}.bind(this));this.cartClose.bind(_event._click,function(){this.hideCart();if(this.onClose)this.onClose();ShoppingCartUtil.saveProducts(this.shoppingItems,this.setting)}.bind(this));$(window).resize(function(){this.bgImage.css({width:windowWidth+"px",height:windowHeight+"px"})}.bind(this))},deleteAll:function(){for(ShoppingCartUtil.setProductsToStorage([]);0<this.shoppingItems.length;)this.removeItem(this.shoppingItems[0]),this.refreshTotalValue()},addProduct:function(b){b=
ShoppingCartUtil.addProduct(b);this.shopping.empty();this.shoppingItems=[];for(var c=0;c<b.length;c++){var d=new PageItem.PCShoppingCartItem(this,b[c]);this.shopping.append(d.singleShop);this.shoppingItems.push(d)}this.refreshTotalValue();this.refreshInputValue()},showCart:function(){this.cart.css("display","block");this.bgImage.css("display","block")},hideCart:function(){this.cart.css("display","none");this.bgImage.css("display","none")},setCartCss:function(){this.deleteBox.css({"font-family":"Tahoma",
display:"none",position:"absolute",width:"300px","padding-top":"20px","text-align":"center",height:"140px",margin:"auto",left:"50%",top:"50%","box-shadow":"0 0 5px #666",background:"#eee",transform:"translate(-50%,-50%)","-webkit-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-o-transform":"translate(-50%,-50%)","-ms-transform":"translate(-50%,-50%)","z-index":"3000"});this.deleteBox.find(".yes").css({position:"absolute",color:"#fff",background:"#33cc33",left:"80px",bottom:"35px",
width:"50px",height:"25px","line-height":"25px",cursor:"pointer"});this.deleteBox.find(".no").css({position:"absolute",color:"#fff",background:"rgb(80, 80, 80)",right:"80px",bottom:"35px",width:"50px",height:"25px","line-height":"25px",cursor:"pointer"});this.bgImage.css({position:"absolute",width:windowWidth+"px",height:windowHeight+"px",opacity:"0.5",top:0,"background-color":"black","z-index":"100"});this.shopping.css({width:"515px",height:"190px",position:"absolute",margin:"auto",top:"10px",left:"0px",
bottom:"0px",right:"0px","overflow-x":"hidden"});this.total.css({position:"absolute",bottom:"40px",right:"20px","font-size":"12px","font-family":"Tahoma","font-weight":"bold",color:"red"});this.cartClose.css({position:"absolute",background:"rgb(80, 80, 80)",width:"40px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"20px",cursor:"pointer",color:"white"});this.cartAllDelete.css({position:"absolute",background:"rgb(80, 80, 80)",color:"white",
width:"60px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",left:"10px",cursor:"pointer"});this.cartCheckout.css({position:"absolute",background:"rgb(80, 80, 80)",width:"60px","text-align":"center","line-height":"2.0","font-size":"10px","font-family":"Arial",bottom:"10px",right:"70px",cursor:"pointer",color:"white","text-decoration":"none"});this.cartTitles.css({position:"absolute",padding:"0 10px",width:"490px","border-bottom":"1px solid white",height:"40px",
"line-height":"40px","font-size":"14px","font-family":"Tahoma",color:"white","background-color":"rgb(152,152,152)"});this.cart.css({position:"absolute",border:"1px solid white","line-height":"2.5",margin:"auto",left:"0",top:"0",bottom:"0",right:"0",width:"500px",height:"350px","background-color":"rgb(218,218,218)","overflow-x":"hidden","z-index":"3000"});"right"==this.config.languageLayout&&this.cartTitles.css({direction:"rtl","text-align":"right"})}}).extend(PageItem.ShoppingCartPanel);
Class("PCShoppingCartItem",{Package:"PageItem",create:function(b,c){this.initHtml(b,c);!1===pageEditor.setting.shoppingCartOptinon.showPrice&&this.cartPrice.css({display:"none"});null==this.product.advancedName||""==this.product.advancedName?(this.carttitle.text(this.carttitle.text().overflow(16)),this.carttitle.text(this.product.title),this.carttitle.attr("title",this.product.title)):(25<this.product.advancedName.length&&this.carttitle.attr("title",this.product.title+"("+this.product.advancedName+
")"),this.carttitle.html(this.product.title+"("+this.product.advancedName+")"));this.cartPrice.text(this.product.sing+forceFloat(this.product.price));this.singleShop.append($("<hr style='position:absolute; margin-left:10px;margin-top:85px;width:475px'/>"));parseInt(this.cartInput.val())>parseInt(c.quantity)&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}),this.shop.canCheckout=!1);this.initEvent();this.setCartCSS()},initHtml:function(b,c){this.shop=b;this.product=c;this.cartPrice=
$("<span></span>");this.addlow=$("<div></div>");this.singleShop=$("<div style='width:480px;height:80px'></div>");this.cartInput=$("<input id='cartinput' type='text' value='"+this.product.number+"'/>");this.cartInput.allowNumberOnly();this.shoppingImage=$("<img/>");this.carttitle=$("<span style='width:165px;line-height:35px;height:35px;position:absolute;margin-top: 28px;left:80px;overflow:hidden;font-family:Tahoma;font-size:12px'></span>");this.dustbin=$("<img src='"+uiBaseURL+"cartDelete.png' style='cursor:pointer;position:absolute;right: 25px;margin-top:35px'/>");
this.cartadd=$("<img src='"+uiBaseURL+"cartAdd.png' style='cursor:pointer;width:18px ;height:18px;position:absolute;border:1px solid #bbb;left:25px;background:#eee;' />");this.cartlow=$("<img src='"+uiBaseURL+"cartLow.png' style='cursor:pointer;width:18px ;height:18px;margin-left:97px;position:absolute;border:1px solid #bbb;background:#eee;'/>");this.cartNot=$("<span style='position:absolute;color:red;font-size:10px;width:126px;height:20px;margin-top:15px;left:12px'>Not enough in stock</span>");this.singleShop.append(this.shoppingImage);
this.singleShop.append(this.carttitle);this.singleShop.append(this.addlow);this.singleShop.append(this.cartPrice);this.singleShop.append(this.dustbin);this.addlow.append(this.cartadd);this.addlow.append(this.cartlow);this.addlow.append(this.cartInput);this.setImg(this.product.image)},setImg:function(b){this.shoppingImage.attr("src",b)},initEvent:function(){this.cartInput.bind("keyup",function(){var b=parseInt(this.cartInput.val());""==b&&(b=this.cartInput.val());b>this.product.quantity?(this.addlow.append(this.cartNot),
this.cartInput.css({"border-color":"red"}),this.canCheckout=!1):(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(150,150,150)"}),this.canCheckout=!0);this.product.number=b;this.shop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting);shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.dustbin.bind(_event._click,function(){this.shop.removeItem(this);this.shop.refreshTotalValue();shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));
this.cartadd.bind(_event._click,function(){var b=this.cartInput.val(),b=parseInt(b)+1;this.cartInput.val(b);this.product.number=b;b>this.product.quantity&&(this.addlow.append(this.cartNot),this.cartInput.css({"border-color":"red"}));this.shop.refreshTotalValue();ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting);shoppingCountHTML.html(this.shop.refreshInputValue())}.bind(this));this.cartlow.bind(_event._click,function(){var b=this.cartInput.val();0!=parseInt(b)&&(b=1>parseInt(b)-
1?1:parseInt(b)-1,this.cartInput.val(b),this.product.number=b,b<=this.product.quantity&&(this.cartNot.remove(),this.cartInput.css({"border-color":"rgb(150,150,150)"})),this.shop.refreshTotalValue(),ShoppingCartUtil.saveProducts(this.shop.shoppingItems,this.shop.setting),shoppingCountHTML.html(this.shop.refreshInputValue()))}.bind(this))},setCartCSS:function(){this.cartPrice.css({position:"absolute",width:"70px",height:"20px","font-size":"12px",color:"black","margin-top":"30px","font-family":"Tahoma",
right:"65px"});this.cartInput.css({"text-align":"center",width:"40px",height:"16px",outline:"medium","margin-left":"50px",position:"absolute",background:"#fff",border:"1px solid rgb(150,150,150)"});this.addlow.css({width:"120px",height:"40px",right:"170px",position:"absolute","margin-top":"35px"});this.shoppingImage.css({position:"absolute",width:"52px",height:"35px","margin-top":"28px",left:"10px","-moz-box-shadow":"0 0 5px #fff","-o-box-shadow":"0 0 5px #fff","-webkit-box-shadow":"0 0 5px #fff",
"box-shadow":"0 0 5px #fff"})}}).extend(PageItem.ShoppingCartItem);
Class("Pentagon",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.pentagon=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.pentagon.css({position:"absolute",
opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.pentagon,this.config.rotation);this.parent.append(this.pentagon);this.draw();this.initEvent();this.imageReflection(this.pentagon)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,rotation:b.location.rotation,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,
reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(){var b=this.pentagon[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height);this.width-=this.config.borderWidth;this.height-=
this.config.borderWidth;c.beginPath();c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;c.moveTo(this.config.borderWidth,3*this.height/8);c.lineTo(this.width/6,this.height);c.lineTo(5*this.width/6,this.height);c.lineTo(this.width,3*this.height/8);c.lineTo(this.width/2,this.config.borderWidth);this.config.sh&&this.setShapeShadow(c);if("gradient"==this.config.fillStyle){var d=this.config.angle*
Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),b=c.createLinearGradient(g,f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();0!=this.config.borderWidth&&c.stroke()},initEvent:function(){this.linkURL="";null!=
this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.pentagon)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.pentagon[0].width=this.width;this.pentagon[0].height=this.height;this.draw();
this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.pentagon.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.pentagon.one(b,function(){this.pentagon.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.pentagon.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Dovetailed",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.pageHeights=this.config.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.dovetailed=$("<canvas width='"+
this.width+"' height='"+this.height+"'></canvas>");this.dovetailed.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.dovetailed,this.config.rotation);this.parent.append(this.dovetailed);this.draw(this.pageWidth);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.dovetailed)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,pageWidth:b.location.pageWidth,
pageHeight:b.location.pageHeight,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,arrowWidth:b.arrowWidth,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,
sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(b){var c=this.dovetailed[0],d=c.getContext("2d");this.config.borderWidth=Number(this.config.borderWidth);d.clearRect(0,0,c.width,c.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.arrowWidth=this.config.arrowWidth/this.config.pageWidth*b;this.arrowWidth>2*this.width/3&&(this.arrowWidth=this.width-2*this.width/3);
0==this.arrowWidth&&(this.arrowWidth=this.width-10,this.arrowWidth=10);this.dovetailWidth=this.width-this.arrowWidth;d.beginPath();d.lineCap="round";d.lineJoin="round";d.strokeStyle=Color(this.config.borderColor).toString();d.lineWidth=this.config.borderWidth;d.globalAlpha=this.config.spalpha;d.moveTo(this.config.borderWidth,this.config.borderWidth);d.lineTo(this.arrowWidth,(this.height+this.config.borderWidth)/2);d.lineTo(this.config.borderWidth,this.height);d.lineTo(this.dovetailWidth,this.height);
d.lineTo(this.width,(this.height+this.config.borderWidth)/2);d.lineTo(this.dovetailWidth,this.config.borderWidth);this.config.sh&&this.setShapeShadow(d);if("gradient"==this.config.fillStyle){c=this.config.angle*Math.PI/180;b=this.width/2+this.width/2*Math.cos(c);var c=this.height/2+this.height/2*Math.sin(c),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f);b=d.createLinearGradient(g,f,b,c);b.addColorStop(0,this.colorA);
b.addColorStop(1,this.colorB);d.fillStyle=b;d.fill()}"Pure"==this.config.fillStyle&&(d.fillStyle=this.color,d.fill());d.closePath();0!=this.config.borderWidth&&d.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.dovetailed)},
onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.dovetailed[0].width=this.width;this.dovetailed[0].height=this.height;this.draw(this.pageWidth);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.dovetailed.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});
this.dovetailed.one(b,function(){this.dovetailed.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.dovetailed.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Parallelogram",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.parallelogram=$("<canvas width='"+this.width+"' height='"+this.height+"' id='prismatic'></canvas>");
this.parallelogram.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.parallelogram,this.config.rotation);this.parent.append(this.parallelogram);this.draw();this.initEvent();this.imageReflection(this.parallelogram)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,rotation:b.location.rotation,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,
angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(){var b=this.parallelogram[0],c=b.getContext("2d");c.clearRect(0,
0,b.width,b.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;c.beginPath();c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;c.moveTo(this.width/4,this.config.borderWidth);c.lineTo(this.config.borderWidth,this.height);c.lineTo(3*this.width/4+2,this.height);c.lineTo(this.width,this.config.borderWidth);parseBool(this.config.sh)&&this.setShapeShadow(c);if("gradient"==
this.config.fillStyle){var d=this.config.angle*Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),b=c.createLinearGradient(g,f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();0!=this.config.borderWidth&&c.stroke()},
initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.parallelogram)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.parallelogram[0].width=this.width;
this.parallelogram[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.parallelogram.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.parallelogram.one(b,function(){this.parallelogram.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.parallelogram.css({left:this.x+
"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Hexagon",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.hexagon=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.hexagon.css({position:"absolute",
opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.hexagon,this.config.rotation);this.parent.append(this.hexagon);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.hexagon)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,
reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.actionm,animation:b.animation}},draw:function(){var b=this.hexagon[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height);this.width-=
this.config.borderWidth;this.height-=this.config.borderWidth;c.beginPath();c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;c.moveTo(this.width/4,this.config.borderWidth);c.lineTo(this.config.borderWidth,this.height/2);c.lineTo(this.width/4,this.height);c.lineTo(3*this.width/4,this.height);c.lineTo(this.width,this.height/2);c.lineTo(3*this.width/4,this.config.borderWidth);this.config.sh&&
this.setShapeShadow(c);if("gradient"==this.config.fillStyle){var d=this.config.angle*Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),b=c.createLinearGradient(g,f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();
0!=this.config.borderWidth&&c.stroke()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.hexagon[0].width=this.width;this.hexagon[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.hexagon.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+
" "+c.direction});this.hexagon.one(b,function(){this.hexagon.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.hexagon.css({left:this.x+"px",top:this.y+"px"})},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL=
"http://"+this.linkURL));this.addActionEvent(this.hexagon)}}).extend(PageItem.Item);
Class("FlowChart",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.flowChart=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.flowChart.css({opacity:this.config.alpha,
position:"absolute",left:this.x+"px",top:this.y+"px"});this.setRotation(this.flowChart,this.config.rotation);this.parent.append(this.flowChart);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.flowChart)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,
reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(){var b=this.flowChart[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height);this.width-=
this.config.borderWidth;this.height-=this.config.borderWidth;c.beginPath();c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;c.moveTo(this.config.borderWidth,this.config.borderWidth);c.lineTo(this.config.borderWidth,this.height);c.lineTo(this.width,this.height);c.lineTo(this.width,this.config.borderWidth);parseBool(this.config.sh)&&this.setShapeShadow(c);if("gradient"==this.config.fillStyle){var d=
this.config.angle*Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),b=c.createLinearGradient(g,f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();c.stroke();c.beginPath();c.moveTo(this.width/8+this.config.borderWidth,
this.config.borderWidth);c.lineTo(this.width/8+this.config.borderWidth,this.height);c.closePath();c.stroke();c.beginPath();c.moveTo(7*this.width/8,this.config.borderWidth);c.lineTo(7*this.width/8,this.height);c.closePath();0!=this.config.borderWidth&&c.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&
(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.flowChart)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.flowChart[0].width=this.width;this.flowChart[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.flowChart.css({animation:c.name+" "+c.duration+
"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.flowChart.one(b,function(){this.flowChart.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.flowChart.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Cylinder",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.cylinder=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.cylinder.css({position:"absolute",
opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.cylinder,this.config.rotation);this.parent.append(this.cylinder);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.cylinder)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,
reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,cylinderRadius:b.cylinderRadius,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},fillColor:function(b){if("gradient"==this.config.fillStyle){var c=this.config.angle*
Math.PI/180,d=this.width/2+this.width/2*Math.cos(c),c=this.height/2+this.height/2*Math.sin(c),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),d=b.createLinearGradient(g,f,d,c);d.addColorStop(0,this.colorA);d.addColorStop(1,this.colorB);b.fillStyle=d;this.config.sh&&this.setShapeShadow(b);b.fill()}"Pure"==this.config.fillStyle&&(b.fillStyle=this.color,this.config.sh&&this.setShapeShadow(b),b.fill())},draw:function(){var b=
this.cylinder[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height);this.cylinderRadius=this.config.cylinderRadius;c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;0==this.cylinderRadius&&(this.cylinderRadius=10);this.cylinderRadius>this.height/2&&(this.cylinderRadius=this.height/2);var b=this.width/2-this.config.borderWidth,d=this.cylinderRadius/2-this.config.borderWidth,f=this.width/
2,g=this.cylinderRadius/2,h=b>d?b:d,k=b/h,d=d/h;c.save();c.beginPath();c.scale(k,d);c.moveTo((f+b)/k,g/d);c.arc(f/k,g/d,h,0,2*Math.PI);c.restore();this.fillColor(c);"none"!=this.config.fillStyle&&c.fillRect(this.config.borderWidth,this.cylinderRadius/2,this.width-2*this.config.borderWidth,this.height-this.cylinderRadius);c.closePath();c.stroke();c.moveTo(this.config.borderWidth,this.cylinderRadius/2);c.lineTo(this.config.borderWidth,this.height-this.cylinderRadius/2);c.moveTo(this.width-this.config.borderWidth,
this.cylinderRadius/2);c.lineTo(this.width-this.config.borderWidth,this.height-this.cylinderRadius/2);c.save();c.scale(k,d);c.moveTo((f+b)/k,(this.height-g)/d);c.arc(f/k,(this.height-g)/d,h,0,Math.PI);c.restore();this.fillColor(c);c.stroke();c.closePath()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&
(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.cylinder)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.cylinder[0].width=this.width;this.cylinder[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.cylinder.css({animation:c.name+" "+c.duration+
"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.cylinder.one(b,function(){this.cylinder.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cylinder.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Trapezoid",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.trapezoid=$("<canvas width='"+this.width+"' height='"+this.height+
"'></canvas>");this.trapezoid.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.trapezoid,this.config.rotation);this.parent.append(this.trapezoid);this.draw(this.pageWidth);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.trapezoid)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,pageWidth:b.location.pageWidth,pageHeight:b.location.pageHeight,
alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,bottomLength:b.bottomLength,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,
action:b.action,animation:b.animation}},draw:function(b){var c=this.trapezoid[0],d=c.getContext("2d");d.clearRect(0,0,c.width,c.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.bottomLength=Number(this.config.bottomLength)/this.config.pageWidth*b;this.bottomLength=0==this.bottomLength||this.config.bottomLength>2*this.width/3?this.width-2*this.width/3:this.bottomLength;d.beginPath();d.lineCap=
"round";d.lineJoin="round";d.strokeStyle=Color(this.config.borderColor).toString();d.lineWidth=this.config.borderWidth;d.globalAlpha=this.config.spalpha;d.moveTo((this.width-this.bottomLength)/2,this.config.borderWidth);d.lineTo(this.config.borderWidth,this.height);d.lineTo(this.width,this.height);d.lineTo((this.width-this.bottomLength)/2+this.bottomLength,this.config.borderWidth);this.config.sh&&this.setShapeShadow(d);if("gradient"==this.config.fillStyle){c=this.config.angle*Math.PI/180;b=this.width/
2+this.width/2*Math.cos(c);var c=this.height/2+this.height/2*Math.sin(c),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f);b=d.createLinearGradient(g,f,b,c);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);d.fillStyle=b;d.fill()}"Pure"==this.config.fillStyle&&(d.fillStyle=this.color,d.fill());d.closePath();0!=this.config.borderWidth&&d.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&
(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.trapezoid)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.trapezoid[0].width=this.width;this.trapezoid[0].height=this.height;this.draw(this.pageWidth);
this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.trapezoid.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.trapezoid.one(b,function(){this.trapezoid.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.trapezoid.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("RightArrow",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.rightArrow=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");
this.rightArrow.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.rightArrow,this.config.rotation);this.parent.append(this.rightArrow);this.draw(this.pageWidth,this.pageHeight);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.rightArrow)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,rotation:b.location.rotation,pageWidth:b.location.pageWidth,pageHeight:b.location.pageHeight,
alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,arrowWidth:b.arrowWidth,arrowTailHeight:b.arrowTailHeight,arrowType:b.arrowType,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,
se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(b,c){var d=this.rightArrow[0],f=d.getContext("2d");f.clearRect(0,0,d.width,d.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.config.pageHeight||(this.config.pageHeight=bookConfig.largePageHeight);this.arrowWidth=Number(this.config.arrowWidth)/this.config.pageWidth*b;this.arrowTailHeight=
Number(this.config.arrowTailHeight)/this.config.pageHeight*c;0==this.arrowWidth&&(this.arrowWidth=10);0<this.arrowWidth&&this.arrowWidth<3*this.width/4&&(this.arrowWidth=this.arrowWidth);!0==parseBool(this.config.arrowType)?2*this.arrowWidth>this.width-1*this.width/4&&(this.arrowWidth=(this.width-1*this.width/4)/2):this.arrowWidth>3*this.width/4&&(this.arrowWidth=3*this.width/4);this.arrowTailHeight=this.arrowTailHeight>this.height/2?this.height/4:0==this.arrowTailHeight?this.height/2-5:(this.height-
this.arrowTailHeight)/2;f.beginPath();f.lineCap="round";f.lineJoin="round";f.strokeStyle=Color(this.config.borderColor).toString();f.lineWidth=this.config.borderWidth;f.globalAlpha=this.config.spalpha;!1==parseBool(this.config.arrowType)?(f.moveTo(this.config.borderWidth,this.arrowTailHeight),f.lineTo(this.width-this.arrowWidth,this.arrowTailHeight),f.lineTo(this.width-this.arrowWidth,this.config.borderWidth),f.lineTo(this.width,this.height/2),f.lineTo(this.width-this.arrowWidth,this.height),f.lineTo(this.width-
this.arrowWidth,this.height-this.arrowTailHeight),f.lineTo(this.config.borderWidth,this.height-this.arrowTailHeight)):(f.moveTo(this.config.borderWidth,this.height/2),f.lineTo(this.arrowWidth,this.config.borderWidth),f.lineTo(this.arrowWidth,this.arrowTailHeight),f.lineTo(this.width-this.arrowWidth,this.arrowTailHeight),f.lineTo(this.width-this.arrowWidth,this.config.borderWidth),f.lineTo(this.width,this.height/2),f.lineTo(this.width-this.arrowWidth,this.height),f.lineTo(this.width-this.arrowWidth,
this.height-this.arrowTailHeight),f.lineTo(this.arrowWidth,this.height-this.arrowTailHeight),f.lineTo(this.arrowWidth,this.height));this.config.sh&&this.setShapeShadow(f);if("gradient"==this.config.fillStyle){var g=this.config.angle*Math.PI/180,d=this.width/2+this.width/2*Math.cos(g),g=this.height/2+this.height/2*Math.sin(g),h=(Number(this.config.angle)+180)*Math.PI/180,k=this.width/2+this.width/2*Math.cos(h),h=this.height/2+this.height/2*Math.sin(h),d=f.createLinearGradient(k,h,d,g);d.addColorStop(0,
this.colorA);d.addColorStop(1,this.colorB);f.fillStyle=d;f.fill()}"Pure"==this.config.fillStyle&&(f.fillStyle=this.color,f.fill());f.closePath();0!=this.config.borderWidth&&f.stroke()},initEvent:function(){this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));this.addActionEvent(this.rightArrow)},
onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.rightArrow[0].width=this.width;this.rightArrow[0].height=this.height;this.draw(this.pageWidth,this.pageHeight);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.rightArrow.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+
" "+c.direction});this.rightArrow.one(b,function(){this.rightArrow.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.rightArrow.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("VirtualEnd",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=Number(this.config.width*this.pageWidth);this.height=Number(this.config.height*this.pageHeight);this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.borderColor=Color(this.config.borderColor).toString();this.virtualEnd=
$("<canvas width='"+this.width+"' height='"+this.height+"' id='myCanvas'></canvas>");this.virtualEnd.css({position:"absolute",opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.virtualEnd,this.config.rotation);this.parent.append(this.virtualEnd);this.draw(this.pageWidth,this.pageHeight);this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.virtualEnd)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,
pageWidth:b.location.pageWidth,pageHeight:b.location.pageHeight,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,arrowWidth:b.arrowWidth,arrowTailHeight:b.arrowTailHeight,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),
sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},fillColor:function(b){if("gradient"==this.config.fillStyle){var c=this.config.angle*Math.PI/180,d=this.width/2+this.width/2*Math.cos(c),c=this.height/2+this.height/2*Math.sin(c),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),d=b.createLinearGradient(g,f,d,c);
d.addColorStop(0,this.colorA);d.addColorStop(1,this.colorB);b.fillStyle=d;b.fill()}"Pure"==this.config.fillStyle&&(b.fillStyle=this.color,b.fill());0!=this.config.borderWidth&&b.stroke()},draw:function(b,c){var d=this.virtualEnd[0],f=d.getContext("2d");f.clearRect(0,0,d.width,d.height);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.config.pageHeight||(this.config.pageHeight=bookConfig.largePageHeight);
this.arrowWidth=Number(this.config.arrowWidth)/this.config.pageWidth*b;this.arrowTailHeight=Number(this.config.arrowTailHeight)/this.config.pageHeight*c;this.arrowTailHeight>this.height&&(this.arrowTailHeight=this.height);this.arrowWidth>this.width/2&&(this.arrowWidth=this.width/2);0==this.arrowTailHeight&&(this.arrowTailHeight=10);0==this.arrowWidth&&(this.arrowWidth=10);this.rightArrowWidth=this.width-this.arrowWidth;this.rightArrowHeight=(this.height-this.arrowTailHeight)/2;f.strokeStyle=Color(this.config.borderColor).toString();
f.lineWidth=this.config.borderWidth;f.globalAlpha=this.config.spalpha;f.lineCap="round";f.lineJoin="round";f.beginPath();f.rect(this.config.borderWidth,(this.height-this.arrowTailHeight)/2,this.width/24,this.arrowTailHeight);f.strokeStyle=Color(this.config.borderColor).toString();f.lineWidth=this.config.borderWidth;this.fillColor(f);f.closePath();f.beginPath();f.rect(this.width/12,(this.height-this.arrowTailHeight)/2,this.width/12,this.arrowTailHeight);f.strokeStyle=Color(this.config.borderColor).toString();
f.lineWidth=this.config.borderWidth;this.fillColor(f);f.closePath();f.beginPath();f.moveTo(this.width/5,this.rightArrowHeight);f.lineTo(this.rightArrowWidth,this.rightArrowHeight);f.lineTo(this.rightArrowWidth,this.config.borderWidth);f.lineTo(this.width,this.height/2);f.lineTo(this.rightArrowWidth,this.height);f.lineTo(this.rightArrowWidth,this.height-this.rightArrowHeight);f.lineTo(this.width/5,this.height-this.rightArrowHeight);f.closePath();!0==parseBool(this.config.sh)&&this.setShapeShadow(f);
this.fillColor(f)},initEvent:function(){this.linkURL="";null!=this.config.action&&(void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(1,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL),this.addActionEvent(this.virtualEnd))},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.virtualEnd[0].width=
this.width;this.virtualEnd[0].height=this.height;this.draw(this.pageWidth,this.pageHeight);this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.virtualEnd.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.virtualEnd.one(b,function(){this.virtualEnd.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*
this.pageHeight;this.virtualEnd.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("Cross",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.animateConfig();this.color=Color(this.config.color).toString();this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.colorA=Color(this.config.colorA).toString();this.colorB=Color(this.config.colorB).toString();this.cross=$("<canvas width='"+this.width+"' height='"+this.height+"'></canvas>");this.cross.css({position:"absolute",
opacity:this.config.alpha,left:this.x+"px",top:this.y+"px"});this.setRotation(this.cross,this.config.rotation);this.parent.append(this.cross);this.draw();this.initEvent();parseBool(this.config.reflection)&&this.imageReflection(this.cross)},parseConfig:function(b){return{x:b.location.x,y:b.location.y,rotation:b.location.rotation,width:b.location.width,height:b.location.height,pageWidth:b.location.pageWidth,pageHeight:b.location.pageHeight,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,colorA:b.gradientColorA,
colorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,crossWidht:b.crossWidht,crossType:b.crossType,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:parseBool(b.shadow.hasDropShadow),sa:b.shadow.shadowAngle,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action,animation:b.animation}},draw:function(){var b=
this.cross[0],c=b.getContext("2d");c.clearRect(0,0,b.width,b.height);this.config.borderWidth=Number(this.config.borderWidth);this.width-=this.config.borderWidth;this.height-=this.config.borderWidth;this.config.pageWidth||(this.config.pageWidth=bookConfig.largePageWidth);this.crossWidth=Number(this.config.crossWidht)/this.config.pageWidth*this.pageWidth;this.width>this.height?this.crossWidth>2*this.height/3&&(this.crossWidth=this.height-1*this.height/3):this.crossWidth>2*this.width/3&&(this.crossWidth=
this.width-1*this.width/3);0==this.crossWidth&&(this.crossWidth=10);this.positionWidth=(this.width-this.crossWidth)/2;this.positionHeight=(this.height-this.crossWidth)/2;c.lineCap="round";c.lineJoin="round";c.strokeStyle=Color(this.config.borderColor).toString();c.lineWidth=this.config.borderWidth;c.globalAlpha=this.config.spalpha;c.beginPath();!0===parseBool(this.config.crossType)?(c.moveTo(this.config.borderWidth,this.height/2),c.lineTo(this.positionWidth/2,this.positionHeight-this.crossWidth/3),
c.lineTo(this.positionWidth/2,this.positionHeight),c.lineTo(this.positionWidth,this.positionHeight),c.lineTo(this.positionWidth,this.positionHeight/2),c.lineTo(this.positionWidth-this.crossWidth/3,this.positionHeight/2),c.lineTo(this.width/2,this.config.borderWidth),c.lineTo(this.width-this.positionWidth+this.crossWidth/3,this.positionHeight/2),c.lineTo(this.width-this.positionWidth,this.positionHeight/2),c.lineTo(this.width-this.positionWidth,this.positionHeight),c.lineTo(this.width-this.positionWidth/
2,this.positionHeight),c.lineTo(this.width-this.positionWidth/2,this.positionHeight-this.crossWidth/3),c.lineTo(this.width,this.height/2),c.lineTo(this.width-this.positionWidth/2,this.height-this.positionHeight+this.crossWidth/3),c.lineTo(this.width-this.positionWidth/2,this.height-this.positionHeight),c.lineTo(this.width-this.positionWidth,this.height-this.positionHeight),c.lineTo(this.width-this.positionWidth,this.height-this.positionHeight/2),c.lineTo(this.width-this.positionWidth+this.crossWidth/
3,this.height-this.positionHeight/2),c.lineTo(this.width/2,this.height),c.lineTo(this.positionWidth-this.crossWidth/3,this.height-this.positionHeight/2),c.lineTo(this.positionWidth,this.height-this.positionHeight/2),c.lineTo(this.positionWidth,this.height-this.positionHeight),c.lineTo(this.positionWidth/2,this.height-this.positionHeight),c.lineTo(this.positionWidth/2,this.height-this.positionHeight+this.crossWidth/3)):(c.moveTo(this.config.borderWidth,this.positionHeight),c.lineTo(this.positionWidth,
this.positionHeight),c.lineTo(this.positionWidth,this.config.borderWidth),c.lineTo(this.positionWidth+this.crossWidth,this.config.borderWidth),c.lineTo(this.positionWidth+this.crossWidth,this.positionHeight),c.lineTo(this.width-this.config.borderWidth,this.positionHeight),c.lineTo(this.width-this.config.borderWidth,this.positionHeight+this.crossWidth),c.lineTo(this.positionWidth+this.crossWidth,this.positionHeight+this.crossWidth),c.lineTo(this.positionWidth+this.crossWidth,this.height),c.lineTo(this.positionWidth,
this.height),c.lineTo(this.positionWidth,this.positionHeight+this.crossWidth),c.lineTo(this.config.borderWidth,this.positionHeight+this.crossWidth));parseBool(this.config.sh)&&this.setShapeShadow(c);if("gradient"==this.config.fillStyle){var d=this.config.angle*Math.PI/180,b=this.width/2+this.width/2*Math.cos(d),d=this.height/2+this.height/2*Math.sin(d),f=(Number(this.config.angle)+180)*Math.PI/180,g=this.width/2+this.width/2*Math.cos(f),f=this.height/2+this.height/2*Math.sin(f),b=c.createLinearGradient(g,
f,b,d);b.addColorStop(0,this.colorA);b.addColorStop(1,this.colorB);c.fillStyle=b;c.fill()}"Pure"==this.config.fillStyle&&(c.fillStyle=this.color,c.fill());c.closePath();0!=this.config.borderWidth&&c.stroke()},initEvent:function(){this.flag=0;this.linkURL="";null!=this.config.action&&(null!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url,null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL));
this.addActionEvent(this.cross)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.pageWidth*this.config.width;this.height=this.pageHeight*this.config.height;this.cross[0].width=this.width;this.cross[0].height=this.height;this.draw();this.setPosition()},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.cross.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});
this.cross.one(b,function(){this.cross.css({animation:""})}.bind(this))}},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cross.css({left:this.x+"px",top:this.y+"px"})}}).extend(PageItem.Item);
Class("PopUpVideoItem",{Package:"PageItem",create:function(b,c,d,f){this._super(b,c,d,f);this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.playCount=0;this.videoWidth=Math.min(574,windowWidth-4);this.videoHeight=Math.min(460,windowHeight-4);this.videoLeft=(windowWidth-this.videoWidth-4)/2;this.videoTop=(windowHeight-this.videoHeight-4)/2;this.background=$("<div style='width:100%;height:100%;z-index:1001;position:absolute;top:0;'></div>");
this.videoBac=$("<div style='width:100%;height:100%;background-color:rgba(0,0,0,0.5);'></div>");this.config.imgURL=this.fixRelativePath(this.config.imgURL);bookConfig.useTheAliCloudChart&&this.config.imgURL&&(this.config.imgURL=this.getOssUrl(this.config.imgURL,this.width,this.height,"fixed"));this.config.videoURL=this.fixRelativePath(this.config.videoURL);this.videoImage=$("<div class='flip-action' style='position: absolute;cursor:pointer;opacity:"+this.config.alpha+"; left:"+this.left+"px; top:"+
this.top+"px; width:"+this.width+"px;height:"+this.height+"px;'></div>");this.closeButton=$("<img style='width:18px;height:18px;z-index:1001;position:absolute;cursor:pointer;right:5px;top:"+(0>this.videoTop-18?0:this.videoTop-18)+"px;' src='"+uiBaseURL+"close.png'/>");this.videoFrame=new Media($("<video src='"+this.config.videoURL+"' webkit-playsinline='true' playsinline='true' controls='controls'></video>"),"video");this.videoFrame.setCss({position:"absolute",background:"#000",border:"2px solid #bbb",
width:this.videoWidth+"px",height:this.videoHeight+"px",left:this.videoLeft+"px",top:this.videoTop+"px","object-fit":"contain","z-index":1E3});this.config.imgURL?(this.imageDiv=$("<img src='"+this.config.imgURL+"' style='position: absolute;width:100%;height:100%'/>"),this.videoImage.append(this.imageDiv)):this.videoImage.css("background-color","rgba(255,255,255,1)");this.playImg=$("<img src='"+uiBaseURL+"play.png' style='position:absolute;margin:auto;left:0px;top:0px;bottom:0px;right:0px;width:56px;height:56px'/>");
this.videoImage.append(this.playImg);this.setRotation(this.videoImage,this.config.rotation);this.background.append(this.videoFrame.$media);tmpContainer.append(this.background);this.background.append(this.videoBac);this.background.append(this.closeButton);b.append(this.videoImage);this.config.shadow&&this.addShadow(this.videoImage);this.hide();this.initEvent()},parseConfig:function(b){var c={width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,
alpha:b.alpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,previewSrc:b.previewURL,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt,replayWhenPlayEventTrigger:b.replayWhenPlayEventTrigger,shadow:b.shadow,animation:b.animation};b.H5PlaybackNumber&&(c.H5PlaybackNumber=parseInt(b.H5PlaybackNumber));b.H5Replay&&(c.H5Replay=parseBool(b.H5Replay));b.componentData?(c.videoURL=b.componentData.videoURL,
c.imgURL=b.componentData.imgURL||b.componentData.previewURL,c.pageViewed=parseBool(b.componentData.pageViewed)):(c.videoURL=b.url||b.videoURL||"",c.imgURL=b.previewURL||b.previewUrl||"",c.pageViewed="EVT_PageViewed"==b.moviePlayTriggerEvt?!0:!1);parseBool(b.shadow.hasDropShadow)&&(c.hasShadow=!0);return c},initEvent:function(){this.videoFrame.$media.bind(_event._click,function(b){b.stopPropagation()}.bind(this));this.background.bind(_event._down,function(b){b.stopPropagation()}.bind(this));this.background.bind(_event._click,
function(b){this.hide();this.setCurrentTime(0);this.videoFrame.pause();b.stopPropagation()}.bind(this));this.videoImage.bind(_event._down,function(b){b.stopPropagation()}.bind(this));this.videoImage.bind(_event._end,function(b){b.stopPropagation()}.bind(this));this.videoImage.bind(_event._click,function(b){this.showOrHide();b.stopPropagation()}.bind(this));this.closeButton.bind("mouseenter",function(){this.closeButton.css({opacity:"0.7"})}.bind(this));this.closeButton.bind("mouseleave",function(){this.closeButton.css({opacity:"1"})}.bind(this));
0>this.config.H5PlaybackNumber&&this.videoFrame.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.videoFrame.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.videoFrame.play()}.bind(this));this.videoFrame.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.width=this.config.width*this.pageWidth;
this.height=this.config.height*this.pageHeight;this.left=this.config.x*this.pageWidth;this.top=this.config.y*this.pageHeight;this.videoWidth=Math.min(480,windowWidth)-4;this.videoHeight=9*this.videoWidth/16;this.videoHeight=Math.min(this.videoHeight,windowHeight);this.videoLeft=(windowWidth-this.videoWidth)/2-2;this.videoTop=(windowHeight-this.videoHeight)/2-2;this.videoFrame.setCss({width:this.videoWidth+"px",height:this.videoHeight+"px",top:this.videoTop+"px",left:this.videoLeft+"px"});this.videoImage.css({width:this.pageWidth*
this.config.width+"px",height:this.pageHeight*this.config.height+"px"});this.setPosition(this.left,this.top);this.setClosePos()},setPosition:function(b,c){this.videoImage.css({top:c+"px",left:b+"px"})},setClosePos:function(){var b=this.videoWidth+this.videoLeft+2,c=this.videoTop;(windowWidth-this.videoWidth)/2<this.closeButton.width()&&(c>this.closeButton.height()?(b=this.videoLeft+this.videoWidth+4-this.closeButton.width(),c=this.videoTop-this.closeButton.height()):c<this.closeButton.height()&&(b=
this.videoLeft+this.videoWidth+4-this.closeButton.width(),c=this.videoTop));this.closeButton.css({left:b+"px",top:c+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd();this.videoImage.css({animation:"flip 1s ease 0s 1 normal"});this.videoImage.one(b,function(){this.videoImage.css({animation:""})}.bind(this))}},getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},showOrHide:function(){!1===
this.visible?this.popup():this.hide()},setCurrentTime:function(b){this.videoFrame.setCurrentTime(b)},hide:function(){this.visible=!1;this.background.css({display:"none"})},popup:function(){this.visible=!0;this.videoFrame.play();this.background.css({display:"block"})},play:function(){this.videoFrame.play()},pause:function(){this.videoFrame.pause()},stop:function(){this.pause();this.videoFrame.setCurrentTime(0)}}).extend("Item");
Class("LoopControlVideo",{Package:"PageItem",create:function(b,c,d,f){this.config=this.parseConfig(c);this.animateConfig();this.playCount=0;this.parent=b;this.pageWidth=d;this.pageHeight=f;this.width=this.config.width*this.pageWidth;this.height=this.config.height*this.pageHeight;this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.cvsWidth=0.54*this.width;this.cvsHeight=this.height;this.content=$("<div class='flip-action' style='overflow:hidden;'></div>");this.control=$("<div class='video-circle-controls'></div>");
this.playBtn=$("<div class='video-circle-play'></div>");this.volume=$("<div class='video-circle-volume-button'></div>");this.fullscreen=$("<div class='video-circle-player-fullscreen' style='display:none'></div>");this.loopControl=$("<canvas class='loopControl' width='80' height='80' style='position:absolute;margin:auto;top:0;left:0;bottom:0;right:0;'>64%</canvas>");this.canvasDiv=$("<div></div>");"string"==typeof this.config.previewSrc&&""!=this.config.previewSrc&&null!=this.config.previewSrc&&void 0!=
this.config.previewSrc&&(this.config.previewSrc=this.fixRelativePath(this.config.previewSrc),bookConfig.useTheAliCloudChart&&(this.config.previewSrc=this.getOssUrl(this.config.previewSrc,this.width,this.height,"fixed")));b=typeof this.config.src;c=this.config.src.substr(this.config.src.length-4,4).toLowerCase();if("string"==b){if(null==this.config.src||".mp4"!=c&&".flv"!=c&&".f4v"!=c)return}else if(this.config.src=={})return;this.config.src=this.fixRelativePath(this.config.src);this.video=new Media($("<video src='"+
this.config.src+"' webkit-playsinline='true' playsinline='true' ></video>"),"video");this.config.previewSrc&&this.video.$media.attr("poster",this.config.previewSrc);this.parent.append(this.content);this.content.append(this.video.$media);this.content.append(this.control);this.control.append(this.canvasDiv);this.canvasDiv.append(this.loopControl);this.control.append(this.playBtn);this.control.append(this.volume);this.control.append(this.time);this.control.append(this.fullscreen);this.canvasDiv.append(this.time);
this.setCss();this.config.shadow&&this.addShadow(this.content);parseBool(this.config.reflection)&&this.imageReflection(this.content,this.width,this.height);this.initEvent()},parseConfig:function(b){var c={width:b.location.width,height:b.location.height,rotation:b.location.rotation,x:b.location.x,y:b.location.y,alpha:b.alpha,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,previewSrc:b.previewURL,moviePlayTriggerEvt:b.moviePlayTriggerEvt?
b.moviePlayTriggerEvt:b.PlayTriggerEvt,movieStopTriggerEvt:b.StopTriggerEvt,replayWhenPlayEventTrigger:b.replayWhenPlayEventTrigger,shadow:b.shadow,animation:b.animation};b.H5PlaybackNumber&&(c.H5PlaybackNumber=parseInt(b.H5PlaybackNumber));b.H5Replay&&(c.H5Replay=parseBool(b.H5Replay));void 0!=b.videoURL&&(c.src=b.videoURL);void 0!=b.url&&(c.src=b.url);b.componentData&&(c.src=b.componentData.videoURL,c.previewSrc=b.componentData.imgURL);parseBool(b.shadow.hasDropShadow)&&(c.hasShadow=!0);return c},
onPlayClick:function(){!1==this.video.$media[0].paused?this.pauseVideo():this.playVideo();$.browser.device!=$.browser.DEVICE_PC&&function(){this.control.css("opacity","0")}.delay(this,5E3);return!1},onResize:function(b,c){this.width=this.config.width*b;this.height=this.config.height*c;this.cvsWidth=this.cvsHeight=80<this.height?80:this.height;0.54*this.width<=this.height&&(this.cvsWidth=this.cvsHeight=80<0.54*this.width?80:0.54*this.width);this.loopControl[0].width=this.cvsWidth;this.loopControl[0].height=
this.cvsHeight;this.content.css({width:this.width+"px",height:this.height+"px"});this.control.css({width:this.width+"px",height:this.height+"px"});this.content.css({"background-size":this.width+"px "+this.height+"px"});this.setPosition(b,c)},setPosition:function(b,c){this.x=b*this.config.x;this.y=c*this.config.y;this.content.css({left:this.x+"px",top:this.y+"px"})},Loop:function(b){var c=this.loopControl[0].getContext("2d");c.clearRect(0,0,this.cvsWidth,this.cvsHeight);this.drawRound(c,this.cvsWidth/
2,360,"#555555");this.drawRound(c,this.cvsWidth/2,b,"#FFFFFF");this.drawRound(c,this.cvsWidth/2*0.85,360,"#000000")},drawRound:function(b,c,d,f){var g=Math.PI/180;b.beginPath();b.moveTo(this.cvsWidth/2,this.cvsWidth/2);b.arc(this.cvsWidth/2,this.cvsWidth/2,c,0,d*g,!1);b.closePath();b.fillStyle=f;b.fill()},muteVolume:function(){!0==this.video.$media[0].muted?(this.video.$media[0].muted=!1,this.volume.removeClass("video-circle-volume-mute")):(this.video.$media[0].muted=!0,this.volume.addClass("video-circle-volume-mute"));
return!1},fullScreen:function(){fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(this.video.$media[0]));this.video.$media[0].webkitSupportsFullscreen&&this.video.$media[0].webkitEnterFullscreen();return!1},initEvent:function(){this.fullscreen.bind(_event._click,this.fullScreen.bind(this));this.control.bind(fullScreenApi.fullScreenEventName,function(){fullScreenApi.isFullScreen()?this.fullscreen.addClass("video-circle-exit-fullscreen"):
this.fullscreen.removeClass("video-circle-exit-fullscreen")}.bind(this));this.video.$media.bind(_event._click,this.onPlayClick.bind(this));this.playBtn.bind(_event._click,this.onPlayClick.bind(this));this.volume.bind(_event._click,this.muteVolume.bind(this));this.video.$media.bind("play",function(){this.fullscreen.css({display:"block"});this.playBtn.removeClass("video-play-button").addClass("video-paused-button")}.bind(this));this.video.$media.bind("pause",function(){this.fullscreen.css({display:"none"});
this.playBtn.removeClass("video-paused-button").addClass("video-play-button")}.bind(this));this.video.$media.bind("end",function(){this.fullscreen.css({display:"none"});this.playBtn.removeClass("video-paused-button").addClass("video-play-button")}.bind(this));this.video.$media.bind("timeupdate",function(){this.totalTime=this.video.$media[0].duration;this.currentTime=this.video.$media[0].currentTime;this.Loop(this.currentTime/this.totalTime*360)}.bind(this));this.control.on("mouseenter",function(){this.control.css("opacity",
"1")}.bind(this));this.control.on("mouseleave",function(){this.control.css("opacity","0")}.bind(this));$.browser.device!=$.browser.DEVICE_PC&&(this.control.bind(_event._down,function(){this.control.css("opacity","1")}.bind(this)),this.control.bind(_event._up,function(){(function(){this.control.css("opacity","0")}).delay(this,3E3)}.bind(this)));this.video.$media.bind("click mousedown mouseup mousewheel DOMMouseScroll",function(b){b.stopPropagation()}.bind(this));this.initLoopEvent()},initLoopEvent:function(){0>
this.config.H5PlaybackNumber&&this.video.$media.attr("loop","loop");0<this.config.H5PlaybackNumber&&this.video.$media.bind("ended",function(){this.playCount++;0<this.config.H5PlaybackNumber&&this.playCount<=this.config.H5PlaybackNumber&&this.playVideo()}.bind(this));this.video.$media.bind("play",function(){this.playCount>this.config.H5PlaybackNumber&&(this.playCount=0)}.bind(this))},setCss:function(){this.canvasDiv.css({position:"absolute",width:"54%",height:"100%",margin:"auto",top:"0",bottom:"0",
left:"0",right:"0",transform:"rotate(270deg)","-webkit-transform":"rotate(270deg)","-ms-transform":"rotate(270deg)","-o-transform":"rotate(270deg)","-moz-transform":"rotate(270deg)"});this.control.css({position:"absolute",width:this.width+"px",opacity:"1",height:this.height+"px"});this.content.css({position:"absolute",left:this.x+"px",top:this.y+"px",width:this.width+"px",height:this.height+"px",opacity:this.config.alpha,"background-color":"black"});this.setRotation(this.content,this.config.rotation);
this.video.setCss({position:"absolute","z-index":1,left:"0px",top:"0px",width:"100%",height:"100%"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.content.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.content.one(b,function(){this.content.css({animation:""})}.bind(this))}},backTime:function(){this.playCount=0;this.video&&this.video.setCurrentTime(0)},isReplay:function(){return this.config.H5Replay},
getPlayEvt:function(){return this.config.moviePlayTriggerEvt},getStopEvt:function(){return this.config.movieStopTriggerEvt},playVideo:function(){this.video&&(this.video.play(),this.playBtn.removeClass("video-play-button").addClass("video-paused-button"))},pauseVideo:function(){this.video&&(this.video.pause(),this.playBtn.removeClass("video-paused-button").addClass("video-play-button"))},stopVideo:function(){player&&(this.pauseVideo(),this.video.setCurrentTime(0))}}).extend("Item");
Class("RollerText",{Package:"PageItem",create:function(b,c,d,f,g){this._super(b,c,d,f);this.animateConfig();this.bgColor=Color(this.config.bgcolor).toString();this.originWidth=this.config.pageW;this.originHeight=this.config.pageH;this.id="text"+g;this.initText();this.initEvents();parseBool(this.config.reflection)&&this.imageReflection(this.rollerText);this.onResize(this.pageWidth,this.pageHeight)},initText:function(){this.textli="";this.container=$("<div id="+this.id+" content='width=device-width' style='position:absolute;'></div>");
this.rollerText=$("<div content='width=device-width'></div>");this.enterText=$("<div class='flip-action' content='width=device-width'></div>");this.textDown=$("<img/>");this.textUp=$("<img/>");this.alignCss="";"right"==this.config.languageLayout&&(this.alignCss={"text-align":"right",direction:"rtl"});this.config.textStr||(this.config.textStr=this.config.formats.defaultFormat.htmlText);var b=new TextFormatAnalyzer(this.config.textStr);this.fontSize=b.getMinFontSize();this.text=b.getHTML(this.alignCss);
this.adjustFontSize=$.browser.chrome?Math.max(1,12/this.fontSize):1;this.width=this.config.width*this.originWidth*this.adjustFontSize;this.height=this.config.height*this.originHeight*this.adjustFontSize;this.scrollWidth=40<=0.05*this.width?40:0.05*this.width;!0===parseBool(this.config.fillBg)?this.rollerText.css({"background-color":Color(this.config.bgcolor).rgba(this.config.bgalpha)}):this.rollerText.css({background:""});this.addShadow(this.rollerText);!0===parseBool(this.config.selectable)&&this.rollerText.css({"-webkit-user-select":"text",
"-moz-user-select":"text","-ms-user-select":"text","user-select":"text"});1==this.config.barType?(this.enterText.append(this.textDown).append(this.textUp),this.setBarType(),this.textDown.attr({src:uiBaseURL+"textDown.png"}),this.textUp.attr({src:uiBaseURL+"textUp.png"})):this.rollerText.css({"-webkit-text-size-adjust":"100%",display:"inline-block","word-wrap":"break-word",overflow:"hidden",position:"absolute",width:this.width+"px",height:this.height+"px"});this.enterText.css({"-webkit-text-size-adjust":"100%",
display:"inline-block",position:"absolute",width:this.width-this.scrollWidth+"px",left:"0",top:"0"});this.rollerText.css({opacity:this.config.alpha});this.enterText.append(this.text);this.rollerText.append(this.enterText);this.container.append(this.rollerText);this.parent.append(this.container);this.enterText.height()>this.height&&this.initScroll()},initScroll:function(){this.scroll=$("<div class='flip-action'></div>");this.scrollBar=$("<div class='flip-action'></div>");this.topPoint=$("<p class='flip-action'></p>");
this.bottomPoint=$("<p class='flip-action'></p>");this.topIcon=$("<span></span>");this.bottomIcon=$("<span></span>");this.topPoint.append(this.topIcon);this.bottomPoint.append(this.bottomIcon);this.scroll.append(this.scrollBar).append(this.topPoint).append(this.bottomPoint);this.rollerText.append(this.scroll);this.initScrollCss();this.initScrollEvent()},initScrollEvent:function(){for(var b=[this.enterText,this.scroll],c=0;c<b.length;c++)b[c].bind("mousewheel DOMMouseScroll",function(b){b.stopPropagation();
this.distance||(this.distance=this.enterText.height()-this.height+this.scrollWidth/2);this.barHeight||(this.barHeight=(this.height-2*this.scrollWidth)*(this.height-2*this.scrollWidth)/this.enterText.height());this.barDistance||(this.barDistance=this.height-this.barHeight-this.scrollWidth);b=b.originalEvent.wheelDelta&&(0<b.originalEvent.wheelDelta?1:-1)||b.originalEvent.detail&&(0<b.originalEvent.detail?-1:1);0<b?this.scrollTop():0>b&&this.scrollBottom()}.bind(this));this.parent.bind("mouseup",function(b){this.focus=
!1;this.starty=void 0}.bind(this));this.enterText.bind("mouseup",function(b){this.focus=!1;this.starty=void 0}.bind(this));this.rollerText.bind("mouseup",function(b){this.focus=!1;this.starty=void 0}.bind(this));this.scroll.bind("mouseup mousewheel",function(b){this.focus=!1}.bind(this));isTouchDevice()&&(this.enterText.bind(_event._down,function(b){this.touchText=this.focus=!0}.bind(this)),this.enterText.bind(_event._up,function(b){this.touchText=this.focus=!1;this.starty=void 0}.bind(this)));this.scrollBar.bind(_event._down,
function(b){b.stopPropagation();b.preventDefault();this.starty=b.pageY;this.focus=!0}.bind(this));this.parent.bind(_event._up,function(b){this.focus=!1;this.starty=void 0}.bind(this));this.scrollBar.bind(_event._up,function(b){b.stopPropagation();b.preventDefault();this.focus=!1;this.starty=void 0}.bind(this));b=[this.scroll,this.rollerText,this.parent];isTouchDevice()&&(b=[this.scroll,this.enterText]);for(c=0;c<b.length;c++)b[c].bind(_event._move,function(b){b.stopPropagation();if(this.focus){pageY=
isPhone()||isPad()?b.originalEvent.targetTouches[0].pageY:b.pageY;var c=this.touchText?-pageY+this.starty:pageY-this.starty;b=-c/this.barDistance;c=this.scrollBar.top()+c/this.fScale;b=this.enterText.top()+this.distance*b*1.1/this.fScale;c<=this.scrollWidth&&(c=this.scrollWidth);c>=this.barDistance&&(c=this.barDistance);0<=b&&(b=0);b<=-this.distance&&(b=-this.distance);this.scrollBar.css({top:c+"px"});this.enterText.css({top:b+"px"});this.starty=pageY}}.bind(this));this.bottomPoint.bind(_event._up,
function(b){b.stopPropagation();this.focus=this.bottomDown=!1;this.bottomDownTimer&&(clearInterval(this.bottomDownTimer),this.bottomDownTimer=null)}.bind(this));this.bottomPoint.bind(_event._down,function(b){b.stopPropagation();this.bottomDown=this.focus=!0;this.scrollBottom();this.bottomDown&&(this.bottomDownTimer=setInterval(this.scrollBottom.bind(this),100))}.bind(this));this.topPoint.bind(_event._down,function(b){b.stopPropagation();this.focus=this.topDown=!0;this.scrollTop();this.topDown&&(this.topDownTimer=
setInterval(this.scrollTop.bind(this),100))}.bind(this));this.topPoint.bind(_event._up,function(b){b.stopPropagation();this.focus=this.topDown=!1;this.topDownTimer&&(clearInterval(this.topDownTimer),this.topDownTimer=null)}.bind(this))},scrollBottom:function(){this.textTop=this.enterText.top();this.barTop=this.scrollBar.top();this.textTop-=0.1*this.distance;this.barTop+=0.1*this.barDistance;this.textTop<=-this.distance&&(this.textTop=-this.distance);this.barTop>=this.barDistance&&(this.barTop=this.barDistance);
this.enterText.css({top:this.textTop+"px"});this.scrollBar.css({top:this.barTop+"px"})},scrollTop:function(){this.textTop=this.enterText.top();this.barTop=this.scrollBar.top();this.textTop+=0.1*this.distance;this.barTop-=0.1*this.barDistance;0<=this.textTop&&(this.textTop=0);this.barTop<=this.scrollWidth&&(this.barTop=this.scrollWidth);this.enterText.css({top:this.textTop+"px"});this.scrollBar.css({top:this.barTop+"px"})},initScrollCss:function(){this.scroll.css({position:"absolute",width:this.scrollWidth+
"px",right:0,top:"0",height:this.height+"px",background:"#F1F1F1"});this.scrollBar.css({width:0.7*this.scrollWidth+"px",background:"#AAAAAB",height:this.barHeight,cursor:"pointer",left:0.15*this.scrollWidth+"px",top:this.scrollWidth+"px",position:"absolute"});this.topPoint.css({cursor:"pointer",width:this.scrollWidth+"px",height:this.scrollWidth+"px",background:"#F1F1F1",position:"absolute",top:0});this.bottomPoint.css({cursor:"pointer",width:this.scrollWidth+"px",height:this.scrollWidth+"px",background:"#F1F1F1",
position:"absolute",bottom:0});this.topIcon.css({position:"absolute",left:0.18*this.scrollWidth+"px",top:0.3*this.scrollWidth+"px","border-left":0.3*this.scrollWidth+"px solid transparent","border-right":0.3*this.scrollWidth+"px solid transparent","border-bottom":0.3*this.scrollWidth+"px solid #A3A3A3"});this.bottomIcon.css({position:"absolute",left:0.18*this.scrollWidth+"px",bottom:0.3*this.scrollWidth+"px","border-left":0.3*this.scrollWidth+"px solid transparent","border-right":0.3*this.scrollWidth+
"px solid transparent","border-top":0.3*this.scrollWidth+"px solid #A3A3A3"})},parseConfig:function(b){return{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,reflection:b.location.reflection,reflectionType:b.location.reflectionType,reflectionAlpha:b.location.reflectionAlpha,alpha:b.alpha,rotation:b.location.rotation,textStr:b.textStr?b.textStr:b.formats.defaultFormat.htmlText,selectable:b.selectable,highlightsBool:b.highlightsBool,highlightsURL:b.highlightsURL,highlightsLabel:b.highlightsLabel,
pageH:b.formats.defaultFormat.pageH,pageW:b.formats.defaultFormat.pageW,barType:b.barType,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,action:b.action,hasShadow:parseBool(b.shadow.hasDropShadow),shadow:b.shadow,languageLayout:b.languageLayout,animation:b.animation}},initEvents:function(){function b(b){b.stopPropagation&&b.stopPropagation()}this.textDown.click(function(){var b=this.text.scrollTop();this.text.animate({scrollTop:b+50},100)}.bind(this));this.textUp.click(function(){var b=
this.text.scrollTop();this.text.animate({scrollTop:b-50},100)}.bind(this));var c;c=$.browser.mozilla?"DOMMouseScroll":"mousewheel";this.enterText.bind(c,b);this.rollerText.bind(c,b);this.rollerText.bind(_event._down,b);this.rollerText.bind(_event._up,b);this.addActionEvent(this.container)},setBarType:function(){this.textUp.css({"background-attachment":"fixed",position:"absolute",margin:"auto",width:"23px",height:"23px",bottom:"0px",right:"26px","background-color":"#FFFFFF",border:"1px solid"});this.textDown.css({position:"absolute",
margin:"auto",width:"23px",height:"23px",bottom:"0px",right:"0px","background-attachment":"fixed","background-color":"#FFFFFF",border:"1px solid"});this.rollerText.css({"word-wrap":"break-word","overflow-x":"hidden","overflow-y":"scroll",position:"absolute",width:this.width+"px",height:this.height+"px"});this.setRotation(this.rollerText,this.config.rotation)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.fScale=this.pageHeight/this.originHeight/this.adjustFontSize;this.setPosition();
this.resizeText(this.pageHeight);this.enterText.height()>this.height&&(this.scroll||this.initScroll(),this.distance=this.enterText.height()-this.height+this.scrollWidth/2,this.barHeight=(this.height-2*this.scrollWidth)*(this.height-2*this.scrollWidth)/this.enterText.height(),this.barDistance=this.height-this.barHeight-this.scrollWidth,this.initScrollCss(),this.barTop=-this.enterText.top()/this.distance*this.barDistance,this.barTop<=this.scrollWidth&&(this.barTop=this.scrollWidth),this.barTop>=this.barDistance&&
(this.barTop=this.barDistance),this.scrollBar.css({top:this.barTop+"px"}))},setPosition:function(){this.x=this.config.x*this.pageWidth;this.y=this.config.y*this.pageHeight;this.container.css({left:this.x+"px",top:this.y+"px"})},showAnimate:function(){if(this.config.animation&&this.config.animation.name){var b=getAnimationEnd(),c=this.config.animation;this.container.css({animation:c.name+" "+c.duration+"s "+c.timeFun+" "+c.delay+"s "+c.count+" "+c.direction});this.container.one(b,function(){this.container.css({animation:""})}.bind(this))}},
resizeText:function(b){this.fScale=b=b/this.originHeight/this.adjustFontSize;this.rollerText.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%","-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-o-transform":"scale("+b+")",transform:"scale("+b+")"});this.container.css({width:this.width*b,height:this.height*b})}}).extend(PageItem.Item);
var PageEditor={AnnoType:{ANNO_LINK:"com.mobiano.flipbook.pageeditor.TAnnoLink",ANNO_YOUTUBE:"com.mobiano.flipbook.pageeditor.TAnnoYouTube",ANNO_YOUTUBE1:"com.mobiano.flipbook.pageeditor::TAnnoYoutubePlayer",ANNO_YOUTUBE2:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer02",ANNO_YOUTUBE3:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer03",ANNO_YOUTUBE4:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer04",ANNO_YOUTUBE5:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer05",
ANNO_YOUTUBE6:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer06",ANNO_YOUTUBE7:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer07",ANNO_YOUTUBE8:"com.mobiano.flipbook.pageeditor.player::TAnnoYoutubePlayer08",ANNO_VIDEO1:"com.mobiano.flipbook.pageeditor::TAnnoVideoPlayer",ANNO_VIDEO2:"com.mobiano.flipbook.pageeditor.player::TAnnoSimpleVideoPlayer",ANNO_AUDIO1:"com.mobiano.flipbook.sound.TAnnoAdvancedSound",ANNO_AUDIO2:"com.mobiano.flipbook.sound.TAnnoWavemusicPlayer",ANNO_AUDIO3:"com.mobiano.flipbook.pageeditor::TAnnoPlugIn",
ANNO_AUDIO4:"com.mobiano.flipbook.sound.TAnnoBackgroundSound",ANNO_AUDIO5:"",ANNO_AUDIO6:"",ANNO_AUDIO7:"",ANNO_AUDIO8:"",ANNO_AUDIO9:"",ANNO_VIMEO:"com.mobiano.flipbook.pageeditor.vimeoPlayer::TAnnoVimeoPlayer",ANNO_VIMEO2:"com.mobiano.flipbook.pageeditor.vimeoPlayer.TAnnoVimeoPopUpPlayer",ANNOHTML_VIDEO:"com.mobiano.flipbook.pageeditor::TAnnoHTMLMovie",ANNO_VIDEO:"com.mobiano.flipbook.pageeditor.TAnnoMovie",ANNO_AUDIO:"com.mobiano.flipbook.pageeditor.TAnnoSound",ANNO_IMAGE:"com.mobiano.flipbook.pageeditor.TAnnoImage",
ANNO_BUTTON:"com.mobiano.flipbook.pageeditor.TAnnoButton",ANNO_DYNAMICBUTTON:"com.mobiano.flipbook.pageeditor::TAnnoDynamicButton",ANNO_NEW_AUDIO:"com.mobiano.flipbook.sound.TAnnoSound",ANNO_LINE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoLine",ANNO_ARROW:"com.mobiano.flipbook.pageeditor.shapes::TAnnoArrow",ANNO_ROUND:"com.mobiano.flipbook.pageeditor.shapes::TAnnoEllipse",ANNO_RECTANGLE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoRectangle",ANNO_TRIANGLE:"com.mobiano.flipbook.pageeditor.shapes::TAnnoTriangle",
ANNO_PRISMATIC:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPrismatic",ANNO_PARALLELOGRAM:"com.mobiano.flipbook.pageeditor.shapes::TAnnoParallelogram",ANNO_PENTAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPentagon",ANNO_HEXAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoHexagon",ANNO_PENTAGON:"com.mobiano.flipbook.pageeditor.shapes::TAnnoPentagon",ANNO_DOVETAILED:"com.mobiano.flipbook.pageeditor.shapes::TAnnoDovetailed",ANNO_FLOWCHART:"com.mobiano.flipbook.pageeditor.shapes::TAnnoFlowChart",
ANNO_CYLINDER:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCylinder",ANNO_TRAPEZOID:"com.mobiano.flipbook.pageeditor.shapes::TAnnoTrapezoid",ANNO_RIGHTARROW:"com.mobiano.flipbook.pageeditor.shapes::TAnnoRightArrow",ANNO_VIRTUALEND:"com.mobiano.flipbook.pageeditor.shapes::TAnnoVirtualEnd",ANNO_CROSS:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCross",ANNO_AREA:"com.mobiano.flipbook.pageeditor::TAnnoHighLightArea",ANNO_FLASHSHOW:"com.mobiano.flipbook.pageeditor.TAnnoSWF1",ANNO_PRINT:"com.mobiano.flipbook.pageeditor::TAnnoPrint",
ANNO_ZOOM:"com.mobiano.flipbook.pageeditor::TAnnoZoom",ANNO_TEXT:"com.mobiano.flipbook.pageeditor::TAnnoText",ANNO_ATEXT:"com.mobiano.flipbook.pageeditor::TAnnoDynamicText",ANNO_ROLLERTEXT:"com.mobiano.flipbook.pageeditor::TAnnoRollerText",ANNO_STARTEXT:"com.mobiano.flipbook.pageeditor::TAnnoStarwarsText",ANNO_TEXTANIM:"com.mobiano.flipbook.pageeditor.textAnim::TAnnoTextAnim",ANNO_EFFECTTEXT:"com.mobiano.flipbook.pageeditor.TAnnoEffectText",ANNO_CALLOUT:"com.mobiano.flipbook.pageeditor.shapes::TAnnoCallout",
ANNO_ADVANCEDSOUND:"com.mobiano.flipbook.pageeditor::TAnnoAdvancedSound1",ANNO_ALPHATRANSITIONBANNER:"com.mobiano.flipbook.pageeditor.TAnnoAlphaTransitionBanner",ANNO_EMBEDDEDSLIDESHOW:"com.mobiano.flipbook.pageeditor.TAnnoEmbeddedSlideshow",ANNO_ATIMAGE:"com.mobiano.flipbook.pageeditor.TAnnoClipart",ANNO_BANNER:"com.mobiano.flipbook.pageeditor::TAnnoBanner",ANNO_CAROUSEL:"com.mobiano.flipbook.pageeditor.TAnnoCarouselViewer",ANNO_DYNSHOW:"com.mobiano.flipbook.pageeditor::TAnnoDynamicShowPhoto",ANNO_FLIPJUMP:"com.mobiano.flipbook.pageeditor.TAnnoDynamicTurnPhoto",
ANNO_PLUGIN:"com.mobiano.flipbook.pageeditor::TAnnoPlugIn",ANNO_SWF:"com.mobiano.flipbook.pageeditor.TAnnoSWF",ANNO_CART:"com.mobiano.flipbook.pageeditor.TAnnoCart",ANNO_HOTSPOTS:"com.mobiano.flipbook.pageeditor.TAnnoHotSpots"},PlayEvt:{EVT_PLAY:"EVT_PageViewed",EVT_STOP:"EVT_PageOffView"},TriggerEventType:{MouseDown:"mouseDown",MouseOver:"mouseOver",MouseOut:"mouseOut",MouseUp:"mouseUp",MouseMove:"mouseMove",MouseLeave:"mouseLeave"},MouseOverType:{Zoom:"1",AddBorder:"2"},ActionType:{GOTO_PAGE:"com.mobiano.flipbook.pageeditor.TAnnoActionGotoPage",
OPEN_URL:"com.mobiano.flipbook.pageeditor.TAnnoActionOpenURL",OPEN_WINDOW:"com.mobiano.flipbook.pageeditor.TAnnoActionOpenWindow",SLIDE_SHOW:"com.mobiano.flipbook.pageeditor.TAnnoActionPhotoSlide",ACTION_JS:"com.mobiano.flipbook.pageeditor.TAnnoActionJavascript",PLAY_AUDIO:"com.mobiano.flipbook.pageeditor.TAnnoActionPlayAudio",WINDOW_HTML:"com.mobiano.flipbook.pageeditor.TAnnoActionWindowHtml",PLAY_VIDEO:"com.mobiano.flipbook.pageeditor.TAnnoActionPlayVideo",SHOW_INFORMATION:"com.mobiano.flipbook.pageeditor.TAnnoActionShowInformation",
QUIZ:"com.mobiano.flipbook.pageeditor.TAnnoActionQuiz",PLAYVIDEO:"com.mobiano.flipbook.Action.TAnnoActionPlayVideo",SWF_SLIDE:"com.mobiano.flipbook.pageeditor.TAnnoActionSwfSlide"},WindowType:{OPEN_YOUTUBE:"TYPE_YOUTUBE",OPEN_VIMEO:"TYPE_VIMEO",OPEN_DAILYMOTION:"TYPE_DAILYMOTION",OPEN_TYPE_WISTIA:"TYPE_WISTIA",OPEN_TYPE_YOUKU:"TYPE_YOUKU",OPEN_TYPE_QQ:"TYPE_QQ",OPEN_VIDEO:"0",OPEN_FLASH:"1",OPEN_SHOW_TEXT:"4"},PlayerType:{SKIN_1:"Skin 1",SKIN_2:"Skin 2",SKIN_3:"Skin 3"},AudioPlayer:{GLASS:"GlassAudioPlayer",
SIMPLE:"SimpleAudioPlayer",STANDARD1:"StandardAudioPlayer",STANDARD2:"StandardAudioPlayer02",STANDARD3:"StandardAudioPlayer03",STANDARD4:"StandardAudioPlayer04",STANDARD5:"StandardAudioPlayer05",STANDARD6:"StandardAudioPlayer06"},Effect:{FADEIN:"com.mobiano.flipbook.pageeditor.effect::TFadeInEffect",CUTTING:"com.mobiano.flipbook.pageeditor.effect::TCuttingEffect",FLY_IN:"com.mobiano.flipbook.pageeditor.effect::TFlyEffect",INDENTATION:"com.mobiano.flipbook.pageeditor.effect::TIndentationEffect"}};
Class("PageItemFactory",{createItem:function(b,c,d,f,g,h){if(!c)return null;var k=c.annotype,l=null;if(!this.browserSupport(k))return null;h=g+"-"+h;k==PageEditor.AnnoType.ANNO_LINK&&(l=new PageItem.Link(b,c,d,f));if(k==PageEditor.AnnoType.ANNO_YOUTUBE||k==PageEditor.AnnoType.ANNO_YOUTUBE1||k==PageEditor.AnnoType.ANNO_YOUTUBE2||k==PageEditor.AnnoType.ANNO_YOUTUBE3||k==PageEditor.AnnoType.ANNO_YOUTUBE4||k==PageEditor.AnnoType.ANNO_YOUTUBE6||k==PageEditor.AnnoType.ANNO_YOUTUBE7||k==PageEditor.AnnoType.ANNO_YOUTUBE8)l=
new PageItem.Youtube(b,c,d,f);k==PageEditor.AnnoType.ANNO_YOUTUBE5&&(l=new PageItem.PopUpVimeo(b,c,d,f,"youtube"));k==PageEditor.AnnoType.ANNO_VIMEO&&(l=new PageItem.Vimeo(b,c,d,f));k==PageEditor.AnnoType.ANNO_VIMEO2&&(l=new PageItem.PopUpVimeo(b,c,d,f,"vimeo"));k!=PageEditor.AnnoType.ANNO_AUDIO&&k!=PageEditor.AnnoType.ANNO_NEW_AUDIO||c.playerType!=PageEditor.PlayerType.SKIN_3||(l=new PageItem.Audio(b,c,d,f,"default"));k!=PageEditor.AnnoType.ANNO_AUDIO&&k!=PageEditor.AnnoType.ANNO_NEW_AUDIO||c.playerType!=
PageEditor.PlayerType.SKIN_1||(l=new PageItem.Audio(b,c,d,f,"skin1"));k!=PageEditor.AnnoType.ANNO_AUDIO&&k!=PageEditor.AnnoType.ANNO_NEW_AUDIO||c.playerType!=PageEditor.PlayerType.SKIN_2||(l=new PageItem.Audio(b,c,d,f,"skin2"));k==PageEditor.AnnoType.ANNO_AUDIO1&&(l=new PageItem.Audio(b,c,d,f,"advanced"));k==PageEditor.AnnoType.ANNO_AUDIO2&&(l=new PageItem.Audio(b,c,d,f,"wave"));k==PageEditor.AnnoType.ANNO_AUDIO4&&(l=new PageItem.Audio(b,c,d,f,"background"));if(k==PageEditor.AnnoType.ANNO_PLUGIN&&
c.className in audioThemeNames){var l=void 0,m=c.className;m==PageEditor.AudioPlayer.GLASS&&(l="glass");m==PageEditor.AudioPlayer.SIMPLE&&(l="simple");m==PageEditor.AudioPlayer.STANDARD1&&(l="enjoy");m==PageEditor.AudioPlayer.STANDARD2&&(l="decent");m==PageEditor.AudioPlayer.STANDARD3&&(l="tree");m==PageEditor.AudioPlayer.STANDARD4&&(l="christmas");m==PageEditor.AudioPlayer.STANDARD5&&(l="turnonoff");m==PageEditor.AudioPlayer.STANDARD6&&(l="fade");l=new PageItem.Audio(b,c,d,f,l)}k==PageEditor.AnnoType.ANNO_IMAGE&&
(c.imgOriginalProportions||(c.imgOriginalProportions="false"),l=new PageItem.Image(b,c,d,f));k==PageEditor.AnnoType.ANNO_BUTTON&&(l=new PageItem.Button(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_DYNAMICBUTTON&&(l=new PageItem.DynamicButton(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_SWF&&(l=new PageItem.FlashSwf(b,c,d,f));k==PageEditor.AnnoType.ANNO_FLASHSHOW&&(l=new PageItem.FlashShow(b,c,d,f));k==PageEditor.AnnoType.ANNO_HOTSPOTS&&(l=new PageItem.HotSpots(b,c,d,f));k==PageEditor.AnnoType.ANNO_LINE&&(l=
new PageItem.Line(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_ARROW&&(l=new PageItem.Arrow(b,c,d,f));k==PageEditor.AnnoType.ANNO_TRIANGLE&&(l=new PageItem.Triangle(b,c,d,f));k==PageEditor.AnnoType.ANNO_PRISMATIC&&(l=new PageItem.Prismatic(b,c,d,f));k==PageEditor.AnnoType.ANNO_CROSS&&(l=new PageItem.Cross(b,c,d,f));k==PageEditor.AnnoType.ANNO_VIRTUALEND&&(l=new PageItem.VirtualEnd(b,c,d,f));k==PageEditor.AnnoType.ANNO_RIGHTARROW&&(l=new PageItem.RightArrow(b,c,d,f));k==PageEditor.AnnoType.ANNO_TRAPEZOID&&
(l=new PageItem.Trapezoid(b,c,d,f));k==PageEditor.AnnoType.ANNO_DOVETAILED&&(l=new PageItem.Dovetailed(b,c,d,f));k==PageEditor.AnnoType.ANNO_FLOWCHART&&(l=new PageItem.FlowChart(b,c,d,f));k==PageEditor.AnnoType.ANNO_CYLINDER&&(l=new PageItem.Cylinder(b,c,d,f));k==PageEditor.AnnoType.ANNO_PENTAGON&&(l=new PageItem.Pentagon(b,c,d,f));k==PageEditor.AnnoType.ANNO_HEXAGON&&(l=new PageItem.Hexagon(b,c,d,f));k==PageEditor.AnnoType.ANNO_PARALLELOGRAM&&(l=new PageItem.Parallelogram(b,c,d,f));k==PageEditor.AnnoType.ANNO_ROUND&&
(l=new PageItem.Round(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_RECTANGLE&&(l=new PageItem.Rectangle(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_TEXT&&(l=new PageItem.Text(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_ROLLERTEXT&&(l=new PageItem.RollerText(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_AREA&&(l=new PageItem.Area(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_CALLOUT&&(l=new PageItem.Callout(b,c,d,f));k==PageEditor.AnnoType.ANNO_ATEXT&&(l=new PageItem.AText(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_STARTEXT&&
(l=new PageItem.StarText(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_TEXTANIM&&(l=new PageItem.TextAmin(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_ATIMAGE&&(l=new PageItem.PngImage(b,c,d,f));k==PageEditor.AnnoType.ANNO_EFFECTTEXT&&(l=new PageItem.EffectText(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_ADVANCEDSOUND&&(l=new PageItem.Sound(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_CAROUSEL&&(l=new PageItem.Carousel(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_DYNSHOW&&(l=new PageItem.DynamicShow(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_BANNER&&
(l=new PageItem.Banner(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_FLIPJUMP&&(l=new PageItem.FlipJump(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_PLUGIN&&c.className==PLUGIN_MAGNETICS&&(l=new PageItem.FocusJump(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_PLUGIN&&c.className==PLUGIN_ROTATE3D&&(l=new PageItem.Rotate3D(b,c,d,f,h));k==PageEditor.AnnoType.ANNO_VIDEO1&&(l=isPhone()||isPad()?new PageItem.PhoneVideo(b,c,d,f):new PageItem.Video(b,c,d,f,"smallblack"));k==PageEditor.AnnoType.ANNO_VIDEO2&&(l=isPhone()||
isPad()?new PageItem.PhoneVideo(b,c,d,f):new PageItem.LoopControlVideo(b,c,d,f));k==PageEditor.AnnoType.ANNO_PLUGIN&&c.className==PLUGIN_VIDEO1&&(l=isPhone()||isPad()?new PageItem.PhoneVideo(b,c,d,f):new PageItem.Video(b,c,d,f,"classic"));k==PageEditor.AnnoType.ANNO_PLUGIN&&c.className==PLUGIN_VIDEO2&&(l=isPhone()||isPad()?new PageItem.PhoneVideo(b,c,d,f):new PageItem.PopUpVideoItem(b,c,d,f));k==PageEditor.AnnoType.ANNO_VIDEO&&(l=isPhone()||isPad()?new PageItem.PhoneVideo(b,c,d,f):new PageItem.Video(b,
c,d,f,"round"));k==PageEditor.AnnoType.ANNOHTML_VIDEO&&(l=new PageItem.HtmlVideo(b,c,d,f));k==PageEditor.AnnoType.ANNO_ALPHATRANSITIONBANNER&&(l=new PageItem.AlphaTransitionBanner(b,c,d,f));k==PageEditor.AnnoType.ANNO_EMBEDDEDSLIDESHOW&&(l=new PageItem.EmbeddedSlideshow(b,c,d,f));k==PageEditor.AnnoType.ANNO_PRINT&&(l=new PageItem.Print(b,c,d,f,g));k==PageEditor.AnnoType.ANNO_ZOOM&&(global.popZoomBox||(global.popZoomBox=new PageItem.WindowZoomBox(tmpContainer)),l=new PageItem.WindowZoom(b,c,d,f,g));
k==PageEditor.AnnoType.ANNO_CART&&(l=new PageItem.ShoppingCart(b,c,d,f));return l},browserSupport:function(b){return isBelowIE9()?b==PageEditor.AnnoType.ANNO_LINK||b==PageEditor.AnnoType.ANNO_IMAGE||b==PageEditor.AnnoType.ANNO_TEXT||b==PageEditor.AnnoType.ANNO_ALPHATRANSITIONBANNER?!0:!1:!0}});
Class("PageEditorParser",{create:function(b,c,d){this.container=b;this.containerWidth=c;this.containerHeight=d},createItemsForPage:function(b){var c=new ObjectPool;if(!this.hasProfessional())return c;global.phoneVideoBox||!isPad()&&!isPhone()||(global.phoneVideoBox=new PhoneVideoBox(tmpContainer));var d=this.getPageAnnos();if(0>=b||d.length<b||0==d[b-1].length)return c;for(var f=new PageItemFactory,d=d[b-1],g=0;g<d.length;g++){var h=d[g];h&&(h=f.createItem(this.container,h,this.containerWidth,this.containerHeight,
b,g+1))&&c.add(h)}return c},hasProfessional:function(){if(!global.pageEditor)return!1;var b=this.getPageAnnos();if(!b||0==b.length)return!1;for(var c=0;c<b.length;c++){var d=b[c];if(d&&0<d.length)return!0}return!1},getPageAnnos:function(){var b=global.pageEditor;b instanceof Array||(b=b.pageAnnos);return b}});var DockMenu=Class({create:function(b,c,d){this.menu=$("<div id='dockMenu' class='dockMenu'></div>");this.menuContent=$("<div id='dockMenuContent' class='dockMenuContent'></div>");this.itemArray=[];this.width=0;this.height=130;b.append(this.menu);this.menu.append(this.menuContent);this.initStyle();this.addItem(c,d);this.initEvent();this.hide()},initStyle:function(){this.menu.css({width:"100%",height:this.height+"px"});this.menuContent.css({height:"100%",width:"100%",left:0,bottom:0})},addItem:function(b,
c){for(var d=BookInfo.getThumbnailPages(),f=c-b+1,g=0;g<f;g++){var h=rightToLeft?c-g:b+g;if(void 0!=d[h]){var k=d[h][1],l=[d[h][0]];void 0!=k&&l.push(k);k=new DockMenuItem(this.menuContent,l);k.pageIndex=d[h][0];this.itemArray.push(k)}}this.resize()},addObj:function(b,c){"before"==c?b.prependTo(this.menuContent):b.appendTo(this.menuContent)},resize:function(){windowWidth<$(this.menuContent).width()?$(this.menuContent).css({"margin-left":(windowWidth-$(this.menuContent).width())/2-25+"px"}):$(this.menuContent).css({"margin-left":"0px"})},
setPosition:function(b,c,d){if(void 0==d||null==d)d=["left","top"];this.menu.css(d[0],b);this.menu.css(d[1],c)},initEvent:function(){function b(){h||(h=!0,window.setTimeout(c,15))}function c(){for(var c=0;c<l.itemArray.length;c++)l.itemArray[c]&&l.itemArray[c].sizeDockIcons(d,f);h=!1;k&&(k=!1,b())}var d,f,g=this.menu,h=!1,k=!1,l=this;$(g).bind(_event._move,function(c){g.is(":visible")&&(d=c.pageX,f=c.pageY,k=!0,b())});$(g).bind(_event._leave,function(c){g.is(":visible")&&(f=d=1E3,k=!0,b())})},show:function(){this.menu.show();
this.resize();for(var b=0;b<this.itemArray.length;b++)this.itemArray[b].fillContent()},hide:function(){this.menu.hide()},clearHighLight:function(){this.currentItem&&this.currentItem.clearHighLight()},setHighLight:function(b){for(var c=0;c<this.itemArray.length;c++)0<=this.itemArray[c].imgArr.indexOf(b)&&(this.itemArray[c].setHighLight(),this.currentItem=this.itemArray[c]);for(c=0;c<this.itemArray.length;c++)this.itemArray[c].fillContent()}}),DockMenuItem=Class({create:function(b,c){this.item=$("<div id='item' class='dockMenuItem'></div>");
this.imgArr=c;this.doubleImage=2>c.length?!1:!0;this.itemHeight=60;this.itemWidth=0;this.toScale=1.5;this.padding=10;b.append(this.item);this.initItem()},initItem:function(){this.itemContent=$("<div class='dockMenuItemContent dockMenuItemShadow'></div>");this.itemCaption=$("<span class='dockMenuItemCaption'/>");this.itemCaptionAfter=$("<div class='dockMenuItemCaptionAfter'/>");this.item.append(this.itemContent);this.item.append(this.itemCaption);this.itemCaption.after(this.itemCaptionAfter);$(this.itemCaptionAfter).css({"background-image":"url("+
uiBaseURL+"span.png)"});this.addContent();this.resize(this.itemHeight);this.addEvent()},resize:function(b){var c=b*bookConfig.largePageWidth*2/bookConfig.largePageHeight;!1===this.doubleImage&&(c/=2);this.item.css({width:c+"px",height:"130px"});this.item.css({"padding-left":this.padding+"px"});this.itemContent.css({width:c+"px",height:b+"px"});this.resizeContent(c,b)},addContent:function(){!1===this.doubleImage?(this.itemIcon=$("<img/>"),this.itemContent.append(this.itemIcon)):!0===this.doubleImage&&
(this.itemLeftIcon=$("<img/>"),this.itemRightIcon=$("<img/>"),this.itemContent.append(this.itemLeftIcon),this.itemContent.append(this.itemRightIcon))},fillContent:function(){!1===this.doubleImage?(this.fillImage(this.itemIcon,this.imgArr[0]),this.itemCaption.text(this.imgArr[0])):!0===this.doubleImage&&(this.fillImage(this.itemLeftIcon,this.imgArr[0]),this.fillImage(this.itemRightIcon,this.imgArr[1]),this.itemCaption.text(this.imgArr[0]+"-"+this.imgArr[1]))},fillImage:function(b,c){var d=function(c){b.attr("src",
c)}.bind(this);fillImageAfterLoaded(c,"thumb",d)},resizeContent:function(b,c){!1===this.doubleImage?this.itemIcon.css({width:b+"px",height:c+"px"}):!0===this.doubleImage&&(this.itemLeftIcon.css({width:b/2+"px",height:c+"px"}),this.itemRightIcon.css({width:b/2+"px",height:c+"px"}),this.itemLeftIcon.css({position:"absolute",left:"0px"}),this.itemRightIcon.css({position:"absolute",left:b/2+"px"}))},sizeDockIcons:function(b,c){var d=this.itemHeight,f=this.itemHeight*this.toScale-d,g=$(this.item).offset().left+
$(this.item).outerWidth()/2,h=$(this.item).offset().top+$(this.item).outerHeight()/2,g=this.distance(g,h,b,c),d=(1-Math.min(1,Math.max(0,g/180)))*f+d;this.resize(d)},distance:function(b,c,d,f){b=d-b;c=f-c;return Math.sqrt(b*b+c*c)},addEvent:function(){this.item.bind(_event._end,function(){gotoPageFun(this.pageIndex)}.bind(this));this.item.bind(_event._over,function(){this.itemCaption.css("display","inline-block");this.itemCaptionAfter.css("display","block")}.bind(this));this.item.bind(_event._leave,
function(){this.itemCaption.hide();this.itemCaptionAfter.hide()}.bind(this))},clearHighLight:function(){this.itemContent.css("border","");this.itemContent.css("border-radius","0px")},setHighLight:function(){this.itemContent.css("border","3px solid #6bc30d");this.itemContent.css("border-radius","3px")}}),PageFlipShadow=Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:function(){bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),
this.flipFrontShadow=$("<div class='flip-vertical-topshadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow'></div>"));this.parent.append(this.flipBackShadow);this.parent.append(this.flipFrontShadow)},flip:function(b,c,d){var f=b.shadowRate;d=b.rotate;var g=0.9<f?1+2*(1-f)/0.1:3*f/0.9;if(isPhone()||isPad())g=1;f=0.9<f?0.2*(1-f)/0.1:0.1>f?0.2*f/0.1:0.2;if(bookConfig.FlipDirection){var h=(b.frontShadowDistance-100*(90<d?0:g))/
Math.cos(d*Math.PI/180),h=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:h}});b=transformCSS({scaleY:g,rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})}else h=(b.frontShadowDistance-100*(90<d?0:g))/Math.cos(d*Math.PI/180),h=transformCSS({scaleX:g,rotate:-d,tran:{x:h,y:0}}),b=transformCSS({scaleX:g,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}});this.flipFrontShadow.css(h);this.flipBackShadow.css(b);this.beforeFlip(d,c);isPhone()||isPad()||(this.flipFrontShadow.css({opacity:f}),this.flipBackShadow.css({opacity:f}))},
beforeFlip:function(b,c){c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));if(bookConfig.FlipDirection){90<b?(this.flipFrontShadow.css({bottom:"0px"}),this.flipBackShadow.css({top:"100%"})):(this.flipFrontShadow.css({bottom:"auto"}),this.flipBackShadow.css({top:"0px"}));
var d=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),f=90<b?100:0}else 90<b?(this.flipFrontShadow.css({right:"0px"}),this.flipBackShadow.css({left:"100%"})):(this.flipFrontShadow.css({right:"auto"}),this.flipBackShadow.css({left:"0px"})),d=90<b?100:0,f=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3;this.flipFrontShadow.css({"transform-origin":d+"% "+f+"%","-webkit-transform-origin":d+"% "+f+"%","-moz-transform-origin":d+"% "+f+"%","-ms-transform-origin":d+
"% "+f+"%"})},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"})},resize:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipBackShadow.css({width:this.maskWidth,left:(this.width-this.maskWidth)/2})):(this.flipFrontShadow.css({height:3*this.maskWidth,
top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}}),HardPageFlipShadow=Class({init:function(){this._super();var b=Color(bookConfig.thicknessColor);this.flipThickWidth=getMaxThicknessWidth()/5;this.flipThick=bookConfig.FlipDirection?$("<div class='flip-vertical-thick'></div>"):$("<div class='flip-thick'></div>");this.flipThick.css({background:b.reduce(50)});this.parent.append(this.flipThick)},flip:function(b,c){var d=b.shadowRate?b.shadowRate:
0,d=0.5>d?2*d:2*(1-d),f={"background-image":"none","box-shadow":"rgba(0,0,0,0.3) 0 0 2000px 5000px inset",width:"100%",height:"100%",top:0,left:0};this.flipFrontShadow.css(f);this.flipFrontShadow.css({opacity:d});this.flipBackShadow.css(f);this.flipBackShadow.css({opacity:d});d=bookConfig.FlipDirection?transformCSS({perspective:5E3,rotateX:-b.rotate,scaleY:this.flipThickWidth/6*d}):transformCSS({perspective:5E3,rotateY:-b.rotate,scaleX:this.flipThickWidth/6*d});this.flipThick.css(d);c?(this.flipBackShadow&&
this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));this.flipThick&&this.flipThick.css({visibility:"visible"})}}).extend(PageFlipShadow);
Class("CoverShadow",{create:function(b,c){this.parent=b;this.direction=bookConfig.FlipDirection;this.init()},init:virtual_function,destroy:virtual_function,onResize:function(){this.direction?(this.parentWidth=this.parent.height(),this.parentHeight=this.parent.width(),this.rotate.delay(this,1)):(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height())},rotate:function(){var b=transformCSS({rotate:90,tran:{x:this.parentHeight,y:0},origin:{x:0,y:0}});this.flip&&(b=transformCSS({scaleX:-1,
rotate:90,tran:{x:this.parentHeight,y:this.parentWidth},origin:{x:0,y:0}}));this.coverShadow&&(this.coverShadow.css({width:this.parentWidth+"px",height:this.parentHeight+"px"}),this.coverShadow.css(b))}});
Class("HardCoverShadow",{init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$("<div></div>");this.topBorder=$('<div class="hard_top_border"></div>');this.bottomBorder=$('<div class="hard_bottom_border hard_bottom_border_width"></div>');this.rightBorder=$('<div class="hard_right_border"></div>');this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.topBorder);this.coverShadow.append(this.bottomBorder);
this.coverShadow.append(this.rightBorder)},onResize:function(){this._super();this.rightBorder.css({height:this.parentHeight-3+"px"})},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow);
Class("OuterHardCoverShadow",{create:function(b,c,d){this.style=c;this.flip=!!d;this._super(b)},init:function(){this._super();this.leftBorder.addClass("hard_left_border");this.leftBody=$('<div class="hard_left_body"></div>');this.coverShadow.append(this.leftBody);this.coverShadow.addClass(this.style);this.flip&&this.coverShadow.addClass("flip_x");this.onResize()}}).extend(HardCoverShadow);
Class("InnerHardCoverShadow",{create:function(b,c,d,f,g){this.style=c;this.flip=!!d;void 0==f&&(f=0);this.borderWidth=f;this.showLeftShadow=g;this._super(b)},init:function(){this._super();this.showLeftShadow?(this.leftBorder.addClass("hard_inner_left_border"),this.leftCoverBorder=$('<div class="hard_left_cover_border"></div>'),this.coverShadow.append(this.leftCoverBorder)):this.leftBorder.css({display:"none"});this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},onResize:function(){this._super();
this.showLeftShadow&&(this.bottomBorder.css({left:"0px",width:"100%"}),this.leftBorder.css({top:this.borderWidth+"px",height:this.parentHeight-2*this.borderWidth+"px"}));this.flip?0!=bookConfig.LeftShadowAlpha&&0!=bookConfig.LeftShadowWidth||this.coverShadow.css("z-index",-1):0!=bookConfig.RightShadowAlpha&&0!=bookConfig.RightShadowWidth||this.coverShadow.css("z-index",-1)}}).extend(HardCoverShadow);
Class("NormalCoverShadow",{create:function(b,c,d){this.style=c;this.flip=!!d;this._super(b)},init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');this.coverShadow.addClass(this.style);isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$('<div class="normal_left_border"></div>');this.leftBody=$('<div class="normal_left_body"></div>');this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.leftBody);this.flip&&this.coverShadow.addClass("flip_x");
this.onResize()},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow);
Class("PageShadow",{create:function(b,c,d){this.parent=b;this.pageIndex=c;this.isLeftPage=d;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.bindingType=bookConfig.BindingType;this.bindingType||(this.bindingType="side");this.midShadow=this.coverShadow=null},addShadow:function(){this.isEmpty()||this.destroy();this.addCoverShadow();var b=parseBool(bookConfig.addPaperCoil);null!=this.coverShadow||b?this.hidePageShadow():this.addPageShadow();this.onResize()},isEmpty:function(){return null==
this.coverShadow&&null==this.midShadow},addCoverShadow:function(){this.coverShadow=this.createCoverShadow()},createCoverShadow:virtual_function,addPageShadow:function(){this.midShadow=this.findPageShadow();this.midShadow||(this.midShadow=$("<div name='midShadow'></div>"));var b=1;this.isLeftPage?(bookConfig.FlipDirection?this.midShadow.attr("class","upShadow"):this.midShadow.attr("class","leftShadow"),b=bookConfig.LeftShadowAlpha):(bookConfig.FlipDirection?this.midShadow.attr("class","downShadow"):
this.midShadow.attr("class","rightShadow"),b=bookConfig.RightShadowAlpha);this.midShadow.css({opacity:b});this.parent.append(this.midShadow)},findPageShadow:function(){if(this.midShadow)return this.midShadow;var b=this.parent.children("div[name=midShadow]");return b[0]?$(b[0]):null},hidePageShadow:function(){(this.midShadow=this.findPageShadow())&&this.midShadow.css({display:"none"})},resizePageShadow:function(b){this.midShadow=this.findPageShadow();if(null!=this.midShadow){var c=bookConfig.LeftShadowWidth;
this.isLeftPage||(c=bookConfig.RightShadowWidth);c=parseInt(c/450*b);bookConfig.FlipDirection?this.midShadow.css({height:c+"px"}):this.midShadow.css({width:c+"px"})}},onResize:function(b,c){void 0==b?(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height()):(this.parentWidth=b,this.parentHeight=c);if(this.coverShadow)this.coverShadow.onResize();this.resizePageShadow(this.parentWidth)},destroy:function(){null!=this.coverShadow&&(this.coverShadow.destroy(),this.coverShadow=null);
null!=this.midShadow&&(this.midShadow=null)}});
Class("NormalPageShadow",{create:function(b,c,d){this._super(b,c,d);this.evenPageCount=totalPageCount},createCoverShadow:function(){var b=1==this.pageIndex&&!bookConfig.isTheBookOpen,c=2==this.pageIndex&&!bookConfig.isTheBookOpen||1==this.pageIndex&&bookConfig.isTheBookOpen,d=this.pageIndex==this.evenPageCount,f=this.pageIndex==this.evenPageCount-1,g=4<this.evenPageCount&&!bookConfig.isTheBookOpen||3<this.evenPageCount&&bookConfig.isTheBookOpen,h=this.isLeftPage;if(this.isHardPage){if(b||d)return new OuterHardCoverShadow(this.parent,
this.bindingType,h);if(c||f)return new InnerHardCoverShadow(this.parent,this.bindingType,h,bookConfig.hardCoverBorderWidth,g)}else if(b||d)return new NormalCoverShadow(this.parent,this.bindingType,h);return null}}).extend("PageShadow");
Class("SinglePageShadow",{create:function(b,c,d){this._super(b,c,d);this.isRightToLeft=parseBool(bookConfig.RightToLeft)},createCoverShadow:function(){var b=1==this.pageIndex,c=this.pageIndex==bookConfig.totalPageCount;if(this.isHardPage){if(b)return new OuterHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft);if(c)return new InnerHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft,bookConfig.hardCoverBorderWidth,!0)}else if(b)return new NormalCoverShadow(this.parent,this.bindingType,
this.isRightToLeft);return null}}).extend("PageShadow");
Class("CatalogPageShadow",{create:function(b,c,d){this._super(b,c,d);this.evenPageCount=totalPageCount;this.bindingType="catalog"},createCoverShadow:function(){var b=1==this.pageIndex&&!bookConfig.isTheBookOpen,c=2==this.pageIndex&&!bookConfig.isTheBookOpen||1==this.pageIndex&&bookConfig.isTheBookOpen,d=this.pageIndex==this.evenPageCount,f=this.pageIndex==this.evenPageCount-1,g=4<this.evenPageCount&&!bookConfig.isTheBookOpen||3<this.evenPageCount&&bookConfig.isTheBookOpen,h=this.isLeftPage;if(this.isHardPage){if(b||
d)return new OuterHardCoverShadow(this.parent,this.bindingType,h);if(c||f)return new InnerHardCoverShadow(this.parent,this.bindingType,h,0,g)}else if(b||d)return new NormalCoverShadow(this.parent,this.bindingType,h);return null},addPageShadow:function(){this._super();bookConfig.FlipDirection?this.isLeftPage?this.midShadow.attr("class","catalogUpShadow"):this.midShadow.attr("class","catalogDownShadow"):this.isLeftPage?this.midShadow.attr("class","catalogLeftShadow"):this.midShadow.attr("class","catalogRightShadow")}}).extend("PageShadow");
Class("SlidePageShadow",{createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow");
var BorderSewing={deep:{top:{url:"deep_top_sewing.png",width:28,height:42},left:{url:"deep_left_sewing.png",width:71,height:28},right:{url:"deep_right_sewing.png",width:71,height:28},bottom:{url:"deep_bottom_sewing.png",width:28,height:42},renderBorder:!0},normal:{top:{url:"normal_top_sewing.png",width:28,height:10},left:{url:"normal_left_sewing.png",width:10,height:28},right:{url:"normal_right_sewing.png",width:10,height:28},bottom:{url:"normal_bottom_sewing.png",width:28,height:20},renderBorder:!0},
flat:{top:{url:"flat_top_sewing.png",width:28,height:10},left:{url:"flat_left_sewing.png",width:10,height:28},right:{url:"flat_right_sewing.png",width:10,height:28},bottom:{url:"flat_bottom_sewing.png",width:28,height:10},renderBorder:!1}},PageTextureResource={leather1:{texture:"leather1.png",sewing:BorderSewing.deep},leather2:{texture:"leather2.png",sewing:BorderSewing.normal},cloth1:{texture:"cloth1.png",sewing:BorderSewing.flat},cloth2:{texture:"cloth2.png",sewing:BorderSewing.flat},cloth3:{texture:"cloth3.png",
sewing:BorderSewing.flat},cloth4:{texture:"cloth4.png",sewing:BorderSewing.normal},cardboard1:{texture:"cardboard1.png",sewing:null},cardboard2:{texture:"cardboard2.png",sewing:null},cardboard3:{texture:"cardboard3.png",sewing:null},silk1:{texture:"silk1.png",sewing:BorderSewing.flat},silk2:{texture:"silk2.png",sewing:BorderSewing.flat},silk3:{texture:"silk3.png",sewing:BorderSewing.flat},silk4:{texture:"silk4.png",sewing:BorderSewing.flat},wood1:{texture:"wood1.png",sewing:null},wood2:{texture:"wood2.png",
sewing:null}};
Class("PageTexture",{create:function(b,c,d){this.parent=b;this.pageIndex=c;this.isLeftPage=d;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.borderWidth=bookConfig.hardCoverBorderWidth-4;this.initResource()},initResource:function(){this.name=bookConfig.coverTexture;this.resource=PageTextureResource[this.name]},render:function(){this.isEmpty()||this.destroy();this.isCover&&this.renderCover()},isEmpty:function(){return null==this.texture},renderPage:function(){this.texture=null},
renderCover:function(){this.isHardPage&&this.resource&&(this.renderTexture(),this.renderSewing(),this.onResize())},renderTexture:function(){this.texture=$("<div id='page_texture'></div>");this.texture.css({position:"absolute","pointer-events":"none","z-index":1,width:"100%",height:"100%"});this.parent.append(this.texture);var b=uiBaseURL+this.resource.texture;this.isOutCover?this.texture.css({"background-image":"url("+b+")","background-repeat":"repeat"}):this.parent.css({"background-image":"url("+
b+")","background-repeat":"repeat"})},renderSewing:function(){if(!(0>=this.borderWidth)&&this.resource.sewing){var b=this.resource.sewing;this.isInnerCover&&(b=BorderSewing.flat);bookConfig.FlipDirection?(this.left_texture=$("<div id='left_texture'></div>"),this.left_texture.css({position:"absolute",top:this.borderWidth+"px",left:this.borderWidth+"px",width:b.right.width+"px","background-image":"url("+uiBaseURL+b.left.url+")","background-repeat":"repeat-y"}),this.texture.append(this.left_texture)):
(this.top_texture=$("<div id='top_texture'></div>"),this.top_texture.css({position:"absolute",top:this.borderWidth+"px",left:this.borderWidth+"px",height:b.top.height+"px","background-image":"url("+uiBaseURL+b.top.url+")","background-repeat":"repeat-x"}),this.texture.append(this.top_texture));this.right_texture=$("<div id='right_texture'></div>");this.right_texture.css({position:"absolute",top:this.borderWidth+"px",right:this.borderWidth+"px",width:b.right.width+"px","background-image":"url("+uiBaseURL+
b.right.url+")","background-repeat":"repeat-y"});this.texture.append(this.right_texture);this.bottom_texture=$("<div id='bottom_texture'></div>");this.bottom_texture.css({position:"absolute",bottom:this.borderWidth+"px",right:this.borderWidth+"px",height:b.bottom.height+"px","background-image":"url("+uiBaseURL+b.bottom.url+")","background-repeat":"repeat-x"});this.texture.append(this.bottom_texture);this.isLeftPage&&(bookConfig.FlipDirection?(this.bottom_texture.addClass("flip_y"),this.bottom_texture.css({top:this.borderWidth+
"px",bottom:"auto"}),this.left_texture&&this.left_texture.css({bottom:this.borderWidth+"px",top:"auto"}),this.right_texture.css({bottom:this.borderWidth+"px",top:"auto"})):(this.right_texture.addClass("flip_x"),this.right_texture.css({left:this.borderWidth+"px",right:"auto"}),this.top_texture&&this.top_texture.css({right:this.borderWidth+"px",left:"auto"}),this.bottom_texture.css({right:this.borderWidth+"px",left:"auto"})));this.resource.sewing.renderBorder&&this.renderBorder()}},renderBorder:function(){0!=
this.borderWidth&&(bookConfig.FlipDirection?(this.left_texture_border=$("<div id='left_texture_border'></div>"),this.left_texture_border.css({position:"absolute",left:"0px",width:this.borderWidth+"px",height:"100%","background-image":$.browser.prefix+"linear-gradient(left, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.left_texture_border)):(this.top_texture_border=$("<div id='top_texture_border'></div>"),this.top_texture_border.css({position:"absolute",
top:"0px",width:"100%",height:this.borderWidth+"px","background-image":$.browser.prefix+"linear-gradient(top, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.top_texture_border)),this.right_texture_border=$("<div id='right_texture_border'></div>"),this.right_texture_border.css({position:"absolute",right:"0px",width:this.borderWidth+"px",height:"100%","background-image":$.browser.prefix+"linear-gradient(right, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),
this.texture.append(this.right_texture_border),this.bottom_texture_border=$("<div id='bottom_texture_border'></div>"),this.bottom_texture_border.css({position:"absolute",bottom:"0px",width:"100%",height:this.borderWidth+"px","background-image":$.browser.prefix+"linear-gradient(bottom, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.bottom_texture_border),this.isLeftPage&&(bookConfig.FlipDirection?this.bottom_texture_border.css({top:"0px",bottom:"auto"}):
this.right_texture_border.css({left:"0px",right:"auto"})))},onResize:function(){this.parentWidth=this.parent.width();this.parentHeight=this.parent.height();this.top_texture&&this.top_texture.css({width:this.parentWidth-2*this.borderWidth+"px"});this.left_texture&&this.left_texture.css({height:this.parentHeight-2*this.borderWidth+"px"});this.right_texture&&this.right_texture.css({height:this.parentHeight-2*this.borderWidth+"px"});this.bottom_texture&&this.bottom_texture.css({width:this.parentWidth-
2*this.borderWidth+"px"})},destroy:function(){this.texture&&(this.texture.remove(),this.texture=null);this.top_texture&&(this.top_texture.remove(),this.top_texture=null);this.left_texture&&(this.left_texture.remove(),this.left_texture=null);this.right_texture&&(this.right_texture.remove(),this.right_texture=null);this.bottom_texture&&(this.bottom_texture.remove(),this.bottom_texture=null);this.left_texture_border&&(this.left_texture_border.remove(),this.left_texture_border=null);this.top_texture_border&&
(this.top_texture_border.remove(),this.top_texture_border=null);this.right_texture_border&&(this.right_texture_border.remove(),this.right_texture_border=null);this.bottom_texture_border&&(this.bottom_texture_border.remove(),this.bottom_texture_border=null)}});
Class("NormalPageTexture",{create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c&&!bookConfig.isTheBookOpen||c==totalPageCount;this.isInnerCover=2==c&&!bookConfig.isTheBookOpen||1==c&&bookConfig.isTheBookOpen||c==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("SinglePageTexture",{create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c;this.isInnerCover=c==bookConfig.totalPageCount;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");
Class("CatalogPageTexture",{create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c&&!bookConfig.isTheBookOpen||c==totalPageCount;this.isInnerCover=2==c&&!bookConfig.isTheBookOpen||1==c&&bookConfig.isTheBookOpen||c==totalPageCount-1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture");Class("SlidePageTexture",{create:function(b,c,d){this._super(b,c,d);this.isCover=!1}}).extend("PageTexture");
Class("PageRendering",{create:function(b,c,d){this.parent=b;this.pageIndex=c;this.isLeftPage=getPageDirection(c,d);this.pageShadow=getPageShadow(b,c,this.isLeftPage,d);this.pageTexture=getPageTexture(b,c,this.isLeftPage,d)},render:function(){this.addCoil();this.addPageShadow();this.addPageTexture()},addCoil:function(){parseBool(bookConfig.addPaperCoil)&&(this.midCoil=$("<div style='z-index:6;'></div>"),bookConfig.FlipDirection?this.isLeftPage?this.midCoil.attr("class","upPaperCoil"):this.midCoil.attr("class",
"downPaperCoil"):this.isLeftPage?this.midCoil.attr("class","leftPaperCoil"):this.midCoil.attr("class","rightPaperCoil"),this.parent.append(this.midCoil))},addPageShadow:function(){this.pageShadow.addShadow()},addPageTexture:function(){this.pageTexture.render()},hideMiddleShadow:function(){this.pageShadow.hidePageShadow()},onResize:function(b,c){if(this.pageShadow)this.pageShadow.onResize(b,c);if(this.pageTexture)this.pageTexture.onResize(b,c)},destroy:function(){this.pageShadow&&(this.pageShadow.destroy(),
this.pageShadow=null);this.pageTexture&&(this.pageTexture.destroy(),this.pageTexture=null)}});function getPageShadow(b,c,d,f){if(f==BookType.normal_book)return new NormalPageShadow(b,c,d);if(f==BookType.single_book)return new SinglePageShadow(b,c,d);if(f==BookType.catalog_book)return new CatalogPageShadow(b,c,d);if(f==BookType.slide_book||f==BookType.singleSlide_book)return new SlidePageShadow(b,c,d)}
function getPageTexture(b,c,d,f){if(f==BookType.normal_book)return new NormalPageTexture(b,c,d);if(f==BookType.single_book)return new SinglePageTexture(b,c,d);if(f==BookType.catalog_book)return new CatalogPageTexture(b,c,d);if(f==BookType.slide_book||f==BookType.singleSlide_book)return new SlidePageTexture(b,c,d)}
function getPageDirection(b,c){switch(c){case BookType.single_book:return bookConfig.RightToLeft?!0:!1;case BookType.singleSlide_book:return bookConfig.RightToLeft?!0:!1;default:return BookInfo.isLeftPage(b,!0)}}
var setPageURL=function(b,c,d){adjustPageURL(b,c,d);1==c&&BookInfo.getBook().fillPage(b,!0)},adjustPageURL=function(b,c,d){b=parseInt(b)-1;global.fliphtml5_pages||(global.fliphtml5_pages=[]);global.fliphtml5_pages[b]||(global.fliphtml5_pages[b]={});switch(c){case 0:global.fliphtml5_pages[b].l=d;break;case 1:global.fliphtml5_pages[b].n=d;break;case 2:global.fliphtml5_pages[b].t=d}};window.isSupportWebp=!1;
(function(){function b(b){window.isSupportWebp=b&&"load"===b.type?1==c.width:!1}var c=new Image;c.onerror=b;c.onload=b;c.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})();
var useTheAliCloudChart=function(b,c){if(bookConfig.useTheAliCloudChart)if(isPad()||isPhone())useTheAliCloudChartOnMobile();else{var d=window.screen.availHeight-bookConfig.topMargin-bookConfig.bottomMargin;c||(c=d-50,b=Math.round(c*bookConfig.largePageWidth/bookConfig.largePageHeight));for(var d=bookConfig.totalPageCount,f=1;f<=d;f++){var g=realPageDir(f,"normal",d),h=realPageDir(f,"thumb",d),g=g.removeStartFrom("?"),g=0<=g.indexOf("?")?g+"&x-oss-process=image/resize,h_"+c+",w_"+b:g+"?x-oss-process=image/resize,h_"+
c+",w_"+b;window.isSupportWebp&&(g+="/format,webp",h=0<=h.indexOf("?")?h+"&x-oss-process=image/format,webp":h+"?x-oss-process=image/format,webp");switch(bookConfig.textClarityEnhancement){case 1:g+="/sharpen,100";break;case 2:g+="/sharpen,150";break;case 3:g+="/sharpen,200"}adjustPageURL(f,0,g);adjustPageURL(f,1,g);adjustPageURL(f,2,h)}}},useTheAliCloudChartOnMobile=function(){if(window.isSupportWebp)for(var b=bookConfig.totalPageCount,c=1;c<=b;c++){var d=realPageDir(c,"normal",b),f=realPageDir(c,
"thumb",b),d=0<=d.indexOf("?")?d+"&x-oss-process=image/format,webp":d+"?x-oss-process=image/format,webp",f=0<=f.indexOf("?")?f+"&x-oss-process=image/format,webp":f+"?x-oss-process=image/format,webp";switch(bookConfig.textClarityEnhancement){case 1:d+="/sharpen,100";break;case 2:d+="/sharpen,150";break;case 3:d+="/sharpen,200"}adjustPageURL(c,0,d);adjustPageURL(c,1,d);adjustPageURL(c,2,f)}},getPageDir=function(b,c,d){(b=realPageDir(b,c,d))&&(b=fixURLValue(b));return b},realPageDir=function(b,c,d){if(0>=
b||void 0!=d&&b>d)return"";if(bookConfig.getPageURL){var f=0;"normal"==c&&(f=1);"thumb"==c&&(f=2);return bookConfig.getPageURL(b,f)}d=getFileFormat(b);var g=global.fliphtml5_pages;if(void 0!=g&&0<g.length){g=g[b-1];if(void 0!=g&&null!=g)switch(c){case "normal":f=void 0==g.n?g.l:g.n;break;case "large":f=g.l;break;case "thumb":f=g.t}if(void 0==f)switch(c){case "normal":return f=bookConfig.normalPath+b+d;case "large":return f=bookConfig.largePath+b+d;case "thumb":return f=bookConfig.thumbPath+b+d}return void 0==
f?"":f}switch(c){case "normal":return f=bookConfig.normalPath+b+d,void 0==f?"":f;case "large":return f=bookConfig.largePath+b+d,void 0==f?"":f;case "thumb":return f=bookConfig.thumbPath+b+d,void 0==f?"":f}},fillImageAfterLoaded=function(b,c,d){if(b&&c){var f=getPageDir(b,c,originTotalPageCount);if(fillImageOrNot(f,b))if(-1<f.indexOf(".js"))if(global[decodeDatabasePrefix(c)+b]&&"string"==typeof global[decodeDatabasePrefix(c)+b]){var g=dataBase64Str(b,c),h=$("<img src='"+g+"'/>");h.on("load",function(){d&&
d(g,f,this,b)})}else loadJavascript(f,function(g){var h=dataBase64Str(b,c,g);$("<img src='"+h+"'/>").on("load",function(){d&&d(h,f,this,b)})},function(){});else bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(f=f.removeStartFrom("?")),h=$("<img src='"+f+"'/>"),h.on("load",function(){d&&d(f,f,this,b)});else!window.userList&&1<passwardType()&&loadJavascript(bookConfig.userListPath,function(){fillImageAfterLoaded(b,c,d)},function(){})}},fillImageOrNot=function(b,c){return!b||"string"!=
typeof b||passwardType()&&bookConfig.excludeFrontPages&&c>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?!1:!0},fitPageWidthHeight=function(b,c,d,f){d||(d=bookConfig.largePageWidth);f||(f=bookConfig.largePageHeight);var g=Point(0,0);b/c>d/f?(g.x=2*parseInt(d*c/(2*f)),g.y=c):(g.x=2*parseInt(b/2),g.y=b*f/d);return g},getFileFormat=function(b){return!passwardType()||!bookConfig.excludeFrontPages||b<=parseInt(bookConfig.excludeFrontPages)?".jpg":".js"},decodeBase64=function(b,c){var d=encodeDatabasePrefix(c);
if(global[d+b]&&"string"==typeof global[d+b]){var f=getRealkey();if(f)return d=base64.decode(global[d+b]),f=rc4(f,d),base64.encode(f)}},dataBase64Str=function(b,c,d){if(verifyPassward()){var f=decodeDatabasePrefix(c),g=encodeDatabasePrefix(c);if(global[f+b])return global[g+b]=null,d&&$(d).remove(),global[f+b];c="data:image/jpg;base64,"+decodeBase64(b,c);global[f+b]=c;global[g+b]=null;d&&$(d).remove();return c}},decodeDatabasePrefix=function(b){switch(b){case "normal":return"dataBase";case "large":return"dataBase";
case "thum":return"dataBaseThum";case "thumb":return"dataBaseThum"}},encodeDatabasePrefix=function(b){switch(b){case "normal":return"page";case "large":return"page";case "thum":return"thumb";case "thumb":return"thumb"}},userList,getRealkey=function(){if(1==passwardType())return getSingleRealKey();if(userList){var b=getPassward(),c=getUsername();if(b&&c&&userList&&"string"==typeof userList[username])return getListRealKey(c,b,userList[username])}},getSingleRealKey=function(){if(bookConfig.singlePasswordKey&&
"string"==typeof bookConfig.singlePasswordKey){var b=getPassward();if(b){var c=parsHexToNormalString(bookConfig.singlePasswordKey);return rc4(b,c)}}},getListRealKey=function(b,c,d){b=(b+String.fromCharCode(9)+c).MD5(32);b=parsHexToNormalString(b);b=base64.encode(b);d=d.remove(b);d=d.replace(/==?$/,"");if(d=base64.decode(d))return c=(b+c).cycleToLength(128),rc4(c,d)},verifyPassward=function(){var b=getPassward(),c=getUsername();if(1==passwardType())return b?b.MD5(32).toLowerCase()===bookConfig.singlePasswordMD5.toLowerCase():
void 0;if(bookConfig.userListPath&&(userList||loadJavascript(bookConfig.userListPath,verifyPassward,function(){}),userList&&b&&c&&"string"==typeof userList[c]))return b=(c+String.fromCharCode(9)+b).MD5(32),b=parsHexToNormalString(b),b=base64.encode(b),userList[c].substring(0,24)===b},passwardType=function(){if(!bookConfig.securityType||1==parseInt(bookConfig.securityType))return 0;if(bookConfig.securityType&&2==parseInt(bookConfig.securityType))return 1;if(bookConfig.securityType&&3==parseInt(bookConfig.securityType))return 2},
getPassward=function(){return document.getElementById("passward_input")?$("#passward_input").val():global.passward},getUsername=function(){return document.getElementById("username_input")?$("#username_input").val():global.username},PageInfo=Class({create:function(b){this.getPageInfoArray(b)},getPageInfoArray:function(b){if(this.pageInfoArray)return this.pageInfoArray;this.initPageInfo(b);return this.pageInfoArray},initPageInfo:function(b){this.pageInfoArray=[{}];for(var c=1;c<=totalPageCount;c++){var d=
this.getPageInfo(c,b),f=this.getNextPageInfo(c,b);f&&(d.pageWidth=Math.max(d.pageWidth,f.pageWidth),d.pageHeight=Math.max(d.pageHeight,f.pageHeight),d.opacity=Math.max(d.opacity,f.opacity),1!=d.pageWidth||1!=d.pageWidth||1!=d.pageWidth)&&(d.isMiniPage=!0);this.pageInfoArray.push(d)}},getNextPageInfo:function(b,c){var d=b;if(!c)return d=bookConfig.isTheBookOpen?0==b%2?b+1:b-1:0==b%2?b-1:b+1,this.getPageInfo(d,c)},getPageInfo:function(b,c){if(!(0>=b||b>totalPageCount)){var d=1,f=1,g=1;window.fliphtml5_pages&&
window.fliphtml5_pages[b-1]&&(g=window.fliphtml5_pages[b-1],d=g.w?Math.min(g.w,1):1,f=g.h?Math.min(g.h,1):1,g=g.o?Math.min(g.o,1):1);if(1==b||b==totalPageCount)f=d=1;return{pageWidth:d,pageHeight:f,opacity:g}}},statics:{getPageColor:function(b){return window.pages_information&&window.pages_information[b-1]&&window.pages_information[b-1].pageColor?Color(window.pages_information[b-1].pageColor).toString():bookConfig.pageBackgroundColor},pageIsStrech:function(b){return window.pages_information&&window.pages_information[b-
1]&&window.pages_information[b-1].pageIsStrech?parseBool(window.pages_information[b-1].pageIsStrech):bookConfig.bookPageStretch}}}),Page=Class({isHardPage:!0,onPageLoaded:null,create:function(b,c,d,f){this.bookType=d;this.pageIndex=b;this.zIndex=this.pageHeight=this.pageWidth=this.height=this.width=0;this.visible=!0;this.loaded=0;this.onPageLoaded=f;this.initHtml(b,c)},initHtml:function(b,c){this.initSide();this.side.attr("id",c+b);this.initContents();this.addFlipShadow()},initSide:function(){this.container=
this.side=$("<div style='position:absolute;'></div>")},initContents:function(){this.initPageSide();var b=PageInfo.getPageColor(this.pageIndex);this.tmpContent=$("<div class='side-content' style='background-color : "+b+";'></div>");this.pageSide.append(this.tmpContent);this.sideImage=$("<div style='position:absolute;z-index:0;width:100%;height:100%;top:0;left:0;'/>");this.tmpContent.append(this.sideImage)},initPageSide:function(){this.pageSide=this.side},loading:function(){this.originalImageLoaded||
(this.loadingImage||(this.loadingImage=$("<img class='loadingImage' src='"+uiBaseURL+"loading.gif'/>")),this.tmpContent.append(this.loadingImage))},unLoading:function(){this.loadingImage&&this.loadingImage.remove();this.loadingImage=null},ballScaling:function(){window.setTimeout(function(){this.originalImageLoaded||this.loadingImage||(this.loadingImage=$("<img class='loadingImage' src='"+uiBaseURL+"loading.gif'/>"),this.tmpContent.append(this.loadingImage))}.bind(this),500)},unBallScaling:function(){this.unLoading()},
renderPage:function(){this.rendering&&(this.rendering.destroy(),this.rendering=null);this.rendering=new PageRendering(this.side,this.pageIndex,this.bookType);this.rendering.onResize(this.width,this.height);this.rendering.render()},hideMiddleShadow:function(){this.rendering&&this.rendering.hideMiddleShadow()},mirrorSide:function(){this.isMirrorSide=!0;this.sideImage.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-ms-transform":"scaleX(-1)",opacity:0.2});
this.unLoading()},setZIndex:function(b){this.zIndex=b;this.side.css("z-index",b)},getZIndex:function(){return this.zIndex},setCSSByStyle:function(b){this.side.css(b)},setCSSByName:function(b){this.side.attr("class",b)},remove:function(){this.removeAttachment();this.sideImage&&this.sideImage.remove();this.side.remove();this.sideImage=this.side=void 0},getSide:function(){return this.side},setParent:function(b){this.parent=b},removeFromParent:function(){this.side.remove()},appendToParent:function(){this.side.appendTo(this.parent)},
setLeftOrRight:function(b){(this.isLeft=b)?this.setCSSByName("left-side"):this.setCSSByName("right-side")},setUpOrDown:function(b){(this.isUp=b)?this.setCSSByName("up-side"):this.setCSSByName("down-side")},centerPage:function(){this.isLeft=!1;this.setCSSByName("center-side")},fillContent:function(){this.fillPage(this.pageIndex)},fillPage:function(b,c,d){this.isMirrorSide&&!bookConfig.showMirrorSide||b!=this.pageIndex||this.originalImageLoaded||(d||(d="normal",(isPhone()||isPad())&&bookConfig.highDefinitionConversion&&
!c&&(d="thumb"),this.isMirrorSide&&(d="thumb")),"normal"==d&&this.loadOriginalImage(c,d),"thumb"==d&&this.loadPreviewImage(d))},setVisible:function(b){b?this.side.show():this.side.hide();this.visible=b},onResize:function(b,c){this.resizePage(b,c);this.resizeFlipShadow(b,c);if(this.rendering)this.rendering.onResize(b,c)},resizePage:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.attachW=
parseInt(100*b/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.attachH=parseInt(100*c/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.pageSideWidth=this.width;this.pageSideHeight=this.height;this.pageWidth=this.width;this.pageHeight=this.height;this.side.css({width:b,height:c});this.tmpContent.css({width:this.attachW,height:this.attachH,top:-this.attachH*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.attachW*parseFloat(bookConfig.visibleAreaLeft)/
100});this.resizeSideImage()},resizeSideImage:function(){},zoomInSideImage:function(){},zoomOutSideImage:function(){},enterSide:function(){(isPhone()||isPad())&&bookConfig.highDefinitionConversion&&!this.originalImageLoaded&&(this.unLoading(),this.ballScaling(),this.loadOriginalImage())},leaveSide:function(){},addFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new PageFlipShadow(this.side,this.pageIndex))},setFlipShadow:function(b,c,d){this.pageFlipShadow&&this.pageFlipShadow.flip(b,
c,d)},clearFlipShadow:function(){this.pageFlipShadow&&this.pageFlipShadow.clear();this.side.removeClass("boxShadow")},resizeFlipShadow:function(b,c){this.pageFlipShadow&&this.pageFlipShadow.resize(b,c)},initAttachment:function(){},resizeAttachment:function(){},removeAttachment:function(){}}),PageSide=Class({loadOriginalImage:function(b){var c=getPageDir(this.pageIndex,"normal",originTotalPageCount);if(c!=this.imageURL||b)b=function(b,c,g){imageLoaded[this.pageIndex]=!0;this.onOriginalImageLoaded(b,
c,g);if(this.onPageLoaded)this.onPageLoaded(this.pageIndex)}.bind(this),this.imageURL=c,fillImageAfterLoaded(this.pageIndex,"normal",b)},loadPreviewImage:function(){var b=getPageDir(this.pageIndex,"thumb",originTotalPageCount);if(b!=this.imageURL){var c=function(b,c,g){imageLoaded[this.pageIndex]=!0;this.onPreviewImageLoaded(b,c,g);if(this.onPageLoaded)this.onPageLoaded(this.pageIndex)}.bind(this);this.imageURL=b;fillImageAfterLoaded(this.pageIndex,"thumb",c)}},onPreviewImageLoaded:function(b,c,d){b&&
(this.originalImageLoaded=!1,this.unLoading(),this.bGImageWidth=d.naturalWidth,this.bGImageHeight=d.naturalHeight,$(d).attr("style","position:absolute;width:100%;height:100%;pointer-events:none;top:0;bottom:0;left:0;right:0;margin:auto;"),bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(d),this.resizeBackgroundSize())},onOriginalImageLoaded:function(b,c,d){b&&(this.originalImageLoaded=!0,this.unLoading(),this.unBallScaling(),this.bGImageWidth=
d.naturalWidth,this.bGImageHeight=d.naturalHeight,$(d).attr("style","position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;right:0;margin:auto;"),bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(d),this.initAttachment(),this.resizeBackgroundSize(),this.resizeSideImage(),this.zoomIn&&this.zoomInSideImage())},resizeSideImage:function(){this.sideImage&&!this.isMirrorSide&&($.system.name==$.system.ANDROID||!isPhone()&&!isPad()||bookConfig.highDefinitionConversion?
(this.sideImage.css({width:"100%",height:"100%"}),this.resizeAttachment(this.attachW,this.attachH),this.zoomIn&&this.zoomInSideImage()):this.resizeOnMobile())},resizeOnMobile:function(){var b=1024,c=1024;BookInfo.isDoublePage()&&bookType==BookType.normal_book&&(c=b=768);isPad()&&BookInfo.isDoublePage()&&bookType==BookType.normal_book&&(c=b=768);b=fitPageWidthHeight(b,c,this.attachW,this.attachH);this.sideImage.css({width:Math.ceil(b.x)+"px",height:Math.ceil(b.y)+"px"});transformCSS({scale:this.attachW/
b.x,origin:{x:0,y:0}});this.resizeContent(Math.ceil(b.x),Math.ceil(b.y))},zoomInSideImage:function(){this.zoomIn=!0;var b=Math.min(6*Math.min(windowWidth,windowHeight),this.bGImageWidth),c=Math.min(6*Math.min(windowWidth,windowHeight),this.bGImageHeight);$.system.name==$.system.ANDROID&&(b=Math.min(1024,b),c=Math.min(1024,c));isPad()&&(b=Math.min(3*Math.min(windowWidth,windowHeight),this.bGImageWidth),c=Math.min(3*Math.min(windowWidth,windowHeight),this.bGImageHeight));b=fitPageWidthHeight(b,c,this.attachW,
this.attachH);this.resizeContent(Math.ceil(b.x),Math.ceil(b.y))},resizeContent:function(b,c){this.sideImage.css({width:b+"px",height:c+"px"});var d=transformCSS({scale:this.attachW/b,origin:{x:0,y:0}});this.sideImage.css(d);this.MMBackground&&(this.resizeAttachment(b,c),this.MMBackground.css(d),this.scale=this.attachW/b)},resizeBackgroundSize:function(){var b=this.pageWidth/this.pageHeight,c=this.bGImageWidth/this.bGImageHeight;0.01<=b-c&&!PageInfo.pageIsStrech(this.pageIndex)&&$(this.sideImage.find("img")[0]).css({width:"auto",
height:"100%"});-0.01>=b-c&&!PageInfo.pageIsStrech(this.pageIndex)&&$(this.sideImage.find("img")[0]).css({width:"100%",height:"auto"})},switchLargeImage:function(){if(bookConfig.useTheAliCloudChart){var b=this.imageURL.removeStartFrom("?");if(window.isSupportWebp)switch(b+="?x-oss-process=image/format,webp",bookConfig.textClarityEnhancement){case 1:b+="/sharpen,100";break;case 2:b+="/sharpen,150";break;case 3:b+="/sharpen,200"}$(this.sideImage.find("img")[0]).attr("src",b)}},switchNormalImage:function(b){if(bookConfig.useTheAliCloudChart){if(b){b=
getPageDir(this.pageIndex,"normal",originTotalPageCount);if(b==this.imageURL)return;this.imageURL=b}$(this.sideImage.find("img")[0]).attr("src",this.imageURL)}}}).extend(Page),a=hddr.soo2,i=0,BookSide=Class({slider:null,playSliderAfterLoad:!1,scale:1,showMM:function(){this.MMBackground.css({display:"block"})},hideMM:function(){this.MMBackground.css({display:"none"})},clearMM:function(){this.destroyMM();this.initMMItems()},destroyMM:function(){this.Items.each(function(b){b.destroy();b.dialog&&b.dialog.destroy()});
this.destroySlider();this.MMBackground.empty()},initMMItems:function(){this.Items=new ObjectPool},initMM:function(){this.Items=(new PageEditorParser(this.MMBackground,this.attachW,this.attachH)).createItemsForPage(this.pageIndex);this.Items.find("Youtube").each(function(b){b.hide()});this.initSlider();this.preventMMBackEvent();0!=this.Items.objects.length||this.slider||this.hideMM()},initSlider:function(){if(window.hiSliderFactory){var b=(global.sliderJS||[])[this.pageIndex-1];b&&0<b.elements.length&&
(this.slider=window.hiSliderFactory({container:this.MMBackground,slide:b,initialWidth:this.attachW,initialHeight:this.attachH,focusOnFunc:this.focusOn.bind(this),resetFocusFunc:this.resetFocus.bind(this)}),this.slider.resize(this.attachW,this.attachH),!0==this.playSliderAfterLoad&&this.playSlider())}},playSlider:function(){this.slider?(this.slider.replay(),this.playSliderAfterLoad=!1):this.playSliderAfterLoad=!0},resetSlider:function(){this.resetFocus(0);this.slider&&this.slider.reset();this.playSliderAfterLoad=
!1},destroySlider:function(){this.slider&&this.slider.reset()},pauseSlider:function(){this.slider&&this.slider.pause()},resizeSlider:function(b,c){this.slider&&this.slider.resize(b,c)},onMMResize:function(b,c){if(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())){var d=fitPageWidthHeight(b,c,bookConfig.largePageWidth,bookConfig.largePageHeight),f=fitPageWidthHeight(this.width,this.height,bookConfig.largePageWidth,bookConfig.largePageHeight),g=d.x,h=d.y;this.MMBackground.css({width:g+
"px",height:h+"px",top:(this.height-f.y)/2+"px",left:(this.width-f.x)/2+"px"})}else g=b,h=c;this.resizeSlider(g,h);this.Items.each(function(b){b.onResize(g,h);if(b.dialog)b.dialog.onResize(windowWidth,windowHeight)})},getScale:function(){return this.scale},preventMMBackEvent:function(){document.body.ondragstart=function(){return!1};$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".hi-action",function(b){b.stopPropagation()});$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",
".slider-action",function(b){b.stopPropagation()});$(this.MMBackground).on("mousedown touchstart pointerdown mouseover mousemove",".flip-action",function(b){b.stopPropagation()})},showLoading:function(){this.side.append(this.loadingImg)},hideLoading:function(){this.loadingImg.remove()},focusOn:function(b){this.option=b;this.focusIng=!0;var c=b.pageWidth,d=b.duration/1E3,f=this.attachW/(b.width*this.attachW/c),c=-b.left*f*this.attachW/c;b=-b.top*f*this.attachH/b.pageHeight;f=Math.max(1,f);c=Number.between(c,
(1-f)*this.attachW,0);b=Number.between(b,(1-f)*this.attachH,0);f=transformCSS({origin:{x:0,y:0},tran:{x:c,y:b},scale:f});animateOnce(this.tmpContent,f,d,function(){},"%stransform")},resetFocus:function(b){if(this.focusIng){b||(b=0);var c=transformCSS({origin:{x:0,y:0},tran:{x:0,y:0},scale:1});animateOnce(this.tmpContent,c,b/1E3,function(){this.focusIng=!1}.bind(this),"%stransform")}},enterSide:function(){this._super();this.Items.each(function(b){b.showAnimate&&b.showAnimate();b.audio&&b.audio.enterPlay&&
b.audio.play&&b.audio.play();if(b.nameLike){b.nameLike("youtube","flashSwf","button","Video","LoopControlVideo")&&b.show&&b.show();(b.nameLike("youtube")||b.nameLike("vimeo"))&&b.playVideo&&b.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&b.playVideo();b.nameLike("audio")&&(b.isReplay()&&b.backTime(),b.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&b.playAudio(),b.background&&b.isBackgroundAudio()&&b.playAudio());if(b.nameIs("Video")||b.nameIs("LoopControlVideo"))b.isReplay()&&b.backTime(),b.getPlayEvt()==
PageEditor.PlayEvt.EVT_PLAY&&b.playVideo();b.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","EffectText","Banner")&&b.play&&b.play();b.nameIs("Link")&&b.flash();b.nameLike("Image")&&(b.resetImgSrc(),b.showEffect());b.nameLike("Button")&&b.runAnimation&&b.runAnimation()}});this.playSlider()},leaveSide:function(){this._super();this.Items.each(function(b){b.pause&&b.pause();b.stop&&b.stop();b.stopFlash&&b.stopFlash();b.audio&&b.audio.stop&&b.audio.stop();
b.dialog&&b.dialog.hide();b.nameLike&&(b.nameLike("youtube","flashSwf","button","Video","LoopControlVideo")&&b.hide&&b.hide(),b.nameLike("youtube","vimeo")&&b.pauseVideo&&b.pauseVideo(),b.nameLike("audio")&&b.pauseAudio&&b.pauseAudio(),b.nameIs("LoopControlVideo")&&b.pauseVideo&&b.pauseVideo(),b.nameIs("Video")&&b.getStopEvt()==PageEditor.PlayEvt.EVT_STOP&&b.pauseVideo(),b.nameLike("Image")&&(b.removeImgSrc(),b.hideEffect()),b.nameLike("Button")&&b.stopAnimation&&b.stopAnimation(),b.nameLike("zoom")&&
global.popZoomBox&&(global.popZoomBox.popZoom.hide(),global.popZoomBox.visible=!0))});global.annotationPannel&&global.annotationPannel.resetAnnoConfig();this.searchHighlight.css({"background-image":""});this.pauseSlider();this.destroySelect()},pauseAnimation:function(){this.Items.each(function(b){b.nameLike&&(b.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","Banner")&&(b.pause&&b.pause(),b.stop&&b.stop(),b.stopFlash&&b.stopFlash()),b.nameLike("Button")&&
b.stopAnimation&&b.stopAnimation())})},startAnimation:function(){this.Items.each(function(b){b.nameLike&&(b.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","Banner")&&b.play&&b.play(),b.nameLike("Button")&&b.runAnimation&&b.runAnimation())})}}).extend(PageSide),imageLoaded=[];bdor[33]=function(b,c){return b/bdor[30](c,20)};
var BookPage=Class({initSelectTextEvent:function(){if(!this.searchContent){this.searchContent=$("<div style='width:100%;height:100%;position:absolute;z-index:10;cursor:text;top:0;bottom:0;left:0;right:0;margin:auto;'></div>");this.pageSide.append(this.searchContent);this.resizeSelectContent();var b=new Hammer.Manager(this.searchContent[0]);b.add(new Hammer.Pan({threshold:0}));b.add(new Hammer.Tap);b.on("panstart panmove panend",this.selectText.bind(this));b.on("tap",this.onTap.bind(this))}},onTap:function(){this.searchContent&&
this.searchContent.empty();this.hint&&this.hint.hide()},destroySelect:function(){this.searchContent&&this.searchContent.remove();this.hint&&this.hint.destroy();this.searchContent=this.hint=void 0},selectText:function(b){if(!BookInfo.getBook().flipping&&global.positionForPages){var c,d;for(d=0;d<positionForPages.length;d++)if(positionForPages[d]&&positionForPages[d].page&&positionForPages[d].page==this.pageIndex){c=positionForPages[d].positions;break}this.searchContent.empty();if(c){this.searchTextHighlight||
(this.searchTextHighlight=new SearchTextHighlight(this.bGImageWidth,this.bGImageHeight,rightToLeft),this.searchTextHighlight.loadFromPage(c),this.highlightDOM=new SearchHighlightDOM(this.searchContent));c=this.getArea(b);c=this.searchTextHighlight.selectText(c);this.highlightText="";if(c){d=c.getRects();for(var f=0;f<d.length;){for(var g=[],h=0;4>h;h++)g[h]=d[f+h];this.highlightDOM.addHighlight(g);f+=4}this.highlightText=c.getText()}"panend"==b.type&&(isPhone()||isPad()?this.highlightText&&(global.phoneCopyForm||
(phoneCopyForm=new CopyForm({parent:tmpContainer,formType:"copy",rightToLeft:rightToLeft})),phoneCopyForm.fillText(this.highlightText),phoneCopyForm.show()):(c=b.srcEvent.pageX,b=b.srcEvent.pageY,this.hint||(this.hint=new divHint(getLanguage("lblCopy","Copy"),c,b),this.hint.addClass("hint_active"),this.hint.instance.bind(_event._end,function(){this.highlightText&&this.copyToClipboard(this.highlightText)}.bind(this))),this.highlightText?(this.hint.show(c,b),this.hint.moveto(c,b)):this.hint.hide()))}}},
getArea:function(b){"panstart"==b.type&&(this.selectStartPoint=this.getRealPoint(b.srcEvent));var c=this.searchContent.width(),d=this.searchContent.height(),f=BookInfo.getBook().flipBook.parameters?BookInfo.getBook().flipBook.parameters.scale:1;return{left:this.selectStartPoint[0]/(c*f),top:this.selectStartPoint[1]/(d*f),right:(this.selectStartPoint[0]+b.deltaX)/(c*f),bottom:(this.selectStartPoint[1]+b.deltaY)/(d*f)}},getRealPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?
b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b])&&!(3<=b.length)){var c=this.searchContent.offset().left,d=this.searchContent.offset().top;return[b[0].pageX-c,b[0].pageY-d]}},copyToClipboard:function(b){global.tmpCopyInput||(global.tmpCopyInput=$("<textarea style='position:absolute;top:-50px;right:-50px;'></textarea>"),$("body").append(global.tmpCopyInput));global.tmpCopyInput.val(b);copyFromObj(global.tmpCopyInput)},addAttachment:function(){this.attachment=!0;this.slider=null;
this.playSliderAfterLoad=!1;this.MMBackground=$("<div style='width:100%;height:100%;position:absolute;z-index:4;'></div>");this.searchHighlight=$("<div class='kong' style='width:100%;height:100%;display:none;top:0;bottom:0;left:0;right:0;margin:auto;'></div>");this.renderPage();this.initMMItems();this.tmpContent.append(this.MMBackground)},resizeHighLightBG:function(){if(BookInfo.getBook()&&this.searchHighlight&&!PageInfo.pageIsStrech(this.pageIndex)&&this.bGImageWidth&&this.bGImageHeight){var b=this.pageWidth/
this.pageHeight,c=this.bGImageWidth/this.bGImageHeight;0.01<=b-c&&this.searchHighlight.css({width:c*this.pageSideHeight+"px",height:this.pageSideHeight+"px"});-0.01>=b-c&&this.searchHighlight.css({width:this.pageSideWidth+"px",height:this.pageSideWidth/c+"px"})}},resizeSelectContent:function(){if(BookInfo.getBook()&&this.searchContent&&!PageInfo.pageIsStrech(this.pageIndex)&&this.bGImageWidth&&this.bGImageHeight){var b=this.pageWidth/this.pageHeight,c=this.bGImageWidth/this.bGImageHeight;0.01<=b-
c&&this.searchContent.css({width:c*this.pageSideHeight+"px",height:this.pageSideHeight+"px"});-0.01>=b-c&&this.searchContent.css({width:this.pageSideWidth+"px",height:this.pageSideWidth/c+"px"});this.searchTextHighlight&&(this.highlightDOM=this.searchTextHighlight=null)}},initMM:function(){this.attachment&&(this._super(),bookConfig.AnnotationButtonVisible&&!global.annotationCookie&&this.bookType==BookInfo.getBookType()&&(global.annotationCookie=new AnnotationCookie(this.MMBackground,this.attachW,
this.attachH)),this.annotationBox(),this.addHistoryTexts(this.bookType,this.pageIndex,this.MMBackground),this.setLinkPosition(BookInfo.getCurrentPages()))},annotationBox:function(){bookConfig.AnnotationButtonVisible&&(this.pageAnnotation=new Annotation(this.MMBackground,this.pageIndex,this.attachW,this.attachH))},addHistoryTexts:function(b){if(this.attachment&&bookConfig.AnnotationButtonVisible){b=this.bookType;var c=this.pageIndex,d=this.MMBackground;$(d).css({background:"rgba(0,0,0,0)"});isBelowIE9()&&
$(d).css({"background-image":"url('aaaa.a')"});global.annotationCookie&&b==BookInfo.getBookType()&&global.annotationCookie.repaintCookie(this.MMBackground,c-1)}},setLinkPosition:function(b){for(var c=0;c<b.length&&b[c]!=this.pageIndex;c++);this.Items.find("link").each(function(b){b.setPageBgImage(this.bGImageWidth,this.bGImageHeight,!0)}.bind(this));this.Items.find("zoom").each(function(b){b.setPageBgImage(this.bGImageWidth,this.bGImageHeight,!0)}.bind(this))},highlightSearch:function(){var b=!0;
window.frmSearch&&frmSearch.visible&&0<frmSearch.getList().length&&(b=!1);window.foldingMenu&&foldingMenu.visible&&foldingMenu.currentItem&&foldingMenu.currentItem.id&&"miSearch"==foldingMenu.currentItem.id&&(b=!1);if(!b&&this.attachment){for(var b=!1,c=0;c<positionForPages.length;c++)if(positionForPages[c]&&positionForPages[c].page&&positionForPages[c].page==this.pageIndex){b=!0;break}b?highlightSearchFun(this.searchHighlight,this.pageIndex):(b=String.format(bookConfig.searchPositionJS,this.pageIndex),
1<this.pageIndex&&(b=b.replace("[1]","["+this.pageIndex+"]")),b.match(/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi)&&loadJavascript(b,function(){highlightSearchFun(this.searchHighlight,this.pageIndex)}.bind(this),function(){}))}},clearHighlight:function(){this.attachment&&(this.searchHighlight.hide(),clearHighlightFun(this.searchHighlight))},initAttachment:function(){this.attachment&&(this.tmpContent.append(this.searchHighlight),this.searchHighlight.css({opacity:0.8}),this.resizeHighLightBG(),this.clearMM(),
this.initMM())},removeAttachment:function(){this.attachment&&this.destroyMM()},resizeAttachment:function(b,c){this.resizeHighLightBG();this.resizeSelectContent();if(this.attachment){this.onMMResize(b,c);if(this.pageAnnotation)this.pageAnnotation.onResize(this.attachW,this.attachH,this.attachW/b);global.annotationCookie&&this.bookType==BookInfo.getBookType()&&(global.annotationCookie.onResize(this.attachW,this.attachH,this.attachW/b),global.annotationCookie.repaintCookie(this.MMBackground,this.pageIndex-
1))}}}).extend(BookSide);bdor[36]=36;global.bdor[35]=function(){return 3}();global.bdor[37]=80;bdor[38]=function(){return bdor[30](37,40)}();
var NormalPage=Class({isHardPage:!1,create:function(b,c,d,f,g){this.pageHeight=this.pageWidth=this.width=this.zIndex=0;this.pageIndex=b;this.visible=!0;this.isSingleBook=d;this.container=$("<div></div>");this.setMaskCss();this.container.attr("id",c+"Mask"+b);this.page=new BookPage(b,c,f,g);this.container.append(this.page.getSide());this.page.setParent(this.container)},setMaskCss:function(){if(bookConfig.FlipDirection){var b="vertical-mask";this.isSingleBook&&rightToLeft&&(b="single-book-right-vertical-mask");
this.isSingleBook&&!rightToLeft&&(b="single-book-vertical-mask")}else b="mask",this.isSingleBook&&rightToLeft&&(b="single-book-right-mask"),this.isSingleBook&&!rightToLeft&&(b="single-book-mask");this.setCSSByName(b)},remove:function(){this.container.remove();this.container=void 0;this.page.remove();this.page=void 0},setPage:function(b){this.page=b},setCSSByStyle:function(b){this.container.css(b)},setVisible:function(b){b?this.container.show():this.container.hide();this.visible=b},setCSSByName:function(b){this.container.addClass(b)},
onResize:function(b,c,d){this.pageWidth=b;this.pageHeight=c;d||(d=1);var f=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(f-c)%2&&(f+=1);this.width=f;this.container.css({width:f,height:f,opacity:d});if(this.page)this.page.onResize(b,c);bookConfig.FlipDirection?(this.container.css({left:"50%","margin-left":-this.width/2+"px"}),this.page&&this.page.setCSSByStyle({left:(this.width-b)/2})):(this.container.css({top:"50%","margin-top":-this.width/2+"px"}),this.page&&this.page.setCSSByStyle({top:(this.width-
c)/2}))},getWidth:function(){return this.width},setZIndex:function(b){this.zIndex=b;this.container.css({"z-index":b})},getZIndex:function(){return this.zIndex},setCSSByName:function(b){this.container.attr("class",b)},setLeftOrRight:function(b){var c=this.isSingleBook?"left-single-mask-side":"left-mask-side";b||(c=this.isSingleBook?"right-single-mask-side":"right-mask-side");this.setCSSByName(c);this.page&&this.page.setLeftOrRight(b)},setUpOrDown:function(b){var c=this.isSingleBook?"up-single-mask-side":
"up-mask-side";b||(c=this.isSingleBook?"down-single-mask-side":"down-mask-side");this.setCSSByName(c);this.page&&this.page.setUpOrDown(b)},beginToFlip:function(){this.setMaskCss()},loading:function(){this.page&&this.page.loading()},mirrorSide:function(){this.page&&this.page.mirrorSide()},setFlipShadow:function(b,c,d){this.page&&this.page.setFlipShadow(b,c,d)},addAttachment:function(){this.page&&this.page.addAttachment()},clearFlipShadow:function(){this.page&&this.page.clearFlipShadow()},fillContent:function(){this.page&&
this.page.fillContent()},fillPage:function(b,c){this.page&&this.page.fillPage(b,c)},enterSide:function(){this.page&&this.page.enterSide()},leaveSide:function(){this.page&&this.page.leaveSide()},initSelectTextEvent:function(){this.page&&this.page.initSelectTextEvent()},destroySelect:function(){this.page&&this.page.destroySelect()},pauseAnimation:function(){this.page&&this.page.pauseAnimation()},startAnimation:function(){this.page&&this.page.startAnimation()},addHistoryTexts:function(b){this.page&&
this.page.addHistoryTexts(b)},highlightSearch:function(){this.page&&this.page.highlightSearch()},clearHighlight:function(){this.page&&this.page.clearHighlight()},resetSlider:function(){this.page&&this.page.resetSlider()},setScale:function(b){this.page&&this.page.setScale(b)},zoomInSideImage:function(){this.page&&this.page.zoomInSideImage()},zoomOutSideImage:function(){this.page&&this.page.zoomOutSideImage()},switchLargeImage:function(){this.page&&this.page.switchLargeImage()},switchNormalImage:function(b){this.page&&
this.page.switchNormalImage(b)}});bdor[39]=function(){return 8}();var bookMouseDown=!1,nBookStatu=0;global.bdor[200]=function(b){return bdor[b]};
var Book=Class({bookType:void 0,parent:null,width:0,height:0,flippingTime:600,currentPageIndex:1,rightToLeft:!1,pageArray:null,pageWidth:0,pageHeight:0,visible:!1,create:function(b){this.init(b)},init:function(b){this.parent=b.parent;this.currentPageIndex=b.currentPageIndex;this.flippingTime=1E3*b.flippingTime;this.rightToLeft=b.rightToLeft;this.pageArray=[]},getBookType:function(){return this.bookType},onBookPageLoaded:function(b){if(!this.flipping&&this.visible&&BookInfo.getBook()==this){var c=
this.getCurrentPages();if(c)for(var d=0;d<c.length;d++){var f=c[d];this.pageArray[f]&&b==f&&this.pageArray[f].enterSide()}}},adjustBookPosition:function(){onStageResize()},getBook:virtual_function,getCurrentPages:function(){return[]},initBook:virtual_function,gotoPage:virtual_function,show:virtual_function,hide:virtual_function,onResize:virtual_function,destroy:virtual_function}),StaticAd=Class({create:function(b){var c=b.css("left"),c=parseInt(c.replace("px","")),d=parseInt(b.css("top"));b=parseInt(b.css("width"));
rightToLeft&&(c+=b/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":1});this.adContainer.css({left:c+"px",top:d});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,paddingBottom:30,loop:!1,interval:staticAd.interval,effectDuration:1E3,data:staticAd.data});bookContainer.append(this.adContainer)},setStyle:function(b){b&&this.adContainer&&this.adContainer.css(b)},resize:function(){this.adInstance&&
this.adInstance.resize()},show:function(){this.adContainer&&this.adContainer.show()},hide:function(){this.adContainer&&this.adContainer.hide()}}),ZoomHint=Class({create:function(b){var c=this;this.mouseInBook=new Point(-1,-1);this.oldMouseInBook=new Point(-1,-1);this.zoomHint=null;this.trackMousePoint=function(b){b=isTouch?b.originalEvent.touches:[b];var f=b[0].pageY;c.mouseInBook.x=b[0].pageX;c.mouseInBook.y=f};bookContainer.bind(_event._move,this.trackMousePoint);this.zoomHintTimer=window.setInterval(function(){if(bookType!=
BookType.normal_book)c.clearZoomHintTimer();else if(null==c.zoomHint)if(-1==c.oldMouseInBook.x)c.oldMouseInBook.x=c.mouseInBook.x,c.oldMouseInBook.y=c.mouseInBook.y;else if(c.oldMouseInBook.x==c.mouseInBook.x&&c.oldMouseInBook.y==c.mouseInBook.y){var d=c.globalToBook(!0,c.mouseInBook.x,c.mouseInBook.y);if(!(0>d.x||d.x>c.width||0>d.y||d.y>c.height)){var d=c.mouseInBook.x+15,f=c.mouseInBook.y;c.zoomHint=new divHint(getLanguage("lblDoubleClickToZoomIn","Double click to zoom in."),d,f,b);c.zoomHint.show();
c.hideCount=0}}else c.oldMouseInBook.x=c.mouseInBook.x,c.oldMouseInBook.y=c.mouseInBook.y;else 2==++c.hideCount&&(bookContainer.unbind(_event._move,c.trackMousePoint),c.zoomHint.destroy(),c.zoomHint=null,window.clearInterval(c.zoomHintTimer))},1500)},globalToBook:function(b,c,d){var f;switch(bookType){case BookType.single_book:f=Point(c-singlePageBook.getLeft(),d-singlePageBook.getTop());break;case BookType.normal_book:f=Point(c-((b?0:flipBook.getPageWidth())+flipBook.getLeft()),d-flipBook.getTop());
break;case BookType.catalog_book:f=catalogBook.getTran(),b=c-((b?0:catalogBook.getPageWidth())+catalogBook.getCssLeft())-f.x,d=d-catalogBook.getCssTop()-f.y,f=Point(b,d)}return f},clearZoomHintTimer:function(){try{window.clearInterval(this.zoomHintTimer)}catch(b){}null!=this.zoomHint&&(bookContainer.unbind(_event._move,this.trackMousePoint),this.zoomHint.destroy(),this.zoomHint=null)}}),TipsBox=Class({create:function(b,c){this.visible=!1;this.caption=b;this.background=$("<div class='tipsBox tipsBoxShadow tipsBoxRadius'></div>");
$(c).append(this.background)},setTimer:function(){this.timer=window.setInterval(function(){this.hideTipsBox();window.clearInterval(this.timer)}.bind(this),1500)},resetTimer:function(){window.clearInterval(this.timer);this.setTimer()},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);$(this.background).css(d[0],b+"px");$(this.background).css(d[1],c+"px")},onResize:function(b,c){},getWidth:function(){return $(this.background).width()},getHeight:function(){return $(this.background).height()},
setCaption:function(b){this.background.html(b)},showTipsBox:function(){this.visible?this.resetTimer():(this.setTimer(),this.visible=!0,$(this.background).show(),$(this.background).animate({opacity:0.5},300))},hideTipsBox:function(){this.visible&&(this.visible=!1,$(this.background).animate({opacity:0},300,function(){$(this.background).hide()}.bind(this)))}}),BookMiniFullscreen=Class({create:function(){},init:function(){bookConfig.hideMiniFullscreen||isPhone()||isPad()||isIE()||MiniStyle.isMini()||
fullScreenApi.supportsFullScreen&&fullScreenApi.isFullScreen()||this.miniFullScreen||(this.miniFullScreen=$("<div class='miniFullscreen' id='miniFullscreen'></div>"),this.miniFullScreen.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),
3E3),this.initMiniFullScreenEvent())},initMiniFullScreenEvent:function(){this.miniFullScreen.bind(_event._end,function(){bookType==BookType.catalog_book&&global.catalogBook&&catalogBook.guidBar&&catalogBook.guidBar.fullscreenBtn?catalogBook.guidBar.fullscreenBtn.trigger(_event._end):readAsFullscreen();this.miniFullScreen.remove();this.miniFullScreen=void 0}.bind(this));this.miniFullScreen.bind(_event._enter,function(){this.miniFullscreenEnter=!0}.bind(this));this.miniFullScreen.bind(_event._leave,
function(){this.miniFullscreenEnter=!1;this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout);this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3E3)}.bind(this))},removeMiniFullScreen:function(){if(this.miniFullScreen&&!this.miniFullscreenEnter){var b={alpha:0.5};$(b).animate({alpha:0},{duration:300,easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:b.alpha})}.bind(this),complete:function(){this.miniFullScreen&&
this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},onResize:function(){if(this.miniFullScreen)if(MiniStyle.isMini())this.miniFullScreen.remove(),this.miniFullScreen=void 0;else{var b=BookInfo.top();this.miniFullScreen.css({top:b+BookInfo.height()-50+"px"})}},show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();
this.miniFullScreen=void 0},setStyle:function(b){b&&this.miniFullScreen&&this.miniFullScreen.css(b)}}),FlipPage=Class({downMask:null,upMask:null,currentIndex:0,nextIndex:0,hardPage:!1,coverPage:!1,coordinate:null,startPoint:null,toPoint:null,fromPoint:null,AliceToLeft:!1,AliceToRight:!1,loosen:!0,fallback:!1,flipping:!1,dragMoveToFlip:!1,fallback:!1,pageWidth:0,pageHeight:0,maskWidth:0,create:function(b){this.book=b},startToFlip:function(){this.loosen=this.flipping=!0;this.fallback=this.AliceToRight=
this.AliceToLeft=!1},meetFlipCondition:function(){var b=this.toPoint&&this.startPoint&&(this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_LEFT&&0<this.startPoint.x||this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_RIGHT&&0>this.startPoint.x);return this.toPoint&&this.startPoint&&(this.toPoint.x<this.book.MiddleX&&0<this.startPoint.x||this.toPoint.x>this.book.MiddleX&&0>this.startPoint.x)||b},flipToPoint:function(b,c,d){if(b&&c)if(!0==this.hardPage)this.flipToHardPoint(b,
c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=c;var f=this.pageWidth,g=computePoint(f,this.pageHeight,this.maskWidth,b,c);if(g){var h=transformCSS({rotate:g.rotate,tran:{x:g.maskTranX,y:g.maskTranY}}),k=transformCSS({rotate:g.rotate,tran:{x:g.maskTranX,y:g.maskTranY}}),l=transformCSS({rotate:-g.rotate,tran:{x:-g.pageTranX,y:0}}),m=transformCSS({rotate:g.rotate,tran:{x:g.pageTranX,y:0}});this.downMask&&this.downMask.setCSSByStyle(h);this.upMask&&this.upMask.setCSSByStyle(k);
this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(l);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(m);this.setFlipAlpha(f,b,c);this.setFlipShadow(g,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:function(b,c){if(b&&c){var d=this.pageWidth,f=this.pageHeight,g=this.maskWidth;c.x>d&&(c.x=d);c.x<-d&&(c.x=-d);this.coordinate=c;if(f=computePoint(d,f,g,b,c)){g=-90+90*Math.abs(c.x/b.x);0>c.x&&(g=90-90*Math.abs(c.x/b.x));var h=transformCSS({perspective:6E3,rotateY:g}),
k=transformCSS({perspective:6E3,rotateY:g});f.rotate=g;this.downMask&&this.downMask.setCSSByStyle(h);this.upMask&&this.upMask.setCSSByStyle(k);0>c.x/b.x?this.setPagesVisible(!1):this.setPagesVisible(!0);this.setHardFlipShadow(f);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setPagesVisible:function(b){},setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setFlipAlpha:function(b,c,d){},setFlipShadow:function(b,
c){b&&(this.upMask.page&&this.upMask.page.setFlipShadow(b,!0,c),this.nextPage&&!this.isMiniPage()&&this.nextPage.setFlipShadow(b,!1,c))},isMiniPage:function(){return this.pageWidth!=this.book.pageWidth||this.pageHeight!=this.book.pageHeight},resetWidthHeight:function(){var b=this.getPageWidthHeight().width,c=this.getPageWidthHeight().height,d=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(d-c)%2&&(d+=1);this.pageWidth=b;this.pageHeight=c;this.maskWidth=d},getPageWidthHeight:function(){if(this.downMask&&
this.downMask.page)return{width:this.downMask.page.pageWidth,height:this.downMask.page.pageHeight};if(this.upMask&&this.upMask.page)return{width:this.upMask.page.pageWidth,height:this.upMask.page.pageHeight};if(this.downMask)return{width:this.downMask.pageWidth,height:this.downMask.pageHeight};if(this.upMask)return{width:this.upMask.pageWidth,height:this.upMask.pageHeight}},setPageZIndex:function(){},setFlipOriginPoint:function(){},endFlipByIndex:function(){},isDragMoveToFlip:function(){this.dragMoveToFlip=
!1;this.coordinate&&this.startPoint&&this.coordinate.x!=this.startPoint.x&&(this.dragMoveToFlip=!0)},endFlip:function(){this.flipping=!1},destroy:function(){}}),SingleFlipPage=Class({flipToHardPoint:function(b,c){if(b&&c){this.coordinate=c;var d=this.pageWidth,f=computePoint(d,this.pageHeight,this.maskWidth,b,c);if(f){var g=-90+90*Math.abs(c.x/b.x);0>c.x&&(g=90-90*Math.abs(c.x/b.x));var h=transformCSS({perspective:6E3,rotateY:g}),g=transformCSS({perspective:6E3,rotateY:g});this.downMask&&this.downMask.setCSSByStyle(h);
this.upMask&&this.upMask.setCSSByStyle(g);0>c.x/b.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(f);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setPageZIndex:function(){var b=this.downMask.pageIndex,c=this.upMask.pageIndex,d=originTotalPageCount+5+c,f=originTotalPageCount+
5-b;if(bookConfig.HardPageEnable){if(c==totalPageCount||1==c)d=2*(bookConfig.totalPageCount+5)+10;if(b==totalPageCount||1==b)f=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(d);this.downMask.setZIndex(f)},setFlipAlpha:function(b,c,d){},setFlipOriginPoint:function(){this.dragMoveToFlip||rightToLeft||(this.fromPoint={x:this.pageWidth,y:this.pageHeight});!this.dragMoveToFlip&&rightToLeft&&(this.fromPoint={x:-this.pageWidth,y:this.pageHeight});this.toPoint="left"==this.book.flipToDirection?
{x:-this.pageWidth,y:this.fromPoint.y}:{x:this.pageWidth,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=-this.toPoint.x;this.startPoint.y=this.toPoint.y},endFlipByIndex:function(b){b=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(b);this.upMask.page&&this.upMask.page.setCSSByStyle(b);this.downMask.setCSSByStyle(b);this.downMask.page&&this.downMask.page.setCSSByStyle(b);this.upMask.setLeftOrRight(rightToLeft);this.downMask.setLeftOrRight(rightToLeft);
this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),SingleCalendarPage=Class({flipToPoint:function(b,c,d){if(b&&c)if(!0==this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=c;var f=this.pageWidth,g=computePoint(this.pageHeight,f,this.maskWidth,b,c);if(g){var h=transformCSS({rotate:g.rotate,tran:{x:-g.maskTranY,
y:g.maskTranX}}),k=transformCSS({rotate:g.rotate,tran:{x:-g.maskTranY,y:g.maskTranX}}),l=transformCSS({rotate:-g.rotate,tran:{x:0,y:-g.pageTranX}}),m=transformCSS({rotate:g.rotate,tran:{x:0,y:g.pageTranX}});this.downMask&&this.downMask.setCSSByStyle(h);this.upMask&&this.upMask.setCSSByStyle(k);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(l);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(m);this.setFlipAlpha(f,b,c);this.setFlipShadow(g,d);this.book.followToPoint(this,
b,c)}}},flipToHardPoint:function(b,c){if(b&&c){this.coordinate=c;var d=this.pageWidth,f=computePoint(this.pageHeight,d,this.maskWidth,b,c);if(f){var g=-90+90*Math.abs(c.x/b.x);0>c.x&&(g=90-90*Math.abs(c.x/b.x));var h=transformCSS({perspective:6E3,rotateX:-g}),g=transformCSS({perspective:6E3,rotateX:-g});this.downMask&&this.downMask.setCSSByStyle(h);this.upMask&&this.upMask.setCSSByStyle(g);0>c.x/b.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));
this.setHardFlipShadow(f);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setPageZIndex:function(){var b=this.downMask.pageIndex,c=this.upMask.pageIndex,d=originTotalPageCount+5+c,f=originTotalPageCount+5-b;if(bookConfig.HardPageEnable){if(c==totalPageCount||1==c)d=2*(bookConfig.totalPageCount+5)+10;if(b==totalPageCount||1==b)f=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(d);this.downMask.setZIndex(f)},setFlipAlpha:function(b,c,d){},setFlipOriginPoint:function(){this.dragMoveToFlip||
rightToLeft||(this.fromPoint={x:this.pageHeight,y:0});!this.dragMoveToFlip&&rightToLeft&&(this.fromPoint={x:-this.pageHeight,y:0});this.toPoint="left"==this.book.flipToDirection?{x:-this.pageHeight,y:this.fromPoint.y}:{x:this.pageHeight,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=-this.toPoint.x;this.startPoint.y=this.toPoint.y},endFlipByIndex:function(b){b=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(b);this.upMask.page&&this.upMask.page.setCSSByStyle(b);
this.downMask.setCSSByStyle(b);this.downMask.page&&this.downMask.page.setCSSByStyle(b);this.upMask.setUpOrDown(rightToLeft);this.downMask.setUpOrDown(rightToLeft);this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(SingleFlipPage),DoubleFlipPage=Class({setPagesVisible:function(b){b?(this.upMask.setVisible(!1),this.downMask.setVisible(!0)):(this.upMask.setVisible(!0),this.downMask.setVisible(!1))},
setPageZIndex:function(b){var c=this.downMask.pageIndex,d=this.upMask.pageIndex,f=originTotalPageCount+5+d,g=originTotalPageCount+5-c;"min"==b.flipTo&&(f=2*originTotalPageCount+5-d);"min"==b.flipTo&&(g=5+c);if(bookConfig.HardPageEnable){if(d==totalPageCount||1==d)f=2*(bookConfig.totalPageCount+5)+10;if(c==totalPageCount||1==c)g=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(f);this.downMask.setZIndex(g)},setFlipOriginPoint:function(b){this.dragMoveToFlip||"left"!=b||(this.fromPoint={x:this.pageWidth,
y:this.pageHeight});this.dragMoveToFlip||"right"!=b||(this.fromPoint={x:-this.pageWidth,y:this.pageHeight});this.toPoint={x:-this.fromPoint.x,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=this.fromPoint.x;this.startPoint.y=this.fromPoint.y},endFlipByIndex:function(b){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(c);this.upMask.page&&this.upMask.page.setCSSByStyle(c);this.downMask.setCSSByStyle(c);this.downMask.page&&this.downMask.page.setCSSByStyle(c);
b?(this.downMask.setLeftOrRight(!0),this.upMask.setLeftOrRight(!0)):(this.downMask.setLeftOrRight(!1),this.upMask.setLeftOrRight(!1));this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),DoubleCalendarPage=Class({flipToPoint:function(b,c,d){if(b&&c)if(!0==this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=
c;var f=this.pageWidth,g=computePoint(this.pageHeight,f,this.maskWidth,b,c);if(g){var h=transformCSS({rotate:g.rotate,tran:{x:-g.maskTranY,y:g.maskTranX}}),k=transformCSS({rotate:g.rotate,tran:{x:-g.maskTranY,y:g.maskTranX}}),l=transformCSS({rotate:-g.rotate,tran:{x:0,y:-g.pageTranX}}),m=transformCSS({rotate:g.rotate,tran:{x:0,y:g.pageTranX}});this.downMask&&this.downMask.setCSSByStyle(h);this.upMask&&this.upMask.setCSSByStyle(k);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(l);
this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(m);this.setFlipAlpha(f,b,c);this.setFlipShadow(g,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:function(b,c){if(b&&c){var d=this.pageWidth,f=this.pageHeight,g=this.maskWidth;c.x>f&&(c.x=f);c.x<-f&&(c.x=-f);this.coordinate=c;if(f=computePoint(f,d,g,b,c)){var h=-90+90*Math.abs(c.x/b.x);0>c.x&&(h=90-90*Math.abs(c.x/b.x));g=transformCSS({perspective:6E3,rotateX:-h});h=transformCSS({perspective:6E3,rotateX:-h});this.downMask&&this.downMask.setCSSByStyle(g);
this.upMask&&this.upMask.setCSSByStyle(h);0>c.x/b.x?this.setPagesVisible(!1):this.setPagesVisible(!0);this.setHardFlipShadow(f);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setFlipOriginPoint:function(b){this.dragMoveToFlip||"left"!=b||(this.fromPoint={x:this.pageHeight,y:0});this.dragMoveToFlip||"right"!=b||(this.fromPoint={x:-this.pageHeight,y:0});this.toPoint={x:-this.fromPoint.x,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=this.fromPoint.x;
this.startPoint.y=this.fromPoint.y},endFlipByIndex:function(b){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(c);this.upMask.page&&this.upMask.page.setCSSByStyle(c);this.downMask.setCSSByStyle(c);this.downMask.page&&this.downMask.page.setCSSByStyle(c);b?(this.downMask.setUpOrDown(!0),this.upMask.setUpOrDown(!0)):(this.downMask.setUpOrDown(!1),this.upMask.setUpOrDown(!1));this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();
this.downMask.clearFlipShadow()}}).extend(DoubleFlipPage),FlipPageManager=Class({create:function(b){this.book=b;this.array=[];this.pinDownCurlingArray=[];this.fallbackArray=[];this.flipArray=[];this.zoomArray=[];this.resizeArray=[];this.hardFlipArray=[];this.softFlipArray=[];this.coverFlipArray=[]},initFlipPageByIndex:function(b,c,d){if(this.book.isCoverPage(b,c))return this.initCoverFlipByIndex(b,c,d);if(this.book.isHardPage(b,c))return this.initHardFlipByIndex(b,c,d);d=this.book.getDownUpPage(b,
c,d);var f=b+"-"+c;this[f]||(this[f]=this.book.newFlipPage());this[f].downMask=d[0];this[f].upMask=d[1];this[f].currentIndex=b;this[f].nextIndex=c;this[f].hardPage=!1;this[f].resetWidthHeight();0>this.array.indexOf(f)&&this.array.push(f);0>this.softFlipArray.indexOf(f)&&this.softFlipArray.push(f);return this[f]},initHardFlipByIndex:function(b,c,d){d=this.book.getDownUpHardPage(b,c,d);var f=b+"-"+c;this[f]||(this[f]=this.book.newFlipPage());this[f].downMask=d[0];this[f].upMask=d[1];this[f].currentIndex=
b;this[f].nextIndex=c;this[f].hardPage=!0;this[f].resetWidthHeight();0>this.array.indexOf(f)&&this.array.push(f);0>this.hardFlipArray.indexOf(f)&&this.hardFlipArray.push(f);return this[f]},initCoverFlipByIndex:function(b,c,d){d=this.book.getDownUpHardPage(b,c,d);var f=b+"-"+c;this[f]||(this[f]=this.book.newFlipPage());this[f].downMask=d[0];this[f].upMask=d[1];this[f].currentIndex=b;this[f].nextIndex=c;this[f].hardPage=!0;this[f].coverPage=!0;this[f].resetWidthHeight();0>this.array.indexOf(f)&&this.array.push(f);
0>this.coverFlipArray.indexOf(f)&&this.coverFlipArray.push(f);return this[f]},checkFlipping:function(){for(var b=this.array.length,c=0;c<b;c++)if(this.array[c]){var d=this.array[c];if(this[d]&&this[d].flipping)return!0}return!1},removeFlipArrayByIndex:function(b){b=b.currentIndex+"-"+b.nextIndex;this[b]&&this[b].nextPage&&this[b].nextPage.clearFlipShadow();this[b]&&delete this[b];this.array&&this.array.removeElement(b);this.flipArray&&this.flipArray.removeElement(b);this.hardFlipArray&&this.hardFlipArray.removeElement(b);
this.softFlipArray&&this.softFlipArray.removeElement(b);this.coverFlipArray&&this.coverFlipArray.removeElement(b);this.pinDownCurlingArray&&this.pinDownCurlingArray.removeElement(b);this.fallbackArray&&this.fallbackArray.removeElement(b)},endFlip:function(){if(this.array&&0!=this.array.length)for(var b=this.array.length,c=0;c<b;c++)if(this.array[c]){var d=this[this.array[c]];d&&(d.endFlipByIndex(),this.removeFlipArrayByIndex(d))}},doNotMeetPageConditions:function(b){if(this.hasBeenMonitor()||this.hasUnLoosenPage()||
this.fallbackArray&&0<this.fallbackArray.length||0<=this.book.getPagesByIndex(b).indexOf(this.book.currentPageIndex))return!0;var c=!1;!rightToLeft&&b>this.book.currentPageIndex&&(c=!0);rightToLeft&&b<this.book.currentPageIndex&&(c=!0);return this.isReverseSeriesFlip(c)||this.isReversePinDownCurlingArray(c,b)?!0:this.existMutexPages(b)?(this.monitorMutexFlipSituation(b),!0):this.crossFlipMode(b)?(this.book.gotoNearPage(b),window.setTimeout(function(){gotoPageFun(b)},20),!0):this.crossPageMode(b)?
(window.setTimeout(function(){gotoPageFun(b)},20),!0):!1},hasBeenMonitor:function(){return this.monitorMutexFlipInterval?!0:!1},hasUnLoosenPage:function(){var b=this.book.optionPage;return b&&this[b]&&!this[b].loosen?!0:!1},isReverseSeriesFlip:function(b){if(b&&this.book.flipping&&this.book.flipToDirection==this.book.direction_right||!b&&this.book.flipping&&this.book.flipToDirection==this.book.direction_left)return!0},isReversePinDownCurlingArray:function(b,c){if(!this.pinDownCurlingArray||0>=this.pinDownCurlingArray.length)return!1;
for(var d=this.book.getPagesByIndex(c),f=this.pinDownCurlingArray.length,g=0;g<f;g++){var h=this[this.pinDownCurlingArray[g]];if(b&&h&&h.AliceToRight||!b&&h&&h.AliceToLeft||h&&0>d.indexOf(h.nextIndex))return!0}return!1},existMutexPages:function(b){return this.hardFlipArray&&0<this.hardFlipArray.length&&(this.toSoftPage(b)||this.toCoverPage(b))||this.softFlipArray&&0<this.softFlipArray.length&&(this.toHardPage(b)||this.toCoverPage(b))||this.coverFlipArray&&0<this.coverFlipArray.length&&(this.toHardPage(b)||
this.toSoftPage(b))?!0:!1},monitorMutexFlipSituation:function(b){this.monitorMutexFlipInterval||(this.monitorMutexFlipInterval=window.setInterval(function(){this.existMutexPages(b)||(window.clearInterval(this.monitorMutexFlipInterval),this.monitorMutexFlipInterval=void 0,gotoPageFun(b))}.bind(this),20))},toSoftPage:function(b){return this.book.toSoftPage(b)},toHardPage:function(b){return this.book.toHardPage(b)},toCoverPage:function(b){return this.book.toCoverPage(b)},crossFlipMode:function(b){return this.book.crossFlipMode(b)?
!0:!1},crossPageMode:function(b){var c=this.book.getFlipTo(b),d=c.minIndex,f=c.maxIndex,g=c.toIndex;if("max"==c.flipTo){if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(f+1).indexOf(b)))return nextPageFun(),!0;if(this.book.pageInfoArray[g].isMiniPage&&!(0<=this.book.getPagesByIndex(f+1).indexOf(b)))return gotoPageFun(g-1),!0}if("min"==c.flipTo){if(this.book.pageInfoArray[d].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return previousPageFun(),!0;if(this.book.pageInfoArray[g].isMiniPage&&
!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return gotoPageFun(g+1),!0}},beyondPageRange:function(b){return 0>=b||b>originTotalPageCount?!0:!1},beforeFlip:function(b,c){var d=this.book.beforeFlipTo(b,!0);this.isDragMoveToFlip(d);if(!d.dragMoveToFlip){var f=this.book.getFromStartPointByIndex(b,d);d.flipToPoint(f[0],f[1],!0)}f=d.currentIndex+"-"+d.nextIndex;this.book.optionPage==f&&(this.book.optionPage=null);0<this.pinDownCurlingArray.indexOf(f)&&(d.dragMoveToFlip=!0);0>this.flipArray.indexOf(f)&&
this.flipArray.push(f);this.fallbackArray.removeElement(f);this.pinDownCurlingArray.removeElement(f);d.startToFlip();this.book.flipping=!0;return d},isDragMoveToFlip:function(b){b.dragMoveToFlip=!1;b.coordinate&&b.startPoint&&b.coordinate.x!=b.startPoint.x&&(b.dragMoveToFlip=!0)}}),FlipBookIntervalManager=Class({create:function(b){this.book=b;this.flippingTime=1E3*bookConfig.flippingTime},flipIntervalTmp:function(b,c,d,f){if(b){this.book.flipping=!0;b.flipping=!0;var g=0.05;if(isIE()||isFirefox())g=
0;b.setFlipOriginPoint(f);b.coordinate||(b.coordinate=b.startPoint);var h=b.coordinate.x,k=b.coordinate.y,l,m=this.flippingTime;f=Math.abs(b.toPoint.x-h);var n=Math.abs(b.toPoint.x-b.startPoint.x),m=m*f/n;f=isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?function(){var b=0;l=function(){p(b,25,"Sine");b++}.interval(this,m/25)}.bind(this):function(){l=function(b,c){p(b,c,"Sine")}.animation(this,m)}.bind(this);var p=function(f,m,n){if(!b)return!1;var p=b.pageWidth,u=b.pageHeight,v=$.easing["easeInOut"+
n],w=$.easing["easeOut"+n];n=w(null,f,h,b.toPoint.x-h,m);w=w(null,f,k,b.toPoint.y-k,m);b.dragMoveToFlip||(n=v(null,f,h,b.toPoint.x-h,m),w=bookConfig.FlipDirection?g*Math.sqrt(u*u-n*n):u-g*Math.sqrt(p*p-n*n));f<m?this.flipToPoint(b,c,d,b.fromPoint,{x:n,y:w}):(this.flipToPoint(b,c,d,b.fromPoint,b.toPoint),this.book.afterFlipTo(b,d),l.stop())}.bind(this);f()}},setFlipInterval:function(){this.flipInterval=function(){if(!this.flipIntervalManager.flipInterval||!this.flipIntervalManager.flipInterval.stop){if(this.flipPageManager&&
this.flipPageManager.array&&0!=this.flipPageManager.array.length)for(var b=0;b<this.flipPageManager.array.length;b++){var c=this.flipPageManager.array[b];if(c){var d=this.flipPageManager[c];if(!this.flipPageManager[c])this.flipPageManager.array.removeElement(c),b--;else if(this.flipPageManager[c].fromPoint&&this.flipPageManager[c].startPoint&&this.flipPageManager[c].toPoint&&this.flipPageManager[c].downMask&&this.flipPageManager[c].upMask&&!this.flipPageManager[c].flipping){this.flipPageManager[c].Alice=
!0;this.flipPageManager[c].coordinate||(this.flipPageManager[c].coordinate=this.flipPageManager[c].startPoint);var f=0.22*(d.toPoint.x-d.coordinate.x),g=f+this.flipPageManager[c].coordinate.x,d=f/((d.coordinate.x-d.toPoint.x)/(d.coordinate.y-d.toPoint.y))+this.flipPageManager[c].coordinate.y,f=this.flipPageManager[c].downMask.pageIndex,h=this.flipPageManager[c].upMask.pageIndex;this.flipIntervalManager.flipToPoint(this.flipPageManager[c],f,h,this.flipPageManager[c].fromPoint,{x:g,y:d});!this.flipPageManager[c].flipping&&
this.flipPageManager[c].loosen&&(1>Math.abs(g.toFixed(2)-this.flipPageManager[c].toPoint.x)&&1>Math.abs(d.toFixed(2)-this.flipPageManager[c].toPoint.y)||isNaN(g)||isNaN(d))&&(this.flipPageManager[c].Alice=!1,g=this.flipPageManager[c].toPoint.x,d=this.flipPageManager[c].toPoint.y,this.flipIntervalManager.flipToPoint(this.flipPageManager[c],f,h,this.flipPageManager[c].fromPoint,{x:g,y:d}),this.flipPageManager[c].endFlipByIndex(0>this.flipPageManager[c].toPoint.x),this.flipPageManager.removeFlipArrayByIndex(this.flipPageManager[c]),
this.afterCurling(),b--)}}}else this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0;this.flipIntervalManager.flipInterval&&(isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?window.setTimeout(this.flipIntervalManager.flipInterval,30):window.requestAnimationFrame(this.flipIntervalManager.flipInterval))}}.bind(this.book);this.flipInterval()},flipToPoint:function(b,c,d,f,g,h){b&&b.flipToPoint(f,g,h);c=Math.abs(g.x-f.x)*this.book.pageWidth/b.pageWidth;(!this.book.movedLength||
Math.abs(this.book.movedLength)>c||!b.loosen||b.flipping)&&this.book.movetoCenter(b.currentIndex,b.nextIndex,c)},endFlip:function(){},destroy:function(){}}),computePoint=function(b,c,d,f,g){if(!f||!g)return{rotate:0,pageTranX:0,maskTranX:0,maskTranY:0};g.x>b&&(g.x=b);g.x<-b&&(g.x=-b);isAndroidDefault()&&(f.y=g.y);if(f.x==g.x){var h=0;0>f.x&&(h+=180);return{rotate:h,pageTranX:0,maskTranX:f.x,maskTranY:0}}var k=Math.sqrt(Math.pow(g.y-c,2)+Math.pow(g.x-0,2)),h=Math.sqrt(Math.pow(f.y-c,2)+Math.pow(f.x-
0,2));if(k>h){var l=Math.atan((g.y-c)/(g.x-0)),k=Math.abs(Math.sin(l)*h),h=Math.abs(Math.cos(l)*h);g.y=c-k;g.x=0<g.x?h:-h}k=Math.sqrt(Math.pow(g.y-0,2)+Math.pow(g.x-0,2));h=Math.sqrt(Math.pow(f.y-0,2)+Math.pow(f.x-0,2));k>h&&(l=Math.atan((g.y-0)/(g.x-0)),k=Math.abs(Math.sin(l)*h),h=Math.abs(Math.cos(l)*h),g.y=k,g.x=0<g.x?h:-h);var m=(g.y-f.y)/(g.x-f.x),n=Math.atan(m),h=180*n/Math.PI,p=(g.x+f.x)/2,q=(g.y+f.y)/2,k=c/2,l=b/2,t=c/2;0>f.x&&(h+=180,l=-b/2);g=Math.sqrt(Math.pow(f.y-g.y,2)+Math.pow(f.x-g.x,
2))/2;g=0<=h&&180>h?Math.abs((c-Math.abs(f.y))*Math.sin(n))+g:Math.abs(f.y*Math.sin(n))+g;c=Math.atan(b/c);d=Math.abs(g/(Math.sin(c+Math.abs(n))*d));d=Math.min(1,d);c=((p-l)*m+t+Math.pow(m,2)*q)/(1+Math.pow(m,2));f=m*(q-c)+p;t=Math.sqrt(Math.pow(l-f,2)+Math.pow(t-c,2));Math.abs(f)<Math.abs(l)&&(t=-t);return{frontShadowDistance:g,shadowRate:d,rotate:h,pageTranX:t-b/2,maskTranX:f-0,maskTranY:c-k}},FlipBook=Class({coordinate_bottom_left:"bl",coordinate_top_left:"tl",coordinate_bottom_right:"br",coordinate_top_right:"tr",
direction_left:"left",direction_right:"right",flipPageManager:null,maskWidth:0,create:function(b){this._super(b);this.flipPageManager=new FlipPageManager(this);this.toPageIndex=this.currentPageIndex;this.initBook();this.initEvent();this.flipIntervalManager=new FlipBookIntervalManager(this);this.pageInfoArray=(new PageInfo(!this.doublePage)).pageInfoArray},initBook:function(){this.flipBook=$("<div class='book'></div>");this.parent.append(this.flipBook)},resetPages:function(){},getBook:function(){return this.flipBook},
addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(this.pageArray[b[c]]&&this.fillContent(b[c]),this.pageArray[b[c]]))){var d=this.newPage(b[c]);d.addAttachment();var f=this.pageInfoArray[b[c]];d.onResize(this.pageWidth*f.pageWidth,this.pageHeight*f.pageHeight,f.opacity);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.flipBook.append(d.container)}},onResize:function(b,c){this.resizeBook(b,c);this.resetPages(this.currentPageIndex);
isPhone()||isPad()||this.switchNormalImage(!0);this.resizeAttachments(b,c)},resizeAttachments:function(b,c){},loading:function(){if(!this.flipping){var b=this.getCurrentPages();if(b&&!(0>=b.length))for(var c=b.length,d=0;d<c;d++)b[d]&&this.pageArray[b[d]]&&this.pageArray[b[d]].loading()}},fillContent:function(b){if(!this.flipping||imageLoaded[b])!bookConfig.preloadNextPage&&0>this.getCurrentPages().indexOf(b)||(this.pageArray[b]&&this.pageArray[b].fillContent(),this.pageBackArray&&this.pageBackArray[b]&&
this.pageBackArray[b].fillContent())},fillPage:function(b,c){if(b)for(var d=this.pageArray.length,f=0;f<d;f++)this.pageArray[f]&&this.pageArray[f].fillPage(b,c),this.pageBackArray&&this.pageBackArray[f]&&this.pageBackArray[f].fillPage(b,c)},removePage:function(b){!isNaN(b)&&this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},unWrapPageExcludeArray:function(b){if(b&&this.pageArray)for(var c=this.pageArray.length,d=0;d<c;d++)!this.pageArray[d]||0<=b.indexOf(d)||(this.pageArray[d].remove(),
this.pageArray[d]=void 0)},unWrapPageBackExcludeArray:function(b){if(b&&this.pageBackArray)for(var c=this.pageBackArray.length,d=0;d<c;d++)!this.pageBackArray[d]||0<=b.indexOf(d)||(this.pageBackArray[d].remove(),this.pageBackArray[d]=void 0)},resizePage:function(b,c){if(this.pageArray)for(var d=this.pageArray.length,f=0;f<d;f++)if(this.pageArray[f]){var g=this.pageInfoArray[f];this.pageArray[f].onResize(b*g.pageWidth,c*g.pageHeight,g.opacity)}if(this.pageBackArray)for(d=this.pageBackArray.length,
f=0;f<d;f++)this.pageBackArray[f]&&(g=this.pageInfoArray[f],this.pageBackArray[f].onResize(b*g.pageWidth,c*g.pageHeight,g.opacity))},crossFlipMode:function(b,c){return!1},toSoftPage:function(b){return!0},toHardPage:function(b){return!1},toCoverPage:function(){return!1},isCoverPage:function(){return!1},isHardPage:function(){return!1},beforeFlipTo:function(b,c){var d=this.getFlipTo(b),f=d.minIndex,g=d.maxIndex,h=d.toIndex,k;"max"==d.flipTo&&(k=this.flipToMax(g,h,c,rightToLeft));"min"==d.flipTo&&(k=
this.flipToMin(f,h,c,!rightToLeft));this.setAttachmentBeforeFlipTo(h);k.setPageZIndex(d);return k},afterFlipTo:function(b,c){b&&b.downMask&&b.upMask&&(b.endFlipByIndex(),this.flipPageManager.removeFlipArrayByIndex(b),this.checkFlipping(),b.downMask.pageIndex<c?this.afterFlipToMax(c,!rightToLeft):this.afterFlipToMin(c,rightToLeft),this.setAttachmentAfterFlipTo(c))},checkFlipping:function(){this.flipping=!1;this.flipPageManager.checkFlipping()?this.flipping=!0:(this.startAnimation(),this.flipToDirection=
"",this.loading())},followToPoint:function(b,c,d){},endFlip:function(){this.flipPageManager&&this.flipPageManager.endFlip()},getCurrentPageIndex:function(){return this.currentPageIndex},getPageWidth:function(b){if(void 0==b)return this.pageWidth;this.pageWidth=b},getPageHeight:function(b){if(void 0==b)return this.pageHeight;this.pageHeight=b},getWidth:function(){return this.width},getHeight:function(){return this.height},getScale:function(){return this.flipBook.parameters.toScale},getLeft:function(){return this.flipBook.offset().left},
getTop:function(){return this.flipBook.offset().top},getCssLeft:function(){return parseInt(this.flipBook.css("left"))},getCssTop:function(){return parseInt(this.flipBook.css("top"))},setCSS:function(b){if(b){void 0!=b.width&&this.flipBook.css("width",b.width+"px");void 0!=b.height&&this.flipBook.css("height",b.height+"px");void 0!=b.left&&this.flipBook.css("left",b.left+"px");void 0!=b.top&&this.flipBook.css("top",b.top+"px");void 0!=b.display&&this.flipBook.css("display",b.display);if(b.tran||void 0!=
b.scale||b.origin){var c=transformCSS(b);this.flipBook.css(c)}this.flipBook.registerPatamers&&this.flipBook.registerParamers(b)}},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);this.flipBook.css(d[0],b+"px");this.flipBook.css(d[1],c+"px")},translate:function(b,c){transformCSS({});this.flipBook.css(style)},supportSerialsFlip:function(){return isPhone()||isPad()?!1:!0},gotoPage:function(b,c){if(b&&(this.toPageIndex=b,!this.flipBook.parameters||!this.flipBook.parameters.zoomming))if(this.status_zoom&&
(isPhone()||isPad())){var d={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]};this.flipBook.onDoubleTap.bind(this.flipBook)(d)}else if(!(this.flipPageManager.beyondPageRange(b)||this.flipPageManager.doNotMeetPageConditions(b)||(isPhone()||isPad()||this.status_zoom)&&this.flipping)){this.stopMedia();this.flipIntervalManager&&this.flipIntervalManager.flipInterval&&(this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0);var f=this.flipPageManager.beforeFlip(b,
!0);fromPageIndex=this.currentPageIndex;var g=this.flipToDirection;!c&&flipHistory&&flipHistory.addFromCurrentIndex(b);this.flippingTo(b,c);playFlipSound();(function(){this.flipIntervalManager.flipIntervalTmp(f,fromPageIndex,b,g)}).delay(this,50);0<=BookInfo.getPagesByIndex(b).indexOf(1)?(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init()):this.miniFullScreen&&this.miniFullScreen.remove()}},afterCurling:function(){this.startAnimation()},startAnimation:function(){var b=
BookInfo.getCurrentPages();if(void 0!=b&&null!=b)for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].startAnimation()}},pauseAnimation:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].pauseAnimation()},openShownMedia:function(){var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b)for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].enterSide()}},stopMedia:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&
this.pageArray[c].leaveSide()},resetSlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].resetSlider()},select:function(){this.selected=!0;var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b){for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].initSelectTextEvent()}this.flipBook.parameters&&(this.flipBook.parameters.eventCancel=!0)}},unSelect:function(){this.selected=!1;var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b){for(var c=
0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].destroySelect()}StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(b){b.setAsUnSelect();b.executeCallback()});this.flipBook.parameters&&(this.flipBook.parameters.eventCancel=!1)}},switchLargeImage:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].switchLargeImage()},switchNormalImage:function(b){for(var c=this.pageArray.length,d=0;d<c;d++)this.pageArray[d]&&this.pageArray[d].switchNormalImage(b)},
hide:function(){Log.debug("normal book hide.");this.visible=!1;this.setCSS({display:"none"});this.stopMedia();this.resetSlider();this.bookMap&&this.bookMap.hide();this.controlBar&&this.controlBar.setVisible(!1);this.adContainer&&this.adContainer.hide();this.miniFullScreen&&this.miniFullScreen.hide()},show:function(){Log.debug("normal book show.");this.visible=!0;this.setCSS({display:"block"});this.openShownMedia();this.addHistoryTexts();this.addSearchHighlight();this.miniFullScreen&&this.miniFullScreen.show();
this.bmt&&this.bmt.refresh();this.adContainer&&this.adContainer.show();this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3})},addHistoryTexts:function(){var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b)for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].addHistoryTexts()}},addSearchHighlight:function(){var b=this.currentPageIndex,b=0==b%2?b+1:b-1;this.pageArray[b]&&this.pageArray[b].highlightSearch();
this.pageArray[b+1]&&this.pageArray[b+1].highlightSearch();this.pageArray[b-1]&&this.pageArray[b-1].highlightSearch();this.pageArray[b+2]&&this.pageArray[b+2].highlightSearch()},clearSearchHighlight:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].clearHighlight()},destroy:function(){},adjustBookPosition:function(){if(!this.status_zoom&&!this.flipping&&this.width&&this.height){this.pageWidthHeight=this.getFitWH();var b=this.getTranY(),c=this.pageWidthHeight.x/
this.width,d=this.getTranX(c);this.pageWidthHeight.x==this.width&&0==b&&0==d||this.flipBook.animateToTransform.bind(this.flipBook)(c,{x:d,y:b},{x:50,y:0})}},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;var c=0;b=this.width*b/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(c=rightToLeft?b:-b);this.currentPageIndex==totalPageCount&&(c=rightToLeft?-b:b);b=this.getCssLeft();var d=this.getSpace(!0);return c=d.left+(windowWidth-d.left-d.right-this.width)/2-b+c},getTranY:function(){var b=
this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(Book);bdor[41]=function(){return bdor[32](bdor[30](37,0),bdor[38]/bdor[40])}();
var ZoomMonitor=Class({options:void 0,target:void 0,beforeZoomIn:void 0,afterZoomIn:void 0,beforeZoomOut:void 0,afterZoomOut:void 0,beforePan:void 0,afterPan:void 0,create:function(){},register:function(b,c){this.options=b;this.target=b.target;this.beforeZoomIn=b.beforeZoomIn;this.afterZoomIn=b.afterZoomIn;this.beforeZoomOut=b.beforeZoomOut;this.afterZoomOut=b.afterZoomOut;this.beforePan=b.beforePan;this.afterPan=b.afterPan;this.target.zoom({zoomIn:this.beforeZoomIn,onPan:this.beforePan,zoomOut:this.afterZoomOut,
onZoomed:this.afterZoomIn},c)}});
FlipBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip()},hammerEventModular:function(){var b=new Hammer.Manager(this.flipBook[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.add(new Hammer.Press({time:"1000"}));b.add(new Hammer.Pinch);b.add(new Hammer.Tap({event:"doubletap",taps:2}));b.add(new Hammer.Tap);b.on("panstart panmove panend",
this.onPan.bind(this));b.on("press",this.onPress.bind(this));b.on("tap",this.onTap.bind(this));b.on("swipeleft swiperight swipedown swipeup",this.onSwipe.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end,this.onUp.bind(this));this.flipBook.bind(_event._leave,function(){this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0);this.optionPage=null;this.unCurling()}.bind(this));
this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.flipBook,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),beforePan:this.beforePan.bind(this),afterPan:this.afterPan.bind(this),beforeZoomOut:this.beforeZoomOut.bind(this),afterZoomOut:this.afterZoomOut.bind(this)},!0);$(this.flipBook).bind("mouseup touchstart",function(b){onWindowClick(b)})},onDown:function(){this.fingleDown=!0},onUp:function(b){this.fingleDown=!1;this.selected||this.status_zoom||
this.isZoomming||bookType!=this.bookType||(b=this.realPoint(b)[0],b=this.aroundCorner(b),bookConfig.CurlingPageCorner&&b&&0<=b.indexOf("l")&&this.optionPage&&this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].AliceToRight||bookConfig.CurlingPageCorner&&b&&0<=b.indexOf("r")&&this.optionPage&&this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].AliceToLeft||(this.optionPage&&(this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].meetFlipCondition()&&
this.pageDragToFlip(),this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null),this.unCurling()))},onPinch:function(b){this.selected||this.status_zoom||this.isZoomming||this.status_zoom||this.status_resize||this.flipping||"pinchout"!=b.type||(this.endFlip(),this.zoomToPage(this.currentPageIndex))},onDoubleTap:function(b){if(!this.selected&&!this.status_resize&&!this.flipping){var c=this.realPoint(b.srcEvent)[0];this.aroundCorner(c)||b.srcEvent[0].pageX>
$("#flipBook").offset().left+$("#flipBook").outerWidth()||b.srcEvent[0].pageX<$("#flipBook").offset().left||b.srcEvent[0].pageY>$("#flipBook").offset().top+$("#flipBook").outerHeight()||b.srcEvent[0].pageY<$("#flipBook").offset().top||(this.endFlip(),this.zoomToPage(this.currentPageIndex,b.srcEvent.pageX,b.srcEvent.pageY))}},onPan:function(b){if("panend"!=b.type&&!(this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipPageManager.fallbackArray&&
0<this.flipPageManager.fallbackArray.length)){var c=this.realPoint(b.srcEvent)[0],d=this.aroundCorner(c);this.optionPage?(this.flipPageManager[this.optionPage].toPoint=c,this.lastMousePoint&&(this.mouseMoveDirection=0<=c.x-this.lastMousePoint.x?this.moveDirectionType.MOVE_RIGHT:this.moveDirectionType.MOVE_LEFT),this.lastMousePoint=c):bookConfig.FlipDirection||bookConfig.upsideOnMobile()?("panstart"==b.type&&d||30<Math.abs(b.deltaY)&&(c.x<this.MiddleX&&0<b.deltaY||c.x>this.MiddleX&&0>b.deltaY))&&this.curling(c,
d):("panstart"==b.type&&d||30<Math.abs(b.deltaX)&&(c.x<this.MiddleX&&0<b.deltaX||c.x>this.MiddleX&&0>b.deltaX))&&this.curling(c,d)}},onPress:function(b){if(!(this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length)){b=this.realPoint(b.srcEvent)[0];var c=this.aroundCorner(b);this.optionPage?this.flipPageManager[this.optionPage].toPoint=b:(c||(c=b.x>
this.MiddleX?"r":"l"),this.curling(b,c))}},onRotate:function(b){},onSwipe:function(b){if(!(this.selected||this.status_zoom||this.isZoomming||this.dragToFlip))if(bookConfig.FlipDirection||bookConfig.upsideOnMobile())switch(b.type){case "swipeup":this.flipFromDirection(this.coordinate_bottom_right);break;case "swipedown":this.flipFromDirection(this.coordinate_bottom_left)}else switch(b.type){case "swipeleft":this.flipFromDirection(this.coordinate_bottom_right);break;case "swiperight":this.flipFromDirection(this.coordinate_bottom_left)}},
onTap:function(b){if(this.selected||this.status_zoom||this.isZoomming)onWindowTap(b.srcEvent);else if(bookType==this.bookType&&!this.status_zoom&&!this.status_resize){var c=this.realPoint(b.srcEvent)[0];(c=this.aroundFlipCorner(c))?(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null,this.flipFromDirection(c)):onWindowTap(b.srcEvent)}},onOver:function(b){if(!(isPhone()||isPad()||this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||
this.fingleDown||this.flipping)&&bookConfig.CurlingPageCorner){b=this.realPoint(b)[0];var c=this.aroundCorner(b);c?this.curling(b,c):(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null);this.unCurling()}},aroundFlipCorner:function(b){var c=this.aroundCorner(b);if(c)return c;if(!this.doublePage){var d=this.getCurrentPageWidthHeight(b.x);bookConfig.FlipDirection?(c=d.pageHeight,d=d.pageWidth):(c=d.pageWidth,d=d.pageHeight);0>this.MiddleX&&(b.x=
-b.x);if(!(b.x>c-1||1>b.x||b.y>d-1||1>b.y||b.x<0.8*c&&b.x>0.2*c||b.y>0.2*d&&b.y<0.8*d)){var f=Math.sqrt(Math.pow(0.2*d,2)-Math.pow((c-Math.abs(b.x))*d/c,2)),c=Math.sqrt(Math.pow(0.2*d,2)-Math.pow(Math.abs(b.x)*d/c,2));if(b.y<c&&b.x<this.MiddleX&&0<this.MiddleX)return"tl";if(b.y<c&&b.x<-this.MiddleX&&0>this.MiddleX||b.y<f&&b.x>this.MiddleX&&0<this.MiddleX)return"tr";if(b.y<f&&b.x>-this.MiddleX&&0>this.MiddleX)return"tl";if(b.y>d-c&&b.x<this.MiddleX&&0<this.MiddleX)return"bl";if(b.y>d-c&&b.x<-this.MiddleX&&
0>this.MiddleX||b.y>d-f&&b.x>this.MiddleX&&0<this.MiddleX)return"br";if(b.y>d-f&&b.x>-this.MiddleX&&0>this.MiddleX)return"bl"}}},aroundCorner:function(b){this.edgeX();var c=this.getCurrentPageWidthHeight(b.x);if(bookConfig.FlipDirection)var d=c.pageHeight,c=c.pageWidth;else d=c.pageWidth,c=c.pageHeight;if(!(Math.abs(b.x)>d-1||b.y>c-1||1>b.y||Math.abs(b.x)<0.8*d||b.y>0.2*c&&b.y<0.8*c)){d=Math.sqrt(Math.pow(0.2*c,2)-Math.pow((d-Math.abs(b.x))*c/d,2));if(b.y<d&&b.x<this.MiddleX)return"tl";if(b.y<d&&
b.x>this.MiddleX)return"tr";if(b.y>c-d&&b.x<this.MiddleX)return"bl";if(b.y>c-d&&b.x>this.MiddleX)return"br"}},getCurrentPageWidthHeight:function(b){this.edgeX();var c=this.getCurrentPages();if(1==c.length||b<=this.MiddleX&&!rightToLeft||b>=this.MiddleX&&rightToLeft)return{pageWidth:this.pageInfoArray[c[0]].pageWidth*this.pageWidth,pageHeight:this.pageInfoArray[c[0]].pageHeight*this.pageHeight};if(b<=this.MiddleX&&rightToLeft||b>=this.MiddleX&&!rightToLeft)return{pageWidth:this.pageInfoArray[c[1]].pageWidth*
this.pageWidth,pageHeight:this.pageInfoArray[c[1]].pageHeight*this.pageHeight}},pageDragToFlip:function(){this.flipPageManager[this.optionPage].toPoint.y=this.flipPageManager[this.optionPage].startPoint.y;this.flipPageManager[this.optionPage].toPoint.x=-this.flipPageManager[this.optionPage].startPoint.x;this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.flipPageManager[this.optionPage].startToFlip();this.flipPageManager[this.optionPage].dragMoveToFlip=!0;this.flipToDirection=0>this.flipPageManager[this.optionPage].startPoint.x?
"right":"left";this.tmpDragToFlipTimeout&&window.clearTimeout(this.tmpDragToFlipTimeout);this.dragToFlip=!0;this.tmpDragToFlipTimeout=window.setTimeout(function(){this.dragToFlip=!1}.bind(this),500);this.getNextPage()},flipFromDirection:function(b){if(!(this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length))if(0<=b.indexOf("l")){if(!this.flipping||this.flipToDirection!=this.direction_left){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length){b=
this.flipPageManager.pinDownCurlingArray.length;for(var c=0;c<b;c++)if(this.flipPageManager.pinDownCurlingArray[c].AliceToLeft)return}this.flipToDirection=this.direction_right;this.getNextPage()}}else if(0<=b.indexOf("r")&&(!this.flipping||this.flipToDirection!=this.direction_right)){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length)for(b=this.flipPageManager.pinDownCurlingArray.length,c=0;c<b;c++)if(this.flipPageManager.pinDownCurlingArray[c].AliceToRight)return;
this.flipToDirection=this.direction_left;this.getNextPage()}},hidePages:function(){var b=this.pageArray.length,c=this.getCurrentPages();this.zoomPageArray=[];for(var d=0;d<b;d++)this.pageArray[d]&&0>c.indexOf(d)&&this.pageArray[d].visible&&(this.zoomPageArray.push(this.pageArray[d].pageIndex),this.pageArray[d].setVisible(!1))},showPages:function(){if(this.zoomPageArray){for(var b=this.zoomPageArray.length,c=0;c<b;c++){var d=this.zoomPageArray[c];this.pageArray[d]&&this.pageArray[d].setVisible(!0)}this.zoomPageArray=
[]}},beforeZoomIn:function(){if(!isPhone()&&!isPad()){this.controlBar||(this.controlBar=bookType!=BookType.catalog_book?new ZoomControlBar(this.parent):new CatalogZoomControlBar(this.parent));if(this.controlBar){var b="lite"==bookConfig.ToolbarViewMode&&bookType==BookType.catalog_book?50:0;this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,toolBar.getTopHeight()+b+5);this.controlBar.setVisible(!0)}this.bookMap&&(this.bookMap.show(),this.bookMap.fillContent(this.currentPageIndex))}window.toolBar&&
window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);this.status_zoom=!0;this.adContainer&&this.adContainer.setStyle({"z-index":1});this.hidePages();StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomout();b.executeCallback()});BookInfo.getBook().bmt&&BookInfo.getBook().bmt.hide()},beforeZoomOut:function(){},afterZoomOut:function(){this.resetZoomConfig();if(isPhone()||isPad())this.showPages(),gotoPageFun(this.toPageIndex);isPhone()||isPad()||this.switchNormalImage()},
resetZoomConfig:function(){this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3});this.status_zoom=!1;this.controlBar&&this.controlBar.setVisible(!1);this.bookMap&&this.bookMap.hide();window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();b.executeCallback()});this.thicknessManager&&this.thicknessManager.showCanvas();BookInfo.getBook().bmt&&
BookInfo.getBook().bmt.show();this.showPage&&this.showPage.parameters&&(this.showPage.parameters.zoomFlag=!1)},beforePan:function(){this.bookMap&&this.bookMap.refreshArea()},afterPan:function(){},curling:function(b,c){this.selected||this.status_zoom||this.status_resize||(this.optionPage=this.curlingPage(b,c))&&(this.flipIntervalManager.flipInterval||this.flipIntervalManager.setFlipInterval())},curlingPage:function(b,c){var d,f,g,h;if(!c&&b.x<this.MiddleX||c&&0<=c.indexOf("l")){if(this.flipping&&"left"==
this.flipToDirection)return;f=this.realIndex(!1)[0];g=this.realIndex(!1)[1];d=f+"-"+g;h=!1}if(!c&&b.x>this.MiddleX||c&&0<=c.indexOf("r")){if(this.flipping&&"right"==this.flipToDirection)return;f=this.realIndex(!0)[0];g=this.realIndex(!0)[1];d=f+"-"+g;h=!0}if(d&&f&&g){var k=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&this.bookType==BookType.single_book&&(k=Math.max(1,bookConfig.totalPageCount-1));if(!(0>=f||f>k||0>=g||g>k||this.flipPageManager[d]&&this.flipPageManager[d].fallback||
this.flipPageManager[d]&&this.flipPageManager[d].flipping))if(k=g,BookInfo.isDoublePage()&&(k=BookInfo.getMinPageIndex(k)),passwardType()&&bookConfig.excludeFrontPages&&k>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=new PasswardPannel),global.passwardPannel.show();else return this.defineFlipPage(d,b,c,f,g,h),d}},defineFlipPage:function(b,c,d,f,g,h){if(c){var k=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&this.bookType==BookType.single_book&&
(k=Math.max(1,bookConfig.totalPageCount-1));0>=f||f>k||0>=g||g>k||(this.flipPageManager[b]?d=this.getFromStartPointByCoordinate(c,d,this.flipPageManager[b]):(this.beforeFlipTo(g),d=this.getFromStartPointByCoordinate(c,d,this.flipPageManager[b]),this.flipIntervalManager.flipToPoint(this.flipPageManager[b],f,g,d[0],d[1],!0)),h?(this.flipPageManager[b].AliceToLeft=!0,this.flipPageManager[b].AliceToRight=!1):(this.flipPageManager[b].AliceToLeft=!1,this.flipPageManager[b].AliceToRight=!0),this.flipPageManager[b].loosen=
!1,this.flipPageManager[b].fromPoint=d[0],this.flipPageManager[b].startPoint=d[1],this.flipPageManager[b].toPoint=c,0>this.flipPageManager.pinDownCurlingArray.indexOf(b)&&this.flipPageManager.pinDownCurlingArray.push(b),this.flipPageManager.fallbackArray.removeElement(b),this.flipPageManager.flipArray.removeElement(b))}},unCurling:function(){if(!(this.selected||this.status_zoom||this.status_resize)&&this.flipPageManager.array)for(var b=this.flipPageManager.array.length,c=0;c<b;c++){var d=this.flipPageManager.array[c];
if(d!=this.optionPage&&this.flipPageManager[d]&&!this.flipPageManager[d].fallback&&!this.flipPageManager[d].flipping&&(this.flipPageManager[d].AliceToRight||this.flipPageManager[d].AliceToLeft)){this.flipPageManager[d].AliceToRight=!1;this.flipPageManager[d].AliceToLeft=!1;this.flipPageManager[d].fallback=!0;var f=this.getRealToPoint(this.flipPageManager[d],this.flipPageManager[d].fromPoint,this.flipPageManager[d].startPoint);this.flipPageManager[d].toPoint=f.toPoint;this.flipPageManager[d].fromPoint=
f.fromPoint;this.flipPageManager[d].coordinate=f.coordinate;0>this.flipPageManager.fallbackArray.indexOf(d)&&this.flipPageManager.fallbackArray.push(d);this.flipPageManager.pinDownCurlingArray.removeElement(d);this.flipPageManager.flipArray.removeElement(d)}}},getFromStartPointByCoordinate:function(b,c,d){if(b){var f={x:0,y:0},g={x:0,y:0};if(bookConfig.FlipDirection){var h=d.getPageWidthHeight().height;d=d.getPageWidthHeight().width}else h=d.getPageWidthHeight().width,d=d.getPageWidthHeight().height;
var k=b.y>d/2?b.y-5:b.y+5;0>b.x&&(f={x:-h,y:k});0<b.x&&(f={x:h,y:k});c&&0<=c.indexOf("r")&&(f.x=h);c&&0<=c.indexOf("l")&&(f.x=-h);"tl"==c&&(f={x:-h,y:0});"bl"==c&&(f={x:-h,y:d});"tr"==c&&(f={x:h,y:0});"br"==c&&(f={x:h,y:d});g.x=f.x;g.y=f.y;return[f,g]}},getRealToPoint:function(b,c,d){if(bookConfig.FlipDirection){b.getPageWidthHeight();var f=b.getPageWidthHeight().width}else b.getPageWidthHeight(),f=b.getPageWidthHeight().height;if(0==c.y||c.y==f)return{fromPoint:c,toPoint:d,coordinate:b.coordinate};
var g={},h={},k=b.coordinate;b.coordinate.y<=c.y?(g.y=f,g.x=c.x,h.y=f):(g.y=0,g.x=c.x,h.y=0);h.x=d.x;b=(k.y-c.y)/(k.x-c.x);k.x=[(b*b-1)*g.x+b*(-2*g.y+c.y+k.y)+(c.x+k.x)]/(b*b+1);k.y=g.y+b*(k.x-g.x);return{fromPoint:g,toPoint:h,coordinate:k}},realIndex:function(b){var c=BookInfo.getMinPageIndex(this.currentPageIndex);if(b&&!rightToLeft||!b&&rightToLeft)return[c+1,c+2];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getNextPage:function(){"right"==this.flipToDirection&&!rightToLeft||"left"==this.flipToDirection&&
rightToLeft?previousPageFun():nextPageFun()},realBookPosition:function(){if(bookConfig.upsideOnMobile())var b=this.flipBook.offset().top,c=this.flipBook.offset().left;else b=this.flipBook.offset().left,c=this.flipBook.offset().top;return[b,c]},realPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b])&&!(3<=b.length)){var c=this.realBookPosition()[0],d=this.realBookPosition()[1],f=b[0].pageX,g=b[0].pageY;bookConfig.upsideOnMobile()&&
(f=b[0].pageY,g=windowHeight-b[0].pageX);if(bookConfig.FlipDirection){var g=g-d-this.pageHeight,h=this.getCurrentPageWidthHeight(g),k=h.pageWidth,h=h.pageHeight,f=this.pageWidth-(f-c)-(this.pageWidth-k)/2;if(!b[1])return[{x:g,y:f}];var l=b[1].pageX;b=b[1].pageY;l=this.pageWidth-(l-c)-(this.pageWidth-k)/2;b=b-d-this.pageHeight;return[{x:g,y:f},{x:b,y:l}]}f=f-c-this.pageWidth;h=this.getCurrentPageWidthHeight(f);h=h.pageHeight;g=g-d-(this.pageHeight-h)/2;if(!b[1])return[{x:f,y:g}];l=b[1].pageX;b=b[1].pageY;
l=l-c-this.pageWidth;b=b-d-(this.pageHeight-h)/2;return[{x:f,y:g},{x:l,y:b}]}},mouseWheelFlip:function(){var b;this.flipBook.bind(_event._mousewheel,function(c){var d;void 0!=b&&150>new Date-b?d=!1:(b=new Date,d=!0);if(!d)return!1;d=c.originalEvent;d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));this.status_zoom&&(c={pointers:[{pageX:c.pageX,pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]},0>d?this.controlBar&&this.controlBar.zoomDown(c):this.controlBar&&this.controlBar.zoomUp(c));!this.status_zoom&&
bookConfig.mouseWheelFlip&&(0>d?nextPageFun():previousPageFun());stopEvent(c);return!1}.bind(this))}});
var DoubleFlipBook=Class({newFlipPage:function(){return new DoubleFlipPage(this)},resetPages:function(b){isNaN(b)||0>=b||(b=this.getMinPageIndex(b),this.unWrapPageExcludeArray([b,b+1,b+2,b+3,b-1,b-2]),this.addPageArray([b,b+1,b+2,b+3,b-1,b-2]),this.currentPage=this.pageArray[b],this.currentPage2=this.pageArray[b+1],this.nextPage=this.pageArray[b+2],this.nextPage2=this.pageArray[b+3],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageArray[b-2],this.setPageCss(),this.loading())},setPageCss:function(){var b=
transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),
this.nextPage.setCSSByStyle(b));this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0),this.nextPage2&&this.nextPage2.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!0),
this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1),this.nextPage2&&this.nextPage2.setLeftOrRight(!1))},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),
this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},getDownUpPage:function(b,c){this.addPageArray([b,c]);this.pageArray[b]&&this.pageArray[b].beginToFlip();this.pageArray[c]&&this.pageArray[c].beginToFlip();this.pageArray[b]&&(this.pageArray[b].page.setCSSByName("right-flip-side"),this.setZIndexByPageIndex(this.pageArray[b]));this.pageArray[c]&&(this.pageArray[c].page.setCSSByName("flip-side"),this.pageArray[c].page.side.addClass("boxShadow"),
this.setZIndexByPageIndex(this.pageArray[c]));return[this.pageArray[b],this.pageArray[c]]},flipToMax:function(b,c,d,f){f=this.flipPageManager.initFlipPageByIndex(b,c,f);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c+1]&&(this.pageArray[c+1].setLeftOrRight(rightToLeft),f.nextPage=this.pageArray[c+1]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return f},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b+1]);c&&this.supportSerialsFlip()&&this.addPageArray([b+
2,b+3])},setPagesStyleBeforeFlipToMax:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3],b),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+4;d<=originTotalPageCount;d++)this.pageArray[d]&&
(this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0)},afterFlipToMax:function(b,c){var d=this.getMinPageIndex(b);this.addPagesAfterFlipToMax(d);this.setPagesStyleAfterFlipToMax(d);this.deleteUnnecessaryPagesAfterFlipToMax(d)},addPagesAfterFlipToMax:function(b){this.flipping||this.addPageArray([b+3,b,b-1,b-2]);this.supportSerialsFlip()||this.addPageArray([b+2,b+3]);this.pageArray[b+1]&&this.fillContent(b+1);
this.pageArray[b+2]&&this.fillContent(b+2);this.pageArray[b+3]&&this.fillContent(b+3)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(!rightToLeft));this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-1].setLeftOrRight(!rightToLeft));this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft));this.supportSerialsFlip()&&
this.flipping||(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2]),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3]),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=3;0<=b;b--)this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},flipToMin:function(b,c,d,f){f=this.flipPageManager.initFlipPageByIndex(b,
c,f);this.addPagesBeforeFlipToMin(c,d);this.pageArray[c-1]&&(this.pageArray[c-1].setLeftOrRight(!rightToLeft),f.nextPage=this.pageArray[c-1]);this.setPagesStyleBeforeFlipToMin(c,d);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return f},addPagesBeforeFlipToMin:function(b,c){this.addPageArray([b-1]);c&&this.supportSerialsFlip()&&this.addPageArray([b-2,b-3])},setPagesStyleBeforeFlipToMin:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],
b),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3],b),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(var d=c-4;0<=d;d--)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b-1;d>c;d--)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0)},afterFlipToMin:function(b,
c){var d=this.getMaxPageIndex(b);this.addPagesAfterFlipToMin(d);this.setPagesStyleAfterFlipToMin(d);this.deleteUnnecessaryPagesAfterFlipToMin(d)},addPagesAfterFlipToMin:function(b){this.flipping||this.addPageArray([b-3,b,b+1,b+2]);this.supportSerialsFlip()||this.addPageArray([b-2,b-3]);this.pageArray[b-1]&&this.fillContent(b-1);this.pageArray[b-2]&&this.fillContent(b-2);this.pageArray[b-3]&&this.fillContent(b-3)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],
b),this.pageArray[b].setLeftOrRight(rightToLeft));this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1]),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2]),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),
this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3]),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(b+=3;b<=originTotalPageCount;b++)this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},getFlipTo:function(b){var c=this.getMinPageIndex(this.currentPageIndex);b=this.getMinPageIndex(b);var d=c+1,f="";b>d&&(f="max");b+1<c&&(f="min",b+=1);return{flipTo:f,minIndex:c,maxIndex:d,toIndex:b}},getCurrentPages:function(){return BookInfo.getPagesByIndex(this.currentPageIndex)},
getPagesByIndex:function(b){return BookInfo.getPagesByIndex(b)},movetoCenter:function(b,c,d){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(b).length&&1<BookInfo.getPagesByIndex(c).length)){var f=this.pageWidth,g=-f/2,h=f/2,k=0,l=0;BookInfo.isLeftPage(b,!0)||1!=BookInfo.getPagesByIndex(b).length||(k=g);BookInfo.isLeftPage(b,!0)&&1==BookInfo.getPagesByIndex(b).length&&(k=h);BookInfo.isLeftPage(c,!0)||1!=BookInfo.getPagesByIndex(c).length||(l=g);BookInfo.isLeftPage(c,
!0)&&1==BookInfo.getPagesByIndex(c).length&&(l=h);this.fromTrans=0>this.movedX*l&&this.toTrans!=l?this.movedX:k;this.toTrans=l;b=2*f;void 0==d&&(d=b);isNaN(d)||(this.movedLength=d,this.movedX=$.easing.easeInOutSine(null,d,this.fromTrans,this.toTrans-this.fromTrans,b),d={tran:{x:parseInt(this.movedX),y:0}},this.setCSS(d))}},edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(b,c){var d=this.getMinPageIndex(this.currentPageIndex),f=d+1;if(b!=f&&b!=d){var g={x:0,y:0},h={x:0,y:0},k=c.getPageWidthHeight().width,
l=c.getPageWidthHeight().height,m=!1;if(b>f&&!rightToLeft||b<d&&rightToLeft)g={x:k,y:l},h.x=g.x-2,h.y=g.y-2,m=!0;if(b<d&&!rightToLeft||b>f&&rightToLeft)g={x:-k,y:l},h.x=g.x+2,h.y=g.y-2,m=!1;if(!this.flipping||!m||"right"!=this.flipToDirection)if(!this.flipping||m||"left"!=this.flipToDirection)return this.flipToDirection=m?"left":"right",[g,h]}},afterZoomIn:function(b){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(b=BookInfo.getCurrentPages(),void 0!=b&&null!=b))for(var c=0;c<b.length;c++){var d=
b[c];this.pageArray[d]&&this.pageArray[d].zoomInSideImage()}}else if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top,f=c-this.flipBook.parameters.top,d=this.flipBook.parameters.scale,f={tran:{x:parseInt(b-this.flipBook.parameters.left),y:parseInt(f)},scale:1,origin:{x:0,y:0}};1!=d&&this.resizeBook(Math.round(this.width*d/2),Math.round(this.height*d));
this.status_zoom||(d=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(d=rightToLeft?this.width/4:-this.width/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(d=rightToLeft?-this.width/4:this.width/4),f.tran={x:parseInt(d),y:0},f.left=b-d,f.top=c-0);this.setCSS(f);this.flipBook.parameters.tran=f.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=
$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;this.bookMap&&this.bookMap.refreshArea();isPhone()||isPad()||this.switchLargeImage()}},setZIndexByPageIndex:function(b,c){if(b){var d=c?c:this.currentPageIndex,d=this.getMinPageIndex(d);b==this.pageArray[d+1]?b.setZIndex(2):b==this.pageArray[d+2]?b.setZIndex(1):b==this.pageArray[d+3]?b.setZIndex(0):b==this.pageArray[d]?b.setZIndex(2):b==this.pageArray[d-1]?b.setZIndex(1):b==this.pageArray[d-2]&&
b.setZIndex(0)}},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right,b=windowHeight-b.top-b.bottom,d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,f=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,2*d,f)},getSpace:function(b){var c=bookConfig.leftMargin+toolBar.getLeftWidth(),d=bookConfig.rightMargin+
toolBar.getRightWidth(),f=bookConfig.topMargin+toolBar.getTopHeight(),g=bookConfig.bottomMargin+toolBar.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),d+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),f+=bookConfig.hardCoverBorderWidth,g+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:f,bottom:g}},getMinPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2)-1:2*Math.floor(b/2)},getMaxPageIndex:function(b){return b=bookConfig.isTheBookOpen?
2*Math.ceil(b/2):2*Math.floor(b/2)+1}}).extend(FlipBook),DoubleCalendar=Class({bookType:BookType.normal_book,doublePage:!0,create:function(b){this._super(b);this.resetZoomArea()},initBook:function(){this._super();this.showPage=this.flipBook},newFlipPage:function(){return new DoubleCalendarPage(this)},newPage:function(b){return new NormalPage(b,"page",!1,this.bookType,this.onBookPageLoaded.bind(this))},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),
this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(b));this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.setCSSByStyle(b));
rightToLeft?(this.currentPage&&this.currentPage.setUpOrDown(!1),this.previousPage&&this.previousPage.setUpOrDown(!1),this.previousPage2&&this.previousPage2.setUpOrDown(!1),this.currentPage2&&this.currentPage2.setUpOrDown(!0),this.nextPage&&this.nextPage.setUpOrDown(!0),this.nextPage2&&this.nextPage2.setUpOrDown(!0)):(this.currentPage&&this.currentPage.setUpOrDown(!0),this.previousPage&&this.previousPage.setUpOrDown(!0),this.previousPage2&&this.previousPage2.setUpOrDown(!0),this.currentPage2&&this.currentPage2.setUpOrDown(!1),
this.nextPage&&this.nextPage.setUpOrDown(!1),this.nextPage2&&this.nextPage2.setUpOrDown(!1))},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]},flipToMax:function(b,
c,d,f){f=this.flipPageManager.initFlipPageByIndex(b,c,f);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c+1]&&(this.pageArray[c+1].setUpOrDown(rightToLeft),f.nextPage=this.pageArray[c+1]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return f},setPagesStyleBeforeFlipToMax:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),
this.pageArray[b+2].setUpOrDown(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3],b),this.pageArray[b+3].setUpOrDown(rightToLeft)))},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setUpOrDown(!rightToLeft));this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-1].setUpOrDown(!rightToLeft));this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],
b),this.pageArray[b-2].setUpOrDown(!rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2]),this.pageArray[b+2].setUpOrDown(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3]),this.pageArray[b+3].setUpOrDown(rightToLeft)))},flipToMin:function(b,c,d,f){f=this.flipPageManager.initFlipPageByIndex(b,c,f);this.addPagesBeforeFlipToMin(c,
d);this.pageArray[c-1]&&(this.pageArray[c-1].setUpOrDown(!rightToLeft),f.nextPage=this.pageArray[c-1]);this.setPagesStyleBeforeFlipToMin(c,d);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return f},setPagesStyleBeforeFlipToMin:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setUpOrDown(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-
3],b),this.pageArray[b-3].setUpOrDown(!rightToLeft)))},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setUpOrDown(rightToLeft));this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setUpOrDown(rightToLeft));this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setUpOrDown(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b-1]&&
this.setZIndexByPageIndex(this.pageArray[b-1]),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2]),this.pageArray[b-2].setUpOrDown(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3]),this.pageArray[b-3].setUpOrDown(!rightToLeft)))},movetoCenter:function(b,c,d){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(b).length&&1<BookInfo.getPagesByIndex(c).length)){var f=this.pageHeight,g=-f/2,f=f/2,h=0,k=0;BookInfo.isLeftPage(b,
!0)||1!=BookInfo.getPagesByIndex(b).length||(h=g);BookInfo.isLeftPage(b,!0)&&1==BookInfo.getPagesByIndex(b).length&&(h=f);BookInfo.isLeftPage(c,!0)||1!=BookInfo.getPagesByIndex(c).length||(k=g);BookInfo.isLeftPage(c,!0)&&1==BookInfo.getPagesByIndex(c).length&&(k=f);this.fromTrans=0>this.movedY*k&&this.toTrans!=k?this.movedY:h;this.toTrans=k;b=2*this.pageHeight;void 0==d&&(d=b);isNaN(d)||(this.movedLength=d,this.movedY=$.easing.easeInOutSine(null,d,this.fromTrans,this.toTrans-this.fromTrans,b),this.setCSS({tran:{x:0,
y:this.movedY}}))}},edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(b,c){var d=this.getMinPageIndex(this.currentPageIndex),f=d+1;if(b!=f&&b!=d){var g={x:0,y:0},h={x:0,y:0},k=c.getPageWidthHeight().height;c.getPageWidthHeight();var l=!1;if(b>f&&!rightToLeft||b<d&&rightToLeft)g={x:k,y:0},h.x=g.x-2,h.y=g.y+2,l=!0;if(b<d&&!rightToLeft||b>f&&rightToLeft)g={x:-k,y:0},h.x=g.x+2,h.y=g.y+2,l=!1;if(!this.flipping||!l||"right"!=this.flipToDirection)if(!this.flipping||l||"left"!=this.flipToDirection)return this.flipToDirection=
l?"left":"right",[g,h]}},afterZoomIn:function(b){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(b=BookInfo.getCurrentPages(),void 0!=b&&null!=b))for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].zoomInSideImage()}}else if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top,f=this.flipBook.parameters.scale,d={tran:{x:b-
this.flipBook.parameters.left,y:c-this.flipBook.parameters.top},scale:1,origin:{x:0,y:0}};1!=f&&this.resizeBook(Math.round(this.width*f),Math.round(this.height*f/2));this.status_zoom||(f=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(f=rightToLeft?this.height/4:-this.height/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(f=rightToLeft?-this.height/4:this.height/4),d.tran={x:0,y:f},d.left=b-0,d.top=c-f);this.setCSS(d);this.flipBook.parameters.tran=
d.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;this.bookMap&&this.bookMap.refreshArea();isPhone()||isPad()||this.switchLargeImage()}},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right,b=windowHeight-b.top-b.bottom,d=bookConfig.largePageWidth*
(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,f=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,d,2*f)},getSpace:function(b){var c=bookConfig.leftMargin+toolBar.getLeftWidth(),d=bookConfig.rightMargin+toolBar.getRightWidth(),f=bookConfig.topMargin+toolBar.getTopHeight(),g=bookConfig.bottomMargin+toolBar.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),
d+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),f+=bookConfig.hardCoverBorderWidth,g+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:f,bottom:g}},resizeBook:function(b,c){this.endFlip();this.width=b;this.height=2*c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow(this.currentPageIndex)},
resetBookShadow:function(){},setAttachmentBeforeFlipTo:function(){},setAttachmentAfterFlipTo:function(){},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex);this.resetZoomArea()},resetZoomArea:function(){this.flipBook&&this.flipBook.parameters&&this.flipBook.parameters.zoomArea&&(1!=
this.getCurrentPages().length||BookInfo.isLeftPage(this.currentPageIndex,!0)?1==this.getCurrentPages().length&&BookInfo.isLeftPage(this.currentPageIndex,!0)?this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:50}:this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}:this.flipBook.parameters.zoomArea={left:0,top:50,right:0,bottom:0})},getDownUpPage:function(b,c){this.addPageArray([b,c]);this.pageArray[b]&&this.pageArray[b].beginToFlip();this.pageArray[c]&&this.pageArray[c].beginToFlip();
this.pageArray[b]&&(this.pageArray[b].page.setCSSByName("down-flip-side"),this.setZIndexByPageIndex(this.pageArray[b]));this.pageArray[c]&&(this.pageArray[c].page.setCSSByName("flip-vertical-side"),this.pageArray[c].page.side.addClass("boxShadow"),this.setZIndexByPageIndex(this.pageArray[c]));return[this.pageArray[b],this.pageArray[c]]}}).extend(DoubleFlipBook),SingleFlipBook=Class({pageBackArray:null,create:function(b){this.pageBackArray=[];this._super(b)},newFlipPage:function(){return new SingleFlipPage(this)},
resetPages:function(b){isNaN(b)||0>=b||(this.unWrapPageBackExcludeArray([b,b+1]),this.unWrapPageExcludeArray([b,b+1]),this.addPageArray([b,b+1]),this.addPageBackArray([b]),this.currentPage=this.pageArray[b],this.currentPage2=this.pageBackArray[b],this.nextPage=this.pageArray[b+1],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageBackArray[b-1],this.setPageCss(),this.loading())},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),
this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&
this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1))},addPageBackArray:function(b){if(b&&
this.pageBackArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(!this.pageBackArray[b[c]]||this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c]),this.pageBackArray[b[c]]))){var d=new this.newPageBack(b[c]),f=this.pageInfoArray[b[c]];d.mirrorSide();d.onResize(this.pageWidth*f.pageWidth,this.pageHeight*f.pageHeight,f.opacity);this.pageBackArray[b[c]]=d;this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c]);this.flipBook.append(d.container)}},getDownUpPage:function(b,c){var d=
b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);this.pageArray[d]&&this.pageArray[d].beginToFlip();this.pageBackArray[d]&&this.pageBackArray[d].beginToFlip();this.pageArray[d]&&this.pageArray[d].page.setCSSByName("right-flip-side");this.pageBackArray[d]&&(this.pageBackArray[d].page.setCSSByName("flip-side"),this.pageBackArray[d].page.side.addClass("boxShadow"));return[this.pageArray[d],this.pageBackArray[d]]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);
this.addPageBackArray([d]);rightToLeft?(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]},flipToMax:function(b,c,d){var f=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMax(c,
d);this.pageArray[c]&&(this.pageArray[c].setLeftOrRight(rightToLeft),f.nextPage=this.pageArray[c]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return f},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b]);c&&this.supportSerialsFlip()&&(this.addPageBackArray([b]),this.addPageArray([b+1]))},setPagesStyleBeforeFlipToMax:function(b,c){c&&(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(rightToLeft)),
this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b],b),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+1;d<=originTotalPageCount;d++)this.pageBackArray[d]&&(this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageBackArray[d]=void 0);for(d=c+2;d<=originTotalPageCount;d++)this.pageArray[d]&&
(this.pageArray[d]&&this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=void 0,this.pageBackArray[d]=void 0},afterFlipToMax:function(b){this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),
this.addPageBackArray([b]),this.addPageArray([b+1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b+1]&&this.fillContent(b+1)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b);this.pageBackArray[b-1]&&this.setZIndexByPageIndex(this.pageBackArray[b-1],b);this.supportSerialsFlip()||(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),
this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=2;0<=b;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},flipToMin:function(b,c,d){var f=this.flipPageManager.initFlipPageByIndex(b,
c);this.addPagesBeforeFlipToMin(c,d);this.pageArray[b]&&(f.nextPage=this.pageArray[b]);this.setPagesStyleBeforeFlipToMin(c);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return f},addPagesBeforeFlipToMin:function(b,c){},setPagesStyleBeforeFlipToMin:function(b){},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(var d=b-1;d>c;d--)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=
void 0,this.pageBackArray[d]=void 0},afterFlipToMin:function(b){this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.addPageArray([b+1]);this.pageArray[b]&&this.fillContent(b)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(var c=b+2;c<=
originTotalPageCount;c++)if(this.pageArray[c]||this.pageBackArray[c])this.pageArray[c]&&this.pageArray[c].remove(),this.pageBackArray[c]&&this.pageBackArray[c].remove(),this.pageArray[c]=void 0,this.pageBackArray[c]=void 0;this.pageBackArray[b+1]&&(this.pageBackArray[b+1]&&this.pageBackArray[b+1].remove(),this.pageBackArray[b+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(b){return[b]},movetoCenter:function(){},getFromStartPointByIndex:function(b,c){var d=
this.currentPageIndex;if(b!=d&&b!=d){var f={x:0,y:0},g={x:0,y:0},h=c.getPageWidthHeight().width,k=c.getPageWidthHeight().height,l=!1,f={x:h,y:k};rightToLeft&&(f={x:-h,y:k});if(b>d&&!rightToLeft||b<d&&rightToLeft)l=!0;if(b<d&&!rightToLeft||b>d&&rightToLeft)l=!1;b>d&&(g={x:f.x*(h-2)/h,y:k-2});b<d&&(g={x:-f.x*(h-2)/h,y:k-2});if(!this.flipping||!l||"right"!=this.flipToDirection)if(!this.flipping||l||"left"!=this.flipToDirection)return this.flipToDirection=l?"left":"right",[f,g]}},realBookPosition:function(){var b=
this.flipBook.offset().left-(rightToLeft?0:this.pageWidth),c=this.flipBook.offset().top;return[b,c]},edgeX:function(){this.MiddleX=this.pageWidth/2;rightToLeft&&(this.MiddleX=-this.pageWidth/2)},realIndex:function(b){var c=this.currentPageIndex;if(b&&!rightToLeft||!b&&rightToLeft)return[c,c+1];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getFromStartPointByCoordinate:function(b,c,d){if(b){var f={x:0,y:0},g={x:0,y:0},h=d.getPageWidthHeight().width;d=d.getPageWidthHeight().height;var k=b.y>d/
2?b.y-5:b.y+5;b.x<this.MiddleX&&(f.y=k,g.x=-h);b.x>this.MiddleX&&(f.y=k,g.x=h);c&&0<=c.indexOf("r")&&(g.x=h);c&&0<=c.indexOf("l")&&(g.x=-h);"tl"==c&&(f.y=0);"bl"==c&&(f.y=d);"tr"==c&&(f.y=0);"br"==c&&(f.y=d);f.x=rightToLeft?-h:h;g.y=f.y;return[f,g]}},getFlipTo:function(b){var c=this.currentPageIndex,d="";b>c&&(d="max");b<c&&(d="min");return{flipTo:d,minIndex:c,maxIndex:c,toIndex:b}},afterZoomIn:function(b){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&(b=BookInfo.getCurrentPages(),
void 0!=b&&null!=b))for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].zoomInSideImage()}}else isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this.flipBook.parameters.resize=!0,b=this.flipBook.offset().left,c=this.flipBook.offset().top,b-=this.flipBook.parameters.left,c-=this.flipBook.parameters.top,d=this.flipBook.parameters.scale,1!=d&&this.resizeBook(Math.round(this.width*d),Math.round(this.height*d)),transformCSS({tran:{x:b,
y:c},scale:1,origin:{x:0,y:0},obj:this.flipBook}),this.flipBook.parameters.tran={x:b,y:c},this.flipBook.parameters.scale=1,this.flipBook.parameters.toScale=1,this.flipBook.parameters.width=$(this.flipBook).width(),this.flipBook.parameters.height=$(this.flipBook).height(),this.flipBook.parameters.origin={x:0,y:0},this.flipBook.parameters.resize=!1,this.bookMap&&this.bookMap.refreshArea(),isPhone()||isPad()||this.switchLargeImage())},setZIndexByPageIndex:function(b,c){if(b){var d=c?c:this.currentPageIndex;
b==this.pageArray[d]?b.setZIndex(2):b==this.pageBackArray[d]?b.setZIndex(1):b==this.pageArray[d+1]?b.setZIndex(0):b.setZIndex(-1)}},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right,b=windowHeight-b.top-b.bottom,d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,f=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,
b,d,f)},getSpace:function(b){var c=bookConfig.leftMargin+toolBar.getLeftWidth(),d=bookConfig.rightMargin+toolBar.getRightWidth(),f=bookConfig.topMargin+toolBar.getTopHeight(),g=bookConfig.bottomMargin+toolBar.getBottomHeight();b&&(c+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,d+=rightToLeft?0:bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1),f+=bookConfig.hardCoverBorderWidth,g+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:f,bottom:g}},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;
b=this.getCssLeft();var c=this.getSpace(!0);return c.left+(windowWidth-c.left-c.right-this.width)/2-b},getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(FlipBook),SingleFlipCalendar=Class({bookType:BookType.single_book,doublePage:!1,pageBackArray:null,create:function(b){this.pageBackArray=[];this._super(b)},newPage:function(b){return new NormalPage(b,"page",!0,this.bookType,this.onBookPageLoaded.bind(this))},
newPageBack:function(b){return new NormalPage(b,"pageBack",!0,BookType.single_book)},newFlipPage:function(){return new SingleCalendarPage(this)},resetPages:function(b){isNaN(b)||0>=b||(this.unWrapPageBackExcludeArray([b,b+1]),this.unWrapPageExcludeArray([b,b+1]),this.addPageArray([b,b+1]),this.addPageBackArray([b]),this.currentPage=this.pageArray[b],this.currentPage2=this.pageBackArray[b],this.nextPage=this.pageArray[b+1],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageBackArray[b-
1],this.setPageCss(),this.loading())},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));
this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setUpOrDown(!0),this.previousPage&&this.previousPage.setUpOrDown(!0),this.previousPage2&&this.previousPage2.setUpOrDown(!0),this.currentPage2&&this.currentPage2.setUpOrDown(!0),this.nextPage&&this.nextPage.setUpOrDown(!0)):(this.currentPage&&this.currentPage.setUpOrDown(!1),this.previousPage&&this.previousPage.setUpOrDown(!1),this.previousPage2&&this.previousPage2.setUpOrDown(!1),
this.currentPage2&&this.currentPage2.setUpOrDown(!1),this.nextPage&&this.nextPage.setUpOrDown(!1))},addPageBackArray:function(b){if(b&&this.pageBackArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(!this.pageBackArray[b[c]]||this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c]),this.pageBackArray[b[c]]))){var d=new this.newPageBack(b[c]),f=this.pageInfoArray[b[c]];d.onResize(this.pageWidth*f.pageWidth,this.pageHeight*f.pageHeight,f.opacity);d.mirrorSide();this.pageBackArray[b[c]]=
d;this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c]);this.flipBook.append(d.container)}},getDownUpPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);this.pageArray[d]&&this.pageArray[d].beginToFlip();this.pageBackArray[d]&&this.pageBackArray[d].beginToFlip();this.pageArray[d]&&this.pageArray[d].page.setCSSByName("down-flip-side");this.pageBackArray[d]&&(this.pageBackArray[d].page.setCSSByName("flip-vertical-side"),this.pageBackArray[d].page.side.addClass("boxShadow"));
return[this.pageArray[d],this.pageBackArray[d]]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);rightToLeft?(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-up-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-down-side")):(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-down-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-up-side"));return[this.pageArray[d],this.pageBackArray[d]]},
flipToMax:function(b,c,d){var f=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c]&&(this.pageArray[c].setUpOrDown(rightToLeft),f.nextPage=this.pageArray[c]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return f},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b]);c&&this.supportSerialsFlip()&&(this.addPageBackArray([b]),this.addPageArray([b+1]))},setPagesStyleBeforeFlipToMax:function(b,c){c&&(this.pageArray[b]&&
(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setUpOrDown(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b],b),this.pageBackArray[b].setUpOrDown(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setUpOrDown(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+1;d<=originTotalPageCount;d++)this.pageBackArray[d]&&(this.pageBackArray[d]&&this.pageBackArray[d].remove(),
this.pageBackArray[d]=void 0);for(d=c+2;d<=originTotalPageCount;d++)this.pageArray[d]&&(this.pageArray[d]&&this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=void 0,this.pageBackArray[d]=void 0},afterFlipToMax:function(b){this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},
addPagesAfterFlipToMax:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b+1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b+1]&&this.fillContent(b+1)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b);this.pageBackArray[b-1]&&this.setZIndexByPageIndex(this.pageBackArray[b-1],b);this.supportSerialsFlip()||(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b]),
this.pageArray[b].setUpOrDown(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setUpOrDown(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setUpOrDown(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=2;0<=b;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),this.pageArray[b]=
void 0,this.pageBackArray[b]=void 0},flipToMin:function(b,c,d){var f=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMin(c,d);this.pageArray[b]&&(f.nextPage=this.pageArray[b]);this.setPagesStyleBeforeFlipToMin(c);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return f},addPagesBeforeFlipToMin:function(b,c){},setPagesStyleBeforeFlipToMin:function(b){},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(var d=b-1;d>c;d--)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&
this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=void 0,this.pageBackArray[d]=void 0},afterFlipToMin:function(b){this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.addPageArray([b+1]);this.pageArray[b]&&this.fillContent(b)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+
1].setUpOrDown(rightToLeft))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(var c=b+2;c<=originTotalPageCount;c++)if(this.pageArray[c]||this.pageBackArray[c])this.pageArray[c]&&this.pageArray[c].remove(),this.pageBackArray[c]&&this.pageBackArray[c].remove(),this.pageArray[c]=void 0,this.pageBackArray[c]=void 0;this.pageBackArray[b+1]&&(this.pageBackArray[b+1]&&this.pageBackArray[b+1].remove(),this.pageBackArray[b+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(b){return[b]},
movetoCenter:function(){},getFromStartPointByIndex:function(b,c){var d=this.currentPageIndex;if(b!=d&&b!=d){var f={x:0,y:0},g={x:0,y:0},h=c.getPageWidthHeight().height;c.getPageWidthHeight();var k=!1,f={x:h,y:0};rightToLeft&&(f={x:-h,y:0});if(b>d&&!rightToLeft||b<d&&rightToLeft)k=!0;if(b<d&&!rightToLeft||b>d&&rightToLeft)k=!1;b>d&&(g={x:f.x*(h-2)/h,y:2});b<d&&(g={x:-f.x*(h-2)/h,y:2});if(!this.flipping||!k||"right"!=this.flipToDirection)if(!this.flipping||k||"left"!=this.flipToDirection)return this.flipToDirection=
k?"left":"right",[f,g]}},realBookPosition:function(){var b=this.flipBook.offset().left,c=this.flipBook.offset().top-(rightToLeft?0:this.pageHeight);return[b,c]},edgeX:function(){this.MiddleX=this.pageHeight/2;rightToLeft&&(this.MiddleX=-this.pageHeight/2)},realIndex:function(b){var c=this.currentPageIndex;if(b&&!rightToLeft||!b&&rightToLeft)return[c,c+1];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getFromStartPointByCoordinate:function(b,c,d){if(b){var f={x:0,y:0},g={x:0,y:0},h=d.getPageWidthHeight().height;
d=d.getPageWidthHeight().width;var k=b.y>d/2?b.y-5:b.y+5;b.x<this.MiddleX&&(f.y=k,g.x=-h);b.x>this.MiddleX&&(f.y=k,g.x=h);c&&0<=c.indexOf("r")&&(g.x=h);c&&0<=c.indexOf("l")&&(g.x=-h);"tl"==c&&(f.y=0);"bl"==c&&(f.y=d);"tr"==c&&(f.y=0);"br"==c&&(f.y=d);f.x=rightToLeft?-h:h;g.y=f.y;return[f,g]}},getFlipTo:function(b){var c=this.currentPageIndex,d="";b>c&&(d="max");b<c&&(d="min");return{flipTo:d,minIndex:c,maxIndex:c,toIndex:b}},afterZoomIn:function(b){if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion&&
(b=BookInfo.getCurrentPages(),void 0!=b&&null!=b))for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].zoomInSideImage()}}else isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this.flipBook.parameters.resize=!0,b=this.flipBook.offset().left,c=this.flipBook.offset().top,b-=this.flipBook.parameters.left,c-=this.flipBook.parameters.top,d=this.flipBook.parameters.scale,1!=d&&this.resizeBook(Math.round(this.width*d),Math.round(this.height*
d)),transformCSS({tran:{x:b,y:c},scale:1,origin:{x:0,y:0},obj:this.flipBook}),this.flipBook.parameters.tran={x:b,y:c},this.flipBook.parameters.scale=1,this.flipBook.parameters.toScale=1,this.flipBook.parameters.width=$(this.flipBook).width(),this.flipBook.parameters.height=$(this.flipBook).height(),this.flipBook.parameters.origin={x:0,y:0},this.flipBook.parameters.resize=!1,this.bookMap&&this.bookMap.refreshArea(),isPhone()||isPad()||this.switchLargeImage())},setZIndexByPageIndex:function(b,c){if(b){var d=
c?c:this.currentPageIndex;b==this.pageArray[d]?b.setZIndex(2):b==this.pageBackArray[d]?b.setZIndex(1):b==this.pageArray[d+1]?b.setZIndex(0):b.setZIndex(-1)}},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right,b=windowHeight-b.top-b.bottom,d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,f=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/
100;return fitPageWidthHeight(c,b,d,f)},getSpace:function(b){var c=bookConfig.leftMargin+toolBar.getLeftWidth(),d=bookConfig.rightMargin+toolBar.getRightWidth(),f=bookConfig.topMargin+toolBar.getTopHeight(),g=bookConfig.bottomMargin+toolBar.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth,d+=bookConfig.hardCoverBorderWidth,f+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,g+=rightToLeft?0:bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1));return{left:c,right:d,
top:f,bottom:g}},resizeBook:function(b,c){this.endFlip();this.width=b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow()},resetBookShadow:function(){},setAttachmentBeforeFlipTo:function(){},setAttachmentAfterFlipTo:function(){},flippingTo:function(b){this.currentPageIndex=
b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!1);setLocationHash(this.currentPageIndex)}}).extend(SingleFlipBook),NormalBook=Class({bookType:BookType.normal_book,doublePage:!0,create:function(b){this._super(b);this.resetZoomArea()},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){this.thicknessManager=new ThicknessManager(this.flipBook,
this);this.thicknessManager.refreshThickness();this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow(this.currentPageIndex);this.showOrHideGrayShadow(this.currentPageIndex);isTouchDevice()||new ZoomHint(this.parent);0<=this.getCurrentPages().indexOf(1)&&(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init());void 0!=global.staticAd&&!0==staticAd.haveAd&&(this.adContainer=new StaticAd(this.flipBook));this.showPage=this.flipBook;this.bookMap||
bookType==BookType.catalog_book||isPad()||isPhone()||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook))}).delay(this,1);setCurrentIndexTextField(this.currentPageIndex,!0)},showOrHideGrayShadow:function(b){$.browser.msie||$.browser.safari||!bookConfig.ShowTopLeftShadow||this.bookType!=BookType.normal_book||this.grayShadow||(this.grayShadow=$("<div class='grayShadow'></div>"),b=$("<div class='kong edgeShadow' ></div>"),
this.grayShadow.append(b),this.flipBook.append(this.grayShadow))},resetBookShadow:function(b){b=this.flipPageManager.array.length;if(0==b){b=2==BookInfo.getPagesByIndex(this.currentPageIndex).length;var c=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.normalBookShadow.doubleWidth(b);this.normalBookShadow.right(c);this.normalBookShadow.show();this.grayShadow&&(b?this.grayShadow.show():this.grayShadow.hide())}else{for(var d=c=!0,f=0;f<b;f++){var g=this.flipPageManager.array[f],h=this.flipPageManager[g].nextIndex,
g=this.flipPageManager[g].currentIndex;1==BookInfo.getPagesByIndex(h).length&&BookInfo.isLeftPage(h,!0)&&(d=!1);1==BookInfo.getPagesByIndex(g).length&&BookInfo.isLeftPage(g,!0)&&(d=!1);1!=BookInfo.getPagesByIndex(h).length||BookInfo.isLeftPage(h,!0)||(c=!1);1!=BookInfo.getPagesByIndex(g).length||BookInfo.isLeftPage(g,!0)||(c=!1)}c||d||this.normalBookShadow.hide();c&&!d&&(this.normalBookShadow.show(),this.normalBookShadow.doubleWidth(!1),this.normalBookShadow.right(!1));!c&&d&&(this.normalBookShadow.show(),
this.normalBookShadow.doubleWidth(!1),this.normalBookShadow.right(!0));this.grayShadow&&(c&&d?this.grayShadow.show():this.grayShadow.hide())}},hasTwoSingleFlipPage:function(b){for(var c=this.flipPageManager.array.length,d,f=0;f<c;f++){var g=this.flipPageManager.array[f],h=this.flipPageManager[g].nextIndex,g=this.flipPageManager[g].currentIndex;1==BookInfo.getPagesByIndex(h).length&&(d=h);1==BookInfo.getPagesByIndex(g).length&&(d=g)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&
1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?(this.normalBookShadow.hide(),!0):!1},newPage:function(b){return new NormalPage(b,"page",!1,this.bookType,this.onBookPageLoaded.bind(this))},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex);this.resetZoomArea()},resetZoomArea:function(){this.flipBook&&
this.flipBook.parameters&&this.flipBook.parameters.zoomArea&&(1!=this.getCurrentPages().length||BookInfo.isLeftPage(this.currentPageIndex,!0)?1==this.getCurrentPages().length&&BookInfo.isLeftPage(this.currentPageIndex,!0)?this.flipBook.parameters.zoomArea={left:0,top:0,right:50,bottom:0}:this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}:this.flipBook.parameters.zoomArea={left:50,top:0,right:0,bottom:0})},afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex);
this.bmt&&this.bmt.adjustBar();this.thicknessManager.refreshThickness();this.showOrHideGrayShadow(this.currentPageIndex);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3})},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.thicknessManager.setAttachmentBefore(b);this.adContainer&&this.adContainer.setStyle({"z-index":1});this.bmt&&this.bmt.setAttachmentBefore(b);this.resetBookShadow(b);this.showOrHideGrayShadow(b)},
setAttachmentAfterFlipTo:function(b){this.thicknessManager.refreshThickness();this.stopMedia();this.resetSlider();this.showOrHideGrayShadow(b);this.resetBookShadow(b);this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));this.bmt&&this.bmt.refresh();resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.flipping||!this.adContainer||
1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3});this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeBook:function(b,c){this.endFlip();this.width=2*b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow(this.currentPageIndex)},
resizeAttachments:function(b,c){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();this.thicknessManager&&this.thicknessManager.resizeAttachment(b,c);this.bookMap&&(this.bookMap.onResize(b,c),this.bookMap.refreshArea());var d=this.getCssLeft(),f=this.getCssTop();this.adContainer&&(rightToLeft&&(d+=b),this.adContainer.setStyle({left:d,top:f,width:b+"px",height:c+"px"}),this.adContainer.resize())},movetoCenter:function(b,c,d){this._super(b,c,d);this.thicknessManager.followToPoint(b,
c,d,!1)},resizeAttachmentAfterZoomIn:function(b){this.thicknessManager&&(isPhone()||isPad()||this.thicknessManager.resizeAttachment(this.width,this.height));if(this.bmt)this.bmt.onResize()},afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.resizeAttachmentAfterZoomIn(this.flipBook.parameters.scale))}}).extend(DoubleFlipBook),NormalCalendar=Class({bookType:BookType.normal_book,doublePage:!0,create:function(b){this._super(b);this.resetZoomArea()},
initBook:function(){this._super();this.initAttachments()},initAttachments:function(){this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow(this.currentPageIndex);isTouchDevice()||new ZoomHint(this.parent);0<=this.getCurrentPages().indexOf(1)&&(this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen),this.miniFullScreen.init());void 0!=global.staticAd&&!0==staticAd.haveAd&&(this.adContainer=new StaticAd(this.flipBook));this.showPage=this.flipBook;this.bookMap||bookType==
BookType.catalog_book||isPad()||isPhone()||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook))}).delay(this,1);setCurrentIndexTextField(this.currentPageIndex,!0)},resetBookShadow:function(b){b=this.flipPageManager.array.length;if(0==b){b=2==BookInfo.getPagesByIndex(this.currentPageIndex).length;var c=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.normalBookShadow.doubleHeight(b);this.normalBookShadow.down(c);
this.normalBookShadow.show()}else{for(var d=c=!0,f=0;f<b;f++){var g=this.flipPageManager.array[f],h=this.flipPageManager[g].nextIndex,g=this.flipPageManager[g].currentIndex;1==BookInfo.getPagesByIndex(h).length&&BookInfo.isLeftPage(h,!0)&&(d=!1);1==BookInfo.getPagesByIndex(g).length&&BookInfo.isLeftPage(g,!0)&&(d=!1);1!=BookInfo.getPagesByIndex(h).length||BookInfo.isLeftPage(h,!0)||(c=!1);1!=BookInfo.getPagesByIndex(g).length||BookInfo.isLeftPage(g,!0)||(c=!1)}c||d||this.normalBookShadow.hide();c&&
!d&&(this.normalBookShadow.show(),this.normalBookShadow.doubleHeight(!1),this.normalBookShadow.down(!1));!c&&d&&(this.normalBookShadow.show(),this.normalBookShadow.doubleHeight(!1),this.normalBookShadow.down(!0))}},hasTwoSingleFlipPage:function(b){for(var c=this.flipPageManager.array.length,d,f=0;f<c;f++){var g=this.flipPageManager.array[f],h=this.flipPageManager[g].nextIndex,g=this.flipPageManager[g].currentIndex;1==BookInfo.getPagesByIndex(h).length&&(d=h);1==BookInfo.getPagesByIndex(g).length&&
(d=g)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?(this.normalBookShadow.hide(),!0):!1},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);setLocationHash(this.currentPageIndex);this.resetZoomArea()},afterCurling:function(){this._super();
this.resetBookShadow(this.currentPageIndex);this.bmt&&this.bmt.adjustBar();this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3})},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.adContainer&&this.adContainer.setStyle({"z-index":1});this.bmt&&this.bmt.setAttachmentBefore(b);this.resetBookShadow(b)},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.resetBookShadow(b);this.flipping||
(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));this.bmt&&this.bmt.refresh();resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.setStyle({"z-index":3});this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeAttachments:function(b,
c){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();this.bookMap&&(this.bookMap.onResize(b,c),this.bookMap.refreshArea());var d=this.getCssLeft(),f=this.getCssTop();this.adContainer&&(rightToLeft&&(d+=b),this.adContainer.setStyle({left:d,top:f,width:b+"px",height:c+"px"}),this.adContainer.resize())},resizeAttachmentAfterZoomIn:function(b){if(this.bmt)this.bmt.onResize()},afterZoomIn:function(b){isPhone()||isPad()||!b||!this.flipBook.parameters||this.flipBook.parameters.resize||
(this._super(b),this.resizeAttachmentAfterZoomIn(this.flipBook.parameters.scale))}}).extend(DoubleCalendar),SingleBook=Class({bookType:BookType.single_book,doublePage:!1,create:function(b){this._super(b)},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){bookConfig.showThicknessOnMobile&&(this.thicknessManager=new SingleBookThicknessManager(this.flipBook,this),this.thicknessManager.refreshThickness());this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow();
setCurrentIndexTextField(this.currentPageIndex,!1);isTouchDevice()||new ZoomHint(this.parent);this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen);this.miniFullScreen.init();this.showPage=this.flipBook;this.bookMap||isPad()||isPhone()||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook,!0))}).delay(this,1)},newPage:function(b){return new NormalPage(b,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this))},
newPageBack:function(b){return new NormalPage(b,"pageBack",!0,BookType.single_book)},afterCurling:function(){this._super();this.thicknessManager&&this.thicknessManager.refreshThickness()},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.thicknessManager&&this.thicknessManager.setAttachmentBefore(b)},setAttachmentAfterFlipTo:function(b){this.thicknessManager&&this.thicknessManager.refreshThickness();this.stopMedia();this.resetSlider();this.flipping||(this.openShownMedia(),this.addHistoryTexts(),
this.addSearchHighlight());this.bmt&&this.bmt.refresh();bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},resizeBook:function(b,c){this.endFlip();this.width=b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=
1);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow()},resizeAttachments:function(b,c){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();this.thicknessManager&&this.thicknessManager.resizeAttachment(b,c);this.bookMap&&(this.bookMap.onResize(b,c),this.bookMap.refreshArea())},resetBookShadow:function(){this.normalBookShadow.doubleWidth(!0);this.normalBookShadow.right(!1)},flippingTo:function(b){this.currentPageIndex=
b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!1);setLocationHash(this.currentPageIndex)},movetoCenter:function(b,c,d){this._super(b,c,d);this.thicknessManager&&this.thicknessManager.followToPoint(b,c,d,!1)},resizeAttachmentAfterZoomIn:function(b){this.thicknessManager&&(isPhone()||isPad()||this.thicknessManager.resizeAttachment(this.width,this.height));if(this.bmt)this.bmt.onResize()},
afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.resizeAttachmentAfterZoomIn(this.flipBook.parameters.scale))}}).extend(SingleFlipBook),SingleCalendar=Class({bookType:BookType.single_book,doublePage:!1,create:function(b){this._super(b)},initBook:function(){this._super();this.initAttachments()},initAttachments:function(){this.normalBookShadow=new BookShadow(this.flipBook);this.resetBookShadow();setCurrentIndexTextField(this.currentPageIndex,
!1);isTouchDevice()||new ZoomHint(this.parent);this.miniFullScreen||(this.miniFullScreen=new BookMiniFullscreen);this.miniFullScreen.init();this.showPage=this.flipBook;this.bookMap||isPad()||isPhone()||(this.bookMap=new ZoomMap(this),this.bookMap.fillContent(this.currentPageIndex));(function(){isPhone()||isPad()||(this.bmt=new BookmarkTab(this.flipBook,!0))}).delay(this,1)},newPage:function(b){return new NormalPage(b,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this))},newPageBack:function(b){return new NormalPage(b,
"pageBack",!0,BookType.single_book)},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation()},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());this.bmt&&this.bmt.refresh();bookConfig.ThumbnailsButtonVisible&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30);this.bookMap&&this.bookMap.fillContent(this.currentPageIndex)},
resizeAttachments:function(b,c){if(this.bmt)this.bmt.onResize();if(this.miniFullScreen)this.miniFullScreen.onResize();this.bookMap&&(this.bookMap.onResize(b,c),this.bookMap.refreshArea())},resetBookShadow:function(){this.normalBookShadow.doubleHeight(!0);this.normalBookShadow.down(!1)},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,
!1);setLocationHash(this.currentPageIndex)}}).extend(SingleFlipCalendar),HardSide=Class({isHardPage:!0,create:function(b,c,d,f){this._super(b,c,d,f);this.isHard=!0;this.borderWidth=bookConfig.hardCoverBorderWidth;this.outerCoverBorder=bookConfig.outerCoverBorder||BookInfo.isInnerPage(b,d);this.container=this.side},initPageSide:function(){this.pageSide=$("<div class='pageSide'></div>");this.side.append(this.pageSide)},initSide:function(){this.side=$("<div class='hardSide' style='background-color:"+
bookConfig.borderColor+";'></div>")},addCoil:function(){parseBool(bookConfig.addPaperCoil)&&(this.midCoil=$("<div style='z-index:6;'></div>"),this.pageSide.append(this.midCoil))},resizePage:function(b,c){bookConfig.FlipDirection?(this.width=b+2*this.borderWidth,this.height=c+this.borderWidth,this.pageSideWidth=this.outerCoverBorder?b:b+2*this.borderWidth,this.pageSideHeight=this.outerCoverBorder?c:c+this.borderWidth):(this.width=b+this.borderWidth,this.height=c+2*this.borderWidth,this.pageSideWidth=
this.outerCoverBorder?b:b+this.borderWidth,this.pageSideHeight=this.outerCoverBorder?c:c+2*this.borderWidth);this.maskWidth=parseInt(Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2)));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.attachW=parseInt(100*(this.outerCoverBorder?b:this.width)/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.attachH=parseInt(100*(this.outerCoverBorder?c:this.height)/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));
this.side.css({width:this.width,height:this.height});this.tmpContent.css({width:this.attachW,height:this.attachH,top:-this.attachH*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.attachW*parseFloat(bookConfig.visibleAreaLeft)/100});this.pageSide.css({position:"absolute",width:this.pageSideWidth,height:this.pageSideHeight});bookConfig.FlipDirection?this.pageSide.css({left:this.outerCoverBorder?this.borderWidth:0}):this.pageSide.css({top:this.outerCoverBorder?this.borderWidth:0});this.pageWidth=
b;this.pageHeight=c;this.resizeSideImage()},setLeftOrRight:function(b){this._super(b);var c=b&&this.outerCoverBorder?this.borderWidth:0,d=bookConfig.cornerRound;b?(this.side.css({"border-radius":d+"px 0px 0px "+d+"px"}),this.side.css({"margin-top":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"})):(this.side.css({"border-radius":"0px "+d+"px "+d+"px 0px"}),this.side.css({"margin-top":-this.borderWidth+"px","margin-right":-this.borderWidth+"px"}));this.pageSide.css({left:c+"px"})},setUpOrDown:function(b){this._super(b);
var c=b&&this.outerCoverBorder?this.borderWidth:0,d=bookConfig.cornerRound;b?(this.side.css({"border-radius":d+"px "+d+"px 0px 0px"}),this.side.css({"margin-top":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"})):(this.side.css({"border-radius":"0px 0px "+d+"px "+d+"px"}),this.side.css({"margin-bottom":-this.borderWidth+"px","margin-left":-this.borderWidth+"px"}));this.pageSide.css({top:c+"px"})},addFlipShadow:function(){}}).extend(BookPage),HardCover=Class({create:function(b){this.parent=
b;this.borderWidth=bookConfig.hardCoverBorderWidth;this.rightToLeft=bookConfig.RightToLeft;this.cover=$("<div class='hardCover'></div>");this.initPage();this.initBookSpine();this.parent.append(this.cover)},initPage:function(){var b=BookInfo.getHardCoverPages(!0);this.leftPage=new HardSide(b[0],"coverPage",BookType.normal_book);this.rightPage=new HardSide(b[1],"coverPage",BookType.normal_book);this.cover.append(this.leftPage.getSide());this.cover.append(this.rightPage.getSide());this.leftPage.addAttachment();
this.rightPage.addAttachment();this.leftPage.setLeftOrRight(!0);this.rightPage.setLeftOrRight(!1);this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},onResize:function(b,c,d){if(this.leftPage)this.leftPage.onResize(b,
c);if(this.rightPage)this.rightPage.onResize(b,c);this.topSpine.onResize(d);this.bottomSpine.onResize(d);this.pageWidth=b;this.pageHeight=c;this.resizeCover(b,c,d)},resizeCover:function(b,c,d){this.thicknessWidthArray=d;this.width=2*b+(d[0]+d[1])+2*this.borderWidth;this.height=c+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:-(this.borderWidth+d[0])+"px",top:-this.borderWidth+"px"})},refresh:function(b,c,d){this.refreshBookSpine(c);this.refreshPage(b,d);this.resizeCover(this.pageWidth,
this.pageHeight,c)},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!0)},refreshPage:function(b,c){var d=this.getSensitiveIndex().min,f=this.getSensitiveIndex().max;if(b<=d||b>=f){if(b<=d&&bookConfig.RightToLeft||!bookConfig.RightToLeft&&b>=f)this.rightPage&&this.rightPage.setVisible(!1),(c<f&&bookConfig.RightToLeft||c>d&&!bookConfig.RightToLeft)&&this.leftPage&&this.leftPage.setVisible(!0);if(b<=d&&!bookConfig.RightToLeft||bookConfig.RightToLeft&&b>=f)this.leftPage&&this.leftPage.setVisible(!1),
(c<f&&!bookConfig.RightToLeft||c>d&&bookConfig.RightToLeft)&&this.rightPage&&this.rightPage.setVisible(!0);this.hideBookSpine()}else this.showBookSpine(),this.leftPage&&this.leftPage.setVisible(!0),this.rightPage&&this.rightPage.setVisible(!0)},refreshBookSpine:function(b){this.topSpine.refresh(b);this.bottomSpine.refresh(b)},hideBookSpine:function(){this.topSpine.hide();this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},
hide:function(){this.cover.hide()}}),BookSpine=Class({create:function(b){this.parent=b;this.initSpine()},initSpine:function(){this.height=bookConfig.hardCoverBorderWidth;this.bookSpine=$("<div class='bookSpine'></div>");this.bookSpine.css({height:this.height,"background-color":bookConfig.borderColor});this.parent.append(this.bookSpine);this.addShadow()},addShadow:function(){this.leftShadow=$("<div class='left_shadow shadow'></div>");this.rightShadow=$("<div class='right_shadow shadow'></div>");this.bookSpine.append(this.leftShadow);
this.bookSpine.append(this.rightShadow)},refresh:function(b){this.onResize(b)},show:function(){this.bookSpine.show()},hide:function(){},setCSSByStyle:function(b){this.bookSpine.css(b)},setCSSByName:function(b){this.bookSpine.attr("class",b);this.bookSpine.addClass("bookSpine")},onResize:function(b){this.width=b[0]+b[1];this.bookSpine.css({width:this.width,"margin-left":-this.width/2+"px"})}}),HardCalendarCover=Class({create:function(b){this.parent=b;this.borderWidth=bookConfig.hardCoverBorderWidth;
this.rightToLeft=bookConfig.RightToLeft;this.cover=$("<div class='hardCover'></div>");this.initPage();this.initBookSpine();this.parent.append(this.cover)},initPage:function(){var b=BookInfo.getHardCoverPages(!0);this.leftPage=new HardSide(b[0],"coverPage",BookType.normal_book);this.rightPage=new HardSide(b[1],"coverPage",BookType.normal_book);this.cover.append(this.leftPage.getSide());this.cover.append(this.rightPage.getSide());this.leftPage.addAttachment();this.rightPage.addAttachment();this.leftPage.setUpOrDown(!0);
this.rightPage.setUpOrDown(!1);this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage.setCSSByStyle({bottom:"0",left:"0","margin-bottom":0,"margin-left":0})},initBookSpine:function(){this.topSpine=new BookSpine(this.cover);this.bottomSpine=new BookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},onResize:function(b,c,d){if(this.leftPage)this.leftPage.onResize(b,c);if(this.rightPage)this.rightPage.onResize(b,
c);this.topSpine.onResize(d);this.bottomSpine.onResize(d);this.pageWidth=b;this.pageHeight=c;this.resizeCover(b,c,d)},resizeCover:function(b,c,d){this.thicknessWidthArray=d;this.width=b+2*this.borderWidth;this.height=2*c+(d[0]+d[1])+2*this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",left:-this.borderWidth+"px",top:-(this.borderWidth+d[0])+"px"})},refresh:function(b,c,d){this.refreshBookSpine(c);this.refreshPage(b,d);this.resizeCover(this.pageWidth,this.pageHeight,c)},
getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!0)},refreshPage:function(b,c){var d=this.getSensitiveIndex().min,f=this.getSensitiveIndex().max;if(b<=d||b>=f){if(b<=d&&bookConfig.RightToLeft||!bookConfig.RightToLeft&&b>=f)this.rightPage&&this.rightPage.setVisible(!1),(c<f&&bookConfig.RightToLeft||c>d&&!bookConfig.RightToLeft)&&this.leftPage&&this.leftPage.setVisible(!0);if(b<=d&&!bookConfig.RightToLeft||bookConfig.RightToLeft&&b>=f)this.leftPage&&this.leftPage.setVisible(!1),(c<f&&
!bookConfig.RightToLeft||c>d&&bookConfig.RightToLeft)&&this.rightPage&&this.rightPage.setVisible(!0);this.hideBookSpine()}else this.showBookSpine(),this.leftPage&&this.leftPage.setVisible(!0),this.rightPage&&this.rightPage.setVisible(!0)},refreshBookSpine:function(b){this.topSpine.refresh(b);this.bottomSpine.refresh(b)},hideBookSpine:function(){this.topSpine.hide();this.bottomSpine.hide()},showBookSpine:function(){this.topSpine.show();this.bottomSpine.show()},show:function(){this.cover.show()},hide:function(){this.cover.hide()}}),
HardBook=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){var c=this.currentPageIndex;
if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){return!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||
0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return!1},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount?gotoPageFun(totalPageCount-1):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==
b||2==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),
this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);
this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(b,c){this._super(b,
c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),HardCalendar=Class({bookType:BookType.normal_book,
create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){return!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,
totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return!1},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount?gotoPageFun(totalPageCount-1):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCalendarCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||
b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),
this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},
afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),
this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalCalendar),OpenHardCalendar=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-
1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==
totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(HardCalendar),OpenHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-
1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==
totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(HardBook),SingleHardCover=Class({initPage:function(){var b=BookInfo.getHardCoverPages(!1);bookConfig.RightToLeft&&(this.leftPage=new HardSide(b[0],"coverPage",BookType.single_book));
bookConfig.RightToLeft||(this.rightPage=new HardSide(b[0],"coverPage",BookType.single_book));this.leftPage&&this.cover.append(this.leftPage.getSide());this.rightPage&&this.cover.append(this.rightPage.getSide());this.leftPage&&this.leftPage.addAttachment();this.rightPage&&this.rightPage.addAttachment();this.leftPage&&this.leftPage.setLeftOrRight(!0);this.rightPage&&this.rightPage.setLeftOrRight(!1);this.leftPage&&this.leftPage.setCSSByStyle({top:"0",left:"0","margin-top":0,"margin-left":0});this.rightPage&&
this.rightPage.setCSSByStyle({top:"0",right:"0","margin-top":0,"margin-right":0})},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!1)},initBookSpine:function(){this.topSpine=new SingleBookSpine(this.cover);this.bottomSpine=new SingleBookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},resizeCover:function(b,c,d){this.thicknessWidthArray=d;this.width=b+(d[0]+d[1])+this.borderWidth;this.height=c+2*this.borderWidth;this.cover.css({width:this.width+
"px",height:this.height+"px",left:(bookConfig.RightToLeft?-(this.borderWidth+d[0]):0)+"px",top:-this.borderWidth+"px"})}}).extend(HardCover),SingleBookSpine=Class({onResize:function(b){this.width=b[0]+b[1];this.bookSpine.css({width:this.width});bookConfig.RightToLeft?this.bookSpine.css({left:"auto",right:"0"}):this.bookSpine.css({right:"auto",left:"0"})}}).extend(BookSpine),SingleHardCalendarCover=Class({initPage:function(){var b=BookInfo.getHardCoverPages(!1);bookConfig.RightToLeft&&(this.leftPage=
new HardSide(b[0],"coverPage",BookType.single_book));bookConfig.RightToLeft||(this.rightPage=new HardSide(b[0],"coverPage",BookType.single_book));this.leftPage&&this.cover.append(this.leftPage.getSide());this.rightPage&&this.cover.append(this.rightPage.getSide());this.leftPage&&this.leftPage.addAttachment();this.rightPage&&this.rightPage.addAttachment();this.leftPage&&this.leftPage.setUpOrDown(!0);this.rightPage&&this.rightPage.setUpOrDown(!1);this.leftPage&&this.leftPage.setCSSByStyle({top:"0",left:"0",
"margin-top":0,"margin-left":0});this.rightPage&&this.rightPage.setCSSByStyle({bottom:"0",left:"0","margin-bottom":0,"margin-left":0})},getSensitiveIndex:function(){return BookInfo.getSensitiveIndex(!1)},initBookSpine:function(){this.topSpine=new SingleBookSpine(this.cover);this.bottomSpine=new SingleBookSpine(this.cover);this.topSpine.setCSSByName("top_spine");this.bottomSpine.setCSSByName("botoom_spine")},resizeCover:function(b,c,d){this.thicknessWidthArray=d;this.width=b+2*this.borderWidth;this.height=
c+(d[0]+d[1])+this.borderWidth;this.cover.css({width:this.width+"px",height:this.height+"px",top:(bookConfig.RightToLeft?-(this.borderWidth+d[0]):0)+"px",left:-this.borderWidth+"px"})}}).extend(HardCover),SingleBookSpine=Class({onResize:function(b){this.width=b[0]+b[1];this.bookSpine.css({width:this.width});bookConfig.RightToLeft?this.bookSpine.css({left:"auto",right:"0"}):this.bookSpine.css({right:"auto",left:"0"})}}).extend(BookSpine),SingleHardBook=Class({bookType:BookType.single_book,create:function(b){this._super(b)},
crossFlipMode:function(b){var c=this.currentPageIndex;return 1==c&&2!=b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return 2==b||1==b?!1:!0},toHardPage:function(b){return!1},toCoverPage:function(b){return 1!=b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){return!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},
newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),b.setLeftOrRight(bookConfig.RightToLeft)):b=new NormalPage(b,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this));return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"pageBack",BookType.single_book),b.setLeftOrRight(bookConfig.RightToLeft)):b=new NormalPage(b,"pageBack",!0,BookType.single_book);return b},followToPoint:function(b,
c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!0),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),
this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!1),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,
this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),
this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),SingleHardCalendar=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 1==c&&2!=
b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return 2==b||1==b?!1:!0},toHardPage:function(b){return!1},toCoverPage:function(b){return 1!=b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){return!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCalendarCover(this.flipBook)},newPage:function(b){1==b||b==bookConfig.totalPageCount?
(b=new HardSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),b.setUpOrDown(bookConfig.RightToLeft)):b=new NormalPage(b,"page",!0,BookType.single_book,this.onBookPageLoaded.bind(this));return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"pageBack",BookType.single_book),b.setUpOrDown(bookConfig.RightToLeft)):b=new NormalPage(b,"pageBack",!0,BookType.single_book);return b},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth())},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!0),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-up-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-down-side")):
(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!1),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-down-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-up-side"));return[this.pageArray[d],this.pageBackArray[d]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&
this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(b,c){this._super(b,c)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),
this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleCalendar),AlbumSide=Class({isHardPage:!0,create:function(b,c,d,f){this._super(b,c,d,f);this.isHard=!0},renderPage:function(){},addFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new HardPageFlipShadow(this.side))},onResize:function(b,c){this._super(b,c);bookConfig.FlipDirection?this.side&&this.side.css({left:"50%","margin-left":-b/2+"px"}):
this.side&&this.side.css({top:"50%","margin-top":-c/2+"px"})}}).extend(BookPage),AlbumBook=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(b,
c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));
return[this.pageArray[b],this.pageArray[c]]}}).extend(NormalBook),AlbumHardBook=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?
!1:!0},toSoftPage:function(b){return!1},toHardPage:function(b){var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||
0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount?gotoPageFun(totalPageCount-1):1==b&&gotoPageFun(2)},
initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&
this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));
return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},
onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalBook),
OpenAlbumHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toHardPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&
totalPageCount!=b?!1:!0},isHardPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(b,"page",BookType.normal_book,
this.onBookPageLoaded.bind(this))}}).extend(AlbumHardBook),SingleAlbumBook=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(b,
c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!0),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!1),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!1),this.pageArray[d]&&
this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]}}).extend(SingleBook),SingleAlbumHardBook=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 1==c&&2!=b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return!1},toHardPage:function(b){return 2==b||1==b?!1:!0},toCoverPage:function(b){return 1!=
b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!1:!0},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCover(this.flipBook)},newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),
b.setLeftOrRight(bookConfig.RightToLeft)):b=new AlbumSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this));return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"pageBack",BookType.single_book),b.setLeftOrRight(bookConfig.RightToLeft)):b=new AlbumSide(b,"pageBack",BookType.single_book);return b},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c){var d=
b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!0),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setLeftOrRight(!1),this.pageBackArray[d]&&this.pageBackArray[d].setLeftOrRight(!1),this.pageArray[d]&&
this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);
this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());
this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleBook),AlbumCanlendar=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},isCoverPage:function(){return!1},
gotoNearPage:function(b){},newPage:function(b){return new AlbumSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&
this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]}}).extend(NormalCalendar),AlbumHardCalendar=Class({bookType:BookType.normal_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,totalPageCount].indexOf(c)&&0<=[1,totalPageCount].indexOf(b)||0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){return!1},toHardPage:function(b){var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&
[1,totalPageCount].indexOf(b);return!0},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-
1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount?gotoPageFun(totalPageCount-1):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCalendarCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))},
followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!0),this.pageArray[c]&&this.pageArray[c].setUpOrDown(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-up-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-down-side")):(this.pageArray[b]&&this.pageArray[b].setUpOrDown(!1),this.pageArray[c]&&
this.pageArray[c].setUpOrDown(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-down-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-up-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},
setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(NormalCalendar),OpenAlbumHardCalendar=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toHardPage:function(b){return 0<=[totalPageCount-1,totalPageCount-
2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isHardPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount&&gotoPageFun(totalPageCount-
1)},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):new AlbumSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this))}}).extend(AlbumHardCalendar),SingleAlbumCalendar=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){return!1},toSoftPage:function(b){return!1},toHardPage:function(b){return!0},isHardPage:function(b,c){return!0},toCoverPage:function(){return!1},
isCoverPage:function(){return!1},gotoNearPage:function(b){},newPage:function(b){return new AlbumSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this))},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!0),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-up-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-down-side")):
(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!1),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-down-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-up-side"));return[this.pageArray[d],this.pageBackArray[d]]}}).extend(SingleCalendar),SingleAlbumHardCalendar=Class({bookType:BookType.single_book,create:function(b){this._super(b)},crossFlipMode:function(b){var c=this.currentPageIndex;return 1==
c&&2!=b||2!=c&&1==b?!0:!1},toSoftPage:function(b){return!1},toHardPage:function(b){return 2==b||1==b?!1:!0},toCoverPage:function(b){return 1!=b?!1:!0},isCoverPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!0:!1},isHardPage:function(b,c){var d=b;b>c&&(d=c);return 1==d||d==bookConfig.totalPageCount?!1:!0},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new SingleHardCalendarCover(this.flipBook)},
newPage:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this)),b.setUpOrDown(bookConfig.RightToLeft)):b=new AlbumSide(b,"page",BookType.single_book,this.onBookPageLoaded.bind(this));return b},newPageBack:function(b){1==b||b==bookConfig.totalPageCount?(b=new HardSide(b,"pageBack",BookType.single_book),b.setUpOrDown(bookConfig.RightToLeft)):b=new AlbumSide(b,"pageBack",BookType.single_book);return b},followToPoint:function(b,c,
d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);bookConfig.RightToLeft?(this.pageArray[d]&&this.pageArray[d].setUpOrDown(!0),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!0),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-up-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-down-side")):(this.pageArray[d]&&
this.pageArray[d].setUpOrDown(!1),this.pageBackArray[d]&&this.pageBackArray[d].setUpOrDown(!1),this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-down-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-up-side"));return[this.pageArray[d],this.pageBackArray[d]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager?this.thicknessManager.getThicknessWidth():[0,0]},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},
resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(SingleCalendar),zoom_icons={moveByPos:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABoSURBVHjarJRRDsAgCEML8f5Xfvsezqmk/EjANC1FA5AjUqZISTgZ4ZSGc0Y4h43TNZz2c9Pb7RE/NW4XsoJFOSVJY3FpBRir+rgAqexeeR6AVDmfeR6A7BhH9/W3XdOJa93/aJL5DADgpBckJE4YCgAAAABJRU5ErkJggg==",
moveByDrag:"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",
ZU:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAL0lEQVR42mL8z0AYMDEMDUX/Gf7TyjrG/6gWocmSbRLCPEZ6OHwIRTAAAAD//wMAHjoIG4Kx7iYAAAAASUVORK5CYII=",
PB:"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",
ZD:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAJklEQVR42mL8z0AYMDGMeEUsKDz0QGMkwSTG0RAnShEAAAD//wMAU6UDIxn1UhsAAAAASUVORK5CYII=",
ZO:"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",
PR:"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",
NE:"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"};
bdor[500]=global.bdor[404];bdor[13]="p";
var ZoomControlBar=Class({create:function(b){this.moveByMousePosition=!1;this.moveByPositionUrl=this.getImageUrl("moveByPos");this.moveByDragUrl=this.getImageUrl("moveByDrag");this.initButtons();this.initBar(b);this.initEvent()},initButtons:function(){this.btnZoomUp=$("<div class='button' title='"+getLanguage("btnZoomIn","zoom in")+"'><img src='"+this.getImageUrl("ZU")+"'/></div>");this.btnZoomDown=$("<div class='button' title='"+getLanguage("btnZoomOut","zoom out")+"'><img src='"+this.getImageUrl("ZD")+
"'/></div>");this.btnZoomOut=$("<div class='button' title='"+getLanguage("btnZoomOut","zoom out")+"'><img src='"+this.getImageUrl("ZO")+"'/></div>");this.btnPre=$("<div class='button' title='"+getLanguage("btnPrePage","pre")+"'><img src='"+this.getImageUrl("PR")+"'/></div>");this.btnNext=$("<div class='button' title='"+getLanguage("btnNextPage","next")+"'><img src='"+this.getImageUrl("NE")+"'/></div>");this.btnMoveMode=$("<div class='button' title='"+getLanguage("btnPositionToMove","Move by mouse position")+
"'><img src='"+this.moveByPositionUrl+"'/></div>")},initBar:function(b){this.width=260;this.height=40;this.bar=$("<div class='zoomControlBar'></div>");this.bar.append(this.btnZoomUp);this.bar.append(this.btnZoomDown);this.bar.append(this.btnZoomOut);this.bar.append(this.btnPre);this.bar.append(this.btnNext);this.bar.append(this.btnMoveMode);this.bar.css({"background-color":bookConfig.toolbarColor});b.append(this.bar)},getImageUrl:function(b){return window.zoom_icons&&zoom_icons[b]?"data:image/png;base64,"+
zoom_icons[b]:uiBaseURL+b+".png"},setVisible:function(b){b&&this.buttonChangeColor();this.bar.css({display:b?"block":"none"})},buttonChangeColor:function(){this.hasChanged||(this.btnZoomUp.changeButtonColor(bookConfig.iconColor),this.btnZoomDown.changeButtonColor(bookConfig.iconColor),this.btnZoomOut.changeButtonColor(bookConfig.iconColor),this.btnPre.changeButtonColor(bookConfig.iconColor),this.btnNext.changeButtonColor(bookConfig.iconColor),this.btnMoveMode.changeButtonColor(bookConfig.iconColor),
this.hasChanged=!0)},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);this.bar.css(d[0],b+"px");this.bar.css(d[1],c+"px")},initEvent:function(){this.btnZoomUp.bind(_event._end,function(){this.zoomUp()}.bind(this));this.btnZoomDown.bind(_event._end,function(){this.zoomDown()}.bind(this));this.btnZoomOut.bind(_event._end,function(){this.zoomOut()}.bind(this));this.btnPre.bind(_event._end,function(){rightToLeft?nextPageFun():previousPageFun()});this.btnNext.bind(_event._end,function(){rightToLeft?
previousPageFun():nextPageFun()});this.btnMoveMode.bind(_event._end,function(){this.changeMoveMode()}.bind(this))},changeMoveMode:function(){!0==this.moveByMousePosition?(this.moveByMousePosition=!1,this.btnMoveMode.empty().append(getImage(this.moveByPositionUrl)).attr("title",getLanguage("btnPositionToMove","Move by mouse position"))):(this.moveByMousePosition=!0,this.btnMoveMode.empty().append(getImage(this.moveByDragUrl)).attr("title",getLanguage("btnDragToMove","Move by mouse drag")));this.btnMoveMode.changeButtonColor(bookConfig.iconColor)},
zoomUp:function(b){var c=BookInfo.getBook().showPage;c.scale=c.parameters.toScale;var d=Math.min(c.parameters.naturalWidth*c.maxScale/c.parameters.width,1.1*parseFloat(c.scale));d!=c.scale&&(b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]}),c.parameters.origin=c.mathOrigin(c,b),c.originObj(c,c.parameters.origin),c.animateToScale(c,d,b))},zoomDown:function(b){var c=BookInfo.getBook().showPage;b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/
2},{pageX:windowWidth/2,pageY:windowHeight/2}]});c.scale=c.parameters.toScale;c.parameters.origin=c.mathOrigin(c,b);c.originObj(c,c.parameters.origin);var d=c.parameters.naturalWidth/c.parameters.width,f=0.9*parseFloat(c.scale);f<=d&&(c.parameters.zoomOut=!0);c.animateToScale(c,Math.max(d,f),b)},zoomOut:function(){var b=BookInfo.getBook().showPage;b.onDoubleTap.bind(b)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();
b.executeCallback()})}}),CatalogZoomControlBar=Class({}).extend(ZoomControlBar),ZoomMap=Class({create:function(b){this.book=b;this.maxWidth=80;this.maxHeight=100;this.pageHeight=this.pageWidth=this.height=this.width=0;this.doublePage=!1;this.init();this.initEvent()},init:function(){this.map=$("<div class='thumbnail_map'></div>");bookConfig.FlipDirection?(this.imageLeft=$("<img class='map_img map_img_up'></img>"),this.imageRight=$("<img class='map_img map_img_down'></img>")):(this.imageLeft=$("<img class='map_img map_img_left'></img>"),
this.imageRight=$("<img class='map_img map_img_right'></img>"));this.mapCursor=$("<div class='map_cursor'></div>");this.map.append(this.imageLeft);this.map.append(this.imageRight);this.map.append(this.mapCursor);bookContainer.append(this.map)},show:function(){this.visible=!0;this.refreshArea();this.map.show()},hide:function(){this.visible=!1;this.map.hide()},onResize:function(){bookConfig.largePageWidth/bookConfig.largePageHeight<this.maxWidth/this.maxHeight?(this.pageWidth=this.maxWidth,this.pageHeight=
bookConfig.largePageHeight*this.maxWidth/bookConfig.largePageWidth):(this.pageHeight=this.maxHeight,this.pageWidth=bookConfig.largePageWidth*this.maxHeight/bookConfig.largePageHeight);bookConfig.FlipDirection?(this.height=this.book.doublePage?2*(this.pageHeight+1):this.pageHeight,this.width=this.pageWidth+2):(this.height=this.pageHeight+2,this.width=this.book.doublePage?2*(this.pageWidth+1):this.pageWidth);var b=20+bookConfig.rightMargin,c=toolBar.getTopHeight()+10+bookConfig.topMargin;this.map.css({left:"auto",
right:b+"px",top:c,width:this.width+"px",height:this.height+"px"});$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"});this.doublePage=this.book.doublePage},fillContent:function(b){this.visible&&(b=BookInfo.getCurrentPages(),this.doublePage=1<b.length,bookConfig.FlipDirection?(this.doublePage?(this.fillImage(this.imageLeft,b[0]),this.fillImage(this.imageRight,b[1]),this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-bottom":"none"})):(this.fillImage(this.imageLeft,
b[0]),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-bottom":"1px solid gray"})),this.height=this.pageHeight,this.doublePage&&(this.height=2*(this.pageHeight+1)),this.map.css({height:this.height+"px"})):(this.doublePage?(this.fillImage(this.imageLeft,b[0]),this.fillImage(this.imageRight,b[1]),this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-right":"none"})):(this.fillImage(this.imageLeft,b[0]),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-right":"1px solid gray"})),
this.width=this.pageWidth,this.doublePage&&(this.width=2*(this.pageWidth+1)),this.map.css({width:this.width+"px"})),$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"}))},fillImage:function(b,c){b&&fillImageAfterLoaded(c,"thumb",function(c){b.attr("src",c)})},refreshArea:function(){if(this.book.showPage){var b=this.book.showPage,c=b.width(),d=b.height(),f=getTransform(b[0]),g=this.getBookPosition();!0==this.book.doublePage&&!1==this.doublePage&&(bookConfig.FlipDirection?(d/=
2,b=BookInfo.getBook().getCurrentPageIndex(),BookInfo.isLeftPage(b,!0)||(g.top+=d)):(c/=2,b=BookInfo.getBook().getCurrentPageIndex(),BookInfo.isLeftPage(b,!0)||(g.left+=c)));var b=-(g.left+f.x),h=-(g.top+f.y),f=h/d,g=(b+windowWidth)/c,d=(h+windowHeight)/d,c=Math.max(0,b/c),f=Math.max(0,f),g=Math.min(1,g),d=Math.min(1,d),b=this.width;this.mapCursor.css({left:c*b,top:f*this.height,width:(g-c)*b,height:(d-f)*this.height})}},getBookPosition:function(){var b=this.book.showPage.css("left"),b=parseInt(b.replace("px",
"")),c=this.book.showPage.css("top"),c=parseInt(c.replace("px",""));return{left:b,top:c}},initEvent:function(){var b=new Hammer.Manager(this.mapCursor[0]);b.add(new Hammer.Pan);b.on("panstart panmove panend pancancel",this.onPan.bind(this));$(this.book.showPage).bind(_event._move,function(b){var d=BookInfo.getBook();if(d.status_zoom&&!this.book.showPage.parameters.zoomming&&d.controlBar&&d.controlBar.moveByMousePosition){var d=this.book.showPage,f=d.width(),g=d.height(),h=b.pageX;b=b.pageY;f=h-h*
f/windowWidth;g=b-b*g/windowHeight;b={};b.origin=d.parameters.origin;b.scale=d.parameters.scale;f-=d.parameters.left;g-=d.parameters.top;b.tran={x:f,y:g};g=transformCSS(b);d.css(g);this.refreshArea()}}.bind(this))},onPan:function(b){if(b&&b.pointers&&1==b.pointers.length){var c=this.book.showPage.width()/this.width,d=this.book.showPage.height()/this.height,c=this.book.showPage.panForMove(this.book.showPage,-b.deltaX*c,-b.deltaY*d,!1);this.refreshArea();this.mapCursor.css({"background-color":"RGBA(245,225,135,0.8)",
cursor:"move"});if("panend"==b.type||"pancancel"==b.type)this.mapCursor.css({"background-color":"RGBA(250,240,185,0.5)",cursor:"default"}),this.book.showPage.setZoomParameters(this.book.showPage,c),this.book.showPage.restrictInBoundary(this.book.showPage,this.refreshArea.bind(this))}}}),SlideBookPage=Class({onPageLoaded:null,create:function(b,c,d,f){this.pageHeight=this.pageWidth=this.height=this.width=this.zIndex=0;this.pageIndex=b;this.pageArray=[];this.bookType=d;this.onPageLoaded=f;this.side=
$("<div class='slide_side'></div>");this.side.attr("id",c+b);this.init(b)},init:function(b){isNaN(b)||(this.pages=$("<div class='slide_pages'></div>"),this.initPages(b),this.setPageCss(),this.side.append(this.pages),this.initEvent())},initEvent:function(){this.adContainer&&this.adContainer.css({"z-index":1});isBelowIE9()?this.pages.IEZoom({side:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)}):this.pages.zoom({side:this,zoomIn:this.zoomIn.bind(this),
zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)})},zoomIn:function(){var b=BookInfo.getBook();b.status_zoom=!0;b.adContainer&&b.adContainer.css({"z-index":1});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomout();b.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);if(isPhone()||isPad()){if(bookConfig.highDefinitionConversion){var c=BookInfo.getCurrentPages();if(void 0!=c&&null!=c)for(var d=0;d<c.length;d++){var f=
c[d];b.pageArray[f]&&b.pageArray[f].zoomInSideImage()}}}else this.switchLargeImage()},zoomOut:function(){var b=BookInfo.getBook();b.status_zoom=!1;b.flipping||!b.adContainer||1!=b.currentPageIndex||bookConfig.isTheBookOpen||b.adContainer.css({"z-index":3});gotoPageFun(b.toPageIndex);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();b.executeCallback()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);this.switchNormalImage()},onZoomed:function(b){if(!isPhone()&&
!isPad()&&b&&!this.pages.parameters.resize){this.pages.parameters.resize=!0;b=this.pages.offset().left;var c=this.pages.offset().top;b-=this.pages.parameters.left;var c=c-this.pages.parameters.top,d=this.pages.parameters.scale;1!=d&&(this.resizePages(parseInt(this.pageWidth*d),parseInt(this.pageHeight*d)),d=1);d=transformCSS({tran:{x:b,y:c},scale:d,origin:{x:0,y:0}});this.pages.css(d);this.pages.parameters&&(this.pages.parameters.tran={x:b,y:c},this.pages.parameters.scale=1,this.pages.parameters.toScale=
1,this.pages.parameters.width=$(this.pages).width(),this.pages.parameters.height=$(this.pages).height(),this.pages.parameters.origin={x:0,y:0},this.pages.parameters.resize=!1)}},initPages:function(b){b=bookConfig.isTheBookOpen?2*b:2*b-1;index2=b-1;var c=rightToLeft?b:index2;b=rightToLeft?index2:b;this.addPageArray([c,b]);this.leftPage=this.pageArray[c];this.rightPage=this.pageArray[b]},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});!this.rightPage&&this.leftPage&&bookConfig.retainBookCenter&&
bookConfig.showDoublePage?(this.leftPage.centerPage(),this.leftPage.setCSSByStyle(b)):!this.leftPage&&this.rightPage&&bookConfig.retainBookCenter?(this.rightPage.centerPage(),this.rightPage.setCSSByStyle(b)):(this.leftPage&&(this.leftPage.setLeftOrRight(!0),this.leftPage.setCSSByStyle(b)),this.rightPage&&(this.rightPage.setLeftOrRight(!1),this.rightPage.setCSSByStyle(b)))},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(this.pageArray[b[c]]&&
this.fillContent(b[c]),this.pageArray[b[c]]))){var d=new BookPage(b[c],"page",this.bookType,this.onPageLoaded);d.addAttachment();d.hideMiddleShadow();d.onResize(this.pageWidth,this.pageHeight);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.pages.append(d.getSide())}},fillContent:function(b){this.pageArray[b]&&this.pageArray[b].fillContent()},fillImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].fillContent()},remove:function(){this.side.remove();this.side=
void 0},setCSSByStyle:function(b){this.side.css(b)},setCSSByName:function(b){this.side.addClass(b)},onResize:function(b,c){this.width=b;this.height=c;this.resetPages()},resetPages:function(){if(this.pages){var b=fitPageWidthHeight(this.width,this.height,2*bookConfig.largePageWidth,bookConfig.largePageHeight),c=2*parseInt(b.x/2),b=parseInt(b.y);this.resizePages(c,b);this.pages.css({left:(this.width-c)/2+"px",top:(this.height-b)/2+"px"});c=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(c)}},
resizePages:function(b,c){if(this.pages){this.pageWidth=b;this.pageHeight=c;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});for(var d=this.pageWidth/2,f=this.pageHeight,g=0;g<this.pageArray.length;g++)if(this.pageArray[g])this.pageArray[g].onResize(d,f)}},loading:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].loading()},setLeftOrRight:function(b){this.isLeft=b},reset:function(){},getSide:function(){return this.side},setZIndex:function(b){this.zIndex=
b;this.side.css({"z-index":b})},getZIndex:function(){return this.zIndex},enterSide:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].enterSide()},leaveSide:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].leaveSide()},initSelectTextEvent:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initSelectTextEvent()},destroySelect:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&
this.pageArray[b].destroySelect()},pauseAnimation:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].pauseAnimation()},startAnimation:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].startAnimation()},addHistoryTexts:function(b){for(var c=0;c<this.pageArray.length;c++)this.pageArray[c]&&this.pageArray[c].addHistoryTexts(b)},highlightSearch:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].highlightSearch()},
clearHighlight:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].clearHighlight()},resetSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].resetSlider()},fillPage:function(b,c){for(var d=0;d<this.pageArray.length;d++)this.pageArray[d]&&this.pageArray[d].fillPage(b,c)},zoomInSideImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].zoomInSideImage()},zoomOutSideImage:function(){for(var b=
0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].zoomOutSideImage()},switchLargeImage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].switchLargeImage()},switchNormalImage:function(b){for(var c=0;c<this.pageArray.length;c++)this.pageArray[c]&&this.pageArray[c].switchNormalImage(b)}}),SingleSlideBookPage=Class({initPages:function(b){this.addPageArray([b]);this.page=this.pageArray[b]},resetPages:function(){if(this.pages){if(bookConfig.isSingleBookFullWindowOnMobile&&
(isPhone()||isPad()))var b=this.width,c=this.height;else c=fitPageWidthHeight(this.width,this.height,bookConfig.largePageWidth,bookConfig.largePageHeight),b=parseInt(c.x),c=parseInt(c.y);this.resizePages(b,c);this.pages.css({left:(this.width-b)/2+"px",top:(this.height-c)/2+"px"});b=transformCSS({rotate:0,tran:{x:0,y:0}});this.pages.css(b)}},resizePages:function(b,c){if(this.pages){this.pageWidth=b;this.pageHeight=c;this.pages.css({width:this.pageWidth+"px",height:this.pageHeight+"px"});for(var d=
this.pageWidth,f=this.pageHeight,g=0;g<this.pageArray.length;g++)if(this.pageArray[g])this.pageArray[g].onResize(d,f)}},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.page&&(this.page.centerPage(),this.page.setCSSByStyle(b))},fillPage:function(b,c){this.page&&this.page.fillPage(b,c)}}).extend(SlideBookPage),SlideBook=Class({currentTran:0,create:function(b){this._super(b);this.currentPageIndex=this.getRealBookIndex(b.currentPageIndex);this.mainPageIndex=this.getRealBookIndex(b.currentPageIndex);
this.initBook();this.initEvent()},initBook:function(){this.flipBook=$("<div class='SlideBook' id='SlideBook' ></div>");this.parent.append(this.flipBook);this.setCurrentIndexTextField()},getBook:function(){return this.flipBook},fillPage:function(b,c){if(b)for(var d=this.pageArray.length,f=0;f<d;f++)this.pageArray[f]&&this.pageArray[f].fillPage(b,c),this.pageBackArray&&this.pageBackArray[f]&&this.pageBackArray[f].fillPage(b,c)},resetPages:function(b){isNaN(b)||0>=b||(this.unWrapPageExcludeArray([b,
b+1,b-1]),this.addPageArray([b,b+1,b-1]),this.loading(),this.currentPage=this.pageArray[b],this.nextPage=this.pageArray[b+1],this.previousPage=this.pageArray[b-1],this.setPageCss())},addPageArray:function(b){if(b&&this.pageArray){for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>this.pageLength()||(this.pageArray[b[c]]&&this.fillContent(b[c]),this.pageArray[b[c]]))){var d=this.newPage(b[c]);d.onResize(this.width,this.height);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.flipBook.append(d.getSide())}this.orderPages()}},
setPagePosition:function(b,c){if(bookConfig.FlipDirection)var d=c*windowHeight,d={top:d+"px"};else d=c*windowWidth,d={left:d+"px"};this.pageArray[b]&&this.pageArray[b].setCSSByStyle(d)},orderPages:function(){this.sequenceList={};for(var b=this.pageArray.length,c=0,d=this.mainPageIndex+1;d<b;d++)this.pageArray[d]&&(rightToLeft?c--:c++,this.pageArray[d].sequence=c,this.sequenceList[c]=d,this.setPagePosition(d,c));c=0;for(b=this.mainPageIndex;0<b;b--)this.pageArray[b]&&(this.pageArray[b].sequence=c,
this.sequenceList[c]=b,this.setPagePosition(b,c),rightToLeft?c++:c--)},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&this.currentPage.setCSSByStyle(b);this.previousPage&&this.previousPage.setCSSByStyle(b);this.nextPage&&this.nextPage.setCSSByStyle(b)},fillContent:function(b){(!this.flipping||imageLoaded[b])&&this.pageArray[b]&&this.pageArray[b].fillImage()},newPage:function(b){return new SlideBookPage(b,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))},
pageLength:function(){return bookConfig.totalPageCount},unWrapPageExcludeArray:function(b){if(b&&this.pageArray){for(var c=this.pageArray.length,d=0;d<c;d++)!this.pageArray[d]||0<=b.indexOf(d)||(this.pageArray[d].remove(),this.pageArray[d]=void 0);this.orderPages()}},mouseWheelFlip:function(){if(bookConfig.mouseWheelFlip){var b;this.flipBook.bind(_event._mousewheel,function(c){var d;void 0!=b&&150>new Date-b?d=!1:(b=new Date,d=!0);if(!d)return!1;d=c.originalEvent;0>Math.max(-1,Math.min(1,d.wheelDelta||
-d.detail))?nextPageFun():previousPageFun();stopEvent(c);return!1}.bind(this))}},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.setCurrentIndexTextField();setLocationHash(this.getRealPageIndex())},getRealPageIndex:function(){return this.currentPageIndex},getRealBookIndex:function(b){return b},gotoPage:function(b,c){if(!isNaN(b)){this.toPageIndex=b;if(this.status_zoom){var d=
{pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]},f=this.pageArray[this.currentPageIndex].pages;f.onDoubleTap.bind(f)(d);return!0}b=this.getRealBookIndex(b);0>=b||b>this.pageLength()||!this.flipEffect(b)||(!c&&flipHistory&&flipHistory.addFromCurrentIndex(b),this.flippingTo(b),this.flipInterval&&this.flipInterval.stop(),this.refreshPages(b),this.flipIntervalTmp(b))}},flipEffect:function(b){return this.status_zoom||b==this.currentPageIndex||this.flipping?!1:!0},flipIntervalTmp:function(b){var c=
this.currentTran,d=this.getFlipTo(b);this.flipping=!0;var f=function(b,f,k){b<f?(b=(0,$.easing["easeInOut"+k])(null,b,c,d-c,f),this.setBookTran(b)):(this.afterFlipTo(),this.flipInterval.stop())}.bind(this);this.flipInterval=function(b,c){f(b,c,"Sine")}.animation(this,this.flippingTime)},refreshPages:function(b){this.setAttachmentBeforeFlipTo(b);if(!this.pageArray[b]){var c=this.getCurrentViewPageIndex(),d=bookConfig.FlipDirection?this.currentTran-this.height:this.currentTran-this.width;(b>c||b<this.mainPageIndex)&&
!rightToLeft&&(d=this.currentTran);(b<c||b>this.mainPageIndex)&&rightToLeft&&(d=this.currentTran);this.addPageArray([b]);this.setBookTran(d)}this.showPage=this.pageArray[b].pages},getCurrentViewPageIndex:function(){var b=Math.abs(this.currentTran),b=bookConfig.FlipDirection?Math.floor(b/this.height)+1+(b%this.height>this.height/2)?0:1:Math.floor(b/this.width)+1+(b%this.width>this.width/2)?0:1,b=(0>=this.currentTran?1:-1)*b;return this.sequenceList[b]},getFlipTo:function(b){return this.pageArray[b]&&
this.pageArray[b].sequence?-this.pageArray[b].sequence*(bookConfig.FlipDirection?windowHeight:windowWidth):0},getCurrentTran:function(){return this.currentTran},setBookTran:function(b){if(bookConfig.FlipDirection){var c=transformCSS({rotate:0,tran:{x:0,y:b}});isBelowIE9()&&(c={top:b+"px"})}else c=transformCSS({rotate:0,tran:{x:b,y:0}}),isBelowIE9()&&(c={left:b+"px"});this.setCSSByStyle(c);this.currentTran=b},onResize:function(){this.resize();this.status_zoom=!1;this.showPage=this.pageArray[this.currentPageIndex].pages},
resize:function(){this.endFlip();this.resizeBook();this.resizePage(this.width,this.height);this.resetPages(this.currentPageIndex);this.resizeAdvertisement()},getTop:function(){return this.bookTop},resizeBook:function(){var b=global.toolBar&&global.toolBar.getHeight?global.toolBar.getHeight():0,c=global.toolBar&&global.toolBar.getTopHeight?global.toolBar.getTopHeight():0;this.width=windowWidth-bookConfig.leftMargin-bookConfig.leftMargin;this.height=windowHeight-bookConfig.topMargin-bookConfig.bottomMargin-
b;this.bookTop=bookConfig.topMargin+c;this.flipBook.css({width:this.width+"px",height:this.height+"px",left:bookConfig.leftMargin+"px",top:bookConfig.topMargin+c+"px"})},resizeAdvertisement:function(){var b=fitPageWidthHeight(this.width,this.height,2*bookConfig.largePageWidth,bookConfig.largePageHeight);this.pageWidth=2*parseInt(b.x/2);this.pageHeight=parseInt(b.y);this.adContainer&&(b=(this.width-this.pageWidth)/2,rightToLeft&&(b+=this.pageWidth/2),this.adContainer.css({left:b+"px",top:(this.height-
this.pageHeight)/2+this.getTop()+"px",width:this.pageWidth/2+"px",height:this.pageHeight+"px"}));this.adInstance&&this.adInstance.resize()},resizePage:function(b,c){for(var d=this.pageArray.length,f=0;f<d;f++)if(this.pageArray[f])this.pageArray[f].onResize(b,c)},getPageWidth:function(b){if(void 0==b)return this.pageWidth/2;this.pageWidth=b},getPageHeight:function(b){if(void 0==b)return this.pageHeight;this.pageHeight=b},getHeight:function(){return this.height},getWidth:function(){return this.width},
getScale:function(){return this.currentPage.pages.parameters.toScale},insertStaticAd:function(){var b=this.flipBook.css("left"),b=parseInt(b.replace("px","")),c=this.flipBook.css("top"),d=this.flipBook.css("width"),d=parseInt(d.replace("px",""));rightToLeft&&(b+=d/2);this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute","z-index":-1});this.adContainer.css({left:b+"px",top:c});this.adInstance=new HTML5AdSlider(this.adContainer,{paddingLeft:30,paddingTop:30,paddingRight:30,
paddingBottom:30,loop:!1,timeout:2E3,effectDuration:1E3,data:staticAd.data});bookContainer.append(this.adContainer);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.css({"z-index":3})},checkFlipping:function(){this.flipping=!1;this.loading();this.fillContent(this.currentPageIndex)},afterFlipTo:function(){this.mainPageIndex=this.currentPageIndex;this.resetPages(this.currentPageIndex);this.setBookTran(0);this.startTran=this.currentTran;this.checkFlipping();
this.setAttachmentAfterFlipTo()},setAttachmentBeforeFlipTo:function(){this.adContainer&&this.adContainer.css({"z-index":1})},setAttachmentAfterFlipTo:function(){this.stopMedia();this.resetSlider();this.flipping||(this.openShownMedia(),this.addHistoryTexts(),this.addSearchHighlight());bookConfig.ThumbnailsButtonVisible&&thumbnail.clearHighLight();bookConfig.ThumbnailsButtonVisible&&thumbnail.setHighLight(this.getRealPageIndex());resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},
30);this.flipping||!this.adContainer||1!=this.currentPageIndex||bookConfig.isTheBookOpen||this.adContainer.css({"z-index":3})},endFlip:function(){this.flipping=!1},loading:function(){this.flipping||this.pageArray[this.currentPageIndex]&&this.pageArray[this.currentPageIndex].loading()},getCurrentPageIndex:function(){return this.getRealPageIndex()},getCurrentPages:function(){return[this.currentPageIndex]},setCSSByStyle:function(b){this.flipBook.css(b)},setShow:function(b){},hide:function(){Log.debug("slide book hide.");
this.visible=!1;this.setCSSByStyle({display:"none"});this.stopMedia();this.resetSlider()},show:function(){Log.debug("slide book show.");this.visible=!0;this.setCSSByStyle({display:"block"});this.openShownMedia();this.addHistoryTexts();this.addSearchHighlight()},addHistoryTexts:function(){var b=this.currentPageIndex;this.pageArray[b]&&this.pageArray[b].addHistoryTexts()},addSearchHighlight:function(){var b=this.currentPageIndex;this.pageArray[b]&&this.pageArray[b].highlightSearch()},clearSearchHighlight:function(){for(var b=
this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].clearHighlight()},openShownMedia:function(){var b=this.currentPageIndex;this.pageArray[b]&&this.pageArray[b].enterSide()},stopMedia:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].leaveSide()},resetSlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].resetSlider()},select:function(){this.selected=!0;var b=this.currentPageIndex;this.pageArray[b]&&
(this.pageArray[b]&&this.pageArray[b].initSelectTextEvent(),this.pageArray[b].pages.parameters&&(this.pageArray[b].pages.parameters.eventCancel=!0))},unSelect:function(){this.selected=!1;var b=this.getCurrentPages();if(void 0!=b&&null!=b){for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&(this.pageArray[d]&&this.pageArray[d].destroySelect(),this.pageArray[d].pages.parameters&&(this.pageArray[d].pages.parameters.eventCancel=!1))}StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(b){b.setAsUnSelect();
b.executeCallback()})}},switchLargeImage:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].switchLargeImage()},switchNormalImage:function(b){for(var c=this.pageArray.length,d=0;d<c;d++)this.pageArray[d]&&this.pageArray[d].switchNormalImage(b)},destroy:function(){}}).extend(Book);
SlideBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip()},hammerEventModular:function(){var b=new Hammer.Manager(this.flipBook[0]);b.add(new Hammer.Pan);b.add((new Hammer.Swipe).recognizeWith(b.get("pan")));b.add(new Hammer.Press({time:"1000"}));b.add(new Hammer.Pinch);b.add(new Hammer.Tap({event:"doubletap",taps:2}));b.add(new Hammer.Tap);b.on("panstart panmove",
this.onPan.bind(this));b.on("press",this.onPress.bind(this));b.on("tap",this.onTap.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind(_event._down,this.onDown.bind(this));$("body").bind(_event._end+" "+_event._leave,this.onUp.bind(this));this.flipBook.speed(this.onSwipe.bind(this))},onPan:function(b){this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||("panstart"==b.type&&(this.startTran=
this.currentTran,this.panstart=!0),this.panstart&&(bookConfig.FlipDirection||bookConfig.upsideOnMobile()?this.setBookTran(this.startTran+b.deltaY):this.setBookTran(this.startTran+b.deltaX),"panend"==b.type&&(this.panstart=!1)))},onPress:function(b){},onTap:function(b){onWindowTap(b.srcEvent)},onOver:function(b){},onDown:function(b){this.fingleDown=!0},onUp:function(b){!this.flipping&&this.fingleDown&&(30<=Math.abs(this.currentTran-this.startTran)&&(this.currentTran>this.startTran&&!rightToLeft||this.currentTran<
this.startTran&&rightToLeft?previousPageFun():this.currentTran!=this.startTran&&nextPageFun()),this.startTran=this.currentTran,this.panstart=this.fingleDown=!1,this.onBack())},onBack:function(){if(0!=this.currentTran&&!this.flipping){this.flipping=!0;var b=this.currentTran,c=function(c,f,g){c<f?(c=(0,$.easing["easeInOut"+g])(null,c,b,0-b,f),this.setBookTran(c)):(this.flipping=!1,this.flipInterval.stop(),this.setBookTran(0),this.startTran=this.currentTran)}.bind(this);this.flipInterval=function(b,
f){c(b,f,"Sine")}.animation(this,this.flippingTime)}},getNextPage:function(){this.currentTran>this.startTran&&!rightToLeft||this.currentTran<this.startTran&&rightToLeft?previousPageFun():nextPageFun()},onSwipe:function(b,c){if(!(this.selected||this.status_zoom||this.isZomming||this.dragToFlip)){var d=30,f;bookConfig.FlipDirection?(d=d*this.height/1600,f=c):(d=d*this.width/1600,f=b);Math.abs(f)<=d||(f<-d?rightToLeft?previousPageFun():nextPageFun():f>d&&(rightToLeft?nextPageFun():previousPageFun()))}}});
var DoubleSlideBook=Class({getRealPageIndex:function(){var b=2*this.currentPageIndex-1;return b=Number.between(b,1,bookConfig.totalPageCount)},getRealBookIndex:function(b){b=bookConfig.isTheBookOpen?Math.ceil(b/2):parseInt(b/2)+1;return b=Number.between(b,1,this.pageLength())},setCurrentIndexTextField:function(){setCurrentIndexTextField(this.getRealPageIndex(),!0)},pageLength:function(){return bookConfig.isTheBookOpen?Math.ceil(bookConfig.totalPageCount/2):parseInt(bookConfig.totalPageCount/2)+1},
newPage:function(b){return new SlideBookPage(b,"slidePage",this.bookType,this.onBookPageLoaded.bind(this))}}).extend(SlideBook),SingleSlideBook=Class({getRealPageIndex:function(){var b=this.currentPageIndex;return b=Number.between(b,1,bookConfig.totalPageCount)},getRealBookIndex:function(b){return b=Number.between(b,1,bookConfig.totalPageCount)},setCurrentIndexTextField:function(){setCurrentIndexTextField(this.getRealPageIndex(),!1)},pageLength:function(){return bookConfig.totalPageCount},newPage:function(b){return new SingleSlideBookPage(b,
"slidePage",this.bookType,this.onBookPageLoaded.bind(this))}}).extend(SlideBook),PcDoubleSlideBook=Class({bookType:BookType.slide_book,create:function(b){this._super(b)},initBook:function(){this._super();void 0!=global.staticAd&&!0==staticAd.haveAd&&this.insertStaticAd()}}).extend(DoubleSlideBook),PcSingleSlideBook=Class({bookType:BookType.singleSlide_book,create:function(b){this._super(b)}}).extend(SingleSlideBook),CatalogBook=Class({bookType:BookType.catalog_book,guidBarHeight:0,create:function(b){this._super(b)},
initAttachments:function(){this._super();this.flipShotBarManager=new FlipShotBarManager(this.flipBook,this);this.flipShotBarManager.appendTo(this.flipBook);this.flipShotBarManager.refresh()},newPage:function(b){return 1!=b&&2!=b&&b!=totalPageCount&&b!=totalPageCount-1||!bookConfig.HardPageEnable?bookConfig.HardInnerPageEnable?new AlbumSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this)):new HardSide(b,
"page",BookType.catalog_book,this.onBookPageLoaded.bind(this))},setAttachmentBeforeFlipTo:function(b){this._super(b);this.flipShotBarManager.setVisibleByIndex(b)},setAttachmentAfterFlipTo:function(b){this._super(b);this.flipShotBarManager.refresh()},afterCurling:function(){this._super();this.flipShotBarManager.refresh()},resizeAttachmentAfterZoomIn:function(b){this._super(b);this.flipShotBarManager.resizeAttachment(this.width,this.height,b)},getControlBarTop:function(){return"lite"==bookConfig.ToolbarViewMode.toLowerCase()?
50:global.toolBar&&toolBar.getTopHeight?toolBar.getTopHeight()+5:5},beforeZoomIn:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.transparent&&thumbnail.transparent()},resetZoomConfig:function(){this._super();thumbnail&&thumbnail.visible&&thumbnail.noTransparent&&thumbnail.noTransparent()},onResize:function(b,c){this._super(b,c);this.flipShotBarManager.onResize(b,c)},getSpace:function(b){var c=bookConfig.leftMargin+toolBar.getLeftWidth(),d=bookConfig.rightMargin+toolBar.getRightWidth(),
f=bookConfig.topMargin+toolBar.getTopHeight(),g=bookConfig.bottomMargin+toolBar.getBottomHeight();b&&(c+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),d+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),f+=bookConfig.hardCoverBorderWidth,g+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:f,bottom:g}}}).extend(NormalBook),CatalogHardBook=Class({bookType:BookType.catalog_book,create:function(b){this._super(b)},
crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){if(bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){if(!bookConfig.HardInnerPageEnable)return!1;var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},
isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&1!=b&&2!=b&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isCoverPage:function(b,c){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},
gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount?gotoPageFun(totalPageCount-1):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(b,"page",BookType.catalog_book,
this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this))},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&
this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},
afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogBook),OpenCatalogHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&
0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toHardPage:function(b){return!bookConfig.HardInnerPageEnable||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-
2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isHardPage:function(b,c){return bookConfig.HardInnerPageEnable&&b!=totalPageCount&&b!=totalPageCount-1?!0:!1},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(b){return 1==b||b==totalPageCount||
b==totalPageCount-1?new HardSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this))}}).extend(CatalogHardBook),CatalogSimpleBook=Class({create:function(b){this._super(b)},initBook:function(){this._super();this.guidBar=new GuidToolbar(this.parent);this.guidBarHeight=50},showOrHideLiteThumbnail:function(){this.flipPageManager.array&&
0<this.flipPageManager.array.length||this.status_zoom||!0!=this.isFlipping&&!0!=this.isZomming&&this.adjustBookPosition()},hideToolBarAndShowGuidBar:function(){this.status_zoom||!0==this.isFlipping||!0==this.isZomming||(this.guidBar&&this.guidBar.show(),toolBar&&toolBar.hide(),this.mode="simple",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},hideGuidBarAndShowToolBar:function(){this.status_zoom||!0==this.isFlipping||!0==this.isZomming||(this.guidBar&&this.guidBar.hide(),
toolBar&&toolBar.show(),this.mode="complex",thumbnail&&thumbnail.visible&&thumbnail.show(),this.adjustBookPosition())},adjustBookPosition:function(){this.pageWidthHeight=this.getFitWH();var b=this.getTranY(),c=this.pageWidthHeight.x/this.width,d=this.getTranX(c);this.pageWidthHeight.x==this.width&&0==b&&0==d||this.flipBook.animateToTransform.bind(this.flipBook)(c,{x:d,y:b},{x:50,y:0})},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;var c=0;b=this.width*b/4;1!=this.currentPageIndex||
bookConfig.isTheBookOpen||(c=rightToLeft?b:-b);this.currentPageIndex==totalPageCount&&(c=rightToLeft?-b:b);b=this.getCssLeft();var d=this.getSpace(!0);return c=d.left+(windowWidth-d.left-d.right-this.width)/2-b+c},getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/2-b},getSpace:function(b){var c=bookConfig.leftMargin+toolBar.getLeftWidth(),d=bookConfig.rightMargin+toolBar.getRightWidth(),f=bookConfig.topMargin+(toolBar.visible?
toolBar.getTopHeight():this.guidBarHeight),g=bookConfig.bottomMargin+toolBar.getBottomHeight();b&&(c+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),d+=Math.max(bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),this.flipShotBarManager.getWidth()),f+=bookConfig.hardCoverBorderWidth,g+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:f,bottom:g}}}).extend(CatalogBook),CatalogSimpleHardBook=Class({bookType:BookType.catalog_book,create:function(b){this._super(b)},
crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},toSoftPage:function(b){var c=this.currentPageIndex;if(0<=[1,2,3].indexOf(c)&&0<=[1,2,3].indexOf(b)||0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-
2,totalPageCount].indexOf(b))return!1;0>[1,totalPageCount].indexOf(c)&&[1,totalPageCount].indexOf(b);return!0},toHardPage:function(b){return!1},toCoverPage:function(b){var c=this.currentPageIndex;return 0>[1,2,totalPageCount-1,totalPageCount].indexOf(c)&&0>[1,2,totalPageCount-1,totalPageCount].indexOf(b)||0<=[2,3].indexOf(c)&&0>[1,totalPageCount].indexOf(b)||0>[1,totalPageCount].indexOf(c)&&0>[1,totalPageCount].indexOf(b)?!1:!0},isHardPage:function(b,c){return!1},isCoverPage:function(b,c){return 1==
b||2==b||b==totalPageCount||b==totalPageCount-1?!0:!1},gotoNearPage:function(b){1==this.currentPageIndex?gotoPageFun(2):this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount?gotoPageFun(totalPageCount-1):1==b&&gotoPageFun(2)},initBook:function(){this._super();this.hardCover=new HardCover(this.flipBook)},newPage:function(b){return 1==b||2==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.normal_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?
new AlbumSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.normal_book,this.onBookPageLoaded.bind(this))},followToPoint:function(b,c,d){this._super(b,c,d);this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth())},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!0),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!1),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),
this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setLeftOrRight(!1),this.pageArray[c]&&this.pageArray[c].setLeftOrRight(!0),this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},setAttachmentBeforeFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(b,this.getThicknessWidth(),this.currentPageIndex)},
afterCurling:function(){this._super();this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},setAttachmentAfterFlipTo:function(b){this._super(b);this.hardCover&&this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},getThicknessWidth:function(){return this.thicknessManager.getThicknessWidth()},onResize:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,
this.getThicknessWidth(),this.currentPageIndex)},resizeBook:function(b,c){this._super(b,c);this.hardCover.onResize(b,c,this.getThicknessWidth());this.hardCover.refresh(this.currentPageIndex,this.getThicknessWidth(),this.currentPageIndex)},show:function(){this._super();this.hardCover.show()},hide:function(){this._super();this.hardCover.hide()}}).extend(CatalogSimpleBook),OpenCatalogSimpleHardBook=Class({crossFlipMode:function(b){var c=this.currentPageIndex;return 0<=[totalPageCount-1,totalPageCount-
2,totalPageCount].indexOf(c)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)||totalPageCount!=c&&totalPageCount!=b?!1:!0},toSoftPage:function(b){return 0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(this.currentPageIndex)&&0<=[totalPageCount-1,totalPageCount-2,totalPageCount].indexOf(b)?!1:!0},toCoverPage:function(b){return totalPageCount!=this.currentPageIndex&&totalPageCount!=b?!1:!0},isCoverPage:function(b,c){return b==totalPageCount||b==totalPageCount-1?!0:!1},
gotoNearPage:function(b){this.currentPageIndex==totalPageCount?gotoPageFun(totalPageCount-1):b==totalPageCount&&gotoPageFun(totalPageCount-1)},newPage:function(b){return 1==b||b==totalPageCount||b==totalPageCount-1?new HardSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):bookConfig.HardInnerPageEnable?new AlbumSide(b,"page",BookType.catalog_book,this.onBookPageLoaded.bind(this)):new NormalPage(b,"page",!1,BookType.catalog_book,this.onBookPageLoaded.bind(this))}}).extend(CatalogSimpleHardBook);var AnnotationPannel=Class({statics:{NONE:0,NOTE:1,PEN:2,RECT:3,ROUND:4,ERASER:5},create:function(b){b&&(this.annoStepCookie=[],this.annoCurrentStep=-1,this.parent=b,this.book=BookInfo.getBook().showPage,this.selectCase=AnnotationPannel.NONE,this.initHtml(),this.initCss(),this.selectCaseEvent(),this.initEvent())},initHtml:function(){this.panel=$("<div class='annotationPanel'></div>");this.annoBtnBox=$("<div class='annoBtnBox'></div>");this.bottomBox=$("<div class='bottomBox'></div>");this.moveBar=
$("<div class='noteMoveBar'><img /></div>");this.note=$("<div title='"+getLanguage("DrawToolWindow_TextNote","Note")+"' class='noteAdd' ><img /></div>");this.pen=$("<div title='"+getLanguage("DrawToolWindow_Brush","Brush")+"' class='notePen'><img /></div>");this.rect=$("<div title='"+getLanguage("DrawToolWindow_Rectangular","Rectangular")+"' class='noteRect'><img /></div>");this.round=$("<div title='"+getLanguage("DrawToolWindow_Ellipse","Ellipse")+"' class='noteRound'><img /></div>");this.eraser=
$("<div title='"+getLanguage("DrawToolWindow_Eraser","Eraser")+"' class='noteEraser'><img /></div>");this.point=$("<div class='noteCursor' ><img /></div>");this.clear=$("<div title='"+getLanguage("DrawToolWindow_Clear","Clear")+"' class='noteClear'><img /></div>");this.undo=$("<div title='"+getLanguage("DrawToolWindow_Undo","Undo")+"' class='noteUndo'><img /></div>");this.redo=$("<div title='"+getLanguage("DrawToolWindow_Redo","Redo")+"' class='noteRedo'><img /></div>");this.exit=$("<div title='"+
getLanguage("FlipPageEditor_Exit","Exit")+"' class='noteExit'><img /></div>");this.save=$("<div title='"+getLanguage("FlipPageEditor_SaveAndExit","SaveAndExit")+"' class='noteSave'><img /></div>");this.annoBtnBox.append(this.note).append(this.pen).append(this.rect).append(this.round).append(this.eraser).append(this.point).append(this.clear).append(this.undo).append(this.redo).append(this.exit).append(this.save);this.initBottomHtml();this.panel.append(this.moveBar).append(this.annoBtnBox).append(this.bottomBox);
this.parent.append(this.panel);this.setBtnSrc()},setBtnSrc:function(){for(var b=[this.moveBar,this.note,this.pen,this.rect,this.round,this.eraser,this.point,this.clear,this.undo,this.redo,this.exit,this.save],c=0;c<b.length;c++)this.setSrc(b[c].find("img"),b[c].attr("class"))},setSrc:function(b,c){form_icons&&form_icons[c]?b.attr("src","data:image/png;base64,"+form_icons[c]):b.attr("src",uiBaseURL+c+".png");b.css({width:"100%",height:"100%"})},initBottomHtml:function(){this.selColor="#FF0000";this.helixColors=
"#FF0000 #FF5555 #FF55AA #FF55FF #FFAA55 #FFAAAA #FFAAFF #FFFF55 #FFFFAA #FFFFFF #CC0000 #CC5555 #CC55AA #CC55FF #CCAA55 #CCAAAA #CCAAFF #CCFF55 #CCFFAA #CCFFFF #AA0000 #AA5555 #AA55AA #AA55FF #AAAA55 #AAAAAA #AAAAFF #AAFF55 #AAFFAA #AAFFFF #880000 #885555 #8855AA #8855FF #88AA55 #88AAAA #88AAFF #88FF55 #88FFAA #88FFFF #550000 #555555 #5555AA #5555FF #55AA55 #55AAAA #55AAFF #55FF55 #55FFAA #55FFFF #220000 #225555 #2255AA #2255FF #22AA55 #22AAAA #22AAFF #22FF55 #22FFAA #22FFFF #000000 #005555 #0055AA #0055FF #00AA55 #00AAAA #00AAFF #00FF55 #00FFAA #00FFFF".split(" ");
this.eraserBox=$("<div class='eraserBox' style='display:none;margin:5px 0'></div>");this.eraserWidth=$("<span class='eraserWidth' style='font-size:13px;margin-left:4px;margin-right:5px;'>"+getLanguage("DrawToolWindow_Width","Width")+"</span>");this.inputEraserWidth=$("<input class='eraserInput'  style='width:40px;display:inline-block' type='number' step='1' min='1' value='30' />");this.widthBox=$("<div class='widthBox' style='display:none;margin:5px 0'></div>");this.setWidth=$("<span class='setWidth' style='font-size:13px;margin-left:4px;margin-right:5px;'>Width</span>");
this.inputWidth=$("<input  style='width:40px;display:inline-block' type='number' step='1' min='1' value='3' />");this.alphaBox=$("<div class='alphaBox' style='display:none;margin:5px 0''></div>");this.setAplha=$("<span class='setAplha' style='font-size:13px;margin-left:4px;margin-right:5px;'>Alpha</span>");this.inputAlpha=$("<input style='width:50px;display:inline-block' type='number' step='1' value='100' min='0' max='100' />");this.colorBox=$("<div class='colorBox' style='position:relative;display:none;margin:5px 0''></div>");
this.setColor=$("<span class='setColor'  style='font-size:13px;margin-left:4px;margin-right:5px;'>color</span>");this.inputColor=$("<input style='width:70px;display:inline-block' value='"+this.selColor+"'/>");this.showColor=$("<div class='showColor' style='cursor:pointer;background:"+this.selColor+";vertical-align:middle;display:inline-block;width:19px;height:19px;margin-left:2px;'></div>");this.colorTable=$("<div class='colorTable' style='display:none;background:#191;width:191px;height:134px;position:absolute;top:28px;'></div>");
this.showColor.bind(_event._click,function(){"none"==this.colorTable.css("display")?this.colorTable.css({display:"block"}):this.colorTable.css({display:"none"})}.bind(this));this.colorTable.bind(_event._click,function(){this.colorTable.css({display:"none"})}.bind(this));this.eraserBox.append(this.eraserWidth).append(this.inputEraserWidth);this.widthBox.append(this.setWidth).append(this.inputWidth);this.alphaBox.append(this.setAplha).append(this.inputAlpha);this.colorBox.append(this.setColor).append(this.inputColor).append(this.showColor).append(this.colorTable);
this.bottomBox.append(this.eraserBox).append(this.widthBox).append(this.alphaBox).append(this.colorBox);this.tableColor()},setPanelIndex:function(b,c,d){b||(b=0);c||(c=0);this.book=BookInfo.getBook().showPage;for(var f=BookInfo.getCurrentPages(),g=0;g<f.length;g++)this.book.find("#annotationPage"+f[g]).css({"pointer-events":d}),this.book.find("#annotationCvsPanel"+f[g]).css({"z-index":b}),this.book.find("#annotationDraw"+f[g]).css({"z-index":c})},selectCaseEvent:function(){this.defaultCaseEvent();
this.note.bind(_event._click,function(b){b.stopPropagation();this.selectCase!=AnnotationPannel.NOTE?(this.selectCase=AnnotationPannel.NOTE,this.setPanelIndex(0,0,"auto"),this.note.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.setPanelIndex(0,0,"none"),this.selectCase=AnnotationPannel.NONE);this.bottomBox.css({display:"none"})}.bind(this));this.pen.bind(_event._click,function(b){b.stopPropagation();this.selectCase!=AnnotationPannel.PEN?(this.selectCase=AnnotationPannel.PEN,this.setPanelIndex(2,
0,"auto"),this.pen.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.selectCase=AnnotationPannel.NONE,this.setPanelIndex(0,0,"none"));this.bottomBox.css({display:"block"});this.eraserBox.css({display:"none"});this.widthBox.css({display:"inline-block"});this.alphaBox.css({display:"inline-block"});this.colorBox.css({display:"inline-block"});this.setWidth.text(getLanguage("DrawToolWindow_Width","Width"));this.setAplha.text(getLanguage("DrawToolWindow_Alpha","Alpha"));this.setColor.text(getLanguage("DrawToolWindow_Color",
"Color"))}.bind(this));this.rect.bind(_event._click,function(b){b.stopPropagation();this.selectCase!=AnnotationPannel.RECT?(this.selectCase=AnnotationPannel.RECT,this.setPanelIndex(2,3,"auto"),this.rect.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.selectCase=AnnotationPannel.NONE,this.setPanelIndex(0,0,"none"));this.bottomBox.css({display:"block"});this.eraserBox.css({display:"none"});this.widthBox.css({display:"inline-block"});this.alphaBox.css({display:"inline-block"});this.colorBox.css({display:"inline-block"});
this.setWidth.text(getLanguage("TStuff_BorderWidth","Border Width"));this.setAplha.text(getLanguage("TStuff_BorderAlph","Border Alpha"));this.setColor.text(getLanguage("TStuff_BorderColor","Border Color"))}.bind(this));this.round.bind(_event._click,function(b){b.stopPropagation();this.selectCase!=AnnotationPannel.ROUND?(this.selectCase=AnnotationPannel.ROUND,this.setPanelIndex(2,3,"auto"),this.round.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.selectCase=AnnotationPannel.NONE,this.setPanelIndex(0,
0,"none"));this.bottomBox.css({display:"block"});this.eraserBox.css({display:"none"});this.widthBox.css({display:"inline-block"});this.alphaBox.css({display:"inline-block"});this.colorBox.css({display:"inline-block"});this.setWidth.text(getLanguage("TStuff_BorderWidth","Border Width"));this.setAplha.text(getLanguage("TStuff_BorderAlph","Border Alpha"));this.setColor.text(getLanguage("TStuff_BorderColor","Border Color"))}.bind(this));this.eraser.bind(_event._click,function(b){b.stopPropagation();this.selectCase!=
AnnotationPannel.ERASER?(this.selectCase=AnnotationPannel.ERASER,this.setPanelIndex(2,0,"auto"),this.eraser.css({border:"1px solid #999999",background:"#B2B2B2"})):(this.setPanelIndex(0,0,"none"),this.selectCase=AnnotationPannel.NONE);this.bottomBox.css({display:"block"});this.eraserBox.css({display:"inline-block"});this.widthBox.css({display:"none"});this.alphaBox.css({display:"none"});this.colorBox.css({display:"none"})}.bind(this));this.point.bind(_event._click,function(b){b.stopPropagation();
this.setPanelIndex(0,0,"none");this.selectCase=AnnotationPannel.NONE;this.bottomBox.css({display:"none"})}.bind(this));this.clear.bind(_event._click,function(b){b.stopPropagation();b=BookInfo.getCurrentPages();this.selectCase=AnnotationPannel.NONE;this.setPanelIndex(0,0,"none");for(var c=0;c<b.length;c++){var d=this.book.find("#annotationCvsPanel"+b[c])[0].getContext("2d");d.beginPath();d.stroke();d.clearRect(0,0,BookInfo.getBook().pageWidth,BookInfo.getBook().pageHeight);d.closePath()}global.annotationCookie.setAllAnnoSteps(11,
b.map(function(b){return b-1}),[{type:"Clear"}]);global.annotationCookie.stepIndex+=1}.bind(this));this.exit.bind(_event._click,function(b){b.stopPropagation();this.hide();b=BookInfo.getCurrentPages();for(var c=0;c<b.length;c++)global.annotationCookie.repaintCookie("",b[c]-1)}.bind(this));this.save.bind(_event._click,function(b){b.stopPropagation();global.annotationCookie.saveCookie();this.hide()}.bind(this));this.undoEvent();this.redoEvent()},undoEvent:function(){this.undo.bind(_event._click,function(b){b.stopPropagation();
this.setPanelIndex(0,0,"none");this.selectCase=AnnotationPannel.NONE;global.annotationCookie.stepIndex-=1;0>=global.annotationCookie.stepIndex&&(global.annotationCookie.stepIndex=0);global.annotationCookie.repaintSteps()}.bind(this))},redoEvent:function(){this.redo.bind(_event._click,function(b){b.stopPropagation();this.setPanelIndex(0,0,"none");this.selectCase=AnnotationPannel.NONE;global.annotationCookie.stepIndex+=1;global.annotationCookie.stepIndex>=global.annotationCookie.allAnnoSteps.length&&
(global.annotationCookie.stepIndex=global.annotationCookie.allAnnoSteps.length);global.annotationCookie.repaintSteps()}.bind(this))},isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)},defaultCaseEvent:function(){this.annoBtnBox.find("div").bind(_event._click,function(b){b.stopPropagation();b=b.target;"img"==b.tagName.toLowerCase()&&(b=$(b).parent());$(b).siblings().css({background:"transparent",border:"1px solid transparent"})}.bind(this));this.annoBtnBox.find("div").bind(_event._down,
function(b){b.stopPropagation();b=b.target;"img"==b.tagName.toLowerCase()&&(b=$(b).parent());$(b).css({border:"1px solid #999999",background:"#B2B2B2"})}.bind(this));this.annoBtnBox.find("div").bind(_event._up,function(b){b.stopPropagation();b=b.target;"img"==b.tagName.toLowerCase()&&(b=$(b).parent());$(b).css({background:"transparent",border:"1px solid transparent"})}.bind(this))},tableColor:function(){for(var b=$("<table border='1' style='border-collapse:collapse'></table>"),c=0;7>c;c++){for(var d=
$("<tr></tr>"),f=0;10>f;f++){var g=$("<td title='"+this.helixColors[10*c+f]+"' style='width:16px;height:16px;background:"+this.helixColors[10*c+f]+"'></td>");(function(b,c){c.bind(_event._enter,function(){b.inputColor.val(c.attr("title"));b.showColor.css({background:c.attr("title")})}.bind(b))})(this,g);(function(b,c){c.bind(_event._click,function(){b.selColor=c.attr("title");b.inputColor.val(b.selColor);b.showColor.css({background:b.selColor})}.bind(b))})(this,g);(function(b,c){b.colorTable.bind(_event._leave,
function(){b.inputColor.val(b.selColor);b.showColor.css({background:b.selColor})}.bind(b))})(this,g);d.append(g)}b.append(d)}this.colorTable.append(b)},initCss:function(){var b=344<=windowWidth?1:windowWidth/344;this.panel.css({display:"none",background:"#BFBFBE",position:"absolute",width:"344px",height:"auto","min-height":"62px","border-radius":"1px",top:"100px",left:(0>windowWidth-344?0:(windowWidth-344)/2)+"px","-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-o-transform":"scale("+
b+")","-ms-transform":"scale("+b+")",transform:"scale("+b+")","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","z-index":"10000"});this.annoBtnBox.css({position:"relative","border-bottom":"1px solid #ACACAB",width:"324px",height:"28px",top:"1px",left:"20px"});this.bottomBox.css({"vertical-align":"middle",width:"322px",left:"22px",height:"auto","font-family":"Tahoma , sans-serif , Arial",position:"relative",
top:"0px"});this.moveBar.css({cursor:"move",width:"16px",height:"34px",position:"absolute","padding-left":"5px",top:"14px"});this.moveBar.find("img").css({width:"9px",height:"34px"});this.note.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"4px",top:"1px",border:"1px solid transparent"});this.pen.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"33px",top:"1px",border:"1px solid transparent"});this.rect.css({cursor:"pointer",position:"absolute",
width:"23px",height:"23px",left:"62px",top:"1px",border:"1px solid transparent"});this.round.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"91px",top:"1px",border:"1px solid transparent"});this.eraser.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"120px",top:"1px",border:"1px solid transparent"});this.point.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"149px",top:"1px",border:"1px solid transparent"});this.clear.css({cursor:"pointer",
position:"absolute",width:"23px",height:"23px",left:"178px",top:"1px",border:"1px solid transparent"});this.undo.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"207px",top:"1px",border:"1px solid transparent"});this.redo.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"236px",top:"1px",border:"1px solid transparent"});this.exit.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"265px",top:"1px",border:"1px solid transparent"});
this.save.css({cursor:"pointer",position:"absolute",width:"23px",height:"23px",left:"294px",top:"1px",border:"1px solid transparent"})},initEvent:function(){this.panel.bind("pointerdown mouseup mousedown click mouseenter mouseleave mouseover mouseout",function(b){b.stopPropagation()}.bind(this));this.moveBar.bind(_event._enter,function(b){this.moveBar.find("img").css({background:"#5A9BB7"})}.bind(this));this.moveBar.bind(_event._leave,function(b){this.moveBar.find("img").css({background:"transparent"})}.bind(this));
this.moveBar.bind(_event._down,function(b){b.preventDefault();b.stopPropagation();this.moveBar.find("img").css({background:"#5A9BB7"});b=this.getPosition(b);this.catchX=b.x;this.catchY=b.y;this.catchFocus=!0}.bind(this));this.moveBar.bind(_event._up,function(b){b.preventDefault();b.stopPropagation();this.moveBar.find("img").css({background:"transparent"});this.catchFocus=!1}.bind(this));this.parent.bind(_event._move,function(b){if(this.catchFocus){b=this.getPosition(b);var c=b.x-this.catchX,d=b.y-
this.catchY;this.panel.css({left:parseFloat(this.panel.left())+c+"px",top:parseFloat(this.panel.top())+d+"px"});this.catchX=b.x;this.catchY=b.y}}.bind(this))},getPosition:function(b){b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b];return{x:(b[0].pageX||b[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(b[0].pageY||b[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},onResize:function(){var b=
344<=windowWidth?1:windowWidth/344;this.panel.css({left:(0>windowWidth-344?0:(windowWidth-344)/2)+"px","-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-o-transform":"scale("+b+")","-ms-transform":"scale("+b+")",transform:"scale("+b+")","z-index":"10000"});this.book=BookInfo.getBook().showPage},showOrHide:function(){"block"==this.panel.css("display")?this.hide():this.show()},resetAnnoConfig:function(){this.annoBtnBox.find("div").css({background:"transparent",border:"1px solid transparent"});
this.selectCase=AnnotationPannel.NONE;this.setPanelIndex(0,0,"none");global.annotationCookie&&global.annotationCookie.clearUnsaveCookie()},show:function(){this.panel.fadeIn(200)},hide:function(){this.resetAnnoConfig();this.panel.fadeOut(200)}}),AnnotationAddNote=Class({create:function(b,c,d){this.parent=b;this.config=c;this.noteClose="data:image/png;base64,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";
this.position={x:c.position.x*global.annotationCookie.pageWidth,y:c.position.y*global.annotationCookie.pageHeight};if(isPhone()||isPad())this.position={x:c.position.x*global.annotationCookie.pageWidth/global.annotationCookie.scale,y:c.position.y*global.annotationCookie.pageHeight/global.annotationCookie.scale};this.noteShow=d;this.container=$("<div id="+c.id+" title='"+this.config.value+"' class='noteContainer'></div>");this.icon=$("<img src='"+uiBaseURL+"note.png' />");this.close=$("<img src='"+
this.noteClose+"'/>");this.remove=$("<img />");this.save=$("<img />");this.setSrc(this.remove,"delete");this.setSrc(this.save,"save");this.noteTitle=$("<div class='noteTitle'>"+this.config.time+"</div>");this.noteBox=$("<div class='noteBox'></div>");this.textarea=$("<textarea >"+this.config.value+"</textarea>");this.noteBox.append(this.noteTitle).append(this.close).append(this.remove).append(this.save).append(this.textarea);this.container.append(this.icon).append(this.noteBox);this.parent.append(this.container);
this.initCss();this.initEvent();this.close.changeButtonColor("#666666");this.remove.changeButtonColor("#666666");this.save.changeButtonColor("#666666");this.showOrHide();this.moveEvent()},setSrc:function(b,c){form_icons&&form_icons[c]?b.attr("src","data:image/png;base64,"+form_icons[c]):b.attr("src",uiBaseURL+c+".png")},initCss:function(){var b=global.annotationCookie.scale;this.close.css({cursor:"pointer",position:"absolute",height:18/b+"px",width:18/b+"px",top:5/b+"px",right:5/b+"px"});this.remove.css({cursor:"pointer",
position:"absolute",height:19/b+"px",width:19/b+"px",top:5/b+"px",right:28/b+"px"});this.save.css({cursor:"pointer",position:"absolute",height:15/b+"px",width:15/b+"px",top:7/b+"px",right:53/b+"px"});this.container.css({"font-size":14/b+"px","z-index":"51",position:"absolute",width:this.config.size*global.annotationCookie.pageWidth/b+"px",left:this.position.x+"px",top:this.position.y+"px",height:this.config.size*global.annotationCookie.pageWidth/b+"px"});this.icon.css({position:"relative",cursor:"pointer",
width:"100%",height:"100%","z-index":"51"});this.noteBox.css({"z-index":"1","-webkit-box-shadow":" 2px 2px 5px #111","-o-box-shadow":" 2px 2px 5px #111","-moz-box-shadow":" 2px 2px 5px #111","-ms-box-shadow":" 2px 2px 5px #111","box-shadow":" 2px 2px 5px #111",border:"1px solid #bbb",background:"#FAE393",position:"absolute","min-width":190/b+"px","min-height":133/b+"px",top:this.container.width()+5+"px",left:"0"});this.noteTitle.css({"font-size":12/b+"px",position:"relative",padding:6/b+"px "+8/b+
"px"});this.textarea.css({border:"none","font-size":12/b+"px",position:"relative",width:184/b+"px",margin:"0 "+5/b+"px 0",height:96/b+"px"})},elemDrag:function(b,c,d){b.bind(_event._down,function(b){b=this.getPosition(b);this.X=b.x;this.Y=b.y;d=!0}.bind(this));b.bind(_event._up,function(b){d=!1}.bind(this));c.bind(_event._move,function(c){if(d){var g=global.annotationCookie.scale||1;c=this.getPosition(c);var h=c.x/g-this.X/g,g=c.y/g-this.Y/g;b.css({left:parseFloat(b.left())+h+"px",top:parseFloat(b.top())+
g+"px"});this.X=c.x;this.Y=c.y}}.bind(this))},getPhoneStartPos:function(b,c){b=b||window.event;return{x:(b.originalEvent.targetTouches[0].pageX||b.originalEvent.targetTouches[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(b.originalEvent.targetTouches[0].pageY||b.originalEvent.targetTouches[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},getPhoneEndPos:function(b){b=b||window.event;return{x:(b.originalEvent.changedTouches[0].pageX||b.originalEvent.changedTouches[0].clientX)+
(document.documentElement.scrollLeft||document.body.scrollLeft),y:(b.originalEvent.changedTouches[0].pageY||b.originalEvent.changedTouches[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}},getPosition:function(b){b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b];return{x:(b[0].pageX||b[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(b[0].pageY||b[0].clientY)+(document.documentElement.scrollTop||
document.body.scrollTop)}},moveEvent:function(){this.elemDrag(this.container,this.parent,"");this.elemDrag(this.noteBox,this.parent,"")},iconEvent:function(){this.container.bind("touchstart touchend",function(b){b.stopPropagation();b.preventDefault()}.bind(this));this.noteBox.bind("touchstart touchend",function(b){b.stopPropagation()}.bind(this));this.container.bind("mousedown mouseup",function(b){b.stopPropagation();b.preventDefault()}.bind(this));this.icon.bind("pointerdown click",function(b){b.stopPropagation()}.bind(this));
this.icon.bind(_event._down,function(b){b=this.getPosition(b);this.iconX=b.x;this.iconY=b.y;this.icon.css({"-webkit-box-shadow":"0 0 2px 2px #DDDDDD inset","-o-box-shadow":"0 0 2px 2px #DDDDDD inset","-moz-box-shadow":"0 0 2px 2px #DDDDDD inset","-ms-box-shadow":"0 0 2px 2px #DDDDDD inset","box-shadow":"0 0 2px 2px #DDDDDD inset"})}.bind(this));this.icon.bind(_event._up,function(b){b=this.getPosition(b);var c=b.y;3>Math.abs(b.x-this.iconX)&&3>Math.abs(c-this.iconY)&&this.showOrHide();this.saveNoteCookie();
this.icon.css({"-webkit-box-shadow":"","-o-box-shadow":"","-moz-box-shadow":"","-ms-box-shadow":"","box-shadow":""})}.bind(this))},showOrHide:function(){this.noteShow?(this.noteBox.css({display:"block"}),this.noteShow=!1):(this.noteBox.css({display:"none"}),this.noteShow=!0);this.hasMove=!1},initEvent:function(){this.iconEvent();this.container.bind("pointerdown",function(b){b.stopPropagation()}.bind(this));this.textarea.bind("click mousedown mouseup pointerdown mouseover",function(b){b.stopPropagation()});
this.container.bind(_event._mousewheel,function(b){b.stopPropagation()}.bind(this));for(var b=[this.close,this.remove,this.save],c=0;c<b.length;c++)(function(b){b.bind(_event._down,function(c){b.css({background:"rgba(11,11,11,0.3)"})}.bind(this));b.bind(_event._up,function(c){b.css({background:"transparent"})}.bind(this))}).call(this,b[c]);this.close.bind(_event._click,function(){this.noteShow=!0;this.noteBox.css({display:"none"})}.bind(this));this.remove.bind(_event._click,function(){this.container.remove();
this.container=void 0;global.annotationCookie.deleteNoteCookie("Note",this.config.index,this.config.id)}.bind(this));this.save.bind(_event._click,function(){this.saveNoteCookie()}.bind(this))},saveNoteCookie:function(){this.config.value=this.textarea.val();this.container.attr("title",this.config.value);this.config.position={x:this.container.left()/global.annotationCookie.pageWidth*global.annotationCookie.scale,y:this.container.top()/global.annotationCookie.pageHeight*global.annotationCookie.scale};
global.annotationCookie.saveNoteCookie("Note",this.config.index,this.config.id,this.config)}});var phoneGotoPage=Class({create:function(b){this.mainColor=bookConfig.toolbarColor;this.menu=$("<div id='menu' style='position:absolute;width:100%;height:50px;z-index:98;bottom:-41px;'></div>");this.background=$("<div id='background' style='position:absolute;width:100%;height:50px;'></div>");this.contentBox=$("<div id='contentBox' class='phoneGotoPageContent' style='position:absolute;width:100%;height:50px;'></div>");this.background.css({background:this.mainColor,opacity:0.8});b.append(this.menu);
this.menu.append(this.background);this.menu.append(this.contentBox);this.initContentBox();this.initEvent();this.visible=!1},initContentBox:function(){this.contentBox.css({"text-align":"center",display:"inline-block"});this.backwardButton=$("<div class='btn' style='margin-left:-3px;'><img src=''/></div>");this.firstButton=$("<div class='btn'><img src=''/></div>");bookConfig.enablePageBack||this.firstButton.css({"margin-left":"-3px"});this.prevButton=$("<div class='btn'><img src=''/></div>");this.nextButton=
$("<div class='btn'><img src=''/></div>");this.lastButton=$("<div class='btn'><img src=''/></div>");this.forwardButton=$("<div class='btn'><img src=''/></div>");this.goButton=$("<div class='goBtn'><img src=''/></div>");this.setSrc(this.backwardButton.find("img"),"backward",bookConfig.BackwardButtonIcon);this.setSrc(this.firstButton.find("img"),"firstPage",bookConfig.FirstButtonIcon);this.setSrc(this.prevButton.find("img"),"previousPage",bookConfig.PreviousButtonIcon);this.setSrc(this.nextButton.find("img"),
"nextPage",bookConfig.NextButtonIcon);this.setSrc(this.lastButton.find("img"),"lastPage",bookConfig.LastButtonIcon);this.setSrc(this.forwardButton.find("img"),"forward",bookConfig.ForwardButtonIcon);this.setSrc(this.goButton.find("img"),"goPage");this.inputButton=$("<div class='inputButton' style='width:100px;'><input id='currentPageIndexTextField' type='text'/></div>");bookConfig.enablePageBack&&this.contentBox.append(this.backwardButton);this.contentBox.append(this.firstButton);this.contentBox.append(this.prevButton);
this.contentBox.append(this.inputButton);this.contentBox.append(this.nextButton);this.contentBox.append(this.lastButton);bookConfig.enablePageBack&&this.contentBox.append(this.forwardButton);this.inputButton.append(this.goButton);$("#currentPageIndexTextField").css({padding:"0px","text-align":"center","border-width":"0px",background:"#aeaeb1",width:"70px","padding-right":"30px",height:"30px","border-radius":"0px",position:"absolute",color:bookConfig.pageNumColor,left:0,top:0})},setSrc:function(b,
c,d){d&&""!=d?b.attr("src",d):phone_toolbar_icons&&phone_toolbar_icons[c]?b.attr("src","data:image/png;base64,"+phone_toolbar_icons[c]):b.attr("src",phoneBaseURL+c+".png");this.colorChanged=!1;this.changeColor(b)},changeColor:function(b,c){this.changeIconColor(b,c)},changeIconColor:function(b,c){b&&(c||(c=Color(bookConfig.iconColor).toString()),this.colorChanged||b.changeButtonColor(c,!1,function(){this.colorChanged=!0}.bind(this)))},changeCaptionColor:function(b){if(this.fontColor||b)b||(b=this.fontColor.toString()),
this.$caption&&this.$caption.css("color",b)},show:function(){toolBar.extendedBar&&toolBar.extendedBar.visible&&toolBar.extendedBar.hide();this.menu.animate({bottom:40},300);this.visible=!0},hide:function(){this.menu.animate({bottom:-80},300);this.visible=!1},showOrHide:function(){!0===this.visible?this.hide():this.show()},initEvent:function(){this.firstButton.bind(_event._end,function(){rightToLeft?lastPageFun():firstPageFun();return!1});this.prevButton.bind(_event._end,function(){rightToLeft?nextPageFun():
previousPageFun();return!1});this.nextButton.bind(_event._end,function(){rightToLeft?previousPageFun():nextPageFun();return!1});this.lastButton.bind(_event._end,function(){rightToLeft?firstPageFun():lastPageFun();return!1});this.goButton.bind(_event._end,function(){var b=parseInt($("#currentPageIndexTextField").val().replace(/\D/g,"")),b=Math.min(Math.max(b,1),bookConfig.totalPageCount);gotoPageFun(b);return!1}.bind(this));this.backwardButton.bind(_event._end,function(){rightToLeft?flipHistory.forward():
flipHistory.backward();return!1});this.forwardButton.bind(_event._end,function(){rightToLeft?flipHistory.backward():flipHistory.forward();return!1})}});var PasswardPannel=Class({create:function(){this.initHtml();this.initPrompt();this.initEvent();this.background.show();this.view.show()},initHtml:function(){this.background=$("<div class='passwardPannel-background'></div>");this.view=$("<div class='passwardPannel'></div>");this.icon=$("<div id='icon' class='icon'></div>");this.$username=$("<input id='username_input' placeholder='"+getLanguage("lblName","Name")+"' class='username'></input>");this.$passward=$("<input id='passward_input' type='password' placeholder='"+
getLanguage("lblPassword","Password")+"' class='passward'></input>");this.loginIn=$("<p id='loginIn' class='loginIn'>"+getLanguage("lblLogin","Login")+"</p>");this.cancleIn=$("<p id='cancleIn' class='cancleIn'>"+getLanguage("lblCancel","Cancel")+"</p>");this.passwardResult=$("<span id='passwardResult' class='passwardResult'></span>");this.passwardInfo=$("<div class='passwardInfo'>"+bookConfig.passwordTips+"<span class='top'></span></div>");this.view.append(this.icon);2==passwardType()&&(this.view.css("height",
"390px"),this.view.append(this.$username));this.view.append(this.$passward);this.view.append(this.loginIn);this.view.append(this.cancleIn);this.view.append(this.passwardResult);bookConfig.passwordTips&&this.view.append(this.passwardInfo);$("body").append(this.background);$("body").append(this.view);this.icon.addCssSprite(phoneIconsURL[0],"passward",100,100,phoneIconInfo)},initPrompt:function(){if(bookConfig.passwardPrompt){this.prompt=$("<div class='prompt'></div>");this.arrow=$("<div class='arrow'></div>");
this.prompt.html(bookConfig.passwardPrompt);this.view.append(this.prompt);this.view.append(this.arrow);this.prompt.width();var b=this.prompt.height(),c=this.$passward.width();this.$passward.height();c+=58;b=this.arrow.top()-(b+15)/2;this.prompt.css({left:c+"px",top:(0<b?b:0)+"px"})}},initEvent:function(){this.background.bind(_event._down,function(b){b.stopPropagation()});this.background.bind(_event._move,function(b){b.stopPropagation()});this.background.bind(_event._end,function(b){b.stopPropagation()});
this.cancleIn.bind(_event._end,function(){this.hide()}.bind(this));this.loginIn.bind(_event._end,function(){this.login()}.bind(this));this.prompt&&(this.$passward.bind(_event._enter,function(){this.prompt.show();this.arrow.show()}.bind(this)),this.$passward.bind(_event._leave,function(){this.$passward.is(":focus")?(this.prompt.show(),this.arrow.show()):(this.prompt.hide(),this.arrow.hide())}.bind(this)),this.$passward.bind("focus",function(){this.prompt.show();this.arrow.show()}.bind(this)),this.$passward.bind("blur",
function(){this.prompt.hide();this.arrow.hide()}.bind(this)))},login:function(){verifyPassward()?(this.rememberAuthentication(),this.hide(),this.fillCurrentPageContent()):this.showResult()},rememberAuthentication:function(){try{global.passward=this.$passward.val(),global.username=this.$username.val(),window.localStorage.setItem("passward",global.passward),window.localStorage.setItem("username",global.username)}catch(b){}},fillCurrentPageContent:function(){for(var b=1;b<=bookConfig.totalPageCount;b++)BookInfo.getBook().fillPage(b,
!0);thumbnail&&thumbnail.show&&thumbnail.fillContent&&thumbnail.fillContent()},show:function(){this.background.show();this.view.show()},hide:function(){this.background.hide();this.view.hide()},showResult:function(){document.getElementById("username")&&!this.$username.val()?this.passwardResult.html(getLanguage("lblNoName","User name can not be empty.")):this.$passward.val()?this.passwardResult.html(getLanguage("lblNoCorrectLogin","Please enter the correct user name and password.")):this.passwardResult.html(getLanguage("lblNoPassword",
"Password can not be empty."))}});var MiniStyle=Class({statics:{isMini:function(){if((isPhone()||isPad())&&!isInTheFrame()||!bookConfig.MiniStyle||fullScreenApi.isFullScreen())return!1;var b=this.getMaxMiniWidthHeight();if(windowWidth>b.w&&windowHeight>b.h)return!1;this.init();return!0},getMaxMiniWidthHeight:function(){for(var b=bookConfig.maxWidthToSmallMode,c=bookConfig.maxHeightToSmallMode,d=window.location.search.split("&"),f=0;f<d.length;f++){var g=d[f].toLowerCase();0<=g.indexOf("maxwidthtosmallmode")&&(b=parseInt(g.substring(g.indexOf("maxwidthtosmallmode")+
19+1,g.length)));0<=g.indexOf("maxheighttosmallmode")&&(c=parseInt(g.substring(g.indexOf("maxheighttosmallmode")+20+1,g.length)))}return{w:b,h:c}},init:function(){this.caption||(this.caption=$("<a class='miniTitle'></a>"),this.caption.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),tmpContainer.append(this.caption),this.initEvent())},initEvent:function(){isPhone()||isPad()?window.top!=window&&(this.caption.attr("href",window.location.href),this.caption.attr("target","blank")):(this.caption.attr("href",
"javascript:void(0);"),this.caption.bind(_event._down,function(){this.isMini()&&readAsFullscreen()}.bind(this)),this.caption.bind(_event._leave,function(){this.isMini()&&this.hide()}.bind(this)),bookContainer.bind("mousemove",function(b){this.isMini()&&b.pageX>windowWidth/2-25&&b.pageX<windowWidth/2+25&&b.pageY>windowHeight/2-25&&b.pageY<windowHeight/2+25&&this.show()}.bind(this)))},hide:function(){this.caption&&this.caption.animate({opacity:0},200,function(){this.caption.hide()}.bind(this))},show:function(){this.caption&&
(this.caption.show(),this.caption.animate({opacity:1},200))},destroy:function(){this.caption&&(this.caption.remove(),this.caption=void 0)}}});var FlipHistory=Class({create:function(){this.array=[];this.currentIndex=0},backward:function(){var b=this.currentIndex-1;void 0!=this.array[b]&&(this.currentIndex=b,gotoPageFun(this.array[b].index,!0))},forward:function(){var b=this.currentIndex+1;void 0!=this.array[b]&&(this.currentIndex=b,gotoPageFun(this.array[b].index,!0))},addFromCurrentIndex:function(b){this.array=this.array.slice(0,this.currentIndex+1);this.array.push({index:b});this.currentIndex=this.array.length-1},push:function(b){this.array.push({index:b})}}),
flipHistory=new FlipHistory;Log.debug("browser : %s, system : %s",Instance.JSON($.browser),Instance.JSON($.system));jQuery(document).ready(function(){window.waitForLoading?window.setTimeout(function(){main()},250):main()});
function main(){selectLanguage(bookConfig.language);isBelowIE8()?alert(getLanguage("infNotSupportHtml5","Your browser can not support HTML5.")):global.bookConfig?(initBrowserType(),initConfig(),initStage()):(alert(getLanguage("msgConfigMissing","Configuration file is missing, unable to open the book.")),function(){window.location=window.location.href}.delay(500))}
function initBrowserType(){$.browser.webkit&&(global.browserType=BrowserType.WEBKIT);$.browser.mozilla&&(global.browserType=BrowserType.MOZ);$.browser.opera&&(global.browserType=BrowserType.OPERA);$.browser.msie&&(global.browserType=BrowserType.MS)}
function initConfig(){checkBookConfig();useTheAliCloudChart();global.bookType=bookConfig.showDoublePage?0:1;global.rightToLeft=parseBool(bookConfig.RightToLeft,!1);global.originTotalPageCount=parseInt(bookConfig.totalPageCount);global.totalPageCount=originTotalPageCount+(1==originTotalPageCount%2&&!bookConfig.isTheBookOpen||0==originTotalPageCount%2&&bookConfig.isTheBookOpen?1:0);if(!global.ols||0>=global.ols.length)global.ols=[],bookConfig.TableOfContentButtonVisible=!1;global.bmtConfig||(global.bmtConfig=
[]);initImageBaseUrl()}function initImageBaseUrl(){global.uiBaseURL=bookConfig.UIBaseURL;uiBaseURL&&"string"==typeof uiBaseURL&&(uiBaseURL.endsWith("/")||(uiBaseURL+="/"));global.phoneBaseURL=uiBaseURL+"style/phoneIcon/";global.soundBaseURL=uiBaseURL+"voice/";global.mbBaseURL=uiBaseURL+"style/mb_icon/";global.uiBaseURL=uiBaseURL+"images/"}
function initStage(){$.browser.device==$.browser.DEVICE_PAD&&$("html").css({height:window.innerHeight+"px"});global.pageIndexTextField=$("#currentPageIndexTextField");global.tmpContainer=$("<div id= 'tmpContainer' class='tmpContainer'></div>");$("body").append(tmpContainer);global.bookContainer=$("<div id= 'bookContainer' class='bookContainer'></div>");tmpContainer.append(bookContainer);global.windowWidth=$("body").width();global.windowHeight=$("body").height();global.onBookLoad=new LoadingBook(tmpContainer,
bookConfig.loadingBackground);preloadImages()}
function preloadImages(){global.toolBarIconsURL=[uiBaseURL+"previous_normal.png",uiBaseURL+"next_normal.png"];global.phoneIconsURL=[phoneBaseURL+"phone_icon.png"];var b=function(b){jsLoadingBar&&jsLoadingBar.destroy();onBookLoad.chooseBookStyle()},c=function(b){jsLoadingBar&&jsLoadingBar.destroy();onBookLoad.chooseBookStyle();setTimeout(function(){window.scrollTo(0,1)},0)};isPhone()||isPad()?$(window).loader(phoneIconsURL,c):$(window).loader(toolBarIconsURL,b)}
function init(){onFirstVisit();initToolbar();initBook();initComponents();changeShowBook(bookType);onStageResize();scrapURL();setPageIndexTextField();controlAudioVolume();addGoogleAdSense();googleAnalytics();winodwDynamicResize();initEvents();global.initBookValues&&initBookValues();onBookReady()}
function onBookReady(){global.flipPageAudio&&flipPageAudio.start();var b=GetQueryString("search");b&&global.frmSearch&&window.setTimeout(function(){frmSearch.show();frmSearch.search(b)},30);showInstruction();showBookInstruction()}function onFirstVisit(){var b=window.location.href.replace(window.location.hash,"");try{window.localStorage[b]?authentication():window.localStorage.setItem(b,"true")}catch(c){}}
function showInstruction(){(isPhone()||isPad())&&bookConfig.showInstructionOnStart&&(global.handSwipeHelp||(global.handSwipeHelp=new HandSwipeHelp(tmpContainer)),global.handSwipeHelp.show())}function showBookInstruction(){(isPhone()||isPad())&&bookConfig.showBookInstructionOnStart&&(global.bookInstructions||(global.bookInstructions=new BookInstructions(tmpContainer)),global.bookInstructions.showOrHide())}
function authentication(){try{global.passward=window.localStorage.passward,global.username=window.localStorage.username}catch(b){}};function initToolbar(){!isSlideBook()||isPhone()||isPad()||"lite"!=bookConfig.ToolbarViewMode||(global.toolBar=new PCSlideToolbar(tmpContainer));if(isPhone()||isPad())global.toolBar=new PhoneToolbar(tmpContainer);global.toolBar||(global.toolBar=new PCToolbar(tmpContainer));global.toolBar&&toolBar.show()}
function initBook(){var b=scrapOriginPageIndex();flipHistory&&flipHistory.push(b);var c={parent:bookContainer,currentPageIndex:b,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft},d=Math.max(1,bookConfig.totalPageCount-1),b={parent:bookContainer,currentPageIndex:bookConfig.SingleModeBanFlipToLastPage?Number.between(b,1,d):b,flippingTime:bookConfig.flippingTime,rightToLeft:rightToLeft};initFlipBook(c,b);initCatalogBook(c,b);initSlideBook(c,b)}
function scrapOriginPageIndex(){bookConfig.restorePageVisible&&window.localStorage.historyPageIndex&&!0==window.confirm(getLanguage("restorePage","Would you like to restore previous session"))&&(window.location.hash="#p="+window.localStorage.historyPageIndex);var b=bookConfig.OriginPageIndex,c=window.location.hash;""!=c&&3<c.length&&"#p="==c.substr(0,3)&&(b=parseInt(getRealPageNumber(c.substr(3,c.length-3))));return b=Number.between(b,1,originTotalPageCount)}
bdor[42]=function(){return bdor[33](bdor[32](37,33)+10,36)}();
function initFlipBook(b,c){if(bookType==BookType.normal_book||bookType==BookType.single_book)isPhone()||isPad()||toolBar.show(),bookConfig.HardInnerPageEnable?bookConfig.FlipDirection?bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenAlbumHardCalendar(b):new AlbumHardCalendar(b)),global.singlePageBook=new SingleAlbumHardCalendar(c)):(bookConfig.showDoublePage&&(global.flipBook=new AlbumCalendar(b)),global.singlePageBook=new SingleAlbumCalendar(c)):
bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenAlbumHardBook(b):new AlbumHardBook(b)),global.singlePageBook=new SingleAlbumHardBook(c)):(bookConfig.showDoublePage&&(global.flipBook=new AlbumBook(b)),global.singlePageBook=new SingleAlbumBook(c)):bookConfig.FlipDirection?bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardCalendar(b):new HardCalendar(b)),global.singlePageBook=new SingleHardCalendar(c)):
(bookConfig.showDoublePage&&(global.flipBook=new NormalCalendar(b)),global.singlePageBook=new SingleCalendar(c)):bookConfig.HardPageEnable?(bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardBook(b):new HardBook(b)),global.singlePageBook=new SingleHardBook(c)):(bookConfig.showDoublePage&&(global.flipBook=new NormalBook(b)),global.singlePageBook=new SingleBook(c))}
function initCatalogBook(b){bookType==BookType.catalog_book&&("lite"==bookConfig.ToolbarViewMode.toLowerCase()?(global.catalogBook=bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardCalendar(b):new CatalogSimpleHardCalendar(b):new CatalogSimpleCalendar(b):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardBook(b):new CatalogSimpleHardBook(b):new CatalogSimpleBook(b),toolBar.hide()):global.catalogBook=bookConfig.FlipDirection?
bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardCalendar(b):new CatalogHardCalendar(b):new CatalogCalendar(b):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardBook(b):new CatalogHardBook(b):new CatalogBook(b))}function initSlideBook(b){if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book)bookConfig.showDoublePage&&(global.slideBook=new PcDoubleSlideBook(b)),global.singleSlideBook=new PcSingleSlideBook(b)}
function initComponents(){if(isPhone()||isPad()){bookConfig.SearchButtonVisible&&(global.frmSearch=new PhoneSearchForm({parent:tmpContainer,formType:"search",rightToLeft:rightToLeft}));bookConfig.TableOfContentButtonVisible&&(global.frmTableOfContent=new PhoneTableOfContentForm({parent:tmpContainer,formType:"tableOfContent",rightToLeft:rightToLeft}));bookConfig.ShareButtonVisible&&(global.sharePanel=new PhoneShareForm({parent:tmpContainer,formType:"share",rightToLeft:rightToLeft}));bookConfig.BookMarkButtonVisible&&
(global.bookmark=new PhoneBookmarkForm({parent:tmpContainer,formType:"bookmark",rightToLeft:rightToLeft}));bookConfig.PrintButtonVisible&&(global.printBody=new PhonePrintForm({parent:tmpContainer,formType:"print",rightToLeft:rightToLeft}));language&&1<language.length&&(global.languagePanel=new PhoneLanguageForm({parent:tmpContainer,formType:"language",rightToLeft:rightToLeft}));if(bookConfig.BackgroundSoundButtonVisible||bookConfig.FlipSound)global.phoneSettingBody=new PhoneSettingForm({parent:tmpContainer,
formType:"setting",rightToLeft:rightToLeft});bookConfig.aboutButtonVisible&&(global.aboutBody=new PhoneAboutForm({parent:tmpContainer,formType:"about",rightToLeft:rightToLeft}));bookConfig.ThumbnailsButtonVisible&&!global.thumbnail&&(global.thumbnail=new PhoneThumbnailForm(tmpContainer))}else bookConfig.PrintButtonVisible&&(global.printBody=new PcPrintForm({parent:tmpContainer,formType:"print",rightToLeft:rightToLeft})),bookConfig.HelpButtonVisible&&(global.helpBody=new PcHelpForm({parent:tmpContainer,
formType:"help",rightToLeft:rightToLeft})),bookConfig.aboutButtonVisible&&(global.aboutBody=new PcAboutForm({parent:tmpContainer,formType:"about",rightToLeft:rightToLeft})),bookConfig.ShareButtonVisible&&(global.sharePanel=new PcShareForm({parent:tmpContainer,formType:"share",rightToLeft:rightToLeft})),1<language.length&&(global.languagePanel=new PcLanguageForm({parent:tmpContainer,formType:"language",rightToLeft:rightToLeft})),bookConfig.BackgroundSoundButtonVisible&&bookConfig.FlipSound&&bookConfig.BackgroundSoundURL&&
(global.soundSetting=new PcSoundSettingForm({parent:tmpContainer,formType:"settingpc",rightToLeft:rightToLeft})),bookConfig.VideoButtonVisible&&(global.videoGallery=new PcVideoGalleryForm({parent:tmpContainer,formType:"videoGallery",rightToLeft:rightToLeft},global.videoList)),bookConfig.SlideshowButtonVisible&&(global.photoGallery=new PhotoGallery(tmpContainer,global.slideshow)),bookConfig.TableOfContentButtonVisible&&(global.frmTableOfContent=new PcTableOfContentForm({parent:tmpContainer,formType:"tableOfContent",
rightToLeft:rightToLeft}),"table of contents"==bookConfig.leftRightPnlShowOption&&global.frmTableOfContent.show()),bookConfig.SearchButtonVisible&&(global.frmSearch=new PcSearchForm({parent:tmpContainer,formType:"search",rightToLeft:rightToLeft})),bookConfig.ThumbnailsButtonVisible&&("catalog"==bookConfig.FlipStyle.toLowerCase()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&(global.thumbnail=new CatalogThumbnailBar(tmpContainer)),isSlideBook()&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&
(global.thumbnail=new SlideThumbnailBar(tmpContainer)),global.thumbnail||(global.thumbnail=new ThumbnailForm({parent:tmpContainer,formType:"thumbnail",rightToLeft:rightToLeft})),"thumbnails"==bookConfig.leftRightPnlShowOption&&global.thumbnail.show()),!isBelowIE9()&&bookConfig.BookMarkButtonVisible&&(global.bookmark=new PcBookmarkForm({parent:tmpContainer,formType:"bookmark",rightToLeft:rightToLeft})),initLogoBar(),window.assistantConfig&&(global.assistant=new Assistant);bookConfig.AnnotationButtonVisible&&
(global.annotationPannel=new AnnotationPannel(tmpContainer));bookConfig.appLargeLogoIcon&&new AppLargeLogo(bookContainer);bookConfig.QRCode&&(global.QRcode=new CodeBar(tmpContainer),global.QRbutton=new QRButton(tmpContainer));global.backgroundObj=new initBackground(tmpContainer);bookConfig.flipshortcutbutton&&(global.flipShotButton=new FlipShotButton(tmpContainer));global.auto_player=new AutoFlip;global.bgSound=new BackgroundSound;global.volumeControlBar=new VolumeControlBar(tmpContainer);initFlipSound();
if(isPad()||isPhone())global.handSwipeHelp=new HandSwipeHelp(tmpContainer);if(isPad()||isPhone())global.phoneWeChatShareHelp=new PhoneWeChatShareHelp(tmpContainer);global.flipPageAudio=new FlipByAudio(tmpContainer,global.flipByAudio);isPad()||isPhone()?bookConfig.EnableReportButton&&(global.reportPanel=new PhoneReportPanel(tmpContainer)):bookConfig.EnableReportButton&&(global.reportPanel=new ReportPanel(tmpContainer))}
window.getHeight=function(){return void 0!=window.innerHeight?window.innerHeight:Math.min(document.documentElement.clientHeight,document.body.clientHeight)};window.getWidth=function(){return void 0!=window.innerWidth?window.innerWidth:Math.min(document.documentElement.clientWidth,document.body.clientWidth)};
function winodwDynamicResize(){if(isTouch)$(window).on("orientationchange",function(){onStageResize.delay(200)});$(window).resize(onStageResize);window.setInterval(function(){if(bookConfig.upsideOnMobile()){if(window.getHeight()<window.getWidth()&&windowHeight==window.getHeight()&&windowWidth==window.getWidth()||window.getHeight()>window.getWidth()&&windowHeight==window.getWidth()&&windowWidth==window.getHeight())return}else if(windowHeight==window.getHeight()&&windowWidth==window.getWidth())return;
windowHeight=window.getHeight();windowWidth=window.getWidth();onStageResize()},1E3)}
function scrapURL(){var b=window.location.hash;""!=b&&3<b.length&&"#p="==b.substr(0,3)?window.setTimeout(function(){var c=parseInt(getRealPageNumber(decodeURIComponent(b.substr(3,b.length-3))));gotoPageFun(c);TurnonAutoFlip()},1E3):(gotoPageFun(1),TurnonAutoFlip());0<=window.location.search.indexOf("fullscreen=true")&&function(){toolBar&&toolBar.btnFullscreen&&toolBar.btnFullscreen.trigger(_event._end);$(document).trigger(fullScreenApi.fullScreenEventName)}.delay(this,50)}
var resizeBySearchInput=function(){(isPhone()||isPad())&&global.foldingMenu&&global.foldingMenu.visible&&$("body").width()};
function onStageResize(b){if(!resizeBySearchInput())if(global.resizeBookAfterFlip=!1,bookType==BookType.normal_book&&flipBook&&flipBook.flipping||bookType==BookType.single_book&&singlePageBook.flipping||bookType==BookType.catalog_book&&catalogBook&&catalogBook.flipping)resizeBookAfterFlip=!0;else{bookConfig.upsideOnMobile()?($("html").css({height:window.innerWidth+"px",width:window.innerHeight+"px"}),$("body").css({height:window.innerWidth+"px",width:window.innerHeight+"px"}),tmpContainer.css({height:window.innerWidth+
"px",width:window.innerHeight+"px"})):($("html").css({height:window.innerHeight+"px",width:window.innerWidth+"px"}),$("body").css({height:window.innerHeight+"px",width:window.innerWidth+"px"}),tmpContainer.css({height:window.innerHeight+"px",width:window.innerWidth+"px"}));global.windowWidth=$("body").width();global.windowHeight=$("body").height();resizeToolBar();changeShowBookByWindow();resizePlugin();resizeAttachments();if(global.handSwipeHelp)global.handSwipeHelp.onResize();if(bookConfig.InstructionsButtonVisible&&
global.bookInstructions)global.bookInstructions.onResize();if(global.popZoomBox)global.popZoomBox.onResize();if(global.phoneVideoBox)global.phoneVideoBox.onResize()}}
function resizeAttachments(){global.foldingMenu&&foldingMenu.resize(windowWidth,windowHeight);if(global.phoneSearch)global.phoneSearch.onResize();if(global.phoneShare)global.phoneShare.onResize();if(global.phoneTableOfContent)global.phoneTableOfContent.onResize();if(global.phonePrintBody)global.phonePrintBody.onResize();if(bookConfig.WeChatShareButtonVisible&&global.phoneWeChatShareHelp)global.phoneWeChatShareHelp.onResize();if(global.printBody)printBody.onResize();if(global.helpBody)helpBody.onResize();
if(global.aboutBody)aboutBody.onResize();if(global.sharePanel)sharePanel.onResize();if(global.languagePanel)languagePanel.onResize();if(bookConfig.AnnotationButtonVisible&&global.annotationPannel)global.annotationPannel.onResize();if(global.phoneSettingBody)global.phoneSettingBody.onResize();if(global.thumbnail)thumbnail.onResize();if(global.QRcode)QRcode.onResize();if(global.frmSearch)frmSearch.onResize();if(global.frmTableOfContent)frmTableOfContent.onResize();if(global.bookmark)bookmark.onResize();
global.flipShotButton&&flipShotButton.setPosition();$(".appear_win10").css({"line-height":windowHeight+"px"});$(".appear_win10 .main_dom").css({left:0,top:0})}
function resizeToolBar(){if(global.toolBar&&toolBar.onResize)toolBar.onResize();var b=MiniStyle.isMini();isPhone()||isPad()||(b?(global.toolBar&&global.toolBar.hide(),global.QRbutton&&global.QRbutton.hide(),bookType==BookType.catalog_book&&global.catalogBook.guidBar&&global.catalogBook.guidBar.hide(),global.flipShotButton&&flipShotButton.hide(),MiniStyle.show()):(global.QRbutton&&global.QRbutton.show(),("lite"!=bookConfig.ToolbarViewMode||bookType!=BookType.slide_book&&bookType!=BookType.singleSlide_book&&
bookType!=BookType.catalog_book)&&toolBar.show(),bookType==BookType.catalog_book&&"lite"==bookConfig.ToolbarViewMode.toLowerCase()&&catalogBook.guidBar&&catalogBook.guidBar.show(),global.flipShotButton&&flipShotButton.show(),MiniStyle.hide()))}
function resizeCatalogBook(){if(bookType==BookType.catalog_book&&global.catalogBook)if(bookConfig.FlipDirection)resizeCatalogCalendar();else{var b=catalogBook.getSpace(!1),c=catalogBook.getFitWH(),d=parseInt(c.x/2),f=parseInt(c.y),g=(windowWidth-b.left-b.right-c.x)/2+b.left,b=(windowHeight-b.top-b.bottom-c.y)/2+b.top,h=-c.x/4,c=c.x/4,k={},l=0;!0==bookConfig.retainBookCenter&&(k=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(k)&&BookInfo.isLeftPage(k,!0)&&(l=c),BookInfo.isCoverPage(k)&&!BookInfo.isLeftPage(k,
!0)&&(l=h),k={tran:{x:l,y:0},scale:1,origin:{x:0,y:0}});k.top=b;k.left=g;catalogBook.setCSS(k);catalogBook.onResize(d,f);catalogBook.resetZoomConfig()}}
function resizeCatalogCalendar(){var b=catalogBook.getSpace(!1),c=catalogBook.getFitWH(),d=parseInt(c.x),f=parseInt(c.y/2),g=(windowWidth-b.left-b.right-c.x)/2+b.left,b=(windowHeight-b.top-b.bottom-c.y)/2+b.top,h=-c.y/4,c=c.y/4,k={},l=0;!0==bookConfig.retainBookCenter&&(k=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(k)&&BookInfo.isLeftPage(k,!0)&&(l=c),BookInfo.isCoverPage(k)&&!BookInfo.isLeftPage(k,!0)&&(l=h),k={tran:{x:0,y:l},scale:1,origin:{x:0,y:0}});k.top=b;k.left=g;catalogBook.setCSS(k);
catalogBook.onResize(d,f);catalogBook.resetZoomConfig()}
function resizeFlipBook(){if(bookType==BookType.normal_book||bookType==BookType.single_book)if(bookConfig.FlipDirection)resizeFlipCalendar();else{if(global.flipBook){var b=flipBook.getSpace(!1),c=flipBook.getFitWH(),d=Math.round(c.x/2),f=Math.round(c.y),g=(windowWidth-b.left-b.right-c.x)/2+b.left,b=(windowHeight-b.top-b.bottom-c.y)/2+b.top,h=-c.x/4,c=c.x/4,k={tran:{x:0,y:0},scale:1,origin:{x:0,y:0}},l=0;!0==bookConfig.retainBookCenter&&(k=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(k)&&BookInfo.isLeftPage(k,
!0)&&(l=c),BookInfo.isCoverPage(k)&&!BookInfo.isLeftPage(k,!0)&&(l=h),k={tran:{x:parseInt(l),y:0},scale:1,origin:{x:0,y:0}});k.top=b;k.left=g;useTheAliCloudChart(d,f);flipBook.setCSS(k);flipBook.onResize(d,f);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(d=windowWidth,f=windowHeight,b=g=0):(c=singlePageBook.getFitWH(),d=c.x,f=c.y,b=singlePageBook.getSpace(!0),g=(windowWidth-b.left-b.right-d)/2+b.left,b=(windowHeight-b.top-b.bottom-
f)/2+b.top),singlePageBook.onResize(d,f),singlePageBook.setCSS({top:b,left:g}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}}
function resizeFlipCalendar(){if(global.flipBook){var b=flipBook.getSpace(!1),c=flipBook.getFitWH(),d=parseInt(c.x),f=parseInt(c.y/2),g=(windowWidth-b.left-b.right-c.x)/2+b.left,b=(windowHeight-b.top-b.bottom-c.y)/2+b.top,h=-c.y/4,c=c.y/4,k={},l=0;!0==bookConfig.retainBookCenter&&(k=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(k)&&BookInfo.isLeftPage(k,!0)&&(l=c),BookInfo.isCoverPage(k)&&!BookInfo.isLeftPage(k,!0)&&(l=h),k={tran:{x:0,y:l},scale:1,origin:{x:0,y:0}});k.top=b;k.left=g;useTheAliCloudChart(d,
f);flipBook.setCSS(k);flipBook.onResize(d,f);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(d=windowWidth,f=windowHeight,b=g=0):(c=singlePageBook.getFitWH(),d=c.x,f=c.y,b=singlePageBook.getSpace(!0),g=(windowWidth-b.left-b.right-d)/2+b.left,b=(windowHeight-b.top-b.bottom-f)/2+b.top),singlePageBook.onResize(d,f),singlePageBook.setCSS({top:b,left:g}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}
function resizeSlideBook(){if(global.slideBook)slideBook.onResize();if(global.singleSlideBook)singleSlideBook.onResize()}
function changeShowBookByWindow(){var b,c,d=!1;bookType==BookType.single_book&&windowWidth>=windowHeight&&bookConfig.showDoublePage&&(bookType=BookType.normal_book,changeShowBook(0),c=singlePageBook.currentPageIndex,d=b=!0);bookType==BookType.singleSlide_book&&windowWidth>=windowHeight&&bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),c=singleSlideBook.getRealPageIndex(),d=b=!0);bookType==BookType.slide_book&&windowWidth<windowHeight&&(bookType=BookType.singleSlide_book,
changeShowBook(bookType),c=slideBook.getRealPageIndex(),b=!1,d=!0);bookType==BookType.normal_book&&windowWidth<windowHeight&&(bookType=BookType.single_book,changeShowBook(1),c=flipBook.currentPageIndex,b=!1,d=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();d&&(gotoPageFun(c),setCurrentIndexTextField(c,b),global.thumbnail&&thumbnail.clearHighLight(),global.thumbnail&&thumbnail.setHighLight(c))}
function initEvents(){$(bookContainer).bind("click touchstart",function(b){b.target==b.currentTarget&&onWindowClick(b)});$(bookContainer).bind("touchstart",function(b){b.preventDefault()});$(window).bind("keydown",function(b){onWindowKeyDown(b)});initSoundEvents();bookConfig.isStopMouseMenu&&(bookContainer.bind("mousedown",function(b){3==b.which&&(global.customMunuBox||(global.customMunuBox=new CustomMunu(tmpContainer)),global.customMunuBox.show(b))}.bind(this)),document.oncontextmenu=function(b){return!1},
window.onkeydown=window.onkeyup=window.onkeypress=function(){if(123==window.event.keyCode)return window.event.returnValue=!1})}function initSoundEvents(){global.flipAudio&&global.flipAudio.bind("play",function(){global.flipAudio[0].hasPlayed=!0});var b=_event._down;if(isPhone()||isPad())b=_event._down+" "+_event._move+" "+_event._end;$("body").bind(b,SoundEvents)}
function unbindSoundEvent(){var b=_event._down;if(isPhone()||isPad())b=_event._down+" "+_event._move+" "+_event._end;$("body").unbind(b,SoundEvents)}
function SoundEvents(){global.flipAudio&&global.flipAudio[0].paused&&!global.flipAudio[0].hasPlayed&&bookConfig.FlipSound&&(global.flipAudio[0].play(),global.flipAudio[0].pause());global.bgSound&&(global.bgSound.prepareAudios(),isPlaying&&window.playBackgroundSound?global.bgSound.playCurrentAudio():global.bgSound.pauseCurrentAudio());!window.playBackgroundSound&&window.currentMedia&&window.currentMedia.playMedia();global.flipPageAudio.playByTouch()}
function onWindowClick(b){if(b&&2!=b.button){var c=BookInfo.getBook();if(!(c.status_zoom||c.isZomming||c.status_resize)){b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b];var c=BookInfo.getBook().getBook().offset(),d=BookInfo.getBook().getBook().outerWidth();b[0].pageX>c.left+d?rightToLeft?previousPageFun():nextPageFun():b[0].pageX<c.left&&(rightToLeft?nextPageFun():previousPageFun())}}}
function onWindowKeyDown(b){if(b&&!fullScreenApi.isFullScreen()){var c=b.keyCode;Log.info("key down[%d]",c);c==KEY_CODE_LEFT&&(rightToLeft?nextPageFun():previousPageFun());c==KEY_CODE_RIGHT&&(rightToLeft?previousPageFun():nextPageFun());if(c==KEY_CODE_HOME||c==KEY_CODE_PAGEUP)rightToLeft?lastPageFun():firstPageFun();if(c==KEY_CODE_END||c==KEY_CODE_PAGEDOWN)rightToLeft?firstPageFun():lastPageFun();b.ctrlKey&&b.altKey&&(c==KEY_CODE_HOME||c==KEY_CODE_UP)&&eval(DeString("b29ec71982dc6d9062a0b77ce9ccc59581fd3c4a4fa9bd325e6f5ae7fbf39a0907064bb455b1bade956bc0f3e7c55d348fbaa363c39f7bef7a0648674fd1f688786b79bd6ad03215d634a4736f3f971501f664a09b820932d9bc83a9c2159964e5c571b3ebe4ceb214fd31bb1287fe5449f303a6d5531165e1386ba5aa8d0a3788d4a351d120a43a59c002d761ef"));
b.ctrlKey&&b.altKey&&c==KEY_CODE_A+1&&(b=synthesizingBrowserInformation(),console.log(Instance.JSON(b)))}}
function synthesizingBrowserInformation(){var b="",c="";$.browser.mozilla&&(b="mozilla");$.browser.firefox&&(b="firefox");$.browser.msie&&(b="msie");$.browser.edge&&(b="edge");$.browser.opera&&(b="opera");$.browser.chrome&&(b="chrome");$.browser.uc&&(b="uc");$.browser.safari&&(b="safari");$.browser.wechat&&(b="wechat");switch($.browser.device){case 0:c="DEVICE_PC";break;case 1:c="DEVICE_PAD";break;case 2:c="DEVICE_PHONE"}return{system_name:$.system.name,system_version:$.system.version,browser_name:b,
browser_version:$.browser.version,device:c,isApp:$.browser.app,build:BUILD_DATE}}$(document).on("visibilitychange",function(){document.hidden?(global.bgSound&&isPlaying&&window.playBackgroundSound&&global.bgSound.pauseCurrentAudio(),!window.playBackgroundSound&&window.currentMedia&&window.currentMedia.pauseMedia()):(global.bgSound&&isPlaying&&window.playBackgroundSound&&global.bgSound.playCurrentAudio(),!window.playBackgroundSound&&window.currentMedia&&window.currentMedia.playMedia())});Class("TaskList",{create:function(){this.taskList=[];this.taskListId=[];this.finishId=[];this.largeLength=0;this.performingTasks=!1;this.taskId=0},unShiftTask:function(b){0<=this.taskListId.indexOf(b.id)||0<=this.finishId.indexOf(b.id)||(void 0==b.id&&(b.id=this.tastkId,this.taskId++),this.taskList.push(b),this.taskListId.push(b.id),this.cutTask(),this.taskInterval||this.performTaskList())},cutTask:function(){var b=this.taskList.length;if(!(b<=this.largeLength))for(var c=0;c<b-this.largeLength;c++)this.taskList.remove(0),
this.taskListId.remove(0)},performTaskList:function(b){this.taskInterval||(this.taskInterval=window.setInterval(function(){var b=this.taskList[0];b?(b(),this.finishId.push(b.id),this.taskList.remove(0),this.taskListId.remove(0)):(window.clearInterval(this.taskInterval),this.taskInterval=void 0)}.bind(this),60))},setLargeLength:function(b){this.largeLength=b}});Class("TextBubble",{$parent:null,color:null,textColor:null,text:"",padding:6,margin:2,$bubble:null,$content:null,$text:null,statics:{LEFT:1,TOP:2,RIGHT:3,BOTTOM:4,HORIZONTAL:5,VERTICAL:6},create:function(b){b=b||{};this.$parent=b.parent||$("body");this.color=Color(b.color)||Color("black");this.textColor=Color(b.textColor)||Color("white");this.text=b.text||"";this.padding=b.padding||6;this.margin=b.margin||2;this.direction=b.direction||TextBubble.VERTICAL;this.init()},init:function(){this.$bubble=
$("<div class='text_bubble' style='display:none'></div>");this.$content=$("<div class='text_bubble_content'></div>");this.$text=$("<div class='text_bubble_text'></div>");this.$parent.append(this.$bubble);this.$bubble.append(this.$content);this.$content.append(this.$text);this.$content.css({padding:this.padding+"px","background-color":this.color.rgba()});this.$text.css({color:this.textColor.toString()});this.$text.text(this.text)},setStyle:function(b){"string"==typeof b&&this.$content.addClass(b);
"object"==typeof b&&this.$content.css(b)},setText:function(b){this.text=b;this.$text&&this.$text.text(this.text)},show:function(b){this.$bubble&&this.$bubble.css({display:"block"});switch(this.direction){case TextBubble.LEFT:this.showLeft(b);break;case TextBubble.TOP:this.showTop(b);break;case TextBubble.RIGHT:this.showRight(b);break;case TextBubble.BOTTOM:this.showBottom(b);break;case TextBubble.HORIZAONTAL:this.showHorizaontal(b);break;case TextBubble.VERTICAL:this.showVertical(b)}},showLeft:function(b){var c=
this.getBubbleWidth();this.bubbleLeft=b.left-c-this.margin;c=this.getBubbleHeight();this.bubbleTop=b.top+b.height/2-c/2;this.bubbleTop+c>this.$parent.height()?this.bubbleTop=this.$parent.height()-c-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showRight:function(b){this.getBubbleWidth();this.bubbleLeft=b.left+b.width+this.margin;var c=this.getBubbleHeight();this.bubbleTop=b.top+b.height/2-c/2;this.bubbleTop+c>
this.$parent.height()?this.bubbleTop=this.$parent.height()-c-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showTop:function(b){var c=this.getBubbleWidth();this.bubbleLeft=b.left+b.width/2-c/2;this.bubbleLeft+c>this.$parent.width()?this.bubbleLeft=this.$parent.width()-c-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);c=this.getBubbleHeight();this.bubbleTop=b.top-c-this.margin;this.$bubble.css({left:this.bubbleLeft+
"px",top:this.bubbleTop+"px"})},showBottom:function(b){var c=this.getBubbleWidth();this.bubbleLeft=b.left+b.width/2-c/2;this.bubbleLeft+c>this.$parent.width()?this.bubbleLeft=this.$parent.width()-c-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);this.getBubbleHeight();this.bubbleTop=b.top+b.height+this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showVertical:function(b){var c=this.getBubbleWidth();this.bubbleLeft=b.left+b.width/2-c/2;this.bubbleLeft+
c>this.$parent.width()?this.bubbleLeft=this.$parent.width()-c-this.margin:this.bubbleLeft=Math.max(this.margin,this.bubbleLeft);c=this.getBubbleHeight();b.top+b.height+c>this.$parent.height()?this.bubbleTop=b.top-c-this.margin:this.bubbleTop=b.top+b.height+this.margin;this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},showHorizontal:function(b){var c=this.getBubbleWidth();b.left+b.width+c>this.$parent.width()?this.bubbleLeft=b.left-c-this.margin:this.bubbleLeft=b.left+b.width+
this.margin;c=this.getBubbleHeight();this.bubbleTop=b.top+b.height/2-c/2;this.bubbleTop+c>this.$parent.height()?this.bubbleTop=this.$parent.height()-c-this.margin:this.bubbleTop=Math.max(this.margin,this.bubbleTop);this.$bubble.css({left:this.bubbleLeft+"px",top:this.bubbleTop+"px"})},getBubbleWidth:function(){return this.$text.width()+2*this.padding},getBubbleHeight:function(){return this.$text.height()+2*this.padding},hide:function(){this.$bubble&&this.$bubble.css({display:"none"})}});
Class("ArrowTextBubble",{create:function(b){b=b||{};this.arrowWidth=b.arrowWidth||8;this.arrowHeight=b.arrowHeight||4;this._super(b)},setRightArrowStyle:function(b,c){b.css({"border-left":"0px solid transparent","border-top":this.arrowHeight/2+"px solid transparent","border-right":this.arrowWidth+"px solid "+c.toString(),"border-bottom":this.arrowHeight/2+"px solid transparent"})},setLeftArrowStyle:function(b,c){b.css({"border-left":this.arrowWidth+"px solid "+c.toString(),"border-top":this.arrowHeight/
2+"px solid transparent","border-right":"0px solid transparent","border-bottom":this.arrowHeight/2+"px solid transparent"})},setBottomArrowStyle:function(b,c){b.css({"border-left":this.arrowWidth/2+"px solid transparent","border-top":"0px solid transparent","border-right":this.arrowWidth/2+"px solid transparent","border-bottom":this.arrowHeight+"px solid "+c.toString()})},setTopArrowStyle:function(b,c){b.css({"border-left":this.arrowWidth/2+"px solid transparent","border-top":this.arrowHeight+"px solid "+
c.toString(),"border-right":this.arrowWidth/2+"px solid transparent","border-bottom":"0px solid transparent"})}}).extend("TextBubble");
Class("SolidArrowTextBubble",{$arrow:null,init:function(){this._super();this.$arrow=$("<div class='text_bubble_arrow'></div>");this.$bubble.append(this.$arrow)},showLeft:function(b){this._super(b);this.getBubbleHeight();b=b.top+b.height/2-this.bubbleTop-this.arrowHeight/2;var c=this.$text.width()+2*this.padding;this.$content.css({"margin-left":"0px"});this.setLeftArrowStyle(this.$arrow,this.color);this.$arrow.css({top:b+"px",left:c+"px"})},showTop:function(b){this._super(b);this.getBubbleWidth();
b=b.left+b.width/2-this.bubbleLeft-this.arrowWidth/2;var c=this.$text.height()+2*this.padding;this.$content.css({"margin-top":"0px"});this.setTopArrowStyle(this.$arrow,this.color);this.$arrow.css({left:b+"px",top:c+"px"})},showRight:function(b){this._super(b);this.getBubbleHeight();b=b.top+b.height/2-this.bubbleTop-this.arrowHeight/2;this.$text.width();this.$content.css({"margin-left":this.arrowWidth+"px"});this.setRightArrowStyle(this.$arrow,this.color);this.$arrow.css({top:b+"px",left:"0px"})},
showBottom:function(b){this._super(b);this.getBubbleWidth();b=b.left+b.width/2-this.bubbleLeft-this.arrowWidth/2;this.$text.height();this.$content.css({"margin-top":this.arrowHeight+"px"});this.setBottomArrowStyle(this.$arrow,this.color);this.$arrow.css({left:b+"px",top:"0px"})},showVertical:function(b){this._super(b);this.getBubbleWidth();var c=b.left+b.width/2-this.bubbleLeft-this.arrowWidth/2,d=this.$text.height()+2*this.padding;this.bubbleTop<b.top?(this.$content.css({"margin-top":"0px"}),this.setTopArrowStyle(this.$arrow,
this.color),this.$arrow.css({left:c+"px",top:d+"px"})):(this.$content.css({"margin-top":this.arrowHeight+"px"}),this.setBottomArrowStyle(this.$arrow,this.color),this.$arrow.css({left:c+"px",top:"0px"}))},showHorizontal:function(b){this._super(b);this.getBubbleHeight();var c=b.top+b.height/2-this.bubbleTop-this.arrowHeight/2,d=this.$text.width()+2*this.padding;this.bubbleLeft<b.left?(this.$content.css({"margin-left":"0px"}),this.setLeftArrowStyle(this.$arrow,this.color),this.$arrow.css({top:c+"px",
left:d+"px"})):(this.$content.css({"margin-left":this.arrowWidth+"px"}),this.setRightArrowStyle(this.$arrow,this.color),this.$arrow.css({top:c+"px",left:"0px"}))},getBubbleHeight:function(){return this.direction==TextBubble.VERTICAL||this.direction==TextBubble.TOP||this.direction==TextBubble.BOTTOM?this.$text.height()+2*this.padding+this.arrowHeight:this.$text.height()+2*this.padding},getBubbleWidth:function(){return this.direction==TextBubble.HORIZONTAL||this.direction==TextBubble.LEFT||this.direction==
TextBubble.RIGHT?this.$text.width()+2*this.padding+this.arrowWidth:this.$text.width()+2*this.padding}}).extend("ArrowTextBubble");
Class("HollowArrowTextBubble",{$arrow:null,$filled_arrow:null,create:function(b){b=b||{};this.filledColor=b.filledColor||Color("white");this._super(b)},init:function(){this._super();this.$arrow=$("<div class='text_bubble_arrow' style='z-index:1'></div>");this.$filled_arrow=$("<div class='text_bubble_arrow' style='z-index:2'></div>");this.$bubble.append(this.$arrow);this.$bubble.append(this.$filled_arrow);this.$content.css({padding:this.padding-1+"px",border:"1px solid "+this.color.toString(),"background-color":this.filledColor.toString()})},
show:function(b){this._super(b);this.getBubbleWidth();var c=b.left+b.width/2-this.bubbleLeft-this.arrowWidth/2,d=this.$text.height()+2*this.padding;this.bubbleTop<b.top?(this.$content.css({"margin-top":"0px"}),this.setBottomArrowStyle(this.$arrow,this.color),this.$arrow.css({left:c+"px",top:d+"px"}),this.setBottomArrowStyle(this.$filled_arrow,this.filledColor),this.$filled_arrow.css({left:c+"px",top:d-2+"px"})):(this.$content.css({"margin-top":this.arrowHeight+"px"}),this.setTopArrowStyle(this.$arrow,
this.color),this.$arrow.css({left:c+"px",top:"0px"}),this.setTopArrowStyle(this.$filled_arrow,this.filledColor),this.$filled_arrow.css({left:c+"px",top:"2px"}))},getBubbleHeight:function(){return this.$text.height()+2*this.padding+this.arrowHeight}}).extend("ArrowTextBubble");Class("WeChatShare",{create:function(b){b=b||{};this.arrowWidth=b.arrowWidth||8;this.arrowHeight=b.arrowHeight||8;this._super(b)},init:function(){this.visible=!1;this.$bubble=$("<div class='text_bubble' style='display:none'></div>");this.$content=$("<div class='text_bubble_content'></div>");this.$text=$("<div style='width:200px;height:230px;'></div>");var b=$("<div>\u5fae\u4fe1\u626b\u4e00\u626b</div>"),c=$("<div></div>");c.qrcode({width:180,height:180,text:window.location.href});this.$arrow=$("<canvas class='text_bubble_arrow' width = '14' height ='12'></canvas>");
this.$bubble.append(this.$arrow);c.css({position:"absolute",left:"20px",top:"50px","image-redering":"pixelated"});b.css({"font-size":"20px","font-weight":"bold",margin:"0 auto","text-align":"center",color:this.textColor});this.$text.append(b).append(c);this.$parent.append(this.$bubble);this.$bubble.append(this.$content);this.$content.append(this.$text);this.$content.css({padding:this.padding+"px","background-color":"#fff","-webkit-box-shadow":"0 0 3px #111 inset","-o-box-shadow":"0 0 3px #111 inset",
"-moz-box-shadow":"0 0 3px #111 inset","-ms-box-shadow":"0 0 3px #111 inset","box-shadow":"0 0 3px #111 inset"});this.initBorder();this.enterEvent()},initBorder:function(){var b=this.$arrow[0].getContext("2d");b.beginPath();b.fillStyle="#fff";b.moveTo(7,0);b.lineTo(0,12);b.lineTo(14,12);b.fill();b.closePath();b.lineWidth=1;b.beginPath();b.strokeStyle="#AFAFAF";b.moveTo(7,0);b.lineTo(0,12);b.shadowOffsetX=1;b.shadowBlur=1;b.shadowColor="#AFAFAF";b.stroke();b.closePath();b.beginPath();b.strokeStyle=
"#AFAFAF";b.moveTo(7,0);b.lineTo(14,12);b.shadowOffsetX=-1;b.shadowBlur=1;b.shadowColor="#AFAFAF";b.stroke();b.closePath()},showLeft:function(b){this._super(b);this.$arrow.css({border:"none","margin-left":"-3px",transform:"rotateZ(90deg)","-webkit-transform":"rotateZ(90deg)","-o-transform":"rotateZ(90deg)","-moz-transform":"rotateZ(90deg)","-ms-transform":"rotateZ(90deg)"})},showTop:function(b){this._super(b);this.$arrow.css({border:"none","margin-top":"-2px",transform:"rotateZ(180deg)","-webkit-transform":"rotateZ(180deg)",
"-o-transform":"rotateZ(180deg)","-moz-transform":"rotateZ(180deg)","-ms-transform":"rotateZ(180deg)"})},showRight:function(b){this._super(b);this.$arrow.css({border:"none","margin-left":"-1px",transform:"rotateZ(-90deg)","-webkit-transform":"rotateZ(-90deg)","-o-transform":"rotateZ(-90deg)","-moz-transform":"rotateZ(-90deg)","-ms-transform":"rotateZ(-90deg)"})},showBottom:function(b){this._super(b);this.$arrow.css({border:"none"})},enterEvent:function(){this.$bubble.bind("mouseenter",function(){this.visible=
!0}.bind(this));this.$bubble.bind("mouseleave",function(){this.visible=!1;this.hide()}.bind(this))},setDirection:function(b){b&&(this.direction=b)},hide:function(){this.$bubble&&setTimeout(function(){this.visible||this.$bubble.fadeOut("100",function(){this.$bubble.css({display:"none"})}.bind(this))}.bind(this),200)}}).extend("SolidArrowTextBubble");
Class("PhoneWeChatShareHelp",{create:function(b){this.container=$("<div class='PhoneWeChatShareHelp'></div>");this.image=$("<img/>");this.initCss();this.container.append(this.image);b.append(this.container);this.initEvent()},initCss:function(){this.setSrc(this.image,"phoneWeChatShareHelp");this.container.css({display:"none",background:"rgba(11,11,11,0.9)",width:windowWidth+"px",height:windowHeight+"px",position:"absolute","z-index":"10001"});this.image.css({position:"absolute",right:"7%",top:"2%",
width:"200px",height:"300px","z-index":"1"})},setSrc:function(b,c){phone_toolbar_icons&&phone_toolbar_icons[c]?b.attr("src","data:image/png;base64,"+phone_toolbar_icons[c]):b.attr("src",phoneBaseURL+c+".png")},onResize:function(){this.container.css({width:windowWidth+"px",height:windowHeight+"px"})},initEvent:function(){this.container.bind(_event._down,function(){this.hide()}.bind(this))},show:function(){(isPhone()||isPad())&&this.container.css({width:windowWidth+"px",height:windowHeight+"px",display:"block"})},
hide:function(){(isPhone()||isPad())&&this.container.css({display:"none"})}});Class("ToolbarButton",{$button:null,colorChanged:!1,fontColorChanged:!1,callback:null,color:null,fontColor:null,$parent:null,caption:"",title:null,hint:!0,language:null,create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<div class='button'></div>");this.ButtonClickEvent=this.onButtonClick.bind(this)},setCallback:function(b){this.callback=b},onButtonClick:function(b){this.onClick(b);this.executeCallback();this.hideTitle();if(b)return b.stopPropagation&&
b.stopPropagation(),b.cancelBubble&&(b.cancelBubble=!0),!1},onClick:virtual_function,executeCallback:function(){this.callback&&this.callback instanceof Function&&this.callback(this)},click:function(b){this.onButtonClick(b)},setSrc:function(b,c){var d=$("<img style='pointer-events:none;'></img>");this.$caption=$("<span style='pointer-events:none;'></span>");c&&""!=c?d.attr("src",c):toolbar_icons&&toolbar_icons[b]?d.attr("src","data:image/png;base64,"+toolbar_icons[b]):d.attr("src",uiBaseURL+b+".png");
this.$button.empty();this.$button.append(d);this.$button.append(this.$caption);this.fontColorChanged=this.colorChanged=!1},changeColor:function(b){this.changeIconColor(b);this.changeCaptionColor(b)},changeIconColor:function(b){if(this.color||b)b||(b=this.color.toString()),this.$parent&&(this.colorChanged||this.$button.changeButtonColor(Color(b).toString(),!1,function(){this.colorChanged=!0}.bind(this)))},changeCaptionColor:function(b){if(this.fontColor||b)b||(b=this.fontColor.toString()),this.fontColorChanged||
(this.$caption&&this.$caption.css("color",Color(b).toString()),this.fontColorChanged=!0)},reflection:function(){reflection&&reflection(this.$button)},initLanguage:function(b,c){this.language={key:b,defaultValue:c};this.changeLanguage()},changeLanguage:function(){if(this.language){var b=getLanguage(this.language.key,this.language.defaultValue);this.setCaption(b)}},setCaption:function(b){this.caption=b;this.$caption.text(b);this.title?this.title.setText(b):this.setTitle(b)},setTitle:function(b){"string"==
typeof b?(this.$button.attr("title",b),this.title=null):(this.$button.attr("title",""),this.title=b)},showTitle:function(b){b&&"CANVAS"==b.target.tagName.toUpperCase()||!this.hint||!this.title||(this.mouse_is_enter=!0,this.titleTimer&&window.clearTimeout(this.titleTimer),this.titleTimer=function(){if(this.mouse_is_enter){var c={left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:this.width(),height:this.height()};this.title.show(c)}}.delay(this,800))},hideTitle:function(){this.mouse_is_enter=!1;this.title&&
this.title.hide()},addTo:function(b){this.$parent!=b&&(this.$parent&&this.freedom(),this.$button.appendTo(b),this.$parent=b,this.addEvents())},addEvents:function(){this.$button.bind("click",this.ButtonClickEvent);this.$button.bind("mouseenter",this.showTitle.bind(this));this.$button.bind("mouseleave",this.hideTitle.bind(this));this.$button.bind("mousedown pointerdown touchstart",function(b){toolBar.enterOption&&window.clearTimeout(toolBar.enterOption);b.stopPropagation()});this.$button.css("cursor",
"pointer")},freedom:function(){this.$button.remove();this.$parent=null;this.$button.unbind()},setPosition:function(b,c){this.$button.css({left:b+"px",top:c+"px"})},setWidth:function(b){this.$button.css({width:b+"px"})},setHeight:function(b){this.$button.css({height:b+"px"})},left:function(){return this.$button.left()},top:function(){return this.$button.top()},width:function(){return this.$button.width()},height:function(){return this.$button.height()}});
Class("ButtonBevel",{color:null,$body:null,$parent:null,statics:{vertical:0,horizontal:1},create:function(b,c){this.color=Color(b);this.direction=void 0==c?ButtonBevel.vertical:c;this.init()},init:function(){this.$body=$("<div name='bevel'></div>");var b=this.color.reduce(20),c=this.color.add(20);this.direction==ButtonBevel.vertical?(this._width=2,this._height=30,this.$body.css({position:"absolute",width:"1px",height:"30px","background-color":b,"border-right":"1px solid "+c})):(this._width=30,this._height=
2,this.$body.css({position:"absolute",width:"30px",height:"1px","background-color":b,"border-bottom":"1px solid "+c}))},freedom:function(){this.$body.remove();this.$parent=null},addTo:function(b){this.$parent!=b&&(this.$parent&&this.freedom(),this.$body.appendTo(b),this.$parent=b)},setPosition:function(b,c){this.$body.css({left:b+"px",top:c+"px"})},setWidth:function(b){this._width=b;if(this.direction==ButtonBevel.vertical){var c=b%2;this.$body.css({width:(b+c)/2+"px","border-right-width":(b-c)/2+
"px"})}else this.$body.css({width:b+"px"})},setHeight:function(b){this._height=b;if(this.direction==ButtonBevel.vertical)this.$body.css({height:b+"px"});else{var c=b%2;this.$body.css({height:(b+c)/2+"px","border-bottom-width":(b-c)/2+"px"})}},left:function(){return this.$body.left()},top:function(){return this.$body.top()},width:function(){return this._width},height:function(){return this._height}});
Class("FirstPageButton",{create:function(){this._super();rightToLeft?this.setSrc("Last",bookConfig.LastButtonIcon):this.setSrc("First",bookConfig.FirstButtonIcon);this.initLanguage("btnFirstPage","First")},onClick:function(b){firstPageFun()}}).extend("ToolbarButton");Class("LastPageButton",{create:function(){this._super();rightToLeft?this.setSrc("First",bookConfig.FirstButtonIcon):this.setSrc("Last",bookConfig.LastButtonIcon);this.initLanguage("btnLastPage","Last")},onClick:function(b){lastPageFun()}}).extend("ToolbarButton");
Class("PreviousPageButton",{create:function(){this._super();rightToLeft?this.setSrc("next",bookConfig.NextButtonIcon):this.setSrc("prev",bookConfig.PreviousButtonIcon);this.initLanguage("btnPrePage","Previous")},onClick:function(b){previousPageFun()}}).extend("ToolbarButton");Class("NextPageButton",{create:function(){this._super();rightToLeft?this.setSrc("prev",bookConfig.PreviousButtonIcon):this.setSrc("next",bookConfig.NextButtonIcon);this.initLanguage("btnNextPage","Next")},onClick:function(b){nextPageFun()}}).extend("ToolbarButton");
Class("HomeButton",{create:function(){this._super();this.setSrc("home",bookConfig.HomeButtonIcon);this.initLanguage("btnGoToHome","Home")},onClick:function(b){"%first page%"==bookConfig.HomeURL.toLowerCase()?firstPageFun():void 0!=bookConfig.HomeURL&&""!=bookConfig.HomeURL&&(b=bookConfig.HomeURL,b.startsWith("%")&&b.endsWith("%")?(b=getRealPageNumber(b.slice(1,b.length-1)),gotoPageFun(b)):(b=getRealURL(b),window.open(b,bookConfig.OpenWindow)))}}).extend("ToolbarButton");
Class("ShareEmailButton",{create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<a target="+bookConfig.OpenWindow+" href='' class='button' style='text-decoration:none;'></a>");var b="",c=bookConfig.btnShareWithEmailBody||"",d=bookConfig.btnShareWithEmailSubject||"";thumb=" "+window.location.href.substring(0,share_url.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg ";c=c.replaceAll("{thumb}",thumb,!0);if(0<=c.indexOf("{link_no_page}"))var f=
window.location.href.replace(window.location.hash,""),c=c.replaceAll("{link_no_page}",f,!0);else 0<=c.indexOf("{link}")&&(c=c.replaceAll("{link}",window.location.href,!0));c=c.replaceAll("{title}",window.document.title,!0);this.$button.attr("href",c?d?"mailto:?subject="+d+"&body="+c:"mailto:?body="+c:b+("mailto:?subject="+d));this.setSrc("emailButton",bookConfig.EmailButtonIcon);this.initLanguage("btnShareEmail","Share by Email")},onClick:function(b){}}).extend("ToolbarButton");
Class("HelpButton",{create:function(){this._super();this.setSrc("Help",bookConfig.HelpButtonIcon);this.initLanguage("btnHelp","Help")},onClick:function(b){helpBody&&helpBody.showOrHide({left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})}}).extend("ToolbarButton");
Class("ThumbnailButton",{create:function(){this._super();this.setSrc("thumbnails",bookConfig.ThumbnailButtonIcon);this.initLanguage("btnThumb","Thumbnails")},onClick:function(b){thumbnail&&thumbnail.showOrHide()}}).extend("ToolbarButton");
Class("ShareButton",{create:function(){this._super();this.setSrc("sharethis",bookConfig.ShareButtonIcon);this.initLanguage("btnSocialShare","Share")},onClick:function(b){sharePanel.showOrHide({left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})}}).extend("ToolbarButton");Class("SearchButton",{create:function(){this._super();this.setSrc("search",bookConfig.SearchButtonIcon);this.initLanguage("btnSearch","Search")},onClick:function(b){frmSearch&&frmSearch.showOrHide()}}).extend("ToolbarButton");
Class("DownloadButton",{create:function(){this._super();this.setSrc("download",bookConfig.DownloadButtonIcon);this.initLanguage("btnDownload","Download")},onClick:function(b){""!=bookConfig.DownloadURL&&window.open(bookConfig.DownloadURL,"_blank")}}).extend("ToolbarButton");Class("BookmarkButton",{create:function(){this._super();this.setSrc("bookmark",bookConfig.BookmarkButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("AnnotMark","bookmark"):this.initLanguage("btnBookMark","Bookmark")},onClick:function(b){bookmark.showOrHide()}}).extend("ToolbarButton");
Class("TableOfContentButton",{create:function(){this._super();this.setSrc("tableOfContent",bookConfig.TableOfContentButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("btnBookMark","Table Of Contents"):this.initLanguage("btnTableOfContent","Table Of Contents")},onClick:function(b){frmTableOfContent&&frmTableOfContent.showOrHide()}}).extend("ToolbarButton");
Class("LanguageButton",{create:function(){this._super();this.setSrc("languageChange",bookConfig.LanguageButtonIcon);this.initLanguage("btnLanguage","Language change")},onClick:function(b){global.languagePanel&&languagePanel.showOrHide()}}).extend("ToolbarButton");Class("PrintButton",{create:function(){this._super();this.setSrc("print",bookConfig.PrintButtonIcon);this.initLanguage("btnPrint","Print")},onClick:function(b){printBody&&printBody.showOrHide()}}).extend("ToolbarButton");
Class("AboutButton",{create:function(){this._super();this.setSrc("about",bookConfig.AboutButtonIcon);this.initLanguage("btnAbout","About")},onClick:function(b){aboutBody&&aboutBody.showOrHide({left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})}}).extend("ToolbarButton");
Class("MoreButton",{create:function(){this._super();this.setSrc("moreBar");this.initLanguage("btnMore","More")},onClick:function(b){moreBar.visible?moreBar.hide():(b={left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:this.width(),height:this.height()},moreBar.show(b))}}).extend("ToolbarButton");Class("AnnotationButton",{create:function(){this._super();this.setSrc("annotation",bookConfig.AnnotationButtonIcon);this.initLanguage("btnNote","Annotation")},onClick:function(b){global.annotationPannel.showOrHide()}}).extend("ToolbarButton");
Class("VideoButton",{create:function(){this._super();this.setSrc("videoGallery",bookConfig.VideoButtonIcon);this.initLanguage("btnVideo","Video Gallery")},onClick:function(b){videoGallery&&videoGallery.showOrHide()}}).extend("ToolbarButton");Class("SlideshowButton",{create:function(){this._super();this.setSrc("photoGallery",bookConfig.SlideshowButtonIcon);this.initLanguage("btnSlideShow","Slideshow")},onClick:function(b){photoGallery.showOrHide()}}).extend("ToolbarButton");
Class("BackwardButton",{create:function(){this._super();rightToLeft?this.setSrc("forward",bookConfig.ForwardButtonIcon):this.setSrc("backward",bookConfig.BackwardButtonIcon);this.initLanguage("btnPageBack","Backward")},onClick:function(b){flipHistory.backward()}}).extend("ToolbarButton");
Class("ForwardButton",{create:function(){this._super();rightToLeft?this.setSrc("backward",bookConfig.BackwardButtonIcon):this.setSrc("forward",bookConfig.ForwardButtonIcon);this.initLanguage("btnPageForward","Forward")},onClick:function(b){flipHistory.forward()}}).extend("ToolbarButton");Class("StateSynchronous",{buttons:null,statics:{instance:function(){this.synchroner||(this.synchroner=new StateSynchronous);return this.synchroner}},create:function(){this.buttons=new ObjectPool},registButton:function(b){this.buttons.add(b)},findButtons:function(b,c){return c?this.buttons.find(b):this.buttons.match(b)},reportChanged:function(b){this.buttons.match(b.getClassName()).each(function(c){c!=b&&c.setStatusQuietly(b.getStatus())})}});
Class("ToolbarStateButton",{status:-1,getFunctionName:function(b){var c=this.getClass().prototype,d;for(d in c)if(b==c[d])return d},bindStates:function(){this.states=[];for(var b=0;b<arguments.length;b++){var c=arguments[b],d=this.getFunctionName(c);this[d]=function(b,c){return function(){this.status!=c&&(this.status=c,b.apply(this,arguments),StateSynchronous.instance().reportChanged(this))}}(c,b);this.states[b]=d}StateSynchronous.instance().registButton(this)},setStatus:function(b){(b=this[this.states[b]])&&
b.apply(this)},setStatusQuietly:function(b){if(this.status!=b){var c=this.getClass().prototype[this.states[b]];c&&(this.status=b,c.apply(this))}},getStatus:function(){return this.status},onClick:virtual_function,initLanguage:function(){this.language=[];for(var b=0;b<arguments.length;b++){var c=arguments[b],d;for(d in c)this.language.push({key:d,defaultValue:c[d]})}},changeLanguage:function(){if(this.language){var b=this.language[this.status],b=getLanguage(b.key,b.defaultValue);this.setCaption(b)}}}).extend("ToolbarButton");
Class("ZoomButton",{create:function(){this._super();this.bindStates(this.setAsZoomin,this.setAsZoomout);this.initLanguage({btnZoomIn:"Zoom In"},{btnZoomOut:"Zoom Out"});this.setAsZoomin()},setAsZoomin:function(){this.setSrc("ZoomIn",bookConfig.ZoomInButtonIcon);this.changeLanguage();this.changeColor()},setAsZoomout:function(){this.setSrc("ZoomOut",bookConfig.ZoomOutButtonIcon);this.changeLanguage();this.changeColor()},executeZoomout:function(){var b=BookInfo.getBook().showPage;b.onDoubleTap.bind(b)({pointers:[{pageX:windowWidth/
2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},executeZoomin:function(){var b=BookInfo.getBook().showPage;b.onDoubleTap.bind(b)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});auto_player.isPlaying()&&auto_player.stop()},zoomout:function(){this.executeZoomout();this.setAsZoomin()},zoomin:function(){this.executeZoomin();this.setAsZoomout()},onClick:function(b){BookInfo.isZoomming()||(BookInfo.zoomStatus()?this.zoomout():this.zoomin())}}).extend("ToolbarStateButton");
Class("AutoPlayButton",{create:function(){this._super();this.bindStates(this.setAsStart,this.setAsStop);this.initLanguage({btnAutoFlip:"Auto Flip"},{btnStopAutoFlip:"Stop Auto Flip"});this.setAsStart()},setAsStart:function(){this.setSrc("autoPlay",bookConfig.AutoPlayStartButtonIcon);this.changeLanguage();this.changeColor()},setAsStop:function(){this.setSrc("stopAutoPlay",bookConfig.AutoPlayStopButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){auto_player&&(auto_player.isPlaying()?
auto_player.stop():auto_player.start())}}).extend("ToolbarStateButton");
Class("FullscreenButton",{create:function(){this._super();this.bindStates(this.setAsFullScreen,this.setAsExitFullScreen);this.initLanguage({btnFullscreen:"Fullscreen"},{btnExitFullscreen:"Exit Fullscreen"});this.setAsFullScreen()},setAsFullScreen:function(){this.setSrc("fullscreen",bookConfig.FullscreenButtonIcon);this.changeLanguage();this.changeColor()},setAsExitFullScreen:function(){this.setSrc("exitFullscreen",bookConfig.ExitFullscreenButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){readAsFullscreen()}}).extend("ToolbarStateButton");
Class("WeChatShareButton",{create:function(){this._super();this.bindStates(this.setWeChatShare);this.initLanguage({btnWeCharShare:"WeChat Share"});this.setWeChatShare()},setWeChatShare:function(){this.setSrc("wechat",bookConfig.WeChatShareButtonIcon);this.changeLanguage();this.changeColor()},onClick:function(){},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:function(){this.$button.bind("mouseenter",function(b){b.stopPropagation();b.preventDefault();global.WeChatShareImg.visible=
!0;global.WeChatShareImg.show({left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})}.bind(this));this.$button.bind("mouseleave",function(b){global.WeChatShareImg.visible=!1;setTimeout(function(){global.WeChatShareImg.visible||global.WeChatShareImg.hide()}.bind(this),200)}.bind(this))}}).extend("ToolbarStateButton");
Class("BackgroundSoundButton",{create:function(){this._super();this.bindStates(this.setAsSoundOn,this.setAsSoundOff);this.initLanguage({btnSoundOn:"Sound On"},{btnSoundOff:"Sound Off"});this.setAsSoundOn()},setAsSoundOn:function(){this.setSrc("soundOn",bookConfig.BackgroundSoundButtonOnIcon);this.changeLanguage();this.changeColor()},setAsSoundOff:function(){!isPhone()&&!isPad()&&bookConfig.BackgroundSoundURL&&bookConfig.FlipSound&&bookConfig.BackgroundSoundButtonVisible||(this.setSrc("soundOff",bookConfig.BackgroundSoundButtonOffIcon),
this.changeLanguage(),this.changeColor())},onClick:function(){global.bgSound&&(bookConfig.BackgroundSoundURL&&bookConfig.FlipSound?soundSetting&&soundSetting.showOrHide():bookConfig.BackgroundSoundURL?isPlaying?global.bgSound.pause():global.bgSound.play():(flipSoundIsPlaying=!flipSoundIsPlaying)?this.setAsSoundOn():this.setAsSoundOff())},addEvents:function(){this._super();this.onMouseEnter()},onMouseEnter:function(){bookConfig.BackgroundSoundURL&&(this.$button.bind("mouseenter",function(b){b&&"CANVAS"==
b.target.tagName.toUpperCase()||setTimeout(function(){volumeControlBar.show({left:b.pageX-b.offsetX,top:b.pageY-b.offsetY,width:$(b.target).width(),height:$(b.target).height()})},200)}.bind(this)),this.$button.bind("mouseleave",function(b){setTimeout(function(){volumeControlBar.visible||volumeControlBar.hide()},200)}.bind(this)))}}).extend("ToolbarStateButton");
Class("SelectTextButton",{create:function(){this._super();this.bindStates(this.setAsUnSelect,this.setAsSelect);this.initLanguage({btnSelectText:"Select Text"},{btnSelectText:"Select Text"});this.setAsUnSelect()},setAsSelect:function(){this.setSrc("text",bookConfig.SelectTextButtonIcon);this.changeColor("#bdc5e9");this.changeLanguage()},setAsUnSelect:function(){this.setSrc("text",bookConfig.SelectTextButtonIcon);this.changeColor();this.changeLanguage()},select:function(b){b=BookInfo.getCurrentPages();
for(var c=0;c<b.length;c++){for(var d=b[c],f=!1,g=0;g<positionForPages.length;g++)if(positionForPages[g]&&positionForPages[g].page&&positionForPages[g].page==d){f=!0;break}if(!f){f=String.format(bookConfig.searchPositionJS,d);1<d&&(f=f.replace("[1]","["+d+"]"));if(!f.match(/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi))break;loadJavascript(f,function(){},function(){})}}BookInfo.getBook()&&BookInfo.getBook().select()},unSelect:function(){BookInfo.getBook()&&BookInfo.getBook().unSelect()},onClick:function(){BookInfo.getBook()&&
BookInfo.getBook().flipping||(this.status?(this.setAsUnSelect(),this.unSelect(),this.status=0):(this.setAsSelect(),this.select(),this.status=1))}}).extend("ToolbarStateButton");Class("MunuZoomButton",{create:function(){this._super()},changeColor:function(){this.changeIconColor("#333");this.changeCaptionColor("#333")}}).extend("ZoomButton");Class("MunuFullscreenButton",{create:function(){this._super()},changeColor:function(){this.changeIconColor("#333");this.changeCaptionColor("#333")}}).extend("FullscreenButton");var getLogoLink=function(){return[bookConfig.appLogoLinkURL,bookConfig.appLogoOpenWindow]},initLogoBar=function(b){if(bookConfig.appLogoIcon){var c=$("#logoBar");b=c.height();var d=bookConfig.logoHeight,f=bookConfig.logoPadding,g=parseInt((b-d)/2),h=getLogoLink(),k=$("<img style='position:absolute;left:0;top:0;'/>");k.attr({src:bookConfig.appLogoIcon});k.on("load",function(){c.append(k);k.css({height:d+"px",top:g+"px"});c.css({left:f+"px",width:k[0].naturalWidth*d/k[0].naturalHeight+"px"});h[0]&&
0>h[0].indexOf("javascript:void(0)")&&(k.click(function(){window.open(h[0],h[1])}),k.css({cursor:"pointer"}));if(global.toolBar&&global.toolBar.onResize)toolBar.onResize()})}},setPageIndexTextField=function(){setCurrentIndexTextField(BookInfo.getBook().getCurrentPageIndex(),bookType==BookType.normal_book||bookType==BookType.slide_book||bookType==BookType.catalog_book);void 0!=$("#currentPageIndexTextField")&&null!=$("#currentPageIndexTextField")&&void 0!=$("#currentPageIndexTextField")[0]&&null!=
$("#currentPageIndexTextField")[0]&&($("#currentPageIndexTextField").bind("keydown",function(b){13==b.keyCode&&(b=$("#currentPageIndexTextField").val(),b=parseInt(getRealPage(b)),isNaN(b)||(b=Math.min(Math.max(b,1),bookConfig.totalPageCount),gotoPageFun(b)))}),$("#currentPageIndexTextField").bind("blur",function(){window.setTimeout(function(){setCurrentIndexTextField(BookInfo.getCurrentPageIndex())},400);this.onFocus=!1}),$("#currentPageIndexTextField").bind("focus",function(b){$("#currentPageIndexTextField").val("");
this.onFocus=!0}))};(function(b){function c(b){if(!b)return 0;b=parseFloat(b.replace("px",""));return isNaN(b)?0:b}b.fn.left=function(){return c(this.css("left"))};b.fn.top=function(){return c(this.css("top"))};b.fn.right=function(){return c(this.css("right"))};b.fn.bottom=function(){return c(this.css("bottom"))}})(jQuery);
Class("Toolbar",{topBar:null,bottomBar:null,buttons:null,visible:!0,isMoving:!1,extendedBar:null,color:null,create:function(b){this.parent=b;this.color=Color(bookConfig.toolbarColor);this.topBarAlpha=Math.min(bookConfig.topToolBarAlpha,bookConfig.ToolBarAlpha);this.bottomBarAlpha=Math.min(bookConfig.bottomToolBarAlpha,bookConfig.ToolBarAlpha);this.initButtons();this.initBar();this.initExtendedbar();this.initEvents();this.onResize()},initButtons:function(){this.buttons=new ObjectPool;this.buttons.add(new FirstPageButton);
this.buttons.add(new PreviousPageButton);this.buttons.add(new NextPageButton);this.buttons.add(new LastPageButton);bookConfig.enablePageBack&&(this.buttons.add(new BackwardButton),this.buttons.add(new ForwardButton));bookConfig.HomeButtonVisible&&this.buttons.add(new HomeButton);bookConfig.ZoomButtonVisible&&this.buttons.add(new ZoomButton);bookConfig.SearchButtonVisible&&this.buttons.add(new SearchButton);bookConfig.ThumbnailsButtonVisible&&this.buttons.add(new ThumbnailButton);bookConfig.TableOfContentButtonVisible&&
this.buttons.add(new TableOfContentButton);bookConfig.BookMarkButtonVisible&&this.buttons.add(new BookmarkButton);bookConfig.AutoPlayButtonVisible&&this.buttons.add(new AutoPlayButton);bookConfig.BackgroundSoundButtonVisible&&this.buttons.add(new BackgroundSoundButton);bookConfig.AnnotationButtonVisible&&this.buttons.add(new AnnotationButton);bookConfig.VideoButtonVisible&&this.buttons.add(new VideoButton);bookConfig.SlideshowButtonVisible&&this.buttons.add(new SlideshowButton);bookConfig.WeChatShareButtonVisible&&
this.buttons.add(new WeChatShareButton);bookConfig.ShareButtonVisible&&this.buttons.add(new ShareButton);bookConfig.PrintButtonVisible&&this.buttons.add(new PrintButton);bookConfig.DownloadButtonVisible&&this.buttons.add(new DownloadButton);bookConfig.FullscreenButtonVisible&&this.buttons.add(new FullscreenButton);1<language.length&&this.buttons.add(new LanguageButton);bookConfig.aboutButtonVisible&&this.buttons.add(new AboutButton);bookConfig.HelpButtonVisible&&this.buttons.add(new HelpButton);bookConfig.EmailButtonVisible&&
this.buttons.add(new ShareEmailButton);bookConfig.SelectTextButtonVisible&&this.buttons.add(new SelectTextButton);this.btnMore=new MoreButton;this.buttons.add(this.btnMore);this.sortXMLButton();this.buttons.each(function(b){b.setCallback(this.afterButtonClick.bind(this));this.setButtonTitle(b)}.bind(this))},sortXMLButton:function(){if(bookConfig.buttonsSortXML){var b=bookConfig.buttonsSortXML.slice().reverse(),c=b.indexOf("autoflip");0<=c&&(b[c]="autoplay");for(c=0;c<b.length;c++){var d="btnshare"==
b[c]?this.matchButton("ShareButton"):this.pickButton(b[c]);d&&(this.buttons.objects.unshift(d),this.buttons.length+=1)}}},setButtonTitle:function(b){if("WeChatShareButton"==b.getClassName())global.WeChatShareImg=new WeChatShare({parent:this.parent,color:bookConfig.iconFontColor,textColor:bookConfig.toolbarColor,margin:10,padding:10,arrowHeight:10,arrowWidth:10});else{var c=new TextBubble({parent:this.parent,text:b.caption,color:this.color,textColor:b.fontColor,margin:7});b.setTitle(c)}},initBar:virtual_function,
initExtendedbar:virtual_function,onResize:virtual_function,initEvents:function(){function b(){this.extendedBar.visible&&this.extendedBar.hide()}this.topBar&&this.topBar.bind("click",b.bind(this));this.bottomBar&&this.bottomBar.bind("click",b.bind(this))},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){var b=0,b=this.visible?this.topBar?this.topBar.height()+this.topBar.top():0:0;thumbnail&&(b+=thumbnail.getTopHeight());return b},getLogoHeight:function(){return this.topBar?
this.topBar.height():0},getBottomHeight:function(){var b=0,b=this.visible?this.bottomBar?this.bottomBar.height()+this.bottomBar.bottom():0:0;thumbnail&&(b+=thumbnail.getBottomHeight());return b},getWidth:function(){return this.getLeftWidth()+this.getRightWidth()},getLeftWidth:function(){return 0},getRightWidth:function(){return 0},show:function(){if(!this.isMoving&&!this.visible)if(isIE8())this.topBar&&this.topBar.css({display:"block"}),this.bottomBar&&this.bottomBar.css({display:"block"}),this.visible=
!0;else{this.isMoving=!0;if(this.topBar){var b=transformCSS({tran:{x:0,y:0}});animateOnce(this.topBar,b,500)}this.bottomBar&&(b=transformCSS({tran:{x:0,y:0}}),animateOnce(this.bottomBar,b,500));this.visible=!0;(function(){this.isMoving=!1}).delay(this,500)}},hide:function(){if(!this.isMoving&&this.visible){var b=this.getTopHeight()+5,c=this.getBottomHeight()+5;isIE8()?(this.topBar&&this.topBar.css({display:"none"}),this.bottomBar&&this.bottomBar.css({display:"none"}),this.visible=!1):(this.isMoving=
!0,this.topBar&&(b=transformCSS({tran:{x:0,y:-b}}),animateOnce(this.topBar,b,500)),this.bottomBar&&(c=transformCSS({tran:{x:0,y:c}}),animateOnce(this.bottomBar,c,500)),this.visible=!1,function(){this.isMoving=!1}.delay(this,500))}},matchButton:function(b){b=this.buttons.match(b);if(0==b.length)return null;b.get(0)&&this.buttons.remove(b.get(0));return b.get(0)},getButton:function(b){b=this.buttons.find(b);return 0==b.length?null:b.get(0)},pickButton:function(b){(b=this.getButton(b))&&this.buttons.remove(b);
return b},removeButton:function(b){"string"==typeof b&&(b=this.getButton(b));b&&this.buttons.remove(b)},addButton:function(b){b&&this.buttons.add(b)},changeFullscreenIcon:function(b){var c=this.getButton("fullscreen");c&&(b?c.setAsExitFullScreen():c.setAsFullScreen(),function(){this.onResize()}.delay(this,100))},changeLanguage:function(){this.buttons.each(function(b){b.changeLanguage()})},buttonsInExtendedBar:function(){var b=new ObjectPool;this.buttons.each(function(c){c.$parent==this.extendedBar.$bar&&
b.add(c)}.bind(this));return b},afterButtonClick:function(b){this.extendedBar.visible&&(b!=this.btnMore?isPhone()||isPad()||this.extendedBar.hide():(b=this.buttonsInExtendedBar(),b.each(function(b){b.changeColor()}),b=null))},isRightToLeft:function(){var b=getLanguage("btnSearch","Search");return LanguageTool.isRightToLeft(b)}});
Class("ExtendedBar",{$bar:null,visible:!1,color:null,height:10,isMoving:!1,create:function(b){this.$parent=b;this.color=Color(bookConfig.toolbarColor);this.$bar=$("<div class='extendedBar'></div>");this.isRightToLeft()&&this.$bar.addClass("rtl");this.$parent.append(this.$bar);this.$bar.css({"background-color":this.color.toString(),display:"none"})},isRightToLeft:function(){var b=getLanguage("btnSearch","Search");return LanguageTool.isRightToLeft(b)},show:function(b){if(!0!=this.isMoving&&!0!=this.visible){this.visible=
this.isMoving=!0;this.$bar.css({left:b.left+b.width-this.width+"px",top:b.top+b.height+10+"px"});var c=0;this.$bar.css({display:"block",opacity:0});var d=function(){c+=0.1;this.$bar.css({opacity:c});equals(c,1)&&(d.stop(),this.isMoving=!1)}.interval(this,40)}},hide:function(){if(!0!=this.isMoving&&!1!=this.visible){this.isMoving=!0;this.visible=!1;var b=1,c=function(){b-=0.1;this.$bar.css({opacity:b});equals(b,0)&&(c.stop(),this.$bar.css("display","none"),this.isMoving=!1)}.interval(this,40)}},resize:virtual_function});var PhoneToolbarButtons={setSrc:function(b,c){var d=$("<img style='pointer-events:none;'></img>");this.$caption=$("<span style='pointer-events:none;'></span>");c&&""!=c?d.attr("src",c):phone_toolbar_icons&&phone_toolbar_icons[b]?d.attr("src","data:image/png;base64,"+phone_toolbar_icons[b]):d.attr("src",phoneBaseURL+b+".png");this.$img=$("<div class='icon'></div>");this.$button.empty();this.$img.append(d);this.$button.append(this.$img);this.$button.append(this.$caption);this.fontColorChanged=this.colorChanged=
!1},changeIcon:function(b,c){var d=$(this.$button.find("img")[0]);c&&""!=c?d.attr("src",c):phone_toolbar_icons&&phone_toolbar_icons[b]?d.attr("src","data:image/png;base64,"+phone_toolbar_icons[b]):d.attr("src",phoneBaseURL+b+".png");this.colorChanged=!1}};
Class("PhoneGotoPageButton",{create:function(){this._super();this.setSrc("gotoPage",bookConfig.GotoPageButtonIcon);this.initLanguage("btnGotoPage","Go to page");global.phoneGotoPagePanel||(global.phoneGotoPagePanel=new phoneGotoPage(tmpContainer))},onClick:function(b){global.phoneGotoPagePanel.showOrHide()}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneEmailButton",{create:function(){this.color=Color(bookConfig.iconColor);this.fontColor=Color(bookConfig.iconFontColor);this.$button=$("<a target="+bookConfig.OpenWindow+" href='' class='button' style='text-decoration:none;'></a>");this.setSrc("phoneEmail",bookConfig.EmailButtonIcon);this.initLanguage("btnShareEmail","Share by Email");if(isTouchDevice())this.$button.attr("href","http://gmail.google.com");else{var b=bookConfig.btnShareWithEmailBody,c=bookConfig.btnShareWithEmailSubject;c||
(c="");thumb=" "+window.location.href.substring(0,share_url.lastIndexOf("/"))+"/"+bookConfig.thumbPath+"1.jpg ";b=b.replaceAll("{thumb}",thumb,!0);b=b.replaceAll("{link}",window.location.href,!0);b=b.replaceAll("{title}",window.document.title,!0);this.$button.attr("href","mailto:?subject="+c+"&body="+b)}},onClick:function(b){}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneLogo",{create:function(){this._super();var b=$("<img src='"+bookConfig.appLogoIcon+"' style='cursor:pointer;'/>");b.css({height:bookConfig.logoHeight+"px"});this.$button.append(b)},onClick:function(b){b=getLogoLink();b[0]&&($.browser.msie?window.location=b[0]:window.open(b[0],b[1]))},changeColor:function(){},changeLanguage:function(){}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneWeChatShareButton",{create:function(){this._super();this.setSrc("phoneWeChat",bookConfig.WeChatShareButtonIcon);this.initLanguage("btnWeCharShare","WeChat Share")},onClick:function(b){global.phoneWeChatShareHelp&&global.phoneWeChatShareHelp.show()}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneReportButton",{create:function(){this._super();this.setSrc("report",bookConfig.ReportButtonIcon);this.initLanguage("btnReport","report");this.setCaption("\u4e3e\u62a5")},onClick:function(b){bookConfig.EnableReportButton&&!window.reportPanel&&(global.reportPanel=new PhoneReportPanel(tmpContainer));global.reportPanel&&function(){global.reportPanel.showOrHide()}.delay(10)}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneInstructionsButton",{create:function(){this._super();this.setSrc("instructions",bookConfig.InstructionsButtonIcon);this.initLanguage("btnInstructions","instructions")},onClick:function(b){bookConfig.InstructionsButtonVisible&&!window.bookInstructions&&(global.bookInstructions=new BookInstructions(tmpContainer));global.bookInstructions&&function(){bookInstructions.showOrHide()}.delay(10)}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneShoppingCartButton",{create:function(){this._super();this.setSrc("shoppingCart",bookConfig.ShoppingCartButtonIcon);this.shoppingNumber=$("<div id='shoppingNumber'>0</div>");this.shoppingNumber.css({width:"20px",height:"20px",position:"absolute",right:"-10px",top:"10px","font-size":"12px","text-align":"center",color:"#fff"});this.$button.append(this.shoppingNumber);this.initLanguage("btnShoppingCart","shoppingCart")},onClick:function(b){window.shoppingCart&&window.shoppingCart.showCart()},
setNumber:function(b){b||(b=0);this.shoppingNumber.html(b)}}).expand(PhoneToolbarButtons).extend("ToolbarButton");
Class("PhoneBookmarkButton",{create:function(){this._super();this.setSrc("addBookmark",bookConfig.BookmarkButtonIcon);getLanguage("AnnotMark","")?this.initLanguage("AnnotMark","bookmark"):this.initLanguage("btnBookMark","Bookmark");this.status=0},onClick:function(){var b=BookInfo.getCurrentPages()[0],b={pageIndex:b,caption:"page:"+b,color:getRandomColor()};global.bookmark&&(global.bookmark.addItem(b),global.bookmark.show())},setAsAdded:function(){1!=this.status&&(this.changeIcon("bookmark",bookConfig.BookmarkButtonIcon),
this.$button.find("img")[0].colorChanged=!1,this.changeColor(),this.status=1)},setAsUnAdded:function(){0!=this.status&&(this.changeIcon("addBookmark",bookConfig.BookmarkButtonIcon),this.$button.find("img")[0].colorChanged=!1,this.changeColor(),this.status=0)}}).expand(PhoneToolbarButtons).extend("BookmarkButton");
Class("PhoneBackgroundSoundButton",{onClick:function(){global.phoneSettingBody||(global.phoneSettingBody=new PhoneSettingForm({parent:tmpContainer,formType:"setting",rightToLeft:rightToLeft}),global.phoneSettingBody.onResize());global.phoneSettingBody&&global.phoneSettingBody.show()},onMouseEnter:function(){}}).expand(PhoneToolbarButtons).extend("BackgroundSoundButton");
Class("PhoneNumberButton",{create:function(){this._super();this.setSrc("tel",bookConfig.PhoneButtonIcon);this.initLanguage("btnPhoneNumber","tel")},onClick:function(){var b=global.phoneNumber;b&&("string"==typeof b?window.open("tel:"+b):1!=b.length||b[0].label?(global.telephoneNumberForm||(global.telephoneNumberForm=new TelephoneNumberForm({parent:tmpContainer,formType:"tel",rightToLeft:rightToLeft}),global.telephoneNumberForm.onResize()),global.telephoneNumberForm&&global.telephoneNumberForm.show()):
window.open("tel:"+b[0].number))},onMouseEnter:function(){}}).expand(PhoneToolbarButtons).extend("ToolbarButton");Class("PhoneTableOfContentButton",{}).expand(PhoneToolbarButtons).extend("TableOfContentButton");Class("PhoneThumbnailButton",{}).expand(PhoneToolbarButtons).extend("ThumbnailButton");Class("PhoneShareButton",{}).expand(PhoneToolbarButtons).extend("ShareButton");Class("PhoneHomeButton",{}).expand(PhoneToolbarButtons).extend("HomeButton");Class("PhoneFirstPageButton",{}).expand(PhoneToolbarButtons).extend("FirstPageButton");
Class("PhonePreviousPageButton",{}).expand(PhoneToolbarButtons).extend("PreviousPageButton");Class("PhoneNextPageButton",{}).expand(PhoneToolbarButtons).extend("NextPageButton");Class("PhoneLastPageButton",{}).expand(PhoneToolbarButtons).extend("LastPageButton");Class("PhoneZoomButton",{}).expand(PhoneToolbarButtons).extend("ZoomButton");Class("PhoneSearchButton",{}).expand(PhoneToolbarButtons).extend("SearchButton");Class("PhoneAutoPlayButton",{}).expand(PhoneToolbarButtons).extend("AutoPlayButton");
Class("PhoneAnnotationButton",{}).expand(PhoneToolbarButtons).extend("AnnotationButton");Class("PhoneVideoButton",{}).expand(PhoneToolbarButtons).extend("VideoButton");Class("PhoneSlideshowButton",{}).expand(PhoneToolbarButtons).extend("SlideshowButton");Class("PhonePrintButton",{}).expand(PhoneToolbarButtons).extend("PrintButton");Class("PhoneDownloadButton",{}).expand(PhoneToolbarButtons).extend("DownloadButton");Class("PhoneFullscreenButton",{}).expand(PhoneToolbarButtons).extend("FullscreenButton");
Class("PhoneLanguageButton",{}).expand(PhoneToolbarButtons).extend("LanguageButton");Class("PhoneAboutButton",{}).expand(PhoneToolbarButtons).extend("AboutButton");Class("PhoneHelpButton",{}).expand(PhoneToolbarButtons).extend("HelpButton");Class("PhoneMoreButton",{}).expand(PhoneToolbarButtons).extend("MoreButton");Class("PhoneBackwardButton",{}).expand(PhoneToolbarButtons).extend("BackwardButton");Class("PhoneForwardButton",{}).expand(PhoneToolbarButtons).extend("ForwardButton");
Class("PhoneTextButton",{}).expand(PhoneToolbarButtons).extend("SelectTextButton");var phone_toolbar_icons={arrow_down:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHxJREFUeNrklFEKACEIRBvp/kdudiGEiCwrv3b9CsHHqGMgmSJDUnD8EJhTKboVXLLYK+QtrCqsympChAdK+Xapb6DxYasQu8q0RgwIT2CjLXuhZjcj26yg09FYPrSgyznPjN1DXUtbXQqcua3Tw46dstNv+M5vEw58BBgAsrYdJS4op8YAAAAASUVORK5CYII=",arrow_right:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHZJREFUeNqs1EEOgDAIRFHg/mcG3ZiYqDC/lmXTvAyU1KvKHpV5HbpFGKnpdhmsL9BX0S7hvd3a03ImTqpMHKHqE8oo2QkJDbgVI0rBEV0BbdcM31L5X7DFKDhiBJQwFZSxGYxA2ATW+TkgrANxMnWGTpf0EGAAcJUbJbLG0g8AAAAASUVORK5CYII=",
backward:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNqslD0KwjAYhpMo3RzVwQOIq6uDOHgIJ3dv4uYdFFy8gKOD4OoieADBLuLo0sQ3mkgMpvlq+8JDSvry9IePcKUUy4m9yRkxgiArFEGQ8bLCv2W/hKVkvrC0zBVWIrNCxaT0P9vlAQ5gAYbRByqdLHstSso33/E3TmACuJ5hH3vhxi81wAjMwcXp7UAnJIxJLXUwA1fTS8EgJKRKNU2wNb076IeERaQ1sHbetB0SFpEmYG96K73Hc04b6mx2wREkoJd32lAH/AyWpj8VkTInijdmHfPIAUtNC6TgVpXw888FqzhPAQYA7ia3Pnww0NEAAAAASUVORK5CYII=",bookmark:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJZJREFUeNrMlAEKgCAMRbfRJepGHaszdSe7hT8LBUkzpxF9WCbxH/vkJADka3ZloJPxvsAgPh5extVIem2uprCJgeGFFbDEI/Syhk5/kqa3Q0Sx/xTZWmR/jgj/pEPXyWfHpha4Fo4NayMjWrl3UvCwV0XGzUSgBZiDVUFF0VkVVDSDX3O9SYup9D0GLsoLli++U7sAAwALcmb6uVis+AAAAABJRU5ErkJggg==",
autoPlay:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAaRJREFUeNqclL9KA0EQxmPUpPANAhZiYYJgb2FlBEv/JFUsVdQEEkF8ALukjZWvYER8BkELFSF/ChFJwCCIlaghpvD8Br6VyWbvRAd+3M3s7He3u7Mz5HleyGERsERmQQz0QBvcglNwxli/iaDFMrj3fjfJWbHna2cYFNWEBtgFCRAlCcYaKq/IuQOCRqwDtnWSAxnLgU8l2ieY4oAkJAOEbBaUaMoIRsAjgzlrwjp4Awdcsks0y7lt0ZJAhoG6Y5nnaq+uwKTP8uvMWZPAMZ2CI/lZfV3sFaQdeQWOV8Rp0Uk4Et85Nq4+LFa2tiDOeEucLh3XHhkz/ib4YOxExSPmUMOq2p1XxrIH8ML3Getm/dyUO6rHA5YcA0fgi/4FmFB502bJ8odVai86/qjD5w3YAF2wD+ZAU+Ul+bzWZVNzlM2l2kd5n/Ipm5ouG13YWUfRPoE9MOJT2DuqtKImmFZXb/6fVy9tN4eSag5bIBwgFLaaQ8mvfZWt9pXnvo2CMZ5m3mpfh37ty7D6hwabCmqwIavy5fQroAl6pMlYhjkDc78FGAABhY7rNP87hgAAAABJRU5ErkJggg==",
addBookmark:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAH1JREFUeNpi+P//PwMS9gTiZ/9JA8+g+sBmMIIIJPAMiCUZSAfPgVgKxEA3EMZhJMEwFD1MDFQGowaOGkhjAzcTo4iFxNzwn1AuYiLBMFx8kgxE1sxIjKFMJBpG0FAmEl1G0FBCXmYkURyvgYzkWIZuYCOJBSwjmj4GgAADAGstXu/liSuvAAAAAElFTkSuQmCC",download:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIFJREFUeNrsVNEKwCAITNmP9+F1i03YRlqO+dDDBAlSrzP0CKUkh0FOmiVyCjYfIPPpYYDhDH/ABQCZcbg9RmacJ/MH193NCJB4ra8KWz51wz9oeba3ZG0ONXHQF/8qQAemdSR5I4ZJeYiMnMcfuqXJI3HrD/amqPJnhjmQYN4FGABikCFAj4rJrQAAAABJRU5ErkJggg==",
firstPage:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJZJREFUeNqk1NENgCAMBFCOsJbT61zUiBCQaLnWfggk+jglFiIShtrruJVrzoGoG4gR14AJbAuQYH+4gkm9PUYd6xuiTVLwlQwb4pHBjU3JvKCKWcElZgEpjAVpjAFNmPeUf4H4SPsroQllX5lGLd+QQq2HskQ9p6yi3m6DoX1JWddWp4N6g8WQUFryGTzYP+IFLXUKMADRzCfwyIIFOAAAAABJRU5ErkJggg==",flipsoundOff:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAALBJREFUeNqsVNEOgyAMlI4HP3t+4vYze7JdajWBgrSAl4hI4nF3hS5E9KZ5LNcTjq9nEHiIeqETpOYB3Lsj8g9fa4PUcq4QUd4ATIbnfFeuirjaClOyOrbCiqGQEnIetcIiz7pCyYsypU7YRcnJXmOEbE8sdh8lqyirWtktwniT4TX79eTny1AKNEkoqsIIKXguvIph0nJnpWOjwrXm8BknbB9wF+EjjRZqHWMGfwEGAI3QhAWdX4Y9AAAAAElFTkSuQmCC",
flipsoundOn:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAL1JREFUeNqsVNEOgzAILMyHffb2ifNn9iQsXSVWpIi1JFZsmuPuqCRmfvH9SPLA/2tMQF4mvXExWOWAocpE+fAcKVBL3hgSlTdiBqM1X5QizbAca9aqwY4gAvQ+yHEYcgWeV2HIDc85GRLS6tee6V6a2zy/KQVM4hFpOxogIhGcq8LXGSI+1c4SYWh5KNlXSR7goW5Qp4egrhCP8dD6c7oYnvsFno9To8PWcPj0dfn8gocBhwxatCbGnfgJMADn4IsF0oHN9wAAAABJRU5ErkJggg==",forward:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOxJREFUeNpi/P//PwMJAKaYEZcCJgbywH9qGchIyFByXIjXUHK9jNNQcg3EaSglBmI1lIkIDfZAPAGITwDxD6hGZAwB//5BDAWlQyyYEYgjgfjaf1TwD5X3D4JB4O9fMIXNMGkgPoik7SkQdwKxIxDzYlGPDBjQJa2B+CVU8gUQZwExCw6LMQxDN9AIiD9AJXcCsSgeg7AahmygOJLLlgMxMzmGIRu4BCp5FIjZyDUMZqA6NPZ+QNlkGwbCoHQYD01vi4H4JhkJGgWwALErlL2GEoOQs54SlH2egQqA8T+iyGakhoFMDFQGAAEGAMci7yhW+91jAAAAAElFTkSuQmCC",
goPage:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGZJREFUeNrUlMENwDAIAwMrwf4TsJOj/PIokQqW0iLxPRlsEACDWTrIdR/o7lhNV5hBXwMjQk7QksITtDxyBm25/AQVM8Oncyjd09v3t1agTBgt2Ls5yoSVbzmD0YJNdfl/D3YKMADELTXqSybrAQAAAABJRU5ErkJggg==",backward:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOtJREFUeNqslD0KwjAYhpMo3RzVwQOIq6uDOHgIJ3dv4uYdFFy8gKOD4OoieADBLuLo0sQ3mkgMpvlq+8JDSvry9IePcKUUy4m9yRkxgiArFEGQ8bLCv2W/hKVkvrC0zBVWIrNCxaT0P9vlAQ5gAYbRByqdLHstSso33/E3TmACuJ5hH3vhxi81wAjMwcXp7UAnJIxJLXUwA1fTS8EgJKRKNU2wNb076IeERaQ1sHbetB0SFpEmYG96K73Hc04b6mx2wREkoJd32lAH/AyWpj8VkTInijdmHfPIAUtNC6TgVpXw888FqzhPAQYA7ia3Pnww0NEAAAAASUVORK5CYII=",
gotoPage:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHVJREFUeNqs1GEKgCAMBeBtdNbuVNfI+y2Egoxpy/ce+Ev4mHOq7i6D3JsqyVgC+xVLYIqC01gEQtgbhLEnSMFqluA2HfBKrXAXYvRjsGlzCIHH1TfG2tgVroweNiNnTAy9lPAxGBObBYfP1JgYcuTuB3IKMAA6xC0LcWVSowAAAABJRU5ErkJggg==",help:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNqclL9KA0EQxjXiXWFla3mNOXwCay9g6Z9LFWtRE0is8gomrT6FBsRaH+FAMEkhggmYOqVomvNb+E4mk73N6cKPY2Z2PvZ2Z2Y1TdMVy/LAAdkFW2AGJuAZ3IMH+uaXEVQcgrd0+TJ7jnS+NNZARyQMwSUIgU9C+oZiX4e5C4KZ2Cc4l5ssmFgDfAvROcGYAbMhcghpKkI0zgQ98EFnw5J0pe6ureJ1+idGyzhqdAwsv9lmLFL2qfr9Af0nxnFHo2U5XQJuC/ha1OgZY0wjLHBnm2DKa5D+MjXGxvii4RcQSygYqJiXPWpJVLu1ZcR6BAGogHdLZ/12yivVy47TVdXjaHayXzYnfKH2vuN0Ab9POfGI30SWTX9Jd7i6pi/LRhZ2PScpqz9b7EIUtq/vyLTR3j9br6qHQ1cMhzNQcgiV1HDo5o2vazW+mmAbrIMNvmZTja+bvPGVcfyHARu7BqyufPP6PTACMzKir8Y9C7k/AgwA1vx8IshSRRAAAAAASUVORK5CYII=",
home:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNrs1LsOgCAMBdD2hsHP9rcdpJogWhso+Bgc7KKR9lBFYBGhjshJ3ErEBczeFyNQjM50SEDOARIaI9dBDzsm4w0WNcb9r1zCzvDRfRPMicBcWQQXRREjmteC4Hx7LtQYUA/4mIvCPBB31W3o3M2AQibvd2ii6SpQA8NlDMi1eyNstl73Fqvlg16OH/wgGDoO1UcdjjeMU80iwAD1V0gU01xzDwAAAABJRU5ErkJggg==",instructions:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAXhJREFUeNqclL9KA0EQxjXiXWFla3mNOXwCay9g6Z9LFWtRE0is8gomrT6FBsRaH+FAMEkhggmYOqVomvNb+E4mk73N6cKPY2Z2PvZ2Z2Y1TdMVy/LAAdkFW2AGJuAZ3IMH+uaXEVQcgrd0+TJ7jnS+NNZARyQMwSUIgU9C+oZiX4e5C4KZ2Cc4l5ssmFgDfAvROcGYAbMhcghpKkI0zgQ98EFnw5J0pe6ureJ1+idGyzhqdAwsv9lmLFL2qfr9Af0nxnFHo2U5XQJuC/ha1OgZY0wjLHBnm2DKa5D+MjXGxvii4RcQSygYqJiXPWpJVLu1ZcR6BAGogHdLZ/12yivVy47TVdXjaHayXzYnfKH2vuN0Ab9POfGI30SWTX9Jd7i6pi/LRhZ2PScpqz9b7EIUtq/vyLTR3j9br6qHQ1cMhzNQcgiV1HDo5o2vazW+mmAbrIMNvmZTja+bvPGVcfyHARu7BqyufPP6PTACMzKir8Y9C7k/AgwA1vx8IshSRRAAAAAASUVORK5CYII=",
languageChange:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGxJREFUeNrsVNEKwCAIVOnD3Y93Y8OH2CTCDILt4MIiDukuCYAiD8rXSokoTc2TWndjQsn4oGBxT2vFwyh/L8LLO2xz+MdmQ0EY1XnsEdptf3yRMTS+XtZbhEJxkl6mItnsmcIZLh+zv+YUYAASRr14sA+AgwAAAABJRU5ErkJggg==",lastPage:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJRJREFUeNqs1F0KgCAQBOB16FqdPrqWG4SimT+zi/NSBH1NZhtUVd7EmE4kyCpAPrvS8cwXQgdcowX8lTgaRNMNSjXtpDQs4Zt2GqL3kAFOBaPmXhSz5fCgWK2xFQXz4Swo2N3AopDNYUF6b2InxoAmbAWasRnowkagG/uOrxilGl8urJ2HWuHsgJ2Cnte82z/nEWAAjKko7hJ3X2UAAAAASUVORK5CYII=",
moreBar:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVdJREFUeNqklE9Kw1AQxpOILwVv4EZwo8ETuLaCS/+kq3oAbQvSY7RbXXoEQbyHINh25aIFC72B2EB5fiPfg+lrmzbpwC8vbzLzJSGTL7TWBkvCgEtyCvZBBsbgA7yCN+bmQwQ9rsCXXR9Sc+33680O6KiGAWiDBMQkYW6g6jrsXRB0Yj/gXhctQa61wFSJzgmmvCAF1Rwhn3MlmjpBA76ZbBUQczTZOxYtSdSZ6K95zbzX71PjNuJoSDyDWVA8ZuwN/rWgOqJ6UuLpHMfUGIU4/EI5BhUwdePJNdxwb9ibRWrabVA+jDsRwQnPD1VBqO6+yf6A60QEP7m52OIJq1zf9dj0thibnhsbf7CbJQQbarBjl6ypX++s5K9X882hq8zhDkQ5QpFnDt1V9vXo2dcDOAK7YA+cMKft62mVfTluChhsmmewGsOv/wKGICND5uqsWej9E2AAqda4kFPJa7oAAAAASUVORK5CYII=",
nextPage:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHZJREFUeNqs1EEOgDAIRFHg/mcG3ZiYqDC/lmXTvAyU1KvKHpV5HbpFGKnpdhmsL9BX0S7hvd3a03ImTqpMHKHqE8oo2QkJDbgVI0rBEV0BbdcM31L5X7DFKDhiBJQwFZSxGYxA2ATW+TkgrANxMnWGTpf0EGAAcJUbJbLG0g8AAAAASUVORK5CYII=",note:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAH1JREFUeNrElEEKwCAMBE1I/10/7pb2JKLtJhG6IETRYSJoAXDCl9KNY1yXp/JFuno8K7bYyGQmAg3aYSWiAasR1s/VEm3KzFR3wnhgaxTsjlFmqgwMjCFtxrTshr0BQzCmZRcscoclC3S/c8sCoob/Ae3jfwsZ1o2C9RJgALNQaWzoN4fZAAAAAElFTkSuQmCC",
phoneEmail:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJVJREFUeNrMVYsKgCAM9KQP1x/3siww87GJRIOB+LjdbVNB0qw0axbbAeii8/QQ9H6fTe7AXHMIE5SeIrdsjHJRaSwBzSUhgStAIhHUi3IztJYCqaxJznOIR9Q+09oettoGjYNGErBVhRbokH2vrCWoJBXDmwLhnOrqQQr27kMd0+8eh38DboMmnmLoFxL0WP0F7AIMANZdTvGQbfyUAAAAAElFTkSuQmCC",previousPage:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIlJREFUeNqs1EEOgCAMBEC24f9PpiZ4EAXKbmNvCE5aKMDdyytaK0TcP5nhO2FFD48m6/TFLMaeCrBagKlkLjPsFtmfGAvSGANK2AmUsQhMYTswjWUbWwbB3golwzQalZxCT3soo8yhSCh7yjRahf3G8Hx5Hy+euhmMX2wMGfqq8TONHd6eS4ABANq0IiO1h1jTAAAAAElFTkSuQmCC",
print:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHZJREFUeNrMlFEKwCAMQ83w4HryjME+yrpZu9axgB+KxNoXBclykVowBDnZSrKqdaJX6RUehu3sW8Zo4A2VrB4i6MVlPVxu6IHUVOYEFARfCp+CPQuJFmVG6Moe9kQmHYPfZvbK+Dw2/zKs3li8qdBDXe3dBRgAo1w4B94EMa0AAAAASUVORK5CYII=",print_off_phone:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAi5JREFUeNqslk1IW0EUhV9elLoQ01gQJBhB0WajiD/YgiBChdQ/1IUFixsRuuxC3Uq7FBHb0oUuRCG4sKARq1FxIQVR1NaI3ZSKQlRa0EJTcRGtIZ4r50mM0fgzFz4m772557yZzJs7pgGXR7smHoAyUAuegnRgAf+ADyyCMTAHjq4SibvmfjN4A1KjPBejXPIK7IFO8BEcR3bWowg8Bt9AHw3WQBt4AmwcnY3XrXyeArrBCnDEGkkRmAbJYAu0AzcIRfT7RZZAD6gDXRzZAnjOZ5dGIm8wS4MZUABGoxhERoj9CphnZeuINIkHw5zrcVAJ/Nrtws+8cep8ou65yWsOdQO8BEHtbhFk/k+QQ90zkwTOvWF2qN0vDg1x6iaISRVXhxdMaWpimnqiW61zHiWGNLVh6FXoXBUS84pNvrAtFBM7L3YUm2yyTdO53CT+KDb5a2xBYnLAi0eKTaxsD/SwabIrNslgu6tzU5MoUWxSynZZTIyC0qjYxNDziMln1oN84FRk4OSnsS/6YhLgNi3xASTe00Dy3/O36AaMDVJuroMsfqnmOxqYmZ8NvoN34bvwf/CCtbsGTIR9PzcNC/NqqNNA3QtF6wd4xv9H5nQV1ANTDHET+60yT/LLqRe1/H5lCXZzIYywhru4F22yOD0EmVymTSCP+V6WYl+s08o2KAYtoIMCeTFG8xu8Bf3g5KZHIunYCwZZbyq5JOXclcStyMdTzST/i8BVb3AqwADtY3iItA+LRAAAAABJRU5ErkJggg==",
print_on_phone:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZpJREFUeNq0lj0sBEEYhteFuIogkShQ0rjGX5QSEhyJil6DShR6rYi/REGnpZLgRBQ6Er8JjXaRSPwUrjo/hffdfCfrMrM3s7v3Jk9zO/s9u7Nz803ZwPKbE5BK0AtGQQ9oBtXgA7jgDOyCE/CpK1Ie8PsEmAcNiusUpYRJ8AIWwDr4KhycUBRoAVdgUyNQpR4sgQvQWkzSCU7lCcMkJfd36yR8gmNQ60RLDTjyv1FeUgG2Za7jCOvsSN0/yUyEKdKlTep6kiSYc0oT1k1SMiyrI1IOZ+s8FKtuhJJ0HIKADFHSHpdgcOVdNaSDkqYSCpjGhG7ZaubYVuAtZ0qytvNtIWCylDyqrvhv9he1FDBPCdnUHBNRCAFzTkkmaISqmIWAyVCyJ/3ASGQpeGV9NqccWBSs3sggrJnLb5Br4DbmfesOrPp34W8wLr07jrDOmNT917TuQV+x72MQ3t8v9ZTt91Ja8HVIwQ3oKvxbqA4SD9Kjp8GzYXGOmxKBa3ok+gEbYEv6TVp2a567qmQrcuVUcwD2ZZUq8yvAAMIsa7DrwJUCAAAAAElFTkSuQmCC",
search:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASlJREFUeNqslFFqAjEQhmcVFaknsUtd++RZ6qvnkRYtehTBegcFqX0qCHoDH1TU9I/9ZRONzcY68JFsZuYnmUxWlFJyRhW0wQysySfXqo54C/OjCLpgr66b9vVB2SeoxYZM2oA30AAVoucd+rSNmHNV8J2BS1D/40gJYxRP4xR8BDvWKvHVCNQYu2Ou5c+JSAvkQQ+MxW8TxuaZaxtvU7FOkpEGc2bnvkgXGrpFUAJbyWY6ds34kunIyW1W4HixAS34zflzgGDMce4SHHD+EiDY5PjhupTYaJtahgt5Mtom9jX2wtOLCWMUc4Kf3gMJfnrhP4c9pr+IietY+jm9gi+wBSsw5Vpas1TQEo2O27zFDofjnRor0X8a2xI5Ncw9BC9E7yFoif4IMABIq/DxBhP4ZwAAAABJRU5ErkJggg==",
search_small:"iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ9JREFUeNqUksFqwkAQhhMRX0KwZ0sP6sWDbxB8AaUnD03r0QcRQUW9F/ICJm+QQi/iQfDcQh9CC8ZvcCKbJYr54WPDzv4zk91xkyRxRFEUVVjeoQcvzkU7CGDped7RseSKGWOV7zU04Ae+NN6BGmyhS4K/jDkMQ6n4Dc8wggWHTtpNieUDxrCHNrFDai6DrxWHBBZmZk0yJ4n82xzeYJrGJXMffmHl3NZSz/TNTTG3IE5bzZPGYmja5iL6t80buVW9nFxprKNPlzEH+hz+nYq+ngnMzbJe1AAmWiHvqWZ6fvXIkMTGkDxZl+dmzMZ4SpVXqGtcBuNTuoGDneBqfkQ6LNcEhZ7KbLlwZVtnAQYAscZlWauJl+QAAAAASUVORK5CYII=",
settings:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAR1JREFUeNq0lbEOAUEQhm+vOI2KSq+T6PECXkHrQSQ6FU5Npdd6BP0lQqXU0ahIZP0n/7EZe7sEf/JdNrMzY2fvZgRa68BDDSxJzefv2qyAGbjqp660VT5JWAQ9cGKSM5iAmGvNvR59cxOGoAv2xokWoGr4VGnLtGdMKBO2QWI4rkDLcR0t+mRKmOORMNMOdIB642Up+u6M+OAeCN0fUAFcgs8UgTPXKhSbF4tzDA7gyHXkjBEly7LG+lUDi19uyUr8enqykrClJy0Lm84r+Wv5Es4ttqkzwnOHETvkSGLa3r7Dn382G9CxvBybFH23tpLTtlmL1ms6uqQhWm8tW+/nw0GOr74YXyMwFOOr7xtffxuwkrrxF1D3+d8EGABU63qIHuQdQQAAAABJRU5ErkJggg==",
sharethis:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIxJREFUeNrkU9EOgCAIFOaH249Ly7ShIdBmL+XmJgecAicQUXCsFgRWYLwhOfc2Il3YeYbB35vqdQeBB3MRaomKD80EXiI/T0j1ksd+zTB1KI4kzY9h8WqEqWqNb482+U5FqFXYJOgQDGGToEMYewgPqpMufK+HPyKMwrezBvCxkmnVC7cFjyscuwADAH7UMilM2cPzAAAAAElFTkSuQmCC",shoppingCart:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQtJREFUeNpi+I8KZgMxAyWYEWQKAwJ8AmJJIP7GQCZgAmJGKD4NxHxAHMhAAWBCYi+A0kmUGMiI5GMRIH7K8O8fG7Vc+AaItzNQCtBiKQQa2zeAGOR6HiJjNweqby66BBsQv4BKWpBg4HWonhhskj1QyRlEGhYIVf8U5CBsCnShCj4QaeBOqPoKcATjUHQGqiiBgGEwy78CsRBIjAlHXC2C0tEE4jQfKQ2/wxbLTFBaAYh/AfFfPK4TB+IfQPwPiNVg4vi8c/I/ceAIkkPwGsgKjbnfUIwNnAJiZvTShoGagImByoCQga1A/BlKEyNO0Ms/gRhU+nwBYl4ixAm6sAeIvwLxJCLFGQACDAC1YG+s5+MKJAAAAABJRU5ErkJggg==",
soundOff:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAa5JREFUeNqUlLFKA0EQhi8bvQj2FjaChRJsLLSwVsFGiJpU0V5IQHwIi6TV0jdQEDvFVxAEk6AYJIWB9IJiAnfrv+7cZXZv74ID3+3e3M7PbvLv5KSUniN8UCI2wDwYgT54AjfglnJmKEGLPdCVk0Ot2bfr+UseNFhBB5yCIigQRcp12LoG1SYEtVgQaNSiIPCcaIE6GDJRQ7BMH4axoIaLqPi0cttMtBwJ+uCDknVanBTlYYrWKNtXWipRpUTbOqYpaod5/DZlDwVZQ8UlCJgBctwMbB56YTjOhWFAtSpKSnCdXu4dfhyLahE15h3r7mhcy2GbP5gUwAwYxoWWXVN2rkMI/68WRhfM7c4rM+H4/GZpbTCg+aKXFUJ4GaILNA6m8HgGS2AHvDKBOTyPwC74ikXHP4lkO9+i8ZHbpmXYRsoH5w22LaVt04psYxu7xgTfMgRt0cjYhejqVeKrJ+UmCa6CK/AOXsCZ415zwYrdHJr04RscA+FobRHCag7NtPZ1brWvE7AMpsEsWKEcb18Xae0r4uAfDbac1WA5Pv3716AHRkSPclVak6j9FWAA3v+zk8hsPcQAAAAASUVORK5CYII=",
soundOn:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYpJREFUeNqklLtKA1EQhs9ucCPYW9gINrrY2FobwdLLpooPoCYg4jNYJK2WvoGCWFjZ+ACCYAyCIgkkkN5CzMLu8Z8wB2dP9uJl4NvLf2Z+zrJzxtFaq5TwwCazCuZACAbgAVyBa9aSQYYWW+BVFwflbNv18qUEmqKgA46AD8qMz1pH5DW5dsLQmH2AfZmUAq01wEiYJgwDXqCESoYJxbulrQvTwBh6oM9iI2dXMqReZ21AXiTUWHgq+EydYVriWopdl1uD4hxEqjhiFce4xqbfIq5VYy+49tjdz9mdSuwsivSY77UlXus5uHzCuQymwShnZ2ZHTsZBoNrQFd2u1d/DMw9kOOTnhX8YzvN9SIaP/LJhJc2CY3AHbgoMK3y/l23TttrmNuMMp52atmkbu7HrIvHlh4YHorHLRqyKo7fG2gq4AG/gGZykmMmjV7WHQ0sMhz3g5vSkaw2HVtb4OrXG1yFYBFNgBiyzJsfXWdb4Muz8YsAGeQNW4vHfvwRdEDJd1mqcM1H7JcAAgkrZ+lWfZkEAAAAASUVORK5CYII=",
stopAutoPlay:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVtJREFUeNqklE9Kw1AQxk3ERPAGbgQ3GjyBayu49E+6qgdQW7Aeo93qLSyIZ9ClINh25aIFC72B2GziN/ANTF/zom0e/PIyX2a+EDJvgjzP1wpWBE7JIdgGGZiAd/AEnqnNLzF0OAOf+d9Lcs7dehusg44pGII7kICYJNSGJq/D2gVDNfsG1zapAHnWAjNjOmeY8oEk1EqMXI6NaaqGEfii2FrCTGmydiJeIjQoDAo+84X4Yv38AT0uRXhk0C54uy5frLSp9yQYM0gqGO5THwe4/KAdY7AJZm6bcg88sT0IUpuFptsLj8w/V6Q3Yjjl/W4Fwx3uUzH8YHBSwbDG/c22Td/TNq8lsbZN37aNbezmCo19Yxo7VrFujt7Rikev7g6HrhkOVyAsMQqd4dD1ja97Z3zdgj2wAbbAATU7vh5840u5WGLApmUD1hLx7/fACGRkRK3BnIXaXwEGAM0jAdCI8i81AAAAAElFTkSuQmCC",
tableOfContent:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEBJREFUeNpi/P/3738GEGBiYgTT//5B+GQCJgYqAxYgZkQTYxxULhw1cBAaCEo2/9GSy2jCHjVwNGHT3IUAAQYAjr0LKlhyfeYAAAAASUVORK5CYII=",thumbnails:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGFJREFUeNpi+P//f8N//AAkzwDFBNUygkgGwoARShNUy4JFEzL4T8ACDLVMDFQGI9BAFiIigIGEyAK7sJGA5kYcbKxqGYlLhgMcKQ3QMMGFG5DUE1Q7mvVGs95gyHoAAQYAqoV0zZdGZq4AAAAASUVORK5CYII=",ZoomIn:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAUBJREFUeNqslFFOwkAQhqclQIieBBupPnEWfOU8BKNGj2Ki3kESIz6ZkOgNeICG7fpv86M77WItMsmX3e7O/MzuzCLWWinRBxMwByvyyrV+wF/hf3TANTB2t7m9O9CrE3RiDwxag0swBMfEza+45+yJMTsFb+j4Cc5+OVJKH8vTBAVPwIZ3ldbdERjQd8NYtR+LyBi0wC14Ft/y3BZom9G3xVhtrKblPelsDGpgihqVsxwyZl7ei9xFQ7cDuiD7zixkcRxx5nxX9O8qF9nP2hyzym+Cd87PVSY/2VS/RRKOi5DgPeejBhlecHwMFSXx2mbwh7Y59domqWvsj5peTOljGdP46R2Rxk+v+Z/DtkeNEZ/QsdxzmoI3kIEleOFaUmn6kmhUpLmP5XlRU28l+k9jK5FtwxxCsCJ6CEEl+iXAAJLd+/HKtW/TAAAAAElFTkSuQmCC",
ZoomOut:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATVJREFUeNqslFFOwkAQhqclQIyeBBupPvUs+Op5CEQNHsUEuAMmRnwiIcEb+IANdP23/qS7dMtSZJIvO+zO/N2dnUWUUrJHB/TBHKzJB+c6jngL80cLPIGtqja99gIufIJabMykHzAECbgi2n/kmrYpcyoFnxn4BW4PHClmjOJpnILXYMNaxb4agS5jN8y11kMReQANMAIz8dsbYxvMtY23qVgnOZKEOfP9tUAXGrot0AZp/pUsU869hWFAT8euGd+2QuQ0a3JMS98EC/p31k5cFBZxXLoEX+n3auzwnuPEdSmR0TbdIy7kxmibyNfYK08vxoxRzKn99C5J7adX/89hC/cPMXEdSz+nAfgEKfgG75wralYIWqJBvs1TLMvyOzVmgv80tiWya5hzCJZEzyFoif4KMAC/efQPcsbsiwAAAABJRU5ErkJggg==",
First:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNqs1ksOgCAMBFBqPJL337n2RAZZaKIg0JlOEzak4YVfwXLO6RVHaWdpW+LjGdCeDquQJoEEPmMsSRe/gBLpAipkCCiQKRBFXEAEcQMsAgEMAgMoQgEIQgNeJAR4EeuA8uUKQcjG0xB6hCmIuYwwxJYVCIoUSDcULfUuSPFoTSHV8zuElB+JLrRWifv974pAzUwuAQYAN+kj70iCYcgAAAAASUVORK5CYII=",Last:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJtJREFUeNq01k0KgCAQBeB8daHuv2vdncwgI8qx+Xk+cNE48EnEWMo5T4/UhzT5s5c1l7XWQhKQCPQ5KF4NSQBDQaNGhyDUqRA6ezQIP/sUCIqeMARlXwiCodcNwXgoFwTHKzZDcH4wJsiLmGYcRgMexDWlMRqwIKF7BqMBDcK4KbsIBeghNEBCqEALoQNnFsVssma7/rvuHAIMAI0+IPMsS++dAAAAAElFTkSuQmCC",
prev:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAH9JREFUeNq01jkOwCAMBMCY///ZVHQJ3itukRiJY+3q7idQZ5N6W1xB4LNWEKg/EAhwEBhQEQpQEBpgEQlgEBlAEQtAEBuYkAhwQ2LADSkmm5zjikHTxUcg5AnbEPoZLYiJFRliA1KClKinIbVpUZDTfmHIHSQgKDESjdm2BRgAb70bL7CjkJIAAAAASUVORK5CYII=",next:"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAH1JREFUeNq01jsOACEIBFCZ+9+ZrbY0zAdpJXlKIFjdfS7xH9QJA0ROv0RqC5pesgIx5YohkHkRBCHXhiBeyoJglFiGYDaMBCFofxpCOMwUlCIUtIH0BVxDRiBFKCBBaMBFJMBBZEBFLEBBbMDZ8danAq+BCVkBnB1vxSfAAGO9Gy+s3iuzAAAAAElFTkSuQmCC",
annotation:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHFJREFUeNrsUdEKwCAI1PDD2zf1gTcIN4Zoiy16iA4i0PPuUAZADq4ik4+wn/TPSkIwjI5+rg6a8Elkk8CKtPosDpk6apEBSYP0JuIi0WBEgsU5hn1lSkJ7Zf6oc8/vHe4dLrlDCZx+H+UYEK5qnAIMABXiRDLLjl5tAAAAAElFTkSuQmCC",tel:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAdxJREFUeNqklL8vQ1EUx29bgkUFKYNGDBUGBBFNRBgwE/4Bmx+LpIOYGCwigvqVGPwYWCx0IGLRSSeGNo1OTRhEJKKifgXP99b3JTevV1Nxk09f7/m+e+6555x3hWEYdjBmpI97sAgKgCA91F7BGWhVtBTyZ9jIPLaVBdUgDr6oyeeS1WGI4giwKWI5eAYfoMQSST7wMVI5LlSHERobrOGDI2r9nFeCGFgDhaCYERtmpHYhxKX4GTUifQT57OSzEXjAELjh/2bwBkaBV+46yR1mNRF6qUUVmxvs055kpD7OQ/KFdk4iGodV1OIa7YDaKnMqC/QihRzwQLFaWeACYdqnNA7ddBLjPFV9U1znwgVlwTFtt8CpcSjppWP53wO6TaGeix9BKW0B2oKWdsqIOjmkA79ypARte3Tq5PHjLNQyGFD71HTmYJWTzEsbHewoX0yUx9cN2fwbsjhqhA7m7ZOOK2jftSwOs/qypcZ5siS1FV2b3Cm5cynHD3BDlyZ3ZeZuusQ2gSvq16Aly4L86tDswVO+8w7mQNF/HEpywbxyVcn7cYZpsb5ry8ahibyFTiyFOQfToA/UgEHzExXZNixzuwmeMlzGE6kv4I8jD3SALlAHakECbAH/twADALn00gB0he6XAAAAAElFTkSuQmCC",
about:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVEMTExNTA4M0IwRjExRThBMTlCQjExMjQxNzkyNUQwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVEMTExNTA5M0IwRjExRThBMTlCQjExMjQxNzkyNUQwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUQxMTE1MDYzQjBGMTFFOEExOUJCMTEyNDE3OTI1RDAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUQxMTE1MDczQjBGMTFFOEExOUJCMTEyNDE3OTI1RDAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6OM/boAAABWklEQVR42qSUz0rDQBCHk4iJ4Bt4Ebxo8Ak8W8Gjf9JTfQBtC+JjtFc9+giC+B6CYNuThxYs9O5BbKCsv5HfwnSbjTQZ+JpkducjSScTGmOCgojBGTkCOyAHU/AGnsELc8shQodz8GH+D9lz4dbriw3QUwUjcAdSkJCUuZHa12PtitDKvsGN3lSArHXBXEmXhBkXZEOjRORyoqSZFcbgk8mup1Diy7PW4fpUXJJoMTEseUwbvscfcv0qYmtIPIJFUBwhKYoFa4M/F6wT2tM13p3LAR2TED8/MCdgC8w9d2HUnfo+BKnNI9XtJqgesT0R4YznezWEuzzORPjOi9MawgaPr7ptBjXaZmDbxm3sTgVhWzV2YpNN9ekdV/z0mu5w6KvhcA2iElHkDIe+b3zdO+PrFuyDTbANDpnT4+vBN74sl2sM2KxswGpi/vtPYAxyMmauxT0rtb8CDADsBb534J0EvwAAAABJRU5ErkJggg==",
phoneWeChat:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjgyRjY5NjJBNDc4QzExRThCM0NEODk2REE1MzlCN0ZGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjgyRjY5NjJCNDc4QzExRThCM0NEODk2REE1MzlCN0ZGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODJGNjk2Mjg0NzhDMTFFOEIzQ0Q4OTZEQTUzOUI3RkYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODJGNjk2Mjk0NzhDMTFFOEIzQ0Q4OTZEQTUzOUI3RkYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/bdTkAAABaUlEQVR42qyVv0oDQRDGb+MJNtFCURRLtfF8A2NjL1eYVtEH0CZvkCfIlSmCvoGdChGFvIKNYGMhaLDRQuWMWb+Fb2FzZPZWyMIv++/L3MzO7J3SWkeTbJXCvApOQBe8gB/2Xa5XSy0aD0kK+trf+tRFEnZwCIb80x2og2UQs69zXVN34DO4Ab4obAAliBX3h9SvSwY7fHLbF4pDm/qOZPCZgsTZ6JFx84T6p3EGTZZXmJ/HQr6UMLe6RSnL1sPNwJBLPbym7dOSCtsCZ+AK5GAKnHN9xMOQLB+DXKjNnPsjdXjkCG7BPuuvArbBgA/M6MA0+4zrA+oi95ZI7ZJ9UzjTpqOLTHgziPwe/IIH3ts9kIB58AlmwQK44EnVQI/jFLyBDzAX4+cbrBUSkDnjd085Kd/LQeJfIYcYrDlJaTEZMe9yyznrnVCDZWVjW2qTEvoyNgXcALtgCbyCG7BKTKEnatKfgD8BBgCLWEpg5iknGwAAAABJRU5ErkJggg==",
phoneWeChatShareHelp:"iVBORw0KGgoAAAANSUhEUgAAAMgAAAEsCAYAAACG+vy+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM1Qzk5NUFCM0UyQTExRTg5QkM2REEwOTYzMTdGRkRFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM1Qzk5NUFDM0UyQTExRTg5QkM2REEwOTYzMTdGRkRFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzVDOTk1QTkzRTJBMTFFODlCQzZEQTA5NjMxN0ZGREUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzVDOTk1QUEzRTJBMTFFODlCQzZEQTA5NjMxN0ZGREUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6wBfWwAAAqZUlEQVR42uxd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",
phoneHandSwipe:"iVBORw0KGgoAAAANSUhEUgAAAIkAAACWCAYAAADqpKuHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAABtBSURBVHja7J15lGRXXcc/99WrpfdtepmZzNYzmclkEUICgWBMBBIPIKCyCIILgghyBEEQFAWR4FHiARRyJEQ9HkVyEA2YwDFEcAHFHJCQPWEyW2Z6JtOzdnqp9b13/ePe111d/V7V26q6u7p+59TppV7d9+rd7/v9vr/l/q6QUtIm8lvAvwGP0pFExWiT7/FC4FPAWzpTmryINtAkWa1BrgPOAdcCBzpT29Ek1fJuDRCAEeCdnWntaJJquRT4DjBc9b9ngBcAj3emtwMSgK8Cr/L4/+eAd/h8xgQGgB4gp18ZQOj3ACzAAcpAESgAC8AsYHdAsn7krcDtPu8tADcBTwPPAi4G9gJbgCGtefqBXqAbSPmMY+mx5jVAzmvecxL4kX49CZzSx8kOSNaOTAL/CWyrc8xslZZoppSBQ8AjwIPA9/XrQgckqyt/D7xpjV6bDZzVQLlXc6aH17OZWo8geS3wj+voegvAQ8A/A18HntB8pwOSJskm4LuaY4R5sqUmplT9XHEv6t2nBAHzbeAfgLuBmQ5IkpdPAu+JoP4rHhMtAgAhic/4/f8w8AXgb4EjHZAkI9drGx+FiOY1WOpNcqMJb/RZiQpOyoDncT2qs5pj3aoJcAckEaUH+Cbw/BgeyKyeoNoXHn/XTrSsAUMjsIgQgExrwJzRmuWTwFQHJOHlD4GPxPi81PY/pUljRb9s/XL0Me7NMFgKrpn6cxn9Mqs+VwmgOYJqpAwqD3UU+IyOAc11QBJMrgL+HRX8iiNn9I0/oX8/o4EzhwqEWVrjGBoIaaBPv4aAMWACFZDbqmM0O7WWc0FV0eP4EeUg4Mnqc38P+Jg2sR2Q1BETuAd4cULxi2v1zY993zRoN2lP6yrgSmCXBk+qBjB+gBB1ANOlP/93wM2oSG8HJB7yLuDPExzvHuClTbzeLcAlmmRfB2zXmqZU5Yp7kdtabkQVue1FRXP/UPOyDkiqZC/w38BowuO+DPjXFlx/t9YwPwm8RAPIQCUMg5ihauDktCn8HPBpraU6IEFFVV/bhHHv1UCJHCZ375kQgWNsQxooP63NUlprFxnCDKW0Cfom8PvA9EYHyRu1O9gseQ0qTB4YFI7j1AWJEALDaFjDlQaeA7weVfOS02BxPEyNlxttaPPzBPAHqHD/hgTJBCr0vquJ5/iOJsMN1bZt2wS9R0IIUqlUUOL77CqwmNqceGkTL1PUhSqu+jjwrY0Iks8Bv57AOBYqmnkSVe/xdM3Pe7Tr66s5ot4bV6sENEfXAr+oCa8bu/EK9MmavzP6O34auGsjgeRlqMRXI71d1gA4p19ndfxjCjiufz+hYyAF/QqUeXUcZ5lp8ZGMEOI5UsqLUAVJ/6evYZmkUqmgQOnWfOVnUAVRhRpA+MVX0vrnbcBXNgJIxlGFRPuA03qCn6ma+OPAMT35F/R7M3qSEvkSQQAihHilEOJDtm0/RwhMQxg4Uh4BPgB8ufZ4wzCCcBVXtgO/pHlLpQrYfi6yGxU2gL8B/qXdQbJd35zqiOhCq04egHsMAJ8ul8u/srCQZz6/QIoUPX3dDA4MuGbqjcAXY3AV14t5OfAKVPS1UqNZvThLSr9ubwZHEW20gq+ZABkWQny5WCq96PjUScChv78PA4Pzz8zQ19fPlvExpJSHgefhEx01TTPMZV0KvAHYrD0gP01SrVFsbXp+0AFJgiKlxLbrhkx6QdwJzo1TU09jWTbbt28lk1EVC8VikUNHn2JiYoyh/n4cR77Kj0iGND2g1hG9QZPakg8vqf6Z1tr3VuCppO6R0QFIw5jaJwxD3Hju3AUqdoUdOy4ik8ks8pdcLsf46CbOnZ9xCcT2epwn5EN5Dvg8KvJc0YQ2X/OzUPX3rDY7r9MBvA5IkiCqDeSXhRDvWFjIMzM7y7aLtpJOp1d8zjTT4DigADAb85xentyXNKl31wFVA2Wh5u9ngEHtLaWSuE9mR4P4yhXALUIIzpw9y0B/H7lsribyqn7Ozy+Qy+YwhGE50vlho3M7jhPW7EjgG9rkXK3jI3jwFPdnAdgBXIMKTHZAkrSbi8rc3gqMCiGoWBWy2QEPjiEoVyrMLSywdWIckP+LWrDV8BpCgsQFyn9ot/gKltfternIJe0tPqU9xo65Cao9Aqr7m4Hr3Khpf28fp0+fXSSfrlsrhODUqdN0ZTP09vbgOPJ2lsLrcU2dn7jreCo+vMR9zetjnkfMBWrGRtEeIXIwPw+8uzphNz42inQEh48epVypYBgGjiM5dnyKQrHIxMQ4UspvAXe04utoE3KkCij5GpBUE9l+4LKOC9zA/of4jvuBew3DuKhQLFEulRgaGgTAsmyeOj5FqVQgbZqUKhZCGEzu2EYmkylJKV8M/E8oW2/GsvY9qORgD0tZZDziKIbmMN8m4jqftgVJQO5RLTlU0u960zSZL+R5+OHH2b1zB2NjmxbHzBcKFPJFUukU/X19KvMm5aeA94a9xhC5HT/ZhFoQn2J5aqKWo6RQSc0fdECiJUx6v0r+BPiAa2IMw+DU6dMcOfQUu3btYGJibJE9Lmop5SEdRGVyz4S29eGDa16yQ7+qs8deCUEDVX8Sula2bbybmOn9VwHvq03vT4yNkTZMDh46wrkL59m6ZTN9vQPYjoWxdNjHogAkQZlCZZF7WVl0XZvfGY8CkrbQJBFMS7XsBe4VQuyoBYmUEiEExUKRQ0eOYhgpLt6zG4TjTsfdGmCRbmLIxF8jfrKTlUXWXvzkUKOAX2SQBAg+LXMPW6U9aksLQ0oa+JoQ4iYvgLj3xjAMkFCxLKoOmQN+AnggzndIgJe4MooKxTs+JgetTeZRZRfJm5sgYHKB5H5p9ylxn8hmxD1iyoeFEDe5MQ8/sSwHBAhDLIVZVUvQB5LQgglpkwsa9GYDbZJClSCUEtcklmVFUqflcplisURvb8+KiUilUhSLRRxH0tPT3WxiWisvA74ihMgIIaRhLLGMai2iJhIkTvXdfgzVO3Ym7kUkaHJcs9NXx9NxY2MLYa696cE0uaiFhKc2mF9YYOrEyVDaIwGAbAc+axhGRgfNwqq5j7A2e4u4kdeyflW0xijX/DTCzP2qezcqeulQLBZJp9OeBcRxC5M9HozPCCF2uU9y7bju31K6q8hlNcS/BPzTWuXwGiRplnc4qHWHRVVsRa55kCxyGLnkpRiGsaiCY3ouXvJ7wCtrTUrt9SjwgINT/cidRi23XMtSqQFEPX4i1g1I/FxawzBI2EX/KdTqt0WNpbXW4o10weOetuYxvAW1MGpNh4zw7uwEEdt6relgmuM4SXpF46j0f9YFR9XYYiX/Ufe76o379OfXgwQyI2uGuK4REajGMLvrubtKa0mv+2xpM1VgA8pGAcnvAK+t1iBCCFkLENfMKMK67O2/RhX8bEjZCJVpLwE+4pFME14ejcebx1FrbptjFzQ4WxWl7miSlbIZuFUI0VUolTh95iylUsnHzCxxEWc5Xm4mZBi7o0nWlyn9DLA3lUrhWDbTp85w/PgUQ0ODbN26haxeGlENEJewarlHm5oNLe2sSd4vhHh1uVzm1PQ0vb09XH7ZPvbs3kWhWOSRx54gXygsM0EuFxEKJHngw7SgJ3zCcaAOSALKDcAfufGQY8dPcnzqBMIwGBgY4NJL9jHY38+jjz5OxbJ0PMblIota5FbUJgJ0NEn7yUXAXwIZKSW5XI79+y7m5Klpjk2pHrpCCHZP7iSdNjl48BBLBmYRIE8Cn2hZUCNeuUMHJCEjringL1BrZ1WAw7Lo6+vl8kv3c+bMWX504CCFguptt2f3HkqlCqVSGUMsi1B/FI9+I802OWsVKO2mSd4L/GztPy3Lore7i8v276diWTz08CMcO3aMXC4j91+yDyEMpFz0ae4yTfOLCdSetg1Q2gkk12sN4CmWbZPJpLn0kr3s3LGd02fO8/37HxD5Qh7TTCGlFKlUatY0zQ8fOnRI3nbbbTz22GNxlz1EAspaKyltFxd4G6rXWlejCRBCMD4+xujoJs6dv0AmnUZKG9M0mZqauuXOO+988Pjx4xQKBa655ppV+TK2bSdVSd8mIJES6cg42w4ZqK7RlwTlOJb2aDaNDC8Cp1wuP3DHHXd89pFHHhG9vb0yAh9KXKM0KqvcICCRIp1OvySXy+2QUn41Ill8nxcPCRObKBQKzt133/35w4cPb5qcnNwzMjIi+vv77dHRUQNVyDOL6tq4sBE1StNrXEvlMsVCkb6+PmoeikHgFtM03zo7O0ehVLpveGjgFciVQKnzNN2EaiaX80Mh/nvYIIQgn89z6NCh6YMHD94/MDCwa2RkZHB4eDg7NjaWyuVyKcdxJKrkbw61IfVdqE6HLevInGBF/boCyc5yufyFXC73QsMwODV9mqxamf/HAvGhgMNvRzV2idQU2C3SPnr0KCdPniSdTtPV1UU6nSaTyTAyMsLw8LDf5DyF2hzhrlZN1GpqlBaeVWc6pdx34cLMPRJeaBgG8/MLWJat19WKm1jqTVpPMqiIaOSu0Y7jyOnpaY4ePcrc3Bz5fJ75+XkKhQJCCDKZTL2ndweqzvUVG8E9bhlIhDBwHGffqdNnvmam0/t6urtxHIeZCzMMDvS7Na17gd0Bhvswqt2Tl3nx+n2FFpmdnRUHDx7k7FmVGS4Wi5TLZbLZLCMjI/T09DS6hjTwZ6jNktraPTZaAxCBbduXnjl77mu9vb17hgYHkFJyevoMad0ARi+06kdt+VFPXoeqEvM8lc/vK8zMk08+yZEjR8jn8xSLRWzbZnh4mG3btjE4OBhUte8Ffq3VXk/bgUQAlUrlWVNTJ76ey2b3DA70U7EqnJqeRiIZGx3BcZatpam3tfzV2syIqGB1HIepqSkeffRRZmZmKJVKmKbJ9u3b2bNnD0NDQ2EXS70GtSCqRRGDRFYurh0XWEpJKpXanU6bdw4NDe4slkqcOPk0juPQ3d3N8NCgTm4tU6HjPsNtRu2huynONT3zzDM89NBDnDhxAtM0GRsbY//+/ezZs4eenh7qLbXwkWejmt98r5VAaWU1m9nEca8DXm8Yxs8NDAxsMgwDq2JRtiqkzTTptOlHxuZ9xnwnMdo6CSGoVCocOHCAxx9/HMuymJyc5KqrrmLHjh1ks9k49v75rQSJa3YSXB7aUpAMas7wNlQHHrM6emimTcy0uRj19BGvdS0TwK/Gvbjp6WkefPBBbNvmyiuv5Oqrr2Z8fJxUKhWXEF7Vap4QsdXnqoJEAG8BPljjnbgBLOk4jjAMQzqOI6Tf4mBVx/Ggx/9fr81NLC1y/Phx0uk0N9xwA1dccQUDSxsHxP3+k9XnapUH0qrQfVIg+Tjwu+61e7mlUkpp27aoer925bsAvsrKTjxZ4NWN3FoP0EpqNhMaGxtjYmKCLVu2xDUvtTIgpcwJIYrlcnnZMtVmi23bTY/IJhFxHUCtbnN3fhJ1Jq0eWKdQvcdqK9OvRfVWb7QqrXZ3qRUgqbbjdbSZl0st/c4lhDBKpdLBfD7/gmPHjp3t6upicnIS0zRbplFC7tS1KppkLypEblVNpNdkNXLDP4r30oVfYGn3bkK4v6L2WlKplMaG7+SHNbFSSmnMzc2ZBw4cyMzMzDA5OdnyPIvrFjdLoyQBkt2oxm6FAE+kl2SAv9KvWtmB2nLMYanNk2Rl4q524oXfzdTvOR7aRuC9G3gjXmDPzs4OLywsfN40zdNCiPtQ29XOtJrM2rbdlCKpJEZ8tg8XaWQSQHXmuRf47TpcZytqeUNQ7lFPQ1QDxKljUoJoGCGEkJVKxZmdnc3Ztv3ydDpNNpt9sxDi7cBvaDPcUrEsK3GNkgRIrmZpF8pAT7SWPuC/gDfh3Q3wzdqrybPUo5QQ2kqGuJZIY0gpyefzLCwsOFJKq6+vj6GhIWEYxpVSyq+g6lzuWw2NkmTWOC5ItqAyseU6E+m1i3Yvqr3l2/DugXqF5iiVGi4iG5BLEUKLeZkbAlz/ohqxbVvOzc1RLBZFLpdjfHwcXdU2p2M7H9RAaXlWzk0GJkFo44LkWTqAVg5gbqq3Kb0NtfvlvA9HuRkVnp9vwBX82j358ZTI3MNrPMuymJ2dxXEcRkZG2LRpk9t4R+hrvwrVOvM0qyBuwC2uOx4XJFdo0jrbQHXLKoDMoLYM8wu/vx24UY8pCe/NNIyXNBg3MIiKxSILCwsim80yMTFBV1dX9edsVGF2/2qBpBoocUxPHJCkdQyjyMr1ssLnabdZ6gLoJVeialYL+tgoXKLRBHsBpt41+8WX5Pz8vKhUKoyOjkrNRapjI4b+DjarLG5+LCpQ4oDkIlTCrdDgRoiamEiZ5duDudKrvZk+VMFxWNIZRBME0TYNzyuEEJVKRc7NzYnu7m42b94ss9msV2DyguYnrAWgrAZIbtATW64XkfQAie1D5N6F2jNuzuOJrsc9/MhyUJAQAZCiVCpJx3HE+Pg4fX19fvf2MC2usG+GexwHJNfpG2oFeKpFA5BcD7xV8xQ7BBgICZJAhJTGaQQhpZQDAwNieHhYGobhpUXMUqn0uG3ba6rPmhCC7u7uUGQ2Kkh2Ac/VT71Tx4vwA031FQ6i2mamNb8JE8cI6uVEBYwnSN1uBdlstjrCWX0+o1wuF+bm5u5fa0s2XSLrZsCbCZIXada+EPDJrJ7MLpZvbPx+1JbrczE4SBiuUg9otdfua8RN06wuC6gd0yiXy9P5fP67a7GtxPz8PJVKhZ6eHrq6upoGkut9CGiQCcsA7wG+hUoOvhS14bET0BMJk7kN5bF48b1GJsfrs1JKs1gs/rBQKBzJ5XL09/ez1sSN8TQLJJejajobeTV+E50HfkyTVCvEOHG0SJgYiF/iLxAJFkIIy7LKpVJpvFKpXNrb2/vY6OhoS4uRkpYoILlOezVzIT2OanG3JhUJEc1GHCiKJooMunK5bJVKpUkhxO1CiPfYtv29JrRAT0SCuMVhQZLWpibfIIAWxgw06zNJHRsEXItgkVJSKpUol8tWOp0e7u7u/lMhxFuklIdZpxIGJIPAHlRSr8jyVHuQIFTUPElc8xEXdBAicWjbNoVCASml6O3tnevp6RlDRZF/kzUQfW02SCZRCb2uAAEi0cBrEHXsehRvxSvTHCR2EtXceR7rFlyXSiWy2awYGBggnU7PojZ5vhHVF7atQXI5sE9rkUoIGx+Fa4TRHkH5SJjYSBTzKaWUolQqIaWkv7+/2nMwURV232AVygZaCZKdqGUNBW1qwk5A0kAKmskNYi4SCdA5jrO46Lyvr69627aCvn/bgGPtDJI+VLmh5QGSRjmROJxC1jERYdzYJF1pL7Ml3XUw/f39IpvNVn8vR9/r7e0Okgv6NUrwelZC2vxmeD1BgRqEeNc9nxCCnp4eMplM7ecEKog43O6c5ElUzmWU5etrwhTzBDk+iQBZVM0G4dYNLQNWKpUil8t5ZVmFDh90tztIntDHP5elcHwz4hhhC4iSjHOEqZf11SY+wHVYpy1Rw1z0SdSSy1nqL0lISv3XA2EjLuO1g2XQGpOkCpxqx3P36W1rkJxDlR6eQ2Vx7ZiaIgyxDKMVomoYv61RiTmWKyXW6R5+YdXfPPAjVHLOK1bSsFiH8AVEcTyRqMf6aS4R4D2/sco0rpdpC5CAag3h8pKgAaukVXgU0xXnGqOG/6v/LrJG6l1bAZLDqM7N3T4EthGhDVLjESZcHyoBF3OcMGNWj2dozTuzUUDyNHAU71YTQRdL+b0XZxVemKc66iIt0YBbVY9vVP0vhcqcn90oIAF4BLi4yuQkwQ0akb8wXlQQfhHHLQ+ijWqJ/RwqGLlhQPKEJrEGjRc6JaENwgKtngmgDk8J4n5Hjb88Tf2VBW0HktPAIVSNaiXC5AY1UUkWMkXxdIICpNHDkUb1o2cjgUQCB1CZTSukGQjiMjeamKQ4RRgt6AeIIB5UGdXua0OBBB0vuVaPEcbNDBvdTDqZFyVmEgQ89e7xWVTEesOB5LxWobtrbG0QIFSvlEsSJFHiJyKh4/wkpcMG5zciSBxtcnaw1FRPNGkCo5qaJD2voC5+bZ1NgXW+CXXcrORR7dZ1sbzGJO6THLXRTFJlikGIdRB32ESVWBzdyCCZAU6giqStgMGqIEXLQQiriEBA49S9iggaxgLuZ51LEvUNT1aZnCQmJW5sIqhmCZuNDgL0ag2VAY6sdy2SFEhOalLWg39ZY9RAW1g+EFQjxM1ENzrOQIXhf8A6rI5vBkjyqMDa5fi3DW+V2xq0tVWS9SteIE5rUn+CNpCkyukeQm1WNEK0NTlBuEYQophEv9a4IDFQKYuHaBNJCiQVrVp/XI/pBABB0PfDTljS64bDasaM1iIXOiBZKWeBh1FLQa2QnoAXH/GKOfiBqRmdjqKYS0N7fI/RRpJ09fZhVP3rFpZXriW9SCrKoqwgicS47rOJypDnOyDxFwk8ilrtl/XwdqL0h49DboM0pGnUtjPoOQ1UkfgR2kyasQ6koJ+my1i580NQMxPEe4lCjJMwL35jGpqLVDogCSZPo3bU2szSuuEkwutBF1HF6ZESBXgpYLpdXN5WgcTlJz2ovI4kXosIv9B7XB4TtqbECyTurl6HaFNpJkjK2j7vreEXQVR3oxV7UQJcRARoI8ClgFOs00r41QYJqHD9KdS2JFaEeEaU/EqQwFjUwqdaEAvUyrxjtLG0YgHzCdQaHdfbibJQK0zALek4SD3NZGj+VeiAJJ5UUEnAbT5PcJhoaxi+EAU0YbwsA7Uqb5o2l1a1QphB9X4doEGXZeKF1ZsRsKu3a9epdnR5VwskoPbay2qiF9U7CdOSIgyIwkaG3VKA82wAaSVISvqmDtdwk7geRj3g1KuCi+P5OBr0TgckycusJrFpvEP2UXuW1ANHmAVWQU1VCf89BDsgiSk2akeKIQJu0BzjqY/qLjci0EJzLKcDkuZJXmuTVMgnOK5JCtuF0e+YCm2W5V2LIHF0XKE7hDaJ2tMMwtfU1gOluxWL0wFJa2InNv69PaKahLBFz1E0VpkNJqsJEiuGdghKWqN8tt71yA5IWmtyLOrscRfAJDRyaesVEzUyY7Wditz3rY1malYTJO4TmSH4nsJE0BRRE3rueWqvo8IGlNXsUBx0i/ZGZQJhC5qCaCG/Y+0OSFpvcuyQpNJhZTdq2SBOEmbLk3oEuAOSVTI5dg0viVLm6NXD3W+ya88PwYuX5EbkI6sNkuoJlR7aIq7UjhXEla5dQegEIM8dkLRAmzgeT7eMAYxa4ulXL+L3P7+aF6cDktUFSjPHkhFAJkO44W0vYr3uet2R1onRuQUd6YCkIx2QdKQDko6sAfn/AQDMk13LJRgmswAAAABJRU5ErkJggg==",
report:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABD0lEQVQ4jc2UUXHDMAyG/zAIhIxBGSwMOgYLgxVCIYTBMgZl0AzByiBh0DD49mDdVecqiR+rO905tvxF9i9ZenWr/AcQxXSSjja+SPp5glRVPvUAOu+AiWebgE8fu2pADXxloBk4m88ReAvYBxmNLpsxWD9vAZtgwx34AE7B2iXPMBJlkHSQtEgag//Wtv4u6U3S7EVZU7mxDa2Nvd0kzZJ+bVyk8i04Xm5/FKgsuy+AFhiAxUEWm+tczC5wsQzzuvReW8y9BIht2AL6itgF9qSibTdgrd1hXwIUqSumjeNOFlMkilf6OwAO+R2XAhtS716Bo/nV5g5rwL3nq5Z0UipwKXVOr9RFD8haYb+k/QOqf1jCsGrT2QAAAABJRU5ErkJggg==",text:"iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAA6sWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTctMTEtMDhUMTY6MTk6MjIrMDg6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNy0xMS0wOFQxNzoyNTozOSswODowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXA6TWV0YWRhdGFEYXRlPjIwMTctMTEtMDhUMTc6MjU6MzkrMDg6MDA8L3htcDpNZXRhZGF0YURhdGU+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpPnhtcC5kaWQ6RkQyOUEwRjg0NDFGMTFFNjhEMjhCRUU2NDFDRDQ5ODI8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6QmFnPgogICAgICAgICA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDowY2IxNjk2Mi1hNzhmLTRjNDktYWFlYS0zN2IxZTEwMmIzZTQ8L3htcE1NOkluc3RhbmNlSUQ+CiAgICAgICAgIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjMWYwZDVjMC1jNDY2LTExZTctYTZjMi1mMTU4MDNkMzRiYTE8L3htcE1NOkRvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+eG1wLmRpZDo2ZjU5N2I1MS0wYmU0LThkNDItYjlhOC0yYTI5MzVhMDhmMDc8L3htcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkhpc3Rvcnk+CiAgICAgICAgICAgIDxyZGY6U2VxPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jcmVhdGVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NmY1OTdiNTEtMGJlNC04ZDQyLWI5YTgtMmEyOTM1YTA4ZjA3PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE3LTExLTA4VDE2OjE5OjIyKzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjBjYjE2OTYyLWE3OGYtNGM0OS1hYWVhLTM3YjFlMTAyYjNlNDwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0xMS0wOFQxNzoyNTozOSswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjY1NTM1PC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj4yMDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4yMDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+bm+vhQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAaklEQVR42mL8//8/AzUBExK7gYGB4T+ZuAFmCCOSCyl1KiMDAwMDCy4JNPCfCDkMLzMwMDA0kuEyFD2MREYKPhcy4HMhVWN51MBRA0eUgUo42NiLHDx5mVAmZ6SLl1lIdQEhAAAAAP//AwBzaCFWwov6nAAAAABJRU5ErkJggg=="};Class("PhoneButtonQueue",{create:function(b){this.container=b.container;this.extended=b.extended;this.topBar=b.topBar;this.bottomBar=b.bottomBar;this.buttonWidth=b.buttonWidth;this.barWidth=b.barWidth;this.buttonTop=b.buttonTop;this.buttons=b.buttons.clone();this.buttons.each(function(b){b.freedom();b.hint=!1});this.initTopBar();this.initBottomBarArray()},initBottomBarArray:function(){this.bottomBarArray=[];var b=this.buttons.length;if(6<b){for(var c=0;5>c;c++){var d=this.buttons.get(0);this.bottomBarArray.push(d);
this.buttons.remove(d)}(b=this.pickButtonsByName("more"))&&this.bottomBarArray.push(b)}else for(c=0;c<b;c++)d=this.buttons.get(0),this.bottomBarArray.push(d),this.buttons.remove(d);for(c=0;c<this.bottomBarArray.length;c++)this.bottomBarArray[c]&&this.bottomBarArray[c].addTo(this.bottomBar)},initTopBar:function(){this.btnInstructions=this.pickButtonsByName("instructions");var b=this.buttonWidth+10;this.btnInstructions&&(this.btnInstructions.setPosition(this.barWidth-b,this.buttonTop),this.btnInstructions.addTo(this.topBar))},
pickButtonsByName:function(b){b=this.buttons.find(b).get(0);this.buttons.remove(b);return b},autoCenter:function(b,c,d,f){if(b&&!(0>=b.length)){var g=b.length;c=Math.max((c-d*g)/(g-1),0);void 0==f&&(f=0);for(var h=0;h<g;h++)b[h].$button.css("left",c*h+d*h+f)}},sort:function(){this.barWidth=Math.min(windowWidth,340);this.buttonWidth=40;this.barLeft=(windowWidth-this.barWidth)/2+7;this.autoCenter(this.bottomBarArray,this.barWidth-15,this.buttonWidth,this.barLeft);this.extended.buttonsArray=[];for(var b=
0;b<this.buttons.length;b++){var c=this.buttons.get(b);this.extended.buttonsArray.push(c)}}});Class("PhoneToolbar",{initBar:function(){this.topBar=$("<div class='phoneTopBar'></div>");this.bottomBar=$("<div class='phoneBottomBar'></div>");this.parent.append(this.topBar);this.parent.append(this.bottomBar);bookConfig.appLogoIcon&&(this.logo=new PhoneLogo,this.logo.setPosition(10,0),this.logo.addTo(this.topBar));this.initStyle();bookConfig.toolbarAlwaysShow||this.enterToShow();bookConfig.showGotoButtonsAtFirst&&global.phoneGotoPagePanel&&window.setTimeout(function(){global.phoneGotoPagePanel.show()},
20)},initButtons:function(){this.buttons=new ObjectPool;this.sort();1>=this.buttons.length&&bookConfig.enablePageBack&&(this.buttons.remove(this.buttons.find("gotopage").get(0)),this.buttons.add(new PhoneBackwardButton),this.buttons.add(new PhoneFirstPageButton),this.buttons.add(new PhonePreviousPageButton),this.buttons.add(new PhoneNextPageButton),this.buttons.add(new PhoneLastPageButton),this.buttons.add(new PhoneForwardButton));3>=this.buttons.length&&!bookConfig.enablePageBack&&(this.buttons.remove(this.buttons.find("gotopage").get(0)),
this.buttons.add(new PhoneFirstPageButton),this.buttons.add(new PhonePreviousPageButton),this.buttons.add(new PhoneNextPageButton),this.buttons.add(new PhoneLastPageButton));6<this.buttons.length&&this.buttons.add(new PhoneMoreButton);bookConfig.InstructionsButtonVisible&&this.buttons.add(new PhoneInstructionsButton);this.buttons.each(function(b){b.setCallback(this.afterButtonClick.bind(this));this.setButtonTitle(b)}.bind(this))},sort:function(){var b="shopping thumb table goto zoom bookmark number sound search print annotation wechat email btnshare download language home autoflip select about report".split(" "),
c=[],d=b.length,f=bookConfig.buttonsSortXML;if(f&&"object"==typeof f)for(var g=0;g<f.length;g++)for(var h=f[g].toLowerCase(),k=0;k<d;k++)if(0<=h.indexOf(b[k])){c.push(b[k]);break}for(f=0;f<d;f++)0>c.indexOf(b[f])&&c.push(b[f]);for(b=0;b<c.length;b++)d=c[b],d=d.toLowerCase(),this.addButton(d)},setButtonTitle:function(b){b.setTitle(b.caption)},resetButtonPosition:function(){(new PhoneButtonQueue({buttons:this.buttons,barWidth:windowWidth,buttonWidth:40,buttonTop:0,topBar:this.topBar,bottomBar:this.bottomBar,
extended:this.extendedBar})).sort();this.extendedBar.resize();this.extendedBar.hide();this.buttons.each(function(b){b.changeColor();b.changeCaptionColor()}.bind(this))},initStyle:function(){bookConfig.appLogoIcon||bookConfig.InstructionsButtonVisible||this.topBar.remove();this.topBar.css({background:this.color});this.bottomBar.css({background:this.color})},initExtendedbar:function(){this.extendedBar=new PhoneExtendedBar(this.parent);global.moreBar=this.extendedBar},onResize:function(b,c){this.resetButtonPosition()},
getHeight:function(){return bookConfig.toolbarAlwaysShow?80:0},getTopHeight:function(){return bookConfig.toolbarAlwaysShow?40:0},getLogoHeight:function(){return 0},getBottomHeight:function(){return bookConfig.toolbarAlwaysShow?40:0},getWidth:function(){return 0},initEvents:function(){this.topBar&&this.topBar.bind(_event._enter,function(){this.enterOption&&window.clearTimeout(this.enterOption)}.bind(this));this.bottomBar&&this.bottomBar.bind(_event._enter,function(){this.enterOption&&window.clearTimeout(this.enterOption)}.bind(this))},
show:function(){this.visible||(this.visible=!0,this.bottomBar.animate({bottom:0},300),this.topBar.animate({top:0},300),this.showGopageButtons&&global.phoneGotoPagePanel&&window.setTimeout(function(){global.phoneGotoPagePanel.show()},20),this.showExtendedBar&&this.extendedBar&&window.setTimeout(function(){this.extendedBar.show()},20),bookType==BookType.singlePhone_book&&singlePhoneBook&&singlePhoneBook.setShow(!1),bookType==BookType.phone_book&&phoneBook&&phoneBook.setShow(!1))},hide:function(){this.visible&&
(this.enterOption&&window.clearTimeout(this.enterOption),this.visible=!1,this.bottomBar.animate({bottom:-60},300),this.topBar.animate({top:-60},300),this.showExtendedBar=this.showGopageButtons=!1,global.phoneGotoPagePanel&&(global.phoneGotoPagePanel.visible&&(this.showGopageButtons=!0),global.phoneGotoPagePanel.hide()),this.extendedBar&&(this.extendedBar.visible&&(this.showExtendedBar=!0),this.extendedBar.hide()),bookType==BookType.singlePhone_book&&singlePhoneBook&&singlePhoneBook.setShow(!0),bookType==
BookType.phone_book&&phoneBook&&phoneBook.setShow(!0))},showOrHide:function(){!0===this.visible?this.hide():this.show()},enterToShow:function(){this.show();this.enterOption=window.setTimeout(this.hide.bind(this),5E3)},addButton:function(b){switch(b){case "shopping":global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&this.buttons.add(new PhoneShoppingCartButton);break;case "thumb":bookConfig.ThumbnailsButtonVisible&&this.buttons.add(new PhoneThumbnailButton);
break;case "table":bookConfig.TableOfContentButtonVisible&&this.buttons.add(new PhoneTableOfContentButton);break;case "goto":this.buttons.add(new PhoneGotoPageButton);break;case "zoom":bookConfig.ZoomButtonVisible&&this.buttons.add(new PhoneZoomButton);break;case "bookmark":bookConfig.BookMarkButtonVisible&&this.buttons.add(new PhoneBookmarkButton);break;case "number":bookConfig.PhoneButtonVisible&&this.buttons.add(new PhoneNumberButton);break;case "sound":(bookConfig.BackgroundSoundButtonVisible||
bookConfig.FlipSound)&&this.buttons.add(new PhoneBackgroundSoundButton);break;case "search":bookConfig.SearchButtonVisible&&this.buttons.add(new PhoneSearchButton);break;case "print":bookConfig.PrintButtonVisible&&this.buttons.add(new PhonePrintButton);break;case "annotation":bookConfig.AnnotationButtonVisible&&this.buttons.add(new PhoneAnnotationButton);break;case "wechat":bookConfig.WeChatShareButtonVisible&&this.buttons.add(new PhoneWeChatShareButton);break;case "btnshare":bookConfig.ShareButtonVisible&&
this.buttons.add(new PhoneShareButton);break;case "download":bookConfig.DownloadButtonVisible&&this.buttons.add(new PhoneDownloadButton);break;case "language":1<language.length&&this.buttons.add(new PhoneLanguageButton);break;case "home":bookConfig.HomeButtonVisible&&this.buttons.add(new PhoneHomeButton);break;case "autoflip":bookConfig.AutoPlayButtonVisible&&this.buttons.add(new PhoneAutoPlayButton);break;case "email":bookConfig.EmailButtonVisible&&this.buttons.add(new PhoneEmailButton);break;case "select":bookConfig.SelectTextButtonVisible&&
this.buttons.add(new PhoneTextButton);break;case "about":bookConfig.aboutButtonVisible&&this.buttons.add(new PhoneAboutButton);break;case "report":bookConfig.EnableReportButton&&this.buttons.add(new PhoneReportButton)}}}).extend("Toolbar");Class("PhoneExtendedBar",{create:function(b){this._super(b);this.buttonsArray=[];this.height=72;this.initElements();this.initHtml();this.initEvent();this.initCss()},initHtml:function(){this.$bar.append(this.arrow);this.$bar.append(this.swiper)},initElements:function(){var b=phoneBaseURL+"arrow_down.png";phone_toolbar_icons&&phone_toolbar_icons.arrow_down&&(b="data:image/png;base64,"+phone_toolbar_icons.arrow_down);this.arrow=$("<div class='arrow'><img src='"+b+"'/></div>");this.initSwiper()},initSwiper:function(){this.swiper=
$("<div class='stage'></div>");this.swiperList=$("<div class='swiper'></div>");this.swiper.append(this.swiperList);this.dots=$("<div class='dots'></div>");this.swiper.append(this.dots);this.swiper.rolling({},Direction.left)},initEvent:function(){this.arrow.click(function(){this.hide()}.bind(this))},initCss:function(){this.$bar.css({display:"block",overflow:"visible"});this.$bar.addClass("phone");this.arrow.css({"background-color":this.color.rgba(0.8)});this.arrow.changeButtonColor(bookConfig.iconColor)},
show:function(b){this.visible||(global.phoneGotoPagePanel&&global.phoneGotoPagePanel.visible&&global.phoneGotoPagePanel.hide(),this.$bar.animate({bottom:"40px"},400,"linear",function(){this.visible=!0}.bind(this)))},hide:function(){this.visible&&this.$bar.animate({bottom:-this.height-60+"px"},400,"linear",function(){this.visible=!1}.bind(this))},showOrHide:function(){this.visible?this.hide():this.show()},resize:function(b){this.swiperList.empty();this.dots.empty();var c=this.buttonsArray.length,d=
parseInt((windowWidth+30)/70),f=3*d,g=(windowWidth-30*(d-1)-40*d)/2;c<d&&(g=30);this.height=72;c>d&&(this.height=134);c>2*d&&(this.height=196);this.$bar.css({height:this.height+"px"});for(var h=Math.ceil(c/f),k=0;k<h;k++){var l=$("<div class='item'></div>"),m=$("<div class='dot'></div>");l.css("width",windowWidth+"px");for(var n=0;n<f;n++){var p=n+k*h;if(p>c-1)break;0==p%d?this.buttonsArray[p].$button.css("margin-left",g+"px"):this.buttonsArray[p].$button.css("margin-left","30px");this.add(l,this.buttonsArray[p])}this.swiperList.append(l);
this.dots.append(m)}this.resetBarHeight(d,b);this.swiper.refreshData()},resetBarHeight:function(b,c){this.btnConfig=[];for(var d=0,f=0,g=0;g<this.buttonsArray.length;g++){var h=this.buttonsArray[g],d=this.buttonsArray.length/b;g<b?(d=this.buttonsArray.length<b?this.buttonsArray.length:b,f=this.getMostLength(h.caption.length,f,h.caption,c),g==d-1&&(this.btnConfig.push({startIndex:0,endIndex:d,mostLength:f}),this.height+=f,f=0)):2<d&&g>=b&&g<2*b?(d=2*b,f=this.getMostLength(h.caption.length,f,h.caption,
c),g==d-1&&(this.btnConfig.push({startIndex:b,endIndex:d,mostLength:f}),this.height+=f,f=0)):(f=this.getMostLength(h.caption.length,f,h.caption,c),g==this.buttonsArray.length-1&&this.btnConfig.push({startIndex:parseInt(d)*b,endIndex:this.buttonsArray.length,mostLength:f}))}this.height+=f;this.$bar.css({height:this.height+"px"});this.resetButtonHeight(this.btnConfig)},getMostLength:function(b,c,d,f){if(b){f||(f=12);var g=0;RegExp("[\\u4E00-\\u9FFF]+$","g").test(d)?g=Math.ceil(b/5)*f:12<=b&&(g=Math.ceil(b/
20)*f);c<g&&(c=g);return c}},resetButtonHeight:function(b,c){if(b&&b.length)for(var d=0;d<b.length;d++)for(var f=b[d].startIndex;f<b[d].endIndex;f++)this.buttonsArray[f].$button.css("height",b[d].mostLength+52)},add:function(b,c){c.freedom();c.$button.appendTo(b);c.$parent=b;c.addEvents()}}).extend("ExtendedBar");var ThumbnailCell=Class({create:function(b,c){this.parent=b;this.margin=12;this.index=c;this.item=$("<div class='item'></div>");this.initHtml();this.initEvent();this.onResize()},onResize:function(){this.imageHeight=80;this.length=this.imageWidth=parseInt(bookConfig.largePageWidth*this.imageHeight/bookConfig.largePageHeight);this.item.css({width:this.imageWidth+"px"});this.image.css({width:this.imageWidth+"px"})},initHtml:function(){this.initStructure();this.item.append(this.image);this.item.append(this.title);
this.parent.append(this.item)},initStructure:function(){this.image=$("<img/>");this.title=$("<p class='title'>"+getShownPageNumber(this.index)+"</p>");this.loading()},loading:function(){this.image.css({"background-color":"#ffffff","background-image":"url("+uiBaseURL+"loading.gif)","background-repeat":"no-repeat","background-position":"center"})},unLoading:function(){this.image.css({"background-image":""})},setStyle:function(b){this.item.css(b)},initEvent:function(){this.item.onTap(function(){gotoPageFun(this.index)}.bind(this))},
fillContent:function(b){b=function(b){this.image.attr("src",b);this.image.css({width:this.imageWidth+"px"});this.unLoading()}.bind(this);fillImageAfterLoaded(this.index,"thumb",b)},getDom:function(){return this.item},fission:function(){this.item.removeClass("highlight");this.item.addClass("focus")},merge:function(){this.item.removeClass("focus")},setHighLight:function(b){this.index==b&&this.item.addClass("highlight")},clearHighLight:function(){this.item.removeClass("highlight")}});var ThumbnailItem=Class({create:function(b,c){this.parent=b;this.margin=12;this.pages=c;this.cells=[];this.initHtml();this.onResize()},onResize:function(){for(var b=this.length=0;b<this.cells.length;b++)this.length+=this.cells[b].length;this.item.css({width:this.length+"px"})},initHtml:function(){this.item=$("<div class='item_focus focus'></div>");this.initStructure();this.addItem();this.item.append(this.title);this.parent.append(this.item)},initStructure:function(){this.initCells();for(var b=getShownPageNumber(this.cells[0].index),
c=1;c<this.cells.length;c++)b=b+"-"+getShownPageNumber(this.cells[c].index);this.title=$("<div class='title'>"+b+"</div>")},fillContent:function(){for(var b=this.cells.length,c=0;c<b;c++)this.cells[c].fillContent(0)},addItem:function(){for(var b=this.cells.length,c=0;c<b;c++)this.item.append(this.cells[c].getDom())},initCells:function(){for(var b=0;b<this.pages.length;b++){var c=new ThumbnailCell(this.item,this.pages[b]);this.cells.push(c)}},setPosition:function(b,c){this.item.css(c,b+"px")},fission:function(){this.item.removeClass("focus");
1==this.cells.length?(BookInfo.isLeftPage(this.cells[0].index,!0)?this.cells[0].setStyle({left:"-3px",right:"auto"}):this.cells[0].setStyle({right:"-3px",left:"auto"}),this.cells[0].fission()):(this.cells[0].fission(),this.cells[1].fission(),this.cells[0].setStyle({left:"-3px",right:"auto"}),this.cells[1].setStyle({right:"-3px",left:"auto"}))},merge:function(){this.item.addClass("focus");1==this.cells.length?(this.cells[0]&&this.cells[0].setStyle({left:"0",right:"0"}),this.cells[0].merge()):(this.cells[0].merge(),
this.cells[1].merge(),this.cells[0].setStyle({left:"0",right:"auto"}),this.cells[1].setStyle({right:"0",left:"auto"}))},setHighLight:function(b){for(var c=0;c<this.cells.length;c++)this.cells[c].setHighLight(b);this.item.addClass("highlight")},clearHighLight:function(){this.item.removeClass("highlight");for(var b=0;b<this.cells.length;b++)this.cells[b].clearHighLight()}});var ThumbnailFrame=Class({create:function(b){this._super(b);this.direction=rightToLeft?Direction.right:Direction.left;this.leftButtonUrl=uiBaseURL+"prev_page.png";this.rightButtonUrl=uiBaseURL+"next_page.png";this.itemArray=[];this.taskList=new TaskList;this.taskList.setLargeLength(5);this.initDefaultDom();this.initHtml();this.initEvent();this.refresh();this.initCss()},initHtml:virtual_function,initCss:function(){rightToLeft&&this.stage.addClass("rightToLeft");this.stage.css({color:this.fontColor,
display:"none",bottom:"-136px"});this.close.css({"background-color":this.mainColor})},initDefaultDom:function(){this.close=$("<div class='close' style='background-image:url("+this.closeUrl+")'></div>");this.close.click(this.hide.bind(this));this.leftBtn=$("<div class='leftBtn btn'><img src='"+this.leftButtonUrl+"'/></div>");this.rightBtn=$("<div class='rightBtn btn'><img src='"+this.rightButtonUrl+"'/></div>");this.pageCaption=$("<span class='pageCaption'></span>");this.initSwiper()},initSwiper:function(){this.thumbnailSwiper=
$("<div class='thumbnailSwiper stage'></div>");this.thumbnailSwiperList=$("<div class='swiper'></div>");this.progress=$("<div class='progress'></div>");this.progressBar=$("<div class='progressBar'></div>");this.refreshSwiper(this.thumbnailSwiperList);this.thumbnailSwiper.append(this.thumbnailSwiperList);this.thumbnailSwiper.append(this.progress);this.progress.append(this.progressBar)},initEvent:function(){this.stage.bind("mousedown touchstart",function(b){b.stopPropagation()});if(this.leftBtn)this.leftBtn.onTap(function(){this.thumbnailSwiper.move(rightToLeft?
-170:170)}.bind(this));if(this.rightBtn)this.rightBtn.onTap(function(){this.thumbnailSwiper.move(rightToLeft?170:-170)}.bind(this));rightToLeft?this.thumbnailSwiper.scroll({},Direction.right):this.thumbnailSwiper.scroll({},Direction.left)},onResize:function(){this.refresh();if(this.thumbnailSwiperList.width()<0.9*windowWidth-52){var b=this.thumbnailSwiperList.width()+52;this.stage.css({width:b+"px",left:(windowWidth-b)/2+"px"})}else this.stage.css({width:"90%",left:"5%"})},refresh:function(){this.thumbnailSwiper.refreshData()},
refreshSwiper:function(b){this.length=0;for(var c=BookInfo.getThumbnailPages(),d=0;d<c.length;d++)this.addItem(b,c[d]);b.css("width",this.length+"px")},mergeAll:function(){for(var b=0;b<this.itemArray.length;b++)this.itemArray[b].merge()},fissionAll:function(){for(var b=0;b<this.itemArray.length;b++)this.itemArray[b].fission()},addItem:function(b,c){var d=new ThumbnailItem(b,c);d.setPosition(this.length,this.direction);this.length+=d.length;this.length+=d.margin;this.itemArray.push(d)},clearHighLight:function(){$(".highlight").removeClass("highlight")},
setHighLight:function(b){this.pageCaption.html(getShownPageNumberInfo(b));$(".highlight").removeClass("highlight");for(var c=0;c<this.itemArray.length;c++)0<=this.itemArray[c].pages.indexOf(b)&&this.itemArray[c].setHighLight(b);window.setTimeout(this.thumbnailSwiper.animateToCenterItem,10)},getShowStatu:function(){return this.visible},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){return 0},getBottomHeight:function(){return this.visible?136:0},fillImage:function(b){this.itemArray&&
this.itemArray[b]&&!this.itemArray[b].fill&&(this.LoadCount++,this.itemArray[b].fillContent(),this.itemArray[b].fill=!0)},fillContent:function(){this.interval&&!this.interval.isRunning()?this.interval.start():this.interval=function(){this.performTask()}.interval(this,60)},performTask:function(){for(var b=this.getShownItems(),c=b[1],b=b[0];b<=c;b++){var d=function(){thumbnail.fillImage(this.index)}.bind({index:b});d.id=b;this.taskList.unShiftTask(d)}},getShownItems:function(){var b=this.thumbnailSwiper.stageLength,
c=-this.thumbnailSwiper.getCurrentLength(),d=2*this.itemArray[0].cells[0].length+this.itemArray[0].margin,b=parseInt(b/d)+2,c=parseInt(c/d),d=Math.min(c+b,this.itemArray.length),c=Math.max(0,c);return[c,d]},showOrHide:function(){this.visible?this.hide():this.show();BookInfo.getBook().adjustBookPosition()},show:function(){this.running||(this.visible=this.running=!0,this.setHighLight(BookInfo.getCurrentPageIndex()),this.stage.css({display:"block"}),this.stage.animate({bottom:"10px",opacity:"1"},300,
function(){this.running=!1}.bind(this)),this.refresh(),this.fillContent())},hide:function(){this.running||(this.running=!0,this.visible=!1,this.stage.animate({bottom:"-136px",opacity:"0"},300,function(){this.running=!1;this.stage.css({display:"none"})}.bind(this)),this.interval&&this.interval.stop())}}).extend(FormFrame);var ThumbnailForm=Class({create:function(b){this.direction=0;this.height=80;this._super(b)},initHtml:function(){this.stage=$("<div class='thumbnail_win10'></div>");this.stage.append(this.leftBtn);this.stage.append(this.thumbnailSwiper);this.stage.append(this.rightBtn);this.stage.append(this.pageCaption);this.parent.append(this.stage)}}).extend(ThumbnailFrame);var toolbar_icons={First:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Mzk5NEU3QkEzRThEMTFFNkJFQ0ZERjM3MTVBMkYxOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Mzk5NEU3QkIzRThEMTFFNkJFQ0ZERjM3MTVBMkYxOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozOTk0RTdCODNFOEQxMUU2QkVDRkRGMzcxNUEyRjE5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozOTk0RTdCOTNFOEQxMUU2QkVDRkRGMzcxNUEyRjE5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjRWsmwAAABvSURBVHja7NVBCoAwDETRJOT+V44IFdyof4JZCA501762aaBeVTaRsKF8H6417kLmyCc+QH8TxqgCSyiFZZTALXRPAtRIF5zio32cDzu3SxHkWmIpcFe08FAeRMFDfW2Kq12B8bxYSPD/B2HZBBgA8ckULfSXOT8AAAAASUVORK5CYII=",
prev:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzY3MDFBQjgzRThEMTFFNkJCRUU5RjBDOEJENzY0RkUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzY3MDFBQjkzRThEMTFFNkJCRUU5RjBDOEJENzY0RkUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NjcwMUFCNjNFOEQxMUU2QkJFRTlGMEM4QkQ3NjRGRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NjcwMUFCNzNFOEQxMUU2QkJFRTlGMEM4QkQ3NjRGRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhJTf9AAAABpSURBVHja7NVLDgAREATQ1nH/K5dIZjYS9EdtRCW2jxmFAkAYUSHlbhjfOAr/YDkJu1ELHEJ3cBhdwSm0py5Q8bRgXAStx3Uyc/pX6OazwDh5KVyNGwLGXRHC1VklZFph6ul7QcxpAgwAFCgSLi+pMiUAAAAASUVORK5CYII=",
next:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEQwQ0I1RjQzRThEMTFFNkIyNjFEMDBGRUMyNjMwNjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEQwQ0I1RjUzRThEMTFFNkIyNjFEMDBGRUMyNjMwNjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0RDBDQjVGMjNFOEQxMUU2QjI2MUQwMEZFQzI2MzA2NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0RDBDQjVGMzNFOEQxMUU2QjI2MUQwMEZFQzI2MzA2NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpveEJ0AAABqSURBVHja7JQxDsAgDAMhyv+/7C4dGNrUGLygWmLkEuyQDqA5FM2ks8G4z3ZwHwpst4KGKx5TcDW8T/jKVJTwfEl/VhgKeec4iyeynT7eWekYVSPhgKpgMJaFA6osITrcFD7Ev+jndAkwAPwyEi6+tt4VAAAAAElFTkSuQmCC",
Last:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDBBM0Y0NTAzRThEMTFFNkE1MjNFMDZBMjZBMzA1MDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDBBM0Y0NTEzRThEMTFFNkE1MjNFMDZBMjZBMzA1MDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MEEzRjQ0RTNFOEQxMUU2QTUyM0UwNkEyNkEzMDUwOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MEEzRjQ0RjNFOEQxMUU2QTUyM0UwNkEyNkEzMDUwOCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvOGsEkAAABuSURBVHja7JXBCsAgDEO19P9/ObuM4UExKeYyDHhrnzWt2gE0h6KZ9F8w3kXHsOA+JB+3QoKrHtPwSvMoeHUqtvCcdFYVho38c5yLI7KVLnOqFWNXSDigFTBYy8IBVR8hqbkpXgg65v4gnx4BBgAWIRQt6t9nDQAAAABJRU5ErkJggg==",
home:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjJBMzhBM0UzRjJEMTFFNjkwRjNFNDg4N0E3NkNFMjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjJBMzhBM0YzRjJEMTFFNjkwRjNFNDg4N0E3NkNFMjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMkEzOEEzQzNGMkQxMUU2OTBGM0U0ODg3QTc2Q0UyMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMkEzOEEzRDNGMkQxMUU2OTBGM0U0ODg3QTc2Q0UyMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pl0uaFEAAABhSURBVHja3JRLCsAwCETj4P2v/LpvG0j8FBq36lNmUANGR2g0xflgOsDswBXclAowEVmU1JQImIyhyro/q1cB9LVPRdBHv98SFhxin520B7ei+lcc/DZ9x+nF3E+luAQYALTzFiFgXNlnAAAAAElFTkSuQmCC",
ZoomIn:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjhGNzQ3NzUzRThDMTFFNkIyNUFDQTVFNEE2QjYzMjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjhGNzQ3NzYzRThDMTFFNkIyNUFDQTVFNEE2QjYzMjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGOEY3NDc3MzNFOEMxMUU2QjI1QUNBNUU0QTZCNjMyMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGOEY3NDc3NDNFOEMxMUU2QjI1QUNBNUU0QTZCNjMyMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvmrb6cAAAEeSURBVHja1JVfisIwEMYzRdq3vUCR9Qi6b4veR1TUW+kFPIKLD4J/wAPogyfQB3XB+AW/QChpbdmWxYEfJTPJdJp8mYrWWlVhgarI/iVxCEZgAU5kQV/4MrPZYw8xWOun7cGEHOhbc07aem/ikAuvYAACJxbQZ2IbEBVJPGRVPcdnzY77HA/TEotHbmYfY9AAd7tjfIpzNntwBN95D+8LzJlUO0mVMzaxH9CqSm6/aYGax7cCHb5UMraiDXZFKp6COuhmVNrlnGkRHUeUUpbcbmCbJTdJaUJGFTPQBAcelOLnf4Ibb58UvXn2oozBEpzJkj7t0XauivOYXWh6yEcyKH/sxxcQJRRTSmKVuEBSZj8WX8VlNXp5/1/TQ4ABAAo/l186n5lQAAAAAElFTkSuQmCC",
ZoomOut:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkNDQzJBNUYzRThEMTFFNkFBQTA5MTQ5Rjg1N0MyNDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkNDQzJBNjAzRThEMTFFNkFBQTA5MTQ5Rjg1N0MyNDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyQ0NDMkE1RDNFOEQxMUU2QUFBMDkxNDlGODU3QzI0NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyQ0NDMkE1RTNFOEQxMUU2QUFBMDkxNDlGODU3QzI0NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqCrekoAAAEOSURBVHja1JVNCsIwEIWbIu3OC4joEdSd6H1ERb2VvYBHULoQ/AEPoAtPoAt/wPiCr1AliQZbxIFvM5O8vjaTqZBSenmE7+UUPxEOwBDE4EBi5oK3yuobayiBpXzEFozJjrkl15j2a4UDbjyDPvBTNZ85VVuB0EV4QFddi6Me1wxMa4Sm3dR3LIEquFnOZgv2oPnp4TXAlKLSgKrNQD2vdruaCgVNbgHafKiwGGqBjYvjCJRBx+K0wzWRSx+HbCVbu13A2tZuwjCEVFdMQA3seFAeX78CLrx9wvXmJRdlBObgSObMpcPJ8SeRbFQzpPhaFF/O4xMIE60shdPOn8SzmMdC5zirQS/+/9d0F2AAlA6VX9vK/WAAAAAASUVORK5CYII=",
search:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDcyQzNGMjMzRThEMTFFNkFGNEVDMEFCNzc5MTlBQjAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDcyQzNGMjQzRThEMTFFNkFGNEVDMEFCNzc5MTlBQjAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENzJDM0YyMTNFOEQxMUU2QUY0RUMwQUI3NzkxOUFCMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENzJDM0YyMjNFOEQxMUU2QUY0RUMwQUI3NzkxOUFCMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvlrSkEAAAE4SURBVHjaYvz//z8DLQATA40AzQxmwSWhrKzMBqQygDgSiHWgwleAeDkQz7h79+4vfAYzYgtjoKHSQGoLEBsA8UMgPgaVsgZiOSC+AMQ+QMOfEm0w1KUngVgLiIuAeDrQgH9QOVDQZQJxHxBfB2JzoNxPrCaDDEbGSkpKuUD8H4gz0eWQ1GRB1eTiUoMt8qKA+DEQz8QThDOgaqJISRVGQHwE5n1sACp3FIgNaZXcfpNi8DkgtoFGFK6kyARNIVdIMRiUTmWBOB2PS9OhapaTktzYoclNE09y64cmNzNcyY3YDHIUKYPIAzEo17EBDWUkKechZRSQ62KgrmeAunIJEE9ASiGMJBlMCAAthmn8DDScj2oGQw3/AaTYsbmckdKCHsnlqIbjyuukYFC5gS7GOFo1wQBAgAEAVdXoCYYIy28AAAAASUVORK5CYII=",
thumbnails:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDMzQjlCQTQzRThDMTFFNjg5MTE5ODg5MjFERTA0MjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDMzQjlCQTUzRThDMTFFNjg5MTE5ODg5MjFERTA0MjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEMzNCOUJBMjNFOEMxMUU2ODkxMTk4ODkyMURFMDQyOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEMzNCOUJBMzNFOEMxMUU2ODkxMTk4ODkyMURFMDQyOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PljJXgQAAABFSURBVHjaYvz//z8DLQATA43A0DOYBYsYvkBnJEIep8EoCoi0cDTyBkmqIDmisMY+rbI0zdLxaKoYNZiO6XjoBQVAgAEA36IPKIV18hwAAAAASUVORK5CYII=",
tableOfContent:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDIxOUQyODMzRThEMTFFNkJGQjlFRkFGRTBCRTFBOUIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDIxOUQyODQzRThEMTFFNkJGQjlFRkFGRTBCRTFBOUIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjE5RDI4MTNFOEQxMUU2QkZCOUVGQUZFMEJFMUE5QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMjE5RDI4MjNFOEQxMUU2QkZCOUVGQUZFMEJFMUE5QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiKZ5UYAAAA3SURBVHjaYvz//z8DLQATA43A0DOYBY2PHOCMWMQIAcbhExSM+Lw3mipGU8VoqhhNFaOpAiDAADEeCTsypn5BAAAAAElFTkSuQmCC",
bookmark:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTcwQ0Q1Q0QzRThDMTFFNjkxMEQ5NzFFQjU2MEFERjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTcwQ0Q1Q0UzRThDMTFFNjkxMEQ5NzFFQjU2MEFERjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFNzBDRDVDQjNFOEMxMUU2OTEwRDk3MUVCNTYwQURGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFNzBDRDVDQzNFOEMxMUU2OTEwRDk3MUVCNTYwQURGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrzptqEAAABDSURBVHjaYvz//z8DLQATA43A0DOYhYA8MRHAOBrGowaPGjxUDWakhcGMpBjORKZLGalhMCM5wcJEYZgyDp/kBhBgAMJUBDQiRPbEAAAAAElFTkSuQmCC",
autoPlay:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDI2MkVCOUQzRUE1MTFFNkJFNURGODhCRTczNUVEMUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDI2MkVCOUUzRUE1MTFFNkJFNURGODhCRTczNUVEMUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MjYyRUI5QjNFQTUxMUU2QkU1REY4OEJFNzM1RUQxQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MjYyRUI5QzNFQTUxMUU2QkU1REY4OEJFNzM1RUQxQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrJAeVwAAABOSURBVHja5JQxDgAgCAOp8f9fPh+gg0Ybg97IUJqmICAclDCRT7gOZjuh64rjbvsE/NUKnI5xRoFLWA5hOaJQurodO2nSONYzv2KJJsAArCcJMcUeOf8AAAAASUVORK5CYII=",
stopAutoPlay:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEZCQTU2ODAzRUE1MTFFNjg5MkFGNDMyRjkxQzBCNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEZCQTU2ODEzRUE1MTFFNjg5MkFGNDMyRjkxQzBCNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0RkJBNTY3RTNFQTUxMUU2ODkyQUY0MzJGOTFDMEI2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0RkJBNTY3RjNFQTUxMUU2ODkyQUY0MzJGOTFDMEI2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pm7Gu98AAABQSURBVHjaYvz//z8DLQATA43A0DOYBYsYJYHOOCAuxrCdCPB/cEXe169f/4MwOns0HY8aTGIWxFJs/qcggwxslv4/KMOYhcLCZxglN4AAAwD5QhqlRWuKswAAAABJRU5ErkJggg==",
soundOn:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEQxMEFGM0MzRThEMTFFNkFGOTlGQjg3Q0I0MzIxQ0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEQxMEFGM0QzRThEMTFFNkFGOTlGQjg3Q0I0MzIxQ0EiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowRDEwQUYzQTNFOEQxMUU2QUY5OUZCODdDQjQzMjFDQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowRDEwQUYzQjNFOEQxMUU2QUY5OUZCODdDQjQzMjFDQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmU+JkcAAABcSURBVHja1JU7CsAwDMXySu5/ZXXpmCElUT4Gr8LIzzhAMeopUh0H5uupYIyJMVRgOP6dydoByq64YYHTgh99ebT2MEtFdyqySkVMxzGXFzMVGTnpYfh9r+kVYACduw0vvKGL/wAAAABJRU5ErkJggg==",
soundOff:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUM1MUExQ0EzRThEMTFFNkFFMzdEN0EyMUYxRkZGNDciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUM1MUExQ0IzRThEMTFFNkFFMzdEN0EyMUYxRkZGNDciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxQzUxQTFDODNFOEQxMUU2QUUzN0Q3QTIxRjFGRkY0NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxQzUxQTFDOTNFOEQxMUU2QUUzN0Q3QTIxRjFGRkY0NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pt5/U4kAAABPSURBVHja7JJBCgAgDMOs+P8v14tnUWZE0cKuoWSV7UQkJyhHgt1uKdhEYxMqTDie2mUZBOnv+CFwbxXa1VikCpGORT5PkeeF4PftuAowACd6Ci/YYJi7AAAAAElFTkSuQmCC",
annotation:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDc5QjNCNzgzRTkyMTFFNjkxREZCMTk2Njc2NjQyMUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDc5QjNCNzkzRTkyMTFFNjkxREZCMTk2Njc2NjQyMUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzlCM0I3NjNFOTIxMUU2OTFERkIxOTY2NzY2NDIxQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNzlCM0I3NzNFOTIxMUU2OTFERkIxOTY2NzY2NDIxQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pie3AdQAAACiSURBVHjaYvz//z8DLQATA43AoDb4CxD/J2TwcagiXPgBmnqQGDcSGw4Y0SIPX0w+BGIFAmoZYQwWHIYwEvA+NkOZkTksZITpf2IcwkQLQ0k1+D8pQcZEJUOfUisdIxv6BIilMBTgSG6MUEv/IhnyH4f3sYrjc/E/LBoZqZ2lSS4C8WWQ/6S4kFgXU1xIs9DKYHQXHyHTnP2EktsIrpoAAgwAlbwuKIRtjSQAAAAASUVORK5CYII=",
videoGallery:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTQ5MTk1RkMzRTkyMTFFNjk2N0Y5QTI3NEMyQUY5MEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTQ5MTk1RkQzRTkyMTFFNjk2N0Y5QTI3NEMyQUY5MEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NDkxOTVGQTNFOTIxMUU2OTY3RjlBMjc0QzJBRjkwQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5NDkxOTVGQjNFOTIxMUU2OTY3RjlBMjc0QzJBRjkwQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqppJN4AAAB0SURBVHjaYvz//z8DLQDjqMF0NfgvEDMRoQfZJUxY5BjRDSbH6YxYLKSqwf/Rxahh8H9sllFqME5fDG2DiU1uGEmL2gb/A2JmWkUeTZMbwQxCalAwYAljrFkaJMAClWSFhuFPpDLhPxYv/x8tjwfOYIAAAwA1l17VUd5hmQAAAABJRU5ErkJggg==",
photoGallery:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE1QUUwMDEzRTk1MTFFNjgzMUVDMEFGN0I5OENCQjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE1QUUwMDIzRTk1MTFFNjgzMUVDMEFGN0I5OENCQjkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMTVBREZGRjNFOTUxMUU2ODMxRUMwQUY3Qjk4Q0JCOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTVBRTAwMDNFOTUxMUU2ODMxRUMwQUY3Qjk4Q0JCOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvVEys4AAABiSURBVHja7JRBDsAgCARF+/8f1+lZE1shWDXt3rgMy0IQIIxQDIO0H/ioao/A5VXHRVelWHJ5qXKIF/j0dMzNHpIVzAM8W8B0OKfFicrxaUyTe+9Ymzn/d5v/NuW7UVwCDAAYlRYmIk5pLgAAAABJRU5ErkJggg==",
sharethis:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTM0MThBNUUzRThEMTFFNkJDMjNGMjY1RTA0QUVDMUUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTM0MThBNUYzRThEMTFFNkJDMjNGMjY1RTA0QUVDMUUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MzQxOEE1QzNFOEQxMUU2QkMyM0YyNjVFMDRBRUMxRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MzQxOEE1RDNFOEQxMUU2QkMyM0YyNjVFMDRBRUMxRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ps0zzJAAAADGSURBVHjaYvz//z8DLQATA43AyDMYZwSxkKIYCBhxqGck5GImarkc3cX/CLiOHYh9gdgWiKXxuhyUjpEwy38EQBaPBuJ//4kDYD2MaBkE5IPfaC5WBuLLQMwJxN+A+DAQ3wTij0BcizMOiHDxIiD+C8RtQMyHpv4/Dh8SNJgXiL8CcRi6RjSDMeQIpQJQJHUC8SoSkyBBg78DcSsRhv5HT3LERB4p6ZiR5mUFC56goaigZsRS0FNiICO+QohxWJfH9DcYIMAAAFT/zvdGj/4AAAAASUVORK5CYII=",
print:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REQ1MjAwMjQzRThDMTFFNkE0MDk4QUE1QjQxRjRFMjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REQ1MjAwMjUzRThDMTFFNkE0MDk4QUE1QjQxRjRFMjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERDUyMDAyMjNFOEMxMUU2QTQwOThBQTVCNDFGNEUyMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERDUyMDAyMzNFOEMxMUU2QTQwOThBQTVCNDFGNEUyMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrQB8k8AAABbSURBVHja1JRRCgAgCENdeP8rrwuEWCrpfpM1xlOQlAotKdI8YzXevOXj1hgjqoiyh8zEONX2hQqv2IZjD3KMVMGXT9UYpjM1MhMjgwq0XmnJWvF5163MeAswAIw3C0QK/bOAAAAAAElFTkSuQmCC",
download:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODk0RTNFQzIzRThEMTFFNjgyRkVDM0NEMzIxQzMzQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODk0RTNFQzMzRThEMTFFNjgyRkVDM0NEMzIxQzMzQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4OTRFM0VDMDNFOEQxMUU2ODJGRUMzQ0QzMjFDMzNBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4OTRFM0VDMTNFOEQxMUU2ODJGRUMzQ0QzMjFDMzNBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvQuLzoAAACQSURBVHjaYvz//z8DLQATA43A0DOYhUh16BHBOBrGFBt8AIgjidAfD1WLJVaAGQQNOwDxDSBmRhJDBzBxJiC+A9WDYg42gw8AcQzUYEIApCYBqgevwcS4Ft3VLNhcjcu16OK4DIVhDFczohVC+DLCfzxiGOqZSMhxjAQMJTkd/ydSjCplxQgoNhlHbukGEGAAaV83PJTtVokAAAAASUVORK5CYII=",
fullscreen:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTAxQkZCM0MzRThEMTFFNkI3NEQ5MERCNjNGQURBODQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTAxQkZCM0QzRThEMTFFNkI3NEQ5MERCNjNGQURBODQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMDFCRkIzQTNFOEQxMUU2Qjc0RDkwREI2M0ZBREE4NCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMDFCRkIzQjNFOEQxMUU2Qjc0RDkwREI2M0ZBREE4NCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0qd4sAAABTSURBVHjaYvz//z8DLQATA40AzQxmQeNjCxdGHHrxqqWbiwm5Epea/8Mv8hjJNIdx6AfFqME4Df6PI6sSAhj6hn4GwZb3SSndBneWZhxe6RggwADOeQwzzof10wAAAABJRU5ErkJggg==",
exitFullscreen:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkY4MzEzOTIzRThEMTFFNkI3MTA5M0MwNkQzOUQ2RTkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkY4MzEzOTMzRThEMTFFNkI3MTA5M0MwNkQzOUQ2RTkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRjgzMTM5MDNFOEQxMUU2QjcxMDkzQzA2RDM5RDZFOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCRjgzMTM5MTNFOEQxMUU2QjcxMDkzQzA2RDM5RDZFOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuGRJQkAAABNSURBVHjaYvz//z8DLQATA43AgBj8H4rJkh96QcGCxXukAmQ9jHR3MSMJehlHTjoeYQYTk44ZiUi/gyMd/6ckPQ/9yCMlew+zLA0QYABVPQwzuO7I8gAAAABJRU5ErkJggg==",
languageChange:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTBCQzM1MUEzRUE2MTFFNjhEQkFEOEZERERGMDM3RDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTBCQzM1MUIzRUE2MTFFNjhEQkFEOEZERERGMDM3RDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMEJDMzUxODNFQTYxMUU2OERCQUQ4RkREREYwMzdEMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMEJDMzUxOTNFQTYxMUU2OERCQUQ4RkREREYwMzdEMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrIgJ34AAABbSURBVHja7NXBCgAgCANQ9/8fvegaQbMSheo8XlDNQNIiFqrAPYwo2BR8Bqs7YcgiHYZ4FLwFQ8l7YflCP/wITMfblmFvaZaVhrPiOfDRuNyZx4yCa/x5TYABAMcQZdXEt89xAAAAAElFTkSuQmCC",
about:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDVEOUFGRjYzRTkxMTFFNjhFNzdCQjAzODdBODFFMDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDVEOUFGRjczRTkxMTFFNjhFNzdCQjAzODdBODFFMDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENUQ5QUZGNDNFOTExMUU2OEU3N0JCMDM4N0E4MUUwNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENUQ5QUZGNTNFOTExMUU2OEU3N0JCMDM4N0E4MUUwNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhYNj/gAAAF9SURBVHja1NXbKkRRHMfxGeWQRo1xuOLGC2iGRzAok0s5vQINXsjpAYSUHMLcunQ7UpSkRjJDmLF9V36j1ba2babmwqpP7fZa68fw//8n6nlepBGrKdKg9VtwB8awiSuUxTxvYBSxwNvmT+EwjGPvaxWRx4Xk9c6sQwy5Mlyhk3jAB7Ywhbi134lpbCu8gExYcAr3eMJiwKexLensHZJBwa3IoYwFR0h1+d9nUcGJMn4Ej+ui+YjNNQSbsF3tjVbf21UxjyLW8e74P0fFv151p4S578NWg5gyqiCFR1cBWT/AvxI41/OAv4778BIQGrYKeEZ/ozrPcwXfoB3xOgK7dPfaFZxDD9J1BJs7vThztfSYSsaUTksN5daGPe2lgxrkVMWerSF4We1/ZP9C/kNJtWdR7RrW0is6e4vBsCGU0WCpduEMEtZ+N2axozNmtkz8ZbpFNAoPrLF5aY1N81zS3r5/+IQFGzH1/prC3sTM41WM6IzzfvTffed9CjAAgvQ+C9v+iKgAAAAASUVORK5CYII=",
Help:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzdDQzM4REEzRTkxMTFFNkJCMjFFNzA5MkI4NUExNUYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzdDQzM4REIzRTkxMTFFNkJCMjFFNzA5MkI4NUExNUYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDN0NDMzhEODNFOTExMUU2QkIyMUU3MDkyQjg1QTE1RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDN0NDMzhEOTNFOTExMUU2QkIyMUU3MDkyQjg1QTE1RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgUX18AAAAGhSURBVHja1JXNSkJBGIaP0R9hZPZzG2F6CalB0iqlugB3hdXCa2mX5KpVVARhReX2tGurCAURQQbZpk5N79B7aBhnPLpw0cADc+ab72X+3u+EhBBOP9qA06fWSXgcpEEZNIBHZH8fpEDYmi2PwkACXIrf1gI1cEdqHJPtHMRNGibRZdAE3+AQ5EBEiU+CVXBE8ReQCRKeB8/gDWxadqOyxblPIGYTHgFV4IGNLkR9CuALXFGjTXiRW5NbHNK2fiD+mguy2oJOGEuZhMvc1oq2ogrPMa58C+3ScrzQkkm4wRufCNh6kcJ5ZSwK6qRN2ONz6iSa5+pdHpEak7mf/ncvziuCXXALkqBpsoXfGVQGH8AYiIBXQ1KWYklDbIq59yZLV8GMJVG2BIhaYjJnFtyYLJ3mpcinM2w4X5fnq4+PglPmJm0GueZjL/QgvE37X6gL0ifFaM8W7Rrkuh3OfQRzQUUow5X5LlzjO/Xj02AdHHOOrC1L3VQ3h66qKGWzrpRN2X9n7EwvPkHCkjC9X6LYB5Hu3AMLnGPMD/27f96PAAMALx4JgPHD4fQAAAAASUVORK5CYII=",
moreBar:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0JBRTdEMzAzRThEMTFFNjlCRUVBREU1NzVGOEQ3QkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0JBRTdEMzEzRThEMTFFNjlCRUVBREU1NzVGOEQ3QkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDQkFFN0QyRTNFOEQxMUU2OUJFRUFERTU3NUY4RDdCQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDQkFFN0QyRjNFOEQxMUU2OUJFRUFERTU3NUY4RDdCQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjR9JwsAAABOSURBVHjaYvz//z8DLQATA43AgBvsCcTPoNiTGA2MRIYxyEBJKPs5EEvRIigYqRkUKUD8AoifAnEyNYNiNFWMporRVDGaKkarJjAACDAAFowp6uNOLvQAAAAASUVORK5CYII=",
backward:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkQ1RTRGRDZEMzBFMTFFNjkzQjBBOTI3QUMxN0VFRjMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkQ1RTRGRDdEMzBFMTFFNjkzQjBBOTI3QUMxN0VFRjMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRDVFNEZENEQzMEUxMUU2OTNCMEE5MjdBQzE3RUVGMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCRDVFNEZENUQzMEUxMUU2OTNCMEE5MjdBQzE3RUVGMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PisSvc8AAABVSURBVHja7NUxDgAwCAJA/f+j7dRVAWu6yGxuICR6RNhEfGEFvof+EqZQFKZRBJbQCpbRDFam4l9hpopgYRSXYASX4QpvwRnehm2iii/wfpA8R4ABAO+mVNVvwFm9AAAAAElFTkSuQmCC",
forward:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzY2REM3Q0NEMzBFMTFFNjlFOTBERkY1RjMzQkVEOUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzY2REM3Q0REMzBFMTFFNjlFOTBERkY1RjMzQkVEOUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNjZEQzdDQUQzMEUxMUU2OUU5MERGRjVGMzNCRUQ5QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDNjZEQzdDQkQzMEUxMUU2OUU5MERGRjVGMzNCRUQ5QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkNK6mgAAABlSURBVHja7JXBCgAhCEQd8f9/efayxJ7MSluIBro+cZ4QSEpFVIpyPpjvSwfjMyC9ihB8tuMufEWeCzdH0qhUbDk3C64rnc2Q2TG94VoBnQUzUpNWQCPyRmX+d25YBd8fpOURYACEjxAxubi2HwAAAABJRU5ErkJggg==",
soundAdd:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEFBNzMxOUFCQjgwMTFFNkFFNTJGQ0IwMjg0MjJBRTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEFBNzMxOUJCQjgwMTFFNkFFNTJGQ0IwMjg0MjJBRTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4QUE3MzE5OEJCODAxMUU2QUU1MkZDQjAyODQyMkFFNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4QUE3MzE5OUJCODAxMUU2QUU1MkZDQjAyODQyMkFFNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqAv3nkAAABBSURBVHjaYvz//z8DLQETA43BqAWjFmCA/1A8GkTUAyxEhDkx4oyD1geMOFzOOJqK6BYHDMSmltE4GLWAdgAgwAAU3Qgykbj+1QAAAABJRU5ErkJggg==",
soundReduce:"iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTE1MjRBQzlCQjgwMTFFNjk0MzRGREJFRTk5OTY1OUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTE1MjRBQ0FCQjgwMTFFNjk0MzRGREJFRTk5OTY1OUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTUyNEFDN0JCODAxMUU2OTQzNEZEQkVFOTk5NjU5QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MTUyNEFDOEJCODAxMUU2OTQzNEZEQkVFOTk5NjU5QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po2FvM0AAAA1SURBVHjaYvz//z8DLQETA43BqAWjFoxaQAcLWAjIE1uOMA5aHzCORvKoBaMWjFrAwAAQYADvCQQywiPpxwAAAABJRU5ErkJggg==",
emailButton:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODA5QjhFMjczRThEMTFFNkEzMDZDN0NGQUQ4OTlDOEIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODA5QjhFMjgzRThEMTFFNkEzMDZDN0NGQUQ4OTlDOEIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MDlCOEUyNTNFOEQxMUU2QTMwNkM3Q0ZBRDg5OUM4QiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4MDlCOEUyNjNFOEQxMUU2QTMwNkM3Q0ZBRDg5OUM4QiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PojIH2cAAADVSURBVHja7NSvCsJAAMfx3RQEEUxq8wlMRoMvYLUJRrNd44p90TcQwQcw+AQWo1WMykCLguf34Bxz/zyFgWE/+IDo+Q1jm5BSWlnMtjJaHk4MLyF/tHgrqbsioIwp7tJ8N4xDnUh4hQq6OBpED+hAwE0Lq+3RQgOblOgaNTSx1d+lhtWuGKKAWSj4gAMbfXiB3z6GX5ujjoEOnNDTZ92Y835LhB7puOd7hxEuOKOk74B2zFnhfzAIq3mY6D86qCac+zpsOpG/KyIrJl2j/LX5/+GnAAMAemmoiJErTcYAAAAASUVORK5CYII=",
wechat:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM3MjdBRDFBNDc4NTExRThBMDBBRDE3MEU0QzE4RTVCIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM3MjdBRDFCNDc4NTExRThBMDBBRDE3MEU0QzE4RTVCIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzcyN0FEMTg0Nzg1MTFFOEEwMEFEMTcwRTRDMThFNUIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MzcyN0FEMTk0Nzg1MTFFOEEwMEFEMTcwRTRDMThFNUIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7S3LuuAAABlklEQVR42tTVu0oDQRSA4WwSNFpGEQJW0YCFYJCUQR/ACxGs1E4QGxW11TcQBC/Y+AwWIoJgpZIHkCiSgJV2EUUtxGjWf8JZWSY72ayQwgMf7G1OhjlnJpZt26FWRDjUooganlvoxTC68IwCSk1nVkuhyeAc33Z93GLaY0wd/cEivvCADaSRQB9mkUcVe4g2m3hcBp2gB5Zh0DJeMdHgm9/EYRRRQFwGXIqQdq0s4QIDpsRO8dJIYQEvauldRXR3Tw5F7Arf4k1JcTIev65mn8QBSvjEB66lDglZb8trKUYk8aTrpVqeCMZQts2h1nvelLhdBp+6XnZiFW9SVL+YMXXFinywKfcpaT0nskK/duJJJlPL597SO7jHutzPIaKXxHCtIo5Rr52Xk1+uyP2hHTzW9HaLYUta6Uaelf9w9rxLa1Yb7fdswNlWpC5RfY31uMJRgNnu47HR6ebeGN04ltn4hdpcHU4/+yVWGyQmhc1rR2lV6+8z9yaxAv41qUM/KWeIas02DGEQ/djGXe2Q+Xf/eT8CDACz96Lw4aPEZgAAAABJRU5ErkJggg==",
text:"iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/P//PwMtABMDjQALGp9S5zPS3cVYbUfzDSMxvmQi0lAGEhyA02BGSsIWl8GM1Ig4mkbeqMGjBo8aTGbphqvk+k9METBgLmYcdGEMEGAAMacIN+Xk/EcAAAAASUVORK5CYII="};Class("ButtonQueue",{create:function(b){this.container=b.container;this.extended=b.extended;this.edtNumber=b.edtNumber?b.edtNumber:{body:null,width:0,top:0,space:0};this.buttonWidth=b.buttonWidth;this.buttonTop=b.buttonTop;this.buttons=b.buttons.clone();this.buttonCount=this.buttons.length;this.buttons.each(function(b){b.freedom();b.hint=!0});this.pickButtons()},pickButtons:function(){this.btnFirst=this.buttons.find("first").get(0);this.btnPrevious=this.buttons.find("previous").get(0);this.btnNext=
this.buttons.find("next").get(0);this.btnLast=this.buttons.find("last").get(0);this.btnMore=this.buttons.find("more").get(0);this.buttons.remove(this.btnFirst);this.buttons.remove(this.btnPrevious);this.buttons.remove(this.btnNext);this.buttons.remove(this.btnLast);this.buttons.remove(this.btnMore);this.pageButtonCount=4;bookConfig.enablePageBack&&(this.btnBackward=this.buttons.find("backward").get(0),this.btnForward=this.buttons.find("forward").get(0),this.buttons.remove(this.btnBackward),this.buttons.remove(this.btnForward),
this.pageButtonCount=6);this.buttonCount=this.buttons.length},sort:virtual_function});
Class("PCButtonQueue",{sort:function(){var b=this.edtNumber.width+2*this.edtNumber.space+this.pageButtonCount*this.buttonWidth,c=Math.floor((this.container.width-10-b)/this.buttonWidth),c=Number.between(c,0,this.buttonCount),b=(this.container.width-b-c*this.buttonWidth)/2,d=Math.ceil(c/2);c<this.buttonCount&&c--;0>=c&&(b=this.addPageButtons(b));for(var f=0;f<this.buttons.length;f++){var g=this.buttons.get(f);f<c?(g==this.buttons.find("sound").get(0)&&(g.title=!1,VolumeControlBar.config.direction=
VolumeControlBar.BOTTOM),"WeChatShareButton"==g.getClassName()&&global.WeChatShareImg.setDirection(TextBubble.BOTTOM),g.addTo(this.container.body),g.setPosition(b,this.buttonTop),b+=this.buttonWidth,f==d-1&&(b=this.addPageButtons(b))):(g==this.buttons.find("sound").get(0)&&(g.title=!1,VolumeControlBar.config.direction=VolumeControlBar.DEFAULT),"WeChatShareButton"==g.getClassName()&&global.WeChatShareImg.setDirection(TextBubble.DEFAULT),g.addTo(this.extended),g.hint=!1)}c<this.buttonCount&&(this.btnMore.addTo(this.container.body),
this.btnMore.setPosition(b,this.buttonTop))},addPageButtons:function(b){function c(b){b.addTo(g);b.setPosition(h,l);h+=k}function d(){h+=p;0<f?(m.css({left:h+"px",top:n+"px",display:"block"}),h+=f):m.css({display:"none"});h+=p}var f=this.edtNumber.width,g=this.container.body,h=b,k=this.buttonWidth,l=this.buttonTop,m=this.edtNumber.body,n=this.edtNumber.top,p=this.edtNumber.space;rightToLeft?(bookConfig.enablePageBack&&c(this.btnForward),c(this.btnLast),c(this.btnNext),d(),c(this.btnPrevious),c(this.btnFirst),
bookConfig.enablePageBack&&c(this.btnBackward)):(bookConfig.enablePageBack&&c(this.btnBackward),c(this.btnFirst),c(this.btnPrevious),d(),c(this.btnNext),c(this.btnLast),bookConfig.enablePageBack&&c(this.btnForward));return h}}).extend("ButtonQueue");Class("MobileButtonQueue",{sort:function(b,c){var d=this.edtNumber.width+2*this.edtNumber.space+4*this.buttonWidth;this.addPageButtons(d,(this.container.width-d)/2);this.buttons.each(function(b){b.addTo(this.extended)}.bind(this))}}).extend("ButtonQueue");Class("PCToolbar",{initBar:function(){VolumeControlBar.config={color:this.color.toString(),iconColor:Color(bookConfig.iconColor).toString(),direction:VolumeControlBar.BOTTOM};this.topBar=$('<div class="fbTopBar" id = "fbTopBar"></div>');this.logoBar=$("<div id='logoBar' class='logoBar'></div>");this.pageBar=$("<div id='pageBar' class='pageBar'></div>");this.searchBar=$("<div class='searchBar'></div>");this.edtPageNumber=$("<div class='pageNumber' id='tfPageIndex'><input type='text' id='currentPageIndexTextField' size='13' value='' /></div>");
this.edtPageNumber.children("input").css({color:Color(bookConfig.pageNumColor).toString()});this.parent.append(this.topBar);this.topBar.append(this.pageBar);this.pageBar.append(this.edtPageNumber);this.topBar.append(this.searchBar);this.initSearchBar();this.initPageNumber();this.topBar.append(this.logoBar);this.initStyle()},initStyle:function(){this.topBar.css("background-color",this.color.rgba(this.topBarAlpha));this.topBar.addBorderShadow(this.color.reduce(20),0,1);this.topBarAlpha&&!bookConfig.toobarClear||
this.topBar.css({"background-color":"transparent","box-shadow":"none","-webkit-box-shadow":"none"});this.searchBackgroundColor=Color(this.color.add(160));this.searchBar.css("background-color",this.searchBackgroundColor.toString());this.searchBar.find("input").css("background-color",this.searchBackgroundColor.toString())},initSearchBar:function(){this.btnPreSearch=this.pickButton("search");this.btnPreSearch||(this.btnPreSearch=new SearchButton,this.setButtonTitle(this.btnPreSearch));this.btnPreSearch.onClick=
this.onSearchButtonClick.bind(this);this.edtPreSearch=$("<div id='preSearchContent'><input type='text' id='preSearch' class='preSearch' size='16' /></div>");this.isRightToLeft()&&(this.edtPreSearch.find("input").attr("dir","rtl"),this.edtPreSearch.find("input").css({"margin-left":"0px","margin-right":"5px"}),this.btnPreSearch.$button.css({"float":"left"}),this.edtPreSearch.css({"float":"right"}));this.searchBar.append(this.edtPreSearch);this.btnPreSearch.addTo(this.searchBar);this.btnPreSearch.$button.asButton();
bookConfig.SearchButtonVisible||this.searchBar.css("display","none")},initPageNumber:function(){var b=this.edtPageNumber.children("input");b.css({color:Color(bookConfig.pageNumColor).toString()});var c=parseInt(bookConfig.totalPageCount),d=16;""==bookConfig.pageNumberCaption&&(1E4<=c&&(d=16),1E4>c&&(d=10),1E3>c&&(d=7),100>c&&(d=4),10>c&&(d=3));b.attr("size",d);this.edtPageWidth=this.edtPageNumber.width()},setButtonTitle:function(b){if("WeChatShareButton"==b.getClassName())global.WeChatShareImg=new WeChatShare({parent:this.parent,
color:bookConfig.iconFontColor,textColor:bookConfig.toolbarColor,margin:10,padding:10,arrowHeight:10,arrowWidth:10});else{var c=new TextBubble({parent:this.parent,text:b.caption,color:this.color,textColor:b.fontColor,margin:12});b.setTitle(c)}},initExtendedbar:function(){this.extendedBar=new PCExtendedBar(this.parent);global.moreBar=this.extendedBar},initEvents:function(){this._super();var b=this.edtPreSearch.children("input");this.edtPreSearch.bind("keydown",function(b){13==b.keyCode&&this.btnPreSearch.click()}.bind(this));
b.bind("focus",function(c){this.searchBar.css("background-color","white");b.css("background-color","white")}.bind(this));b.bind("blur",function(c){this.searchBar.css("background-color",this.searchBackgroundColor.toString());b.css("background-color",this.searchBackgroundColor.toString())}.bind(this))},onSearchButtonClick:function(b){frmSearch.visible||frmSearch.show();b=this.edtPreSearch.find("input").val();frmSearch.search(b)},onResize:function(b,c){b=void 0==b?this.parent.width():parseInt(b);void 0==
c?this.parent.height():parseInt(c);var d=Math.min(b/8,100),f=b-2*d;this.topBar.css({width:f+"px",left:d+"px"});var d=190,g=this.logoBar.width()+20,h=(f-(this.edtPageWidth+8+180+20))/2;bookConfig.SearchButtonVisible?d>h?(d=0,this.searchBar.css("display","none")):this.searchBar.css("display","block"):(this.searchBar.css("display","none"),d=0);g>h?(g=20,this.logoBar.css({display:"none"})):this.logoBar.css({display:"block"});d=Math.max(d,g);this.pagebarWidth=f-2*d;this.pageBar.css({width:this.pagebarWidth+
"px",left:d+"px"});this.resetButtonPosition()},resetButtonPosition:function(){(new PCButtonQueue({buttons:this.buttons,buttonWidth:36,buttonTop:9,container:{body:this.pageBar,width:this.pagebarWidth},extended:this.extendedBar.$bar,edtNumber:{body:this.edtPageNumber,width:this.edtPageWidth+8,top:13,space:5}})).sort();this.extendedBar.resize(this.buttonsInExtendedBar());this.extendedBar.hide();this.buttons.each(function(b){b.changeColor();b.$button.asButton().mouseEnterLight("rgba(255,255,255,0.3)")}.bind(this))}}).extend("Toolbar");
Class("PCExtendedBar",{show:function(b){if(!0!=this.isMoving&&!0!=this.visible){this.visible=this.isMoving=!0;this.$bar.css({left:b.left+b.width-this.width+"px",top:b.top+b.height+12+"px"});var c=0;this.$bar.css({display:"block",opacity:0});var d=function(){c+=0.1;this.$bar.css({opacity:c});equals(c,1)&&(d.stop(),this.isMoving=!1)}.interval(this,40)}},resize:function(b){for(var c=0;c<b.length;c++)b.get(c).setPosition(5,5+30*c);this.width=160;this.height=30*b.length+10;this.$bar.css({width:this.width+
"px",height:this.height+"px"})}}).extend("ExtendedBar");var CatalogThumbnailItem=Class({create:function(b,c,d){this.itemContent=b;this.dockMenuContent=c;this.index=d;this.item=$("<div class='thumbnailItem'></div>");this.rect=$("<div class='thumbnailRect'></div>");this.caption=$("<div class='dockMenuItemCaption'></div>");this.captionAfter=$("<div class='dockMenuItemCaptionAfter'></div>");this.itemContent.append(this.item);this.item.append(this.rect);this.item.append(this.caption);this.caption.after(this.captionAfter);this.initEvent()},initItem:function(b,
c){this.dockMenu=new DockMenu(this.dockMenuContent,b,c);this.initCaption(b,c)},addPrev:function(){var b=$("<div class='dockMenuItem dockMenuItemShadow dockButton'></div>");b.append("<div></div>");b.append("<img src='"+uiBaseURL+"slide_leftButton.png'/>");b.click(function(){thumbnail.gotoItemByIndex(this.index-1);return!1}.bind(this));this.dockMenu.addObj(b,"before")},addNext:function(){var b=$("<div class='dockMenuItem dockMenuItemShadow dockButton'></div>");b.append("<div></div>");b.append("<img src='"+
uiBaseURL+"slide_rightButton.png'/>");b.click(function(){thumbnail.gotoItemByIndex(this.index+1);return!1}.bind(this));this.dockMenu.addObj(b,"after")},initCaption:function(b,c){var d=BookInfo.getThumbnailPages();b=1==d[b].length?d[b][0]:Math.min(d[b][0],d[b][1]);c=1==d[c].length?d[c][0]:Math.max(d[c][0],d[c][1]);this.fromIndex=b;this.toIndex=c;1<b&&(rightToLeft?this.addNext():this.addPrev());c<bookConfig.totalPageCount&&(rightToLeft?this.addPrev():this.addNext());this.fromIndex!=this.toIndex?this.caption.html(rightToLeft?
this.toIndex+"-"+this.fromIndex:this.fromIndex+"-"+this.toIndex):this.caption.html(this.fromIndex);$(this.caption).css({position:"absolute",height:"16px",top:"-30px","white-space":"nowrap",width:"auto","-webkit-transform":"translate(-50%, 0)","-moz-transform":"translate(-50%, 0)","-ms-transform":"translate(-50%, 0)","-o-transform":"translate(-50%, 0)",transform:"translate(-50%, 0)",left:"50%"});$(this.caption).css({"margin-left":-$(this.caption).outerWidth()/2});$(this.captionAfter).css({position:"absolute",
top:"-5px",left:"50%","margin-left":"-8px","background-image":"url("+uiBaseURL+"span.png)"})},initEvent:function(){this.choosedColor="#505a60";this.item.bind(_event._enter,function(){this.rect.css("background","#ffffff")}.bind(this));this.item.bind(_event._leave,function(){this.rect.css("background",this.choosedColor)}.bind(this));this.item.bind(_event._end,function(){thumbnail.gotoItemByIndex(this.index)}.bind(this));this.item.bind(_event._over,function(){this.caption.css("display","block");this.captionAfter.css("display",
"block")}.bind(this));this.item.bind(_event._leave,function(){this.caption.hide();this.captionAfter.hide()}.bind(this))},show:function(){this.rect.css("background","#ffffff");this.choosedColor="#ffffff";this.dockMenu.show()},hide:function(){this.rect.css("background","#505a60");this.choosedColor="#505a60";this.dockMenu.hide()},clearHighLight:function(){this.dockMenu.clearHighLight()},setHighLight:function(b){this.dockMenu.setHighLight(b)},onResize:function(){this.dockMenu.resize()}});var CatalogThumbnailBar=Class({create:function(b){this.menu=$("<div class='menu'></div>");this.initMenu();b.append(this.menu)},initMenu:function(){this.visible=!1;this.height=170;this.dockMenuContent=$("<div class='dockMenuContent'></div>");this.thumbnailItemContent=$("<div class='thumbnailItemContent'></div>");this.dockMenuContent.css({width:windowWidth-50+"px"});this.menu.append(this.dockMenuContent);this.menu.append(this.thumbnailItemContent);this.addItem()},addItem:function(){this.itemArray=[];
var b=BookInfo.getThumbnailPages(),c=parseInt(b.length/10);0!=b.length%10&&(c+=1);for(var d=0;d<c;d++){var f=rightToLeft?c-d-1:d,g=new CatalogThumbnailItem(this.thumbnailItemContent,this.dockMenuContent,d),h=10*f,f=Math.min(10*(f+1)-1,b.length-1);g.initItem(h,f);this.itemArray.push(g)}(this.highLightItem=this.currentItem=this.itemArray[rightToLeft?c-1:0])&&this.highLightItem.setHighLight(1);this.highLightItem&&this.highLightItem.show()},gotoItemByIndex:function(b){this.currentItem&&this.currentItem.index!==
b&&(this.currentItem.hide(),this.itemArray[b].show(),this.currentItem=this.itemArray[b])},onResize:function(){var b=1,c=10*(140*bookConfig.largePageWidth/bookConfig.largePageHeight+10);origin=0;c>windowWidth-50&&(b=(windowWidth-50)/c,origin=parseInt(100*(1-(windowWidth-50)/c)/2));this.dockMenuContent.css({"-webkit-transform":"scale3d("+b+","+b+",1)","-moz-transform":"scale3d("+b+","+b+",1)","-ms-transform":"scale3d("+b+","+b+",1)","-o-transform":"scale3d("+b+","+b+",1)",transform:"scale3d("+b+","+
b+",1)","-webkit-transform-origin":"50% 100%","-moz-transform-origin":"50% 100%","-ms-transform-origin":"50% 100%","-o-transform-origin":"50% 100%","transform-origin":"50% 100%"});this.dockMenuContent.css({width:windowWidth-50+"px"});this.thumbnailItemContent.css({"-webkit-transform":"scale3d("+b+","+b+",1)","-moz-transform":"scale3d("+b+","+b+",1)","-ms-transform":"scale3d("+b+","+b+",1)","-o-transform":"scale3d("+b+","+b+",1)",transform:"scale3d("+b+","+b+",1)","-webkit-transform-origin":"50% 100%",
"-moz-transform-origin":"50% 100%","-ms-transform-origin":"50% 100%","-o-transform-origin":"50% 100%","transform-origin":"50% 100%"});for(b=0;b<this.itemArray.length;b++)this.itemArray[b].onResize()},getOccuHeight:function(){return 110},transparent:function(){this.menu.animate({opacity:0,"z-index":-1},200)},noTransparent:function(){this.menu.animate({opacity:1,"z-index":10},200)},mergeAll:function(){},fissionAll:function(){},getShowStatu:function(){return this.visible},clearHighLight:function(){this.highLightItem&&
this.highLightItem.clearHighLight()},setHighLight:function(b){for(var c=0;c<this.itemArray.length;c++)if(b<=this.itemArray[c].toIndex&&b>=this.itemArray[c].fromIndex){this.gotoItemByIndex(c);this.itemArray[c].setHighLight(b);this.highLightItem=this.currentItem;break}},fillContent:function(){this.setHighLight(this.highLightItem.index)},showOrHide:function(){!1===this.visible?this.show():this.hide();catalogBook&&catalogBook.showOrHideLiteThumbnail()},show:function(){this.showing=this.visible=!0;this.menu.animate.delay(this.menu,
100,[{bottom:-105+toolBar.getBottomHeight()+"px"},300])},hide:function(){this.menu.animate.delay(this.menu,100,[{bottom:-this.height+"px"},300]);this.showing=this.visible=!1},setPosition:function(){},getHeight:function(){return this.getTopHeight()+this.getBottomHeight()},getTopHeight:function(){return 0},getBottomHeight:function(){return!0==this.visible?110:0}});var GuidToolbar=Class({create:function(b){this.$bar=$("<div class='catalog_simple_bar'></div>");this.initButtons();this.initLogo();this.changeLanguage();this.resetButtons();this.initEvent();b.append(this.$bar)},initButtons:function(){this.numBtn=$("<div id='guidPageIndex' class='page_num'></div>");this.thumBtn=$("<div id='thumb' class='button'></div>");this.moreBtn=$("<div id='more' class='button'></div>");this.fullscreenBtn=$("<div id='fullScreen' class='button'></div>");this.searchBtn=$("<div id='search' class='button'></div>");
this.shareBtn=$("<div id='share' class='button'></div>");this.toolBarIconUrl=uiBaseURL+"catalog_icon.png";this.thumBtn.addCssSprite(this.toolBarIconUrl,"thumb",38,38,catalogIconInfo);this.moreBtn.addCssSprite(this.toolBarIconUrl,"more",38,38,catalogIconInfo);this.fullscreenBtn.addCssSprite(this.toolBarIconUrl,"fullScreen",38,38,catalogIconInfo);this.searchBtn.addCssSprite(this.toolBarIconUrl,"search",38,38,catalogIconInfo);this.shareBtn.addCssSprite(this.toolBarIconUrl,"share",38,38,catalogIconInfo);
this.thumBtn.enterToChange(this.toolBarIconUrl,"thumb",38,38,catalogIconInfo);this.moreBtn.enterToChange(this.toolBarIconUrl,"more",38,38,catalogIconInfo);this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"fullScreen",38,38,catalogIconInfo);this.searchBtn.enterToChange(this.toolBarIconUrl,"search",38,38,catalogIconInfo);this.shareBtn.enterToChange(this.toolBarIconUrl,"share",38,38,catalogIconInfo);this.$bar.append(this.shareBtn);this.$bar.append(this.searchBtn);this.$bar.append(this.numBtn);this.$bar.append(this.thumBtn);
this.$bar.append(this.moreBtn);this.$bar.append(this.fullscreenBtn)},changeLanguage:function(){this.shareBtn.attr("title",getLanguage("btnSocialShare","Share"));this.searchBtn.attr("title",getLanguage("btnSearch","Search"));this.thumBtn.attr("title",getLanguage("btnThumb","Thumbnails"));this.moreBtn.attr("title",getLanguage("btnMore","More"));this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Fullscreen"))},resetButtons:function(){this.iconWidth=38;this.numWidth=60;10<=bookConfig.totalPageCount&&
(this.numWidth=80);100<=bookConfig.totalPageCount&&(this.numWidth=100);1E3<=bookConfig.totalPageCount&&(this.numWidth=125);1E4<=bookConfig.totalPageCount&&(this.numWidth=145);var b=12;this.numBtn.css({width:this.numWidth+"px",left:b+"px"});b+=this.numWidth;bookConfig.ShareButtonVisible?(this.shareBtn.css({left:b+"px"}),b+=this.iconWidth):this.shareBtn.hide();bookConfig.SearchButtonVisible?(this.searchBtn.css({left:b+"px"}),b+=this.iconWidth):this.searchBtn.hide();bookConfig.ThumbnailsButtonVisible?
(this.thumBtn.css({left:b+"px"}),b+=this.iconWidth):this.thumBtn.hide();this.moreBtn.css({left:b+"px"});b+=this.iconWidth;bookConfig.FullscreenButtonVisible?(this.fullscreenBtn.css({left:b+"px"}),b+=this.iconWidth):this.fullscreenBtn.hide();this.$bar.css({width:b+7+"px"})},initEvent:function(){this.addResponseDom();this.thumBtn.bind(_event._end,function(){thumbnail&&thumbnail.showOrHide()});this.fullscreenBtn.bind(_event._end,readAsFullscreen);$(document).bind(fullScreenApi.fullScreenEventName,function(){this.changeFullscreenIcon(fullScreenApi.isFullScreen())}.bind(this));
this.searchBtn.bind(_event._end,function(){frmSearch&&frmSearch.showOrHide()});this.shareBtn.bind(_event._end,function(){sharePanel&&sharePanel.showOrHide()});var b=5,c;this.moreBtn.bind(_event._end,function(){catalogBook.hideGuidBarAndShowToolBar();"complex"==catalogBook.mode&&(b=5,g(),f())}.bind(this));var d=!1,f=function(){if(!d){d=!0;for(var f=0;f<this.responseDomArray.length;f++)this.responseDomArray[f].bind(_event._over,function(){window.clearInterval(c)}),this.responseDomArray[f].bind(_event._leave,
function(){b=5;g()})}}.bind(this),g=function(){window.clearInterval(c);c=window.setInterval(function(){b--;0>=b&&(catalogBook.hideToolBarAndShowGuidBar(),"simple"==catalogBook.mode?window.clearInterval(c):b=5)},1E3)}},addResponseDom:function(){this.responseDomArray=[];global.toolBar&&(global.toolBar&&toolBar.topBar&&this.responseDomArray.push(toolBar.topBar),global.toolBar&&toolBar.bottomBar&&this.responseDomArray.push(toolBar.bottomBar),global.toolBar&&toolBar.extendedBar.$bar&&this.responseDomArray.push(toolBar.extendedBar.$bar),
toolBar.buttons.each(function(b){this.responseDomArray.push(b.$button)}.bind(this)))},changeFullscreenIcon:function(b){b?(this.fullscreenBtn.changeCssSprite(this.toolBarIconUrl,"exitFullScreen",35,35,catalogIconInfo),this.fullscreenBtn.attr("title",getLanguage("btnExitFullscreen","exitFullScreen")),this.fullscreenBtn.unbind(_event._down),this.fullscreenBtn.unbind(_event._enter),this.fullscreenBtn.unbind(_event._leave),this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"exitFullScreen",35,35,catalogIconInfo)):
(this.fullscreenBtn.changeCssSprite(this.toolBarIconUrl,"fullScreen",35,35,catalogIconInfo),this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Fullscreen")),this.fullscreenBtn.unbind(_event._down),this.fullscreenBtn.unbind(_event._enter),this.fullscreenBtn.unbind(_event._leave),this.fullscreenBtn.enterToChange(this.toolBarIconUrl,"fullScreen",35,35,catalogIconInfo))},show:function(){this.$bar.show();this.logo&&this.logo.show()},hide:function(){this.$bar.hide();this.logo&&this.logo.hide()},
getHeight:function(){return 50},onResize:function(){},initLogo:function(){bookConfig.appLogoIcon&&(this.logo=$("<img src='"+bookConfig.appLogoIcon+"' class='catalog_logo'/>"),this.logo.css({left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px"}),this.logo.click(function(){var b=getLogoLink();window.open(b[0],b[1]);return!1}),tmpContainer.append(this.logo))}});var SlideThumbnailCell=Class({create:function(b){this.background=$("<div style='position:absolute;'></div>");this.pageNum=$("<div style='position:absolute;'></div>");this.img=$("<img />");this.imgBac=$("<div></div>");this.pageIndex=-1;this.height=115;this.width=95*bookConfig.largePageWidth/bookConfig.largePageHeight;this.imgHeight=this.imgWidth=-1;$(b).append(this.background);$(this.background).append(this.pageNum);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+
"px",top:"0px"});$(this.pageNum).css({width:this.width+"px",height:20,bottom:"-8px","line-height":"20px","text-align":"center","vertical-align":"middle",color:"#ffffff","font-size":"12px"});$(this.imgBac).append(this.img);$(this.imgBac).css({position:"absolute"});$(this.img).css({position:"absolute"});$(this.img).addBorderShadow("#555555",0,2)},getPageIndex:function(){return this.pageIndex},getWidth:function(){return this.width},getHeight:function(){return this.height},setPosition:function(b,c,d){void 0==
d&&(d=["left","top"]);$(this.background).css(d[0],b+"px");$(this.background).css(d[1],c+"px")},onResize:function(b,c){$(this.background).css({width:b+"px",height:c+"px"});this.onResizeImage(b,c)},onResizeImage:function(){$(this.img).css({width:this.width+"px",height:"95px"});$(this.imgBac).css({width:this.width+"px",height:"95px"})},setImgPosition:function(b){switch(b){case "l":$(this.imgBac).css({left:"0px",right:"auto"});break;case "r":$(this.imgBac).css({right:"0px",left:"auto"});break;case "c":$(this.imgBac).css({left:(this.width-
this.imgWidth)/2+"px",right:"auto"})}},setCaption:function(b){this.pageNum.html(b)},fillImage:function(b){this.pageIndex=b;this.img=$("<img/>");$(this.img).attr("src",getPageDir(b,"thumb",originTotalPageCount));$(this.background).append(this.imgBac);this.imgBac.empty();$(this.imgBac).append(this.img);this.onResizeImage(this.width,this.height);this.pageNum.html("<b>"+b+"</b>")},clearImage:function(b){$(this.imgBac).empty()},showBorder:function(){$(this.background).css({border:""})},hideBorder:function(){$(this.background)[0].style.border=
""},getTextField:function(){return this.pageNum},hideTextField:function(){this.pageNum.hide()},showTextField:function(){this.pageNum.show()},showCell:function(b){$(this.background).css({display:b?"block":"none"})},onMouseUp:function(b,c){var d=this;$(this.background).bind(_event._end,function(f){c.call(b,d)});$(this.background).bind(_event._enter,function(b){d.background.css({cursor:"pointer"})})},highLight:function(b){$(this.imgBac).css({border:"2px solid #ff8040"})},onMouseOver:function(){var b=
this;$(this.imgBac).css({border:""});$(this.imgBac).bind(_event._enter,function(c){b.imgBac.css({border:"2px solid #0080ff"})});$(this.imgBac).bind(_event._leave,function(c){b.imgBac.css({border:""})})},clearMouseOver:function(){var b=this;$(this.imgBac).bind(_event._enter,function(c){b.imgBac.css({border:""})});$(this.imgBac).bind(_event._leave,function(c){b.imgBac.css({border:""})})},onMouseOverUp:function(){var b=this;$(this.imgBac).bind(_event._enter,function(c){b.imgBac.css({border:"2px solid #0080ff"})});
$(this.imgBac).bind(_event._leave,function(c){b.imgBac.css({border:"2px solid #ff8040"})})},clearHighLight:function(){$(this.imgBac).css({border:""})}});var SlideThumbnailItem=Class({create:function(b,c){this.background=$("<div style='position:absolute;font-family:Arial,Tahoma;'></div>");this.imageBac=$("<div style='position:absolute;'></div>");this.pageNum=$("<div style='position:absolute;'></div>");this.itemB=new SlideThumbnailCell(this.imageBac);this.itemA=new SlideThumbnailCell(this.imageBac);this.height=115;this.width=190*bookConfig.largePageWidth/bookConfig.largePageHeight;this.isMerge=this.isDoublePage=!0;this.pageIndex=c;this.fillImage=!1;
this.mainColor="#000000";$(b).append(this.background);$(this.background).append(this.imageBac);$(this.background).append(this.pageNum);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+"px",top:"2px"});$(this.imageBac).css({position:"absolute",width:this.width+"px",height:95});$(this.pageNum).css({width:this.width+"px",height:20,bottom:"-8px","line-height":"20px","text-align":"center","vertical-align":"middle",color:"#ffffff","font-size":"12px"});1!=c&&c!=totalPageCount?
(this.itemA.setPosition(0,0,rightToLeft?["right","top"]:["left","top"]),this.itemB.setPosition(0,0,rightToLeft?["left","top"]:["right","top"]),this.itemB.onMouseUp(this,this.onItemMouseUp),this.itemA.pageIndex=c,this.itemB.pageIndex=c+1,this.onMouseOver()):(1==c?this.itemA.setPosition(0,0):rightToLeft?this.itemA.setPosition(0,0,["right","top"]):this.itemA.setPosition(0,0),this.itemB.showCell(!1),this.setBorder(!1),this.itemA.pageIndex=c,this.itemA.onMouseOver());this.itemA.onMouseUp(this,this.onItemMouseUp);
$(this.pageNum).hide()},getWidth:function(){return this.width},addImage:function(){this.fillImage||(this.itemA.fillImage(this.pageIndex),1!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.itemB.fillImage(this.pageIndex+1),this.fillImage=!0,rightToLeft?$(this.pageNum).html(this.pageIndex+1+"-"+this.pageIndex):$(this.pageNum).html("<b>"+this.pageIndex+"-"+(this.pageIndex+1)+"</b>"))},clearImage:function(){this.itemA.clearImage(this.pageIndex);1!=this.pageIndex&&this.pageIndex!=totalPageCount&&
this.itemB.clearImage(this.pageIndex+1);this.fillImage=!1},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);$(this.background).css(d[0],b+"px");$(this.background).css(d[1],c+"px")},onResize:function(b,c){this.width=b;this.height=c;$(this.background).css({width:b+"px",height:c+"px"})},resetItem:function(){},fission:function(){1!=this.pageIndex&&this.pageIndex!=totalPageCount&&(this.setBorder(!1),this.onResize(this.width,this.height),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),
this.showTextField(!1),this.isMerge=!1)},merge:function(){1!=this.pageIndex&&this.pageIndex!=totalPageCount&&(this.setBorder(!1),this.onResize(this.width,this.height),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),this.showTextField(!0),this.isMerge=!0)},showBorder:function(){$(this.imageBac).css({border:"1px solid #444444"})},hideBorder:function(){$(this.imageBac)[0].style.border=""},showTextField:function(b){var c=b?"none":"block";this.pageNum.css({display:b?"block":"none"});this.itemA.getTextField().css({display:c});
this.itemB.getTextField().css({display:c})},setBorder:function(b){b?$(this.imageBac).css({border:"1px solid #444444"}):$(this.imageBac)[0].style.border="";this.itemA.hideBorder();this.itemB.hideBorder()},onItemMouseUp:function(b){isThumbDrag||(b=b.getPageIndex(),gotoPageFun(b),thumbnail&&thumbnail.setHighLight(b))},highLight:function(b){this.isMerge?1==b||b==totalPageCount?(this.itemA.highLight("#ffffff"),this.itemA.onMouseOverUp()):($(this.imageBac).css({border:"2px solid #ff8040"}),this.onMouseOverUp()):
b==this.pageIndex?(this.itemA.highLight("#ffffff"),this.itemA.onMouseOverUp()):(this.itemB.highLight("#ffffff"),this.itemB.onMouseOverUp())},onMouseOver:function(){var b=this;$(this.imageBac).css({border:""});$(this.imageBac).bind(_event._enter,function(c){b.imageBac.css({border:"2px solid #0080ff"})});$(this.imageBac).bind(_event._leave,function(c){b.imageBac.css({border:""})})},onMouseOverUp:function(){var b=this;$(this.imageBac).bind(_event._enter,function(c){b.imageBac.css({border:"2px solid #0080ff"})});
$(this.imageBac).bind(_event._leave,function(c){b.imageBac.css({border:"2px solid #ff8040"})})},clearMouseOver:function(){var b=this;$(this.imageBac).bind(_event._enter,function(c){b.imageBac.css({border:""})});$(this.imageBac).bind(_event._leave,function(c){b.imageBac.css({border:""})})},clearHighLight:function(){this.isMerge?1==this.pageIndex||this.pageIndex==totalPageCount?(this.itemA.onMouseOver(),this.itemB.onMouseOver()):(this.onMouseOver(),this.itemA.clearMouseOver(),this.itemB.clearMouseOver()):
(this.itemA.onMouseOver(),this.itemB.onMouseOver(),this.clearMouseOver());this.itemA.clearHighLight();this.itemB.clearHighLight()}});var isThumbDrag=!1,SlideThumbnailBar=Class({create:function(b){this.width=windowWidth;this.height=135;this.contentHeight=120;this.mainColor="#888888";this.thumbArray=[];this.mouseDown=this.showing=!1;this.scrollBoxX=this.mouseDownX=-1;this.lastMoveX=-1+(windowWidth-this.width+20)/2;this.lastMoveTime=-1;this.mergeing=this.moveLeft=!1;this.pageIndex=this.currentCellIndex=1;this.createThumbItemFalg=!1;this.oldMode=this.currentMedo=0;this.initPanel(b)},initPanel:function(b){this.background=$("<div id='slide_thumbnail'></div>");
this.contentBox=$("<div></div>");this.contentBac=$("<div></div>");this.scrollBox=$("<div></div>");this.openButton=$("<div id='slide_open_button'></div>");$(this.background).css({width:"100%",bottom:-this.height,position:"absolute",height:this.height,"z-index":100});$(this.contentBac).css({width:"100%",bottom:-this.height,position:"absolute",height:this.height,"z-index":100});this.scrollBox.css({position:"absolute",height:this.contentHeight});this.contentBox.css({width:"100%",position:"absolute",bottom:"1px",
height:"100%",left:10,top:(this.height-this.contentHeight)/2,overflow:"hidden",opacity:"0.9"});this.openButton.css({width:"47px",height:"20px",background:bookConfig.thumbnailColor,"border-radius":"5px 5px 0px 0px",margin:"-20px auto",position:"relative","padding-top":"-16px",cursor:"pointer","text-align":"center"});this.openButton.append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-up.png'/>");$(this.contentBac).css({background:bookConfig.thumbnailColor});isNaN(bookConfig.thumbnailAlpha)||
""==bookConfig.thumbnailAlpha||null==bookConfig.thumbnailAlpha||void 0==bookConfig.thumbnailAlpha?isBelowIE9()||$(this.contentBac).css({opacity:0.3}):isBelowIE9()||$(this.contentBac).css({opacity:bookConfig.thumbnailAlpha/100});$(b).append(this.contentBac);$(b).append(this.background);$(this.background).append(this.contentBox);$(this.contentBox).append(this.scrollBox);$(this.contentBac).append(this.openButton);this.openButton.bind(_event._end,this.showOrHide.bind(this))},getPageIndex:function(){return this.pageIndex},
setPageIndex:function(b){this.pageIndex=b},getHeight:function(){return this.height},onResize:function(){this.width=windowWidth;var b=$(this.contentBox).width(),c=$(this.scrollBox).width();if(b>c)$(this.scrollBox).css({left:(b-c)/2+"px"});else{var d=$(this.scrollBox).offset().left;0<d&&(d=0);d<b-c&&(d=b-c);$(this.scrollBox).css({left:d+"px"})}},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);$(this.background).css(d[0],b+"px");$(this.background).css(d[1],c+"px");$(this.contentBac).css(d[0],
b+"px");$(this.contentBac).css(d[1],c+"px")},addItem:function(){for(var b=0;b<=originTotalPageCount;){var c=0==b?new SlideThumbnailItem(this.scrollBox,1):new SlideThumbnailItem(this.scrollBox,b);c.getWidth();c.setPosition(this.thumbArray.length*(c.getWidth()+15)+5,2.5);this.thumbArray.push(c);b+=2}$(this.scrollBox).css({width:this.thumbArray.length*(c.getWidth()+15)+10+"px"})},resetItemPosition:function(){for(var b=0,c=this.thumbArray.length,d,f=0;f<c;f++){var g=this.thumbArray[f];d=g.getWidth()/
2+20+(c-1)*(g.getWidth()+15);rightToLeft?0==f?(b=d-5-g.getWidth()/2,g.setPosition(b,2.5),b=b-15-g.getWidth()):(g.setPosition(b,2.5),b=b-g.getWidth()-15):0==f?(g.setPosition(5,2.5),b=g.getWidth()/2+20):(g.setPosition(b,2.5),b=b+g.getWidth()+15)}$(this.scrollBox).css({width:d})},mergeAll:function(){this.currentMedo=2;this.showing&&this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&(this.repositionDouble(),this.oldMode=2);this.mergeing=!0},fissionAll:function(){this.currentMedo=1;this.showing&&
this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&(this.repositionSingle(),this.oldMode=1);this.mergeing=!1},repositionDouble:function(){for(var b=0;b<this.thumbArray.length;b++)this.thumbArray[b].merge();this.resetItemPosition();this.clearHighLight(this.getPageIndex());this.setHighLight(this.getPageIndex())},repositionSingle:function(){for(var b=0;b<this.thumbArray.length;b++)this.thumbArray[b].fission();this.resetItemPosition();this.clearHighLight(this.getPageIndex());this.setHighLight(this.getPageIndex())},
getShowStatu:function(){return this.showing},setShowStatu:function(b){this.showing=b},showOrHide:function(){this.showing?this.hide():this.show()},show:function(){this.showing=!0;this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&1===this.currentMedo&&this.repositionSingle();this.createThumbItemFalg&&this.currentMedo!=this.oldMode&&2===this.currentMedo&&this.repositionDouble();this.createThumbItemFalg||(this.createThumbItemFalg=!0,this.addItem(),1===this.currentMedo?this.repositionSingle():
this.repositionDouble(),this.initEvent(),this.onResize(),this.setHighLight(this.getPageIndex()),this.fillNearByImages(0));this.oldMode=this.currentMedo;$(this.background).animate({bottom:0},300);$(this.contentBac).animate({bottom:0},300);this.openButton.empty().append("<img style='margin-top:5px;' src='"+uiBaseURL+"arrow-down.png'/>")},hide:function(){$(this.background).animate({bottom:-135},300);$(this.contentBac).animate({bottom:-135},300);this.openButton.empty().append("<img style='margin-top:5px;' src='"+
uiBaseURL+"arrow-up.png'/>");this.showing=!1},getOccuHeight:function(){return 120},initEvent:function(){var b=this;this.background.bind(_event._down,function(b){return!1});$(this.contentBox).bind(_event._down,function(c){b.mouseDown=!0;isThumbDrag=!1;c=isTouch?c.originalEvent.touches:[c];b.mouseDownX=c[0].pageX;b.scrollBoxX=$(b.scrollBox).offset().left;return!1});$(this.contentBox).bind(_event._move,function(c){if(b.mouseDown){c=isTouch?c.originalEvent.touches:[c];var d=b.mouseDownX-c[0].pageX;20<
Math.abs(d)&&(isThumbDrag=!0);$(b.contentBox).width()>$(b.scrollBox).width()||(d=b.scrollBoxX-d-(windowWidth-b.width+20)/2,0<d&&(d=0),d<$(b.contentBox).width()-$(b.scrollBox).width()&&(d=$(b.contentBox).width()-$(b.scrollBox).width()),$(b.scrollBox).css({left:d+"px"}),b.moveLeft=b.lastMoveX>c[0].pageX?!0:!1,b.lastMoveX=c[0].pageX,b.lastMoveTime=(new Date).getTime())}});$(this.contentBox).bind(_event._end,function(c){b.mouseDown=!1;100>(new Date).getTime()-b.lastMoveTime&&-1!=b.lastMoveTime&&(c=b.moveLeft?
-30:30,b.tweener($(b.scrollBox).offset().left-(windowWidth-b.width+20)/2,c,10))});$(this.contentBox).bind("mouseleave",function(c){b.mouseDown=!1})},setHighLight:function(b){this.currentCellIndex=b;this.setPageIndex(b);if(this.createThumbItemFalg){var c=Math.floor(b/2);if(!(b>originTotalPageCount))if(this.thumbArray[c].highLight(b),this.clearHighLight(c),$(this.contentBox).width()>$(this.scrollBox).width())$(this.scrollBox).css({left:($(this.contentBox).width()-$(this.scrollBox).width())/2+"px"});
else{b=$(this.scrollBox).offset().left-(windowWidth-self.width+20)/2;var d=$(this.contentBox).width(),f=rightToLeft?(this.thumbArray.length-(c-1))*(this.thumbArray[c].getWidth()+5)+5:(c-1)*(this.thumbArray[c].getWidth()+5)+5,c=this.thumbArray[c].getWidth();this.tweener(b,-(f+b-(d-c)/2)/6,6)}}},clearHighLight:function(b){if(this.createThumbItemFalg)for(var c=0;c<this.thumbArray.length;c++)c!=b&&this.thumbArray[c].clearHighLight()},tweener:function(b,c,d){var f=function(b,c){for(var d=c/2,f=(b-b/4)/
d,g=Array(c),h=0;h<c;h++)g[h]=h<d?b-(d-h)*f:b+(h-d+1)*f;return g.reverse()}(c,d),g=b,h=0,k=this,l=window.setInterval(function(){g+=f[h];h++;h==d&&(g=b+c*d);0<g&&(g=0);g<$(k.contentBox).width()-$(k.scrollBox).width()&&(g=$(k.contentBox).width()-$(k.scrollBox).width());$(k.scrollBox).css({left:g+"px"});h>=d&&(window.clearInterval(l),k.fillNearByImages(g))},30)},fillNearByImages:function(b){if(this.createThumbItemFalg){var c=Math.ceil((this.background.width()-b)/65)+2;this.background.width()>this.scrollBox.width()?
(b=0,c=originTotalPageCount+1):b=0==b?0:Math.ceil(-b/100);b=Math.max(Math.ceil(b/2),0);c=Math.min(c,originTotalPageCount+1);if(0<b)for(var d=0;d<b;d++)this.thumbArray[d]&&this.thumbArray[d].clearImage();for(d=b;d<Math.ceil(c/2);d++)b=rightToLeft?this.thumbArray.length-d-1:d,this.thumbArray[b]&&this.thumbArray[b].addImage()}}});Class("PCSlideToolbar",{create:function(b){this.parent=b;this.initToolBar();this.initGuidBar();this.initLogo()},initGuidBar:function(){this.leftBar=$("<div style='z-index:5;position:absolute;cursor:pointer;width:50px;height:50px;top:50%;opacity:0.7;margin-top:-25px;'></div>");this.rightBar=$("<div class='slideBar'></div>");this.leftBar.css({left:bookConfig.leftMargin,"background-image":"url("+uiBaseURL+"slide_prev_page.png)","background-repeat":"no-repeat","background-position":"center","background-size":"18px 18px",
"background-color":bookConfig.toolbarColor,"border-radius":"5px"});this.rightBar.css({right:bookConfig.rightMargin,"background-image":"url("+uiBaseURL+"slide_next_page.png)","background-repeat":"no-repeat","background-position":"center","background-size":"18px 18px","background-color":bookConfig.toolbarColor,"border-radius":"5px"});this.parent.append(this.leftBar);this.parent.append(this.rightBar);rightToLeft?(this.leftBar.bind(_event._end,nextPageFun),this.rightBar.bind(_event._end,previousPageFun),
this.leftBar.attr({title:getLanguage("btnNextPage","Next")}),this.rightBar.attr({title:getLanguage("btnPrePage","Previous")})):(this.leftBar.bind(_event._end,previousPageFun),this.rightBar.bind(_event._end,nextPageFun),this.leftBar.attr({title:getLanguage("btnPrePage","Previous")}),this.rightBar.attr({title:getLanguage("btnNextPage","Next")}));this.rightBar.bind(_event._down,function(){this.rightBar.css({opacity:"0.5"})}.bind(this));this.rightBar.bind(_event._end+" "+_event._leave,function(){this.rightBar.css({opacity:"0.7"})}.bind(this));
this.leftBar.bind(_event._down,function(){this.leftBar.css({opacity:"0.5"})}.bind(this));this.leftBar.bind(_event._end+" "+_event._leave,function(){this.leftBar.css({opacity:"0.7"})}.bind(this))},initToolBar:function(){this.toolbarBac=$("<div class='slideToolbar'></div>");this.fullscreenBtn=$("<img src='"+uiBaseURL+"slide-fullscreen.png'/>");this.homeBtn=$("<img src='"+uiBaseURL+"slide-home.png'/>");bookConfig.ShareButtonVisible&&(this.shareBtn=$("<img src='"+uiBaseURL+"slide-share.png'/>"));this.parent.append(this.toolbarBac);
this.toolbarBac.append(this.fullscreenBtn);this.toolbarBac.append(this.homeBtn);this.toolbarBac.append(this.shareBtn);this.toolbarBac.css("background-color",bookConfig.toolbarColor);this.shareBtn&&this.shareBtn.bind(_event._end,function(){sharePanel.showOrHide();return!1});this.homeBtn.bind(_event._end,function(){homeButtonEvent();return!1});this.fullscreenBtn.bind(_event._end,function(){readAsFullscreen();return!1});$(document).bind(fullScreenApi.fullScreenEventName,function(){this.changeFullscreenIcon(fullScreenApi.isFullScreen())}.bind(this));
this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Enter fullscreen"));this.homeBtn.attr("title",getLanguage("btnGoToHome","Home"));this.shareBtn&&this.shareBtn.attr("title",getLanguage("btnSocialShare","Share"));var b=this.toolbarBac.width();this.toolbarBac.css({"margin-left":-b/2+"px"})},changeFullscreenIcon:function(){fullScreenApi.isFullScreen()?(this.fullscreenBtn.attr("src",uiBaseURL+"slide-exitFullscreen.png"),this.fullscreenBtn.attr("title",getLanguage("btnExitFullscreen","Exit fullscreen"))):
(this.fullscreenBtn.attr("src",uiBaseURL+"slide-fullscreen.png"),this.fullscreenBtn.attr("title",getLanguage("btnFullscreen","Enter fullscreen")))},hide:function(){},show:function(){},getLogoHeight:function(){return 0},getHeight:function(){return 0},getTopHeight:function(){return 0},getBottomHeight:function(){return 0},getWidth:function(){return 0},setButtonPosition:function(){},initLogo:function(){bookConfig.appLogoIcon&&""!=bookConfig.appLogoIcon&&(this.logo=$("<img src='"+bookConfig.appLogoIcon+
"'/>"),this.logo.css({position:"absolute",left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px",cursor:"pointer","z-index":"3"}),this.logo.click(function(){var b=getLogoLink();window.open(b[0],b[1]);return!1}),this.parent.append(this.logo))}});var homeButtonEvent=function(){if("%first page%"==bookConfig.HomeURL.toLowerCase())firstPageFun();else if(void 0!=bookConfig.HomeURL&&""!=bookConfig.HomeURL){var b=bookConfig.HomeURL,b=getRealURL(b);window.open(b,bookConfig.OpenWindow)}};var PhoneThumbnailForm=Class({create:function(b){this.visible=!1;this.totalPageCount=bookConfig.totalPageCount;this.itemWidth=90;this.marginLeft=20;this.marginTop=10;this.itemBorderWidth=3;this.toolBarHeight=80;this.topBarHeight=40;this.itemBorderColor="#f76c6c";this.itemArray=[];this.taskList=new TaskList;this.itemHeightArray=this.getHeightArray();bookConfig.appLogoIcon||bookConfig.InstructionsButtonVisible||(this.toolBarHeight=40,this.topBarHeight=0);this.background=$("<div id='phoneThum' style='opacity:0;display:none;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;text-align:center;position:absolute;z-index:98;background:rgba(51,51,51,0.8);width:100%;left:0;'></div>");
this.itemBox=$("<div style='text-align:left;display:inline-block;padding:0px 0px "+this.marginLeft+"px 0px;'></div>");this.background.css({top:this.topBarHeight+"px"});b.append(this.background);this.background.append(this.itemBox);this.initEvent();this.addItem();this.setHighLight(BookInfo.getCurrentPageIndex())},onResize:function(){this.countHorizatal=parseInt((windowWidth-this.marginLeft)/(this.itemWidth+this.marginLeft));this.countVertical=parseInt((windowHeight-this.toolBarHeight-this.marginTop)/
(this.itemHeightArray.itemHeight+this.marginTop))+1;this.itemBox.css({width:this.countHorizatal*(this.itemWidth+this.marginLeft)+this.marginLeft});this.background.css({height:windowHeight-this.toolBarHeight});this.taskList.setLargeLength(this.countHorizatal*this.countVertical)},fillContent:function(){this.interval&&!this.interval.isRunning()?this.interval.start():this.interval=function(){this.performTask()}.interval(this,60)},performTask:function(){for(var b=this.getShownItems(),c=b[1],b=b[0];b<c;b++){var d=
function(){thumbnail.fillImage(this.index)}.bind({index:b});d.id=b;this.taskList.unShiftTask(d)}},getShownItems:function(){var b=-this.itemBox.offset().top+40,b=parseInt(b/(this.itemHeightArray.itemHeight+this.marginTop)),b=this.countHorizatal*b,c=b+this.countHorizatal*this.countVertical,c=Math.min(c,this.totalPageCount),b=Math.max(0,b);return[b,c]},goToPosition:function(){this.getShownItems();var b=BookInfo.getCurrentPageIndex(),b=8+Math.ceil(b/3)*(this.itemHeightArray.itemHeight+this.marginTop)-
windowHeight+this.toolBarHeight;this.background.scrollTop(b)},hide:function(){this.visible&&this.background.animate({opacity:"0"},300,"linear",function(){this.background.hide();this.visible=!1;this.interval&&this.interval.stop()}.bind(this))},getShowStatu:function(){return this.visible},show:function(){this.visible||(this.background.show(),this.fillContent(),this.goToPosition(),this.background.animate({opacity:"1"},300,"linear",function(){this.visible=!0}.bind(this)))},setHighLight:function(b){this.itemArray&&
this.itemArray[b-1]&&this.itemArray[b-1].imgContainer&&this.itemArray[b-1].imgContainer.css({"border-color":this.itemBorderColor})},clearHighLight:function(){if(this.itemArray)for(var b=this.itemArray.length,c=0;c<b;c++)this.itemArray[c].imgContainer&&this.itemArray[c].imgContainer.css({"border-color":"transparent"})},fissionAll:function(){},mergeAll:function(){},showOrHide:function(){this.visible?this.hide():this.show()},addItem:function(){for(var b=0;b<this.totalPageCount;b++){var c=this.initItem(b);
this.itemBox.append(c.item);this.itemArray.push(c)}},getHeightArray:function(){var b=(this.itemWidth-2*this.itemBorderWidth)*bookConfig.largePageHeight/bookConfig.largePageWidth;return{imageHeight:b,titleHeight:15,itemHeight:b+15+4*this.itemBorderWidth}},initItem:function(b){var c=$("<div style='display:inline-block;'></div>"),d=$("<p><span>"+getShownPageNumber(b+1)+"</span></p>"),f=$("<div></div>"),g=$("<img/>");c.css({cursor:"pointer",width:this.itemWidth,height:this.itemHeightArray.itemHeight,
padding:this.marginTop+"px 0px 0px "+this.marginLeft+"px","text-align":"center"});f.css({width:this.itemWidth-2*this.itemBorderWidth,height:this.itemHeightArray.imageHeight,"border-style":"solid","border-width":this.itemBorderWidth+"px","border-radius":this.itemBorderWidth+"px","border-color":"transparent",position:"relative"});g.css({width:"100%",height:"100%","background-color":"#ffffff","background-image":"url("+uiBaseURL+"loading.gif)","background-repeat":"no-repeat","background-position":"center"});
d.css({width:this.itemWidth-2*this.itemBorderWidth,height:this.itemHeightArray.titleHeight+"px","line-height":this.itemHeightArray.titleHeight+"px","vertical-align":"middle",color:Color(bookConfig.formFontColor).toString(),"font-family":"Arial","font-size":this.itemHeightArray.titleHeight+"px",padding:"0px",margin:"0px","border-style":"solid","border-width":this.itemBorderWidth+"px","border-color":"transparent"});var h=$("<div></div>");h.css({position:"absolute",top:0,left:0,width:"100%",height:"100%",
"z-index":5});f.append(g);bookConfig.isStopMouseMenu&&f.append(h);c.append(f);c.append(d);c.attr("id",b);c.bind(_event._end,function(b){b.stopPropagation()}.bind(this));c.bind("click",function(c){gotoPageFun(b+1);this.hide();c.stopPropagation()}.bind(this));return{item:c,imgContainer:f,img:g,title:d,fill:!1}},fillImage:function(b){if(this.itemArray&&this.itemArray[b]&&!this.itemArray[b].fill&&this.itemArray[b].img){var c=function(c){this.itemArray[b].img.attr("src",c)}.bind(this);this.LoadCount++;
this.itemArray[b].fill=!0;fillImageAfterLoaded(b+1,"thumb",c)}},getHeight:function(){return 0},getTopHeight:function(){return 0},initEvent:function(){this.background.onTap(function(){this.hide()}.bind(this))}});var hexcase=0,b64pad="",chrsz=8;function compareov(){var b=Date.parse(new Date);return orgt(b)===vldt(b)}function orgt(b){return binl2hex(core_hx(str2binl(b),b.length*chrsz))}function vldt(b){return binl2hex(core_hx(str2binl(b),b.length*chrsz))}
function core_hx(b,c){b[c>>5]|=128<<c%32;b[(c+64>>>9<<4)+14]=c;for(var d=1732584193,f=-271733879,g=-1732584194,h=271733878,k=0;k<b.length;k+=16)var l=d,m=f,n=g,p=h,d=hx_ff(d,f,g,h,b[k+0],7,-680876936),h=hx_ff(h,d,f,g,b[k+1],12,-389564586),g=hx_ff(g,h,d,f,b[k+2],17,606105819),f=hx_ff(f,g,h,d,b[k+3],22,-1044525330),d=hx_ff(d,f,g,h,b[k+4],7,-176418897),h=hx_ff(h,d,f,g,b[k+5],12,1200080426),g=hx_ff(g,h,d,f,b[k+6],17,-1473231341),f=hx_ff(f,g,h,d,b[k+7],22,-45705983),d=hx_ff(d,f,g,h,b[k+8],7,1770035416),
h=hx_ff(h,d,f,g,b[k+9],12,-1958414417),g=hx_ff(g,h,d,f,b[k+10],17,-42063),f=hx_ff(f,g,h,d,b[k+11],22,-1990404162),d=hx_ff(d,f,g,h,b[k+12],7,1804603682),h=hx_ff(h,d,f,g,b[k+13],12,-40341101),g=hx_ff(g,h,d,f,b[k+14],17,-1502002290),f=hx_ff(f,g,h,d,b[k+15],22,1236535329),d=hx_gg(d,f,g,h,b[k+1],5,-165796510),h=hx_gg(h,d,f,g,b[k+6],9,-1069501632),g=hx_gg(g,h,d,f,b[k+11],14,643717713),f=hx_gg(f,g,h,d,b[k+0],20,-373897302),d=hx_gg(d,f,g,h,b[k+5],5,-701558691),h=hx_gg(h,d,f,g,b[k+10],9,38016083),g=hx_gg(g,
h,d,f,b[k+15],14,-660478335),f=hx_gg(f,g,h,d,b[k+4],20,-405537848),d=hx_gg(d,f,g,h,b[k+9],5,568446438),h=hx_gg(h,d,f,g,b[k+14],9,-1019803690),g=hx_gg(g,h,d,f,b[k+3],14,-187363961),f=hx_gg(f,g,h,d,b[k+8],20,1163531501),d=hx_gg(d,f,g,h,b[k+13],5,-1444681467),h=hx_gg(h,d,f,g,b[k+2],9,-51403784),g=hx_gg(g,h,d,f,b[k+7],14,1735328473),f=hx_gg(f,g,h,d,b[k+12],20,-1926607734),d=hx_hh(d,f,g,h,b[k+5],4,-378558),h=hx_hh(h,d,f,g,b[k+8],11,-2022574463),g=hx_hh(g,h,d,f,b[k+11],16,1839030562),f=hx_hh(f,g,h,d,b[k+
14],23,-35309556),d=hx_hh(d,f,g,h,b[k+1],4,-1530992060),h=hx_hh(h,d,f,g,b[k+4],11,1272893353),g=hx_hh(g,h,d,f,b[k+7],16,-155497632),f=hx_hh(f,g,h,d,b[k+10],23,-1094730640),d=hx_hh(d,f,g,h,b[k+13],4,681279174),h=hx_hh(h,d,f,g,b[k+0],11,-358537222),g=hx_hh(g,h,d,f,b[k+3],16,-722521979),f=hx_hh(f,g,h,d,b[k+6],23,76029189),d=hx_hh(d,f,g,h,b[k+9],4,-640364487),h=hx_hh(h,d,f,g,b[k+12],11,-421815835),g=hx_hh(g,h,d,f,b[k+15],16,530742520),f=hx_hh(f,g,h,d,b[k+2],23,-995338651),d=hx_ii(d,f,g,h,b[k+0],6,-198630844),
h=hx_ii(h,d,f,g,b[k+7],10,1126891415),g=hx_ii(g,h,d,f,b[k+14],15,-1416354905),f=hx_ii(f,g,h,d,b[k+5],21,-57434055),d=hx_ii(d,f,g,h,b[k+12],6,1700485571),h=hx_ii(h,d,f,g,b[k+3],10,-1894986606),g=hx_ii(g,h,d,f,b[k+10],15,-1051523),f=hx_ii(f,g,h,d,b[k+1],21,-2054922799),d=hx_ii(d,f,g,h,b[k+8],6,1873313359),h=hx_ii(h,d,f,g,b[k+15],10,-30611744),g=hx_ii(g,h,d,f,b[k+6],15,-1560198380),f=hx_ii(f,g,h,d,b[k+13],21,1309151649),d=hx_ii(d,f,g,h,b[k+4],6,-145523070),h=hx_ii(h,d,f,g,b[k+11],10,-1120210379),g=hx_ii(g,
h,d,f,b[k+2],15,718787259),f=hx_ii(f,g,h,d,b[k+9],21,-343485551),d=safe_add(d,l),f=safe_add(f,m),g=safe_add(g,n),h=safe_add(h,p);return[d,f,g,h]}function hx_cmn(b,c,d,f,g,h){return safe_add(bit_rol(safe_add(safe_add(c,b),safe_add(f,h)),g),d)}function hx_ff(b,c,d,f,g,h,k){return hx_cmn(c&d|~c&f,b,c,g,h,k)}function hx_gg(b,c,d,f,g,h,k){return hx_cmn(c&f|d&~f,b,c,g,h,k)}function hx_hh(b,c,d,f,g,h,k){return hx_cmn(c^d^f,b,c,g,h,k)}function hx_ii(b,c,d,f,g,h,k){return hx_cmn(d^(c|~f),b,c,g,h,k)}
function safe_add(b,c){var d=(b&65535)+(c&65535);return(b>>16)+(c>>16)+(d>>16)<<16|d&65535}function bit_rol(b,c){return b<<c|b>>>32-c}function str2binl(b){for(var c=[],d=(1<<chrsz)-1,f=0;f<b.length*chrsz;f+=chrsz)c[f>>5]|=(b.charCodeAt(f/chrsz)&d)<<f%32;return c}function binl2hex(b){for(var c=hexcase?"0123456789ABCDEF":"0123456789abcdef",d="",f=0;f<4*b.length;f++)d+=c.charAt(b[f>>2]>>f%4*8+4&15)+c.charAt(b[f>>2]>>f%4*8&15);return d};var windowWidth=0,windowHeight=0,originTotalPageCount,totalPageCount,isTouch=isTouchDevice(),bookContainer,tmpContainer,slideBook,singleSlideBook,catalogBook,singleCatalogBook,flipBook,singlePageBook,flipShotButton,toolBar,printBody,helpBody,aboutBody,sharePanel,annotationPannel,videoGallery,photoGallery,languagePanel,frmSearch,frmShare,frmTableOfContent,bookmark,thumbnail,googleID,noteCookie,textRemark,signature,annotationShapes,QRcode,QRbutton,moreBar,pageIndexTextField,resizeBookAfterFlip=!1,auto_player,
hardPageEnable,uiBaseURL,phoneBaseURL,soundBaseURL,browserType,bookType=0,rightToLeft=!1,isFlipPdf=!1;global.crBefore=DeString("d2b0aa5705413c96");global.crAfter=DeString("d35426b1c0d303cfa3012949ee");
